/*
 ___________           __         .__         .__        
 /   _____/  | __ _____/  |_  ____ |  |__      |__| ____  
 \_____  \|  |/ // __ \   __\/ ___\|  |  \     |  |/  _ \ 
 /        \    <\  ___/|  | \  \___|   Y  \    |  (  <_> )
 /_______  /__|_ \\___  >__|  \___  >___|  / /\ |__|\____/ 
 \/     \/    \/          \/     \/  \/            
 -------------------------------------------------------------------
 Sketch API v3.7.7.408
 Copyright (c) Sketch.IO, Inc. <https://sketch.io>
 -------------------------------------------------------------------
 Built for "Sketchpad 3.5: Draw, Create, Share!"
 -------------------------------------------------------------------
 
 SketchAPI uses certain modules under license from third parties.
 Sketch.IO offers the SketchAPI, pursuant to its own license,
 to you on the condition you accept the following modules under
 their respective licenses:
 -------------------------------------------------------------------
 module: i18n.js (2014-10-07)
 src: https://github.com/gammasoft/browser-i18n
 author: Renato Gama
 copyright: (c) 2013 Gammasoft
 license: MIT
 
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:
 
 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.
 
 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 module: sprintf.js (2014-11-04)
 src: https://github.com/jakobwesthoff/sprintf.js
 author: Jakob Westhoff
 copyright: (c) 2010 Jakob Westhoff
 license: MIT
 -------------------------------------------------------------------
 module: Base64 shim
 src: http://code.google.com/p/stringencoders/
 authors: Nick Galbreath
 copyright: (c) 2010 Nick Galbreath
 license: MIT
 -------------------------------------------------------------------
 module: requestAnimationFrame (2015-03-04)
 src: https://github.com/kof/animationFrame
 author: Oleg Slobodskoi
 copyright: (c) 2013 Oleg Slobodskoi
 license: MIT
 Oleg Slobodskoi 2015
 @website https://github.com/kof/animationFrame
 @license MIT
 -------------------------------------------------------------------
 module: Blob.js (2014-07-01)
 src: https://github.com/eligrey/Blob.js
 author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
 license: MIT
 -------------------------------------------------------------------
 module: Canvas.toBlob.js (2013-12-27)
 src: https://github.com/eligrey/canvas-toBlob.js
 author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
 license: MIT
 -------------------------------------------------------------------
 module: FileSaver.js (2015-01-04)
 src: https://github.com/eligrey/FileSaver.js
 author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
 license: MIT
 -------------------------------------------------------------------
 module: Parse URI v1.2.2
 src: https://gist.github.com/kflorence/1169555
 author: Steven Levithan & Kyle Florence
 copyright: (c) 2007 Steven Levithan
 license: MIT
 -------------------------------------------------------------------
 module: CSSMatrix shim
 src: https://github.com/camupod/CSSMatrix
 authors: Cameron Lakenen & Arian Stolwijk
 copyright: (c) 2013 Cameron Lakenen & Arian Stolwijk
 license: MIT
 -------------------------------------------------------------------
 module: CSSMatrix.decompose
 src: https://github.com/joelambert/morf/
 author: Joe Lambert
 copyright: (c) 2011 Joe Lambert <http://www.joelambert.co.uk>
 license: MIT
 -------------------------------------------------------------------
 module: Catmull-Rom Spline
 src: https://github.com/almende/vis/
 author: Almende B.V.
 copyright: (c) 2014 Almende B.V.
 license: MIT
 -------------------------------------------------------------------
 module: CSSMatrix shim
 src: https://github.com/camupod/CSSMatrix
 authors: Cameron Lakenen & Arian Stolwijk
 copyright: (c) 2013 Cameron Lakenen & Arian Stolwijk
 license: MIT
 -------------------------------------------------------------------
 module: CSSMatrix.decompose
 src: https://github.com/joelambert/morf/
 author: Joe Lambert
 copyright: (c) 2011 Joe Lambert <http://www.joelambert.co.uk>
 license: MIT
 -------------------------------------------------------------------
 module: arcToBezier - Elliptical Arc to Bezier Curve(s)
 src: http://www.levien.com/
 author: Raph Levien <raph@artofcode.com>
 copyright: (c) 2002 USC/Information Sciences Institute
 license: MIT
 -------------------------------------------------------------------
 module: CSS Gradient Parser
 src: http://lea.verou.me/demos/cssgradientsplease/
 author: Lea Verou
 copyright: (c) 2011 Lea Verou. All rights reserved.
 license: MIT
 */
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    function g(a) {
        if (!a || a.nodeName || "object" !== typeof a) return a;
        var p = new a.constructor,
            m;
        for (m in a) p[m] = !a[m] || a.nodeName || "object" !== typeof a[m] ? a[m] : g(a[m]);
        return p
    }

    function f(b, p, m, v, r, h) {
        v = v || {};
        if ("[object Object]" === String(b)) return l(b, r);
        if (b && p && m)
            if ("string" === typeof b && "ready" === p) d(b, v, m);
            else {
                if ("string" === typeof b && (b = document.querySelectorAll(b), 0 === b.length)) {
                    e("target does not exist", arguments);
                    return
                }
                if (0 < b.length && b !== window)
                    if (1 === b.length) b = b[0];
                    else {
                        for (var t = {},
                                E = 0, z = b.length; E < z; E++) {
                            var C = f(b[E], p, m, g(v), r);
                            C && (t[E] = C)
                        }
                        return k.wrapBatch(t)
                    }
                    "string" === typeof p && (p = p.toLowerCase().split(/[|, ]/), 1 === p.length && (p = p.shift()));
                if ("string" !== typeof p) return q(b, p, m, v, r);
                0 === p.indexOf("on") && (p = p.substr(2));
                if ("object" !== typeof b) return e("target must be an element", arguments);
                if ("function" !== typeof m) return e("listener must be a function", arguments);
                t = v.useCapture || !1;
                E = p + "." + a(b) + "." + a(m) + "." + (t ? 1 : 0);
                if (k.gestureHandler[p])
                    if ("remove" === r) {
                        if (b[E]) return b[E].remove(),
                            b[E]
                    } else {
                        if ("add" === r) {
                            if (b[E]) return b[E].add(), b[E];
                            b[E] && console.warn("handle", b[E]);
                            if (v.useCall) {
                                var A = m;
                                m = function(m, p) {
                                    for (var a in p) m[a] = p[a];
                                    return A.call(b, m)
                                }
                            }
                            v.uid = E;
                            v.gesture = p;
                            v.target = b;
                            v.listener = m;
                            v.fromOverwrite = h;
                            return b[E] = k.proxy[p](v)
                        }
                    }
                else {
                    for (var I = c(p, v.strict), B = I.length, E = 0; E < B; E++)
                        if ("remove" === r) b[u](I[E], m, t);
                        else if ("add" === r) b[w](I[E], m, t);
                    return {
                        type: p,
                        target: b,
                        listener: m,
                        add: function() {
                            for (var p = 0; p < B; p++) k.add(b, I[p], m, v)
                        },
                        remove: function() {
                            for (var p = 0; p < B; p++) k.remove(b,
                                I[p], m, v)
                        }
                    }
                }
            }
        else e("target, type and listener are required", arguments)
    }

    function q(a, p, m, v, b) {
        var c, h = {};
        if (Array.isArray(p))
            for (var d = 0, u = p.length; d < u; d++) {
                var e = p[d];
                e && (c = f(a, e, m, g(v), b)) && (h[e] = c)
            } else
                for (d in p)(e = p[d]) && (c = e.listener ? f(a, d, e.listener, g(e), b) : f(a, d, e, g(v), b)) && (h[d] = c);
        return k.wrapBatch(h)
    }

    function l(a, p) {
        var m = a.target;
        if (a.type && a.listener) {
            var v = a.listener;
            return f(m, a.type, v, a, p)
        }
        var b = {},
            c;
        for (c in a) {
            var v = a[c],
                h = typeof v;
            if ("string" === h || "number" === h || "boolean" === h) b[c] =
                v
        }
        var h = {},
            d;
        for (d in a) {
            c = a[d];
            if ("function" === typeof c) var v = c,
                u = g(b);
            else if ("function" === typeof c.listener) {
                var v = c.listener,
                    u = g(b),
                    e;
                for (e in c) u[e] = c[e]
            } else continue;
            c = d.toLowerCase().split(/[|, ]/);
            for (var w = 0; w < c.length; w++) h[d] = k.add(m, c[w], v, u, p)
        }
        return h
    }

    function d(a, p, m) {
        var v = k.now(),
            b = p.timeout,
            c = setInterval(function() {
                0 === k.useStallOnReady && (k.now() - v > b && clearInterval(c), document.querySelector(a) && (clearInterval(c), setTimeout(m, 1)))
            }, p.interval || 1E3 / 60)
    }

    function e(a, p) {
        "undefined" !==
        typeof console && "undefined" !== typeof console.error && console.error(a, p)
    }

    function c(a, p) {
        var m = document.addEventListener ? "" : "on",
            v = b[a];
        if (isFinite(v) && !p) {
            var r = [],
                c;
            for (c in k.supports) r.push(m + h[c][v]);
            return r
        }
        return [m + a]
    }
    k.useCSSTransform = !1;
    k.useIdentifiers = !1;
    k.useStallOnReady = 0;
    k.POINTER_TYPE_UNAVAILABLE = 1;
    k.POINTER_TYPE_TOUCH = 2;
    k.POINTER_TYPE_PEN = 3;
    k.POINTER_TYPE_MOUSE = 4;
    k.add = function(a, p, m, v) {
        return f(a, p, m, v, "add")
    };
    k.remove = function(a, p, m, v) {
        return f(a, p, m, v, "remove")
    };
    k.stop = function(a) {
        a &&
            (a.stopPropagation && a.stopPropagation(), a.cancelBubble = !0, a.cancelBubbleCount = 0)
    };
    k.prevent = function(a) {
        a && (a.preventDefault ? a.preventDefault() : a.preventManipulation ? a.preventManipulation() : a.returnValue = !1)
    };
    k.cancel = function(a) {
        k.stop(a);
        k.prevent(a)
    };
    k.blur = function() {
        if (k.isEditingText()) {
            var a = document.activeElement;
            a.blur && a.blur()
        }
    };
    k.isEditingText = function() {
        var a = document.activeElement;
        if (a) {
            var p = a.nodeName;
            if ("INPUT" === p || "TEXTAREA" === p || "true" === a.contentEditable) return !0
        }
        return !1
    };
    k.detectEvent =
        function(a, p) {
            p = p || window;
            a = "on" + a;
            if (a in p) return !0;
            p.setAttribute || (p = document.createElement("div"));
            if (p.setAttribute && p.removeAttribute) {
                p.setAttribute(a, "");
                var m = "function" === typeof p[a];
                void 0 !== p[a] && (p[a] = null);
                p.removeAttribute(a);
                return m
            }
        };
    k.detectCSSPrefix = function(a, p) {
        p = p || document.documentElement;
        for (var m = getComputedStyle(p, ""), v = ["", "-moz-", "-webkit-", "-ms-", "-o-"], b = 0; b < v.length; b++)
            for (var c = v[b], h = 0; h < m.length; h++)
                if (m[h] === c + a) return c
    };
    k.bulk = function(a, p) {
        for (var m in a) {
            var v =
                a[m];
            if (v && v[p]) v[p]()
        }
    };
    k.wrapBatch = function(a) {
        return {
            add: function() {
                k.bulk(a, "add")
            },
            remove: function() {
                k.bulk(a, "remove")
            },
            pause: function() {
                k.bulk(a, "pause")
            },
            resume: function() {
                k.bulk(a, "resume")
            }
        }
    };
    var h = {
            msPointer: ["MSPointerDown", "MSPointerMove", "MSPointerUp"],
            pointer: ["pointerdown", "pointermove", "pointerup"],
            touch: ["touchstart", "touchmove", "touchend"],
            mouse: ["mousedown", "mousemove", "mouseup"]
        },
        b = {
            MSPointerDown: 0,
            MSPointerMove: 1,
            MSPointerUp: 2,
            pointerdown: 0,
            pointermove: 1,
            pointerup: 2,
            touchstart: 0,
            touchmove: 1,
            touchend: 2,
            mousedown: 0,
            mousemove: 1,
            mouseup: 2
        };
    k.supports = {};
    window.navigator.pointerEnabled ? k.supports.pointer = !0 : window.navigator.msPointerEnabled && (k.supports.msPointer = !0);
    k.detectEvent("touchstart") && (k.supports.touch = !0);
    k.detectEvent("mousedown") && (k.supports.mouse = !0);
    var a = function() {
            var a = 1;
            return function(p) {
                return p === window ? "#window" : p === document ? "#document" : p.eventJSId ? p.eventJSId : p.eventJSId = a++
            }
        }(),
        w = document.addEventListener ? "addEventListener" : "attachEvent",
        u = document.removeEventListener ?
        "removeEventListener" : "detachEvent";
    return k
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.Pointer = function(f) {
        var g = f.uid;
        f.target = f.target || window;
        f.doc = f.target.ownerDocument || f.target;
        f.minFingers = f.minFingers || f.fingers || 1;
        f.maxFingers = f.maxFingers || f.fingers || Infinity;
        f.position = f.position || "relative";
        f.listenerOnSetup = f.listener;
        k.useCSSTransform && !1 !== f.useCSSTransform && (f.useCSSTransform = !0);
        f.pointers = {};
        f.fingers = 0;
        var d = {};
        d.gesture = f.gesture;
        d.target = f.target;
        d.env = f.env || {};
        d.listener = f.listener;
        d.proxy = function(c) {
            (d.listener = c)(d.event,
                d)
        };
        d.attached = !0;
        d.add = function() {
            if (!1 === d.attached) return d.attached = !0, f._pointerDown && f._pointerDown.add(), f._pointerMove && f._pointerMove.add(), f._pointerUp && f._pointerUp.add(), f._pointerOver && f._pointerOver.add(), f._pointerOut && f._pointerOut.add(), f.target[g] = d
        };
        d.remove = function() {
            !0 === d.attached && (d.attached = !1, d.resetPointers(), f._pointerDown && f._pointerDown.remove(), f._pointerMove && f._pointerMove.remove(), f._pointerUp && f._pointerUp.remove(), f._pointerOver && f._pointerOver.remove(), f._pointerOut &&
                f._pointerOut.remove(), delete f.target[g])
        };
        var e = 0;
        d.pause = function() {
            f._pointerMove && f._pointerMove.remove();
            f._pointerUp && f._pointerUp.remove();
            e = f.fingers;
            f.fingers = 0
        };
        d.resume = function() {
            f._pointerMove && f._pointerMove.add();
            f._pointerUp && f._pointerUp.add();
            f.fingers = e
        };
        d.resetPointer = function(c) {
            var h = f.pointers || {};
            h[c] && (delete h[c], f.fingers--)
        };
        d.resetPointers = function() {
            f.pointers = {};
            f.fingers = 0
        };
        d.resetBoundingBox = function() {
            d.bbox = f.bbox = k.getBBox(f.target);
            var c = f.pointers || {},
                h;
            for (h in c) c[h].dirty = !0
        };
        d.hasMoved = function(c) {
            c = c || 1;
            var h = d.start.x - d.x,
                b = d.start.y - d.y;
            return 1 === c ? !(!h && !b) : Math.sqrt(h * h + b * b) >= c
        };
        d.distanceMoved = function() {
            var c = d.start.x - d.x,
                h = d.start.y - d.y;
            return Math.sqrt(c * c + h * h)
        };
        return d
    };
    var f = k.supports;
    k.isMouse = !!f.mouse;
    k.isPointer = !!f.pointer || !!f.msPointer;
    k.isTouch = !!f.touch;
    g.getPointerID = function(f, g) {
        var d = Object.keys(f);
        return g ? d.join(",") : d
    };
    g.getPoint = function(f, g) {
        var d = f.pageX,
            e = f.pageY;
        if ("absolute" === g.position) return {
            x: d,
            y: e
        };
        var c = g.bbox.matrix,
            d = c.point3d({
                x: d,
                y: e,
                z: -(d * c.m13 + e * c.m23 + c.m43) / c.m33
            }),
            e = d.x / d.w,
            c = d.y / d.w;
        0 > d.x / e && (e = 0 > d.x ? -16777215 : 16777215);
        0 > d.y / c && (c = 0 > d.y ? -16777215 : 16777215);
        return {
            x: e,
            y: c
        }
    };
    g.setPointerStart = function(f, l, d, e) {
        e = l.pointers[e] = {};
        var c = l.bbox,
            h = l.useCSSTransform,
            b = d.pageX,
            a = d.pageY;
        h && (d = g.getPoint(d, l), b = d.x, a = d.y);
        switch (l.position) {
            case "differenceFromLast":
            case "difference":
                e.offsetX = b;
                e.offsetY = a;
                break;
            case "move":
                e.offsetX = b - c.x1;
                e.offsetY = a - c.y1;
                break;
            case "absolute":
                e.offsetX = 0;
                e.offsetY = 0;
                break;
            default:
                h ? (e.offsetX = -c.scrollLeft - c.pageXOffset, e.offsetY = -c.scrollTop - c.pageYOffset) : (e.offsetX = c.x1 - c.scrollLeft, e.offsetY = c.y1 - c.scrollTop)
        }
        l = b - e.offsetX;
        d = a - e.offsetY;
        e.rotation = 0;
        e.scale = 1;
        e.startTime = f.startTime;
        e.moveTime = f.startTime;
        e.move = {
            x: l,
            y: d
        };
        e.start = {
            x: l,
            y: d
        };
        return e
    };
    g.isPointerStart = function(f, l, d) {
        l.event = f;
        l.listener = d.listenerOnSetup;
        var e = (f.type || "mousedown").toLowerCase();
        0 === e.indexOf("mouse") ? (k.isMouse = !0, k.isTouch = !1, k.isPointer = !1) : 0 === e.indexOf("touch") ? (k.isMouse = !1, k.isTouch = !0, k.isPointer = !1) : 0 === e.indexOf("mspointer") && (k.isMouse = !1, k.isTouch = !1, k.isPointer = !0);
        l.startTime = k.now();
        var e = !d.fingers,
            c = d.pointers;
        f = g.getChangedTouches(f);
        for (var h = f.length, b = 0; b < h; b++) {
            var a = f[b],
                w = a.identifier,
                u = c[w];
            if (d.fingers) {
                if (d.fingers >= d.maxFingers) return l.identifier = g.getPointerID(c, !0), e;
                for (var x in c)
                    if (c[x].up) {
                        delete c[x];
                        d.cancel = !0;
                        d.fingers++;
                        u = g.setPointerStart(l, d, a, w);
                        break
                    }
                void 0 === u && (d.fingers++, g.setPointerStart(l, d, a, w))
            } else l.resetBoundingBox(), d.cancel = !1, d.fingers = 1, d.pointers = {}, g.setPointerStart(l, d, a, w)
        }
        l.identifier = g.getPointerID(d.pointers, !0);
        return e
    };
    g.isPointerEnd = function(f, l, d, e) {
        for (var c = d.pointers, h = f.touches || [], b = {}, a = 0, w = h.length; a < w; a++) b[h[a].identifier] = !0;
        for (var u in c) h = c[u], b[u] || h.up || (e && e(f, "up"), h.up = !0, d.fingers--);
        return 0 === w ? (f = g.getPointerID(c), d.fingers = 0, d.gestureFingers = f.length, l.identifier = f.join(","), !0) : !1
    };
    (function() {
        var f = 65535;
        k.getPID = function(g) {
            return isFinite(g) ? f += g : f
        };
        k.setPID = function(g) {
            isFinite(g) && (f = g)
        };
        g.getChangedTouches =
            function() {
                var g = function() {
                        var d;
                        return function(c) {
                            return -1 !== c.type.indexOf("own") && c !== d ? (d = c, d.PID = ++f, f) : d ? d.PID : f
                        }
                    }(),
                    d = function() {
                        var d = {},
                            c = {
                                touchstart: function(c, b) {
                                    var a = d[b];
                                    if (a && a.event === c) return a.count++, a.PID;
                                    d[b] = {
                                        PID: ++f,
                                        count: 1,
                                        event: c
                                    };
                                    return f
                                },
                                touchend: function(c, b) {
                                    var a = d[b];
                                    if (a) return !--a.count && delete d[b], a.PID;
                                    console.warn(b)
                                },
                                touchmove: function(c, b) {
                                    var a = d[b];
                                    if (a) return a.PID;
                                    console.warn(b)
                                }
                            };
                        return function(d, b) {
                            return c[d.type](d, b.identifier)
                        }
                    }();
                return function(e) {
                    if (e.changedTouches) {
                        if (k.useIdentifiers) {
                            for (var c = [], h = e.changedTouches, b = 0; b < h.length; b++) {
                                var a = h[b],
                                    w = d(e, a);
                                c.push({
                                    clientX: a.clientX,
                                    clientY: a.clientY,
                                    pageX: a.pageX,
                                    pageY: a.pageY,
                                    screenX: a.screenX,
                                    screenY: a.screenY,
                                    identifier: w,
                                    pointerId: w,
                                    pointerType: 2
                                })
                            }
                            return c
                        }
                        return e.changedTouches
                    }
                    if (0 <= e.pageX + e.pageY) return [{
                        clientX: e.clientX,
                        clientY: e.clientY,
                        pageX: e.pageX,
                        pageY: e.pageY,
                        screenX: e.screenX,
                        screenY: e.screenY,
                        identifier: g(e),
                        pointerId: 1,
                        pointerType: 4
                    }];
                    e = e || window.event;
                    c = document.documentElement;
                    return [{
                        clientX: e.clientX,
                        clientY: e.clientY,
                        pageX: e.clientX + c.scrollLeft,
                        pageY: e.clientY + c.scrollTop,
                        screenX: e.screenX,
                        screenY: e.screenY,
                        identifier: g(e),
                        pointerId: 1,
                        pointerType: 4
                    }]
                }
            }()
    })();
    (function() {
        var f, g;
        k.getPageXY = function(d) {
            if (d.changedTouches) return (d = d.changedTouches) && d.length ? (d = d[0], {
                x: f = d.pageX,
                y: g = d.pageY
            }) : {
                x: f,
                y: g
            };
            if (0 <= d.pageX + d.pageY) return {
                x: d.pageX,
                y: d.pageY
            };
            d = d || window.event;
            var e = document.documentElement;
            return {
                x: d.clientX + e.scrollLeft,
                y: d.clientY + e.scrollTop
            }
        }
    })();
    (function() {
        var f, g;
        k.getClientXY = function(d) {
            if (d.changedTouches) return (d =
                d.changedTouches) && d.length ? (d = d[0], {
                x: f = d.clientX,
                y: g = d.clientY
            }) : {
                x: f,
                y: g
            };
            d = d || window.event;
            return {
                x: d.clientX,
                y: d.clientY
            }
        }
    })();
    k.getPointInNode = function(f, l) {
        var d = k.getBBox(l);
        if (k.useCSSTransform) return g.getPoint(f, {
            bbox: d
        });
        var e = k.getClientXY(f);
        return {
            x: e.x - d.x1 + d.scrollLeft,
            y: e.y - d.y1 + d.scrollTop
        }
    };
    k.convertPointFromNode = function(f, g, d) {
        var e = g.parentNode;
        g = k.getMatrix(g, e).inverse();
        d = k.getMatrix(d, e);
        var e = f.x,
            c = f.y;
        f = e * d.m11 + c * d.m21 + d.m31;
        d = e * d.m12 + c * d.m22 + d.m32;
        g = g.point3d({
            x: f,
            y: d,
            z: -(f * g.m13 + d * g.m23 + g.m43) / g.m33
        });
        f = g.x / g.w;
        d = g.y / g.w;
        return {
            x: f,
            y: d
        }
    };
    k.getDocumentScroll = function(f) {
        f = f || {};
        if (void 0 !== window.pageXOffset) f.pageXOffset = window.pageXOffset, f.pageYOffset = window.pageYOffset;
        else if ("CSS1Compat" === document.compatMode) f.pageXOffset = document.documentElement.scrollLeft, f.pageYOffset = document.documentElement.scrollTop;
        else {
            var g = document.body;
            f.pageXOffset = g.scrollLeft;
            f.pageYOffset = g.scrollTop
        }
        return f
    };
    k.getMatrix = function() {
        var f;
        return function(g, d) {
            void 0 === f &&
                (f = k.detectCSSPrefix("transform") || "");
            for (var e = new CSSMatrix, c = g; null !== c && c !== d;) {
                var h = getComputedStyle(c),
                    b = h.getPropertyValue(f + "perspective");
                if (b && "none" !== b) var a = h.getPropertyValue(f + "perspective-origin").split(" "),
                    w = parseFloat(a[0]) || 0,
                    u = parseFloat(a[1]) || 0,
                    b = -1 / parseFloat(b),
                    a = (new CSSMatrix).translate(w, u),
                    a = a.multiply(new CSSMatrix("matrix3d(1,0,0,0, 0,1,0,0, 0,0,1," + b + ", 0,0,0,1)")),
                    a = a.translate(-w, -u),
                    e = a.multiply(e);
                var x = 0,
                    p = 0,
                    b = h.getPropertyValue("position");
                "static" !== b && (x +=
                    c.offsetLeft, p += c.offsetTop);
                var m = c === document.body;
                !1 === m && (x -= c.scrollLeft, p -= c.scrollTop);
                var v = h.getPropertyValue(f + "transform");
                v && "none" !== v ? (a = h.getPropertyValue(f + "transform-origin").split(" "), w = parseFloat(a[0]) || 0, u = parseFloat(a[1]) || 0, h = parseFloat(a[2]) || 0, a = (new CSSMatrix).translate(w + x, u + p, h), a = a.multiply(new CSSMatrix(v)), a = a.translate(-w, -u, -h)) : a = (new CSSMatrix).translate(x, p);
                e = a.multiply(e);
                if (m || "fixed" === b) break;
                else c = c.parentNode
            }
            return e
        }
    }();
    k.getBBox = function() {
        function f(g,
            d) {
            var e = parseFloat(g.getPropertyValue(d), 10);
            return e === +e ? e : 0
        }
        return function(g) {
            if (g === window || g === document) g = document.body;
            var d = {},
                e = g.getBoundingClientRect();
            d.width = e.width;
            d.height = e.height;
            d.x1 = e.left;
            d.y1 = e.top;
            d.scaleX = e.width / g.offsetWidth || 1;
            d.scaleY = e.height / g.offsetHeight || 1;
            d.scrollLeft = 0;
            d.scrollTop = 0;
            e = getComputedStyle(g);
            if ("border-box" === e.getPropertyValue("box-sizing") === !1) {
                var c = f(e, "border-left-width"),
                    h = f(e, "border-right-width"),
                    b = f(e, "border-bottom-width"),
                    a = f(e, "border-top-width");
                d.border = [c, h, a, b];
                d.x1 += c;
                d.y1 += a;
                d.width -= h + c;
                d.height -= b + a
            }
            d.x2 = d.x1 + d.width;
            d.y2 = d.y1 + d.height;
            k.useCSSTransform && (d.matrix = k.getMatrix(g).inverse());
            for (e = e.getPropertyValue("position"); null !== g && g !== document.body && void 0 !== g.scrollTop;) {
                e = getComputedStyle(g);
                e = e.getPropertyValue("position");
                if ("absolute" !== e)
                    if ("fixed" === e) {
                        d.scrollTop = g.scrollLeft;
                        d.scrollLeft = g.scrollTop;
                        break
                    } else d.scrollLeft += g.scrollLeft, d.scrollTop += g.scrollTop;
                g = g.parentNode
            }
            k.getDocumentScroll(d);
            d.scrollLeft -= d.pageXOffset;
            d.scrollTop -= d.pageYOffset;
            return d
        }
    }();
    k.now = function() {
        if ("object" === typeof window && window.performance && window.performance.now) {
            var f = window.performance;
            return f.now.bind(f)
        }
        var g = Date.now();
        return function() {
            return Date.now() - g
        }
    }();
    k.gestureHandler = k.gestureHandler || {};
    k.register = function(f) {
        k.gestureHandler[f] = g[f]
    }
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {}),
        f = /iPhone|iPad|iPod/i.test(navigator.userAgent);
    g.click = function(q) {
        q.gesture = q.gesture || "click";
        q.maxFingers = q.maxFingers || q.fingers || 1;
        q.onPointerDown = function(d) {
            g.isPointerStart(d, l, q) && (q._pointerUp = k.add(q.doc, "mouseup", q.onPointerUp))
        };
        q.onPointerUp = function(d) {
            if ((!f || "mouseup" !== d.type) && g.isPointerEnd(d, l, q) && (q._pointerUp.remove(), !d.cancelBubble)) {
                var e = g.getChangedTouches(d)[0],
                    c = q.bbox,
                    h = k.getBBox(q.target),
                    b = e.pageY - h.pageYOffset,
                    e = e.pageX - h.pageXOffset;
                if (e > c.x1 && b > c.y1 && e < c.x2 && b < c.y2 && c.scrollTop === h.scrollTop) {
                    for (var a in q.pointers)
                        if (c = q.pointers[a]) {
                            l.x = c.start.x;
                            l.y = c.start.y;
                            break
                        }
                    l.state = "click";
                    l.listener(d, l)
                }
            }
        };
        q._pointerDown = k.add(q.target, "mousedown", q.onPointerDown);
        var l = g.Pointer(q);
        return l
    };
    k.register("click")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.dbltap = g.dblclick = function(f) {
        f.gesture = f.gesture || "dbltap";
        f.maxFingers = f.maxFingers || f.fingers || 1;
        var q, l, d, e, c;
        f.onPointerDown = function(b) {
            var a = g.getChangedTouches(b);
            q && !l ? (c = a[0], l = k.now() - q) : (e = a[0], q = k.now(), l = 0, clearTimeout(d), d = setTimeout(function() {
                q = 0
            }, 700));
            g.isPointerStart(b, h, f) && ((f._pointerMove = k.add(f.doc, "mousemove", f.onPointerMove)).listener(b), f._pointerUp = k.add(f.doc, "mouseup", f.onPointerUp))
        };
        f.onPointerMove = function(b) {
            if (q && !l) c =
                g.getChangedTouches(b)[0];
            else if (!c) return;
            b = f.bbox;
            var a = c.pageX - b.x1,
                h = c.pageY - b.y1;
            0 < a && a < b.width && 0 < h && h < b.height && 25 >= Math.abs(c.pageX - e.pageX) && 25 >= Math.abs(c.pageY - e.pageY) || (f._pointerMove.remove(), clearTimeout(d), q = l = 0)
        };
        f.onPointerUp = function(b) {
            g.isPointerEnd(b, h, f) && (f._pointerMove.remove(), f._pointerUp.remove());
            if (q && l) {
                if (700 >= l) {
                    for (var a in f.pointers) {
                        a = f.pointers[a];
                        h.x = a.start.x;
                        h.y = a.start.y;
                        break
                    }
                    h.state = f.gesture;
                    h.listener(b, h)
                }
                clearTimeout(d);
                q = l = 0
            }
        };
        f._pointerDown = k.add(f.target,
            "mousedown", f.onPointerDown);
        var h = g.Pointer(f);
        return h
    };
    k.register("dbltap");
    k.register("dblclick")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.dragElement = function(f, q) {
        g.drag({
            event: q,
            target: f,
            position: "move",
            listener: function(g, d) {
                f.style.left = d.x + "px";
                f.style.top = d.y + "px";
                k.prevent(g)
            }
        })
    };
    g.drag = function(f) {
        function q(m) {
            e.fingers = f.fingers;
            for (var a = g.getChangedTouches(m), p = 0, b = a.length; p < b; p++) {
                var c = a[p],
                    d = c.identifier,
                    h = f.pointers[d];
                if (h) {
                    h.dirty && (h = g.setPointerStart(e, f, c, d));
                    h.pageX = c.pageX;
                    h.pageY = c.pageY;
                    if (f.useCSSTransform) var u = g.getPoint(h, f),
                        x = u.x,
                        u = u.y;
                    else x = c.pageX, u = c.pageY;
                    e.identifier = d;
                    e.pointerId = c.pointerId;
                    e.pointerType = c.pointerType;
                    e.start = h.start;
                    e.x = x - h.offsetX;
                    e.y = u - h.offsetY;
                    w && (h.offsetX = x, h.offsetY = u);
                    e.listener(m, e)
                }
            }
        }

        function l(m) {
            g.isPointerStart(m, e, f) && (a && f._pointerMove.remove(), f._pointerMove = k.add(h, "mousemove", x), f._pointerUp = k.add(h, "mouseup", p))
        }

        function d() {
            e.attached && (f._pointerMove = k.add(b, "mousemove", x))
        }
        f.gesture = "drag";
        var e = g.Pointer(f),
            c = f.event,
            h = f.doc,
            b = f.target,
            a = !0 === f.monitor,
            w = "differenceFromLast" === f.position,
            u = f.onPointerDown =
            function(m) {
                e.event = m;
                e.pointerDown = !0;
                e.pointerMove = !1;
                e.pointerMoved = !1;
                e.pointerUp = !1;
                e.pointerStart = !0;
                e.pointerDrag = !1;
                e.pointerEnd = !1;
                e.state = "down";
                a && (e.resetPointer(f.monitorId), f.monitorId = void 0);
                l(m);
                q(m)
            },
            x = f.onPointerMove = function(m) {
                e.event = m;
                e.pointerMove = !0;
                e.pointerMoved = !0;
                e.pointerStart = !1;
                e.pointerDrag = e.pointerDown;
                e.pointerEnd = !1;
                e.state = "move";
                f.fingers ? q(m) : a && (l(m), q(m), f.monitorId = e.identifier)
            },
            p = f.onPointerUp = function(m) {
                e.event = m;
                e.pointerDown = !1;
                e.pointerMove = !1;
                e.pointerUp = !0;
                e.pointerStart = !1;
                e.pointerDrag = !1;
                e.pointerEnd = !0;
                e.state = "up";
                g.isPointerEnd(m, e, f, q) && (f._pointerMove.remove(), f._pointerUp.remove(), a && d())
            };
        e.pointerDown = !1;
        e.pointerMove = !1;
        e.pointerMoved = !1;
        e.pointerUp = !0;
        e.pointerStart = !1;
        e.pointerDrag = !1;
        e.pointerEnd = !1;
        a && d();
        c ? u(c) : f._pointerDown = k.add(b, "mousedown", u);
        return e
    };
    k.register("drag")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {}),
        f = Math.PI / 180,
        q = function(f, d) {
            var e = 0,
                c = 0,
                h = 0,
                b;
            for (b in d) {
                var a = d[b];
                !0 !== a.up && (e += a.move.x, c += a.move.y, h++)
            }
            f.x = e / h;
            f.y = c / h;
            return f
        };
    g.gesture = function(l) {
        l.gesture = l.gesture || "gesture";
        l.minFingers = l.minFingers || l.fingers || 2;
        l.onPointerDown = function(e) {
            var c = l.fingers;
            g.isPointerStart(e, d, l) && (l._pointerMove = k.add(l.doc, "mousemove", l.onPointerMove), l._pointerUp = k.add(l.doc, "mouseup", l.onPointerUp));
            l.fingers === l.minFingers && c !== l.fingers && (c = l.pointers,
                d.fingers = l.minFingers, d.scale = 1, d.rotation = 0, d.identifier = g.getPointerID(c, !0), d.state = "start", d.pointerStart = !0, d.pointerChange = !1, d.pointerEnd = !1, q(d, c), d.listener(e, d))
        };
        l.onPointerMove = function(e, c) {
            for (var h = l.pointers, b = g.getChangedTouches(e), a = b.length, w = 0; w < a; w++) {
                var u = b[w],
                    x = u.identifier,
                    p = h[x];
                p && (p.move.x = u.pageX - p.offsetX, p.move.y = u.pageY - p.offsetY)
            }
            if (!(l.fingers < l.minFingers)) {
                b = [];
                w = a = 0;
                q(d, h);
                for (x in h)
                    if (u = h[x], !0 !== u.up && (p = u.start, p.x !== d.x || p.y !== d.y)) {
                        if (void 0 === p.distance) {
                            var m =
                                p.x - d.x,
                                v = p.y - d.y;
                            p.distance = Math.sqrt(m * m + v * v);
                            p.angle = Math.atan2(m, v) / f
                        }
                        var m = u.move.x - d.x,
                            v = u.move.y - d.y,
                            r = Math.sqrt(m * m + v * v),
                            a = a + r / p.distance,
                            m = Math.atan2(m, v) / f,
                            p = (p.angle - m + 360) % 360 - 180;
                        u.DEG2 = u.DEG1;
                        u.DEG1 = 0 < p ? p : -p;
                        u.DEG2 === +u.DEG2 && (u.rotation = 0 < p ? u.rotation + (u.DEG1 - u.DEG2) : u.rotation - (u.DEG1 - u.DEG2), w += u.rotation);
                        b.push(u.move)
                    }
                d.touches = b;
                d.fingers = l.fingers;
                d.scale = a / l.fingers;
                d.rotation = w / l.fingers;
                d.state = "change";
                d.pointerStart = !1;
                d.pointerChange = !0;
                d.pointerEnd = !1;
                d.listener(e, d)
            }
        };
        l.onPointerUp = function(e) {
            g.isPointerEnd(e, d, l) && (l._pointerMove.remove(), l._pointerUp.remove());
            "end" !== d.state && l.fingers < l.minFingers && (d.fingers = l.fingers, d.state = "end", d.pointerStart = !1, d.pointerChange = !1, d.pointerEnd = !0, d.listener(e, d))
        };
        l._pointerDown = k.add(l.target, "mousedown", l.onPointerDown);
        var d = g.Pointer(l);
        return d
    };
    k.register("gesture")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    (k.proxy || (k.proxy = {})).shake = function(g) {
        var f = {
                gesture: "devicemotion",
                acceleration: {},
                accelerationIncludingGravity: {},
                target: g.target,
                listener: g.listener,
                remove: function() {
                    window.removeEventListener("devicemotion", e, !1)
                }
            },
            q = k.now(),
            l = {
                x: 0,
                y: 0,
                z: 0
            },
            d = {
                x: {
                    count: 0,
                    value: 0
                },
                y: {
                    count: 0,
                    value: 0
                },
                z: {
                    count: 0,
                    value: 0
                }
            },
            e = function(c) {
                var h = c.accelerationIncludingGravity;
                l.x = .8 * l.x + (1 - .8) * h.x;
                l.y = .8 * l.y + (1 - .8) * h.y;
                l.z = .8 * l.z + (1 - .8) * h.z;
                f.accelerationIncludingGravity = l;
                f.acceleration.x = h.x - l.x;
                f.acceleration.y = h.y - l.y;
                f.acceleration.z = h.z - l.z;
                if ("devicemotion" === g.gesture) f.listener(c, f);
                else
                    for (var h = k.now(), b = 0; 3 > b; b++) {
                        var a = "xyz" [b],
                            e = f.acceleration[a],
                            a = d[a],
                            u = Math.abs(e);
                        !(1E3 > h - q) && 4 < u && (e = h * e / u, u = Math.abs(e + a.value), a.value && 200 > u ? (a.value = e, a.count++, 3 === a.count && (f.listener(c, f), q = h, a.value = 0, a.count = 0)) : (a.value = e, a.count = 1))
                    }
            };
        if (window.addEventListener) return window.addEventListener("devicemotion", e, !1), f
    };
    k.register("shake")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {}),
        f = Math.PI / 180;
    g.swipe = function(q) {
        q.snap = q.snap || 90;
        q.threshold = q.threshold || .75;
        q.gesture = q.gesture || "swipe";
        q.onPointerDown = function(d) {
            g.isPointerStart(d, l, q) && ((q._pointerMove = k.add(q.doc, "mousemove", q.onPointerMove)).listener(d), q._pointerUp = k.add(q.doc, "mouseup", q.onPointerUp))
        };
        q.onPointerMove = function(d) {
            d = g.getChangedTouches(d);
            for (var e = d.length, c = 0; c < e; c++) {
                var h = d[c],
                    b = q.pointers[h.identifier];
                b && (b.move.x = h.pageX, b.move.y = h.pageY, b.moveTime = k.now())
            }
        };
        q.onPointerUp = function(d) {
            if (g.isPointerEnd(d, l, q)) {
                q._pointerMove.remove();
                q._pointerUp.remove();
                var e, c, h, b, a = {
                        x: 0,
                        y: 0
                    },
                    w = 0,
                    u = 0,
                    x = 0,
                    p;
                for (p in q.pointers) {
                    var m = q.pointers[p];
                    b = m.move.x - m.start.x;
                    var v = m.move.y - m.start.y,
                        w = w + m.move.x,
                        u = u + m.move.y;
                    a.x += m.start.x;
                    a.y += m.start.y;
                    x++;
                    c = Math.sqrt(b * b + v * v);
                    m = m.moveTime - m.startTime;
                    b = Math.atan2(b, v) / f + 180;
                    c = m ? c / m : 0;
                    if (void 0 === h) h = b, e = c;
                    else if (20 >= Math.abs(b - h)) h = (h + b) / 2, e = (e + c) / 2;
                    else return
                }
                p = q.gestureFingers;
                q.minFingers <= p && q.maxFingers >= p && e > q.threshold &&
                    (a.x /= x, a.y /= x, l.start = a, l.x = w / x, l.y = u / x, l.angle = -(((h / q.snap + .5 >> 0) * q.snap || 360) - 360), l.velocity = e, l.fingers = p, l.state = "swipe", l.listener(d, l))
            }
        };
        q._pointerDown = k.add(q.target, "mousedown", q.onPointerDown);
        var l = g.Pointer(q);
        return l
    };
    k.register("swipe")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.longpress = function(f) {
        f.gesture = "longpress";
        return g.tap(f)
    };
    g.tap = function(f) {
        f.gesture = f.gesture || "tap";
        f.delay = f.delay || 500;
        f.driftDeviance = f.driftDeviance || 10;
        f.timeout = f.timeout || 250;
        var q, l;
        f.onPointerDown = function(e) {
            g.isPointerStart(e, d, f) && (q = k.now(), (f._pointerMove = k.add(f.doc, "mousemove", f.onPointerMove)).listener(e), f._pointerUp = k.add(f.doc, "mouseup", f.onPointerUp), "longpress" === f.gesture && (l = setTimeout(function() {
                if (!(e.cancelBubble && 1 < ++e.cancelBubbleCount)) {
                    var c =
                        0,
                        h;
                    for (h in f.pointers) {
                        var b = f.pointers[h];
                        if (!0 === b.end || f.cancel) return;
                        c++
                    }
                    f.minFingers <= c && f.maxFingers >= c && (d.state = "start", d.fingers = c, d.x = b.start.x, d.y = b.start.y, d.listener(e, d))
                }
            }, f.delay)))
        };
        f.onPointerMove = function(d) {
            var c = f.bbox;
            d = g.getChangedTouches(d);
            for (var h = d.length, b = 0; b < h; b++) {
                var a = d[b],
                    w = f.pointers[a.identifier];
                if (w) {
                    var u = a.pageX - c.x1,
                        a = a.pageY - c.y1,
                        x = u - w.start.x,
                        w = a - w.start.y,
                        w = Math.sqrt(x * x + w * w);
                    if (!(0 < u && u < c.width && 0 < a && a < c.height && w <= f.driftDeviance)) {
                        f._pointerMove.remove();
                        f.cancel = !0;
                        break
                    }
                }
            }
        };
        f.onPointerUp = function(e) {
            if (g.isPointerEnd(e, d, f) && (clearTimeout(l), f._pointerMove.remove(), f._pointerUp.remove(), !(e.cancelBubble && 1 < ++e.cancelBubbleCount)))
                if ("longpress" === f.gesture) "start" === d.state && (d.state = "end", d.listener(e, d));
                else if (!(f.cancel || k.now() - q > f.timeout)) {
                var c = f.gestureFingers;
                f.minFingers <= c && f.maxFingers >= c && (d.state = "tap", d.fingers = f.gestureFingers, d.listener(e, d))
            }
        };
        f._pointerDown = k.add(f.target, "mousedown", f.onPointerDown);
        var d = g.Pointer(f);
        return d
    };
    k.register("tap");
    k.register("longpress")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.hover = function(f) {
        f.gesture = f.gesture || "hover";
        f.maxFingers = f.maxFingers || f.fingers || 1;
        f.delay = f.delay || 150;
        f.interval = f.interval || 30;
        f.timeout = f.timeout || 1E4;
        var q, l, d = 0;
        f.onPointerOver = function(c) {
            g.isPointerStart(c, e, f) && (f._pointerOut = k.add(f.target, "mouseout", f.onPointerOut), clearTimeout(q), clearInterval(l), q = setTimeout(function() {
                l = setInterval(function() {
                    var h = k.now() - e.startTime;
                    h > f.timeout ? (clearTimeout(q), clearInterval(l)) : (e.state = "hover", e.iterate =
                        d++, e.lapse = h, e.listener(c, e))
                }, f.interval)
            }, f.delay))
        };
        f.onPointerOut = function(c) {
            g.isPointerEnd(c, e, f) && (f._pointerOut.remove(), clearTimeout(q), clearInterval(l))
        };
        f._pointerOver = k.add(f.target, "mouseover", f.onPointerOver);
        var e = g.Pointer(f);
        return e
    };
    k.register("hover")
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.wheelPreventElasticBounce = function(f) {
        f && ("string" === typeof f && (f = document.querySelector(f)), k.add(f, "wheel", function(f, g) {
            g.preventElasticBounce(f);
            k.stop(f)
        }))
    };
    g.wheel = function(f) {
        var g, l = f.timeout || 150,
            d = 0,
            e = {
                gesture: "wheel",
                state: "start",
                wheelDelta: 0,
                target: f.target,
                listener: f.listener,
                preventElasticBounce: function(a) {
                    var b = this.target,
                        c = b.scrollTop;
                    c + b.offsetHeight === b.scrollHeight && 0 >= this.wheelDelta ? k.cancel(a) : 0 === c && 0 <= this.wheelDelta && k.cancel(a);
                    k.stop(a)
                },
                add: function() {
                    f.target[h](a, c, !1);
                    return e
                },
                remove: function() {
                    f.target[b](a, c, !1)
                }
            },
            c = function(a) {
                a = a || window.event;
                e.state = d++ ? "change" : "start";
                e.wheelDelta = a.detail ? -20 * a.detail : a.wheelDelta;
                e.listener(a, e);
                clearTimeout(g);
                g = setTimeout(function() {
                    d = 0;
                    e.state = "end";
                    e.wheelDelta = 0;
                    e.listener(a, e)
                }, l)
            },
            h = document.addEventListener ? "addEventListener" : "attachEvent",
            b = document.removeEventListener ? "removeEventListener" : "detachEvent",
            a = k.detectEvent("mousewheel") ? "mousewheel" : "DOMMouseScroll";
        f.target[h](a, c, !1);
        return e
    };
    k.register("wheel")
})(eventjs);
(function(k) {
    k.elementsFromEvent = function(f, g) {
        var l = k.getClientXY(f);
        return k.elementsFromPoint(l.x, l.y, g)
    };
    var g = k.elementsFromPoint = function(f, q, l, d, e) {
        if (l) var c = l.ownerDocument;
        else c = document, l = c.getElementsByTagName("html")[0];
        if (c = c.elementFromPoint(f, q)) {
            var h = "pointerEvents",
                b = c.style[h];
            if (d === c)
                if ("pointerEvents" === h && "none" === b) h = "display", b = e;
                else return console.warn("this should not happen", c), [];
            if (c === l || "HTML" === c.nodeName) return [c];
            c.style[h] = "none";
            f = g(f, q, l, c, b);
            f = [c].concat(f);
            c.style[h] = b;
            return f
        }
        return []
    }
})(eventjs);
(function(k) {
    var g = k.proxy;
    (k.keyTrackerReset = function() {
        k.fnKey = g.fnKey = !1;
        k.metaKey = g.metaKey = !1;
        k.escKey = g.escKey = !1;
        k.ctrlKey = g.ctrlKey = !1;
        k.shiftKey = g.shiftKey = !1;
        k.altKey = g.altKey = !1
    })();
    var f = k.keys = {};
    k.keyTracker = function(c) {
        var d = "keydown" === c.type,
            b = c.keyCode;
        27 === b && (k.escKey = g.escKey = d);
        e[b] && (k.metaKey = g.metaKey = d);
        k.ctrlKey = g.ctrlKey = c.ctrlKey;
        k.shiftKey = g.shiftKey = c.shiftKey;
        k.altKey = g.altKey = c.altKey;
        d ? f[b] ? (f[b] = "press", c.state = "press") : (f[b] = "down", c.state = "down") : (f[b] = !1, c.state =
            "up")
    };
    k.getKeyID = function(c) {
        return q[c.keyCode] || ""
    };
    var q = k.fromKeyCode = {
            8: "Backspace",
            9: "Tab",
            13: "Enter",
            16: "Shift",
            17: "Ctrl",
            18: "Alt",
            19: "PauseBreak",
            20: "CapsLock",
            27: "Escape",
            33: "PageUp",
            34: "PageDown",
            35: "End",
            36: "Home",
            37: "Left",
            38: "Up",
            39: "Right",
            40: "Down",
            45: "Insert",
            46: "Delete",
            48: "0",
            49: "1",
            50: "2",
            51: "3",
            52: "4",
            53: "5",
            54: "6",
            55: "7",
            56: "8",
            57: "9",
            65: "A",
            66: "B",
            67: "C",
            68: "D",
            69: "E",
            70: "F",
            71: "G",
            72: "H",
            73: "I",
            74: "J",
            75: "K",
            76: "L",
            77: "M",
            78: "N",
            79: "O",
            80: "P",
            81: "Q",
            82: "R",
            83: "S",
            84: "T",
            85: "U",
            86: "V",
            87: "W",
            88: "X",
            89: "Y",
            90: "Z",
            91: "LeftWindow",
            92: "RightWindow",
            93: "Select",
            96: "Numpad0",
            97: "Numpad1",
            98: "Numpad2",
            99: "Numpad3",
            100: "Numpad4",
            101: "Numpad5",
            102: "Numpad6",
            103: "Numpad7",
            104: "Numpad8",
            105: "Numpad9",
            106: "Multiply",
            107: "Add",
            109: "Subtract",
            110: "DecimalPoint",
            111: "Divide",
            112: "F1",
            113: "F2",
            114: "F3",
            115: "F4",
            116: "F5",
            117: "F6",
            118: "F7",
            119: "F8",
            120: "F9",
            121: "F10",
            122: "F11",
            123: "F12",
            144: "NumLock",
            145: "ScrollLock",
            186: ";",
            187: "=",
            188: ",",
            189: "-",
            190: ".",
            191: "/",
            192: "`",
            219: "[",
            220: "\\",
            221: "]",
            222: "'"
        },
        l = navigator.userAgent.toLowerCase(),
        d = -1 !== l.indexOf("macintosh"),
        e;
    (function() {
        d && -1 !== l.indexOf("khtml") ? e = {
            91: !0,
            93: !0
        } : d && -1 !== l.indexOf("firefox") ? (e = {
            224: !0
        }, q[173] = q[189], delete q[189], q[61] = q[187], delete q[187], q[59] = q[186], delete q[186]) : e = {
            17: !0
        };
        for (var c in e) q[c] = "Meta"
    })();
    (function() {
        k.toKeyCode = {};
        for (var c in q) k.toKeyCode[q[c]] = c
    })()
})(eventjs);
"undefined" === typeof eventjs && (eventjs = {});
(function(k) {
    var g = k.proxy || (k.proxy = {});
    g.ambiguous = function(f) {
        var q = f.target,
            l = f.ondrag,
            d = f.ongesture,
            e = function() {
                var a = "pointerId pointerType pointerDown pointerDrag pointerEnd pointerMove pointerStart pointerUp identifier fingers state x y".split(" ");
                return function(b, c) {
                    c = c || {};
                    for (var p = 0, m = a.length; p < m; p++) {
                        var v = a[p];
                        c[v] = b[v]
                    }
                    return c
                }
            }();
        if (k.supports.touch) {
            var c = [],
                h = {};
            f = k.wrapBatch(h);
            f.target = q;
            f.gesture = "ambiguous";
            h.drag = k.add({
                target: q,
                type: "drag",
                monitor: l.monitor,
                maxFingers: l.maxFingers,
                listener: function(a, d) {
                    d.pointerStart && (c = []);
                    if (h.gesture.attached)
                        if (7 <= d.distanceMoved() || d.pointerEnd) {
                            h.gesture.remove();
                            d.listener = b(l.listener);
                            if (c.length) {
                                for (var x = e(d), p = 0, m = c.length; p < m; p++) {
                                    var v = c[p];
                                    d.listener(v.event, e(v.self, d))
                                }
                                e(x, d)
                            }
                            d.listener(a, d)
                        } else c.push({
                            event: a,
                            self: e(d)
                        });
                    d.pointerEnd && h.gesture.add()
                }
            });
            h.drag.proxy = function(a) {
                var c = h.drag;
                (c.listener = b(a))(c.event, c)
            };
            var b = function(a) {
                return function(b, c) {
                    a(b, c);
                    c.pointerEnd && h.gesture.add()
                }
            };
            h.gesture = k.add({
                target: q,
                type: "gesture",
                maxFingers: d.maxFingers,
                listener: function(a, b) {
                    b.pointerStart ? h.drag.remove() : b.pointerEnd && h.drag.add();
                    d.listener(a, b)
                }
            });
            return f
        }
        for (var a in l) f[a] = l[a];
        return g.drag(f)
    };
    k.register("ambiguous")
})(eventjs);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.util || (k.util = {});
    g.errorHandler = function(f) {
        return function() {
            console.warn(f, arguments)
        }
    };
    g.requestKioskMode = function() {
        k.agent.nodewebkit && require("nw.gui").Window.get().enterKioskMode()
    };
    g.diff = function(f, q, l) {
        if (typeof f !== typeof q || "object" !== typeof f || f === q) return !1;
        var d = new f.constructor,
            e = new q.constructor,
            c = !0,
            h;
        for (h in f)
            if (l && -1 !== l.indexOf(h)) d[h] = f[h], e[h] = q[h];
            else if (!(h in q)) c = !1, d[h] = f[h], e[h] = q[h];
        else if (f[h] !== q[h])
            if ("object" === typeof f[h] && "object" ===
                typeof q[h]) {
                var b = g.diff(f[h], q[h], l);
                !1 !== b && (c = !1, d[h] = b.from, e[h] = b.to)
            } else c = !1, d[h] = f[h], e[h] = q[h];
        for (h in q) h in f || (c = !1, d[h] = f[h], e[h] = q[h]);
        return c ? !1 : {
            from: d,
            to: e
        }
    };
    g.sort = function(f) {
        var q = g.sort[f.fn] || f.fn,
            l = f.data || f,
            d = f.param,
            e;
        Array.isArray(l) ? e = d ? l.sort(function(c, h) {
            return q(c[d], h[d])
        }) : l.sort(q) : (e = {}, Object.keys(l).sort(q).forEach(function(c) {
            e[c] = l[c]
        }));
        return e
    };
    g.sort.numeric = function(f, g) {
        return f - g
    };
    g.sort.natural = function(f, g) {
        var l = /(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,
            d = /(^[ ]*|[ ]*$)/g,
            e = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
            c = /^0x[0-9a-f]+$/i,
            h = /^0/,
            b = f.toString().replace(d, "") || "",
            a = g.toString().replace(d, "") || "",
            d = b.replace(l, "\x00$1\x00").replace(/\0$/, "").replace(/^\0/, "").split("\x00"),
            l = a.replace(l, "\x00$1\x00").replace(/\0$/, "").replace(/^\0/, "").split("\x00"),
            b = parseInt(b.match(c)) || 1 != d.length && b.match(e) && Date.parse(b);
        if (e = parseInt(a.match(c)) || b && a.match(e) && Date.parse(a) ||
            null) {
            if (b < e) return -1;
            if (b > e) return 1
        }
        e = 0;
        for (c = Math.max(d.length, l.length); e < c; e++) {
            b = !(d[e] || "").match(h) && parseFloat(d[e]) || d[e] || 0;
            a = !(l[e] || "").match(h) && parseFloat(l[e]) || l[e] || 0;
            if (isNaN(b) !== isNaN(a)) return isNaN(b) ? 1 : -1;
            typeof b !== typeof a && (b += "", a += "");
            if (b < a) return -1;
            if (b > a) return 1
        }
        return 0
    };
    g.json = {};
    g.json.pretty = function(f) {
        return JSON.stringify(f, null, "\t")
    };
    g.json.stringify = function(f) {
        return JSON.stringify(f, function(f, g) {
            return "object" === typeof g && (null === g || g.nodeName || g.tagName) ?
                void 0 : g
        })
    };
    g.exists = function(f, q) {
        return null != g.resolve(f, q)
    };
    g.resolve = function(f, g, l) {
        try {
            var d = f.split(".");
            f = g || window;
            g = 0;
            for (var e = d.length; g < e; g++) {
                var c = d[g],
                    h = f[c];
                l && void 0 === h && (f[c] = g + 1 === e ? h = l : h = {});
                f = h
            }
            return f
        } catch (b) {}
    };
    g.copy = function() {
        var f = "function" === typeof CanvasPattern,
            g = function(l) {
                if (!l || "object" !== typeof l) return l;
                if (!(l.nodeType || f && l instanceof CanvasPattern)) {
                    if ("function" === typeof l.clone) return l.clone();
                    if (l.constructor) {
                        var d = new l.constructor,
                            e;
                        for (e in l) {
                            var c =
                                l[e];
                            d[e] = c && "object" === typeof c ? g(c) : c
                        }
                        return d
                    }
                }
            };
        return g
    }();
    g.extend = function(f, q) {
        return g.copyInto(q, f)
    };
    g.copyInto = function q(g, d, e) {
        e = e || {};
        if ("object" === typeof g)
            for (var c in g) {
                var h = d[c],
                    b = g[c],
                    a = e.filterOut;
                a && a(b, h) || (a = typeof b, d[c] = b && "object" === a ? b.nodeType ? b : typeof h === a ? q(b, h, e) : q(b, new b.constructor, e) : b)
            }
        return d
    };
    g.count = function(q) {
        if (q) {
            if (g.isArrayLike(q)) return q.length;
            if ("object" === typeof q) {
                var l = 0,
                    d;
                for (d in q) ++l;
                return l
            }
        } else return 0
    };
    g.isEmpty = function(g) {
        if (null ==
            g) return !0;
        if (-1 < g.length) return !g.length;
        for (var l in g) return !1;
        return !0
    };
    g.isNotEmpty = function(q) {
        return !g.isEmpty(q)
    };
    g.clamp = function(g, l, d) {
        return Math.max(g, Math.min(d, l))
    };
    g.clampFinite = function(q) {
        var l = g.INFINITY;
        return Math.max(-l, Math.min(q, +l))
    };
    g.arrayEmpty = function(g) {
        g.splice(0, g.length)
    };
    g.arrayIntersects = function(g, l) {
        if (l && l.some) return l.some(function(d) {
            return -1 !== g.indexOf(d)
        });
        console.warn("invalid arguments", arguments)
    };
    g.inArray = function(g, l) {
        return -1 !== g.indexOf(l)
    };
    g.isArrayLike =
        function(g) {
            return g ? (g = g.length, "number" === typeof g && -1 < g && 0 === g % 1) : !1
        };
    g.each = function(q, l) {
        if ("object" === typeof q && "function" === typeof l)
            if (g.isArrayLike(q))
                for (var d = 0, e = q.length; d < e; d++) l(q[d], d, q);
            else
                for (var c = Object.keys(q), d = 0, e = c.length; d < e; d++) l(q[c[d]], c[d], q);
        else console.error("util.each: invalid parameters")
    };
    g.equals = function(q, l) {
        return "object" === typeof q ? "object" === typeof l ? g.json.stringify(q) === g.json.stringify(l) : !1 : q === l
    };
    g.type = function() {
        var g = Object.prototype.toString;
        return function(l) {
            l =
                g.call(l);
            return l.slice(l.indexOf(" ") + 1, -1).toLowerCase()
        }
    }();
    g.objectToArray = function(g) {
        var l = [],
            d;
        for (d in g) l.push(g[d]);
        return l
    };
    g.arrayToObject = function(g) {
        for (var l = {}, d = 0, e = g.length; d < e; d++) l[g[d]] = !0;
        return l
    };
    g.addFileInput = function(g, l) {
        k.uploader.addFileInput({
            target: g,
            onchange: function(d) {
                d.fileInput.value = "";
                d.addMedia({
                    openAsNew: l,
                    self: k.uploader
                })
            }
        })
    };
    g.bytesToSize = function(g, l) {
        if (g) {
            l = l || 1;
            var d = Math.floor(Math.log(Math.abs(g)) / Math.log(1024));
            return (g / Math.pow(1024, d)).toFixed(l) + ["Bytes", "kb", "mb", "gb", "tb"][d]
        }
        return "0Bytes"
    };
    g.getTimeFormat = function(g, l) {
        g /= 1E3;
        var d = g / 3600 >> 0,
            e = (g - 3600 * d) / 60 >> 0,
            c = g - 3600 * d - 60 * e >> 0;
        return l ? (10 > d && (d = "0" + d), 10 > e && (e = "0" + e), 10 > c && (c = "0" + c), d + ":" + e + ":" + c) : {
            hours: d,
            minutes: e,
            seconds: c
        }
    };
    g.require = function(g) {
        function l() {
            var a = document.createElement("link");
            a.href = d;
            a.setAttribute("type", "text/css");
            a.setAttribute("rel", "stylesheet");
            h.appendChild(a)
        }
        "string" === typeof g && (g = {
            url: g
        });
        var d = g.url,
            e = g.type || (-1 !== d.indexOf(".css") ? "css" : "js"),
            c = g.onsuccess;
        g = !!g.async;
        var h = document.head;
        if ("css" === e) g ? setTimeout(l, 0) : l();
        else {
            var b = document.createElement("script");
            b.src = d;
            b.async = g;
            if (c) {
                var a = !1;
                b.onload = b.onreadystatechange = function() {
                    if (!1 === a) {
                        var d = b.readyState;
                        if (!d || /loaded|complete/.test(d)) a = !0, c(), b.onload = b.onreadystatechange = null
                    }
                }
            }
            h.appendChild(b)
        }
    };
    g.isEditingText = function() {
        var g = document.activeElement;
        if (g) {
            var l = g.nodeName;
            if (("INPUT" === l || "TEXTAREA" === l || "true" === g.contentEditable) && !g.classList.contains("sk-canvas-dummy")) return !0
        }
        return !1
    };
    g.pending = function(g, l) {
        var d = l || g,
            e;
        return e = {
            length: 0 < g ? g : 0,
            push: function(c) {
                e.length += 1 < c ? c : 1
            },
            pop: function() {
                if (-1 < e.length) {
                    if (--e.length) return !0;
                    e.finish()
                }
                return !1
            },
            finish: function() {
                e.length = 0;
                d && d()
            }
        }
    };
    g.throttle = function(g, l) {
        function d() {
            u = h ? Date.now() : 0;
            w = null;
            x = g.apply(a, l);
            w || (a = l = null)
        }

        function e() {
            a = this;
            l = arguments;
            var p = Date.now();
            u || h || (u = p);
            var m = c - (p - u);
            0 >= m || m > c ? (e.abort(), u = p, x = g.apply(a, l), w || (a = l = null)) : !w && b && (w = setTimeout(d, m));
            return x
        }
        isFinite(l) && (l = {
            wait: l
        });
        l = l || {};
        var c = l.wait || 0,
            h = !1 !== l.leading,
            b = !1 !== l.trailing,
            a, w = null,
            u = 0,
            x;
        e.triggered = function() {
            return !!w
        };
        e.abort = function() {
            w && (clearTimeout(w), w = null)
        };
        return e
    };
    g.debounce = function(g, l, d, e) {
        function c() {
            w = this;
            a = arguments;
            x = Date.now();
            null == u && (h(c.wait), r && h(0));
            return p
        }

        function h(v) {
            0 < v ? u = self.setTimeout(b, v) : (p = m.apply(w, a), u = w = a = null)
        }

        function b() {
            var m = Date.now() - x;
            m < v && 0 <= m ? h(c.wait - m) : (u = null, y && h(0))
        }
        var a, w, u, x, p;
        if ("function" === typeof g) var m = g,
            v = l,
            r = d || !1,
            y = !1 !== e;
        else m = l, r = g.leading || !1,
            y = !1 !== g.trailing, v = g.wait;
        c.wait = v;
        c.fire = function() {
            u && (self.clearTimeout(u), u = null, h(0))
        };
        return c
    };
    g.blob = {};
    g.blob.detectMIME = function(q, l) {
        q.type ? l(q) : g.FileInfo.fromBlob(q, function(d) {
            l(q = new Blob([q], {
                type: d.mime
            }))
        }, function(d) {
            l(q)
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.util || (k.util = {});
    g.cookie = {};
    g.cookie.get = function(f, q) {
        function l(c) {
            try {
                q(JSON.parse(c))
            } catch (d) {
                q(c || "")
            }
        }
        q = q || function(c) {
            console.log(c)
        };
        if (Array.isArray(f)) {
            var d = {},
                e = f.length;
            g.each(f, function(c) {
                g.cookie.get(c, function(h) {
                    d[c] = h;
                    !--e && q(d)
                })
            })
        } else g.exists("chrome.storage.local") ? chrome.storage.local.get(f, function(c) {
            l(c[f])
        }) : l(localStorage.getItem((k.feature && k.feature.prefix || "") + "/" + f))
    };
    g.cookie.set = function(f, q) {
        if (g.exists("chrome.storage.local")) {
            var l = {};
            l[f] = q;
            chrome.storage.local.set(l)
        } else localStorage.setItem((k.feature && k.feature.prefix || "") + "/" + f, q)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.util || (k.util = {});
    g.now = function() {
        if ("object" === typeof window && window.performance && window.performance.now) {
            var f = window.performance;
            return f.now.bind(f)
        }
        var g = Date.now();
        return function() {
            return Date.now() - g
        }
    }();
    g.perf = function(f, q) {
        function l() {
            a = g.perf();
            if (b) d();
            else {
                for (; - 1 < --h;) f();
                e()
            }
        }

        function d() {
            -1 < --h ? f(d) : e()
        }

        function e() {
            var b = a() + "ms";
            console.log(b, c)
        }
        var c, h, b, a;
        if ("object" === typeof q) h = 0 < q.amount ? q.amount : 1, c = q.name || "", b = q.defer || !1, l();
        else if (q && f) h = 0 < q ? q : 1,
            c = q || "", l();
        else {
            var w = g.now();
            return function(a, b) {
                var p = g.now(),
                    m = Math.round(p - w);
                a && console.log(m + "ms", a);
                b && (w = p);
                return m
            }
        }
    };
    k.perf = g.perf
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.util || (k.util = {});
    g.ZERO = 1E-10;
    g.RAD_DEG = 180 / Math.PI;
    g.DEG_RAD = Math.PI / 180;
    g.INFINITY = 4294967295;
    g.INFINITY_MINUS_24bit = 4278190080;
    g.INFINITY_MINUS_16bit = 4294901760;
    g.INFINITY_MINUS_8bit = 4294967040;
    g.MAX_SAFE_INTEGER = 9007199254740991;
    g.Random = function(f) {
        var q = {};
        q.seed = f || g.Random.seed();
        q.toInt = function() {
            return q.seed = 16807 * q.seed % 2147483647
        };
        q.toDouble = function() {
            q.seed = 16807 * q.seed % 2147483647;
            return q.seed / 2147483647
        };
        q.intRange = function(f, d) {
            q.seed = 16807 * q.seed % 2147483647;
            return "number" === typeof d ? (f -= .4999, Math.round(f + q.seed / 2147483647 * (d + .4999 - f))) : Math.round(q.seed / 2147483647 * f)
        };
        q.doubleRange = function(f, d) {
            q.seed = 16807 * q.seed % 2147483647;
            return "number" === typeof d ? f + q.seed / 2147483647 * (d - f) : q.seed / 2147483647 * f
        };
        return q
    };
    g.Random.seed = function() {
        return 2147483648 * Math.random() >> 0 || g.ZERO
    };
    g.getScreenMetrics = function() {
        if ("undefined" === typeof document) return {};
        var f = function(b) {
                try {
                    l.style.fontSize = b
                } catch (a) {
                    l.style.fontSize = ""
                }
                return l.offsetHeight / 1E4
            },
            q = document.createElement("div");
        q.style.cssText = "position: relative; width: 1px; height: 1px; overflow: scroll;";
        var l = document.createElement("div");
        l.style.cssText = "position: absolute; width: 100em; height: 10000em; overflow: hidden;";
        q.appendChild(l);
        document.body.appendChild(q);
        for (var d = "normal xx-small x-small small medium large x-large xx-large".split(" "), e = {}, c = 0; c < d.length; c++) e[d[c] + "_px"] = f(d[c]);
        e["%>px"] = f("100%") / 100;
        e["px>pt"] = 1 / f("1pt");
        e["pt>pc"] = 1 / 12;
        e["px>in"] = 1 / f("72pt");
        e["in>ft"] = 1 / 12;
        e["ft>yd"] = 1 / 3;
        e["px>mm"] =
            25.4 * e["px>in"];
        e["mm>cm"] = .1;
        e["cm>m"] = .01;
        e["px>ex"] = 1 / f("1ex");
        e["ex>em"] = 1 / e["px>ex"] / f("1em");
        e["px>px"] = 1;
        document.body.removeChild(q);
        var h = function(b, a, c, d) {
            for (var e in a) "object" === typeof(d = a[e]) ? h(b, d, e) : (c && (b["px>" + e] = b["px>" + c] * b[c + ">" + e], b[c + ">" + d] = b[c + ">" + e] * b[e + ">" + d], b[c + ">px"] = 1 / b["px>" + c], b[d + ">" + c] = 1 / b[e + ">" + d] * 1 / b[c + ">" + e], b[e + ">" + c] = 1 / b[c + ">" + e]), b["px>" + d] = b["px>" + e] * b[e + ">" + d], b[e + ">px"] = 1 / b["px>" + e], b[d + ">px"] = 1 / b["px>" + e] * 1 / b[e + ">" + d], b[d + ">" + e] = 1 / b[e + ">" + d])
        };
        h(e, {
            pt: "pc",
            mm: {
                cm: "m"
            },
            "in": {
                ft: "yd"
            },
            ex: "em"
        });
        return g.toMetric = e
    };
    g.round = function(f, g) {
        g = Math.pow(10, g || 1);
        return Math.round(f * g) / g
    };
    g.hashFast = function(f) {
        if (f) {
            for (var g = 5381, l = f.length; l;) g = 33 * g ^ f.charCodeAt(--l);
            return g >>> 0
        }
        return 0
    };
    g.pronounceable = function(f) {
        f = f || 8;
        for (var g = ["a", "e", "i", "o", "u"], l = "bcdfghjklmnpqrstvwxyz".split(""), d = "", e = 0; e < f; e++) d = 0 == e % 2 ? d + g[4 * Math.random() >> 0] : d + l[20 * Math.random() >> 0];
        return d
    };
    g.uuid = function() {
        for (var f = Date.now(), g = 0, l = ""; 36 > g; g++) {
            var d = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx" [g];
            if ("-" === d || "4" === d) l += d;
            else var e = f * Math.random() * 16 % 16 | 0,
                l = l + ("x" === d ? e : e & 3 | 8).toString(16)
        }
        return l
    };
    (function() {
        function f(b) {
            b = b.replace(h, function(m) {
                return f(m.slice(1, -1))
            });
            for (var a = [b[0]], c = [], u = 0, e = b.length, p = 1; p < e; p++) {
                var m = b[p];
                " " !== m && (l[m] || !a[u] ? a[u] += m : d[a[u]] ? a[u] = "" : (c[u] = m, a[++u] = ""))
            }
            b = parseFloat(a[0]);
            for (p = 0; p < c.length; p++) switch (u = parseFloat(a[p + 1]), c[p]) {
                case "+":
                    b += u;
                    break;
                case "-":
                    b -= u;
                    break;
                case "*":
                    b *= u;
                    break;
                case "/":
                    b /= u
            }
            return b
        }
        var q = /inherit/,
            l = {
                0: 1,
                1: 1,
                2: 1,
                3: 1,
                4: 1,
                5: 1,
                6: 1,
                7: 1,
                8: 1,
                9: 1,
                ".": 1
            },
            d = {
                "-": 1,
                "+": 1,
                "*": 1,
                "/": 1
            },
            e = /(\d+)%/,
            c = /(\d+)px/g,
            h = /\((.*)\)/;
        g.parseMath = function(b, a) {
            b = b.replace(c, "$1");
            a && (a.inherit && (b = b.replace(q, a.inherit)), a.percent && (b = b.replace(e, function(b) {
                return a.percent * (parseFloat(b) / 100)
            })));
            return f(b)
        }
    })()
})(sketch);
(function(k) {
    if ("object" === typeof exports) module.exports.util = module.exports.util || {}, module.exports.util.md5 = k();
    else if ("function" === typeof define && define.amd) define(k);
    else {
        var g;
        try {
            g = window
        } catch (f) {
            g = self
        }
        k = g.SparkMD5 = k();
        "object" === typeof sketch && (sketch.util = sketch.util || {}, sketch.util.md5 = k.hash)
    }
})(function(k) {
    function g(a, m, b, r, c, d) {
        m = u(u(m, a), u(r, d));
        return u(m << c | m >>> 32 - c, b)
    }

    function f(a, m, b, r, c, d, h) {
        return g(m & b | ~m & r, a, m, c, d, h)
    }

    function q(a, m, b, r, c, d, h) {
        return g(m & r | b & ~r, a, m, c, d, h)
    }

    function l(a, m, b, r, c, d, h) {
        return g(b ^ (m | ~r), a, m, c, d, h)
    }

    function d(a, m) {
        var b = a[0],
            r = a[1],
            c = a[2],
            d = a[3],
            b = f(b, r, c, d, m[0], 7, -680876936),
            d = f(d, b, r, c, m[1], 12, -389564586),
            c = f(c, d, b, r, m[2], 17, 606105819),
            r = f(r, c, d, b, m[3], 22, -1044525330),
            b = f(b, r, c, d, m[4], 7, -176418897),
            d = f(d, b, r, c, m[5], 12, 1200080426),
            c = f(c, d, b, r, m[6], 17, -1473231341),
            r = f(r, c, d, b, m[7], 22, -45705983),
            b = f(b, r, c, d, m[8], 7, 1770035416),
            d = f(d, b, r, c, m[9], 12, -1958414417),
            c = f(c, d, b, r, m[10], 17, -42063),
            r = f(r, c, d, b, m[11], 22, -1990404162),
            b = f(b, r, c, d, m[12],
                7, 1804603682),
            d = f(d, b, r, c, m[13], 12, -40341101),
            c = f(c, d, b, r, m[14], 17, -1502002290),
            r = f(r, c, d, b, m[15], 22, 1236535329),
            b = q(b, r, c, d, m[1], 5, -165796510),
            d = q(d, b, r, c, m[6], 9, -1069501632),
            c = q(c, d, b, r, m[11], 14, 643717713),
            r = q(r, c, d, b, m[0], 20, -373897302),
            b = q(b, r, c, d, m[5], 5, -701558691),
            d = q(d, b, r, c, m[10], 9, 38016083),
            c = q(c, d, b, r, m[15], 14, -660478335),
            r = q(r, c, d, b, m[4], 20, -405537848),
            b = q(b, r, c, d, m[9], 5, 568446438),
            d = q(d, b, r, c, m[14], 9, -1019803690),
            c = q(c, d, b, r, m[3], 14, -187363961),
            r = q(r, c, d, b, m[8], 20, 1163531501),
            b = q(b, r,
                c, d, m[13], 5, -1444681467),
            d = q(d, b, r, c, m[2], 9, -51403784),
            c = q(c, d, b, r, m[7], 14, 1735328473),
            r = q(r, c, d, b, m[12], 20, -1926607734),
            b = g(r ^ c ^ d, b, r, m[5], 4, -378558),
            d = g(b ^ r ^ c, d, b, m[8], 11, -2022574463),
            c = g(d ^ b ^ r, c, d, m[11], 16, 1839030562),
            r = g(c ^ d ^ b, r, c, m[14], 23, -35309556),
            b = g(r ^ c ^ d, b, r, m[1], 4, -1530992060),
            d = g(b ^ r ^ c, d, b, m[4], 11, 1272893353),
            c = g(d ^ b ^ r, c, d, m[7], 16, -155497632),
            r = g(c ^ d ^ b, r, c, m[10], 23, -1094730640),
            b = g(r ^ c ^ d, b, r, m[13], 4, 681279174),
            d = g(b ^ r ^ c, d, b, m[0], 11, -358537222),
            c = g(d ^ b ^ r, c, d, m[3], 16, -722521979),
            r = g(c ^ d ^
                b, r, c, m[6], 23, 76029189),
            b = g(r ^ c ^ d, b, r, m[9], 4, -640364487),
            d = g(b ^ r ^ c, d, b, m[12], 11, -421815835),
            c = g(d ^ b ^ r, c, d, m[15], 16, 530742520),
            r = g(c ^ d ^ b, r, c, m[2], 23, -995338651),
            b = l(b, r, c, d, m[0], 6, -198630844),
            d = l(d, b, r, c, m[7], 10, 1126891415),
            c = l(c, d, b, r, m[14], 15, -1416354905),
            r = l(r, c, d, b, m[5], 21, -57434055),
            b = l(b, r, c, d, m[12], 6, 1700485571),
            d = l(d, b, r, c, m[3], 10, -1894986606),
            c = l(c, d, b, r, m[10], 15, -1051523),
            r = l(r, c, d, b, m[1], 21, -2054922799),
            b = l(b, r, c, d, m[8], 6, 1873313359),
            d = l(d, b, r, c, m[15], 10, -30611744),
            c = l(c, d, b, r, m[6], 15, -1560198380),
            r = l(r, c, d, b, m[13], 21, 1309151649),
            b = l(b, r, c, d, m[4], 6, -145523070),
            d = l(d, b, r, c, m[11], 10, -1120210379),
            c = l(c, d, b, r, m[2], 15, 718787259),
            r = l(r, c, d, b, m[9], 21, -343485551);
        a[0] = u(b, a[0]);
        a[1] = u(r, a[1]);
        a[2] = u(c, a[2]);
        a[3] = u(d, a[3])
    }

    function e(a) {
        var m = [],
            b;
        for (b = 0; 64 > b; b += 4) m[b >> 2] = a.charCodeAt(b) + (a.charCodeAt(b + 1) << 8) + (a.charCodeAt(b + 2) << 16) + (a.charCodeAt(b + 3) << 24);
        return m
    }

    function c(a) {
        var m = [],
            b;
        for (b = 0; 64 > b; b += 4) m[b >> 2] = a[b] + (a[b + 1] << 8) + (a[b + 2] << 16) + (a[b + 3] << 24);
        return m
    }

    function h(a) {
        var m = a.length,
            b = [1732584193, -271733879, -1732584194, 271733878],
            c, h, t;
        for (c = 64; c <= m; c += 64) d(b, e(a.substring(c - 64, c)));
        a = a.substring(c - 64);
        h = a.length;
        t = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (c = 0; c < h; c += 1) t[c >> 2] |= a.charCodeAt(c) << (c % 4 << 3);
        t[c >> 2] |= 128 << (c % 4 << 3);
        if (55 < c)
            for (d(b, t), c = 0; 16 > c; c += 1) t[c] = 0;
        m = (8 * m).toString(16).match(/(.*?)(.{0,8})$/);
        a = parseInt(m[2], 16);
        m = parseInt(m[1], 16) || 0;
        t[14] = a;
        t[15] = m;
        d(b, t);
        return b
    }

    function b(a) {
        var m;
        for (m = 0; m < a.length; m += 1) {
            for (var b = m, c = a[m], d = "", h = void 0, h = 0; 4 > h; h += 1) d += x[c >>
                8 * h + 4 & 15] + x[c >> 8 * h & 15];
            a[b] = d
        }
        return a.join("")
    }

    function a(a) {
        /[\u0080-\uFFFF]/.test(a) && (a = unescape(encodeURIComponent(a)));
        return a
    }

    function w() {
        this.reset()
    }
    var u = function(a, m) {
            return a + m & 4294967295
        },
        x = "0123456789abcdef".split("");
    "5d41402abc4b2a76b9719d911017c592" !== b(h("hello")) && (u = function(a, m) {
        var b = (a & 65535) + (m & 65535);
        return (a >> 16) + (m >> 16) + (b >> 16) << 16 | b & 65535
    });
    w.prototype.append = function(b) {
        this.appendBinary(a(b));
        return this
    };
    w.prototype.appendBinary = function(a) {
        this._buff += a;
        this._length +=
            a.length;
        a = this._buff.length;
        var m;
        for (m = 64; m <= a; m += 64) d(this._hash, e(this._buff.substring(m - 64, m)));
        this._buff = this._buff.substring(m - 64);
        return this
    };
    w.prototype.end = function(a) {
        var m = this._buff,
            c = m.length,
            r, d = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        for (r = 0; r < c; r += 1) d[r >> 2] |= m.charCodeAt(r) << (r % 4 << 3);
        this._finish(d, c);
        a = a ? this._hash : b(this._hash);
        this.reset();
        return a
    };
    w.prototype.reset = function() {
        this._buff = "";
        this._length = 0;
        this._hash = [1732584193, -271733879, -1732584194, 271733878];
        return this
    };
    w.prototype.getState =
        function() {
            return {
                buff: this._buff,
                length: this._length,
                hash: this._hash
            }
        };
    w.prototype.setState = function(a) {
        this._buff = a.buff;
        this._length = a.length;
        this._hash = a.hash;
        return this
    };
    w.prototype.destroy = function() {
        delete this._hash;
        delete this._buff;
        delete this._length
    };
    w.prototype._finish = function(a, m) {
        var b = m,
            c;
        a[b >> 2] |= 128 << (b % 4 << 3);
        if (55 < b)
            for (d(this._hash, a), b = 0; 16 > b; b += 1) a[b] = 0;
        c = 8 * this._length;
        c = c.toString(16).match(/(.*?)(.{0,8})$/);
        b = parseInt(c[2], 16);
        c = parseInt(c[1], 16) || 0;
        a[14] = b;
        a[15] = c;
        d(this._hash,
            a)
    };
    w.hash = function(b, m) {
        return w.hashBinary(a(b), m)
    };
    w.hashBinary = function(a, m) {
        var c = h(a);
        return m ? c : b(c)
    };
    w.ArrayBuffer = function() {
        this.reset()
    };
    w.ArrayBuffer.prototype.append = function(a) {
        var m = this._buff.buffer,
            b = new Uint8Array(m.byteLength + a.byteLength);
        b.set(new Uint8Array(m));
        b.set(new Uint8Array(a), m.byteLength);
        m = b.length;
        this._length += a.byteLength;
        for (a = 64; a <= m; a += 64) d(this._hash, c(b.subarray(a - 64, a)));
        this._buff = a - 64 < m ? b.subarray(a - 64) : new Uint8Array(0);
        return this
    };
    w.ArrayBuffer.prototype.end =
        function(a) {
            var m = this._buff,
                c = m.length,
                r = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                d;
            for (d = 0; d < c; d += 1) r[d >> 2] |= m[d] << (d % 4 << 3);
            this._finish(r, c);
            a = a ? this._hash : b(this._hash);
            this.reset();
            return a
        };
    w.ArrayBuffer.prototype.reset = function() {
        this._buff = new Uint8Array(0);
        this._length = 0;
        this._hash = [1732584193, -271733879, -1732584194, 271733878];
        return this
    };
    w.ArrayBuffer.prototype.getState = function() {
        var a = w.prototype.getState.call(this);
        a.buff = String.fromCharCode.apply(null, new Uint8Array(a.buff));
        return a
    };
    w.ArrayBuffer.prototype.setState =
        function(a) {
            var m = a.buff,
                b = m.length,
                c = new ArrayBuffer(b),
                c = new Uint8Array(c),
                d;
            for (d = 0; d < b; d++) c[d] = m.charCodeAt(d);
            a.buff = c;
            return w.prototype.setState.call(this, a)
        };
    w.ArrayBuffer.prototype.destroy = w.prototype.destroy;
    w.ArrayBuffer.prototype._finish = w.prototype._finish;
    w.ArrayBuffer.hash = function(a, m) {
        var v = new Uint8Array(a),
            r = v.length,
            h = [1732584193, -271733879, -1732584194, 271733878],
            t, u, e;
        for (t = 64; t <= r; t += 64) d(h, c(v.subarray(t - 64, t)));
        v = t - 64 < r ? v.subarray(t - 64) : new Uint8Array(0);
        u = v.length;
        e = [0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        ];
        for (t = 0; t < u; t += 1) e[t >> 2] |= v[t] << (t % 4 << 3);
        e[t >> 2] |= 128 << (t % 4 << 3);
        if (55 < t)
            for (d(h, e), t = 0; 16 > t; t += 1) e[t] = 0;
        r = (8 * r).toString(16).match(/(.*?)(.{0,8})$/);
        v = parseInt(r[2], 16);
        r = parseInt(r[1], 16) || 0;
        e[14] = v;
        e[15] = r;
        d(h, e);
        return m ? h : b(h)
    };
    return w
});
(function() {
    function k(f, g, l, d) {
        function e() {
            var a = 1E6 * w;
            u.readAsArrayBuffer(h.call(c, a, a + 1E6 >= c.size ? c.size : a + 1E6))
        }
        var c = f.blob || f,
            h = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice,
            b = new SparkMD5.ArrayBuffer,
            a = Math.ceil(c.size / 1E6),
            w = 0,
            u = new FileReader;
        u.onerror = l;
        u.onload = function(c) {
            ++w;
            b.append(c.target.result);
            d && d(w / a);
            w < a ? e() : g(b.end())
        };
        e()
    }

    function g(f, g, l, d) {
        var e = f.blob || f;
        f = f.workerPath;
        e.md5 ? g(e.md5) : (f = new Worker(f), f.postMessage([e]), f.onmessage = function(c) {
            c =
                c.data;
            var h = c.message;
            switch (c.state) {
                case "success":
                    e.md5 = h;
                    g(h);
                    break;
                case "error":
                    l && l(h);
                    break;
                case "progress":
                    d && d(h)
            }
        })
    }
    self.WorkerGlobalScope ? (importScripts("./MD5.js"), self.addEventListener("message", function(f) {
        f.data.forEach(function(f) {
            k(f, function(f) {
                self.postMessage({
                    state: "success",
                    message: f
                })
            }, function(f) {
                self.postMessage({
                    state: "error",
                    message: f.message
                })
            }, function(f) {
                self.postMessage({
                    state: "progress",
                    message: f
                })
            })
        })
    }, !1)) : sketch.util.MD5File = function(f, q) {
        f.workerPath ? g.apply(null,
            arguments) : k.apply(null, arguments)
    }
})();
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    (k.util || (k.util = {})).version = function(g, f) {
        function q(d, e) {
            e = e || 4;
            for (var c = (d || "").split(".").map(function(a) {
                    var b = parseInt(a || 0);
                    return (a = a.replace(b, "")) ? b + a[0].charCodeAt() / 255 : b
                }), h = 0, b = 0; b < c.length && e !== b; ++b) h += c[b] / 255 * Math.pow(255, e - b + 1);
            return h
        }
        var l = {};
        l.value = g;
        l.hash = q(g, f);
        l.isGreaterThan = function(d, e) {
            return q(g, e) > q(d, e)
        };
        l.isLessThan = function(d, e) {
            return q(g, e) < q(d, e)
        };
        return l
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k = k.util || (k.util = {});
    var g = k.string || (k.string = {}),
        f = g.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g,
        q = g.rxAlphaNumeric = /[^A-Z0-9]+/gi;
    g.rxFile = /[^\w\s-.]+/g;
    g.rxNumeric = /^-?\d*[\.]?\d+$/;
    g.invalid = function(d, e) {
        return !!(d || "").match(g[e])
    };
    g.toID = function(d) {
        return (d || "").replace(/[^a-z0-9]/g, function(d) {
            var c = d.charCodeAt(0);
            return 32 === c ? "-" : 65 <= c && 90 >= c ? "_" + d.toLowerCase() : g.escape(d).replace("\\", "_")
        })
    };
    g.escape = function(d) {
        return d.replace(/[\s\S]/g, function(d) {
            d = d.charCodeAt().toString(16);
            var c = 2 < d.length;
            return "\\" + (c ? "u" : "x") + ("0000" + d).slice(c ? -4 : -2)
        })
    };
    g.replaceAll = function(d, e, c) {
        return (d || "").split(e).join(c)
    };
    g.toAlphaNumeric = function(d) {
        return (d || "").replace(q, "")
    };
    g.spaceCamelCase = function(d) {
        return (d || "").match(f).slice(0, -1).join(" ")
    };
    g.enquote = function(d) {
        return "&ldquo;" + d + "&rdquo;"
    };
    g.hellip = function(d, e) {
        return d <= e ? d : d.substr(0, e - 3) + String.fromCharCode(8230)
    };
    g.lcfirst = function(d) {
        d = d || "";
        return d.length ? d[0].toLowerCase() + d.substr(1) : d
    };
    g.ucfirst = function(d) {
        d = d ||
            "";
        return d[0] ? d[0].toUpperCase() + d.substr(1) : d
    };
    g.ucwords = function(d) {
        return (d || "").replace(/^(.)|\s(.)/g, function(d) {
            return d.toUpperCase()
        })
    };
    g.addslashes = function(d) {
        return d.replace(/([\\"'])/g, "\\$1").replace(/\0/g, "\\0")
    };
    g.stripslashes = function(d) {
        return d.replace(/\0/g, "0").replace(/\\([\\'"])/g, "$1")
    };
    g.dirpath = function(d) {
        return d.replace(/([^:]\/)\/+/g, "$1").replace(/\/[^\/]*$/, "")
    };
    g.dirparent = function(d) {
        return g.dirpath(d.replace(/\/+$/, ""))
    };
    g.dirname = function(d) {
        return g.filename(g.dirpath(d))
    };
    g.filename = function(d) {
        return (d || "").replace(/^.*[\\\/]/, "")
    };
    g.filenameSansExtension = function(d) {
        return g.filename(d).split(".").shift()
    };
    g.extension = function(d) {
        return (d + "").split(".").pop().toLowerCase()
    };
    g.ltrim = function(d, e) {
        return (d + "").replace(new RegExp("^[" + (e || "s") + "]+", "g"), "")
    };
    g.rtrim = function(d, e) {
        return (d + "").replace(new RegExp("[" + (e || "s") + "]+$", "g"), "")
    };
    g.lpad = function(d, e, c) {
        for (; d.length < c;) d = e + d;
        return d
    };
    g.rpad = function(d, e, c) {
        for (; d.length < c;) d += e;
        return d
    };
    var l = g.hex = {};
    l.toASCII =
        function(d) {
            for (var e = "", c = 0, h = d && d.length; c < h; c += 2) e += String.fromCharCode(parseInt(d.substr(c, 2), 16));
            return e
        };
    l.toBase64 = function(d) {
        return btoa(l.toASCII(d))
    };
    (g.utf8 = {}).toBase64 = function(d) {
        return window.btoa(unescape(encodeURIComponent(d)))
    };
    (g.base64 = {}).toUTF8 = function(d) {
        return decodeURIComponent(escape(window.atob(str)))
    };
    g.encodeURL = function(d) {
        return encodeURIComponent(d)
    };
    g.decodeURL = function(d) {
        return decodeURIComponent(d)
    };
    g.encodeUTF8 = function(d) {
        return unescape(encodeURIComponent(d))
    };
    g.decodeUTF8 = function(d) {
        return decodeURIComponent(escape(d))
    }
})(sketch);
var proto = String.prototype;
if (!("trim" in proto)) {
    var rxTrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
    proto.trim = function() {
        return this.replace(rxTrim, "")
    }
}
"startsWith" in proto || (proto.startsWith = function(k, g) {
    g = g || 0;
    return this.lastIndexOf(k, g) === g
});
"endsWith" in proto || (proto.endsWith = function(k, g) {
    var f = this.toString();
    if (void 0 === g || g > f.length) g = f.length;
    g -= k.length;
    f = f.indexOf(k, g);
    return -1 !== f && f === g
});
"includes" in proto || (proto.includes = function() {
    return -1 !== proto.indexOf.apply(this, arguments)
});
(function(k) {
    k = k.util || (k.util = {});
    var g = function() {
        function f(a, c, p) {
            function m() {
                p && p({
                    message: "blobFromBuffer: format could not be determined"
                })
            }
            return g(function(c, p) {
                if ("string" === typeof a) {
                    var d = h(a);
                    d ? c(d) : c(b.png)
                } else l(a) ? e(a, c, m) : m()
            }, arguments)
        }

        function g(a, b) {
            if ("function" === typeof b[1]) a(b[1], b[2], b[3]);
            else return new Promise(function(b, m) {
                a(b, m)
            })
        }

        function l(a) {
            a = Object.prototype.toString.call(a);
            return "[object Blob]" === a || "[object File]" === a
        }

        function d(a) {
            return a.startsWith("data:image/svg") ||
                a.startsWith("<?xml") && a.includes("<svg") || a.startsWith("<svg")
        }

        function e(b, d, p) {
            var m = b.slice(0, Math.min(4, b.size)),
                v = new FileReader;
            v.onload = function(m) {
                (m = c(v.result) || a[b.type]) ? d(m): p && p()
            };
            v.readAsArrayBuffer(m)
        }

        function c(a) {
            4 < a.byteLength && (a = a.slice(0, 5));
            a = new Uint8Array(a);
            for (var c = "", p = 0; p < a.length; p++) c += a[p].toString(16);
            a = c;
            for (var m in w)
                if (m === a.slice(0, m.length)) return b[w[m]]
        }

        function h(c) {
            var h = c.toLowerCase();
            if (c.startsWith("data:")) return c = h.substr(5).split(";").shift(),
                a[c];
            h = h.split(".").pop();
            if (b[h]) return b[h];
            if (d(c)) return b.svg
        }
        var b = function() {
                var a = {
                        json: {
                            mime: "application/json",
                            type: "text"
                        },
                        txt: {
                            mime: "text/plain",
                            type: "text"
                        },
                        bmp: {
                            mime: "image/bmp",
                            type: "image"
                        },
                        gif: {
                            mime: "image/gif",
                            type: "image"
                        },
                        icns: {
                            mime: "image/icns",
                            type: "image"
                        },
                        ico: {
                            mime: "image/x-icon",
                            type: "image"
                        },
                        jpeg: {
                            mime: "image/jpg",
                            type: "image"
                        },
                        jpg: {
                            mime: "image/jpg",
                            type: "image"
                        },
                        png: {
                            mime: "image/png",
                            type: "image"
                        },
                        tiff: {
                            mime: "image/tiff",
                            type: "image"
                        },
                        webp: {
                            mime: "image/webp",
                            type: "image"
                        },
                        aiff: {
                            mime: "audio/aiff",
                            type: "audio"
                        },
                        mid: {
                            mime: "audio/mid",
                            type: "audio"
                        },
                        mp3: {
                            mime: "audio/mpeg",
                            type: "audio"
                        },
                        ogg: {
                            mime: "audio/ogg",
                            type: "audio"
                        },
                        wav: {
                            mime: "audio/wav",
                            type: "audio"
                        },
                        mp4: {
                            mime: "video/mp4",
                            type: "video"
                        },
                        mpeg: {
                            mime: "video/mpeg",
                            type: "video"
                        },
                        webm: {
                            mime: "video/webm",
                            type: "video"
                        },
                        svg: {
                            mime: "image/svg+xml",
                            type: "clipart"
                        },
                        eot: {
                            mime: "application/vnd.ms-fontobject",
                            type: "font"
                        },
                        otf: {
                            mime: "application/font-sfnt",
                            type: "font"
                        },
                        ttf: {
                            mime: "application/font-sfnt",
                            type: "font"
                        },
                        woff: {
                            mime: "application/font-woff",
                            type: "font"
                        },
                        woff2: {
                            mime: "application/font-woff",
                            type: "font"
                        },
                        pdf: {
                            mime: "application/pdf",
                            type: "package"
                        },
                        ps: {
                            mime: "application/postscript",
                            type: "package"
                        },
                        psd: {
                            mime: "image/vnd.adobe.photoshop",
                            type: "package"
                        },
                        rtf: {
                            mime: "application/rtf",
                            type: "package"
                        },
                        zip: {
                            mime: "application/zip",
                            type: "package"
                        }
                    },
                    b;
                for (b in a) a[b].extension = b;
                return a
            }(),
            a = function() {
                var a = {},
                    c;
                for (c in b) {
                    var p = b[c];
                    a[p.mime] = p
                }
                return a
            }(),
            w = {
                "424d": "bmp",
                47494638: "gif",
                "69636e73": "icns",
                "00000100": "ico",
                ffd8ff: "jpg",
                "89504e47": "png",
                "4d4d002a": "tiff",
                "49492a00": "tiff",
                57454250: "webp",
                "464f524d": "aiff",
                "4d546864": "mid",
                fffb: "mp3",
                494433: "mp3",
                "4f676753": "ogg",
                52494646: "wav",
                "000001b3": "mpeg",
                "000001ba": "mpeg",
                "1a45dfa3": "webm",
                "4c50": "eot",
                "00010000": "ttf",
                74727565: "ttf",
                "4f54544f": "otf",
                "774f4646": "woff",
                "774f4646": "woff",
                "774f4632": "woff2",
                25504446: "pdf",
                25215053: "ps",
                38425053: "psd",
                "7b5c7274": "rtf",
                "504b3414": "zip",
                "504b0304": "zip",
                "504b0506": "zip",
                "504b0708": "zip",
                "7b": "json"
            };
        f.fromBlob = e;
        f.fromBuffer = c;
        f.fromString = h;
        f.fromExtension =
            function(a) {
                return b[a]
            };
        f.fromMime = function(b) {
            return a[b]
        };
        f.is = function(a, b, c, m) {
            return g(function(m, c) {
                f(a, function(a) {
                    for (var c in a)
                        if (b === a[c]) {
                            m(!0);
                            break
                        }
                    m(!1)
                }, c)
            }, arguments)
        };
        f.isBlob = l;
        f.isSVGString = d;
        return f
    }();
    k.FileInfo = g;
    k.isBlob = g.isBlob
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k = k.util = k.util || {};
    k.Queue = function(g) {
        g = g || {};
        var f = {},
            q = g.oncomplete,
            l = g.onprogress,
            d = g.oncancel,
            e = g.next,
            c = g.items,
            h = g.range,
            b = !1 !== g.autostart,
            a = !1 !== g.flatten;
        g = !!g.delayStart;
        f.canceled = !1;
        f.complete = !1;
        f.processing = !1;
        f.cancel = function() {
            f.canceled || 0 >= f.remaining || (f.canceled = !0, f.processing = !1, d && d())
        };
        f.next = function() {
            if (!f.canceled && !f.complete) {
                f.processing = !0;
                var b = f.items,
                    c = f.remaining,
                    p = f.length,
                    m = p - c - 1,
                    d = f.keys[m];
                l && l(p ? 1 - (c + 1) / p : 1);
                if (b.length)
                    if (f.remaining--, p = (c =
                            "[object Object]" === String(r)) && r.length, a) e.call(f, b.shift(), d, m);
                    else {
                        var r = b[0];
                        c && !p && b.shift();
                        c && p ? e.call(f, r.shift(), d, m) : e.call(f, b.shift(), d, m)
                    }
                else f.complete = !0, f.processing = !1, q && q()
            }
        };
        f.append = function(b) {
            function c(a, b) {
                if (Array.isArray(a) || a instanceof NodeList)
                    for (var d = 0; d < a.length; d++) b(d);
                else
                    for (d in a) b(d)
            }
            c(b, function(p) {
                var m = b[p];
                if ("[object Object]" !== String(m) || a) f.items.push(m), f.keys.push(p), f.length++, f.remaining++;
                else {
                    var d = [];
                    f.items.push(d);
                    c(m, function(a) {
                        d.push(m[a]);
                        f.keys.push(p);
                        f.length++;
                        f.remaining++
                    })
                }
            })
        };
        f.reset = function() {
            f.canceled = !1;
            f.complete = !1;
            f.processing = !1;
            f.items = [];
            f.keys = [];
            f.length = 0;
            f.remaining = -1
        };
        if (h)
            for (var c = [], w = h.from; w <= h.to; w++) c.push(w);
        f.reset();
        f.append(c);
        b && (g ? requestAnimationFrame(f.next) : f.next());
        return f
    };
    "object" === typeof module && module.exports && (module.exports.util = module.exports.util || {}, module.exports.util.Queue = k.Queue)
})(sketch);
(function(k) {
    (k.util || (k.util = {})).QueueChunked = function(g) {
        var f = g.data,
            q = g.length || f.length,
            l = g.chunkSize || 1E3,
            d = g.chunkTimeout || 30,
            e = g.onsuccess,
            c = g.onerror,
            h = g.onresult,
            b = g.onprogress,
            a = -1,
            w, u, x;
        (function m() {
            for (var c = Math.min(l, q - a), r = Date.now(), y = 0; y < c && !x; y++) {
                ++a;
                var t = Date.now() - r,
                    t = 0 !== y && t > d;
                if (b && (t || a >= q)) {
                    var g = (a / q * 100 >> 0) / 100;
                    1 >= g && (b(g, g - (w || 0)), w = g)
                }(g = f[a]) && h(g);
                if (t || y === c - 1)
                    if (q - a) {
                        u = requestAnimationFrame(m);
                        break
                    } else e && e()
            }
        })();
        return {
            cancel: function() {
                x = !0;
                cancelAnimationFrame(u);
                c && c({
                    message: "Canceled"
                })
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.dom = k.dom || {},
        f = k.util;
    g.$ = function(d, e) {
        return "object" === typeof d ? d : (e || document).querySelector(d)
    };
    g.$$ = function(d, e) {
        return "object" === typeof d ? d : (e || document).querySelectorAll(d)
    };
    g.create = function() {
        var d = /^\w+$/;
        return function(e, c) {
            if (-1 !== e.indexOf("<")) {
                var h = document.createElement("div");
                h.innerHTML = e.trim();
                var h = h.childNodes,
                    b = h.length;
                if (0 === b) return;
                e = 1 === b ? h[0] : h
            } else e = d.test(e) ? "canvas" === e ? g.Canvas() : document.createElement(e) : document.createTextNode(e);
            if (c) {
                var h =
                    e,
                    a;
                for (a in c) b = c[a], "function" === typeof b && 0 === a.indexOf("on") ? eventjs.add(h, a, b) : h.setAttribute(a, b)
            }
            return e
        }
    }();
    g.FocusNode = function() {
        var d = g.create(k.agent.mobile ? "a" : "input");
        d.className = "sk-focus-element";
        d.href = "#";
        return d
    };
    g.append = function(d, e, c) {
        d = g.$(d);
        "string" === typeof e && (e = g.create(e, c));
        if (e && d && d.appendChild) {
            if (e.item && e.length)
                for (var h = 0; h < e.length; h++) d.appendChild(e[h]);
            else d.appendChild(e);
            return e
        }
        console.warn("dom.append", arguments)
    };
    g.appendText = function(d, e) {
        (d = g.$(d)) &&
        d.appendChild && d.appendChild(document.createTextNode(e))
    };
    g.Canvas = function(d, e, c) {
        var h;
        if ("undefined" === typeof document) {
            if (void 0 === q) return {
                ctx: {}
            };
            h = new q
        } else h = document.createElement("canvas"), "function" === typeof FlashCanvas && (h.onload = k.agent.detect);
        h.ctx = h.getContext(c || "2d");
        h.width = d || 1;
        h.height = e || 1;
        return h
    };
    g.Canvas.resize = function(d, e, c) {
        e && c ? (d.width = e, d.height = c) : d.width = d.width
    };
    g.Canvas.clear = function(d) {
        d.ctx.clearRect(0, 0, d.width, d.height)
    };
    g.Context3d = function(d, e) {
        return g.Canvas(d,
            e, "webgl").ctx
    };
    g.Context2d = function(d, e) {
        return g.Canvas(d, e, "2d").ctx
    };
    (function() {
        function d(d, c) {
            for (var h in c) d.style[h] = c[h]
        }
        g.style = function(e, c, h) {
            if (e = g.$$(e))
                if (1 === e.nodeType && (e = [e]), "object" === typeof c) {
                    if (Array.isArray(c)) {
                        var b = getComputedStyle(e[0], null),
                            a = {};
                        properties.forEach(function(c) {
                            a[c] = b[c]
                        });
                        return a
                    }
                    for (var w = 0, u = e.length; w < u; w++) d(e[w], c)
                } else if (h)
                for (w = 0, u = e.length; w < u; w++) e[w].style[c] = h;
            else return b = getComputedStyle(e[0], null), b[c]
        };
        g.stylesheet = function(e, c) {
            for (var h =
                    document.styleSheets, b = 0; b < h.length; b++) {
                var a = h[b];
                try {
                    var w = a.cssRules;
                    if (w)
                        for (a = 0; a < w.length; a++) {
                            var u = w[a];
                            if (e === u.selectorText)
                                if (c) d(u, c);
                                else return u
                        }
                } catch (f) {}
            }
        }
    })();
    g.clone = function() {
        function d(c, d) {
            "CANVAS" === c.nodeName && c.getContext("2d").drawImage(d, 0, 0)
        }

        function e(c, h) {
            d(h, c);
            for (var b = h.childNodes, a = c.childNodes, w = 0; w < b.length; w++) {
                var u = b[w],
                    f = a[w];
                u && f && (d(u, f), u.childNodes.length && f.childNodes && e(f, u))
            }
        }
        return function(c, d) {
            var b = c.cloneNode(!0);
            e(c, b);
            b.id = d;
            b.style.position =
                "absolute";
            b.style.opacity = 1;
            b.style.zIndex = 9999999;
            b.style.display = "block";
            return b
        }
    }();
    g.empty = function(d) {
        "string" === typeof d && (d = g.$(d));
        if (d) {
            for (; d.firstChild;) d.removeChild(d.firstChild);
            return d
        }
        return null
    };
    g.remove = function() {
        function d(d) {
            d && d.parentNode && d.parentNode.removeChild(d)
        }
        return function(e) {
            e && (1 === e.nodeType ? d(e) : f.each(e, d))
        }
    }();
    g.measure = function() {
        function d(d, c) {
            var h = d.getPropertyValue(c),
                h = parseFloat(h, 10);
            return h === +h ? h : 0
        }
        return function(e, c) {
            c = c || {};
            var h = c.box || "border";
            "string" === typeof e && (e = g.$(e));
            if (!(e = e || this.selection && this.selection[0])) return {
                width: 0,
                height: 0
            };
            if (e === window || e === document) e = document.body;
            var b = {},
                a = e.getBoundingClientRect();
            b.x1 = a.left;
            b.y1 = a.top;
            b.scrollLeft = 0;
            b.scrollTop = 0;
            c.sansScale ? (b.width = e.offsetWidth, b.height = e.offsetHeight) : (b.width = a.width, b.height = a.height, b.scaleX = a.width / e.offsetWidth || 1, b.scaleY = a.height / e.offsetHeight || 1);
            var a = getComputedStyle(e),
                w = b.margin = {
                    top: d(a, "margin-top"),
                    right: d(a, "margin-right"),
                    bottom: d(a, "margin-bottom"),
                    left: d(a, "margin-left")
                },
                u = b.border = {
                    top: d(a, "border-top-width"),
                    right: d(a, "border-right-width"),
                    bottom: d(a, "border-bottom-width"),
                    left: d(a, "border-left-width")
                };
            b.padding = {
                top: d(a, "padding-top"),
                right: d(a, "padding-right"),
                bottom: d(a, "padding-bottom"),
                left: d(a, "padding-left")
            };
            "border" !== h && "padding" !== h && (b.x1 -= w.left, b.y1 -= w.top, b.width += w.right + w.left, b.height += w.bottom + w.top);
            "padding" === h && (b.x1 += u.left, b.y1 += u.top, b.width -= u.right + u.left, b.height -= u.bottom + u.top);
            b.x2 = b.x1 + b.width;
            b.y2 = b.y1 +
                b.height;
            b.position = a.getPropertyValue("position");
            for (h = e; null !== h && h !== document.body && void 0 !== h.scrollTop;) {
                a = getComputedStyle(h);
                a = a.getPropertyValue("position");
                if ("absolute" !== a)
                    if ("fixed" === a) {
                        b.scrollTop = h.scrollLeft;
                        b.scrollLeft = h.scrollTop;
                        break
                    } else b.scrollLeft += h.scrollLeft, b.scrollTop += h.scrollTop;
                h = h.parentNode
            }
            eventjs.getDocumentScroll(b);
            b.scrollLeft -= b.pageXOffset;
            b.scrollTop -= b.pageYOffset;
            return b
        }
    }();
    g.setClass = function() {
        function d(d, c) {
            "function" === typeof d && (c ? setTimeout(d,
                c) : d())
        }
        return function(e) {
            if (e && e.target) var c = e.target,
                h = e.name,
                b = e.on,
                a = e.list,
                w = e.delay,
                u = e.callback;
            else c = arguments[0], h = arguments[1], b = arguments[2], a = arguments[3];
            void 0 === b && (b = !0);
            "string" === typeof c && (c = g.$(c));
            if (c && h)
                if (c.length) {
                    for (a = 0; a < c.length; a++) {
                        var f = c[a].classList;
                        f && (b ? f.add(h) : f.remove(h))
                    }
                    d(u, w)
                } else {
                    if ("string" === typeof a)
                        if (c.parentNode) a = g.$$(a, c.parentNode);
                        else {
                            console.warn("setClass", e);
                            return
                        }
                    a && a.length || (a = [c]);
                    for (var f = c.classList, c = "toggle" === b && f.contains(h),
                            p = 0, m = a.length; p < m; p++) {
                        var v = a[p].classList;
                        v && v.remove(h)
                    }
                    if (f) {
                        if (!1 === b || c) return d(u, w), !1;
                        f.add(h);
                        d(u, w);
                        return !0
                    }
                }
            else console.warn("setClass", arguments)
        }
    }();
    g.addClass = function(d, e) {
        if ((d = g.$(d)) && e) switch (typeof e) {
            case "string":
                d.classList.add(e);
                break;
            case "object":
                f.each(e, function(c) {
                    d.classList.add(c)
                })
        }
    };
    g.strip_html = function() {
        if ("undefined" !== typeof document) {
            var d = document.createElement("span");
            return function(e) {
                d.innerHTML = e;
                return d.innerText
            }
        }
    }();
    g.getCoordinateAt = function() {
        function d(a,
            c, d, p) {
            p = p || {
                x: 0,
                y: 0
            };
            var m = parseInt(h[a] || a) / 100;
            c = parseInt(h[c] || c) / 100;
            b[a] ? (p.x += e(d.x1, d.x2, m), p.y += e(d.y1, d.y2, c)) : (p.x += e(d.x1, d.x2, c), p.y += e(d.y1, d.y2, m));
            return p
        }

        function e(a, b, c) {
            return (b - a) * c + a
        }

        function c(a) {
            return "string" === typeof a ? (a = a.split(" "), {
                x: parseFloat(a[0]),
                y: parseFloat(a[1])
            }) : a
        }
        var h = {
                top: "0%",
                left: "0%",
                center: "50%",
                bottom: "100%",
                right: "100%"
            },
            b = {
                left: "x2",
                right: "x1"
            },
            a = {
                top: "bottom",
                left: "right",
                right: "left",
                bottom: "top"
            };
        return function(h) {
            h = h || {};
            var u = g.$(h.element),
                e;
            h = h.at || {};
            e = isFinite(h.x + h.y) ? {
                point: h
            } : "string" === typeof h || h instanceof Node ? {
                align: "top left",
                element: h
            } : h;
            var p;
            h = e.align || "";
            "string" === typeof h ? (h = -1 !== h.indexOf(" to ") ? h.replace(" to ", " ").split(" ") : h.split(" "), p = {
                edge: h[0],
                position: h[1],
                toEdge: h[2],
                toPosition: h[3]
            }) : p = h || {};
            h = c(e.offset || {
                x: 0,
                y: 0
            });
            var m = c(e.point),
                v = g.$(e.element);
            e = p.edge || "left";
            var r = p.position || "top",
                y = p.toEdge || a[p.edge];
            p = p.toPosition || "center";
            if (v || m) {
                if (v) {
                    u ? (u.style.display = "block", u = g.measure(u, {
                            box: "padding"
                        })) :
                        u = {
                            width: 0,
                            height: 0
                        };
                    var t = g.measure(v, {
                            box: "padding"
                        }),
                        t = d(y, p, t),
                        u = d(e, r, {
                            x1: 0,
                            y1: 0,
                            x2: u.width,
                            y2: u.height
                        });
                    t.x -= u.x;
                    t.y -= u.y
                } else m && (t = {
                    x: 0,
                    y: 0
                }, t.x += m.x || 0, t.y += m.y || 0);
                b[e] ? (t.x += h.x * ("right" === e ? -1 : 1), t.y += h.y * ("bottom" === r ? -1 : 1)) : (t.x += h.x * ("right" === r ? -1 : 1), t.y += h.y * ("bottom" === e ? -1 : 1));
                return t
            }
        }
    }();
    g.contains = function(d, e) {
        for (var c = e;;) {
            if (c === d) return !0;
            if (c && c.parentNode) c = c.parentNode;
            else return !1
        }
    };
    g.nodeHasFocusedAsChild = function(d) {
        var e = window.getSelection().focusNode;
        return g.contains(d,
            e)
    };
    g.text = {};
    g.text.selectAll = function(d) {
        if (d)
            if (document.body.createTextRange) {
                var e = document.body.createTextRange();
                e.moveToElementText(d);
                e.select()
            } else if (window.getSelection) {
            var c = window.getSelection(),
                e = document.createRange();
            e.selectNodeContents(d);
            c.removeAllRanges();
            c.addRange(e)
        }
    };
    g.text.hasSelection = function(d) {
        return g.nodeHasFocusedAsChild(d) && (d = g.text.getRange(d)) ? d.endOffset !== d.startOffset : !1
    };
    g.text.getRange = function(d) {
        var e = window.getSelection();
        if (null === e) return d = g.text.getCursorPosition(d), {
            startOffset: d,
            endOffset: d
        };
        if (g.nodeHasFocusedAsChild(d) && (d = e.focusNode)) return 3 === d.nodeType ? e.getRangeAt(0) : d.firstChild ? (d = d.firstChild, {
            startOffset: 0,
            endOffset: d.data && d.data.length || 0
        }) : {
            startOffset: 0,
            endOffset: 0
        }
    };
    g.text.setRange = function(d, e, c) {
        if (d && window.getSelection) {
            for (; d.firstChild;) d = d.firstChild;
            if (d.setSelectionRange) d.setSelectionRange(e, c);
            else {
                var h = window.getSelection(),
                    b = document.createRange();
                b.setStart(d, e);
                b.setEnd(d, c);
                h.removeAllRanges();
                h.addRange(b)
            }
        }
    };
    g.text.getCursorPosition =
        function(d) {
            if (d && window.getSelection) {
                var e = d.selectionDirection;
                if (e) return "backward" === e ? d.selectionEnd : d.selectionStart;
                if ("true" === d.contentEditable && (e = window.getSelection(), e.rangeCount && (e = e.getRangeAt(0), e.commonAncestorContainer.parentNode === d))) return e.endOffset
            }
            return 0
        };
    g.text.setCursorPosition = function(d, e) {
        "number" === typeof e && g.text.setRange(d, e, e)
    };
    g.text.setValue = function() {
        function d(d, c, h) {
            var b = d.tagName;
            "INPUT" === b || "TEXTAREA" === b ? d.value !== c && (d.value = c, g.text.setCursorPosition(d,
                h)) : d.innerHTML !== c && (d.innerHTML = c, g.text.setCursorPosition(d, h))
        }
        return function(e, c) {
            c = String(c);
            if (document.activeElement === e) {
                var h = g.text.getCursorPosition(e);
                d(e, c, h)
            } else d(e, c)
        }
    }();
    if ("object" === typeof module && module.exports) {
        try {
            var q = require("canvas")
        } catch (l) {}
        module.exports.dom = g
    }
})(sketch);
(function(k) {
    function g(d, e, c) {
        c[d] = function() {
            e[d].call(e, arguments)
        }
    }
    var f = k.dom = k.dom || {},
        q = k.util,
        l = {
            fadeout: {
                keyframes: [{
                    opacity: 1
                }, {
                    opacity: 0
                }],
                timing: {
                    ease: "ease-out",
                    duration: 250,
                    iterations: 1
                }
            },
            fadein: {
                keyframes: [{
                    opacity: 0
                }, {
                    opacity: 1
                }],
                timing: {
                    ease: "ease-out",
                    duration: 250,
                    iterations: 1
                }
            },
            zoomout: {
                keyframes: [{
                    transform: "scale(1)"
                }, {
                    transform: "scale(0)"
                }],
                timing: {
                    ease: "ease-out",
                    duration: 250,
                    iterations: 1
                }
            },
            radar: {
                keyframes: [{
                    offset: 0,
                    opacity: 0,
                    transform: "scale(1)"
                }, {
                    offset: .01,
                    opacity: .35,
                    transform: "scale(1)"
                }, {
                    offset: .8,
                    opacity: 0,
                    transform: "scale(1.1)"
                }, {
                    offset: 1,
                    opacity: 0,
                    transform: "scale(1.1)"
                }],
                timing: {
                    duration: 1250,
                    iterations: Infinity
                }
            },
            pulse: {
                keyframes: [{
                    transform: "scale(1)"
                }, {
                    transform: "scale(1.1)"
                }, {
                    transform: "scale(1)"
                }],
                timing: {
                    duration: 250,
                    iterations: 1
                }
            }
        };
    l.heartbeat = q.copyInto({
        timing: {
            iterations: 2
        }
    }, q.copy(l.pulse));
    f.animate = function(d, e) {
        "string" === typeof e && (e = {
            name: e
        });
        var c = {},
            h = l[e.name],
            b = q.copy(h.keyframes),
            a = q.copy(h.timing),
            w;
        for (w in e) a[w] = e[w];
        e.onstart &&
            e.onstart();
        requestAnimationFrame(function() {
            var h = d.animate(b, a);
            h.onfinish = e.onfinish;
            for (var w in h) g(w, h, c)
        });
        return c
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(c) {
        c = c.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?/);
        if ("data:" === c[1] || "blob:" === c[1] || "filesystem:" === c[1]) return !0
    }
    var f = k.util || (k.util = {}),
        q = !!("crossOrigin" in document.createElement("img")),
        l = "undefined" !== typeof window && "FormData" in window,
        d = {};
    f.loadImage = function(c) {
        function h() {
            f.request({
                url: a,
                responseType: "blob",
                onprogress: x,
                onerror: function(a) {
                    b(3);
                    d[v.host] = 3
                },
                onsuccess: function(m, c) {
                    c && (a = URL.createObjectURL(c), b(0), d[v.host] = q ? 1 : 0)
                }
            })
        }

        function b(b) {
            u.onload = p;
            u.onerror = m;
            u.onprogress = x;
            switch (b) {
                case 0:
                    u.src = a;
                    break;
                case 1:
                    u.crossOrigin = "anonymous";
                    u.src = a;
                    break;
                case 2:
                    h();
                    break;
                case 3:
                    f.loadImage.proxyUrl ? u.src = f.loadImage.proxyUrl + escape(a) : console.log("proxy not setup")
            }
            return u
        }
        "string" === typeof c && (c = {
            src: c
        });
        if ("undefined" === typeof c.src) return console.warn("loadImage", arguments);
        var a = c.src,
            w = !1 !== c.cors,
            u = c.image || document.createElement("img"),
            x = c.onprogress,
            p = c.onsuccess,
            m = c.onerror,
            v = document.createElement("a");
        v.href = a;
        var r;
        if (r = x) r = g(a) ? !1 :
            l;
        if (r) return b(2);
        if (!1 === w || e(a, !0)) return b(0);
        w = d[v.host];
        return "undefined" !== typeof w ? b(w) : q ? b(1) : l ? h() : b(3)
    };
    var e = function() {
        var c = /^([!#$&-;=?-\[\]_a-z~ ]|%[0-9a-fA-F]{2}|)+$/,
            d = /^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?/,
            b = {
                "http:": /:(80)?$/,
                "https:": /:(443)?$/
            },
            a = {
                "data:": !0,
                "blob:": !0,
                filesystem: !0
            };
        return function(e, u) {
            if ("string" === typeof e) {
                var f = e.match(d);
                return u && a[f[1]] ? !0 : f[1] && f[1].toLowerCase() !== location.protocol || f[2] && f[2].replace(b[location.protocol], "") !== location.host || f[1] && !f[2] ?
                    !1 : c.test(e)
            }
            console.error(e)
        }
    }()
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = {},
        f = {};
    (k.util || (k.util = {})).loadScript = function(f) {
        "string" === typeof f && (f = {
            url: f
        });
        q(f);
        return this
    };
    var q = function(l) {
        var d = l.urls;
        "undefined" === typeof d && (d = [{
            url: l.url,
            verify: l.verify
        }]);
        var e = document.getElementsByTagName("head")[0],
            c = function(a, b) {
                if (!(g[a.url] || b && "undefined" === typeof window[b])) {
                    g[a.url] = !0;
                    if (f[a.url]) f[a.url]();
                    delete f[a.url];
                    a.callback && a.callback();
                    "undefined" !== typeof p && p()
                }
            },
            h = !1,
            b = [],
            a = function(a) {
                "string" === typeof a && (a = {
                    url: a,
                    verify: l.verify
                });
                if (/([\w\d.])$/.test(a.verify)) {
                    var p = a.test = a.verify;
                    if ("object" === typeof p)
                        for (var d = 0; d < p.length; d++) b.push(p[d]);
                    else b.push(p)
                }
                g[a.url] || (p = document.createElement("script"), p.onreadystatechange = function() {
                        "loaded" !== this.readyState && "complete" !== this.readyState || c(a)
                    }, p.onload = function() {
                        c(a)
                    }, p.onerror = function(b) {
                        h = !0;
                        delete f[a.url];
                        if ("object" === typeof a.test)
                            for (var c in a.test) w(a.test[c]);
                        else w(a.test)
                    }, p.setAttribute("type", "text/javascript"), p.setAttribute("src", a.url), e.appendChild(p),
                    f[a.url] = function() {})
            },
            w = function(a) {
                for (var c = [], p = 0; p < b.length; p++) b[p] !== a && c.push(b[p]);
                b = c
            },
            u = function(a) {
                if (a) c(a, a.test);
                else
                    for (var p = 0; p < d.length; p++) c(d[p], d[p].test);
                for (var r = !0, p = 0; p < b.length; p++) {
                    var y = b[p];
                    if (y && -1 !== y.indexOf(".")) {
                        var y = y.split("."),
                            t = window[y[0]];
                        "undefined" !== typeof t && (2 === y.length ? "undefined" === typeof t[y[1]] && (r = !1) : 3 === y.length && "undefined" === typeof t[y[1]][y[2]] && (r = !1))
                    } else "undefined" === typeof window[y] && (r = !1)
                }!l.strictOrder && r ? h ? l.error && l.error() : l.callback &&
                    l.callback() : setTimeout(function() {
                        u(a)
                    }, 10)
            };
        if (l.strictOrder) {
            var x = -1,
                p = function() {
                    x++;
                    if (d[x]) {
                        var b = d[x],
                            c = b.url;
                        f[c] ? f[c] = function() {
                            b.callback && b.callback();
                            p()
                        } : g[c] ? p() : (a(b), u(b))
                    } else h ? l.error && l.error() : l.callback && l.callback()
                };
            p()
        } else
            for (x = 0; x < d.length; x++) a(d[x]), u(d[x])
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    (k.dom || (k.dom = {})).scrollTo = function(f) {
        f = f || {};
        var q = f.callback,
            l = f.target,
            d = f.top === +f.top ? f.top : null,
            e = f.left === +f.left ? f.left : null,
            c = f.duration === Math.abs(f.duration) ? f.duration : 250,
            h = f.relative || !1,
            b = l.scrollTop;
        f = l.scrollLeft;
        var d = d === +d ? h ? b + d : d : b,
            e = e === +e ? h ? f + e : e : f,
            a = Math.abs(b - d),
            h = Math.abs(f - e);
        if (0 === c || 50 > Math.max(h, a)) l.scrollLeft = e, l.scrollTop = d;
        else {
            c /= 25;
            d = a / 25 * (d > b ? 1 : -1);
            e = h / 25 * (e > f ? 1 : -1);
            for (a = h = 0; 25 >= a; a++) g(l, b, f, h * c), f += e, b += d, h++;
            q && setTimeout(q, h * c)
        }
    };
    var g = function(f,
        g, l, d) {
        setTimeout(function() {
            f.scrollTop = g + .5 >> 0;
            f.scrollLeft = l + .5 >> 0
        }, d)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    (k.util || (k.util = {})).request = function(f, q, l, d) {
        "string" === typeof f && (f = {
            url: f
        });
        var e = f.data,
            c = f.url,
            h = f.method || (f.data ? "POST" : "GET"),
            b = f.format,
            a = f.headers,
            w = f.mimeType,
            u = f.responseType,
            x = f.withCredentials || !1;
        d = d || f.onprogress;
        q = q || f.onsuccess;
        l = l || f.onerror;
        if ("undefined" !== typeof g && k.loc.isLocalUrl(c)) g.readFile(c, "utf8", function(a, b) {
            a ? l && l(a) : q && q({
                responseText: b
            }, b)
        });
        else {
            var p = new XMLHttpRequest;
            p.open(h, c, !0);
            if (a)
                for (var m in a) p.setRequestHeader(m, a[m]);
            else e && p.setRequestHeader("Content-type",
                "application/x-www-form-urlencoded");
            w && p.overrideMimeType(w);
            u && (p.responseType = u);
            x && (p.withCredentials = !0);
            l && "onerror" in p && (p.onerror = l);
            d && p.upload && "onprogress" in p.upload && (e ? p.upload.onprogress = function(a) {
                d.call(p, a, event.loaded / event.total)
            } : p.addEventListener("progress", function(a) {
                var b = 0;
                if (a.lengthComputable) b = a.total;
                else if (p.totalBytes) b = p.totalBytes;
                else if (b = parseInt(p.getResponseHeader("Content-Length-Raw")), isFinite(b)) p.totalBytes = b;
                else return;
                d.call(p, a, a.loaded / b)
            }, !1));
            p.onreadystatechange = function(a) {
                if (4 === p.readyState)
                    if (200 === p.status || 304 === p.status || 308 === p.status || 0 === p.status && window.top.cordova) {
                        if (q) {
                            var m;
                            if ("json" === b) try {
                                m = JSON.parse(a.target.response)
                            } catch (c) {
                                l && l.call(p, a)
                            } else m = "xml" === b ? a.target.responseXML : "text" === b ? a.target.responseText : a.target.response;
                            q.call(p, a, m)
                        }
                    } else l && l.call(p, a)
            };
            p.send(e);
            return p
        }
    };
    if ("object" === typeof module && module.exports) var g = require("fs")
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.lang = k.lang || {},
        f = k.util,
        q;
    g.locale = g.locale || {
        en: {}
    };
    g.localeAvailable = g.localeAvailable || {
        en: {}
    };
    g.translate = function(c) {
        return q ? q.__.apply(q, arguments) : c
    };
    g.contains = function(c) {
        var d = g.locale[q.locale];
        return !(!d || !d[c])
    };
    g.setLocaleData = function(c, d) {
        g.locale[c] = d;
        g.setLocale(c)
    };
    g.setLocale = function(c, d, b) {
        c = c || "auto";
        c = g.getLocale(c);
        q = q || new l({
            directory: "./js/lang",
            extension: ".json"
        });
        q.setLocale(c, function(a) {
            k.feature.lang = c;
            d && d()
        }, function() {
            g.setLocale("en", d)
        })
    };
    g.getLocale = function(c) {
        "auto" === c && (c = k.agent.lang);
        return g.locale[c] || g.localeAvailable[c] ? c : -1 !== c.indexOf("-") ? g.getLocale(c.split("-")[0]) : "en"
    };
    g.getWordCount = function() {
        var c = 0,
            d;
        for (d in g.locale.en) c += f.count(g.locale.en[d].split(" "));
        console.log(c)
    };
    var l = function(c) {
        for (var d in c) this[d] = c[d]
    };
    l.localeCache = {};
    l.prototype = {
        defaultLocale: "en",
        directory: "/locales",
        extension: ".min.json",
        getLocale: function() {
            return this.locale
        },
        setLocale: function(c, d, b) {
            this.locale = c = (c = c || document.querySelector("html").getAttribute("lang")) ||
                this.defaultLocale;
            g.locale[c] ? (this.setLocaleData(c, g.locale[c]), d && d()) : c in l.localeCache || (this.getLocaleFileFromServer(d, b), l.localeCache[c] = {})
        },
        setLocaleData: function(c, d) {
            l.localeCache[c] = d
        },
        getLocaleFileFromServer: function(c, d) {
            var b = this.locale;
            f.request({
                url: this.directory + "/" + b + this.extension,
                format: "json",
                headers: {
                    "Content-Type": "text/plain;charset=UTF-8"
                },
                onerror: d,
                onsuccess: function(a, d) {
                    l.localeCache[b] = d;
                    c && c(d)
                }
            })
        },
        __: function() {
            var c = arguments[0],
                c = l.localeCache[this.locale][c] ||
                c;
            1 < arguments.length && (c = e(c, Array.prototype.slice.call(arguments, 1)));
            return c
        },
        __n: function(c, d) {
            var b = l.localeCache[this.locale][c];
            d = parseInt(d, 10);
            b = 0 === d ? b.zero : 1 < d ? b.other : b.one;
            b = e(b, [d]);
            2 < arguments.length && (b = e(b, Array.prototype.slice.call(arguments, 2)));
            return b
        }
    };
    var d = f.sprintf = function(c) {
            if ("string" !== typeof c) throw "sprintf: The first arguments need to be a valid format string.";
            for (var d = new RegExp(/%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([%bcdfosxX])/g), b, a = [], e = 1; b = d.exec(c);) {
                if (e >=
                    arguments.length && "%" !== b[8]) throw "sprintf: At least one argument was missing.";
                a[a.length] = {
                    begin: b.index,
                    end: b.index + b[0].length,
                    sign: "+" == b[1],
                    negative: 0 > parseFloat(arguments[e]) ? !0 : !1,
                    padding: void 0 == b[2] ? " " : "'" == b[2].substring(0, 1) ? b[3] : b[2],
                    alignLeft: "-" == b[4],
                    width: void 0 != b[5] ? b[5] : !1,
                    precision: void 0 != b[7] ? b[7] : !1,
                    type: b[8],
                    data: "%" != b[8] ? String(arguments[e++]) : !1
                }
            }
            d = "";
            for (e = b = 0; e < a.length; ++e) {
                d += c.substring(b, a[e].begin);
                b = a[e].end;
                var u = "";
                switch (a[e].type) {
                    case "%":
                        u = "%";
                        break;
                    case "b":
                        u =
                            Math.abs(parseInt(a[e].data)).toString(2);
                        break;
                    case "c":
                        u = String.fromCharCode(Math.abs(parseInt(a[e].data)));
                        break;
                    case "d":
                        u = String(Math.abs(parseInt(a[e].data)));
                        break;
                    case "f":
                        u = !1 === a[e].precision ? String(Math.abs(parseFloat(a[e].data))) : Math.abs(parseFloat(a[e].data)).toFixed(a[e].precision);
                        break;
                    case "o":
                        u = Math.abs(parseInt(a[e].data)).toString(8);
                        break;
                    case "s":
                        u = a[e].data.substring(0, a[e].precision ? a[e].precision : a[e].data.length);
                        break;
                    case "x":
                        u = Math.abs(parseInt(a[e].data)).toString(16).toLowerCase();
                        break;
                    case "X":
                        u = Math.abs(parseInt(a[e].data)).toString(16).toUpperCase();
                        break;
                    default:
                        throw "sprintf: Unknown type \u201c" + a[e].type + "\u201d detected. This should never happen. Maybe the regex is wrong.";
                }
                if ("%" != a[e].type) {
                    if (0 != a[e].width && a[e].width > u.length)
                        for (var f = u.length, p = 0; p < a[e].width - f; ++p) u = 1 == a[e].alignLeft ? u + a[e].padding : a[e].padding + u;
                    if ("b" == a[e].type || "d" == a[e].type || "o" == a[e].type || "f" == a[e].type || "x" == a[e].type || "X" == a[e].type) 1 == a[e].negative ? u = "-" + u : 1 == a[e].sign && (u = "+" + u)
                }
                d +=
                    u
            }
            return d += c.substring(b, c.length)
        },
        e = f.vsprintf = function(c, h, b) {
            b = h.slice(0);
            b.splice(0, 0, c);
            return d.apply(null, b)
        }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.lang || {};
    g.locale = g.locale || {};
    g.localeAvailable = {
        de: {
            en: "German",
            "native": "Deutsch"
        },
        en: {
            en: "English",
            "native": "English"
        },
        es: {
            en: "Spanish",
            "native": "Espa\u00f1ol"
        },
        fr: {
            en: "French",
            "native": "Fran\u00e7ais"
        },
        it: {
            en: "Italian",
            "native": "Italiano"
        },
        nl: {
            en: "Dutch",
            "native": "Nederlands"
        },
        pl: {
            en: "Polish",
            "native": "Polski"
        },
        pt: {
            en: "Portuguese",
            "native": "Portugu\u00eas"
        },
        sv: {
            en: "Swedish",
            "native": "Svenska"
        },
        ar: {
            en: "Arabic",
            "native": "\u0627\u0644\u0639\u0631\u0628\u064a\u0629"
        },
        ko: {
            en: "Korean",
            "native": "\ud55c\uad6d\uc5b4"
        },
        ja: {
            en: "Japanese",
            "native": "\u65e5\u672c\u8a9e"
        },
        ru: {
            en: "Russian",
            "native": "\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u042f\u0437\u044b\u043a"
        },
        zh: {
            en: "Chinese",
            "native": "\u4e2d\u6587"
        }
    };
    k.util.copyInto({
        en: {
            "about-version": "[?] SketchAPI %s",
            "delete-doc-confirm": "Are you sure?",
            "change-doc-confirm": "Save current image?",
            "select-tool-count": "%s layers selected",
            "select-tool-message": "Use the <span class='icon-select'></span> Select tool to Move, Rotate, Scale, Delete, and reorganize the layers of your design.",
            "useMaxCopies-alert": "You can only include %s %s of this clipart.",
            "welcome-to": "Welcome to %s",
            "zoom-tool-message": "Use the <span class='icon-zoom'></span> Zoom tool to fine tune your image.",
            "scissor-tool-message": "Use the <span class='icon-scissors'></span> Scissor tool to slice polygons into pieces by drawing a line through the polygon.",
            start: "Start",
            "load-fail-restore": "Last time your document did not load properly.<br>Do you want to re-attempt to load your document?",
            "copy-to-clipboard": "Copy to Clipboard",
            "could-not-authorize": "%s could not authorize",
            "image-ready-to-share": "Your image is ready to be shared!",
            "share-link-copied": "Share link copied!",
            "still-uploading": "Still uploading to %s",
            "upload-complete": "%s upload complete!",
            "upload-failed": "%s upload failed!",
            "uploading-to": "Uploading to %s",
            "changes-saved": "All changes saved!",
            "upload-invalid": "Invalid format uploaded",
            "user-entered": "%s has entered the room.",
            "user-exited": "%s has left the room.",
            author: "Author",
            license: "License",
            project: "File",
            "special-thanks": "Special thanks",
            background: "Background",
            "change-media": "Change Media",
            "cut-objects": "Cut Selection",
            "merge-objects": "Merge Objects",
            "merge-paths": "Merge Paths",
            "new-doc-created": "New Document Created!",
            "paste-objects": "Paste Selection",
            "resize-canvas": "Resize Document",
            "remove-objects": "Remove Selection",
            "reset-clipart-color": "Reset Clipart Color",
            "split-path": "Split Path",
            "update-clipart-color": "Change Clipart Color",
            "update-style": "Update Style",
            "update-text": "Update Text",
            angle: "Angle",
            antialias: "Antialias",
            anticlockwise: "Anticlockwise",
            blend: "Blend",
            bristles: "Bristles",
            coils: "Coils",
            composite: "Composite",
            constrain: "Constrain",
            content: "Content",
            contract: "Contract",
            cutout: "Cutout",
            diameter: "Size",
            distance: "Distance",
            fill: "Fill",
            increment: "Increment",
            radius: "Radius",
            lineWidth: "Line Width",
            lookback: "Lookback",
            opacity: "Opacity",
            palette: "Palette",
            points: "Points",
            ratio: "Ratio",
            reset: "Reset",
            roundness: "Roundness",
            imperfection: "Imperfection",
            sides: "Sides",
            slope: "Slope",
            spacing: "Spacing",
            speed: "Speed",
            spread: "Spread",
            stroke: "Outline",
            arrow: "Arrow",
            brush: "Brush",
            calligraphy: "Calligraphy",
            chrome: "Chrome",
            crayon: "Crayon",
            eraser: "Eraser",
            fur: "Fur",
            paintbrush: "Paintbrush",
            pen: "Pen",
            pencil: "Pencil",
            sketchy: "Sketchy",
            spirograph: "Spirograph",
            spraypaint: "Spraypaint",
            streamer: "Streamer",
            web: "Web",
            oil: "Oil",
            burst: "Burst",
            circle: "Circle",
            ellipse: "Ellipse",
            gear: "Gear",
            pie: "Pie",
            radialBurst: "Radial Burst",
            rectangle: "Rectangle",
            regularPolygon: "Regular Polygon",
            ring: "Ring",
            shape: "Shape",
            spiral: "Spiral",
            square: "Square",
            star: "Star",
            triangle: "Triangle",
            select: "Select",
            "quick-selection": "Quick Selection",
            "add-to-selection": "Add to Selection",
            "subtract-from-selection": "Subtract from Selection",
            "select-all": "Select all",
            "select-inverse": "Select inverse",
            unselect: "Unselect",
            "crop-draw": "Crop Area",
            crop: "Crop",
            "screenshot-log": "Click & drag to create your screenshot.",
            screenshot: "Screenshot",
            "take-snapshot": "Take Snapshot",
            zoom: "Zoom",
            "zoom-in": "Zoom in",
            "zoom-out": "Zoom out",
            "zoom-to-default": "Zoom to actual size",
            stamp: "Stamp",
            "choose-stamp": "Set stamp category",
            "convert-to-stamp": "Convert to Stamp",
            clipart: "Clipart",
            "load-your-own-image": "Load your own image",
            "choose-clipart": "Set clipart category",
            floodfill: "Floodfill",
            contiguous: "Contiguous",
            tolerance: "Tolerance",
            text: "Text",
            font: "Font",
            fontFamily: "Font Family",
            fontSize: "Font Size",
            fontStyle: "Font Style",
            fontVariant: "Font Variant",
            fontWeight: "Font Weight",
            textAlign: "Text Align",
            textDecoration: "Text Decoration",
            textTransform: "Text Transform",
            whiteSpace: "White Space",
            lineHeight: "Line Height",
            letterSpacing: "Letter Spacing",
            wordSpacing: "Word Spacing",
            "choose-font": "Set font family",
            brightness: "Brightness",
            camera: "Camera",
            "camera-error": "There was an error loading the camera, please check your browser permissions.",
            contrast: "Contrast",
            exposure: "Exposure",
            hue: "Hue",
            luminosity: "Luminosity",
            saturation: "Saturation",
            temperature: "Temperature",
            tint: "Tint",
            blur: "Blur",
            pixelSize: "Pixel Size",
            copy: "Copy",
            "copy-all": "Copy all",
            cut: "Cut",
            "cut-all": "Cut all",
            "delete": "Delete",
            duplicate: "Duplicate",
            "delete-file": "Delete File",
            "duplicate-file": "Duplicate File",
            "object-backwards": "Send Backwards",
            "object-forwards": "Send Forwards",
            "object-to-back": "Send to Back",
            "object-to-front": "Send to Front",
            paste: "Paste",
            history: "History",
            undo: "Undo",
            redo: "Redo",
            move: "Move",
            "move-left": "Move Left",
            "move-right": "Move Right",
            "move-up": "Move Up",
            "move-down": "Move Down",
            rotate: "Rotate",
            scale: "Scale",
            transform: "Transform",
            translate: "Offset",
            "click-to-edit": "Click to Edit",
            "click-to-select": "Click to Select",
            "dbltap-to-edit": "Double Click to Edit",
            "drag-to-move": "Drag to Move",
            "drag-to-resize": "Drag to Resize",
            "drag-to-stretch": "Drag to Stretch",
            "drag-to-rotate": "Drag to Rotate",
            black: "Black",
            blueprint: "Blueprint",
            graphPaper: "Graph Paper",
            grid: "Grid",
            lined: "Lined",
            looseLeaf: "Loose Leaf",
            notebook: "Notebook",
            transparent: "Transparent",
            white: "White",
            color: "Color",
            gradient: "Gradient",
            pattern: "Pattern",
            eyedropper: "Eyedropper",
            "choose-blend": "Set Blending Mode",
            "color-burn": "Color Burn",
            "color-dodge": "Color Dodge",
            darken: "Darken",
            difference: "Difference",
            disco: "Disco",
            erase: "Erase",
            exclusion: "Exclusion",
            "hard-light": "Hard Light",
            lighten: "Lighten",
            multiply: "Multiply",
            normal: "Normal",
            overlay: "Overlay",
            screen: "Screen",
            "soft-light": "Soft Light",
            "source-atop": "Source Atop",
            "destination-over": "Destination Over",
            cancel: "Cancel",
            "continue": "Continue",
            "delete-doc": "Delete",
            ok: "Ok",
            "open-doc": "Open",
            quit: "Quit",
            download: "Download",
            "download-format": "Download %s",
            save: "Save",
            "save-format": "Save %s",
            dontSave: "Don&rsquo;t Save",
            autosave: "Autosave",
            "keyboard-shortcuts": "Keyboard Shortcuts",
            shortcuts: "Shortcuts",
            "ask-question": "Ask Question",
            "draw-with-friend": "Draw with a friend",
            "report-bug": "Report Bug",
            "request-feature": "Request Feature",
            connecting: "Connecting",
            "decoding-format": "Decoding %s",
            downloading: "Downloading",
            loading: "Loading",
            "loading-error": "Error loading",
            "opening-format": "Opening %s",
            "reading-files": "Reading files",
            "reading-format": "Reading %s",
            rendering: "Rendering",
            syncing: "Syncing",
            "choose-brush": "Choose Brush",
            "choose-media": "Choose Media",
            "choose-shape": "Choose Shape",
            "choose-utility": "Choose Utility",
            "choose-units": "Set units",
            "%": "%",
            cm: "cm",
            inches: "inches",
            mm: "mm",
            pixels: "pixels",
            "choose-fill": "Set Fill Style",
            "choose-stroke": "Set Outline Style",
            "choose-background": "Set Background Style",
            menu: "Document",
            "menu-export": "Export",
            "menu-create": "Create",
            helpdesk: "Help Desk",
            attachment: "Attachment",
            "community-page": "Community",
            configure: "Configure",
            "export": "Export",
            file: "File",
            layers: "Layers",
            "my-docs": "My Files",
            "new": "New",
            open: "Open",
            print: "Print",
            "video-tutorials": "Video Tutorials",
            "choose-preset-size": "Set preset size",
            "sans serif": "Sans Serif",
            serif: "Serif",
            display: "Display",
            handwriting: "Handwriting",
            bold: "Bold",
            italic: "Italic",
            "line-through": "Strikethrough",
            underline: "Underline",
            center: "Align Center",
            left: "Align Left",
            right: "Align Right",
            justify: "Justify",
            plants: "Plants",
            people: "People",
            animals: "Animals",
            "water colors": "Water colors",
            typogrunge: "Typogrunge",
            tizzape: "Tizzape",
            "simple smudges": "Simple Smudges",
            retro: "Retro",
            leafs: "Leafs",
            footprints: "Footprints",
            flowers: "Flowers",
            doodles: "Doodles",
            butterflies: "Butterflies",
            "aspect-ratio": "Aspect Ratio",
            "choose-aspect-ratio": "Set Aspect Ratio",
            "choose-constrain": "Constrain Proportions",
            "hide-layer": "Hide layer",
            "show-layer": "Show layer",
            "convert-format": "Convert to %s",
            "update-format": "Update %s",
            image: "Image",
            saving: "Saving",
            colorNoise: "Noise",
            colorMode: "Type",
            linear: "Linear Gradient",
            radial: "Radial Gradient",
            cycle: "Color Cycle",
            lineJoin: "Corner",
            lineCap: "Cap",
            round: "Round",
            bevel: "Bevel",
            miter: "Miter",
            enabled: "Enabled",
            disabled: "Disabled",
            projects: "Files",
            paper: "Paper",
            quality: "Quality",
            fileFormat: "Format",
            sizeTo: "Size To",
            size: "Size",
            percent: "Percent",
            share: "Share",
            dpi: "DPI",
            settings: "Settings",
            tool: "Tool",
            width: "Width",
            height: "Height",
            x: "X",
            y: "Y",
            "no-layers": "No layers added",
            "no-history": "No history added",
            "object-order": "Layer Order",
            document: "Document",
            library: "Library",
            utilities: "Utilities",
            brushes: "Brushes",
            shapes: "Shapes",
            highlighter: "Highlighter",
            polyarrow: "Arrow",
            polyline: "Line",
            polygon: "Polygon",
            scissor: "Scissor",
            path: "Path",
            help: "Help",
            curved: "Curved",
            textbrush: "Textbrush",
            shader: "Shader",
            fitWithin: "Fit Within",
            "72dpi": "72: Web",
            "150dpi": "150: Draft Printing",
            "300dpi": "300: High-Res Printing",
            "upload-as-new": "Import&hellip;",
            "place-into": "Place into&hellip;",
            upload: "Upload",
            resize: "Resize",
            dimensions: "Dimensions",
            apply: "Apply",
            create: "Create",
            "set-background": "Change Background",
            "rename-file": "Rename File",
            "screenshot-tool-message": "Use the <span class='icon-screenshot'></span> Screenshot tool to download a selection of your drawing.",
            "download-format-sketchpad": "The Sketchpad format allows you to reload your layers and vectors."
        }
    }, g.locale)
})(sketch);
(function() {
    Array.isArray = Array.isArray || function(k) {
        return k && "[object Array]" === Object.prototype.toString.call(k)
    };
    Array.prototype.every = Array.prototype.every || function(k, g) {
        for (var f = 0, q = this.length; f < q && k.call(g || window, this[f], f, this); ++f);
        return f === q
    };
    Array.prototype.filter = Array.prototype.filter || function(k, g) {
        for (var f = [], q = 0, l = this.length, d; q < l; ++q) d = this[q], k.call(g || window, d, q, this) && f.push(d);
        return f
    };
    Array.prototype.forEach = Array.prototype.forEach || function(k, g) {
        for (var f = 0, q = this.length; f <
            q; ++f) k.call(g || window, this[f], f, this)
    };
    Array.prototype.indexOf = Array.prototype.indexOf || function(k) {
        for (var g = 0, f = this.length; g < f; ++g)
            if (this[g] === k) return g;
        return -1
    };
    Array.prototype.lastIndexOf = Array.prototype.lastIndexOf || function(k) {
        for (var g = this.length - 1; - 1 < g; --g)
            if (this[g] === k) return g;
        return -1
    };
    Array.prototype.map = Array.prototype.map || function(k, g) {
        for (var f = [], q = 0, l = this.length; q < l; ++q) f.push(k.call(g || window, this[q], q, this));
        return f
    };
    Array.prototype.reduce = Array.prototype.reduce || function(k,
        g) {
        for (var f = g || 0, q = 0, l = this.length; q < l; ++q) f = k.call(window, f, this[q], q, this);
        return f
    };
    Array.prototype.reduceRight = Array.prototype.reduceRight || function(k, g) {
        for (var f = g || 0, q = this.length - 1; - 1 < q; --q) f = k.call(window, f, this[q], q, this);
        return f
    };
    Array.prototype.some = Array.prototype.some || function(k, g) {
        for (var f = 0, q = this.length; f < q && !k.call(g || window, this[f], f, this); ++f);
        return f === q
    };
    Array.prototype.includes = Array.prototype.includes || function(k, g) {
        var f = Object(this),
            q = parseInt(f.length) || 0;
        if (0 === q) return !1;
        var l = parseInt(g) || 0;
        0 <= l || (l = q + l, 0 > l && (l = 0));
        for (var d; l < q;) {
            d = f[l];
            if (k === d || k !== k && d !== d) return !0;
            l++
        }
        return !1
    }
})();
if (!window.btoa || !window.atob) {
    var base64 = {
        PADCHAR: "=",
        ALPHA: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",
        getbyte64: function(k, g) {
            var f = base64.ALPHA.indexOf(k.charAt(g));
            if (-1 == f) throw "Cannot decode base64";
            return f
        },
        decode: function(k) {
            k = "" + k;
            var g = base64.getbyte64,
                f, q, l, d = k.length;
            if (0 == d) return k;
            if (0 != d % 4) throw "Cannot decode base64";
            f = 0;
            k.charAt(d - 1) == base64.PADCHAR && (f = 1, k.charAt(d - 2) == base64.PADCHAR && (f = 2), d -= 4);
            var e = [];
            for (q = 0; q < d; q += 4) l = g(k, q) << 18 | g(k, q + 1) << 12 | g(k, q +
                2) << 6 | g(k, q + 3), e.push(String.fromCharCode(l >> 16, l >> 8 & 255, l & 255));
            switch (f) {
                case 1:
                    l = g(k, q) << 18 | g(k, q + 1) << 12 | g(k, q + 2) << 6;
                    e.push(String.fromCharCode(l >> 16, l >> 8 & 255));
                    break;
                case 2:
                    l = g(k, q) << 18 | g(k, q + 1) << 12, e.push(String.fromCharCode(l >> 16))
            }
            return e.join("")
        },
        getbyte: function(k, g) {
            var f = k.charCodeAt(g);
            if (255 < f) throw "INVALID_CHARACTER_ERR: DOM Exception 5";
            return f
        },
        encode: function(k) {
            if (1 != arguments.length) throw "SyntaxError: Not enough arguments";
            var g = base64.PADCHAR,
                f = base64.ALPHA,
                q = base64.getbyte,
                l, d, e = [];
            k = "" + k;
            var c = k.length - k.length % 3;
            if (0 == k.length) return k;
            for (l = 0; l < c; l += 3) d = q(k, l) << 16 | q(k, l + 1) << 8 | q(k, l + 2), e.push(f.charAt(d >> 18)), e.push(f.charAt(d >> 12 & 63)), e.push(f.charAt(d >> 6 & 63)), e.push(f.charAt(d & 63));
            switch (k.length - c) {
                case 1:
                    d = q(k, l) << 16;
                    e.push(f.charAt(d >> 18) + f.charAt(d >> 12 & 63) + g + g);
                    break;
                case 2:
                    d = q(k, l) << 16 | q(k, l + 1) << 8, e.push(f.charAt(d >> 18) + f.charAt(d >> 12 & 63) + f.charAt(d >> 6 & 63) + g)
            }
            return e.join("")
        }
    };
    window.btoa = base64.encode;
    window.atob = base64.decode
}
"document" in self && ("classList" in document.createElement("_") ? function() {
    var k = document.createElement("_");
    k.classList.add("c1", "c2");
    if (!k.classList.contains("c2")) {
        var g = function(f) {
            var g = DOMTokenList.prototype[f];
            DOMTokenList.prototype[f] = function(d) {
                var e, c = arguments.length;
                for (e = 0; e < c; e++) d = arguments[e], g.call(this, d)
            }
        };
        g("add");
        g("remove")
    }
    k.classList.toggle("c3", !1);
    if (k.classList.contains("c3")) {
        var f = DOMTokenList.prototype.toggle;
        DOMTokenList.prototype.toggle = function(g, l) {
            return 1 in arguments &&
                !this.contains(g) === !l ? l : f.call(this, g)
        }
    }
    k = null
}() : function(k) {
    if ("Element" in k) {
        k = k.Element.prototype;
        var g = Object,
            f = String.prototype.trim || function() {
                return this.replace(/^\s+|\s+$/g, "")
            },
            q = Array.prototype.indexOf || function(a) {
                for (var b = 0, c = this.length; b < c; b++)
                    if (b in this && this[b] === a) return b;
                return -1
            },
            l = function(a, b) {
                this.name = a;
                this.code = DOMException[a];
                this.message = b
            },
            d = function(a, b) {
                if ("" === b) throw new l("SYNTAX_ERR", "An invalid or illegal string was specified");
                if (/\s/.test(b)) throw new l("INVALID_CHARACTER_ERR",
                    "String contains an invalid character");
                return q.call(a, b)
            },
            e = function(a) {
                for (var b = f.call(a.getAttribute("class") || ""), b = b ? b.split(/\s+/) : [], c = 0, d = b.length; c < d; c++) this.push(b[c]);
                this._updateClassName = function() {
                    a.setAttribute("class", this.toString())
                }
            },
            c = e.prototype = [],
            h = function() {
                return new e(this)
            };
        l.prototype = Error.prototype;
        c.item = function(a) {
            return this[a] || null
        };
        c.contains = function(a) {
            return -1 !== d(this, a + "")
        };
        c.add = function() {
            var a = arguments,
                b = 0,
                c = a.length,
                h, p = !1;
            do h = a[b] + "", -1 === d(this,
                h) && (this.push(h), p = !0); while (++b < c);
            p && this._updateClassName()
        };
        c.remove = function() {
            var a = arguments,
                b = 0,
                c = a.length,
                h, p = !1,
                m;
            do
                for (h = a[b] + "", m = d(this, h); - 1 !== m;) this.splice(m, 1), p = !0, m = d(this, h); while (++b < c);
            p && this._updateClassName()
        };
        c.toggle = function(a, b) {
            a += "";
            var c = this.contains(a),
                d = c ? !0 !== b && "remove" : !1 !== b && "add";
            if (d) this[d](a);
            return !0 === b || !1 === b ? b : !c
        };
        c.toString = function() {
            return this.join(" ")
        };
        if (g.defineProperty) {
            c = {
                get: h,
                enumerable: !0,
                configurable: !0
            };
            try {
                g.defineProperty(k, "classList",
                    c)
            } catch (b) {
                -2146823252 === b.number && (c.enumerable = !1, g.defineProperty(k, "classList", c))
            }
        } else g.prototype.__defineGetter__ && k.__defineGetter__("classList", h)
    }
}(self));
(function(k) {
    for (var g, f = {}, q = function() {}, l = ["memory"], d = "assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" "); g = l.pop();) k[g] || (k[g] = f);
    for (; g = d.pop();) k[g] || (k[g] = q)
})(self.console = self.console || {});
(function() {
    function k(f, l, d) {
        var e = document.createElement("canvas");
        g(f, e, l, d);
        return e.toDataURL("image/jpeg", l.quality || .8)
    }

    function g(f, g, d, e) {
        var c = f.naturalWidth,
            h = f.naturalHeight,
            b = d.width,
            a = d.height,
            w = g.getContext("2d");
        w.save();
        d = d.orientation;
        switch (d) {
            case 5:
            case 6:
            case 7:
            case 8:
                g.width = a;
                g.height = b;
                break;
            default:
                g.width = b, g.height = a
        }
        switch (d) {
            case 2:
                w.translate(b, 0);
                w.scale(-1, 1);
                break;
            case 3:
                w.translate(b, a);
                w.rotate(Math.PI);
                break;
            case 4:
                w.translate(0, a);
                w.scale(1, -1);
                break;
            case 5:
                w.rotate(.5 *
                    Math.PI);
                w.scale(1, -1);
                break;
            case 6:
                w.rotate(.5 * Math.PI);
                w.translate(0, -a);
                break;
            case 7:
                w.rotate(.5 * Math.PI);
                w.translate(b, -a);
                w.scale(-1, 1);
                break;
            case 8:
                w.rotate(-.5 * Math.PI), w.translate(-b, 0)
        }
        g = f.naturalWidth;
        1048576 < g * f.naturalHeight ? (d = document.createElement("canvas"), d.width = d.height = 1, d = d.getContext("2d"), d.drawImage(f, -g + 1, 0), g = 0 === d.getImageData(0, 0, 1, 1).data[3]) : g = !1;
        g && (c /= 2, h /= 2);
        g = document.createElement("canvas");
        g.width = g.height = 1024;
        d = g.getContext("2d");
        if (e) {
            e = h;
            var u = document.createElement("canvas");
            u.width = 1;
            u.height = e;
            u = u.getContext("2d");
            u.drawImage(f, 0, 0);
            for (var u = u.getImageData(0, 0, 1, e).data, x = 0, p = e, m = e; m > x;) 0 === u[4 * (m - 1) + 3] ? p = m : x = m, m = p + x >> 1;
            e = m / e;
            e = 0 === e ? 1 : e
        } else e = 1;
        b = Math.ceil(1024 * b / c);
        a = Math.ceil(1024 * a / h / e);
        for (u = e = 0; e < h;) {
            for (p = x = 0; x < c;) d.clearRect(0, 0, 1024, 1024), d.drawImage(f, -x, -e), w.drawImage(g, 0, 0, 1024, 1024, p, u, b, a), x += 1024, p += b;
            e += 1024;
            u += a
        }
        w.restore()
    }

    function f(f) {
        if (window.Blob && f instanceof Blob) {
            var g = new Image,
                d = window.URL && window.URL.createObjectURL ? window.URL : window.webkitURL &&
                window.webkitURL.createObjectURL ? window.webkitURL : null;
            if (!d) throw Error("No createObjectURL function found to create blob url");
            g.src = d.createObjectURL(f);
            this.blob = f;
            f = g
        }
        if (!f.naturalWidth && !f.naturalHeight) {
            var e = this;
            f.onload = function() {
                var c = e.imageLoadListeners;
                if (c) {
                    e.imageLoadListeners = null;
                    for (var d = 0, b = c.length; d < b; d++) c[d]()
                }
            };
            this.imageLoadListeners = []
        }
        this.srcImage = f
    }
    f.prototype.render = function(f, l, d) {
        if (this.imageLoadListeners) {
            var e = this;
            this.imageLoadListeners.push(function() {
                e.render(f,
                    l, d)
            })
        } else {
            l = l || {};
            var c = this.srcImage,
                h = c.src,
                b = h.length,
                a = c.naturalWidth,
                c = c.naturalHeight,
                w = l.width,
                u = l.height,
                x = l.maxWidth,
                p = l.maxHeight,
                h = this.blob && "image/jpeg" === this.blob.type || 0 === h.indexOf("data:image/jpeg") || h.indexOf(".jpg") === b - 4 || h.indexOf(".jpeg") === b - 5;
            w && !u ? u = c * w / a << 0 : u && !w ? w = a * u / c << 0 : (w = a, u = c);
            x && w > x && (w = x, u = c * w / a << 0);
            p && u > p && (u = p, w = a * u / c << 0);
            var a = {
                    width: w,
                    height: u
                },
                m;
            for (m in l) a[m] = l[m];
            m = f.tagName.toLowerCase();
            "img" === m ? f.src = k(this.srcImage, a, h) : "canvas" === m && g(this.srcImage,
                f, a, h);
            if ("function" === typeof this.onrender) this.onrender(f);
            d && d()
        }
    };
    "function" === typeof define && define.amd ? define([], function() {
        return f
    }) : this.MegaPixImage = f
})();
window.requestAnimationFrame || (! function(k) {
    if ("object" == typeof exports && "undefined" != typeof module) module.exports = k();
    else if ("function" == typeof define && define.amd) define([], k);
    else {
        var g;
        "undefined" != typeof window ? g = window : "undefined" != typeof global ? g = global : "undefined" != typeof self && (g = self);
        g.AnimationFrame = k()
    }
}(function() {
    return function g(f, q, l) {
        function d(c, b) {
            if (!q[c]) {
                if (!f[c]) {
                    var a = "function" == typeof require && require;
                    if (!b && a) return a(c, !0);
                    if (e) return e(c, !0);
                    a = Error("Cannot find module '" +
                        c + "'");
                    throw a.code = "MODULE_NOT_FOUND", a;
                }
                a = q[c] = {
                    exports: {}
                };
                f[c][0].call(a.exports, function(a) {
                    var b = f[c][1][a];
                    return d(b ? b : a)
                }, a, a.exports, g, f, q, l)
            }
            return q[c].exports
        }
        for (var e = "function" == typeof require && require, c = 0; c < l.length; c++) d(l[c]);
        return d
    }({
        1: [function(g, f, q) {
            f.exports = g("./lib/animation-frame")
        }, {
            "./lib/animation-frame": 2
        }],
        2: [function(g, f, q) {
            function l(a) {
                if (!(this instanceof l)) return new l(a);
                a || (a = {});
                "number" == typeof a && (a = {
                    frameRate: a
                });
                null != a.useNative || (a.useNative = !0);
                this.options =
                    a;
                this.frameRate = a.frameRate || l.FRAME_RATE;
                this._frameLength = 1E3 / this.frameRate;
                this._isCustomFrameRate = this.frameRate !== l.FRAME_RATE;
                this._timeoutId = null;
                this._callbacks = {};
                this._tickCounter = this._lastTickTime = 0
            }
            var d = g("./native"),
                e = g("./now"),
                c = g("./performance"),
                h = d.request,
                b = d.cancel;
            f.exports = l;
            l.FRAME_RATE = 60;
            l.shim = function(a) {
                var b = new l(a);
                window.requestAnimationFrame = function(a) {
                    return b.request(a)
                };
                window.cancelAnimationFrame = function(a) {
                    return b.cancel(a)
                };
                return b
            };
            l.prototype.request =
                function(a) {
                    var b = this;
                    ++this._tickCounter;
                    if (d.supported && this.options.useNative && !this._isCustomFrameRate) return h(a);
                    if (!a) throw new TypeError("Not enough arguments");
                    if (null == this._timeoutId) {
                        var u = this._frameLength + this._lastTickTime - e();
                        0 > u && (u = 0);
                        this._timeoutId = setTimeout(function() {
                            b._lastTickTime = e();
                            b._timeoutId = null;
                            ++b._tickCounter;
                            var a = b._callbacks;
                            b._callbacks = {};
                            for (var p in a)
                                if (a[p])
                                    if (d.supported && b.options.useNative) h(a[p]);
                                    else a[p](c.now())
                        }, u)
                    }
                    this._callbacks[this._tickCounter] =
                        a;
                    return this._tickCounter
                };
            l.prototype.cancel = function(a) {
                d.supported && this.options.useNative && b(a);
                delete this._callbacks[a]
            }
        }, {
            "./native": 3,
            "./now": 4,
            "./performance": 6
        }],
        3: [function(g, f, q) {
            g = window;
            try {
                g.top.name, g = g.top
            } catch (l) {}
            q.request = g.requestAnimationFrame;
            q.cancel = g.cancelAnimationFrame || g.cancelRequestAnimationFrame;
            q.supported = !1;
            f = ["Webkit", "Moz", "ms", "O"];
            for (var d = 0; d < f.length && !q.request; d++) q.request = g[f[d] + "RequestAnimationFrame"], q.cancel = g[f[d] + "CancelAnimationFrame"] || g[f[d] +
                "CancelRequestAnimationFrame"];
            q.request && q.request.call(null, function() {
                q.supported = !0
            })
        }, {}],
        4: [function(g, f, q) {
            f.exports = Date.now || function() {
                return (new Date).getTime()
            }
        }, {}],
        5: [function(g, f, q) {
            g = g("./now");
            q.navigationStart = g()
        }, {
            "./now": 4
        }],
        6: [function(g, f, q) {
            var l = g("./now"),
                d = g("./performance-timing");
            q.now = function() {
                return window.performance && window.performance.now ? window.performance.now() : l() - d.navigationStart
            }
        }, {
            "./now": 4,
            "./performance-timing": 5
        }]
    }, {}, [1])(1)
}), AnimationFrame.shim());
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.dom = k.dom || {};
    (function() {
        navigator.temporaryStorage = navigator.temporaryStorage || navigator.webkitTemporaryStorage;
        navigator.persistentStorage = navigator.persistentStorage || navigator.webkitPersistentStorage;
        self.requestFileSystem = self.requestFileSystem || self.webkitRequestFileSystem;
        self.resolveLocalFileSystemURL = self.resolveLocalFileSystemURL || self.webkitResolveLocalFileSystemURL;
        navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia ||
            navigator.msGetUserMedia;
        self.URL = self.URL || self.webkitURL || self.mozURL || self.msURL || self.oURL;
        self.Blob = self.Blob || self.BlobBuilder || self.WebKitBlobBuilder || self.MozBlobBuilder;
        self.Element && function(f) {
            f.matchesSelector = f.matchesSelector || f.mozMatchesSelector || f.msMatchesSelector || f.oMatchesSelector || f.webkitMatchesSelector || function(f) {
                f = (this.parentNode || this.document).querySelectorAll(f);
                for (var g = -1; f[++g] && f[g] != this;);
                return !!f[g]
            }
        }(Element.prototype);
        Date.now || (Date.now = function() {
            return (new Date).getTime()
        })
    })(self);
    (function() {
        var f = -1 !== window.location.href.indexOf("/sketch.io/"),
            q = function(d, c) {
                var h = f ? "../../sketch-src/www/" : "./";
                eventjs.useStallOnReady++;
                k.util.require({
                    url: h + "inc/" + (c || "shim") + "/" + d,
                    onsuccess: function() {
                        eventjs.useStallOnReady--
                    }
                })
            };
        (function() {
            var d = document.createElement("DIV");
            d.innerHTML = "\x3c!--[if lte IE 9]><I></I><![endif]--\x3e";
            0 < d.getElementsByTagName("I").length && q("IE8-HTML5.js")
        })();
        (function() {
            var d = document.createElement("canvas");
            d.getContext && d.getContext("2d") || q("flashcanvas.js",
                "FlashCanvasPro")
        })();
        var l = g.shim = function(d, c, h) {
            typeof d !== (h || "function") && q(c)
        };
        l(window.ArrayBuffer, "TypedArray.js");
        l(window.Blob, "Blob.js");
        l(window.requestFileSystem, "requestFileSystem.js");
        l(window.atob && window.btoa, "Base64.js");
        l(window.getComputedStyle, "getComputedStyle.js");
        l(window.JSON && window.JSON.parse, "JSON.js");
        l(document.querySelector, "querySelector.js");
        l(document.documentElement.classList, "ClassList.js", "object");
        l(document.documentElement.animate, "WebAnimations.js");
        void 0 ===
            window.innerHeight && q("dimensions.js");
        try {
            if ("undefined" === typeof chrome || "undefined" === typeof chrome.storage) localStorage.setItem("test", "test"), localStorage.removeItem("test")
        } catch (d) {
            q("localStorage.js")
        }
    })()
})(sketch);
window.AudioContext = window.AudioContext || window.webkitAudioContext || null;
window.OfflineAudioContext = window.OfflineAudioContext || window.webkitOfflineAudioContext || null;
(function(k) {
    var g = function(f) {
        return "[object Function]" === Object.prototype.toString.call(f) || "[object AudioContextConstructor]" === Object.prototype.toString.call(f)
    };
    if (g(k)) {
        var f = new k;
        if (f.destination && f.sampleRate) {
            var q = Object.getPrototypeOf(f.createBufferSource());
            !g(q.start) && g(q.noteOn) && (q.start = function(f, d, e) {
                switch (arguments.length) {
                    case 0:
                        throw Error("Not enough arguments.");
                    case 1:
                        this.noteOn(f);
                        break;
                    case 2:
                        if (this.buffer) this.noteGrainOn(f, d, this.buffer.duration - d);
                        else throw Error("Missing AudioBuffer");
                        break;
                    case 3:
                        this.noteGrainOn(f, d, e)
                }
            });
            g(q.noteOn) || (q.noteOn = q.start);
            g(q.noteGrainOn) || (q.noteGrainOn = q.start);
            g(q.stop) || (q.stop = q.noteOff);
            g(q.noteOff) || (q.noteOff = q.stop);
            q = function(g, d, e) {
                g = Object.getPrototypeOf(f[g]());
                if ("undefined" === typeof g[d[0]])
                    for (var c = 0; c < d.length; c++) {
                        var h = d[c];
                        g[h] = (e && e[c] || h).toLowerCase()
                    }
            };
            q("createBiquadFilter", "LOWPASS HIGHPASS BANDPASS LOWSHELF HIGHSHELF PEAKING NOTCH ALLPASS".split(" "));
            q("createOscillator", ["SINE", "SQUARE", "SAWTOOTH", "TRIANGLE", "CUSTOM"]);
            q("createPanner", ["EQUALPOWER", "HRTF", "LINEAR_DISTANCE", "INVERSE_DISTANCE", "EXPONENTIAL_DISTANCE"], ["equalpower", "HRTF", "linear", "inverse", "exponential"]);
            [
                ["createGainNode", "createGain"],
                ["createDelayNode", "createDelay"],
                ["createJavaScriptNode", "createScriptProcessor"],
                ["createWaveTable", "createPeriodicWave"]
            ].forEach(function(f) {
                for (var d, e; f.length;) d = f.pop(), g(this[d]) ? this[f.pop()] = this[d] : (e = f.pop(), this[d] = this[e])
            }, k.prototype)
        }
    }
})(window.AudioContext);
(function(k) {
    k.URL = k.URL || k.webkitURL;
    if (k.Blob && k.URL) try {
        new Blob;
        return
    } catch (g) {}
    var f = k.BlobBuilder || k.WebKitBlobBuilder || k.MozBlobBuilder || function(f) {
        var g = function(a) {
                return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]
            },
            d = function() {
                this.data = []
            },
            e = function(a, b, c) {
                this.data = a;
                this.size = a.length;
                this.type = b;
                this.encoding = c
            },
            c = d.prototype,
            h = e.prototype,
            b = f.FileReaderSync,
            a = function(a) {
                this.code = this[this.name = a]
            },
            w = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
            u = w.length,
            x = f.URL || f.webkitURL || f,
            p = x.createObjectURL,
            m = x.revokeObjectURL,
            v = x,
            r = f.btoa,
            y = f.atob,
            t = f.ArrayBuffer,
            E = f.Uint8Array;
        for (e.fake = h.fake = !0; u--;) a.prototype[w[u]] = u + 1;
        x.createObjectURL || (v = f.URL = {});
        v.createObjectURL = function(a) {
            var b = a.type;
            null === b && (b = "application/octet-stream");
            if (a instanceof e) return b = "data:" + b, "base64" === a.encoding ? b + ";base64," + a.data : "URI" === a.encoding ? b + "," + decodeURIComponent(a.data) : r ? b + ";base64," + r(a.data) : b + "," + encodeURIComponent(a.data);
            if (p) return p.call(x,
                a)
        };
        v.revokeObjectURL = function(a) {
            "data:" !== a.substring(0, 5) && m && m.call(x, a)
        };
        c.append = function(c) {
            var m = this.data;
            if (E && (c instanceof t || c instanceof E)) {
                var p = "";
                c = new E(c);
                for (var d = 0, r = c.length; d < r; d++) p += String.fromCharCode(c[d]);
                m.push(p)
            } else if ("Blob" === g(c) || "File" === g(c))
                if (b) p = new b, m.push(p.readAsBinaryString(c));
                else throw new a("NOT_READABLE_ERR");
            else c instanceof e ? "base64" === c.encoding && y ? m.push(y(c.data)) : "URI" === c.encoding ? m.push(decodeURIComponent(c.data)) : "raw" === c.encoding &&
                m.push(c.data) : ("string" !== typeof c && (c += ""), m.push(unescape(encodeURIComponent(c))))
        };
        c.getBlob = function(a) {
            arguments.length || (a = null);
            return new e(this.data.join(""), a, "raw")
        };
        c.toString = function() {
            return "[object BlobBuilder]"
        };
        h.slice = function(a, b, c) {
            var m = arguments.length;
            3 > m && (c = null);
            return new e(this.data.slice(a, 1 < m ? b : this.data.length), c, this.encoding)
        };
        h.toString = function() {
            return "[object Blob]"
        };
        h.close = function() {
            this.size = 0;
            delete this.data
        };
        return d
    }(k);
    k.Blob = function(g, l) {
        var d = l ? l.type ||
            "" : "",
            e = new f;
        if (g)
            for (var c = 0, h = g.length; c < h; c++) e.append(g[c]);
        return e.getBlob(d)
    }
})("undefined" !== typeof self && self || "undefined" !== typeof window && window || this.content || this);
(function(k) {
    var g = k.Uint8Array,
        f = (k = k.HTMLCanvasElement) && k.prototype,
        q = /\s*;\s*base64\s*(?:;|$)/i,
        l = "toDataURL",
        d;
    g && (d = new g([62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, 0, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51]));
    k && !f.toBlob && (f.toBlob = function(e, c) {
        c || (c = "image/png");
        if (this.mozGetAsFile) e(this.mozGetAsFile("canvas", c));
        else if (this.msToBlob && /^\s*image\/png\s*(?:$|;)/i.test(c)) e(this.msToBlob());
        else {
            var h = Array.prototype.slice.call(arguments, 1),
                b = this[l].apply(this, h),
                a = b.indexOf(","),
                h = b.substring(a + 1),
                b = q.test(b.substring(0, a)),
                f;
            if (Blob.fake) f = new Blob, f.encoding = b ? "base64" : "URI", f.data = h, f.size = h.length;
            else if (g)
                if (b) {
                    f = Blob;
                    for (var b = h.length, a = new g(b / 4 * 3 | 0), u = 0, x = 0, p = [0, 0], m = 0, v = 0, r, y; b--;) y = h.charCodeAt(u++), r = d[y - 43], 255 !== r && void 0 !== r && (p[1] = p[0], p[0] = y, v = v << 6 | r, m++, 4 === m && (a[x++] = v >>> 16, 61 !== p[1] && (a[x++] = v >>> 8), 61 !== p[0] && (a[x++] = v), m = 0));
                    f = new f([a], {
                        type: c
                    })
                } else f = new Blob([decodeURIComponent(h)], {
                    type: c
                });
            e(f)
        }
    }, f.toBlobHD = f.toDataURLHD ? function() {
        l = "toDataURLHD";
        var d = this.toBlob();
        l = "toDataURL";
        return d
    } : f.toBlob);
    k && !f.toBlobURL && (f.toBlobURL = function(d) {
        d = d || function(c) {
            console.log("no callback", c)
        };
        this.toBlob(function(c) {
            d(URL.createObjectURL(c))
        })
    })
})("undefined" !== typeof self && self || "undefined" !== typeof window && window || this.content || this);
document.createElementNS || (document.createElementNS = function(k, g) {
    return document.createElement(g)
});
if (!window.chrome || !window.chrome.fileSystem) {
    var saveAs = saveAs || "undefined" !== typeof navigator && navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator) || function(k) {
        if ("undefined" === typeof navigator || !/MSIE [1-9]\./.test(navigator.userAgent)) {
            var g = k.document,
                f = g.createElementNS("http://www.w3.org/1999/xhtml", "a"),
                q = "download" in f,
                l = function(a) {
                    var b = g.createEvent("MouseEvents");
                    b.initMouseEvent("click", !0, !1, k, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null);
                    a.dispatchEvent(b)
                },
                d = k.webkitRequestFileSystem,
                e = k.requestFileSystem || d || k.mozRequestFileSystem,
                c = function(a) {
                    (k.setImmediate || k.setTimeout)(function() {
                        throw a;
                    }, 0)
                },
                h = 0,
                b = function(a) {
                    var b = function() {
                        "string" === typeof a ? (k.URL || k.webkitURL || k).revokeObjectURL(a) : a.remove()
                    };
                    k.chrome ? b() : setTimeout(b, 500)
                },
                a = function(a, b, m) {
                    b = [].concat(b);
                    for (var d = b.length; d--;) {
                        var r = a["on" + b[d]];
                        if ("function" === typeof r) try {
                            r.call(a, m || a)
                        } catch (h) {
                            c(h)
                        }
                    }
                },
                w = function(c, p) {
                    var m = this,
                        v = c.type,
                        r = !1,
                        y, t, u = function() {
                            a(m, ["writestart", "progress", "write", "writeend"])
                        },
                        g = function() {
                            if (r || !y) y = (k.URL || k.webkitURL || k).createObjectURL(c);
                            t ? t.location.href = y : void 0 == k.open(y, "_blank") && "undefined" !== typeof safari && (k.location.href = y);
                            m.readyState = m.DONE;
                            u();
                            b(y)
                        },
                        w = function(a) {
                            return function() {
                                if (m.readyState !== m.DONE) return a.apply(this, arguments)
                            }
                        },
                        A = {
                            create: !0,
                            exclusive: !1
                        },
                        I;
                    m.readyState = m.INIT;
                    p || (p = "download");
                    if (q) y = (k.URL || k.webkitURL || k).createObjectURL(c), f.href = y, f.download = p, l(f), m.readyState = m.DONE, u(), b(y);
                    else {
                        k.chrome && v && "application/octet-stream" !==
                            v && (I = c.slice || c.webkitSlice, c = I.call(c, 0, c.size, "application/octet-stream"), r = !0);
                        d && "download" !== p && (p += ".download");
                        if ("application/octet-stream" === v || d) t = k;
                        e ? (h += c.size, e(k.TEMPORARY, h, w(function(d) {
                            d.root.getDirectory("saved", A, w(function(d) {
                                var r = function() {
                                    d.getFile(p, A, w(function(d) {
                                        d.createWriter(w(function(p) {
                                            p.onwriteend = function(c) {
                                                t.location.href = d.toURL();
                                                m.readyState = m.DONE;
                                                a(m, "writeend", c);
                                                b(d)
                                            };
                                            p.onerror = function() {
                                                var a = p.error;
                                                a.code !== a.ABORT_ERR && g()
                                            };
                                            ["writestart", "progress",
                                                "write", "abort"
                                            ].forEach(function(a) {
                                                p["on" + a] = m["on" + a]
                                            });
                                            p.write(c);
                                            m.abort = function() {
                                                p.abort();
                                                m.readyState = m.DONE
                                            };
                                            m.readyState = m.WRITING
                                        }), g)
                                    }), g)
                                };
                                d.getFile(p, {
                                    create: !1
                                }, w(function(a) {
                                    a.remove();
                                    r()
                                }), w(function(a) {
                                    a.code === a.NOT_FOUND_ERR ? r() : g()
                                }))
                            }), g)
                        }), g)) : g()
                    }
                },
                u = w.prototype;
            u.abort = function() {
                this.readyState = this.DONE;
                a(this, "abort")
            };
            u.readyState = u.INIT = 0;
            u.WRITING = 1;
            u.DONE = 2;
            u.error = u.onwritestart = u.onprogress = u.onwrite = u.onabort = u.onerror = u.onwriteend = null;
            return function(a, b) {
                return new w(a,
                    b)
            }
        }
    }("undefined" !== typeof self && self || "undefined" !== typeof window && window || this.content);
    "undefined" !== typeof module && module.exports ? module.exports.saveAs = saveAs : "undefined" !== typeof define && null !== define && null != define.amd && define([], function() {
        return saveAs
    })
}
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Listener = function(g) {
        function f(d, e) {
            if ("function" === typeof e) {
                var c = e.uniqueId || (e.uniqueId = l++);
                return d + "." + c
            }
            console.warn(d, "listener does not exist")
        }

        function q(d) {
            function e() {
                var d = !1,
                    b;
                for (b in c) c[b].apply(g, arguments) && (d = !0);
                return d
            }
            var c = {};
            e.add = function(h) {
                var b = f(d, h);
                if (void 0 === c[b] && h) return c[b] = h, {
                    add: function() {
                        c[b] = h
                    },
                    remove: function() {
                        delete c[b]
                    }
                }
            };
            e.remove = function(h) {
                var b = f(d, h);
                void 0 !== c[b] && h && delete c[b]
            };
            e.stack = c;
            return e
        }
        var l = 1;
        g.on = function(d, e) {
            return (g.on[d] ? g.on[d] : g.on[d] = q(d)).add(e)
        };
        g.off = function(d, e) {
            e ? (g.on[d] ? g.on[d] : g.on[d] = q(d)).remove(e) : delete g.on[d]
        };
        g.emit = function(d) {
            var e = g.on[d];
            if (e) {
                var c = Array.prototype.slice.call(arguments).slice(1);
                return e.apply(g, c)
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.loc = k.loc || {},
        f = k.util;
    g.prefix = "sk";
    (function() {
        function f(l) {
            var d, e;
            Object.defineProperty(g, l, {
                get: function() {
                    var c = location[l];
                    if (d && e === c) return d;
                    e = c;
                    c = "?" + c.slice(1);
                    c = g.parseUri(c).queryKey;
                    return g.prefix ? d = g.parseQuery(c[g.prefix]) : d = c
                }
            })
        }
        f("search");
        f("hash")
    })();
    g.parseQuery = function(f) {
        if ("string" === typeof f) {
            f = f.split(";");
            for (var g = {}, d = 0; d < f.length; d++)
                if (f[d]) {
                    var e = f[d].split(":");
                    g[e[0]] = e[1] || !0
                }
            return g
        }
        return {}
    };
    g.setHash = function(f, l) {
        if (null === f) {
            var d = {};
            d[l] = null;
            g.setHash(d)
        } else if ("string" === typeof f) d = g.hash, d[f] = l, g.setHash(d);
        else if ("object" === typeof f) {
            var e = [],
                d = f || g.hash;
            for (f in d) {
                var c = d[f];
                void 0 !== c && (c ? e.push(f + "=" + c) : e.push(f))
            }
            d = "#" + e.join("&");
            location.hash !== d && (location.hash = d)
        }
    };
    g.setHost = function(q) {
        function l(a) {
            return "string" === typeof a ? (a = a && -1 === a.indexOf("://") ? u + a : a, d(a)) : ""
        }

        function d(a) {
            var b = a[a.length - 1];
            return "=" === b || "?" === b || "/" === b ? a : a + "/"
        }

        function e() {
            return location.host + f.string.dirpath(location.pathname)
        }

        function c() {
            var a = d(e());
            g.host = a;
            g.protocol = location.protocol;
            g.HOST = l(a);
            g.MEDIA = g.HOST + "media/";
            g.PROXY = g.HOST + "proxy/?url=";
            g.GET = w;
            g.POST = w
        }

        function h(a) {
            a = a.split(":");
            return {
                host: a.shift(),
                port: a.shift()
            }
        }

        function b(a, b, c) {
            c = h(c);
            b = h(b);
            for (var m in a) a[m].replace && (a[m] = a[m].replace(b.host, c.host));
            (c = a.feature) && f.copyInto(c, k.feature);
            c = d(a.pathWeb || a.HOST || e());
            g.hostId = b.host;
            g.host = c;
            g.protocol = location.protocol;
            g.IO = a.IO || "";
            g.HOST = l(c);
            g.MEDIA = l(a.MEDIA || g.HOST + "media/");
            g.PROXY = l(a.PROXY ||
                g.HOST + "proxy/?url=");
            g.GET = l(a.pathGet || a.GET || w);
            g.POST = l(a.pathPost || a.POST || w)
        }

        function a(a, b) {
            var c = a.feature;
            c && f.copyInto(c, k.feature);
            c = d(a.pathWeb || a.HOST || e());
            g.hostId = b;
            g.host = c;
            g.protocol = location.protocol;
            g.IO = a.IO;
            g.HOST = l(c);
            g.MEDIA = l(a.MEDIA || g.HOST + "media/");
            g.PROXY = l(a.PROXY || g.HOST + "proxy/?url=");
            g.GET = l(a.pathGet || a.GET || w);
            g.POST = l(a.pathPost || a.POST || w)
        }
        var w = k.fs.authorized ? k.fs.dbpath() || "" : "";
        q = q || g.hosts || {};
        g.hosts = q;
        var u = location.protocol + "//",
            x = location.host;
        if (q[x]) return a(q[x],
            x);
        if (q[u + x]) return a(q[u + x], x);
        var p, m;
        for (m in q) {
            var v = q[m];
            if (v.alias && -1 !== v.alias.indexOf(x)) return b(f.copy(v), m, x);
            v.defaultFallback && (p = v)
        }
        return p ? a(p) : c()
    };
    g.getSketchID = function() {
        if (f.exists("gapi.hangout.getHangoutId")) return gapi.hangout.getHangoutId();
        var q = k.feature.sync.hashFlag;
        return "" === q ? location.hash.substr(1) : g.hash[q] || ""
    };
    g.isLocalUrl = function() {
        var f = /^([!#$&-;=?-\[\]_a-z~ ]|%[0-9a-fA-F]{2}|)+$/,
            g = /^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?/,
            d = {
                "http:": /:(80)?$/,
                "https:": /:(443)?$/
            },
            e = {
                "data:": !0,
                "blob:": !0,
                "filesystem:": !0
            };
        return function(c, h) {
            if ("string" === typeof c) {
                var b = c.match(g);
                return h && e[b[1]] ? !0 : b[1] && b[1].toLowerCase() !== location.protocol || b[2] && b[2].replace(d[location.protocol], "") !== location.host || b[1] && !b[2] ? !1 : f.test(c)
            }
            console.error(c)
        }
    }();
    g.isRemoteUrl = function(f) {
        return f.startsWith("http:") || f.startsWith("https:") ? !g.isLocalUrl(f) : !1
    };
    g.isBlobUrl = function(f) {
        return f && f.startsWith("blob:")
    };
    g.isDataUrl = function(f) {
        return f && f.startsWith("data:")
    };
    g.isFileUrl =
        function(f) {
            return f && f.startsWith("filesystem:")
        };
    g.isInternalUrl = function(f) {
        return g.isBlobUrl(f) || g.isDataUrl(f) || g.isFileUrl(f)
    };
    g.isValidXhrUrl = function(f) {
        return g.isLocalUrl(f, !0) || g.isRemoteUrl(f)
    };
    g.getMediaUrl = function(f) {
        if ("string" === typeof f) return g.isInternalUrl(f) ? f : f.startsWith("http") || f.startsWith("./") || f.startsWith("/") ? f : g.MEDIA + f;
        console.error("Invalid URL")
    };
    g.parseUri = function(f) {
        var g = "source protocol authority credentials username password host port relative path directory file query anchor".split(" "),
            d = /^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(f);
        f = {
            queryKey: {}
        };
        for (var e = 0; e < g.length; e++) f[g[e]] = d[e] || "";
        f.query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function(c, d, b, a, e) {
            d && d.length && (f.queryKey[d] = b)
        });
        return f
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Agent = function(g) {
        function f() {
            function a(m, d) {
                var r = !1;
                d.forEach(function(a) {
                    (b.globalCompositeOperation = a) === a ? (r = !0, c[a] = !0) : c[a] = !1
                });
                c["__" + m] = r
            }
            var b = l().ctx,
                c = e.gco = {};
            a("composite", "source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter copy xor".split(" "));
            a("blend", "normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity".split(" "))
        }

        function q(a) {
            var b = "image/" + a,
                c = l().toDataURL(b);
            return e.io[a] = 0 === c.indexOf("data:" + b)
        }

        function l() {
            if (l.canvas) return l.canvas;
            var a = document.createElement("canvas"),
                b = a.getContext("2d");
            a.width = a.height = 1;
            a.ctx = b;
            return l.canvas = a
        }

        function d(a, b) {
            if (a[b]) return a[b];
            b = b[0].toUpperCase() + b.substr(1);
            return a["webkit" + b] || a["moz" + b] || a["ms" + b] || a["o" + b]
        }
        var e = g.agent || (g.agent = {}),
            c = g.feature || (g.feature = {}),
            h = g.util,
            b = navigator.userAgent || navigator.vendor || window.opera;
        e.userAgent = b;
        e.ie = !!document.documentMode;
        e.firefox = "undefined" !== typeof InstallTrigger;
        e.opera = !!window.opera || /Opera|OPR/i.test(b);
        e.chrome = !!window.chrome && !e.opera;
        e.safari = /Safari/i.test(b) && !e.opera && !e.chrome;
        if (e.ios = /iPhone|iPad|iPod/i.test(b)) e.iosVersion = parseFloat(navigator.appVersion.match(/OS (\d)/)[1], 10);
        e.android = /Android/i.test(b);
        e.blackberry = /Blackberry/i.test(b);
        e.mac = !e.ios && /Mac/.test(b);
        e.windows = /Windows/.test(b);
        e.linux = /Linux/.test(b);
        e.mobile = /Opera Mini|IEMobile|Symbian|WebOS/i.test(b) || e.ios || e.android || e.blackberry;
        try {
            e.cordova = !!window.top.cordova
        } catch (a) {}
        e.nodewebkit = !(!h.exists("process.versions") || !process.versions["node-webkit"]);
        e.chromeApp = h.exists("chrome.storage.local");
        e.flash = function() {
            var a = navigator,
                b = parseFloat,
                c = a.plugins,
                a = a.mimeTypes,
                m, d;
            if (c && "object" == typeof c["Shockwave Flash"]) {
                if ((m = c["Shockwave Flash"].description) && (!a || !a["application/x-shockwave-flash"] || a["application/x-shockwave-flash"].enabledPlugin)) return b(m.replace(/^.*\s+(\S+)\s+\S+$/, "$1"))
            } else if (window.ActiveXObject) try {
                if (d =
                    new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))
                    if (m = d.GetVariable("$version")) return b(m.replace(/^\S+\s+(\d+),(\d+).*$/i, "$1.$2"))
            } catch (r) {}
            return !1
        }();
        var w = {};
        e.detect = function() {
            null == e.canvas && w.detectFeature()
        };
        e.lang = ((navigator.languages ? navigator.languages[0] : navigator.language || navigator.userLanguage) || "en").toLowerCase();
        e.history = !(!window.history || !window.history.pushState);
        e.fileReader = !!window.FileReader;
        e.chooseEntry = !!window.FileReader && (h.exists("chrome.fileSystem.chooseEntry") ||
            h.exists("navigator.camera.getPicture"));
        e.fs = !!window.FileReader && !!d(window, "requestFileSystem");
        e.fs_native = function(a) {
            return /\{\s*\[native code\]\s*\}/.test("" + a)
        }(d(window, "requestFileSystem"));
        w.detectFeature = function() {
            if (e.canvas = !!l().ctx) {
                var a;
                try {
                    var b = document.createElement("canvas");
                    b.getContext("webgl") || b.getContext("experimental-webgl");
                    a = !0
                } catch (p) {
                    a = !1
                }
                e.webgl = a;
                a = l().ctx;
                e.ctx_imageSmoothing = "boolean" === typeof a.imageSmoothingEnabled;
                e.ctx_lineDash = "function" === typeof a.setLineDash;
                f();
                a = l();
                var b = a.ctx,
                    m;
                m = l().ctx;
                m = d(m, "backingStorePixelRatio") || 1;
                m = e.pixelRatio = e._pixelRatio = (window.devicePixelRatio || 1) / m;
                if (c.canvas.usePixelRatio || c.canvas.usePixelRatioDesktop && !e.mobile)
                    if (e.ios && 8 > e.iosVersion) e._pixelRatio = 1;
                    else {
                        if (1 !== m) {
                            var v = h.now();
                            a.width = window.innerWidth * m;
                            a.height = window.innerHeight * m;
                            b.drawImage(a, 0, 0);
                            36 < h.now() - v && (e.pixelRatio = 1);
                            a.width = a.height = 1
                        }
                    }
                else e._pixelRatio = 1
            }
            e.opera && e.windows && (e.gco.__blend = !1);
            c.style.composite = c.style.composite && !1 !== e.gco.__composite;
            c.style.blend = c.style.blend && !1 !== e.gco.__blend
        };
        w.getUserMedia = function() {
            return e.getUserMedia = !!d(navigator, "getUserMedia")
        };
        w.PeerConnection = function() {
            return e.PeerConnection = !!(window.PeerConnection || window.webkitPeerConnection00 || window.webkitRTCPeerConnection || window.mozRTCPeerConnection || window.RTCPeerConnection)
        };
        w.RTCDataChannel = function() {
            try {
                var a = g.net;
                (new RTCPeerConnection(a.iceServers, a.dataChannelConfig)).createDataChannel("supportCheck", {
                    reliable: !0
                }).close();
                return e.RTCDataChannel = !0
            } catch (b) {
                return e.RTCDataChannel = !1
            }
        };
        e.io = {};
        w.io_bmp = function() {
            return q("bmp")
        };
        w.io_jpeg = function() {
            return q("jpeg")
        };
        w.io_png = function() {
            return q("png")
        };
        w.io_webp = function() {
            return q("webp")
        };
        w.io_blob = function(a, b) {
            try {
                l().toBlob(function(c) {
                    function d(c) {
                        e.io.blob = c;
                        URL.revokeObjectURL(p.src);
                        c ? a() : b()
                    }
                    var p = new Image;
                    p.src = URL.createObjectURL(c);
                    p.onload = function() {
                        d(!(0 === p.width && 0 === p.height))
                    };
                    p.onerror = function() {
                        d(!1)
                    }
                })
            } catch (c) {
                e.io.blob = !1, b()
            }
        };
        w.incognito = function(a, b) {
            "function" ===
            typeof detectPrivateMode ? detectPrivateMode(function(c) {
                c ? a(e.incognito = !0) : b(e.incognito = !1)
            }) : b({
                message: "detectPrivateMode cannot be found"
            })
        };
        w.idb = function(a, b) {
            return !!d(window, "indexedDB")
        };
        w.idb_blob = function(a, b) {
            e.has("idb", function() {
                var c = indexedDB.deleteDatabase("idb-blob-support");
                c.onsuccess = function() {
                    var c = indexedDB.open("idb-blob-support", 1);
                    c.onerror = function() {
                        a(e.idb_blob = !1)
                    };
                    c.onsuccess = function() {
                        var d = c.result;
                        try {
                            var p = new Blob([""], {
                                type: "text/plain"
                            });
                            d.transaction("store",
                                "readwrite").objectStore("store").put(p, "key");
                            b(e.idb_blob = !0)
                        } catch (h) {
                            a(e.idb_blob = !1)
                        } finally {
                            d.close(), indexedDB.deleteDatabase("idb-blob-support")
                        }
                    };
                    c.onupgradeneeded = function() {
                        c.result.createObjectStore("store")
                    }
                };
                c.onblocked = function() {
                    console.error("blocked")
                }
            }, function() {
                b(e.idb_blob = !1)
            })
        };
        e.has = function(a, b, c) {
            function m(a) {
                a ? b && b(a) : c && c(a);
                return a
            }
            b = b || function() {};
            c = c || b;
            var d = h.resolve(a, e);
            if (null == d) {
                if (a = a.replace(/\./g, "_"), d = w[a](b, c), "boolean" === typeof d) return h.resolve(a,
                    e, d), m(d)
            } else return m(d)
        };
        return e
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k = k.feature || (k.feature = {});
    k.appName = "Sketchpad";
    k.debug = !1;
    k.debugCache = !1;
    k.debugRender = !1;
    k.kiosk = !1;
    k.lang = "auto";
    k.prefix = "sketch";
    k.cache257 = !1;
    k.cache2D = !0;
    k.cache2DPadding = 5;
    k.cacheSVG = !0;
    k.paths = {};
    k.paths.clipboard = "$HOST/inc/ZeroClipboard2/ZeroClipboard.swf";
    k.paths.pdf = "$HOST/inc/formats/pdf/pdf.worker.min.js";
    k.paths.zip = "$HOST/inc/Zip/";
    k.doc = {};
    k.doc.clip = {};
    k.doc.title = "My Drawing 2";
    k.doc.description = "made with sketch.io";
    k.doc.background = "#fff";
    k.doc.units = "%";
    k.doc.width =
        100;
    k.doc.height = 100;
    k.doc.originX = 0;
    k.doc.originY = 0;
    k.doc.pixelRatio = void 0;
    k.doc.exportDPI = 72;
    k.doc.exportFormat = "png";
    k.doc.exportQuality = .94;
    k.doc.editable = !0;
    k.doc.interactable = !0;
    k.doc.centerOnLoad = !0;
    k.doc.centerOnResize = !0;
    k.doc.gestureScroll = !0;
    k.doc.gestureTransform = !1;
    k.doc.gestureZoom = !1;
    k.doc.globalTools = !0;
    k.doc.restoreSettings = !0;
    k.tools = {};
    k.tools.defaultTool = "pen";
    k.tools.defaults = {};
    k.tools.defaults.units = "objectBoundingBox";
    k.tools.defaults.defaultHeight = 100;
    k.tools.defaults.defaultWidth =
        100;
    k.tools.defaults.useAddByClick = !0;
    k.tools.defaults.useAddByDrag = !0;
    k.tools.defaults.useConstrainToCanvas = !1;
    k.tools.defaults.useEditByClick = !1;
    k.tools.defaults.useEditByDblClick = !0;
    k.tools.defaults.showBBox = !0;
    k.tools.defaults.showCenterPoint = !0;
    k.tools.defaults.showGhostPath = !1;
    k.tools.defaults.minWidth = 3;
    k.tools.defaults.minHeight = 3;
    k.tools.defaults.maxWidth = 8192;
    k.tools.defaults.maxHeight = 8192;
    k.tools.defaults.flippable = !0;
    k.tools.defaults.movable = !0;
    k.tools.defaults.resizable = !0;
    k.tools.defaults.rotatable = !0;
    k.tools.defaults.scalable = !0;
    k.tools.defaults.usePointInBBox = !0;
    k.tools.defaults.usePointInImageData = !1;
    k.tools.defaults.usePointInPath = !1;
    k.tools.defaults.usePointNearest = !0;
    k.tools.defaults.useGhostMode = !0;
    k.tools.defaults.useHoverAsFocus = !0;
    k.tools.defaults.controls = {};
    k.tools.defaults.controls.anchor = void 0;
    k.tools.defaults.controls.spinner = void 0;
    k.tools.defaults.controls.n = void 0;
    k.tools.defaults.controls.s = void 0;
    k.tools.defaults.controls.e = void 0;
    k.tools.defaults.controls.w = void 0;
    k.tools.defaults.controls.ne =
        void 0;
    k.tools.defaults.controls.se = void 0;
    k.tools.defaults.controls.sw = void 0;
    k.tools.defaults.controls.nw = void 0;
    k.tools.defaults.controls.mouse = {};
    k.tools.defaults.controls.mouse.width = 14;
    k.tools.defaults.controls.mouse.height = 14;
    k.tools.defaults.controls.mouse.padding = 0;
    k.tools.defaults.controls.touch = {};
    k.tools.defaults.controls.touch.width = 24;
    k.tools.defaults.controls.touch.height = 24;
    k.tools.defaults.controls.touch.padding = 0;
    k.tools.select = {};
    k.tools.select.useConfigure = !0;
    k.tools.select.clickToDeselect = !0;
    k.tools.text = {};
    k.tools.text.defaultHeight = 100;
    k.tools.text.defaultWidth = 300;
    k.tools.text.minHeight = 15;
    k.tools.text.minWidth = 15;
    k.tools.text.useAutoHeight = !0;
    k.tools.text.useCanvasRenderer = !0;
    k.tools.text.useClipBounds = !1;
    k.tools.text.useHTML = !1;
    k.tools.text.useResize = !1;
    k.tools.text.useSearch = "text";
    k.tools.media = {};
    k.tools.media.useSearch = "no";
    k.tools.vectorfill = {};
    k.tools.vectorfill.fillArea = "point";
    k.tools.vectorfill.fillMode = !1;
    k.tools.pointer = {};
    k.tools.pointer.vibrate = !1;
    k.tools.brush = {};
    k.tools.path = {};
    k.tools.scissor = {};
    k.tools.polygon = {};
    k.tools.polygon.useAddPointAtDistanceOnDrag = 10;
    k.tools.polygon.useBendable = !1;
    k.tools.polyline = {};
    k.tools.polyline.useAddPointAtDistanceOnDrag = 10;
    k.tools.polyline.useBendable = !1;
    k.tools.camera = {};
    k.tools.crop = {};
    k.tools.group = {};
    k.tools.screenshot = {};
    k.tools.shape = {};
    k.tools.zoom = {};
    k.canvas = {};
    k.canvas.useGLFX = !1;
    k.canvas.useGLFXPixelData = !1;
    k.canvas.useForceInBounds = !1;
    k.canvas.useBGRender = !1;
    k.canvas.useBGSave = !0;
    k.canvas.useClipDoc = !0;
    k.canvas.useGroupBBox = !1;
    k.canvas.usePixelRatio = !1;
    k.canvas.usePixelRatioDesktop = !1;
    k.zoom = {};
    k.zoom.defaultValue = 1;
    k.zoom.fromCenter = !0;
    k.zoom.increment = .1;
    k.zoom.max = 100;
    k.zoom.min = .25;
    k.zoom.value = 1;
    k.ui = {};
    k.ui.addToLibrary = !0;
    k.ui.bruteForce = !0;
    k.ui.scrollerAtopColor = "#fff";
    k.ui.scrollerCategories = !0;
    k.ui.scrollerShadow = !1;
    k.ui.cursorDefs = !1;
    k.ui.cursorDynamic = !1;
    k.ui.customRangeBar = !1;
    k.ui.quickSelect = !1;
    k.ui.tooltips = !0;
    k.ui.listTool = "list";
    k.ui.listText = "list";
    k.uploader = {};
    k.uploader.DnD = !0;
    k.uploader.DnDArea =
        void 0;
    k.uploader.DnDMessage = void 0;
    k.beforeUnloadPrompt = !1;
    k.preventScroll = !1;
    k.preventTouch = !1;
    k.requireAuth = !1;
    k.pane = {};
    k.pane.tabs = !1;
    k.pane.position = void 0;
    k.pane.header = !0;
    k.io = {};
    k.io.exportDrop = !1;
    k.io.filePickerIO = !1;
    k.io.defaultProject = !1;
    k.io.translateX = 0;
    k.io.translateY = 0;
    k.palette = {};
    k.palette.hexInput = !1;
    k.palette.closeButton = !1;
    k.palette.colorPicker = !1;
    k.palette.eyeDropper = !1;
    k.palette.grid = !1;
    k.palette.header = "";
    k.palette.version = 2;
    k.palette.buildInstant = !1;
    k.style = {};
    k.style.toGlobals = !0;
    k.style.fromGlobalPaint = !1;
    k.style.fromGlobalBlend = !1;
    k.style.defaultFillType = "color";
    k.style.defaultStrokeType = "color";
    k.style.defaultBackgroundType = "color";
    k.style.defaultBorderType = "color";
    k.style.color = "#000";
    k.style.gradient = !1;
    k.style.pattern = !1;
    k.style.blend = !1;
    k.style.composite = !1;
    k.style.colorMode = !1;
    k.style.colorNoise = !1;
    k.style.lineJoin = !1;
    k.placement = {};
    k.placement.mediaClick = !1;
    k.placement.mediaDblClick = !1;
    k.placement.mediaDrag = !1;
    k.history = {};
    k.history.autoSelect = !1;
    k.history.canUndo = !0;
    k.history.canRedo = !0;
    k.history.bitmap = !1;
    k.history.limit = !1;
    k.fs = {};
    k.fs.autosave = !0;
    k.sync = {};
    k.sync.image = !1;
    k.sync.json = !1;
    k.sync.svg = !1;
    k.sync.thumb = !1;
    k.sync.zip = !1;
    k.sync.maxAssetSize = 0;
    k.sync.maxFileSize = 0;
    k.sync.enabled = !1;
    k.sync.hashFlag = null;
    k.stream = {};
    k.stream.api = "RTCDataChannel";
    k.stream.audio = !1;
    k.stream.maxFileSize = 0;
    k.stream.realtime = !1;
    k.stream.sketch = !1;
    k.stream.syncServer = !1;
    k.stream.spectrumAnalysis = !1;
    k.stream.text = !1;
    k.stream.video = !1;
    k.stream.videoAtop = !1;
    k.session = {};
    k.session.userId =
        "";
    k.session.userName = "";
    k.social = {};
    k.social.autoLogout = !1;
    k.social.autoLogoutTimeout = !1;
    k.social.setCookie = !0
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sk && (sk = {});
(function(k) {
    k.module = k.module || {};
    k.module.Namespace = function(g) {
        var f = g.util;
        sk = g;
        g.__nodejs = !1;
        g.__version = "3.7.7";
        "{{" === g.__version.substr(0, 2) && (g.__version = "3.7.8dev");
        g.api = g.api || {};
        g.agent = g.agent || {
            io: {}
        };
        g.doc = g.doc || {};
        g.doc.render = g.doc.render || {};
        g.doc.selection = g.doc.selection || {};
        g.docs = g.docs || {};
        g.dom = g.dom || {};
        g.fs = g.fs || {};
        g.gen = g.gen || {};
        g.io = g.io || {};
        g.lang = g.lang || {};
        g.lib = g.lib || {};
        g.loc = g.loc || {};
        g.module = g.module || {};
        g.net = g.net || {};
        g.net.user = {};
        g.net.user.id = "U";
        g.net.user.color =
            "blue";
        g.server = g.server || {};
        g.sidebar = g.sidebar || {};
        g.ui = g.ui || {};
        g.ui.colorPicker = g.ui.colorPicker || {};
        g.ui.icons = g.ui.icons || {};
        g.vector = g.vector || {};
        g.windows = g.windows || {};
        (function() {
            function q(d) {
                for (var c = {}, h = 0, b; h < d.length; h++)
                    if (b = d[h]) {
                        var a = b[0].toLowerCase() + b.substr(1);
                        c[a] = b
                    }
                return c
            }

            function l(d, c) {
                c = q(c);
                (g.attrs[d] = function(h) {
                    var b = this;
                    (this.setValue = function(a) {
                        if ("undefined" !== typeof a) {
                            if ("string" === typeof a) {
                                var h = c,
                                    f = document.createElement("span").style;
                                f[d] = a;
                                for (var g in h) a =
                                    f[d + h[g]], "" !== a && "initial" !== a && (b[g] = a)
                            } else
                                for (h in c) "undefined" !== typeof a[h] && (b[h] = a[h]);
                            return b
                        }
                    })(h)
                }).type = d
            }
            var d = g.attrs = {};
            l("background", "Color Image Repeat Attachment Position Clip Origin Size".split(" "));
            l("border", "Width Style Color Radius ImageSource ImageSlice ImageWidth ImageOutset ImageRepeat".split(" "));
            l("padding", ["Top", "Left", "Bottom", "Right"]);
            l("margin", ["Top", "Left", "Bottom", "Right"]);
            d.create = function(e, c) {
                return d[e] ? new d[e](c) : c
            };
            d.update = function(e, c, h) {
                return h &&
                    h.setValue ? h.setValue(c) : d.create(e, c)
            };
            d.__basicObject = {
                bbox: "bbox",
                composite: "string",
                groupId: "string",
                id: "string",
                meta: "string",
                opacity: "number",
                pointerId: "string",
                seed: "number",
                timestamp: "number",
                toolkitId: "string",
                type: "string",
                visible: "boolean"
            };
            d.__styledObject = f.copyInto(d.__basicObject, {
                filter: "filter",
                fill: "style",
                stroke: "style",
                border: "border",
                background: "style",
                margin: "margin",
                padding: "padding"
            });
            d.__rules = {
                exportable: "boolean",
                movable: "boolean",
                rotatable: "boolean",
                scalable: "boolean",
                selectable: "boolean",
                useAlignX: "string",
                useAlignY: "string",
                useBackgroundOverlay: "boolean",
                useConstrain: "boolean",
                useConstrainX: "boolean",
                useConstrainY: "boolean",
                useControlNE: "boolean",
                useControlNW: "boolean",
                useControlSE: "boolean",
                useControlSW: "boolean",
                useHighRes: "boolean",
                useMaxCopies: "number",
                useMaxHeight: "number",
                useMaxWidth: "number",
                useMinHeight: "number",
                useMinWidth: "number",
                usePixelData: "boolean",
                useStickToBack: "boolean",
                useStickToFront: "boolean",
                useStretchToEdge: "boolean",
                useStretchToFit: "boolean"
            }
        })()
    };
    "object" === typeof module && module.exports ? (module.exports.module = module.exports.module || {}, module.exports.module.Namespace = k.module.Namespace) : k.module.Namespace(k)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Document = function(g) {
        function f(a) {
            if (0 < a && d.pixelRatio !== a) return d.pixelRatio = a, d.scene.setDirtyCache(), !0
        }

        function q(a, b, c) {
            a && b ? "%" === c ? (d.width = a, d.height = b, d.units = "%") : (d.width = a, d.height = b, d.units = "px") : (d.width = 100, d.height = 100, d.units = "%")
        }
        var l = "undefined" === typeof window ? {} : window,
            d = this,
            e = g.agent,
            c = g.dom,
            h = g.feature,
            b = g.net,
            a = g.style,
            w = g.ui,
            u = g.util;
        d.idx = g.module.Document.idx++;
        g.docs[d.idx] = d;
        d.__editing = !1;
        d.__interacting = !1;
        d.__preloading = !1;
        d.__rendering = !1;
        d.lastModified = -1;
        d.lastSynced = -1;
        d.toolDefault = "select";
        d.tool = {};
        d.toolkit = {};
        d.toolkitConfig = {};
        d.hovered = {};
        d.selection = {};
        var x = d.computed = {};
        g.module.Listener(d);
        var p = d.contexts = {
            layer0: "z-index: 0;",
            draw: "z-index: 1;",
            active: "z-index: 2;",
            cache: "display: none;"
        };
        h.debug && (p.debug = "");
        var m = d.canvas2d = {
            x: 0,
            y: 0,
            width: 0,
            height: 0,
            orientX: 0,
            orientY: 0
        };
        d.container = l.document;
        d.uuid = u.uuid();
        d.title = "My Drawing 1";
        d.description = "say lalala";
        d.units = "%";
        d.width = 100;
        d.height = 100;
        d.originX =
            0;
        d.originY = 0;
        d.scrollX = 0;
        d.scrollY = 0;
        d.pixelRatio = 1;
        d.scale = 1;
        d.zoom = 1;
        d.pages = {};
        d.pages.length = 1;
        d.pages.data = [{
            width: d.width,
            height: d.height
        }];
        d.viewport = {
            width: 0,
            height: 0
        };
        d.clip = {};
        d.exportDPI = 72;
        d.exportFormat = "png";
        d.exportQuality = 1;
        d.setAttributes = function(a) {
            d.mixinMetaData(a, d)
        };
        (function() {
            var a = {
                uuid: "string",
                title: "string",
                description: "string",
                exportDPI: "number",
                exportFormat: "string",
                exportQuality: "number",
                pages: "object",
                clip: "object",
                units: "string",
                width: "number",
                height: "number",
                originX: "number",
                originY: "number",
                scale: "number",
                background: "string|object",
                labels: "object"
            };
            d.mixinMetaData = function(b, c, m) {
                m = m || {};
                if ("object" === typeof b) {
                    for (var d in b)
                        if (!m[d]) {
                            var p = typeof b[d],
                                h = a[d];
                            h && (h === p || h.includes(p)) && (c[d] = b[d])
                        }
                    b.width && b.height && c.pages && 1 === c.pages.length && (m = c.pages.data[0], m.width = b.width, m.height = b.height);
                    return c
                }
            }
        })();
        d.getViewport = function() {
            var a = c.measure(d.targetViewport),
                b = a.padding || {
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                },
                m = a.height - b.top - b.bottom,
                p = d.viewport;
            p.width = Math.round((a.width -
                b.left - b.right) / a.scaleX);
            p.height = Math.round(m / a.scaleY);
            return p
        };
        d.getBounds = function() {
            if ("px" === d.units) x.width = d.width, x.height = d.height;
            else {
                var a = d.getViewport();
                x.width = (d.width || 100) / 100 * a.width;
                x.height = (d.height || 100) / 100 * a.height
            }
            if (!x.width || !x.height) {
                var b = c.measure(d.container),
                    a = x.width = b.width,
                    b = x.height = b.height;
                q(a, b, "px")
            }
            return x
        };
        d.setContainerBounds = function(a, b) {
            if (!a || !b) {
                var c = d.getBounds();
                a = c.width;
                b = c.height
            }
            var m = Math.max(1, d.zoom),
                p = d.getViewport(),
                c = Math.max(p.width,
                    a) * m,
                m = Math.max(p.height, b) * m,
                h = d.container,
                e = Math.min(c, p.width),
                f = Math.min(m, p.height);
            h.style.width = e + "px";
            h.style.height = f + "px";
            e = c * d.zoom <= p.width;
            ((p = m * d.zoom <= p.height) || e) && d.scrollReset();
            h.style.overflowX = e ? "visible" : "auto";
            h.style.overflowY = p ? "visible" : "auto";
            return {
                targetWidth: c,
                targetHeight: m,
                width: a,
                height: b
            }
        };
        d.getMetrics = function() {
            var a = {};
            a.units = d.units;
            a.width = d.width;
            a.height = d.height;
            a.originX = d.originX;
            a.originY = d.originY;
            a.scrollX = d.scrollX;
            a.scrollY = d.scrollY;
            a.zoom = d.zoom;
            return a
        };
        d.setMetrics = function(a) {
            d.originX = isFinite(a.originX) ? a.originX : d.originX || 0;
            d.originY = isFinite(a.originY) ? a.originY : d.originY || 0;
            d.setSize(a.width || d.width, a.height || d.height, a.units || d.units);
            d.scrollTo({
                left: a.scrollX || d.scrollX,
                top: a.scrollY || d.scrollY,
                duration: 0
            });
            d.orient.reset();
            d.orient.setZoom(a.zoom || 1)
        };
        d.setPage = function(a, b) {
            var c = d.pages;
            if (b)
                for (var m = 0, p = d.scrollY + d.viewport.height, h = 0; h < c.data.length; h++)
                    if (m += c.data[h].height, p <= m) {
                        a = h + a;
                        break
                    }
            a = Math.min(c.length - 1, Math.max(0,
                a));
            for (m = h = 0; h < a; h++) m += c.data[h].height;
            d.scrollTo({
                top: m,
                duration: 0
            })
        };
        d.addPage = function(a) {
            a.width && a.height && (d.pages.length++, d.pages.data.push({
                width: a.width,
                height: a.height
            }), d.setSize(d.width, d.height + a.height), d.scrollElementCSS())
        };
        d.removePage = function(a) {
            isFinite(a) && d.pages.data[a] && (a = d.pages.data.splice(a, 1)[0]) && (d.pages.length--, d.setSize(d.width, d.height - a.height), d.scrollElementCSS())
        };
        d.focus = function() {
            g.doc = d;
            c.setClass({
                target: d.originalContainer,
                name: "sk-focused",
                list: c.$$(".sk-focused")
            })
        };
        d.setClip = function(a, b) {
            a ? a.path ? d.setClipPath(a, b) : d.setClipRect(a, b) : (d.clip = {}, d.render.dirtyClip = !0)
        };
        d.setClipPath = function(a, b) {
            var c = new g.vector.Transform;
            c.scale(b, b);
            c.flatten(a.path);
            d.clip = {};
            d.clip.path = a.path;
            d.clip.style = a.style
        };
        d.setClipRect = function(a, b) {
            d.clip = a
        };
        d.scrollTo = function(a, b, m) {
            var p;
            "object" === typeof a && (p = a, a = p.left, b = p.top, m = p.duration, p = p.relative);
            c.scrollTo({
                target: d.targetScrollable,
                left: a,
                top: b,
                duration: m,
                relative: p
            })
        };
        d.scrollReset = function() {
            var a = d.targetScrollable;
            a.scrollLeft = 0;
            a.scrollTop = 0;
            d.scrollX = 0;
            d.scrollY = 0
        };
        d.scrollElementCSS = function() {
            var a = d.pixelRatio,
                b = d.scrollX,
                c = d.scrollY,
                m = d.orient.scale,
                p = d.orient.getValues(),
                h = d.setContainerBounds(),
                e = d.targetEditable.style;
            e.width = m * h.width + "px";
            e.height = m * h.height + "px";
            e.left = (p.x + b * (1 - m)) / a + "px";
            e.top = (p.y + c * (1 - m)) / a + "px";
            a = d.container;
            a.scrollTop > x.height - d.viewport.height && (a.scrollTop = x.height - d.viewport.height);
            d.setCSSBackgroundSize()
        };
        d.setCSSBackgroundSize = function() {
            var a = x.background;
            if (a && a.canvas) {
                var a =
                    a.canvas,
                    b = d.orient.scale;
                d.targetBackground.style.backgroundSize = a.width * b + "px " + a.height * b + "px"
            }
        };
        d.setContainer = function(a) {
            var b = "string" === typeof a ? c.$(a) : c.$(a.container || document.body);
            if (!(b instanceof HTMLElement)) throw "args.element must be a valid HTMLElement or selector";
            var m = b.classList,
                p = m.contains("sk-canvas-content"),
                m = m.contains("sk-canvas") || p || c.$(".sk-canvas", b) ? b : c.append(b, '<div class="sk-canvas"></div>'),
                p = c.$(".sk-canvas-dummy", m);
            null == p && (p = c.append(m, "div"), p.className =
                "sk-canvas-dummy", p.setAttribute("data-pid", d.idx), p.contentEditable = !e.mobile, c.append(p, "div"), p.firstChild.className = "sk-canvas-background");
            d.targetEditable = p;
            d.targetBackground = p.firstChild;
            d.targetListenable = c.$(a.focusElement || p);
            d.targetScrollable = c.$(a.scrollElement || m);
            d.targetViewport = c.$(a.targetViewport || m.parentNode || m);
            d.originalContainer = b;
            d.container = m;
            d.focus()
        };
        d.setPixelRatio = function(a) {
            f(a) && (d.setCanvasSize(), d.render.dirty = !0)
        };
        d.setScale = function(a) {
            0 < a && d.scale !== a && (d.scale =
                a, d.scene.setDirtyCache(), d.scene.setDirtyTransform(), d.render.dirty = !0)
        };
        d.setZoom = function(a) {
            0 < a && (d.orient.setZoom(a), d.orient.render())
        };
        d.setSize = function(a, b, c) {
            q(a, b, c);
            d.setCanvasSize()
        };
        d.setCanvasSize = function(a, b) {
            function y(a) {
                var b = p[a];
                if ("string" === typeof b) {
                    var m = b,
                        b = p[a] = c.Canvas(1, 1);
                    b.style.cssText = m;
                    "active" === a && eventjs.add(b, "mousedown", function() {
                        g.setDocument(d.idx)
                    })
                }
                return b
            }
            d.render.dirtyClip = !0;
            var t = d.container,
                u = d.targetScrollable;
            h.canvas.usePixelRatioDesktop && !e.mobile ?
                f(l.devicePixelRatio) : h.canvas.usePixelRatio && f(l.devicePixelRatio);
            var w = d.setContainerBounds(a, b);
            !1 === d.render.toExport ? (u = d.getViewport(), a = Math.min(w.targetWidth, u.width), b = Math.min(w.targetHeight, u.height)) : (a = w.targetWidth, b = w.targetHeight, u.scrollTop = 0);
            m.width = a;
            m.height = b;
            if (w = !h.doc.editable) {
                var u = y("layer0"),
                    x = y("cache");
                x.width = a;
                x.height = b;
                x.ctx.drawImage(u, 0, 0)
            }
            var u = d.pixelRatio,
                A;
            for (A in p)
                if (x = "cache" === A, !w || !x) {
                    var q = y(A);
                    q.width = a * u;
                    q.height = b * u;
                    q.className = "layer-" + A;
                    p[A] =
                        q;
                    x || (q.style.width = m.width + "px", q.style.height = m.height + "px", t.appendChild(q))
                }
            w ? (u = p.layer0, t = u.ctx, c.Canvas.resize(u, a, b), t.drawImage(p.cache, 0, 0), x = p.cache, c.Canvas.resize(x, a, b)) : d.scene.setDirtyBounds()
        };
        d.setTool = function() {
            var b = u.debounce(function(b, c, m) {
                var p = d.scene,
                    v = d.toolkit.getConfig(b);
                v && (w.setToolMenu && w.setToolMenu(b), "select" === b ? h.doc.editable && p.setDirtyControl(p.selection.items) : p.selection.length && p.deselectAll(), d.render.dirty = !0, d.render.dirtyActiveContext = !0, d.render.dirtyControls = !0, h.style.fromGlobalPaint && a.setObjectFromGlobal(v), h.style.fromGlobalBlend && d.setComposite(a.composite, v.type), p = (p = v.composite) && p.selected || p, a.isGCO(p) ? a.composite = p : a.composite = "source-over", d.toolkit.setTool({
                    type: b,
                    onerror: function(a) {
                        h.debug && console.error(a);
                        m && m(a)
                    },
                    onsuccess: function() {
                        w.configurePane && w.configurePane(b);
                        d.saveSettings();
                        g.palette && g.palette.setIndicator();
                        c && c()
                    }
                }), u.cookie.set("tool.type", b))
            }, 10);
            return function(a, c, m) {
                void 0 === a && (a = {
                    type: d.toolDefault
                });
                "string" ===
                typeof a && (a = {
                    type: a
                });
                var p = a.type;
                c = a.onsuccess || c;
                m = a.onerror || m;
                d.tool.type === p ? c && c() : b(p, c, m)
            }
        }();
        d.reset = function(a) {
            a = a || {};
            d.scrollReset();
            d.history.reset();
            d.orient.reset();
            d.scene.reset();
            a.useRender && (c.Canvas.clear(d.contexts.layer0), d.render.dirty = !0, d.render.dirtyClip = !0, d.render.dirtyControls = !0);
            d.emit("reset")
        };
        d.resetCache = function() {
            g.assets.reset(function() {
                var a = [];
                d.scene.copies.forEach(function(b) {
                    (b = b.src) && -1 === a.indexOf(b) && a.push(b)
                });
                return a
            }());
            g.vector.SVG.resetCache();
            d.render.cache.reset()
        };
        d.enable = function() {
            h.doc.interactable = !0;
            d.render.start();
            d.tool && d.tool.enable();
            g.keyboard && g.keyboard.enable();
            eventjs.bulk(g.events, "add")
        };
        d.disable = function() {
            h.doc.interactable = !1;
            d.render.stop();
            d.tool && d.tool.disable();
            g.keyboard && g.keyboard.disable();
            eventjs.bulk(g.events, "remove")
        };
        d.destroy = function() {
            d.disable();
            delete g.docs[d.idx];
            w.scrollers && (w.scrollers = {})
        };
        d.saveSettings = function() {
            var a = d.toolkitConfig[d.tool.type];
            if (a) return a = d.scene.toString(a), u.cookie.set("tool.config",
                a), a
        };
        d.restoreSettings = function(b) {
            var c = d.toolkit;
            u.cookie.get(["tool.config"], function(m) {
                var p = h.tools.defaultTool;
                try {
                    var e = m["tool.config"],
                        f = e.type || p,
                        u = c.getConfig(f);
                    c.copyIntoConfig(e, u);
                    a.setGlobalFromObject(e)
                } catch (w) {
                    f = p, u = c.getConfig(f)
                }
                g.exec(f, function() {
                    e && d.setComposite(e.composite);
                    b && b()
                }, function(a) {
                    b && b();
                    console.warn(f, a)
                })
            })
        };
        d.needsSync = function() {
            return d.lastSynced !== d.lastModified
        };
        d.timestamp = function() {
            return d.recorder ? d.recorder.currentTime : d.player ? d.player.currentTime :
                Date.now()
        };
        d.getActionId = function(a) {
            return a.event ? b.user.id + ":" + a.pointerId : String(a.pointerId)
        };
        d.getActionUid = function(a) {
            return a ? a.event ? b.user.id + ":" + a.identifier : String(a.identifier) : b.user.id + ":" + eventjs.getPID(1)
        }
    };
    k.module.Document.idx = 0
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.DocumentStyle = function(g, f) {
        function q(b, a) {
            var c;
            if (b[a]) c = "string" === typeof b[a] ? b[a] = new e.create(b, a) : b[a];
            else if (c = f.toolkitConfig[b.type], c[a]) c = c[a];
            else return "";
            var d = c.type;
            "string" !== typeof c[d] && (c[d] = e[a][d]);
            return c
        }

        function l(b, a) {
            var c = q(a, b),
                d = c.noise,
                h = c.type,
                p = c[h];
            if (p) {
                if (a.useBackgroundOverlay) return "brush" === a.toolkitId ? c.__colors = [0, c.color || "#000"] : c.__colors = [0, f.computed.background];
                if ("none" === p) return c.__colors = [0, "rgba(0,0,0,0)"];
                switch (h) {
                    case "color":
                        return c.__colors = [0, p];
                    case "gradient":
                        var m = e.getGradientStops({
                            dna: p,
                            asFlatArray: !0,
                            asHex32: !0
                        });
                        if (0 === m.length) return c.__colors = [0, c.color || "#000"];
                        break;
                    case "pattern":
                        return p ? (e.loadPattern(p), c.__colors = [0, e.patternCtx[p]]) : c.__colors = [0, c.color || "#000"]
                }
                if (d || g.detect.useColorModeCycle[a.type]) {
                    h = e.hashDNA(p + d);
                    if (e.gradientCtx[h]) return c.__colors = e.gradientCtx[h];
                    c.__colors = g.style.getColorStopsHelper({
                        length: 500,
                        stops: m,
                        noise: d,
                        seed: a.seed
                    });
                    return e.gradientCtx[h] =
                        c.__colors
                }
                c = c.__colors = [];
                for (d = 0; d < m.length; d += 2) c.push(m[d]), c.push(g.color.space(m[d + 1], "HEX32>RGBA>W3"));
                return c
            }
        }
        var d = g.feature,
            e = g.style,
            c = f.toolkit,
            h = g.util;
        (function() {
            function b(a, b) {
                var c = g.colorspace(a).setAlpha(b).toCSS();
                p({
                    computed: c,
                    css: c,
                    paint: new e.Fill({
                        color: a,
                        opacity: b
                    })
                });
                m && m()
            }

            function a(a) {
                var b = a.angle,
                    c = a.mode,
                    d = e.getColorStopsHelper({
                        asCSSArray: !0,
                        dna: a[a.type],
                        noise: a.noise
                    });
                p({
                    computed: e.createGradient(null, c, 0, 0, f.computed.width, f.computed.height, d, a),
                    css: e.toCSSGradient({
                        stops: d,
                        type: c,
                        angle: b
                    }),
                    paint: a
                });
                m && m()
            }

            function c(a) {
                -1 === a.indexOf("gradient") && (a = e.toCSSGradient({
                    dna: a,
                    type: "linear",
                    angle: "0deg"
                }));
                var b = e.parseCSSGradient(a).stops;
                b ? (p({
                    computed: e.createGradient(null, "linear", 0, 0, f.computed.width, f.computed.height, b, a),
                    css: a,
                    paint: a
                }), m && m()) : v && v()
            }

            function u(a, b) {
                var c = g.loc.getMediaUrl(a);
                g.convert.patternFromFile({
                    src: c,
                    opacity: 1,
                    onerror: v,
                    onsuccess: function(d) {
                        e.loadPattern(a);
                        p({
                            computed: d,
                            css: "url(" + c + ")",
                            paint: b || a
                        });
                        f.setCSSBackgroundSize();
                        m && m()
                    }
                })
            }

            function x(a, b) {
                a(b, function(a) {
                    p({
                        computed: a,
                        css: a.css,
                        paint: b
                    });
                    m && m()
                })
            }

            function p(a) {
                var b = a.paint,
                    c = a.computed;
                a = a.css;
                f.background = b;
                f.computed.background = c;
                b = b.opacity;
                c = f.targetBackground;
                if (c.style.background !== a || c.style.background !== b) d.canvas.useBGRender ? (f.render.dirty = !0, f.render.dirtyControls = !0) : (c.style.opacity = b, c.style.background = a);
                a = c.parentNode;
                "" === a.style.background && (a.style.background = g.ui.media.transparent.css)
            }
            var m, v;
            f.setBackground = function(d, p, t) {
                d = d || "none";
                m = p || d.onload;
                v = t || d.onerror;
                if (d.type) switch (p = e.copy(d), p.type) {
                    case "color":
                        b(p.color, p.opacity);
                        break;
                    case "gradient":
                        a(p);
                        break;
                    case "pattern":
                        u(p.pattern, p)
                } else {
                    if (d.crop) return p = f.computed, h.thumbnailer({
                        src: d.src,
                        crop: d.crop || "fit",
                        center: d.center || !1,
                        width: d.width || p.width,
                        height: d.height || p.height,
                        onsuccess: function(a) {
                            u(a.toDataURL(), d)
                        }
                    });
                    p = d.src || d;
                    switch (p) {
                        case "none":
                            break;
                        case "blank":
                            return b("white", 1);
                        case "white":
                            return b("white", 1);
                        case "black":
                            return b("black", 1);
                        case "grid":
                            return x(g.gen.grid,
                                "grid");
                        case "graphPaper":
                            return x(g.gen.grid, "graphPaper");
                        case "blueprint":
                            return x(g.gen.grid, "blueprint");
                        case "notebook":
                            return x(g.gen.paper, "notebook");
                        case "looseLeaf":
                            return x(g.gen.paper, "looseLeaf");
                        case "lined":
                            return x(g.gen.paper, "lined");
                        case "transparent":
                            return x(g.gen.interlace, "transparent");
                        case "transparentDark":
                            return x(g.gen.interlace, "transparentDark");
                        default:
                            t = e.validate(p), "color" === t ? b(p, 1) : "pattern" === t || 0 === p.indexOf("url(") ? (t = p.match(/(?:\(['|"]?)(.*?)(?:['|"]?\))/),
                                u(t && t[1] ? t[1] : p)) : c(p)
                    }
                }
            }
        })();
        f.setComposite = function(b, a, d) {
            b = e.getCompositeReadable(b);
            a = a || f.tool.type;
            var h = c.getToolkitDevice(a);
            if (h) {
                a = f.toolkitConfig[a];
                if ("eraser" === a.type) return;
                var g = a.composite;
                g && g.setValue ? g.setValue(b) : a.composite = b;
                h.composite = b;
                d && f.selection.length && f.setConfig({
                    param: "composite",
                    value: b
                })
            }
            e.composite = b
        };
        f.setFill = function(b) {
            b = b || {};
            "string" === typeof b ? b = {
                fill: {
                    dna: b
                }
            } : b.stroke || (b.fill = e.copyInto(b, {}, {
                paintType: "fill"
            }));
            b.useColorPicker = !1 !== b.useColorPicker;
            b.useRecord = !1 !== b.useRecord;
            b.useRender = !1 !== b.useRender;
            f.setStyle(b)
        };
        f.setStroke = function(b, a, c, d, h, p, m) {
            b = b || {};
            "string" === typeof b ? (b = {
                stroke: {
                    dna: b
                }
            }, p && (b.stroke.dashArray = p), isFinite(m) && (b.stroke.dashOffset = m), c && (b.stroke.lineCap = c), d && (b.stroke.lineJoin = d), isFinite(a) && (b.stroke.lineWidth = a), isFinite(h) && (b.stroke.miterLimit = h)) : b.stroke || (b.stroke = e.copyInto(b, {}, {
                paintType: "stroke"
            }));
            b.useColorPicker = !1 !== b.useColorPicker;
            b.useRecord = !1 !== b.useRecord;
            b.useRender = !1 !== b.useRender;
            f.setStyle(b)
        };
        f.setFont = function(b) {
            "string" === typeof b && (b = {
                fontFamily: b
            });
            b = b || {};
            var a = b.fontFamily,
                d = b.onsuccess,
                h = b.selection;
            if (a) {
                var e = c.text,
                    h = f.selection.parse(h || f.selection.items);
                b = f.scene.copyProperties(e, b);
                e.loadFont({
                    fontFamily: a,
                    onsuccess: function() {
                        f.setConfig({
                            filter: "text",
                            params: b,
                            selection: h
                        });
                        d && d()
                    }
                })
            }
        };
        (function() {
            f.setStyle = function(b) {
                var a = b.useColorPicker && g.ui.colorPicker.update || !1,
                    w = d.stream.realtime && f.on.record,
                    u = b.useRecord || !1,
                    x = !0 === u || "down" === u || "start" === u,
                    p = !0 === u || "up" ===
                    u || "end" === u || "update" === u,
                    u = b.useRender || !1,
                    m = b.actionId || f.getActionUid(),
                    v;
                (v = b.configure) || (v = f.toolkitConfig[(f.selection.item || f.tool).type]);
                var r = v,
                    y = f.selection.toObjects(b.selection || f.selection.items),
                    t = {},
                    q = {};
                v = b.changeCount || 0;
                var z, C, A = {},
                    k;
                for (k in e.methods)
                    if (b[k]) {
                        a: {
                            C = b[k];
                            "string" === typeof C && (C = {
                                dna: C
                            });
                            var B = C.dna || C.color || C.gradient || C.pattern,
                                D = C.paintType;
                            if (!D && B)
                                if (B = e.parseStyle(B)) D = B.type, B = B.dna;
                                else {
                                    C = void 0;
                                    break a
                                }
                            D && (C.type = D, C[D] = B, delete C.dna, delete C.paintType)
                        }
                        if (C) {
                            z =
                                C[C.type];
                            var D = C,
                                B = k,
                                F = r && r[B];
                            F && (e.copyInto(D, F), e.copyInto(D, e[B]));
                            D = k;
                            if (B = f.tool.device)
                                if (F = B[D]) e.copyInto(C, F), l(D, B);
                            A[k] = C
                        }
                    }
                r = 0;
                for (D = y.length; r < D; r++)
                    for (k in b = y[r], A) {
                        C = A[k];
                        a: {
                            var B = b,
                                F = C,
                                G = k,
                                H = t,
                                J = q,
                                O = x,
                                K = p,
                                L = w,
                                M = B[G];
                            if (void 0 === M)
                                if ((M = f.toolkitConfig[B.type]) && M[G]) M = B[G] = e.create({}, G);
                                else {
                                    B = void 0;
                                    break a
                                }
                            if (!1 === M) B = !1;
                            else {
                                if (e.equals(F, M.__cache || M)) K && delete M.__cache;
                                else if ("clipart" === B.type) changeCount++;
                                else {
                                    O && (M.__cache = e.copy(M));
                                    if (K || L) {
                                        var Q = B.id,
                                            O = H[Q] || {
                                                id: Q
                                            };
                                        O[G] = M.__cache;
                                        H[Q] = O
                                    }
                                    K && (f.scene.setDirtyPixelData(B), delete M.__cache);
                                    e.copyInto(F, M);
                                    if (K || L) O = J[Q] || {
                                        id: Q
                                    }, O[G] = e.copy(M), J[Q] = O;
                                    B.dirtyCache = !0;
                                    l(G, B);
                                    B = !0;
                                    break a
                                }
                                B = void 0
                            }
                        }
                        B && v++
                    }
                p && f.saveSettings();
                v && (p || w) && (x = h.diff(h.objectToArray(t), h.objectToArray(q), ["id"])) && (w && f.on.record({
                    op: "SCENE_UPDATE",
                    data: x.to
                }), p && f.history && f.history.store({
                    cmd: "update",
                    name: "update-style",
                    data: {
                        pointerId: m,
                        from: x.from,
                        to: x.to
                    }
                }));
                c.text && c.text.updateCSSStyle();
                a && "none" !== z && C && "color" === C.type && g.ui.colorPicker.update(z);
                g.palette && (a = g.palette, w = a.getPaintMethod(), f.scene && 1 === f.selection.length ? (b = f.scene.getOneSelected()) && "clipart" !== b.type && (C = b && b[w]) : (z = f.tool.device) && (C = z[w]), C && a.setIndicator(C));
                u && v && (f.render.dirty = !0)
            }
        })();
        f.loadStyle = function() {
            function b(a, b, c) {
                var d = q(a, b);
                "pattern" === d.type && d.pattern ? e.loadPattern(d.pattern, function(d) {
                    l(b, a);
                    c()
                }, function() {
                    c("404")
                }) : (l(b, a), c())
            }
            return function(a, c) {
                var d = 1,
                    h = function(a) {
                        --d || c && c()
                    };
                if (d)
                    for (var p in e.methods) a[p] && (d++, b(a, p, h));
                h()
            }
        }();
        f.getW3CStyle =
            function(b, a, c, d, h, p, m) {
                var v = m[b];
                if (v && v.enabled) {
                    var r = v.type,
                        y = v.mode,
                        t = v[r];
                    if ("destination-out" === m.composite) return f.computed.background || "#000";
                    if ("none" === t) return "stamp" === m.type ? "rgba(0,0,0,0)" : "rgba(0,0,0,1)";
                    if ("color" === r) return "cycle" === y ? (a = v.__colors || (v.__colors = l(b, m)), a[(2 * (m.time || 0) + 1) % a.length]) : t;
                    if ("pattern" === r) return e.patternCtx[t] ? e.patternCtx[t] : "rgba(0,0,0,1)";
                    if ("gradient" === r) return b = v.__colors || (v.__colors = l(b, m)), e.createGradient(a, y, c, d, h, p, b, v, m.bbox && m.bbox.scale)
                }
            }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Exec = function(g) {
        function f(a, b, c, p) {
            eventjs.shiftKey && (a *= 10, b *= 10);
            l.selection.length && (p && (d.copy(), d.paste()), "down" === c && (f.cache = {}), d.selection.transform({
                cache: f.cache,
                state: e.cleanState(c),
                x: a,
                y: b
            }), q())
        }

        function q() {
            l.render.dirty = !0;
            l.render.dirtyControls = !0
        }
        var l, d, e, c = g.util,
            h = g.vector,
            b = g.feature;
        g.exec = function(h, f, x) {
            if (h) {
                if (a[h]) {
                    l = g.doc;
                    d = l.scene;
                    e = l.toolkit;
                    var p = Array.prototype.slice.call(arguments);
                    return a[h].apply(null, p)
                }
                if (b.doc.globalTools) {
                    var m =
                        c.pending(1, f || function() {});
                    c.each(g.docs, function(a) {
                        m.push();
                        a.setTool(h, m.pop, m.pop)
                    });
                    m.pop()
                } else g.doc.setTool({
                    type: h,
                    onsuccess: f,
                    onerror: x
                })
            } else console.warn("missing trigger", arguments)
        };
        g.exec.register = function(b, c) {
            b.indexOf && (-1 !== b.indexOf(" ") ? b = b.split(" ") : -1 !== b.indexOf(",") && (b = b.split(",")));
            if ("object" === typeof b)
                for (var d = 0; d < b.length; d++) a[b[d]] = c;
            else a[b] = c
        };
        g.exec.unregister = function(b) {
            delete a[b]
        };
        var a = {
            "object-download": function(a) {
                if (1 === l.selection.length) {
                    a = l.selection.toObjects();
                    for (var b = 0; b < a.length; b++) {
                        var c = a[b];
                        if (c.src && "image" === c.type) {
                            g.assets.getBlob(c.src, function(a, b, c) {
                                b = c.replace("#asset-", "") + ".png";
                                g.download.blob(a, b)
                            });
                            return
                        }
                    }
                }
                g.download.image({
                    filename: l.title + "-layerExport",
                    useSelection: !0
                })
            },
            "object-move-left": function(a, b, c) {
                f(-(b || 1), 0, c)
            },
            "object-move-up": function(a, b, c) {
                f(0, -(b || 1), c)
            },
            "object-move-right": function(a, b, c) {
                f(b || 1, 0, c)
            },
            "object-move-down": function(a, b, c) {
                f(0, b || 1, c)
            },
            "object-move-end": function(a, b, c) {
                f(0, 0, c)
            },
            "object-clone-left": function(a,
                b, c) {
                f(-(b || 1), 0, c, !0)
            },
            "object-clone-up": function(a, b, c) {
                f(0, -(b || 1), c, !0)
            },
            "object-clone-right": function(a, b, c) {
                f(b || 1, 0, c, !0)
            },
            "object-clone-down": function(a, b, c) {
                f(0, b || 1, c, !0)
            },
            "object-clone-end": function(a, b, c) {
                f(0, 0, c, !0)
            },
            "debug-action": function(a, b) {
                for (var c = l.selection.toObjects(b), d = 0; d < c.length; d++) {
                    var m = c[d];
                    console.log("id:", m.id, "idx:", m.zIndex, "type:", m.type);
                    console.log("object:", m);
                    console.log("bbox:", m.bbox)
                }
            },
            render: function() {
                q()
            },
            "zoom-to": function(a, b) {
                l.setZoom(b)
            },
            "zoom-in": function(a) {
                l.render.dirtyControls = !0;
                l.orient.controllerZoomIn();
                d.setDirtyBounds()
            },
            "zoom-out": function(a) {
                l.render.dirtyControls = !0;
                l.orient.controllerZoomOut();
                d.setDirtyBounds()
            },
            "zoom-reset": function(a) {
                l.render.dirtyControls = !0;
                l.orient.controllerReset();
                d.setDirtyBounds()
            },
            "object-to-stamp": function(a) {
                g.assets.addStampFromSelection()
            },
            "object-merge": function(a) {
                g.assets.addCloneFromSelection()
            },
            "object-group": function(a) {
                a = "group" + Math.round(999999 * Math.random());
                for (var b = l.selection.toObjects(), c = 0; c < b.length; c++) b[c].groupId =
                    a
            },
            "path-merge": function(a) {
                h.mergeLayers();
                a = d.getSelection();
                l.selection.remove();
                if (a = h.mergeLayers(a)) a.dirtyCheck = !0, l.history.store({
                    cmd: "add",
                    name: "merge-objects",
                    data: [a]
                }), d.push(a), d.sort(), d.reindex(), q()
            },
            "object-forwards": function(a) {
                d.sendForwards && l.selection.length && (d.sendForwards({
                    record: !0
                }), q())
            },
            "object-to-front": function(a) {
                d.sendForwards && l.selection.length && (d.sendForwards({
                    record: !0,
                    toFront: !0
                }), q())
            },
            "object-backwards": function(a) {
                d.sendBackwards && l.selection.length && (d.sendBackwards({
                        record: !0
                    }),
                    q())
            },
            "object-to-back": function(a) {
                d.sendBackwards && l.selection.length && (d.sendBackwards({
                    record: !0,
                    toBack: !0
                }), q())
            },
            "object-delete": function(a) {
                l.selection.length && (l.selection.remove(), q(), g.ui.configurePane())
            },
            "object-copy": function(a) {
                d.copy && l.selection.length && (d.copy(), d.setDirtyControl(d.selection.items), q())
            },
            "object-cut": function(a) {
                d.cut && l.selection.length && (d.cut(), q(), g.ui.configurePane())
            },
            "object-paste": function(a) {
                d.paste && d.paste(function() {
                    q();
                    l.setTool("select")
                })
            },
            "object-duplicate": function(a) {
                d.duplicate &&
                    (d.duplicate(), q())
            },
            "select-all": function(a) {
                g.exec("select", function() {
                    d.selectAll();
                    q()
                })
            },
            "select-inverse": function(a) {
                g.exec("select", function() {
                    d.selectInverse();
                    q()
                })
            },
            "deselect-all": function(a) {
                d.deselectAll();
                q()
            },
            undo: function(a) {
                l.history.undo();
                l.render.dirtyControls = !0
            },
            redo: function(a) {
                l.history.redo();
                l.render.dirtyControls = !0
            },
            print: function(a) {
                g.print()
            },
            save: function(a) {
                g.save.fromQuery()
            },
            "save-server": function(a) {
                g.save.toServer()
            },
            "save-image": function(a, b) {
                g.download.image(b)
            },
            "save-gif": function(a) {
                g.download.image("gif")
            },
            "save-jpeg": function(a) {
                g.download.image("jpeg")
            },
            "save-png": function(a) {
                g.download.image("png")
            },
            "save-webp": function(a) {
                g.download.image("webp")
            },
            "save-json": function(a) {
                g.download.json()
            },
            "save-pdf": function(a) {
                g.download.pdf()
            },
            "save-zip": function(a) {
                g.download.zip()
            },
            reset: function(a) {
                l.reset({
                    useRender: !0
                })
            },
            "new": function(a) {
                g.exec("reset");
                l.uuid = c.uuid();
                l.history.store({
                    cmd: "new",
                    name: "new",
                    data: []
                });
                g.fs.touchProject && g.fs.touchProject(l.uuid)
            },
            "new-confirm": function(a, b, c) {
                g.save.confirm({
                    oncontinue: function() {
                        g.exec("new");
                        g.ui.log("new-doc-created");
                        b && b()
                    },
                    onrequestsave: function() {
                        g.save.fromQuery()
                    },
                    oncancel: function() {
                        c && c()
                    }
                })
            },
            configure: function(a) {
                a = g.ui.pages.getPageId();
                g.ui.setPane("configure");
                "configure" !== a && !1 !== g.sidebar.opened || sidebar.toggle()
            },
            layers: function(a) {
                a = g.ui.pages.getPageId();
                g.ui.setPane("layers");
                "layers" !== a && !1 !== g.sidebar.opened || sidebar.toggle()
            },
            history: function(a) {
                a = g.ui.pages.getPageId();
                g.ui.setPane("history");
                "history" !== a && !1 !== g.sidebar.opened || sidebar.toggle()
            },
            menu: function(a) {
                g.sidebar.toggle()
            },
            palette: function(a) {
                g.windows.toggle("#sk-palette")
            },
            "color-picker": function(a) {
                g.windows.toggle("#sk-palette")
            },
            colorPalette: function(a) {
                g.colorPalette.enabled ? g.colorPalette.disable() : g.colorPalette.enable()
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(a, b) {
        if (void 0 === g.initialized && (g.initialized = !0, w.Agent(k), u.exists("glfx.loadFilters") && !glfx.presets.length)) return glfx.loadFilters(function() {
            a.apply(null, b)
        }), !0
    }

    function f(a) {
        e(w.Style, a.style) && w.Style(a)
    }

    function q(a, b) {
        new w.GenerateMedia(a, b);
        new w.UI(a, b);
        new w.UICursor(a, b);
        new w.Library(a, b);
        new w.DocumentStyle(a, b);
        w.Exec && new w.Exec(a);
        w.GeneratePreview && w.GeneratePreview(a);
        e(w.Assets, a.assets) && (a.assets = new w.Assets(a, b))
    }

    function l(a, b) {
        w.Scene && (b.scene =
            new w.Scene(a, b), b.hovered = b.scene.hovered, b.selection = b.scene.selection, w.AddMedia && new w.AddMedia(a, b), w.AddObject && (new w.AddObject(a, b), b.scene.add = b.addObject), w.SceneReplicate && (w.SceneReplicate(a, b), b.scene.clipboard.restore()), w.SceneOrganize && w.SceneOrganize(a, b), w.ScenePlacement && w.ScenePlacement(a, b), w.SceneFind && w.SceneFind(a, b));
        w.History && (b.history = new w.History(a, b));
        w.Control && w.ControlEvent && (new w.Control(a, b), new w.ControlEvent(a, b));
        w.Theme && (b.theme = new w.Theme(a, b))
    }

    function d(a,
        b) {
        a.vector.Shape && (a.vector.VOBPath = a.vector.Shape.VOBPath);
        w.IO(a);
        var c = a.feature;
        e(w.UIPaletteEditor, a.palette) && (a.palette = new w.UIPaletteEditor(a, b));
        e(w.UISidebar, a.sidebar) && (c.pane.position ? a.sidebar = new w.UISidebar(a, c.pane.position) : console.warn("sidebar position not set"));
        e(w.UITooltip, a.ui.tooltip) && c.ui.tooltips && (a.ui.tooltip = new w.UITooltip(a));
        e(w.UIVortex, a.vortex) && (a.vortex = new w.UIVortex(document.body));
        w.Alert && !a.ui.alert && new w.Alert(a);
        w.UIStartWindow && new w.UIStartWindow(a,
            b);
        c.pane.tabs && a.ui.UISidebarTabs();
        e(w.Keyboard, a.keyboard) && (a.keyboard = new w.Keyboard(a));
        a.keyboard && a.keyboard.enable(b);
        w.ShareFest && new w.ShareFest(a, b);
        w.SocketIO && new w.SocketIO(a, b);
        w.Peer && new w.Peer(a, b);
        w.PeerTest && new w.PeerTest(a, b);
        w.Recorder && !b.recorder && (b.recorder = new w.Recorder(a, b));
        w.Player && !b.player && (b.player = new w.Player(a, b));
        e(a.net.Swarm, a.net.swarm) && (a.net.swarm = new a.net.Swarm);
        e(a.net.Users, a.net.users) && (a.net.users = new a.net.Users);
        "undefined" !== typeof Stats &&
            !k.stats && k.feature.debug && (k.stats = new Stats, k.stats.setMode(1), k.stats.domElement.style.zIndex = 99999, k.stats.domElement.style.position = "fixed", k.stats.domElement.style.bottom = "0px", k.stats.domElement.style.left = "0px", document.body.appendChild(k.stats.domElement));
        w.PathFinder && new w.PathFinder(a, b);
        w.Orientation && w.Orientation.createController(a, b);
        u.getScreenMetrics && !u.toMetrics && (u.toMetrics = u.getScreenMetrics());
        u.loadImage && x.PROXY && (u.loadImage.proxyUrl = x.PROXY);
        a.ui.Loader && !a.loader && (a.loader =
            new a.ui.Loader);
        a.feature.kiosk && u.requestKioskMode()
    }

    function e(a, b) {
        return a && !(b instanceof a)
    }

    function c(c, m) {
        var d = c.feature,
            r = m.toolkit,
            e = u.debounce(function(a) {
                c.windows.restore && c.windows.restore();
                c.emit("beforeresize");
                m.setCanvasSize();
                d.doc.centerOnResize && m.orient.reset(!0);
                c.emit("resize", m.viewport);
                m.render.dirty = !0;
                m.render.dirtyControls = !0;
                m.render.dirtyPointer = !0;
                "text" === m.tool.type && r.text.updateCSS()
            }, 100),
            t = m.container,
            f = m.contexts.active;
        c.events && eventjs.bulk(c.events, "remove");
        c.events = {};
        c.events.onResize = eventjs.add(window, "resize", e);
        eventjs.add(t, "scroll", function(a) {
            var b = m.container;
            a = b.scrollTop;
            b = b.scrollLeft;
            m.scrollY = a;
            m.scrollX = b;
            m.scrollElementCSS();
            m.render.dirtyClip = !0;
            var d = m.contexts,
                h;
            for (h in d) {
                var v = d[h];
                v.style.left = b + "px";
                v.style.top = a + "px"
            }
            m.scene && (m.canvas2d.tx = m.canvas2d.x - m.scrollX, m.canvas2d.ty = m.canvas2d.y - m.scrollY, r.text && (h = m.selection.item) && "text" === h.type && r.text.updateCSSTransform(), c.emit("scroll"), m.render.dirty = !0, m.render.dirtyControls = !0, m.render.dirtyInBounds = !0, m.render.dirtyPointer = !0)
        });
        c.ui.TSEvents.add();
        c.ui.setupStartWindow && c.ui.setupStartWindow();
        c.windows.restore && (c.events.onScroll = eventjs.add(window, "scroll", c.windows.restore));
        d.preventScroll && !d.debugCache && eventjs.add(t, "wheel", eventjs.stop);
        c.agent.chromeApp || (c.events.onBeforeUnload = eventjs.add(window, "beforeunload", a));
        d.preventTouch && c.agent.mobile && (c.events.onTouch = eventjs.add(document, "touchstart", eventjs.prevent, {
            strict: !0
        }));
        eventjs.add(f, "contextmenu",
            eventjs.prevent);
        eventjs.add(f, "mouseup", function() {
            document.activeElement !== document.body && document.activeElement && document.activeElement.blur();
            c.windows.clearFocus && eventjs.add(f, "mouseup", c.windows.clearFocus)
        });
        c.events.onFocusWindow = eventjs.add(window, "focus", b);
        c.events.onBlurWindow = eventjs.add(window, "blur", h)
    }

    function h(a) {
        eventjs.keyTrackerReset()
    }

    function b(a) {
        eventjs.keyTrackerReset(a);
        (a = k.doc.scene.clipboard) && a.restore()
    }

    function a(a) {
        function b(a) {
            return "function" === typeof a ? a() : a
        }
        var c = k.feature.beforeUnloadPrompt,
            d;
        "object" === typeof c ? (d = b(c.message), setTimeout(c.oncancel, 250)) : d = b(c);
        if (d) return (a || window.event).returnValue = d
    }
    console && console.log && console.log("%c\u2665 SketchAPI 3.7.8 \u2665", "color: red;");
    var w = k.module,
        u = k.util,
        x = k.loc;
    k.setHost = x.setHost;
    k.doc = void 0;
    k.docs = {};
    k.setDocument = function(a) {
        var b = k.doc;
        if (a = k.docs[a]) {
            if (a.idx !== b.idx) {
                var c = a.scene.clipboard;
                c && c.restore();
                c = a.tool.type;
                a.toolkit.setConfig(c, b.toolkitConfig[c]);
                k.doc = a
            }
            return a
        }
        console.warn("docId does not exist")
    };
    k.Document = function(a) {
        if (!g(k.Document, arguments)) {
            a = a || {};
            var b = a.onready,
                h = a.onsupport,
                r = a.toolset;
            f(k);
            var e = k.feature,
                t = new w.Document(k);
            t.setAttributes(e.doc);
            t.setContainer(a);
            t.toolkit = new w.Toolkit(k, t);
            t.toolkitConfig = new w.Configure(k, t, r);
            t.render = new w.SceneRender(k, t);
            t.queueHistory = new w.QueuePending;
            q(k, t);
            l(k, t);
            k.lang.setLocale(e.lang, function() {
                k.agent.detect();
                k.agent.has("incognito", function() {
                    h && h(t);
                    setTimeout(function() {
                        t.setBackground(e.doc.background);
                        t.setCanvasSize();
                        d(k, t);
                        w.install(k, t);
                        t.toolkit.setup();
                        c(k, t);
                        t.queueHistory.run(k, t);
                        setTimeout(function() {
                            t.render.start();
                            e.doc.restoreSettings ? t.restoreSettings(function() {
                                b && b(t)
                            }) : b && b(t)
                        }, 0)
                    }, 0)
                })
            })
        }
    };
    k.construct = function(a) {
        g(k.construct, arguments) || (a = a || {}, a.icons && u.copyInto(a.icons, k.ui.icons), a.feature && k.setFeature(a.feature), k.setHost(a.hosts), k.Document(a))
    };
    k.setFeature = function() {
        function a(b) {
            if ("object" === typeof b) {
                var c = k.feature,
                    d = c.tools,
                    p = d.defaults;
                u.copyInto(b, c);
                Object.keys(d).forEach(function(a) {
                    "defaults" !==
                    a && "defaultTool" !== a && (d[a] = u.copyInto(p, d[a], {
                        filterOut: function(a, b) {
                            return "object" === typeof a ? !1 === b : void 0 !== b
                        }
                    }))
                });
                c.debug && (document.body.style.overflow = "auto")
            }
        }
        return function(b) {
            if (!g(k.setFeature, arguments)) {
                a(b);
                var c = k.feature,
                    d = x.search;
                d.zoom && (c.zoom.value = parseFloat(d.zoom));
                d.pixelRatio && (c.doc.pixelRatio = parseFloat(d.pixelRatio), c.canvas.usePixelRatio = !1, c.canvas.usePixelRatioDesktop = !1);
                for (var h in d) {
                    var e = d[h],
                        f = typeof c[h];
                    "undefined" !== f && ("string" === f ? c[h] = e : "boolean" ===
                        f ? c[h] = "true" === e || !0 === e : "number" === f && isFinite(e = parseFloat(e)) && (c[h] = e))
                }
            }
        }
    }();
    w.IO = function(a) {
        var b = a.feature.paths,
            c = x.HOST.slice(0, -1);
        window.zip && (zip.workerScriptsPath = b.zip.replace("$HOST", c));
        window.PDFJS && (PDFJS.workerSrc = b.pdf.replace("$HOST", c));
        window.ZeroClipboard && ZeroClipboard.config({
            swfPath: b.clipboard.replace("$HOST", c)
        });
        e(w.ZIP, a.io.zip) && (a.io.zip = new w.ZIP(a));
        e(w.PDF, a.io.pdf) && (a.io.pdf = new w.PDF(a));
        e(w.SVG, a.io.svg) && (a.io.svg = new w.SVG(a));
        e(w.JSON, a.io.json) && (a.io.json =
            new w.JSON(a));
        e(w.ABR, a.io.abr) && (a.io.abr = new w.ABR(a));
        e(w.GBR, a.io.gbr) && (a.io.gbr = new w.GBR(a));
        e(w.Server, a.server) && (a.server = new w.Server(a));
        e(w.FileSystem, a.fs) && (a.fs = new w.FileSystem(a));
        e(w.Open, a.open) && (a.open = new w.Open(a));
        e(w.Save, a.save) && (a.save = new w.Save(a));
        e(w.Download, a.download) && (a.download = new w.Download(a));
        e(w.Print, a.print) && (a.print = new w.Print(a))
    };
    w.Listener(k)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.QueuePending = function(g) {
        var f = [];
        this.add = function(g) {
            f.push(g)
        };
        this.run = function(q, l) {
            for (; f.length;) {
                var d = f.shift();
                g ? g(q, l, d) : d(q, l)
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
"undefined" === typeof sk && (sk = sketch);
(function(k) {
    var g = new k.module.QueuePending;
    k.module = k.module || {};
    k.module.add = g.add;
    k.module.install = g.run
})(sketch);
"undefined" === typeof sketch && (sketch = {});
sketch.color = sketch.color || {};
sketch.colorspace = sketch.colorspace || {};
sketch.color.space = sketch.color.space || {};
(function() {
    var k = {},
        g = {
            "HEX24>HSL": "HEX24>RGB>HSL",
            "HEX32>HSLA": "HEX32>RGBA>HSLA",
            "HEX24>CMYK": "HEX24>RGB>CMY>CMYK",
            "RGB>CMYK": "RGB>CMY>CMYK"
        },
        f = sketch.color.space = function(c, d) {
            g[d] && (d = g[d]);
            if ("object" === typeof c && 0 <= c[0]) {
                for (var b = d.substr(0, d.indexOf(">")), a = {}, e = 0; e < b.length; e++) {
                    var u = b.substr(e, 1);
                    a[u] = c[e]
                }
                c = a
            }
            if (k[d]) return k[d](c);
            for (var x = [], b = d.split(">"), a = b[0] + "_" + b[1], e = 2; e <= b.length; e++) c = f[a](c), x.push(f[a]), a = a.substr(a.indexOf("_") + 1) + "_" + b[e];
            b = x.length;
            1 === b ? k[d] = x[0] : 2 ===
                b ? k[d] = function(a) {
                    return x[1](x[0](a))
                } : 3 === b ? k[d] = function(a) {
                    return x[2](x[1](x[0](a)))
                } : 4 === b && (k[d] = function(a) {
                    return x[3](x[2](x[1](x[0](a))))
                });
            return c
        },
        q = {
            "#": function(c, d) {
                c.color = f.HEX24_RGBA(f.W3_HEX24(d));
                c.format = "RGB"
            },
            rgba: function(c, d) {
                c.color = f.W3_RGBA(d);
                c.format = "RGB"
            },
            rgb: function(c, d) {
                c.color = f.W3_RGBA(d);
                c.format = "RGB"
            },
            hsla: function(c, d) {
                c.color = f.W3_HSLA(d);
                c.format = "HSL"
            },
            hsl: function(c, d) {
                c.color = f.W3_HSLA(d);
                c.format = "HSL"
            }
        },
        l = sketch.colorspace = function(c, d) {
            if (this instanceof l) {
                c = c || "#000";
                if ("string" === typeof c) {
                    c = c.replace(/ /g, "");
                    c = c.toLowerCase();
                    if (e[c]) return q["#"](this, e[c]), this.format = "RGB", this;
                    for (var b in q)
                        if (0 === c.indexOf(b)) return q[b](this, c), this;
                    this.color = {
                        R: 0,
                        G: 0,
                        B: 0,
                        A: 255
                    };
                    this.format = "RGB"
                } else this.color = c, this.format = d;
                return this
            }
            return new l(c)
        },
        d = l.prototype;
    d.setAlpha = function(c) {
        this.color.A = 255 * c;
        return this
    };
    d.multAlpha = function(c) {
        this.color.A *= c;
        return this
    };
    d.setSpace = function(c) {
        var d = this.format;
        d !== c && (this.color = f(this.color, d +
            ">" + c), this.format = c);
        return this
    };
    d.toHEX24 = function() {
        return f.RGB_HEX24(this.toRGB().color)
    };
    d.toHEX32 = function() {
        return f.RGBA_HEX32(this.toRGB().color)
    };
    d.toRGB = function() {
        return this.setSpace("RGB")
    };
    d.toHSL = function() {
        return this.setSpace("HSL")
    };
    d.toHSV = function() {
        return this.setSpace("HSV")
    };
    d.toCMYK = function() {
        return this.setSpace("CMYK")
    };
    d.toHEXString = d.toHEX24String = function() {
        return f.HEX24_W3(this.toHEX24())
    };
    d.toHEX32String = function() {
        return f.HEX32_W3(this.toHEX32())
    };
    d.toRGBString =
        function() {
            return f.RGB_W3(this.toRGB().color)
        };
    d.toRGBAString = function() {
        return f.RGBA_W3(this.toRGB().color)
    };
    d.toHSLString = function() {
        return f.HSL_W3(this.toHSL().color)
    };
    d.toHSLAString = function() {
        return f.HSLA_W3(this.toHSL().color)
    };
    d.toCSS = function() {
        var c = this.color;
        switch (this.format) {
            case "RGB":
                return 255 === c.A ? this.toHEXString() : this.toRGBAString();
            case "HSL":
                return 255 === c.A ? this.toHSLString() : this.toHSLAString()
        }
    };
    d.isW3Contrast = function(c, d, b) {
        d = d || 125;
        b = b || 500;
        c = c ? (new l(c)).toRGB().color : {
            R: 0,
            G: 0,
            B: 0
        };
        d = this.isW3Brightness(c) <= d;
        b = this.isW3Difference(c) <= b;
        return !(d && b)
    };
    d.isW3Brightness = function(c) {
        return f.W3Brightness(this.color, c)
    };
    d.isW3Difference = function(c) {
        return f.W3Difference(this.color, c)
    };
    f.isW3Contrast = function(c, d) {
        d = d || {
            R: 255,
            G: 255,
            B: 255
        };
        var b = 125 >= f.W3Brightness(c, d),
            a = 500 >= f.W3Difference(c, d);
        return !(b && a)
    };
    f.W3Brightness = function(c, d) {
        return Math.abs((299 * c.R + 587 * c.G + 114 * c.B) / 1E3 - (299 * d.R + 587 * d.G + 114 * d.B) / 1E3)
    };
    f.W3Difference = function(c, d) {
        var b = Math.max(c.R, d.R) -
            Math.min(c.R, d.R),
            a = Math.max(c.G, d.G) - Math.min(c.G, d.G);
        d = Math.max(c.B, d.B) - Math.min(c.B, d.B);
        return b + a + d
    };
    f.RGB_W3 = function(c) {
        return "rgb(" + (c.R >> 0) + "," + (c.G >> 0) + "," + (c.B >> 0) + ")"
    };
    f.RGBA_W3 = function(c) {
        var d = isFinite(c.A) ? c.A / 255 : 1;
        return "rgba(" + (c.R >> 0) + "," + (c.G >> 0) + "," + (c.B >> 0) + "," + d + ")"
    };
    f.W3_RGB = function(c) {
        c = c.substr(4, c.length - 5).split(",");
        return {
            R: parseFloat(c[0], 10),
            G: parseFloat(c[1], 10),
            B: parseFloat(c[2], 10)
        }
    };
    f.W3_RGBA = function(c) {
        c = c.substr(5, c.length - 6).split(",");
        return {
            R: parseFloat(c[0],
                10),
            G: parseFloat(c[1], 10),
            B: parseFloat(c[2], 10),
            A: 255 * parseFloat(c[3] || 1)
        }
    };
    f.HSL_W3 = function(c) {
        return "hsl(" + (c.H + .5 >> 0) + "," + (c.S + .5 >> 0) + "%," + (c.L + .5 >> 0) + "%)"
    };
    f.HSLA_W3 = function(c) {
        var d = isFinite(c.A) ? c.A / 255 : 1;
        return "hsla(" + (c.H + .5 >> 0) + "," + (c.S + .5 >> 0) + "%," + (c.L + .5 >> 0) + "%," + d + ")"
    };
    f.W3_HSL = function(c) {
        var d = c.indexOf("(") + 1,
            b = c.indexOf(")");
        c = c.substr(d, b - d).split(",");
        return {
            H: parseFloat(c[0], 10),
            S: parseFloat(c[1], 10),
            L: parseFloat(c[2], 10)
        }
    };
    f.W3_HSLA = function(c) {
        var d = c.indexOf("(") + 1,
            b = c.indexOf(")");
        c = c.substr(d, b - d).split(",");
        return {
            H: parseFloat(c[0], 10),
            S: parseFloat(c[1], 10),
            L: parseFloat(c[2], 10),
            A: 255 * parseFloat(c[3] || 1)
        }
    };
    f.W3_HEX = f.W3_HEX24 = function(c) {
        "#" === c.substr(0, 1) && (c = c.substr(1));
        3 === c.length && (c = c[0] + c[0] + c[1] + c[1] + c[2] + c[2]);
        return parseInt("0x" + c, 16)
    };
    f.W3_HEX32 = function(c) {
        "#" === c.substr(0, 1) && (c = c.substr(1));
        3 === c.length && (c = c[0] + c[0] + c[1] + c[1] + c[2] + c[2]);
        return 6 === c.length ? parseInt("0xFF" + c, 16) : parseInt("0x" + c, 16)
    };
    f.HEX_W3 = f.HEX24_W3 = function(c, d) {
        d || (d = 6);
        c || (c = 0);
        var b,
            a = c.toString(16);
        for (b = a.length; b < d;) a = "0" + a, b++;
        for (b = a.length; b > d;) a = a.substr(1), b--;
        return "#" + a
    };
    f.HEX32_W3 = function(c) {
        return f.HEX_W3(c, 8)
    };
    f.HEX_RGB = f.HEX24_RGB = function(c) {
        return {
            R: c >> 16,
            G: c >> 8 & 255,
            B: c & 255
        }
    };
    f.HEX_RGB = f.HEX24_RGBA = function(c) {
        return {
            R: c >> 16,
            G: c >> 8 & 255,
            B: c & 255,
            A: 255
        }
    };
    f.HEX32_RGBA = function(c) {
        return {
            R: c >>> 16 & 255,
            G: c >>> 8 & 255,
            B: c & 255,
            A: c >>> 24
        }
    };
    f.RGBA_HEX32 = function(c) {
        return (c.A << 24 | c.R << 16 | c.G << 8 | c.B) >>> 0
    };
    f.RGB_HEX24 = f.RGB_HEX = function(c) {
        0 > c.R && (c.R = 0);
        0 > c.G && (c.G = 0);
        0 > c.B &&
            (c.B = 0);
        255 < c.R && (c.R = 255);
        255 < c.G && (c.G = 255);
        255 < c.B && (c.B = 255);
        return c.R << 16 | c.G << 8 | c.B
    };
    f.RGB_CMY = function(c) {
        return {
            C: 1 - c.R / 255,
            M: 1 - c.G / 255,
            Y: 1 - c.B / 255
        }
    };
    f.RGBA_HSLA = f.RGB_HSL = function(c) {
        var d = c.R / 255,
            b = c.G / 255,
            a = c.B / 255,
            e = Math.min(d, b, a),
            f = Math.max(d, b, a),
            g = f - e,
            p, m = (f + e) / 2;
        if (0 === g) e = p = 0;
        else {
            var e = .5 > m ? g / (f + e) : g / (2 - f - e),
                v = ((f - d) / 6 + g / 2) / g,
                r = ((f - b) / 6 + g / 2) / g,
                g = ((f - a) / 6 + g / 2) / g;
            d === f ? p = g - r : b === f ? p = 1 / 3 + v - g : a === f && (p = 2 / 3 + r - v);
            0 > p && (p += 1);
            1 < p && --p
        }
        return {
            H: 360 * p,
            S: 100 * e,
            L: 100 * m,
            A: c.A
        }
    };
    f.RGBA_HSVA =
        f.RGB_HSV = function(c) {
            var d = c.R / 255,
                b = c.G / 255,
                a = c.B / 255,
                e = Math.min(d, b, a),
                f = Math.max(d, b, a),
                g = f - e,
                p;
            if (0 === g) e = p = 0;
            else {
                var e = g / f,
                    m = ((f - d) / 6 + g / 2) / g,
                    v = ((f - b) / 6 + g / 2) / g,
                    g = ((f - a) / 6 + g / 2) / g;
                d === f ? p = g - v : b === f ? p = 1 / 3 + m - g : a === f && (p = 2 / 3 + v - m);
                0 > p && (p += 1);
                1 < p && --p
            }
            return {
                H: 360 * p,
                S: 100 * e,
                V: 100 * f,
                A: c.A
            }
        };
    f.CMY_RGB = function(c) {
        return {
            R: Math.max(0, 255 * (1 - c.C)),
            G: Math.max(0, 255 * (1 - c.M)),
            B: Math.max(0, 255 * (1 - c.Y))
        }
    };
    f.CMY_CMYK = function(c) {
        var d = c.C,
            b = c.M;
        c = c.Y;
        var a = Math.min(c, Math.min(b, Math.min(d, 1))),
            d = Math.round((d -
                a) / (1 - a) * 100),
            b = Math.round((b - a) / (1 - a) * 100);
        c = Math.round((c - a) / (1 - a) * 100);
        a = Math.round(100 * a);
        return {
            C: d,
            M: b,
            Y: c,
            K: a
        }
    };
    f.CMYK_CMY = function(c) {
        return {
            C: c.C * (1 - c.K) + c.K,
            M: c.M * (1 - c.K) + c.K,
            Y: c.Y * (1 - c.K) + c.K
        }
    };
    f.HSLA_RGBA = f.HSL_RGB = function(c) {
        var d = (c.H || 0) / 360,
            b = (c.S || 0) / 100,
            a = (c.L || 0) / 100,
            e, f, g;
        0 === b ? a = b = d = a : (f = .5 > a ? a * (1 + b) : a + b - b * a, e = 2 * a - f, g = d + 1 / 3, 0 > g && (g += 1), 1 < g && --g, a = 1 > 6 * g ? e + 6 * (f - e) * g : 1 > 2 * g ? f : 2 > 3 * g ? e + (f - e) * (2 / 3 - g) * 6 : e, g = d, 0 > g && (g += 1), 1 < g && --g, b = 1 > 6 * g ? e + 6 * (f - e) * g : 1 > 2 * g ? f : 2 > 3 * g ? e + (f - e) * (2 / 3 - g) * 6 : e,
            g = d - 1 / 3, 0 > g && (g += 1), 1 < g && --g, d = 1 > 6 * g ? e + 6 * (f - e) * g : 1 > 2 * g ? f : 2 > 3 * g ? e + (f - e) * (2 / 3 - g) * 6 : e);
        return {
            R: 255 * a,
            G: 255 * b,
            B: 255 * d,
            A: c.A
        }
    };
    f.HSVA_RGBA = f.HSV_RGB = function(c) {
        var d = c.H / 360,
            b = c.S / 100,
            a = c.V / 100,
            e, f, g, p, m;
        if (0 === b) e = f = g = Math.round(255 * a);
        else switch (1 <= d && (d = 0), d *= 6, p = d - Math.floor(d), m = Math.round(255 * a * (1 - b)), g = Math.round(255 * a * (1 - b * p)), b = Math.round(255 * a * (1 - b * (1 - p))), a = Math.round(255 * a), Math.floor(d)) {
            case 0:
                e = a;
                f = b;
                g = m;
                break;
            case 1:
                e = g;
                f = a;
                g = m;
                break;
            case 2:
                e = m;
                f = a;
                g = b;
                break;
            case 3:
                e = m;
                f = g;
                g = a;
                break;
            case 4:
                e = b;
                f = m;
                g = a;
                break;
            case 5:
                e = a, f = m
        }
        return {
            R: e,
            G: f,
            B: g,
            A: c.A
        }
    };
    var e = sketch.color.webcolors = {
        aliceblue: "f0f8ff",
        antiquewhite: "faebd7",
        aqua: "00ffff",
        aquamarine: "7fffd4",
        azure: "f0ffff",
        beige: "f5f5dc",
        bisque: "ffe4c4",
        black: "000000",
        blanchedalmond: "ffebcd",
        blue: "0000ff",
        blueviolet: "8a2be2",
        brown: "a52a2a",
        burlywood: "deb887",
        cadetblue: "5f9ea0",
        chartreuse: "7fff00",
        chocolate: "d2691e",
        coral: "ff7f50",
        cornflowerblue: "6495ed",
        cornsilk: "fff8dc",
        crimson: "dc143c",
        cyan: "00ffff",
        darkblue: "00008b",
        darkcyan: "008b8b",
        darkgoldenrod: "b8860b",
        darkgray: "a9a9a9",
        darkgreen: "006400",
        darkgrey: "a9a9a9",
        darkkhaki: "bdb76b",
        darkmagenta: "8b008b",
        darkolivegreen: "556b2f",
        darkorange: "ff8c00",
        darkorchid: "9932cc",
        darkred: "8b0000",
        darksalmon: "e9967a",
        darkseagreen: "8fbc8f",
        darkslateblue: "483d8b",
        darkslategray: "2f4f4f",
        darkslategrey: "2f4f4f",
        darkturquoise: "00ced1",
        darkviolet: "9400d3",
        deeppink: "ff1493",
        deepskyblue: "00bfff",
        dimgray: "696969",
        dimgrey: "696969",
        dodgerblue: "1e90ff",
        firebrick: "b22222",
        floralwhite: "fffaf0",
        forestgreen: "228b22",
        fuchsia: "ff00ff",
        fuscia: "ff00ff",
        gainsboro: "dcdcdc",
        ghostwhite: "f8f8ff",
        gold: "ffd700",
        goldenrod: "daa520",
        gray: "808080",
        green: "008000",
        greenyellow: "adff2f",
        grey: "808080",
        honeydew: "f0fff0",
        hotpink: "ff69b4",
        indianred: "cd5c5c",
        indigo: "4b0082",
        ivory: "fffff0",
        khaki: "f0e68c",
        lavender: "e6e6fa",
        lavenderblush: "fff0f5",
        lawngreen: "7cfc00",
        lemonchiffon: "fffacd",
        lightblue: "add8e6",
        lightcoral: "f08080",
        lightcyan: "e0ffff",
        lightgoldenrodyellow: "fafad2",
        lightgray: "d3d3d3",
        lightgreen: "90ee90",
        lightgrey: "d3d3d3",
        lightpink: "ffb6c1",
        lightsalmon: "ffa07a",
        lightseagreen: "20b2aa",
        lightskyblue: "87cefa",
        lightslategray: "778899",
        lightslategrey: "778899",
        lightsteelblue: "b0c4de",
        lightyellow: "ffffe0",
        lime: "00ff00",
        limegreen: "32cd32",
        linen: "faf0e6",
        magenta: "ff00ff",
        maroon: "800000",
        mediumaquamarine: "66cdaa",
        mediumblue: "0000cd",
        mediumorchid: "ba55d3",
        mediumpurple: "9370db",
        mediumseagreen: "3cb371",
        mediumslateblue: "7b68ee",
        mediumspringgreen: "00fa9a",
        mediumturquoise: "48d1cc",
        mediumvioletred: "c71585",
        midnightblue: "191970",
        mintcream: "f5fffa",
        mistyrose: "ffe4e1",
        moccasin: "ffe4b5",
        navajowhite: "ffdead",
        navy: "000080",
        oldlace: "fdf5e6",
        olive: "808000",
        olivedrab: "6b8e23",
        orange: "ffa500",
        orangered: "ff4500",
        orchid: "da70d6",
        palegoldenrod: "eee8aa",
        palegreen: "98fb98",
        paleturquoise: "afeeee",
        palevioletred: "db7093",
        papayawhip: "ffefd5",
        peachpuff: "ffdab9",
        peru: "cd853f",
        pink: "ffc0cb",
        plum: "dda0dd",
        powderblue: "b0e0e6",
        purple: "800080",
        red: "ff0000",
        rosybrown: "bc8f8f",
        royalblue: "4169e1",
        saddlebrown: "8b4513",
        salmon: "fa8072",
        sandybrown: "f4a460",
        seagreen: "2e8b57",
        seashell: "fff5ee",
        sienna: "a0522d",
        silver: "c0c0c0",
        skyblue: "87ceeb",
        slateblue: "6a5acd",
        slategray: "708090",
        slategrey: "708090",
        snow: "fffafa",
        springgreen: "00ff7f",
        steelblue: "4682b4",
        tan: "d2b48c",
        teal: "008080",
        thistle: "d8bfd8",
        tomato: "ff6347",
        turquoise: "40e0d0",
        violet: "ee82ee",
        wheat: "f5deb3",
        white: "ffffff",
        whitesmoke: "f5f5f5",
        yellow: "ffff00",
        yellowgreen: "9acd32"
    };
    "object" === typeof module && module.exports && (module.exports.color = sketch.color)
})();
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.StyleGCO = function(g, f) {
        var q = g.util;
        f.getComposite = function(b, a) {
            b = e(b);
            return a && l[b] ? "source-over" : b
        };
        var l = q.arrayToObject("source-in source-out source-atop destination-over destination-in destination-out destination-atop copy xor".split(" "));
        f.getCompositeReadable = function(b) {
            b = "string" === typeof b ? b || "normal" : "normal";
            return d[b] || b
        };
        var d = {
                "source-over": "normal",
                "destination-out": "erase"
            },
            e = f.getCompositeNative = function(b) {
                b = "string" === typeof b ? b ||
                    "source-over" : "source-over";
                return c[b] || b
            },
            c = {
                normal: "source-over",
                disco: "lighter",
                erase: "destination-out"
            };
        f.getBlendOptions = function() {
            return "normal <br> darken multiply color-burn <br> lighten screen color-dodge <br> overlay soft-light hard-light <br> difference exclusion disco <br> hue saturation color luminosity <br> erase source-atop destination-over".split(" ")
        };
        f.isNormalGCO = q.arrayToObject(["normal", "source-over"]);
        f.isGCO = function(b) {
            return b && (b = b.selected || b) ? h[b] || !1 : !1
        };
        var h = q.arrayToObject("normal darken multiply color-burn lighten screen color-dodge overlay soft-light hard-light difference exclusion hue saturation color luminosity erase disco".split(" ").concat("source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter copy xor".split(" ")))
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.StyleGradient = function(g, f) {
        var q = g.util,
            l = g.vector.Point;
        f.createGradient = function(d, e, c, h, b, a, g, u, x) {
            d = d || f.__ctx;
            u = u || {};
            if (isFinite(c + b + h + a)) {
                if ("radial" === e) e = (c + b) / 2, x = (h + a) / 2, h = Math.sqrt(Math.pow(b - c, 2) + Math.pow(a - h, 2)) / 3, d = d.createRadialGradient(e, x, 0, e, x, h);
                else {
                    e = u.angle;
                    if (isFinite(e) && (x && (0 > x.x && (e = 180 - e), 0 > x.y && (e = 360 - e)), 235 !== e)) {
                        x = l(c, h);
                        u = l(c, a);
                        c = l(b, a);
                        h = l(b, h);
                        a = e % 90 - 45;
                        var p = e % 180 - 90;
                        b = Math.abs(a) / 90;
                        0 >= a * p ? (a = l.atTimeOnLine(u, c, b),
                            h = l.atTimeOnLine(h, x, b)) : (a = l.atTimeOnLine(x, u, b), h = l.atTimeOnLine(c, h, b));
                        h = l.distance(a, h) / 2;
                        b = l.atTimeOnLine(x, c, .5);
                        e *= q.DEG_RAD;
                        x = l.atRadianDistance(b, e, -h);
                        u = l.atRadianDistance(b, e, +h);
                        c = x.x || 0;
                        h = x.y || 0;
                        b = u.x || 0;
                        a = u.y || 0
                    }
                    c === b && (b += .1);
                    h === a && (a += .1);
                    d = d.createLinearGradient(c, h, b, a)
                }
                for (e = 0; e < g.length; e += 2) x = g[e], (h = g[e + 1]) && isFinite(x) && d.addColorStop(x, h);
                return d
            }
            return "#000"
        };
        f.toCSSGradient = function(d) {
            var e = d.dna || "",
                c = d.stops,
                h = d.type || "linear";
            d = d.angle;
            d = d === +d ? d + 90 + "deg" : d || "0deg";
            c = c || f.getGradientStops({
                dna: e,
                asCSSArray: !0
            });
            return "radial" === h ? "radial-gradient(circle closest-side at 50% 50%," + c + ")" : "linear-gradient(" + d + "," + c + ")"
        };
        f.toCSSColorStops = function(d) {
            for (var e = [], c = 0; c < d.length; c += 2) e.push(d[c + 1] + " " + 100 * d[c] + "%");
            return e
        };
        f.parseCSSGradient = function(d, e) {
            var c = g.color.CSSLinearGradient.parse(d);
            if (c) {
                for (var h = c.stops, b = h.length - 1, a = [], f = 0; f <= b; f++) {
                    var u = h[f],
                        x = u.position;
                    x ? (-1 !== x.indexOf("%") && (x = parseFloat(x.replace("%", "")) / 100), a.push(isFinite(x) ? x : f / b)) :
                        a.push(f / b);
                    e ? a.push((new g.colorspace(u.color)).toHEX32String().substr(1)) : a.push(u.color)
                }
                if (e) return a.join(",");
                c.stops = a;
                return c
            }
            return ""
        };
        f.getGradientStops = function(d) {
            var e = d.asCSSArray || !1,
                c = d.asFlatArray || !1,
                h = d.asHex32 || !1,
                b = [];
            d = (d.dna || "").split(",");
            var a = d.length;
            if (2 > a) return b;
            for (var f = 0; f < a; f += 2) {
                var g = parseFloat(d[f]),
                    x = d[f + 1],
                    p = x.length;
                8 !== p && (3 === p ? x = "ff" + x[0] + x[0] + x[1] + x[1] + x[2] + x[2] : 6 === p && (x = "ff" + x));
                if (h) x = parseInt("0x" + x, 16);
                else {
                    var m = x.substr(0, 2);
                    if ("ff" === m) x = "#" +
                        x.substr(2);
                    else var p = parseInt(x.substr(2, 2), 16),
                        v = parseInt(x.substr(4, 2), 16),
                        x = parseInt(x.substr(6, 2), 16),
                        m = parseInt(m, 16) / 255,
                        x = "rgba(" + p + "," + v + "," + x + "," + m + ")"
                }
                c ? (b.push(g), b.push(x)) : e ? b.push(x + " " + 100 * g + "%") : b.push({
                    offset: g,
                    color: x
                })
            }
            return b
        };
        f.getColorStopsHelper = function(d) {
            var e = d.dna || "",
                c = d.asCSSArray || !1,
                h = d.asSVGArray || !1,
                b = d.asFlatArray || !1,
                a = d.asHex32 || !1;
            return d.length || d.noise || d.reflect ? f.getColorStops({
                dna: e,
                stops: d.stops,
                asHex32: a,
                asFlatArray: b,
                asCSSArray: c,
                asSVGArray: h,
                seed: d.seed ||
                    1,
                blend: d.blend || (d.noise ? "Luminosity" : "Normal"),
                reflect: d.reflect || !1,
                length: d.length || 500,
                resolution: 1,
                H: d.noise ? 10 : 0,
                S: d.noise ? 20 : 0,
                L: d.noise ? 10 : 0
            }) : f.getGradientStops({
                dna: e,
                asHex32: a,
                asFlatArray: b,
                asCSSArray: c,
                asSVGArray: h
            })
        };
        f.getColorStops = function(d) {
            function e(a, b) {
                t ? B.push({
                    color: a,
                    offset: b
                }) : y ? B.push(a + " " + 100 * b + "%") : (B.push(b), B.push(a))
            }
            var c = g.color.space,
                h = q ? q.Random(d.seed || 1) : Math.random,
                b = d.dna || "",
                a = d.stops,
                f = d.blend || "Normal",
                u = d.reflect || !1,
                x = d.resolution || 1,
                p = d.length || 1,
                m = d.H ||
                0,
                v = d.S || 0,
                r = d.L || 0,
                y = d.asCSSArray || !1,
                t = d.asSVGArray || !1;
            if (g.color.blend) {
                d = g.color.blend.useAlphaBlend[f];
                var l = g.color.blend[f]
            } else d = !1, l = function(a, b) {
                return a * b / 255
            };
            a ? b = a : "string" === typeof b && (b = b.split(","));
            for (var a = [], z = 0; z < b.length; z += 2) a.push({
                color: b[z + 1],
                offset: parseFloat(b[z], 10) / (u ? 2 : 1)
            });
            if (u)
                for (b = b.slice(0).reverse(), z = 0; z < b.length; z += 2) a.push({
                    color: b[z],
                    offset: .5 - parseFloat(b[z + 1], 10) / 2 + .5
                });
            var b = 0,
                z = a[b].color,
                u = "string" === typeof z ? "W3>HEX32>RGBA" : "HEX32>RGBA",
                z = c(z, u),
                C =
                a[b].offset,
                A = a[b + 1];
            if (!A) return a;
            for (var k = c(A.color, u), A = a[b + 1].offset, B = [], D = 0; D <= p; D += x) {
                var F;
                F = D / p;
                F > A && (b++, a[b] && (z = k, C = A, a[b + 1] && (k = c(a[b + 1].color, u), A = a[b + 1].offset)));
                F = (F - C) / (A - C);
                Infinity === F && (F = 0);
                if ("Normal" === f && 0 === m && 0 === v && 0 === r) F = c.RGB_W3({
                    R: z.R * (1 - F) + k.R * F,
                    G: z.G * (1 - F) + k.G * F,
                    B: z.B * (1 - F) + k.B * F
                });
                else {
                    var G = c.RGB_HSL({
                        R: z.R * (1 - F) + k.R * F,
                        G: z.G * (1 - F) + k.G * F,
                        B: z.B * (1 - F) + k.B * F
                    });
                    F = c.HSLA_RGBA({
                        H: (G.H + h.toDouble() * m + 360) % 360,
                        S: Math.min(100, Math.max(0, G.S - h.toDouble() * v)),
                        L: Math.min(100,
                            Math.max(0, G.L - h.toDouble() * r)),
                        A: 255
                    });
                    G = c.HSLA_RGBA({
                        H: (G.H + h.toDouble() * m + 360) % 360,
                        S: Math.min(100, Math.max(0, G.S + h.toDouble() * v)),
                        L: Math.min(100, Math.max(0, G.L + h.toDouble() * r)),
                        A: 255
                    });
                    d ? (F = l(F, G), F = c(F, "HEX32>RGBA>W3")) : F = c.RGBA_W3({
                        R: l(F.R, G.R),
                        G: l(F.G, G.G),
                        B: l(F.B, G.B),
                        A: l(F.A, G.A)
                    })
                }
                e(F, D / p)
            }
            return B
        }
    }
})(sketch);
RegExp.create = function(k, g, f) {
    for (var q in g) {
        var l = g[q],
            d = RegExp("{{" + q + "}}", "gi");
        l.source && (l = l.source.replace(/^\^|\$$/g, ""));
        k = k.replace(RegExp("\\(" + d.source + "\\)", "gi"), "(" + l + ")");
        k = k.replace(d, "(?:" + l + ")")
    }
    return RegExp(k, f)
};
(function(k) {
    k.color = k.color || {};
    var g = k.color.CSSLinearGradient = function(f) {
        this.direction = f.direction;
        this.stops = f.stops;
        this.fromString = f.fromString
    };
    g.parse = function(f) {
        if ("string" !== typeof f) return null;
        f = f.replace(/-(moz|ms|o|webkit)-/, "");
        var q = f.match(g.regex.css);
        if (!q) return null;
        var l = q[1] || "top",
            q = q[2].match(g.regex.colorStop),
            d = parseFloat(l);
        if (!isNaN(d)) switch ((d % 360 + 360) % 360) {
            case 0:
                l = "left";
                break;
            case 90:
                l = "bottom";
                break;
            case 180:
                l = "right";
                break;
            case 240:
                l = "top"
        }
        for (d = 0; d < q.length; d++) {
            var e =
                q[d],
                c = e.match(g.regex.color)[0],
                e = (e = e.substr(c.length).match(g.regex.length)) && e[0];
            q[d] = {
                color: c,
                position: e
            }
        }
        return new g({
            direction: l.replace("to ", ""),
            stops: q,
            fromString: f
        })
    };
    g.regex = {};
    g.regex.number = /^-?[0-9]*\.?[0-9]+$/;
    g.regex.keyword = /^(?:to\s|)(?:top\s+|bottom\s+)?(?:right|left)|(?:to\s|)(?:right\s+|left\s+)?(?:top|bottom)$/;
    g.regex.blah = /circle closest-side at 50% 50%/;
    g.regex.direction = RegExp.create("^(?:{{keyword}}|{{blah}}|{{number}}deg|0)$", {
        blah: g.regex.blah,
        keyword: g.regex.keyword,
        number: g.regex.number
    });
    g.regex.color = RegExp.create("(?:{{keyword}}|{{func}}|{{hex}})", {
        keyword: /^(?:red|tan|grey|gray|lime|navy|blue|teal|aqua|cyan|gold|peru|pink|plum|snow|[a-z]{5,20})$/,
        func: RegExp.create("^(?:rgb|hsl)a?\\((?:\\s*{{number}}%?\\s*,?\\s*){3,4}\\)$", {
            number: g.regex.number
        }),
        hex: /^#(?:[0-9a-f]{1,2}){3}$/i
    }, "i");
    g.regex.percentage = RegExp.create("^(?:{{number}}%|0)$", {
        number: g.regex.number
    });
    g.regex.length = RegExp.create("{{number}}{{unit}}|0", {
        number: g.regex.number,
        unit: /%|px|mm|cm|in|em|rem|en|ex|ch|vm|vw|vh/
    });
    g.regex.colorStop = RegExp.create("{{color}}\\s*{{length}}?", {
        color: g.regex.color,
        length: g.regex.length
    }, "gi");
    g.regex.type = /linear-gradient|radial-gradient/;
    g.regex.css = RegExp.create("^{{type}}\\(\\s*(?:({{direction}})\\s*,)?\\s*({{colorstop}}\\s*(?:,\\s*{{colorstop}}\\s*)+)\\)$", {
        type: g.regex.type,
        direction: g.regex.direction,
        colorStop: g.regex.colorStop
    }, "i")
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.StylePalette = function(g, f) {
        var q = g.util,
            l = g.color.space,
            d = g.feature;
        f.add = function(d, c, h) {
            "string" === typeof d && (d = [d]);
            var b = f[c + "Hash"],
                a = f[c + "Official"],
                g = f[c];
            if (d && d.length)
                for (var u = 0; u < d.length; u++) {
                    var x = d[u];
                    if (x) {
                        var p = x.dna || x,
                            m = f.hashDNA(p);
                        b[m] || (b[m] = !0, x.dna && (a[m] = !0), "gradient" === c && -1 !== p.indexOf("gradient") && (p = f.parseCSSGradient(p, !0)), h ? g.unshift(p) : g.push(p))
                    }
                }
        };
        f.addFromBlob = function(e, c) {
            g.convert.textFromBlob(e, function(h) {
                h.startsWith("GIMP Gradient") ?
                    f.add(Color.open.GGR(h).join(","), "gradient", !0) : h.startsWith("GIMP Palette") ? f.add(Color.open.GPL(h), "color", !0) : d.debug && console.log("un-handled method", e);
                c && c()
            })
        };
        f.loadDefault = function() {
            function d(c, h, b) {
                f[h] = g.lib && g.lib[h] ? g.lib[h]() : [f[b]];
                !f[c] && f[h] && (f.reset(c), f.add(f[h], c))
            }
            return function() {
                d("color", "defaultColors", "defaultColor");
                d("gradient", "defaultGradients", "defaultGradient");
                d("pattern", "defaultPatterns", "defaultPattern")
            }
        }();
        f.reset = function(d) {
            d ? (f[d + "Ctx"] = {}, f[d + "Official"] = {}, f[d + "Hash"] = {}, f[d] = []) : (f.gradientCtx = {}, f.gradientOfficial = {}, f.gradientHash = {}, f.gradient = [], f.colorCtx = {}, f.colorOfficial = {}, f.colorHash = {}, f.color = [], f.patternCtx = {}, f.patternOfficial = {}, f.patternHash = {}, f.pattern = [])
        };
        f.hashDNA = function(d) {
            if (d && d.toLowerCase) return "#" === d[0] && (d = l.W3_HEX(d).toString()), d = q.hashFast(d), d = Math.abs(d).toString(16).substr(0, 6), q.string.rpad(d, "0", 6)
        };
        f.generateColorBlock = function() {
            var d = {
                    Cyan: [12, 6, 9.7],
                    Azure: [33, 6.9, 9.2],
                    Indigo: [62, 9, 8.6],
                    Purple: [92, 6, 9],
                    Pink: [150, 8, 9],
                    Red: [180, 10, 9],
                    Orange: [196, 7.7, 9.7],
                    Orange3: [224, 6.2, 10],
                    Yellow: [234, 4.7, 11],
                    Green: [261, 11, 9.5]
                },
                c = 0,
                h;
            for (h in d) c++;
            for (var b = 0, a, f = [], g = 1; 8 >= g; g++)
                for (h in d) {
                    if (1 === g) a = l.HSL_RGB({
                        H: 0,
                        S: 0,
                        L: 100 - b / (c - 1) * 100
                    }), b++;
                    else {
                        n = g - 1;
                        a = d[h];
                        var x = Math.min(1, n / a[1]),
                            p = Math.min(1, 1 - n / a[2]);
                        a = l.HSI_RGB({
                            H: (a[0] + 180) % 360,
                            S: 150 * x,
                            I: 250 * p
                        })
                    }
                    f.push(l(a, "RGB>HEX24>W3"))
                }
            return f
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Style = function(g) {
        function f(a, c) {
            a = q[a] = function(a, d) {
                a = a || p[c].value;
                if ("string" === typeof a) {
                    var m = q.parseStyle(a);
                    if (m) var h = m.type,
                        m = m.dna;
                    else d = d || {}, h = d.type || "color", m = d[d.type] || "#000";
                    a = {};
                    a.type = h;
                    a[h] = m
                }
                this.method = c;
                this.opacity = a.opacity || 1;
                this.type = a.type || "color";
                this.mode = a.mode || "linear";
                this.noise = a.noise || !1;
                this.angle = a.angle || 0;
                d = p[c] || p.fill;
                this.color = a.color || d.color;
                this.gradient = a.gradient || d.gradient;
                this.pattern = a.pattern ||
                    d.pattern;
                "stroke" === c ? (this.enabled = isFinite(a.enabled) ? a.enabled : isFinite(a.lineWidth), this.dashArray = Array.isArray(a.dashArray) ? a.dashArray : b.dashArray, this.dashOffset = isFinite(a.dashOffset) ? a.dashOffset : b.dashOffset, this.lineCap = a.lineCap || b.lineCap, this.lineJoin = a.lineJoin || b.lineJoin, this.lineWidth = isFinite(a.lineWidth) ? a.lineWidth : b.lineWidth, this.miterLimit = isFinite(a.miterLimit) ? a.miterLimit : b.miterLimit) : "fill" === c ? this.enabled = isFinite(a.enabled) ? a.enabled : !0 : "border" === c ? (this.enabled =
                    isFinite(a.enabled) ? a.enabled : !1, this.lineWidth = isFinite(a.lineWidth) ? a.lineWidth : b.lineWidth) : this.enabled = isFinite(a.enabled) ? a.enabled : !1
            };
            a.type = "style";
            a.method = c;
            q[c] = new a
        }
        var q = {},
            l = g.dom,
            d = g.color.space,
            e = g.feature,
            c = g.loc,
            h = g.util;
        q.types = ["color", "gradient", "pattern"];
        q.methods = {
            background: "Background",
            border: "Border",
            fill: "Fill",
            stroke: "Stroke"
        };
        q.create = function(a, b) {
            a = a || {};
            b = b || a.method || "fill";
            var c = q.methods[b];
            if (c) return new q[c](a);
            console.error(arguments)
        };
        q.copy = function(a, b) {
            return q.copyInto(a, {}, b)
        };
        q.copyInto = function(c, d, p) {
            p = p || {};
            var h = p.compress,
                e = p.paintType;
            p = p.exclude || {};
            if ((!h || !1 !== c.enabled && 0 !== c.lineWidth) && d) {
                var e = e || c.type || d.type,
                    f;
                for (f in c)
                    if (!0 !== p[f]) {
                        var g = w[f];
                        if (g) {
                            if (h)
                                if ("method" === f) continue;
                                else if (a[f] && f !== e) continue;
                            else if (b[f] === c[f]) continue;
                            d[f] = "array" === g ? c[f].slice() : c[f]
                        }
                    }
                return d
            }
        };
        q.copyStyles = function(a, b, c) {
            for (var d in q.methods) a[d] && b[d] && q.copyInto(a[d], b[d], {
                exclude: c
            });
            return b
        };
        q.equals = function(a, b) {
            for (var c in a) {
                var d = w[c];
                if (d)
                    if ("array" ===
                        d) {
                        if (String(a[c]) !== String(b[c])) return !1
                    } else if (a[c] !== b[c]) return !1
            }
            return !0
        };
        var b = {
                dashArray: "none",
                dashOffset: 0,
                lineCap: "butt",
                lineJoin: "miter",
                lineWidth: 1,
                miterLimit: 4,
                angle: 0,
                mode: "linear",
                noise: !1,
                opacity: 1
            },
            a = {
                color: "string",
                gradient: "string",
                pattern: "string"
            },
            w = {
                color: "string",
                gradient: "string",
                pattern: "string",
                dashArray: "array",
                dashOffset: "float",
                lineCap: "string",
                lineJoin: "string",
                lineWidth: "float",
                miterLimit: "float",
                angle: "number",
                mode: "string",
                noise: "boolean",
                opacity: "float",
                type: "string",
                method: "string",
                enabled: "boolean"
            };
        q.setObjectFromGlobal = function(a) {
            q.copyStyles(q, a, {
                enabled: !0
            })
        };
        q.setGlobalFromObject = function(a) {
            q.copyStyles(a, q)
        };
        var u = q.__ctx = l.Canvas(1, 1).ctx;
        q.loadPaint = function(a, b, c) {
            "pattern" === a.type ? q.loadPattern(a[a.type], b, c) : b && b(a)
        };
        q.loadPattern = function(a, b, d, p) {
            if (a)
                if (a instanceof CanvasPattern) b && b(a);
                else {
                    var f = q.patternCtx[a];
                    f ? b && b(f) : h.loadImage({
                        src: c.getMediaUrl(a),
                        onprogress: p,
                        onsuccess: function() {
                            var c = u.createPattern(this, "repeat");
                            c.width = this.width;
                            c.height = this.height;
                            q.patternCtx[a] = c;
                            b && b(c)
                        },
                        onerror: function() {
                            d && d();
                            e.debug && console.warn("missing pattern", a)
                        }
                    })
                }
            else console.error("Invalid DNA")
        };
        q.hexFromColor = function(a) {
            "string" === typeof a ? "hsla" === a.substr(0, 4) ? a = d(a, "W3>HSLA>RGBA>HEX24>W3") : "rgba" === a.substr(0, 4) ? a = d(a, "W3>RGBA>HEX24>W3") : "rgb" === a.substr(0, 3) ? a = d(a, "W3>RGB>HEX24>W3") : g.color.webcolors[a] && (a = g.color.webcolors[a]) : isFinite(a.R) ? a = d(a, "RGB>HEX24>W3") : isFinite(a.H) && (a = d(a, "HSLA>RGBA>HEX24>W3"));
            return a
        };
        var x = {
            color: function(a) {
                return a.startsWith("#") ||
                    a.startsWith("hsl") || a.startsWith("rgb") || g.color.webcolors[a]
            },
            pattern: function(a) {
                return a.startsWith("#asset") || a.startsWith("data:") || a.startsWith("blob:") || a.startsWith("filesystem:") || a.startsWith("http") || a.startsWith("./")
            },
            gradient: function(a) {
                return -1 !== a.indexOf(",") && isFinite(parseInt(a[0])) ? !0 : -1 !== a.indexOf("linear-gradient(") ? !0 : -1 !== a.indexOf("radial-gradient(") ? !0 : !1
            }
        };
        q.validate = function(a, b) {
            var c = typeof a;
            if ("string" === c) {
                c = a.toLowerCase();
                if (b) return x[b](c);
                if (x.pattern(c)) return "pattern";
                if (x.color(c)) return "color";
                if (x.gradient(c)) return "gradient"
            } else if ("object" === c && (a = a[a.type])) return q.validate(a);
            return !1
        };
        q.parseStyle = function(a) {
            if ("none" === a) return {
                dna: "none",
                type: "gradient"
            };
            if (x.pattern(a)) return {
                dna: a,
                type: "pattern"
            };
            if (x.color(a)) return {
                dna: a,
                type: "color"
            };
            if (x.gradient(a))
                if (-1 !== a.indexOf("linear-gradient")) {
                    if (a = q.parseCSSGradient(a, !0)) return {
                        dna: a,
                        type: "gradient"
                    }
                } else return {
                    dna: a,
                    type: "gradient"
                }
        };
        q.renderSwatch = function(a, b, c, d, p) {
            var h = b.type,
                e = b[h],
                f = b.opacity ||
                1;
            p = p || 1;
            c = (c || 24) * p;
            d = (d || 24) * p;
            a.width = c;
            a.height = d;
            if ("CANVAS" === a.nodeName) {
                var g = a.ctx || a.getContext("2d");
                q.loadPaint(b, function() {
                    g.globalAlpha = f;
                    g.fillStyle = q.toContext2D(b, c, d);
                    g.fillRect(0, 0, c, d)
                })
            } else switch (h) {
                case "color":
                    a.style.opacity = f;
                    a.style.background = e;
                    break;
                case "gradient":
                    a.style.opacity = f;
                    q.toCSSBG({
                        gradient: e,
                        type: "gradient",
                        angle: 135
                    }, a);
                    break;
                case "pattern":
                    e.css && (a.style.opacity = f, a.style.background = e.css)
            }
        };
        q.toSVG = function(a) {
            var b = g.vector.SVG;
            switch (a.type) {
                case "color":
                    return a.color;
                case "gradient":
                    var c = a.gradient,
                        d = a.noise;
                    return b.Gradient({
                        type: a.mode + "Gradient",
                        id: "dna" + q.hashDNA(c),
                        stops: q.getColorStopsHelper({
                            asSVGArray: !0,
                            noise: d,
                            dna: c
                        })
                    });
                case "pattern":
                    return c = a.pattern, b.Pattern({
                        id: "dna" + q.hashDNA(c),
                        pattern: q.patternCtx[c]
                    })
            }
        };
        q.toCSS = function(a) {
            var b = a.type,
                d = a[b];
            switch (b) {
                case "color":
                    return d;
                case "gradient":
                    return q.toCSSGradient({
                        type: a.mode,
                        angle: -a.angle - 90,
                        stops: q.getColorStopsHelper({
                            asCSSArray: !0,
                            dna: d,
                            noise: a.noise
                        })
                    });
                case "pattern":
                    return "url(" + c.getMediaUrl(d) +
                        ")"
            }
        };
        q.toCSSBG = function(a, b) {
            var c = q.toCSS(a),
                d = a.type,
                p = a[d];
            if (b) "none" === p ? b.style.background = "none" : "gradient" === d ? (b.style.background = c, b.style.webkitBackground = c, b.style.MozBackground = c) : b.style.background = c;
            else return "none" === p ? "background: none" : "gradient" === d ? "\t\t\t\t\tbackground: " + c + ";\t\t\t\t\tbackground: -webkit-" + c + ";\t\t\t\t\tbackground: -moz-" + c + ";" : "background: " + c
        };
        q.toContext2D = function(a, b, c) {
            var d = a.type,
                p = a[d];
            switch (d) {
                case "color":
                    return p;
                case "gradient":
                    return q.createGradient(u,
                        a.mode || "linear", 0, 0, b, c, q.getColorStopsHelper({
                            asFlatArray: !0,
                            dna: p,
                            noise: a.noise
                        }), a);
                case "pattern":
                    if (p instanceof CanvasPattern) return p;
                    if (q.patternCtx[p]) return q.patternCtx[p];
                    console.warn("pattern not loaded.")
            }
        };
        l = g.module;
        l.StyleGCO && new l.StyleGCO(g, q);
        l.StyleGradient && new l.StyleGradient(g, q);
        l.StylePalette && new l.StylePalette(g, q);
        q.loadDefault && q.loadDefault();
        var p = function() {
            function a(b) {
                function c(a, d) {
                    if (e) {
                        var m = e.style[a];
                        m[b] && (m = m[b]);
                        if (q.validate(m, a)) return m
                    }
                    return d
                }
                return {
                    color: c("color",
                        "#000"),
                    gradient: c("gradient", "0.169429711,fff91d8a,0.583,ff7c0ebd,1,ff0000f0"),
                    pattern: c("pattern", "data:image/gif;base64,R0lGODlhDgAOAID/ANDu/FOdvCwAAAAADgAOAAACHYwDh5fazqKcj05rar5q+w961diVi9g9jaaGkFEAADs=")
                }
            }
            var b = {};
            b.fill = a("fill");
            b.background = a("background");
            b.border = a("border");
            b.stroke = a("stroke");
            e ? (b.fill.value = b.fill[e.style.defaultFillType], b.background.value = b.background[e.style.defaultBackgroundType], b.border.value = b.border[e.style.defaultBorderType], b.stroke.value = b.stroke[e.style.defaultStrokeType]) :
                (b.fill.value = b.fill.color, b.background.value = b.background.color, b.border.value = b.border.color, b.stroke.value = b.stroke.color);
            return b
        }();
        h.each(q.methods, function(a, b) {
            f(a, b)
        });
        q.composite = "normal";
        return g.style = q
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Library = function(g, f) {
        function q(a) {
            var c = a.template.clip,
                d = new b.BBox(c.path),
                h = d.x2 - d.x1,
                d = d.y2 - d.y1,
                p = a.getOffsetHeight ? a.getOffsetHeight() : 0,
                m = a.getViewport(),
                m = Math.min(m.width / h, (m.height - p) / d) - .05;
            a.setClip(c, m);
            a.setSize(h * m, d * m);
            a.orient.setCenter();
            a.orient.setPan(0, p / 2);
            a.orient.decompose();
            a.baseWidth = h * m;
            a.baseHeight = d * m
        }
        var l = g.dom,
            d = g.lib,
            e = g.loc,
            c = f.toolkit,
            h = g.util,
            b = g.vector;
        d.setData = function(a, b) {
            if (b.data || b.official) {
                var c = d[a],
                    e = {};
                b.reset && (c.tree = b.data ? {} : c.defaultTree || {});
                h.Queue({
                    items: b,
                    oncomplete: function() {
                        for (var b in c.tree) e[b] = e[b] || c.tree[b];
                        c.tree = e;
                        d.init(a);
                        g.ui.configurePane(null, !0)
                    },
                    next: function(a, b, d) {
                        if ("reset" === b) return this.next();
                        if ("defaultValue" === b) return c.defaultItem = a, this.next();
                        d = a.data ? a.data : a;
                        for (var r = 0; r < d.length; r++) {
                            var y = d[r];
                            "string" === typeof y && (y = {
                                filepath: y,
                                name: h.string.filename(y),
                                category: a.category || "Unknown"
                            });
                            void 0 === y.name && (y.name = h.string.filename(y.filepath));
                            void 0 ===
                                y.id && (y.id = h.string.toID(y.name) + Date.now());
                            var t = y.category || a.category || "Unknown";
                            (e[t] || (e[t] = [])).push(y)
                        }
                        d = f.scene.copyRules(a);
                        c.meta[a.category || b] = d;
                        this.next()
                    }
                })
            }
        };
        d.setClipartDefaultValue = function(a) {
            var b = d.clipart;
            if (a = a || b.defaultItem) a = a.startsWith("./") ? a : b.path + "/" + a, delete c.media.device.render, c.media.device.src = a, f.toolkitConfig.clipart.src = a
        };
        d.setClipartData = function(a) {
            a && (d.setData("clipart", a), d.setClipartDefaultValue(a.defaultValue))
        };
        d.setStampDefaultValue = function(a) {
            var b =
                d.clipart;
            a = a || b.defaultItem;
            f.toolkitConfig.stamp.src = a
        };
        d.setStampData = function(a) {
            a && (d.setData("stamp", a), d.setStampDefaultValue(a.defaultValue))
        };
        d.setTextData = function(a) {
            a && (d.setData("text", a), a.defaultValue && (f.toolkitConfig.text.fontFamily = a.defaultValue))
        };
        d.setPaletteData = function(a) {
            function b(c) {
                var d = a[c];
                if (d) {
                    var p = d.official,
                        m = d.data;
                    if (!1 === d.enabled) {
                        g.feature.style[c] = !1;
                        var h = l.$("." + c + "-indicator");
                        h && l.style(h.parentNode, {
                            display: "none"
                        })
                    } else g.feature.style[c] = !0, (h = l.$("." +
                        c + "-indicator")) && l.style(h.parentNode, {
                        display: ""
                    });
                    if (p || m) {
                        if (p) {
                            for (var h = [], r = 0; r < p.length; r++) h.push({
                                dna: p[r],
                                status: "official"
                            });
                            p = h.concat(m)
                        } else p = m;
                        !0 !== d.reset && (p = p.concat(g.style[c]));
                        p.length && (g.style.reset(c), g.style.add(p, c))
                    }
                    d.defaultValue && (g.style.fill[c] = d.defaultValue)
                }
            }
            b("color");
            b("gradient");
            b("pattern");
            g.palette.rebuild()
        };
        d.setTemplateData = function(a) {
            a && d.setData("template", h.copy(a))
        };
        d.openTemplate = function(a, c, e) {
            function x() {
                f.template = m;
                m.alert && (g.feature.alert =
                    m.alert);
                m.background && f.setBackground(m.background);
                q(f);
                f.scene.add({
                    data: h.copy(m.children),
                    scale: v
                }, function() {
                    d.setClipartDefaultValue();
                    c && c(v)
                }, function(a) {
                    console.error(a);
                    e && e(a)
                }, {
                    useRecord: !1,
                    useRender: !1
                })
            }
            var p = d.template;
            d.getTemplateData && d.getTemplateData();
            a = a || p.defaultItem;
            var m = p.byId[a] || p.byName[a];
            if (m) {
                var v = 1;
                if (m.clip) {
                    var r = m.clip;
                    "string" === typeof r.path ? (r.path = b.SVGPath.toVOBPath(path), x()) : "string" === typeof r.src ? new b.SVG({
                        src: r.src,
                        onsuccess: function(a) {
                            r.path = a.vob.childNodes[0].data;
                            x()
                        }
                    }) : r.path && x()
                } else x()
            } else return console.warn("missing template")
        };
        d.init = function(a) {
            function b(a, d, m) {
                switch (m) {
                    default: return c.tree[d].sort(function(a, b) {
                        return a.name.localeCompare(b.name)
                    })
                }
            }
            if (!e.MEDIA) return console.warn("loc not setup");
            var c = d[a];
            c.meta = c.meta || {};
            c.path = e.MEDIA + c.dir + "/";
            c.type = a;
            c.defaultTree = c.defaultTree || h.copy(c.tree);
            c.getSrc = function(a, b) {
                b = b || {};
                if (a) {
                    var d = a.filepath || "";
                    if (d.startsWith("#")) return b.absolute ? g.assets.getURL(d) : d;
                    if (d.startsWith("blob") ||
                        d.startsWith("http") || d.startsWith("./")) return d;
                    var h = c.dir + "/";
                    return b.absolute ? e.MEDIA + h + d : h + d
                }
            };
            c.getThumbnail = function(b) {
                if (b) {
                    var d = e.MEDIA + "thumb/" + c.dir + "/",
                        m = b.filepath || "";
                    return m.startsWith("http") ? m : b.thumbnail ? b.thumbnail : m.startsWith("#") ? b.thumbnail : m.startsWith(".") ? m.replace("/media/", "/media/thumb/").replace(".svg", ".png") : "text" === a ? d + b.filename + ".png" : d + m.replace(".svg", ".png")
                }
            };
            c.getEntry = function(a) {
                var b = c.byPath[a];
                if (b) return b;
                b = g.assets.getItem(a);
                return c.byPath[b.src]
            };
            (c.reindex = function() {
                c.byId = {};
                c.byName = {};
                c.byPath = {};
                c.paths = [];
                for (var d in c.tree) {
                    b(a, d);
                    for (var p = d, m = c.tree[p], v = 0; v < m.length; v++) {
                        var r = m[v];
                        r.type = a;
                        r.category = p;
                        r.filepath = r.filepath || "";
                        r.filename = h.string.filename(r.filepath);
                        r.folder = p;
                        r.id && (c.byId[r.id] = r);
                        c.byName[r.name] = r;
                        c.byPath[r.filepath] = r;
                        c.paths.push(r)
                    }
                }
            })()
        };
        "template brush shape stamp text clipart image color gradient texture".split(" ").forEach(function(a) {
            d[a] = h.copyInto(d[a], {
                meta: {},
                defaultCategory: "",
                dir: a,
                tree: {
                    "Your Files": []
                }
            });
            d.init(a)
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Assets = function(g, f) {
        function q(b) {
            return "string" === typeof b ? a.getItem(b) : b
        }

        function l(a) {
            return a && "IMG" === a.nodeName ? u.canvasFromImage(a) : a
        }

        function d(b, c, d, p) {
            function h(a) {
                r.paths.splice(0, 0, e[c] = {
                    type: b,
                    filename: c,
                    filepath: c,
                    thumbnail: a.toDataURL(),
                    category: "Your Files"
                });
                p && p(c, d)
            }
            var r = v[b];
            if (r) {
                var e = r.tree["Your Files"];
                if (e && !a.isDefault(d)) {
                    e[c] ? p && p(c, d) : (e[c] = "loading", "clipart" === b ? m.preview({
                            type: "clipart",
                            resource: d,
                            width: 52,
                            height: 52,
                            oncomplete: function(a) {
                                h(a.canvas)
                            }
                        }) :
                        t.thumbnailer({
                            src: d,
                            width: 52,
                            height: 52,
                            center: !0,
                            crop: "edge",
                            onsuccess: function(a) {
                                "stamp" === b && (f.toolkitConfig.stamp.src = c);
                                h(a)
                            }
                        }));
                    return
                }
            }
            p && p(c, d)
        }

        function e(c) {
            var d = c.src,
                m = c.targetId,
                h = c.lastModified,
                v = c.onsuccess,
                e = c.onerror,
                f = c.onprogress;
            d.startsWith("<svg") && (d = '<?xml version="1.0" encoding="UTF-8"?>' + d);
            d.startsWith("<?xml") && (d = "data:image/svg+xml;base64," + btoa(y.encodeUTF8(d)));
            d.startsWith("data:image/svg") ? a.createId(d, function(c) {
                var m = a.items[c];
                p.cacheSVG && m && !a.isDefault(m) ?
                    v && v.call(m, c, m) : new E.SVG({
                        src: d,
                        useCache: p.cacheSVG,
                        onprogress: f,
                        onerror: function(a) {
                            p.debug && console.error(a);
                            e && e(a)
                        },
                        onsuccess: function(a) {
                            a.lastModified = h;
                            b(c, "clipart", a);
                            v && v.call(a, c, a)
                        }
                    })
            }, m) : r.isValidXhrUrl(d) ? t.request({
                url: r.getMediaUrl(d),
                format: "text",
                onerror: e,
                onsuccess: function(b, c) {
                    a.add({
                        targetId: m,
                        data: c,
                        onprogress: f,
                        onerror: function(a) {
                            p.debug && console.error(a);
                            e && e(a)
                        },
                        onsuccess: function(a, b) {
                            z[d] = a;
                            C[a] = d;
                            v && v.call(b, a, b)
                        }
                    })
                }
            }) : e && e()
        }

        function c(c) {
            var d = c.src,
                m = c.targetId,
                h = c.lastModified,
                v = c.onsuccess,
                e = c.onerror,
                f = c.onprogress;
            t.loadImage({
                src: r.getMediaUrl(d),
                onerror: e,
                onprogress: f,
                onsuccess: function() {
                    var r = this;
                    w.ios && t.exists("MegaPixImage") && (r = u.canvasFromImage(this));
                    a.createId(r, function(a) {
                        r.assetID = r.title = a;
                        r.image = {
                            src: d
                        };
                        r.lastModified = h;
                        r.setAttribute("data-src", d);
                        z[d] = a;
                        C[a] = d;
                        b(a, "image", r);
                        if (c.blob) r.blob = c.blob;
                        else if (p.stream.maxFileSize) {
                            that.getBlob(a, function(b) {
                                v && v.call(r, a, r)
                            });
                            return
                        }
                        v && v.call(r, a, r)
                    }, m)
                }
            })
        }

        function h(b) {
            var c = x.Canvas(1,
                1);
            c.className = "sk-default";
            var d = c.ctx;
            d.fillStyle = "rgba(127,127,127,0.5)";
            d.fillRect(0, 0, c.width, c.height);
            a.items[b] = c;
            a.missing[b] = !0;
            return c
        }

        function b(b, c, d) {
            var m = a.items[b] || "",
                p = m && a.isDefault(m);
            a.items[b] = d;
            a.items[b].type = c;
            if (!m || p) {
                var h = g.net.client;
                h && a.getBlob(b, function(a) {
                    void 0 === h.files[b] && h.sendFile(a, b)
                })
            }
            if (a.missing[b] || p) delete a.missing[b], t.each(g.docs, function(a) {
                var c = !1;
                a.scene.traverse(function(a) {
                    a.src === b && (c = !0, a.dirtyCache = !0, a.toolkit.loadResource({
                        object: a
                    }))
                });
                c && (a.render.dirty = !0)
            })
        }
        var a = this,
            w = g.agent,
            u = g.convert,
            x = g.dom,
            p = g.feature,
            m = g.gen,
            v = g.lib,
            r = g.loc,
            y = g.util.string,
            t = g.util,
            E = g.vector,
            z = {},
            C = {};
        a.items = {};
        a.missing = {};
        a.reset = function(b) {
            for (var c in a.items)
                if (-1 === b.indexOf(c)) {
                    delete a.items[c];
                    delete a.missing[c];
                    var d = C[c];
                    delete C[c];
                    delete z[d]
                }
        };
        a.remove = function(b) {
            delete a.items[b];
            delete a.missing[b]
        };
        a.equals = function(b, c) {
            if (b === c) return !0;
            var d = a.getItem(b);
            return d && d.src === c ? !0 : (d = a.getItem(c)) && d.src === b ? !0 : !1
        };
        a.exists = function(b) {
            return !!a.getItem(b)
        };
        a.isDefault = function(a) {
            if (a = q(a)) return "sk-default" === a.className
        };
        a.isLoaded = function(b) {
            return (b = q(b)) ? !a.isDefault(b) : !1
        };
        a.getId = function(b) {
            return a.items[b] ? b : z[b] ? z[b] : ""
        };
        a.getItem = function(b) {
            return (b = a.getId(b)) ? a.items[b] : ""
        };
        a.getBlob = function(b, c, d, m) {
            var p = a.items[b];
            p ? p.blob ? c(p.blob, p, b) : p.srcXML ? (p.blob = new Blob([p.srcXML], {
                type: "image/svg+xml"
            }), p.blob.lastModified = p.lastModified, c(p.blob, p, b)) : l(p).toBlob(function(a) {
                p.blob = a;
                p.blob.lastModified = p.lastModified;
                c(a, p, b)
            }, d, m) : console.warn("invalid assetId")
        };
        a.getBlobURL = function(b, c, d, m) {
            var p = a.items[b];
            p ? p.objectURL ? c(p.objectURL) : a.getBlob(b, function(a, b, d) {
                b.objectURL = URL.createObjectURL(a);
                c(b.objectURL)
            }, d, m) : console.warn("invalid assetId")
        };
        a.getDataURL = function(b, c, d) {
            if (b = l(a.items[b])) return b.toDataURL(c, d);
            console.warn("invalid assetId")
        };
        a.getRaw = function(a) {
            return l(a)
        };
        a.getURL = function(a) {
            return C[a] || ""
        };
        a.getUnused = function(b) {
            function c(a) {
                a.scene.traverse(function(a) {
                    d[a.src] = !0
                })
            }
            var d = {},
                m = [];
            b ? c(b) : t.each(g.docs, c);
            for (var p in a.items) d[p] ||
                m.push(p);
            return m
        };
        a.addList = function(b, c) {
            if (t.count(b)) {
                var d = 0,
                    m = function() {
                        --d || c()
                    },
                    p;
                for (p in b) {
                    d++;
                    var h = b[p];
                    "string" === typeof h && (h = {
                        data: h,
                        targetId: p
                    });
                    a.add(h, m, m)
                }
            } else c()
        };
        var A = function() {
            var a = t.arrayToObject(["[object Blob]"]),
                b = t.arrayToObject(["[object HTMLCanvasElement]", "[object HTMLImageElement]"]),
                c = t.arrayToObject(["[object File]"]);
            return function(d) {
                var m = typeof d;
                if ("object" === m) {
                    m = Object.prototype.toString.call(d);
                    if (b[m]) return "node";
                    if (c[m]) return "file";
                    if (a[m]) return "blob"
                } else return m
            }
        }();
        a.add = function() {
            function d(a) {
                switch (a.type) {
                    case "clipart":
                    case "symbol":
                        e(a);
                        break;
                    case "image":
                        c(a);
                        break;
                    case "video":
                        m(a);
                        break;
                    default:
                        console.log(a)
                }
            }

            function m(a) {
                var b = document.createElement("video");
                b.src = a.src;
                b.play();
                eventjs.add(b, "playing", function() {
                    var d = x.Canvas(b.videoWidth, b.videoHeight);
                    d.ctx.drawImage(b, 0, 0);
                    d.toBlobURL(function(b) {
                        console.warn("handle me", b);
                        a.src = b;
                        c(a)
                    })
                })
            }
            return function(c, m, r, v) {
                c = c || {};
                var e = c.data || c,
                    f = c.type,
                    y = c.targetId || null,
                    w = c.lastModified || Date.now();
                m = c.onsuccess || m;
                r = c.onerror || r;
                v = c.onprogress || v;
                var x, l = A(e);
                if ("node" === l) a.createId(e, function(a) {
                    b(a, "image", e);
                    m && m.call(e, a, e)
                }, y);
                else {
                    if ("blob" === l || "file" === l) {
                        w = e.lastModified || w;
                        if (a.isLoaded(y)) {
                            f = a.items[y];
                            m && m.call(f, y, f);
                            return
                        }
                        if ("image/svg+xml" === e.type) {
                            u.textFromBlob(e, function(b) {
                                c.data = b;
                                c.type = "clipart";
                                c.lastModified = w;
                                a.add(c, m, r, v)
                            });
                            return
                        }
                        x = e;
                        e = URL.createObjectURL(x);
                        l = "string"
                    }
                    if ("string" === l)
                        if (e.startsWith("#asset-")) {
                            var q = e,
                                f = a.items[q];
                            if (!f) {
                                if (g.io.json.folder) {
                                    f =
                                        "clipart" === c.type ? ".svg" : ".png";
                                    c.data = g.io.json.folder + q.substr(1) + f;
                                    a.add(c, m, r, v);
                                    return
                                }
                                f = h(q)
                            }
                            m && m.call(f, q, f)
                        } else if (z[e]) q = z[e], f = a.items[q] || h(q), "clipart" === f.type && f.clone && !p.cacheSVG ? f.clone(function(c) {
                        a.createId(c.toDataURL(), function(a) {
                            b(a, "clipart", c);
                            m && m.call(c, a, c)
                        }, y || q)
                    }, !0) : m && m.call(f, q, f);
                    else {
                        var E = {
                            type: f,
                            src: e,
                            blob: x,
                            lastModified: w,
                            onsuccess: m,
                            onerror: r,
                            onprogress: v,
                            targetId: y
                        };
                        f ? d(E) : t.FileInfo(x || e, function(a) {
                            E.type = a.type;
                            d(E)
                        }, r)
                    } else console.error("invalid asset",
                        c), r && r()
                }
            }
        }();
        a.addClipart = function(b, c, m, p, h) {
            a.add({
                type: "clipart",
                targetId: h,
                data: b,
                onerror: m,
                onprogress: p,
                onsuccess: function(a, b) {
                    d("clipart", a, b, c)
                }
            })
        };
        a.addImage = function(b, c, m, p, h) {
            a.add({
                type: "image",
                targetId: h,
                data: b,
                onerror: m,
                onprogress: p,
                onsuccess: function(a, b) {
                    d("image", a, b, c)
                }
            })
        };
        a.addStamp = function(b, c, m, p, h) {
            a.add({
                type: "image",
                targetId: h,
                data: b,
                onerror: m,
                onprogress: p,
                onsuccess: function(b, m) {
                    t.removeColorFromCanvas && (m = a.getRaw(m), t.removeColorFromCanvas(m), a.items[b] = m);
                    d("stamp",
                        b, m, c)
                }
            })
        };
        a.addCloneFromSelection = function() {
            g.save.toBlobURL({
                background: "none",
                useSelection: !0,
                callback: function(a) {
                    f.scene.add({
                        centerOnPoint: !0,
                        type: "image",
                        src: a
                    })
                }
            })
        };
        a.addStampFromSelection = function(b) {
            g.save.canvas({
                background: "none",
                useSelection: !0,
                onsuccess: function(c) {
                    f.scene.deselectAll();
                    f.toolkit.renderSceneControls(!0);
                    a.addStamp(c, function() {
                        g.ui.refresh("stamp");
                        f.toolkit.setTool({
                            type: "stamp",
                            onsuccess: function() {
                                f.setFill("none");
                                b && b()
                            }
                        })
                    })
                }
            })
        };
        a.addPattern = function(a, b, c, d, m) {};
        a.addFont = function(a, b, c, d, p) {
            var h = URL.createObjectURL(a),
                r = a.name.match(/([^:\\/]*?)(?:\.([^ :\\/.]*))?$/)[1];
            g.vector.text.attach({
                timeout: 3E3,
                family: r,
                filepath: h,
                onerror: function(a) {
                    console.error(a);
                    c && c()
                },
                onsuccess: function() {
                    var c = v.text;
                    if (c) {
                        var d = c.tree["Your Files"];
                        if (d) {
                            if (c.byName[r]) {
                                b && b(r, a);
                                return
                            }
                            m.preview.text({
                                fonts: [{
                                    name: r,
                                    filepath: h
                                }],
                                type: "text",
                                resource: h,
                                width: 52,
                                height: 52,
                                oncomplete: function(a) {
                                    d.push({
                                        type: "text",
                                        name: r,
                                        filename: r,
                                        filepath: h,
                                        thumbnail: a.canvas.toDataURL(),
                                        category: "Your Files"
                                    });
                                    g.lib.text.reindex();
                                    b && b(r, h)
                                }
                            });
                            return
                        }
                    }
                    b && b()
                }
            })
        };
        a.addFromBlob = function(b, c, d, m) {
            function p(b) {
                "stamp" === b ? a.addStamp(h, c, d, m, r) : "clipart" === b || "svg" === b || "symbol" === b ? a.addClipart(h, c, d, m, r) : a.addImage(h, c, d, m, r)
            }
            var h = b.blob,
                r = b.targetId;
            (b = b.type) ? p(b): t.FileInfo(h, function(a) {
                p(a.type)
            })
        };
        a.addFromObjects = function(b) {
            for (var c = 0; c < b.length; c++) {
                var d = b[c],
                    m = d.src;
                if (m && "#" === m[0]) switch (d.type) {
                    case "clipart":
                        a.addClipart(m);
                        break;
                    case "image":
                        a.addImage(m);
                        break;
                    case "stamp":
                        a.addStamp(m)
                }
            }
        };
        a.createId = function() {
            return function(b, c, d) {
                if (d) c(d);
                else if ("string" === typeof b) 25E4 < b.length ? c("#asset-" + t.md5(b.substr(0, 25E4))) : c("#asset-" + t.md5(b));
                else if (b.assetID) c(b.assetID);
                else {
                    d = b.width;
                    var m = b.height;
                    if (64 > d && 64 > m && b.toDataURL) b.assetID = "#asset-" + t.md5(b.toDataURL());
                    else {
                        var p = a.thumbnail || x.Canvas();
                        p.ctx = p.ctx || p.getContext("2d");
                        var h = Math.min(d, 64),
                            r = Math.min(m, 64);
                        p.width = h;
                        p.height = r;
                        p.ctx.drawImage(b, 0, 0, d, m, 0, 0, h, r);
                        a.thumbnail = p;
                        b.assetID = "#asset-" + t.md5(p.toDataURL())
                    }
                    b =
                        b.assetID;
                    c(b)
                }
            }
        }()
    }
})(sketch);
"function" === self.WebKitCSSMatrix ? self.CSSMatrix = WebKitCSSMatrix : function() {
    function k(b) {
        if (void 0 === b || "none" === b) return q(this);
        if (b instanceof k) return g(b);
        var a = arguments;
        if (a.length) {
            if (16 === a.length) return h(this, a);
            if (6 === a.length) return c(this, a)
        }
        return this.setMatrixValue(b)
    }

    function g(b) {
        var a = new k;
        a.m11 = a.a = b.m11;
        a.m12 = a.b = b.m12;
        a.m13 = b.m13;
        a.m14 = b.m14;
        a.m21 = a.c = b.m21;
        a.m22 = a.d = b.m22;
        a.m23 = b.m23;
        a.m24 = b.m24;
        a.m31 = b.m31;
        a.m32 = b.m32;
        a.m33 = b.m33;
        a.m34 = b.m34;
        a.m41 = a.e = b.m41;
        a.m42 = a.f = b.m42;
        a.m43 = b.m43;
        a.m44 = b.m44;
        return a
    }

    function f(b, a) {
        return a instanceof k ? new k(a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41, a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42, a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43, a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44, a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41, a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42, a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43, a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44, a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 *
            b.m41, a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42, a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43, a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44, a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41, a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42, a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43, a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44) : null
    }

    function q(b) {
        b.m11 = b.a = 1;
        b.m12 = b.b = 0;
        b.m13 = 0;
        b.m14 = 0;
        b.m21 = b.c = 0;
        b.m22 = b.d = 1;
        b.m23 = 0;
        b.m24 = 0;
        b.m31 = 0;
        b.m32 = 0;
        b.m33 = 1;
        b.m34 = 0;
        b.m41 = b.e = 0;
        b.m42 = b.f = 0;
        b.m43 =
            0;
        b.m44 = 1;
        return b
    }
    var l = k.prototype,
        d = /^matrix\((.*)\)/,
        e = /^matrix3d\((.*)\)/,
        c = function(b, a) {
            b.m11 = b.a = a[0];
            b.m12 = b.b = a[1];
            b.m41 = b.e = a[4];
            b.m21 = b.c = a[2];
            b.m22 = b.d = a[3];
            b.m42 = b.f = a[5];
            return b
        },
        h = function(b, a) {
            b.m11 = b.a = a[0];
            b.m12 = b.b = a[1];
            b.m13 = a[2];
            b.m14 = a[3];
            b.m21 = b.c = a[4];
            b.m22 = b.d = a[5];
            b.m23 = a[6];
            b.m24 = a[7];
            b.m31 = a[8];
            b.m32 = a[9];
            b.m33 = a[10];
            b.m34 = a[11];
            b.m41 = b.e = a[12];
            b.m42 = b.f = a[13];
            b.m43 = a[14];
            b.m44 = a[15];
            return b
        };
    l.setMatrixValue = function(b) {
        if ("string" === typeof b) {
            q(this);
            b = b.trim();
            if ("none" ===
                b) return this;
            for (var a = b.replace(/^.*\((.*)\)$/g, "$1").split(/\s*,\s*/), f = a.length; f--;) a[f] = parseFloat(a[f]);
            if (6 === a.length && d.test(b)) return c(this, a);
            if (16 === a.length && e.test(b)) return h(this, a)
        }
        throw Error("Failed to execute 'setMatrixValue' on 'CSSMatrix': Failed to parse '" + b + "'");
    };
    l.multiply = function(b) {
        return f(this, b)
    };
    l.inverse = function() {
        var b;
        b = (b = this.m14 * this.m23 * this.m32 * this.m41 - this.m13 * this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 * this.m41 + this.m12 * this.m24 * this.m33 * this.m41 +
            this.m13 * this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 * this.m41 - this.m14 * this.m23 * this.m31 * this.m42 + this.m13 * this.m24 * this.m31 * this.m42 + this.m14 * this.m21 * this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 - this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 * this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 - this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 * this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 + this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 * this.m34 * this.m43 -
            this.m13 * this.m22 * this.m31 * this.m44 + this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 * this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 - this.m12 * this.m21 * this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44) ? new k((this.m23 * this.m34 * this.m42 - this.m24 * this.m33 * this.m42 + this.m24 * this.m32 * this.m43 - this.m22 * this.m34 * this.m43 - this.m23 * this.m32 * this.m44 + this.m22 * this.m33 * this.m44) / b, (this.m14 * this.m33 * this.m42 - this.m13 * this.m34 * this.m42 - this.m14 * this.m32 * this.m43 + this.m12 * this.m34 * this.m43 + this.m13 *
            this.m32 * this.m44 - this.m12 * this.m33 * this.m44) / b, (this.m13 * this.m24 * this.m42 - this.m14 * this.m23 * this.m42 + this.m14 * this.m22 * this.m43 - this.m12 * this.m24 * this.m43 - this.m13 * this.m22 * this.m44 + this.m12 * this.m23 * this.m44) / b, (this.m14 * this.m23 * this.m32 - this.m13 * this.m24 * this.m32 - this.m14 * this.m22 * this.m33 + this.m12 * this.m24 * this.m33 + this.m13 * this.m22 * this.m34 - this.m12 * this.m23 * this.m34) / b, (this.m24 * this.m33 * this.m41 - this.m23 * this.m34 * this.m41 - this.m24 * this.m31 * this.m43 + this.m21 * this.m34 * this.m43 + this.m23 * this.m31 *
            this.m44 - this.m21 * this.m33 * this.m44) / b, (this.m13 * this.m34 * this.m41 - this.m14 * this.m33 * this.m41 + this.m14 * this.m31 * this.m43 - this.m11 * this.m34 * this.m43 - this.m13 * this.m31 * this.m44 + this.m11 * this.m33 * this.m44) / b, (this.m14 * this.m23 * this.m41 - this.m13 * this.m24 * this.m41 - this.m14 * this.m21 * this.m43 + this.m11 * this.m24 * this.m43 + this.m13 * this.m21 * this.m44 - this.m11 * this.m23 * this.m44) / b, (this.m13 * this.m24 * this.m31 - this.m14 * this.m23 * this.m31 + this.m14 * this.m21 * this.m33 - this.m11 * this.m24 * this.m33 - this.m13 * this.m21 * this.m34 +
            this.m11 * this.m23 * this.m34) / b, (this.m22 * this.m34 * this.m41 - this.m24 * this.m32 * this.m41 + this.m24 * this.m31 * this.m42 - this.m21 * this.m34 * this.m42 - this.m22 * this.m31 * this.m44 + this.m21 * this.m32 * this.m44) / b, (this.m14 * this.m32 * this.m41 - this.m12 * this.m34 * this.m41 - this.m14 * this.m31 * this.m42 + this.m11 * this.m34 * this.m42 + this.m12 * this.m31 * this.m44 - this.m11 * this.m32 * this.m44) / b, (this.m12 * this.m24 * this.m41 - this.m14 * this.m22 * this.m41 + this.m14 * this.m21 * this.m42 - this.m11 * this.m24 * this.m42 - this.m12 * this.m21 * this.m44 + this.m11 *
            this.m22 * this.m44) / b, (this.m14 * this.m22 * this.m31 - this.m12 * this.m24 * this.m31 - this.m14 * this.m21 * this.m32 + this.m11 * this.m24 * this.m32 + this.m12 * this.m21 * this.m34 - this.m11 * this.m22 * this.m34) / b, (this.m23 * this.m32 * this.m41 - this.m22 * this.m33 * this.m41 - this.m23 * this.m31 * this.m42 + this.m21 * this.m33 * this.m42 + this.m22 * this.m31 * this.m43 - this.m21 * this.m32 * this.m43) / b, (this.m12 * this.m33 * this.m41 - this.m13 * this.m32 * this.m41 + this.m13 * this.m31 * this.m42 - this.m11 * this.m33 * this.m42 - this.m12 * this.m31 * this.m43 + this.m11 * this.m32 *
            this.m43) / b, (this.m13 * this.m22 * this.m41 - this.m12 * this.m23 * this.m41 - this.m13 * this.m21 * this.m42 + this.m11 * this.m23 * this.m42 + this.m12 * this.m21 * this.m43 - this.m11 * this.m22 * this.m43) / b, (this.m12 * this.m23 * this.m31 - this.m13 * this.m22 * this.m31 + this.m13 * this.m21 * this.m32 - this.m11 * this.m23 * this.m32 - this.m12 * this.m21 * this.m33 + this.m11 * this.m22 * this.m33) / b) : !1;
        return b
    };
    l.translate = function(b, a, c) {
        c = c || 0;
        var d = g(this);
        d.m41 = d.e = d.m11 * b + d.m21 * a + d.m31 * c + d.m41;
        d.m42 = d.f = d.m12 * b + d.m22 * a + d.m32 * c + d.m42;
        d.m43 = d.m13 * b +
            d.m23 * a + d.m33 * c + d.m43;
        d.m44 = d.m14 * b + d.m24 * a + d.m34 * c + d.m44;
        return d
    };
    l.scale = function(b, a, c) {
        a !== +a && (a = b);
        c !== +c && (c = 1);
        var d = new k;
        d.m11 = d.a = b;
        d.m22 = d.d = a;
        d.m33 = c;
        return f(this, d)
    };
    l.rotate = function(b, a, c) {
        b !== +b && (b = 0);
        a !== +a && c !== +c && (c = b, a = b = 0);
        a !== +a && (a = 0);
        c !== +c && (c = 0);
        var d, h;
        b *= Math.PI / 180;
        d = Math.PI / 180 * a;
        h = Math.PI / 180 * c;
        c = Math.cos(b);
        b = -Math.sin(b);
        a = Math.cos(d);
        d = -Math.sin(d);
        var p = Math.cos(h);
        h = -Math.sin(h);
        var m = new k;
        m.m11 = m.a = a * p;
        m.m12 = m.b = -a * h;
        m.m13 = d;
        m.m21 = m.c = b * d * p + c * h;
        m.m22 = m.d =
            c * p - b * d * h;
        m.m23 = -b * a;
        m.m31 = b * h - c * d * p;
        m.m32 = b * p + c * d * h;
        m.m33 = c * a;
        return f(this, m)
    };
    l.rotateAxisAngle = function(b, a, c, d) {
        a !== +a && (a = b);
        c !== +c && (c = b);
        var h;
        h = Math.PI / 360 * d;
        d = Math.sin(h);
        h = Math.cos(h);
        var p = d * d,
            m = Math.sqrt(b * b + a * a + c * c);
        0 === m ? (a = b = 0, c = 1) : (b /= m, a /= m, c /= m);
        var m = b * b,
            v = a * a,
            r = c * c,
            e = new k;
        e.m11 = e.a = 1 - 2 * (v + r) * p;
        e.m12 = e.b = 2 * (b * a * p + c * d * h);
        e.m13 = 2 * (b * c * p - a * d * h);
        e.m21 = e.c = 2 * (a * b * p - c * d * h);
        e.m22 = e.d = 1 - 2 * (r + m) * p;
        e.m23 = 2 * (a * c * p + b * d * h);
        e.m31 = 2 * (c * b * p + a * d * h);
        e.m32 = 2 * (c * a * p - b * d * h);
        e.m33 = 1 - 2 * (m + v) * p;
        e.m14 =
            e.m24 = e.m34 = 0;
        e.m41 = e.e = e.m42 = e.f = e.m43 = 0;
        e.m44 = 1;
        return f(this, e)
    };
    l.toString = function() {
        var b = function(a) {
                return a.toFixed(6)
            },
            a;
        a = this.m13 || this.m14 || this.m23 || this.m24 || this.m31 || this.m32 || 1 !== this.m33 || this.m34 || this.m43 || 1 !== this.m44 ? !1 : !0;
        return a ? "matrix(" + [this.a, this.b, this.c, this.d, this.e, this.f].map(b).join(", ") + ")" : "matrix3d(" + [this.m11, this.m12, this.m13, this.m14, this.m21, this.m22, this.m23, this.m24, this.m31, this.m32, this.m33, this.m34, this.m41, this.m42, this.m43, this.m44].map(b).join(", ") +
            ")"
    };
    l.skewX = function(b) {
        b *= Math.PI / 180;
        var a = new k;
        a.m21 = a.c = Math.tan(b);
        return f(a, this)
    };
    l.skewY = function(b) {
        b *= Math.PI / 180;
        var a = new k;
        a.m12 = a.b = Math.tan(b);
        return f(a, this)
    };
    "undefined" !== typeof exports ? ("object" === typeof module && module.exports && (exports = module.exports = k), exports.CSSMatrix = k) : self.CSSMatrix = k
}();
(function() {
    function k(f, g, d, e) {
        this.x = f || 0;
        this.y = g || 0;
        this.z = d || 0;
        this.w = e || 0
    }

    function g(f) {
        f = f || {};
        var g = {
                perspective: null,
                translate: null,
                skew: null,
                scale: null,
                rotate: null
            },
            d;
        for (d in g) this[d] = f[d] ? f[d] : new k
    }
    var f = k.prototype;
    f.length = function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
    };
    f.normalise = function() {
        var f = this.length();
        return new k(this.x / f, this.y / f, this.z / f)
    };
    f.dot = function(f) {
        return this.x * f.x + this.y * f.y + this.z * f.z + this.w * f.w
    };
    f.cross = function(f) {
        return new k(this.y *
            f.z - this.z * f.y, this.z * f.x - this.x * f.z, this.x * f.y - this.y * f.x)
    };
    f.combine = function(f, g, d) {
        return new k(g * this.x + d * f.x, g * this.y + d * f.y, g * this.z + d * f.z)
    };
    f = CSSMatrix.prototype;
    f.transformVector = function(f) {
        return new k(this.m11 * f.x + this.m12 * f.y + this.m13 * f.z, this.m21 * f.x + this.m22 * f.y + this.m23 * f.z, this.m31 * f.x + this.m32 * f.y + this.m33 * f.z)
    };
    f.point3d = function(f) {
        return new k(this.m11 * f.x + this.m21 * f.y + this.m31 * f.z + this.m41, this.m12 * f.x + this.m22 * f.y + this.m32 * f.z + this.m42, this.m13 * f.x + this.m23 * f.y + this.m33 * f.z +
            this.m43, this.m14 * f.x + this.m24 * f.y + this.m34 * f.z + this.m44)
    };
    f.transpose = function() {
        for (var f = new CSSMatrix, g = 0, d = 0, g = 0; 2 >= g; g++)
            for (d = g + 1; 3 >= d; d++) f["m" + (g + 1) + (d + 1)] = this["m" + (d + 1) + (g + 1)], f["m" + (d + 1) + (g + 1)] = this["m" + (g + 1) + (d + 1)];
        return f
    };
    f.determinant = function() {
        return this.m14 * this.m23 * this.m32 * this.m41 - this.m13 * this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 * this.m41 + this.m12 * this.m24 * this.m33 * this.m41 + this.m13 * this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 * this.m41 - this.m14 * this.m23 *
            this.m31 * this.m42 + this.m13 * this.m24 * this.m31 * this.m42 + this.m14 * this.m21 * this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 - this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 * this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 - this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 * this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 + this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 * this.m34 * this.m43 - this.m13 * this.m22 * this.m31 * this.m44 + this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 *
            this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 - this.m12 * this.m21 * this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44
    };
    f.decompose = function() {
        var f = new CSSMatrix(this.toString()),
            l, d, e, c, h;
        if (0 === f.m33) return new g((new CSSMatrix).decompose());
        for (h = 1; 4 >= h; h++)
            for (j = 1; 4 >= j; j++) f["m" + h + j] /= f.m44;
        for (h = 1; 3 >= h; h++) f["m" + h + "4"] = 0;
        f.m44 = 1;
        if (0 === f.determinant()) return new g((new CSSMatrix).decompose());
        0 != f.m14 || 0 != f.m24 || 0 != f.m34 ? (l = new k(f.m14, f.m24, f.m34, f.m44), d = f.inverse(), d = d.transpose(),
            l = d.transformVector(l), f.m14 = f.m24 = f.m34 = 0, f.m44 = 1) : l = new k(0, 0, 0, 1);
        d = new k(f.m41, f.m42, f.m43);
        f.m41 = 0;
        f.m42 = 0;
        f.m43 = 0;
        e = [new k, new k, new k];
        for (h = 1; 3 >= h; h++) e[h - 1].x = f["m" + h + "1"], e[h - 1].y = f["m" + h + "2"], e[h - 1].z = f["m" + h + "3"];
        f = new k;
        c = new k;
        f.x = e[0].length();
        e[0] = e[0].normalise();
        c.x = e[0].dot(e[1]);
        e[1] = e[1].combine(e[0], 1, -c.x);
        f.y = e[1].length();
        e[1] = e[1].normalise();
        c.x /= f.y;
        c.y = e[0].dot(e[2]);
        e[2] = e[2].combine(e[0], 1, -c.y);
        c.z = e[1].dot(e[2]);
        e[2] = e[2].combine(e[1], 1, -c.z);
        f.z = e[2].length();
        e[2] =
            e[2].normalise();
        c.y /= f.z;
        c.y /= f.z;
        h = e[1].cross(e[2]);
        if (0 > e[0].dot(h))
            for (h = 0; 3 > h; h++) f.x *= -1, e[h].x *= -1, e[h].y *= -1, e[h].z *= -1;
        h = new k;
        h.y = Math.asin(-e[0].z);
        0 != Math.cos(h.y) ? (h.x = Math.atan2(e[1].z, e[2].z), h.z = Math.atan2(e[0].y, e[0].x)) : (h.x = Math.atan2(-e[2].x, e[1].y), h.z = 0);
        return new g({
            perspective: l,
            translate: d,
            skew: c,
            scale: f,
            rotate: h
        })
    }
})();
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Scene = function(g, f) {
        function q() {
            d();
            E.text && E.text.hide();
            a.children.splice(0, a.children.length);
            a.childrenById = {}
        }

        function l(b) {
            var c = a.selection;
            return c.items[b] ? (c.deselect(b), !0) : !1
        }

        function d() {
            a.selection.reset();
            a.hovered.reset();
            a.controls = []
        }

        function e(b) {
            f.on.objectAdd && (a.updateTransform(b), f.on.objectAdd(b))
        }

        function c(b) {
            b.length && (a.updateSelectionInfo(), f.on.select && (b = f.selection.toObjects(b), b.length && f.on.select(b)))
        }

        function h(b) {
            b.length &&
                (a.updateSelectionInfo(), f.on.deselect && (b = f.selection.toObjects(b), b.length && f.on.deselect(b)))
        }

        function b(a) {
            alertify.log_visible() || (a = a.useMaxCopies, a = v.translate("useMaxCopies-alert", a, 1 < a ? "copies" : "copy"), g.ui.log(a))
        }
        var a = this,
            w = g.dom,
            u = g.assets,
            x = f.contexts,
            p = g.detect,
            m = g.feature,
            v = g.lang,
            r = g.net,
            y = f.render,
            t = g.style,
            E = f.toolkit,
            z = g.ui,
            C = g.util,
            A = g.vector;
        a.push = function(b, c) {
            b = a.Object(b);
            c && a.decompress(b);
            a.children.push(b);
            a.childrenById[b.id] = b
        };
        a.pushAt = function(b, c, d) {
            b = a.Object(b);
            d && a.decompress(b);
            a.children.splice(c, 0, b);
            a.childrenById[b.id] = b
        };
        a.shiftAt = function(b) {
            var c = a.children[b];
            c && (a.children.splice(b, 1), delete a.childrenById[c.id])
        };
        a.setData = function(b, c) {
            q();
            for (var d = 0; d < b.length; d++) a.push(b[d], c)
        };
        a.load = function(a) {
            a = a || {};
            var b = a.objects,
                c = a.onsuccess,
                d = a.onerror;
            a = a.onprogress;
            b && (f.scene.setData(b, !0), f.scene.reindex());
            f.render.preload({
                chunkBatch: !0,
                onerror: d,
                onprogress: a,
                onsuccess: function() {
                    g.assets && g.assets.addFromObjects(f.scene.children);
                    c && c()
                }
            })
        };
        a.addObject = function(b, c) {
            c = c || {};
            if (!1 === a.ensureMaxCopies(b)) a.deselectAll();
            else {
                var d = E.getToolkit(b.type),
                    m = a.copyProperties(d, b, {
                        id: a.createId(b),
                        timestamp: f.timestamp(),
                        toolkit: d,
                        toolkitId: d.id,
                        zIndex: a.children.length,
                        bbox: {
                            x: 0,
                            y: 0,
                            width: 0,
                            height: 0,
                            rotate: 0,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    });
                a.ensureStickyIdx(m);
                a.push(m);
                a.sort();
                a.reindex();
                d.loadResource({
                    object: m,
                    onerror: e,
                    onsuccess: e
                });
                c.useHistory && f.history.store({
                    cmd: "add",
                    pointerId: m.pointerId,
                    name: m.type,
                    data: [m]
                }, {
                    userId: r.user.id
                });
                return m
            }
        };
        a.removeById = function(b, c) {
            var d = a.getById(b);
            d && a.removeByIdx(d.zIndex, c);
            return a
        };
        a.remove = a.removeByIdx = function(b, c) {
            c = !1 !== c;
            switch (typeof b) {
                case "number":
                    var d = {};
                    d[b] = !0;
                    b = d;
                    break;
                case "object":
                    b = C.copy(b);
                    break;
                default:
                    return a
            }
            for (var d = [], m = a.children.length, p = a.children.splice(0, m), h = a.selection.items, r = {}, e = 0; e < m; e++) {
                var v = p[e];
                b[e] ? (c && d.push(a.copyDeep(v)), y.cache.clean(v.hash), f.scene.setDirtyPixelData(v)) : (a.children.push(v), r[v.id] = v);
                h[v.zIndex] && a.selection.deselect(v.zIndex)
            }
            c &&
                d.length && (f.on.objectRemove && f.on.objectRemove(a.selection.toObjects(b)), f.history && f.history.store({
                    cmd: "remove",
                    name: "remove-objects",
                    data: d
                }));
            a.childrenById = r;
            a.reindex();
            a.updateSelectionInfo();
            return a
        };
        a.removeByName = function(b, c) {
            var d = a.getByName(b);
            d.length && (d = a.selection.fromObjects(d), a.removeByIdx(d, c));
            return a
        };
        a.removeAll = function(b) {
            var c = a.selection.fromObjects(a.children);
            a.removeByIdx(c, b);
            a.deselectAll();
            return a
        };
        a.clear = function(b) {
            a.removeAll(!1 !== b);
            w.Canvas.clear(x.active);
            w.Canvas.clear(x.draw);
            w.Canvas.clear(x.layer0);
            return a
        };
        a.reset = function(b) {
            q();
            b && f.on.record && f.on.record({
                op: "SCENE_RESET",
                type: "major"
            });
            return a
        };
        a.deselectById = function(b) {
            return (b = a.getById(b)) ? a.deselectByIdx(b.zIndex) : a
        };
        a.deselect = a.deselectByIdx = function(b) {
            if (a.selection.length) {
                var c = [];
                if ("object" === typeof b) {
                    var d = b;
                    if (Array.isArray(d))
                        for (var m = 0; m < d.length; m++) b = d[m], l(b, !1) && c.push(b);
                    else
                        for (b in d) l(b, !1) && c.push(b)
                } else l(b) && c.push(b);
                h(c)
            }
            return a
        };
        a.deselectByName = function(b) {
            var c =
                a.selection;
            c.length && (b = a.getByName(b), b.length && a.deselectByIdx(c.fromObjects(b)));
            return a
        };
        a.deselectAll = function() {
            var b = a.selection;
            b.length && (b = Object.keys(b.items), E.text && E.text.hide(), d(), h(b));
            a.handleSelection();
            return a
        };
        (function() {
            function b(m, p) {
                p && a.deselectAll();
                var h = [];
                if (Array.isArray(m))
                    for (var r = 0; r < m.length; r++) {
                        var f = m[r];
                        d(f, !1) && h.push(f)
                    } else
                        for (f in m) d(f, !1) && h.push(f);
                c(h)
            }

            function d(b, c) {
                var m = a.children[b];
                if (m && !1 !== m.selectable) {
                    var m = a.selection,
                        p = !!m.items[b];
                    if (c) {
                        if (!p || 1 !== m.length) return a.deselectAll(), m.select(b), !0
                    } else if (!p) return m.select(b), 1 < m.length && (a.controls = []), !0
                }
                return !1
            }
            a.selectById = function(b, c) {
                var d = a.getById(b);
                d && a.selectByIdx(d.zIndex, c);
                return a
            };
            a.select = function(c, d) {
                "object" === typeof c ? isFinite(c.zIndex) ? a.selectByIdx(c.zIndex, d) : b(c, d) : a.selectByIdx(c, d);
                return a
            };
            a.selectByIdx = function(p, h) {
                m.doc.editable && ("object" === typeof p ? b(p, h) : a.children[p] && d(p, !!h) && c([p]));
                return a
            }
        })();
        a.selectByName = function(b, c) {
            var d = a.getByName(b);
            d.length ? (d = a.selection.fromObjects(d), a.selectByIdx(d, c)) : c && a.deselectAll();
            return a
        };
        (function() {
            function b(d) {
                if (m.doc.editable) {
                    var p = a.selection.items,
                        r = a.children,
                        f = r.length;
                    a.controls = [];
                    for (var e = [], v = [], t = 0; t < f; t++) !1 !== r[t].selectable && (d && p[t] ? (a.selection.deselect(t), v.push(t)) : (a.selection.select(t), e.push(t)));
                    a.handleSelection();
                    c(e);
                    h(v)
                }
            }
            a.selectAll = function() {
                b();
                return a
            };
            a.selectInverse = function() {
                b(!0);
                return a
            }
        })();
        a.getById = function(b) {
            return a.childrenById[b]
        };
        a.getByIdx =
            function(b) {
                return a.children[b]
            };
        (function() {
            function b(c) {
                return function(b) {
                    for (var d = [], m = a.children, p = 0, h = m.length; p < h; p++) {
                        var r = m[p];
                        r[c] === b && d.push(r)
                    }
                    return d
                }
            }
            a.getByGroupId = new b("groupId");
            a.getByName = new b("name");
            a.getBySrc = new b("src")
        })();
        a.getLast = function() {
            return a.children[a.children.length - 1]
        };
        a.getFocused = function() {
            return a.selection.item || a.hovered.item
        };
        a.getOneSelected = function() {
            if (a.selection.item) return a.selection.item;
            for (var b in a.selection.items) return a.children[b]
        };
        a.getHovered = function() {
            return a.hovered.item
        };
        a.getSelected = function() {
            return a.selection.item
        };
        a.getSelection = function(b, c) {
            return a.selection.toObjects(b, c)
        };
        a.getCollisions = function(b, c) {
            c = c || {};
            var d = [],
                m = A.Polygon.SAT,
                p = b.trx2D;
            if (p)
                for (var h = [p.nw, p.ne, p.se, p.sw], r = c.objects || a.children, f = r.length, e = isFinite(c.idx) ? c.idx : f - 1; e < f; e++) {
                    var v = r[e];
                    v.id !== b.id && v.trx2D && (p = v.trx2D, m(h, [p.nw, p.ne, p.se, p.sw]) && (c.fn ? c.fn(v) : d.push(v)))
                }
            return d
        };
        a.setDirtyPixelData = function(b, c) {
            b && m.canvas.useGLFXPixelData &&
                (b.usePixelData && (b.dirtyCache = !0), a.getCollisions(b, {
                    idx: isFinite(c) ? c : b.zIndex,
                    fn: function(a) {
                        a.usePixelData && (a.dirtyCache = !0)
                    }
                }))
        };
        a.traverse = function(b) {
            C.each(a.children, b)
        };
        (function() {
            function b(c, d) {
                return function(b) {
                    b = b || a.children;
                    for (var m in b)
                        if (b = a.children[m]) b[c] = d;
                    return a
                }
            }
            a.setDirtyCache = new b("dirtyCache", !0);
            a.setDirtyControl = new b("dirtyControl", !0);
            a.setDirtyTransform = new b("dirtyTransform", !0);
            a.setDirtyBounds = new b("inbounds", void 0)
        })();
        a.updateSelectionInfo = function() {
            if ("undefined" !==
                typeof document) {
                var b = w.$(".sk-selection-count");
                if (b) {
                    var c = a.selection;
                    if (c.length) {
                        var d = v.translate("select-tool-count", c.length) + ":",
                            m = {};
                        c.traverse(function(a) {
                            a = a.type;
                            m[a] || (m[a] = 0);
                            m[a]++
                        });
                        var d = d + '<div style="margin: 5px 0 0 25px;">',
                            p;
                        for (p in m) var c = m[p],
                            h = 1 < c ? "s" : "",
                            r = v.translate(p),
                            d = d + (c + " " + r + " layer" + h + "<br>");
                        d += "</div>"
                    } else d = v.translate("select-tool-message");
                    b.innerHTML = d
                }
            }
        };
        (function() {
            a.handleSelection = function() {
                if (m.doc.editable) {
                    var b = m.tools.select.useConfigure,
                        c = a.selection,
                        d = c.length,
                        p = c.item;
                    if (0 === d) b && z.configurePane();
                    else if (1 === d) m.style.toGlobals && t.setGlobalFromObject(p), b && z.configurePane(p.type);
                    else if (a.controls = [], b) {
                        var h, b = !0,
                            r;
                        for (r in c.items)
                            if (c = a.children[r])
                                if (h = h || c.type, h !== c.type) {
                                    b = !1;
                                    break
                                }
                        z.configurePane(b ? h : void 0)
                    }
                }
            }
        })();
        var k = /[^a-zA-Z]/g,
            B = /[^0-9]/g,
            D = function(a, b) {
                return a.zIndex > b.zIndex ? 1 : -1
            },
            F = function(a, b) {
                return a.id > b.id ? 1 : -1
            },
            G = function(a, b) {
                var c = a.name || "",
                    d = b.name || "",
                    m = c.replace(k, ""),
                    p = d.replace(k, "");
                return m === p ? (m = parseInt(c.replace(B,
                    ""), 10), p = parseInt(d.replace(B, ""), 10), m === p ? 0 : m > p ? 1 : -1) : m > p ? 1 : -1
            };
        a.sort = function(b) {
            switch (b) {
                case "name":
                    a.children.sort(G);
                    break;
                case "id":
                    a.children.sort(F);
                    break;
                default:
                    a.children.sort(D)
            }
        };
        a.reindex = function() {
            for (var b = a.children, c = a.selection.items, m = [], p = 0, h = b.length, r; p < h; p++)
                if (r = b[p]) {
                    var f = r.zIndex;
                    c[f] && (delete c[f], m.push(p));
                    r.zIndex = p
                }
            d();
            p = 0;
            for (h = m.length; p < h; p++) f = m[p], a.selection.select(f);
            a.updateSelectionInfo()
        };
        (function() {
            function b(a) {
                var c = 1;
                return function(b) {
                    b = b || {};
                    var d = b.id;
                    if (d) {
                        var m = typeof d;
                        if (("string" === m || "number" === m) && C.isEmpty(a(d))) return d
                    }
                    b.increment && c++;
                    for (b = (b.userId || r.user.id) + ":";;) {
                        if (C.isEmpty(a(b + c))) return b + c;
                        c++
                    }
                }
            }
            a.createId = b(a.getById);
            a.createGroupId = b(a.getByGroupId)
        })();
        a.createHash = function(a, b) {
            b = b || {};
            for (var c = f.pixelRatio + "", d = [a], m = p.useLocalAlpha; a = d.shift();)
                for (var h in a) {
                    var r = a[h];
                    if (null != r && !(J[h] || H[h] || b[h]))
                        if ("fill" === h) {
                            if (c += r.noise, c += r.angle, c += r.mode, c += r.enabled, r = r[r.type]) c += r.slice(0, 256)
                        } else if ("stroke" ===
                        h && r.lineWidth) {
                        if (c += r.noise, c += r.angle, c += r.mode, c += r.lineWidth, c += r.lineCap, c += r.lineJoin, c += r.enabled, r = r[r.type]) c += r.slice(0, 256)
                    } else if ("opacity" === h) m[a.type] && (c += r);
                    else if ("scale" !== h || a.type) "src" === h ? c += r.slice(0, 256) : "bbox" === h ? (r = a.bbox, c += r.width, c += r.height, c += r.padding, r.scale && (r = r.scale, c += r.x + "," + r.y)) : "object" === typeof r ? r.childNodes || r.getImageData || r && d.push(r) : c += r
                }
            return String(C.hashFast(c))
        };
        a.copyDeep = function K(a, b) {
            b = b || {};
            if (!a || !a.constructor || "object" !== typeof a) return a;
            if (!a.childNodes && !a.getImageData) {
                var c = new a.constructor,
                    d;
                for (d in a)
                    if (!J[d]) {
                        var m = a[d],
                            p = typeof m;
                        "number" === p || "string" === p || "boolean" === p ? c[d] = m : "object" === p && ("fill" === d || "stroke" === d ? (m = t.copy(m, b)) && (c[d] = m) : c[d] = b.compress && m && m.getValue ? m.getValue() : K(m, b))
                    }
                return c
            }
        };
        a.copyDeepCompress = function(b) {
            return a.copyDeep(b, {
                compress: !0
            })
        };
        a.decompress = function(a) {
            if ("string" === typeof a.filter) {
                var b = /\(([^)]+)\)/.exec(a.filter),
                    b = [
                        [{
                            cmd: "shader",
                            id: a.filter.replace(b[0], ""),
                            data: b[1].split(",").map(function(a) {
                                return parseFloat(a)
                            })
                        }]
                    ],
                    b = new z.vars.FilterStack({
                        filter: b
                    });
                a.filter = b
            }
            a.fill && (a.fill = new t.Fill(a.fill));
            a.stroke && (a.stroke = new t.Stroke(a.stroke));
            void 0 === a.toolkitId && (a.toolkitId = E.getToolkitId(a.type));
            return a
        };
        a.toString = function(b) {
            b = b || a.children;
            return JSON.stringify(a.copyDeepCompress(b))
        };
        a.copyAttributes = function(a, b, c) {
            c = c || {};
            if (b) {
                for (var d in a) {
                    var p = a[d],
                        h = b[d],
                        r = c[d];
                    "undefined" !== typeof h && (h.getValue ? c[d] = h.getValue() : "filter" === p ? c[d] = h.data || h : "style" === p ? c[d] = t.create(h, d) : "object" === p ? c[d] =
                        C.copy(h) : "bbox" === p ? (r = r || (c[d] = {}), C.copyInto(h, r)) : "clamp" === p ? (r = r || (c[d] = {}), r.min = h.min, r.max = h.max) : r !== h && (c[d] = void 0 !== h.value ? h.value : h))
                }
                return c
            }
            m.debug && console.warn("scene.copyAttributes", arguments)
        };
        a.copyRules = function(b, c) {
            c = c || {};
            a.copyAttributes(g.attrs.__rules, b, c);
            return c
        };
        a.copyProperties = function(b, c, d) {
            d = d || {};
            a.copyAttributes(g.attrs.__rules, c, d);
            a.copyAttributes(b.attributes, c, d);
            return d
        };
        a.ensureStickyIdx = function(b) {
            b.useStickToBack && (b.zIndex = -1);
            b = C.INFINITY_MINUS_24bit;
            for (var c = 0; c < a.children.length; c++) {
                var d = a.children[c];
                d.useStickToFront && (d.zIndex = b++)
            }
        };
        a.ensureMaxCopies = function(c) {
            if ("string" !== typeof c.src) return !0;
            var d = a.children,
                m = {},
                p = c.src,
                h = g.lib[c.type],
                r = h && h.getEntry(p);
            if (r) {
                var f = r.folder;
                if ((r = h.meta[f]) && r.useMaxCopies) {
                    for (var e = h.tree[f], f = 0; f < e.length; f++)
                        for (var v = h.getSrc(e[f], {
                                absolute: !0
                            }), t = 0; t < d.length; t++) {
                            var y = d[t];
                            if (void 0 !== y.src && y.id !== c.id) {
                                p = y.src;
                                if (p.startsWith("#"))
                                    if (p = u.getItem(y.src, y.type)) p = p.src;
                                    else continue;
                                var y =
                                    p,
                                    w = v,
                                    y = y === w ? !0 : y.length < w.length ? w.indexOf(y) + y.length === w.length : y.indexOf(w) + w.length === y.length;
                                if (y && (m[p] || (m[p] = 0), p = ++m[p], p >= r.useMaxCopies)) return c.useMaxCopies = r.useMaxCopies, b(c), !1
                            }
                        }
                    return !0
                }
            }
            v = p;
            for (f = 0; f < d.length; f++)
                if (y = d[f], void 0 !== y.src && y.id !== c.id && (c.useMaxCopies || y.useMaxCopies) && (p = (r = g.lib[y.type].getEntry(y.src)) && r.src || y.src, u.equals(p, v) && (m[p] || (m[p] = 0), p = ++m[p], p >= y.useMaxCopies))) return b(c), !1;
            return !0
        };
        (function() {
            a.Object = function(a) {
                var b = a = a || {},
                    c;
                for (c in J) {
                    var d =
                        b[c];
                    d && delete b[c];
                    Object.defineProperty(b, c, {
                        value: d,
                        writable: !0,
                        configurable: !0
                    })
                }
                return a
            }
        })();
        var H = C.arrayToObject("id zIndex clamp data visible tid".split(" ")),
            J = C.arrayToObject("filePicker resource palette subtool reset callback hash hashText render renderCache scaleCache dirtyCheck dirtyCache dirtyTransform dirtyControl dirtyResource selected hovered inbounds error ctx trx trx2D trx2DInv svg brush toolkit __hash __colors __textContent __textMetrics __offset".split(" "));
        a.children = [];
        a.childrenById = {};
        a.copies = [];
        a.controls = [];
        a.selection = new g.module.SceneSelection(g, f, a);
        a.hovered = new g.module.SceneSelection(g, f, a);
        (function() {
            var a = {},
                b;
            for (b in J) a[b] = {
                configurable: !0,
                writable: !0
            };
            return a
        })()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.AddMedia = function(g, f) {
        function q(a, b) {
            function d(a) {
                return a.some(function(a, b, c) {
                    return "sketch.json" === a.filename
                })
            }
            g.io.zip.getEntries(a, function(m, p) {
                d(p) ? (m.close(), g.open.sketch({
                    blob: a
                })) : (g.loader && (g.loader.create("decoding", c.translate("opening-format", ".ZIP") + "..."), g.loader.create("decodingFiles", "...")), g.io.zip.decode({
                    entries: p,
                    onsuccess: function() {
                        m.close();
                        g.loader && (g.loader.stop("decoding"), g.loader.stop("decodingFiles"));
                        b.run()
                    },
                    next: function(a) {
                        var c =
                            a.blob;
                        a = w.string.extension(a.filename);
                        a = "undefined" === c.type ? a : c.type;
                        switch (a) {
                            case "image/jpeg":
                            case "image/jpg":
                            case "image/gif":
                            case "image/png":
                            case "jpeg":
                            case "jpg":
                            case "png":
                            case "gif":
                                b.add("clipart");
                                g.assets.addImage(c, this.next, this.next);
                                break;
                            case "image/svg+xml":
                            case "svg":
                                b.add("clipart");
                                g.assets.addClipart(c, this.next, this.next);
                                break;
                            case "abr":
                            case "gbr":
                                b.add("stamp");
                                x(a, c, this.next);
                                break;
                            case "ggr":
                                b.add("gradient");
                                g.style.addFromBlob(c, this.next);
                                break;
                            case "gpl":
                                b.add("color");
                                g.style.addFromBlob(c, this.next);
                                break;
                            default:
                                this.next()
                        }
                    },
                    onprogress: function(a, b, d) {
                        g.loader && (g.loader.create("decoding", c.translate("opening-format", ".ZIP") + "...", a), g.loader.create("decodingFiles", w.string.filename(d)))
                    }
                }))
            })
        }
        var l = f.canvas2d,
            d = g.dom,
            e = g.feature,
            c = g.lang,
            h = f.render,
            b = f.scene,
            a = f.toolkit,
            w = g.util,
            u = g.ui;
        f.addMedia = function(c, d, p, h) {
            function e() {
                w.exists("doc.toolkitConfig.clipart.opacity.value", g) && (f.toolkitConfig.clipart.opacity.value = 100);
                u.refresh && u.refresh("clipart");
                g.exec("select")
            }
            "string" === typeof c && (c = {
                src: c
            });
            var l = c.data || c,
                A = l.slice && "string" === typeof l.type,
                k = !!c.openAsNew;
            d = d || c.onsuccess;
            h = h || c.onprogress;
            p = p || c.onerror;
            var B = c.thumb,
                D = {};
            isFinite(c.x + c.y) ? D = {
                x: c.x,
                y: c.y
            } : c.event && (D = b.pointInSceneFromEvent(c.event));
            var F, G;
            A ? l.lastModifiedDate ? (F = l.src || URL.createObjectURL(l), G = w.string.extension(l.name)) : (F = URL.createObjectURL(l), G = (l.type || "image/png").split("/").pop()) : l.src ? (F = l.src, G = w.string.extension(F)) : F = l;
            if (B) B.width = B.width || c.width,
                B.height = B.height || c.height, B.croparea && !isFinite(B.width + B.height) && (B.width = B.croparea[2] - B.croparea[0], B.height = B.croparea[3] - B.croparea[1]), B.src = F, B.onsuccess = function(a) {
                    delete c.thumb;
                    c.data = a;
                    f.addMedia(c, d, p, h)
                }, w.thumbnailer(B);
            else {
                if (l.toDataURL) return l.toBlob(function(a) {
                    c.data = a;
                    f.addMedia(c, d, p, h)
                });
                var H = {
                    data: {},
                    add: function(a) {
                        H.data[a] = !0
                    },
                    run: function(a) {
                        g.loader && g.loader.stop();
                        var b = H.data;
                        b.clipart && b.stamp && delete b.clipart;
                        for (var c in H.data) H.callbacks[c]();
                        H.callbacks.callback(a)
                    },
                    callbacks: {
                        callback: function(a) {
                            if (d !== c.onsuccess) c.onsuccess();
                            d && d(a)
                        },
                        text: function() {
                            u.refresh && u.refresh("text");
                            a.setTool("text")
                        },
                        stamp: function() {
                            u.refresh && u.refresh("stamp");
                            a.setTool("stamp")
                        },
                        clipart: e,
                        image: e,
                        color: function() {
                            g.palette.setPaintType("color", !0);
                            g.windows.show("#sk-palette")
                        },
                        gradient: function() {
                            g.palette.setPaintType("gradient", !0);
                            g.windows.show("#sk-palette")
                        },
                        pattern: function() {
                            g.palette.setPaintType("pattern", !0);
                            g.windows.show("#sk-palette")
                        }
                    }
                };
                if (A) switch (G) {
                    case "zip":
                        q(l,
                            H);
                        return;
                    case "json":
                        g.open.json(l);
                        return;
                    case "sketchpad":
                    case "sketch":
                        g.open.sketch({
                            blob: l
                        });
                        return;
                    case "svg":
                        if (-1 !== l.src.indexOf("missing-glyph") && -1 !== l.src.indexOf("units-per-em")) {
                            g.assets.addFont(l, H.run, H.run);
                            return
                        }
                        break;
                    case "ttf":
                    case "woff":
                        g.assets.addFont(l, H.run, H.run);
                        return;
                    case "pat":
                        console.log("pat", l);
                        H.run();
                        return;
                    case "abr":
                    case "gbr":
                        H.add("stamp");
                        x(G, l, H.run);
                        return;
                    case "ggr":
                        H.add("gradient");
                        g.style.addFromBlob(l, H.run);
                        return;
                    case "gpl":
                        H.add("color");
                        g.style.addFromBlob(l,
                            H.run);
                        return;
                    case "pdf":
                        m(l, D, H.run, !0, k);
                        return;
                    case "psd":
                        v(l, D, H.run, !0, k);
                        return
                }
                "string" === typeof F ? F.startsWith("{") ? g.open.json(F) : (A = function(a) {
                    k ? g.exec("new-confirm", function() {
                        g.open[G]({
                            src: a,
                            type: G,
                            openAsNew: k,
                            onsuccess: function() {
                                H.run()
                            }
                        })
                    }) : b.add({
                        centerOnPoint: !0,
                        type: G,
                        src: a,
                        x: D.x,
                        y: D.y,
                        width: c.width,
                        height: c.height
                    }, function(a) {
                        H.run(a)
                    })
                }, w.FileInfo.isSVGString(F) ? (H.add(G = "clipart"), g.assets.addClipart(l, A, p, h)) : (H.add(G = "image"), g.assets.addImage(l, A, p, h))) : console.log("unrecognized",
                    l)
            }
        };
        var x = function(a, b, d) {
                var m = g.io[a] && g.io[a].toBitmap;
                if (m) {
                    var p = c.translate("decoding-format", "." + a);
                    g.loader && (g.loader.create("decode", p), g.loader.create("files", "..."));
                    m(b, function(a, b, c, m) {
                        g.loader && (g.loader.create("decode", p, Math.max(0, c - 1) >> 0), g.loader.create("files", b.name || "untitled"));
                        g.assets.addStamp(a, function(a, b) {
                            100 === c ? (g.loader && g.loader.create("decode", p, 99), d && d()) : m && m()
                        })
                    })
                } else e.debug && console.log("missing .abr support"), d && d()
            },
            p = function(a, b, c, d, m) {
                g.save.confirm({
                    oncontinue: function() {
                        a(b,
                            c, d, !1, m)
                    },
                    onrequestsave: function() {
                        g.save.fromQuery()
                    },
                    oncancel: function() {
                        console.log("cancel")
                    }
                })
            },
            m = function(a, b, d, h, f) {
                if (h && f) return p(m, a, b, d, f);
                g.loader && g.loader.create("decoding", c.translate("opening-format", ".PDF") + "...");
                g.open.pdf({
                    file: URL.createObjectURL(a),
                    point: b,
                    openAsNew: f,
                    onprogress: function(a) {
                        g.loader && g.loader.create("decoding", null, a)
                    },
                    onsuccess: function() {
                        f || d && d()
                    },
                    onerror: function() {}
                })
            },
            v = function(a, b, c, d, m) {
                c = new FileReader;
                c.onload = function(a) {
                    a = new Uint8Array(a.target.result);
                    a = new PSD.Parser(a);
                    a.parse();
                    f.addMedia({
                        data: a.imageData.createCanvas(a.header, a.colorModeData),
                        x: b.x,
                        y: b.y
                    })
                };
                c.readAsArrayBuffer(a)
            };
        f.addBackground = function(a, c, d, m) {
            "string" === typeof a && (a = {
                src: a
            });
            c = c || a.onsuccess;
            d = d || a.onerror;
            m = m || a.onprogress;
            var p = function(d) {
                    d.name = "background";
                    d.selectable = !1;
                    d.useStickToBack = !0;
                    b.removeByName("background");
                    b.copyRules(a, d);
                    d = b.addObject(d);
                    b.updateConstrain(d);
                    f.history && f.history.store({
                        cmd: "add",
                        name: "background",
                        data: [d]
                    });
                    f.render.dirty = !0;
                    c && c(d)
                },
                h = g.style.validate(a.src);
            "color" === h || "gradient" === h ? (d = f.container, p({
                type: "rectangle",
                fill: new g.style.Fill(a.src),
                stroke: new g.style.Stroke,
                width: d.offsetWidth,
                height: d.offsetHeight,
                useConstrain: !0,
                useStretchToEdge: !0
            })) : g.assets.add({
                data: a.src,
                onprogress: m,
                onerror: d,
                onsuccess: function(a, b) {
                    var c = b.width || b.vob.width,
                        d = b.height || b.vob.height,
                        m = {
                            type: b.type || "image",
                            src: a,
                            bbox: {}
                        },
                        h = m.bbox,
                        r = l.width,
                        f = l.height;
                    c / d < r / f ? (m.useConstrainX = !0, m.useAlignY = "top", h.width = r, h.height = d / c * r) : (m.useConstrainY = !0, m.useAlignX = "left", h.width = c / d * f, h.height = f);
                    h.owidth = h.width;
                    h.oheight = h.height;
                    p(m)
                }
            })
        };
        f.addMediaFromDrag = function(c) {
            -1 !== String(c).indexOf("Event") && (c = {
                target: this,
                src: this.src
            });
            var m = c.target,
                p = c.event,
                h = c.src || m.getAttribute("data-src") || m.src,
                e = c.type || m.getAttribute("data-type") || "clipart";
            g.assets.add(h);
            var v = d.clone(m, "sk-draggable"),
                u = d.measure(m),
                w = u.padding,
                x = w.top + w.bottom,
                q = u.border,
                k = w.left + q.left,
                G = w.top + q.top,
                H = u.width,
                J = u.height;
            v.style.width = H - (w.left + w.right) + "px";
            v.style.height =
                J - x + "px";
            return eventjs.proxy.drag({
                position: "move",
                target: m,
                event: p,
                listener: function(d, m) {
                    if (!a.media) return console.log("missing toolkit");
                    var p = eventjs.getPageXY(d);
                    if ("down" === m.state) {
                        var t = eventjs.getBBox(m.target);
                        m.offset = {};
                        m.offset.x = t.width / 2 - (p.x - m.x);
                        m.offset.y = t.height / 2 - (p.y - m.y);
                        eventjs.prevent(d)
                    }
                    var g = m.bbox.pageYOffset,
                        y = m.bbox.pageXOffset;
                    v.style.left = m.x + y + k - 1 + "px";
                    v.style.top = m.y + g + G - 1 + "px";
                    if (!v.addedToDOM) {
                        var t = Math.abs(m.x - m.start.x),
                            u = Math.abs(m.y - m.start.y);
                        if (t > H / 2 ||
                            u > J / 2) v.addedToDOM = !0, document.body.appendChild(v)
                    }
                    if ("up" === m.state) {
                        t = p.x - y;
                        u = p.y - g;
                        v.style.display = "none";
                        var w = document.elementFromPoint(t, u);
                        w && w.classList.contains("layer-active") ? (t = a.media, t.device.useMinWidth = 1, t.device.useMaxWidth = 2E3, t = eventjs.getBBox(f.container), u = f.zoom, w = p.y - t.y1 - t.pageYOffset - l.orientY, t = (p.x - t.x1 - t.pageXOffset - l.orientX) / u + m.offset.x + y, u = w / u + m.offset.y + g, b.deselectAll(), b.add({
                                centerOnPoint: !0,
                                type: e,
                                src: h,
                                x: t,
                                y: u
                            }, function(a) {
                                b.select(a);
                                c.ondrop && c.ondrop(a)
                            })) :
                            f.exportDrop(h, t, u);
                        v.addedToDOM && document.body.removeChild(v)
                    }
                }
            })
        };
        f.exportDrop = function(a, b, c) {
            !e.io.exportDrop || 0 < b && 0 < c && b < window.innerWidth && c < window.innerHeight || (b = f.selection.item, g.assets.add({
                data: a,
                type: b ? b.type : f.tool.type,
                onsuccess: function(b) {
                    var c = (w.string.filename(a) || "").split(".").shift();
                    this.vob ? g.download.blob(new Blob([this.stringify()], {
                        type: "image/svg+xml"
                    }), c + ".svg") : g.assets.getBlob(b, function(a) {
                        g.download.blob(a, c + ".png")
                    })
                }
            }))
        };
        f.setMedia = function(c) {
            var m = c.type,
                p = c.src,
                v = c.onsuccess,
                w = c.onprogress,
                x = c.onerror;
            e.doc.editable || "text" === f.tool.type || b.deselectAll();
            var l = f.selection.items,
                q = "select" === f.tool.type,
                B = f.selection.item,
                B = f.toolkitConfig,
                k = [],
                F = [];
            switch (m) {
                case "clipart":
                case "image":
                case "stamp":
                    c = p;
                    "stamp" === m ? (c = c.replace("thumb", "live"), B[m].src = c) : (B[m].src = c, p = a.media, p.device.src = c, p.device.render = void 0);
                    for (var G in l)
                        if (B = b.children[G], "image" === B.type && "clipart" === m ? B.type = "clipart" : "clipart" === B.type && "image" === m && (B.type = "image"), B && B.type ===
                            m)
                            if (l = B.src, B.src = c, b.ensureMaxCopies(B)) {
                                var l = {
                                        id: B.id,
                                        src: l
                                    },
                                    p = {
                                        id: B.id,
                                        src: c
                                    },
                                    H = g.lib[B.type].getEntry(B.src);
                                if (H)
                                    for (var J in g.attrs.__rules) void 0 === H[J] ? void 0 !== B[J] && (l[J] = B[J], p[J] = "", delete B[J]) : (l[J] = B[J], p[J] = H[J], B[J] = H[J]);
                                k.push(l);
                                F.push(p);
                                B.dirtyResource = !0;
                                B.dirtyCheck = !0
                            } else B.src = l;
                    break;
                case "text":
                    for (G in J = c.fontFamily || c.name, p = a.text, p.device.fontFamily = J, B[m].fontFamily = J, l)(B = b.children[G]) && "text" === B.type && (k.push({
                        id: B.id,
                        fontFamily: B.fontFamily
                    }), F.push({
                        id: B.id,
                        fontFamily: J
                    }), B.fontFamily = J, B.dirtyResource = !0)
            }
            k.length && F.length ? (f.selection.length && d.Canvas.clear(f.contexts.active), f.history && f.history.store({
                cmd: "update",
                name: "change-media",
                data: {
                    from: k,
                    to: F
                }
            }), h.preload({
                onerror: x,
                onprogress: w,
                onsuccess: v
            })) : a.setTool({
                type: m,
                onerror: x,
                onsuccess: function() {
                    q ? a.setTool("select") : u.setToolMenu && u.setToolMenu(f.tool.type);
                    v && v()
                }
            });
            f.saveSettings()
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.AddObject = function(g, f) {
        function q(g, d, e) {
            e ? f.render.scene({
                from: "doc.addObject",
                onsuccess: function() {
                    g && g(d)
                }
            }) : g && g(d)
        }
        f.addObject = function(l, d, e, c) {
            function h(a, b) {
                var c = typeof b;
                return typeof D[a] === c ? D[a] : typeof l[a] === c ? l[a] : b
            }

            function b(a, b) {
                return D[a] = h(a, b)
            }

            function a(a) {
                u.debug && console.error(a, arguments);
                e({
                    message: a
                })
            }
            var w = g.detect,
                u = g.feature,
                x = f.render,
                p = f.scene,
                m = f.toolkit,
                v = g.util,
                r = g.vector;
            l = l || {};
            d = d || function() {};
            e = e || function() {};
            c = c || {};
            var y = c.fromSelf || !1,
                t = c.fromCollection || !1,
                E = isFinite(c.useRecord) ? c.useRecord : !0,
                z = isFinite(c.useRender) ? c.useRender : !0,
                C = isFinite(c.useHistory) ? c.useHistory : !0,
                A = l.type;
            if (Array.isArray(l) || l.data && !A) {
                p = l.data || l;
                E = isFinite(l.useRender) ? l.useRecord : !0;
                z = isFinite(l.useRender) ? l.useRender : !0;
                c = l.scale;
                if (isFinite(c))
                    for (var k = 0; k < p.length; k++) {
                        var B = p[k];
                        if (void 0 !== B && !B.useStretchToEdge && !B.useStretchToFit) {
                            var D = B.bbox = B.bbox || {
                                x: 0,
                                y: 0
                            };
                            D.x *= c;
                            D.y *= c;
                            "text" === B.type ? B.fontSize *= c : (D.scale =
                                D.scale || {
                                    x: 1,
                                    y: 1
                                }, D.scale.x *= c, D.scale.y *= c)
                        }
                    }
                var F = [];
                v.Queue({
                    items: p,
                    oncomplete: function() {
                        q(d, F, z)
                    },
                    next: function(a) {
                        var b = this;
                        f.addObject(a, function(a) {
                            F.push(a);
                            b.next()
                        }, function(a) {
                            b.next()
                        }, {
                            fromSelf: y,
                            fromCollection: !0,
                            useRecord: E,
                            useRender: z
                        })
                    }
                })
            } else if (m.exists(A)) {
                f.render.dirtyControls = !0;
                var G = f.toolkitConfig[A];
                c = G.toolkitId;
                if (!0 !== y) {
                    if ("media" === c && l.src) {
                        g.assets.add({
                            type: A,
                            targetId: l.targetId,
                            data: l.src,
                            onsuccess: function(a, b) {
                                m.media.device.src = l.src = a;
                                f.addObject(l, d, e, {
                                    fromSelf: !0,
                                    fromCollection: t,
                                    useRecord: E,
                                    useRender: z
                                })
                            }
                        });
                        return
                    }
                    if ("text" === c && l.fontFamily && (!r.text.supports[G.fontFamily] || G.fontFamily !== l.fontFamily)) {
                        m.text.loadFont({
                            fontFamily: l.fontFamily,
                            onerror: e,
                            onsuccess: function() {
                                G.fontFamily = l.fontFamily;
                                f.addObject(l, d, e, {
                                    fromSelf: !0,
                                    fromCollection: t,
                                    useRecord: E,
                                    useRender: z
                                })
                            }
                        });
                        return
                    }
                }
                p.decompress(l);
                var H = m.getFeature({
                        type: A,
                        toolkitId: c
                    }),
                    D = l.bbox = l.bbox || {},
                    k = l.width,
                    B = l.height;
                D.scale = m.readScale(D) || m.readScale(l) || {
                    x: 1,
                    y: 1
                };
                D.rotate = m.readRotate(D) ||
                    m.readRotate(l) || 0;
                b("units", H.units || "objectBoundingBox");
                b("padding", 0);
                isFinite(h("width", 0)) && (k = b("width", 0));
                isFinite(h("height", 0)) && (B = b("height", 0));
                c = m.getToolkit(A);
                if (w.brush[A])
                    if (l.points || l.data) v = l.points || l.data, "string" === typeof v && (l.path = "M" === v[0] ? r.SVGPath.toVOBPath(v) : r.SVGPath.toVOBPolygon(v));
                    else {
                        console.warn(A + " requires a path!", l);
                        onsuccess && onsuccess();
                        return
                    }
                else if (!k || !B)
                    if (w.shape[A]) k || (D.width = k = B || c.defaultWidth), B || (D.height = B = k || c.defaultHeight);
                    else if (w.media[A])
                    if (B =
                        g.assets.getItem(c.device.src)) "clipart" === B.type ? (B = B.viewBox, k = B[2] - B[0], B = B[3] - B[1]) : (k = B.width, B = B.height), r = f.computed, w = H.maxWidth || v.INFINITY, H = H.maxHeight || v.INFINITY, D.width || D.height || (A = f.viewport, w = Math.min(w, A.width, r.width, k), H = Math.min(H, A.height, r.height, B)), v = v.fitSize(k, B, {
                        width: D.width || "auto",
                        height: D.height || "auto",
                        maxWidth: w,
                        maxHeight: H
                    }), D.width = k = v.width, D.height = B = v.height;
                    else {
                        a("invalid asset");
                        return
                    }
                else if ("text" === A)
                    if (k = p.copyDeepCompress(f.toolkitConfig.text), v.copyInto(l,
                            k), l.content) v = m.text.measureText(l, k), k = r.text.getFontStyle(l), k = r.text.measureTextWidth("M", k), k = v.width + k, B = v.height, D.width = k = D.width || k, D.height = B = D.height || B;
                    else {
                        console.warn("Text requires content!", l);
                        onsuccess && onsuccess();
                        return
                    }
                else if ("group" !== A) {
                    console.warn("Object requires view-box!", l);
                    onsuccess && onsuccess();
                    return
                }
                p = p.getCenterPoint();
                b("x", p.x);
                b("y", p.y);
                if ((p = l.centerOnPoint) || "objectBoundingBox" === D.units && !1 !== p) D.x -= k / 2 * D.scale.x, D.y -= B / 2 * D.scale.y;
                isFinite(D.x) && (D.x += f.originX);
                isFinite(D.y) && (D.y += f.originY);
                x.pointer.place = c.loadObject(l);
                c.createObject({
                    device: x.pointer.place,
                    object: l
                }, function(a) {
                    delete x.pointer.place;
                    C && f.history.store({
                        cmd: "add",
                        name: a.type,
                        data: [a]
                    });
                    q(d, a, z && !t)
                })
            } else a(A + " toolkit not found.")
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Control = function(g, f) {
        function q(a, c) {
            u.VOBPath(a, c.data);
            c && (c.selected || c.hovered) && (c.selected ? (a.save(), a.shadowOffsetX = 0, a.shadowOffsetY = 0, a.shadowBlur = 0, a.shadowColor = "#F00", a.lineWidth = 8, a.strokeStyle = "#F00", a.stroke(), a.lineWidth = 5, a.strokeStyle = "#fff") : (a.save(), a.globalAlpha = 1, a.lineWidth = 5, a.strokeStyle = "#Fff"), a.stroke(), a.restore());
            a.lineWidth = 1.5;
            b.setStyle(a, c)
        }
        var l = g.dom,
            d = f.canvas2d,
            e = f.contexts,
            c = g.feature,
            h = f.scene,
            b = f.toolkit,
            a = g.ui,
            w = g.util,
            u = g.vector,
            x = u.Shape;
        h.control = {};
        h.controlSelection = void 0;
        h.controlActive = {};
        h.controlHover = {};
        h.controlHoverArray = [];
        b.renderSceneControls = function(a) {
            var c = h.hovered,
                d = h.selection,
                m = d.length;
            if (a || c.changed || d.changed || h.control.changed) {
                c.changed = !1;
                d.changed = !1;
                h.control.changed = !1;
                var f = e.active;
                a = f.ctx;
                l.Canvas.clear(f);
                h.controls = [];
                for (var f = h.children, g = 0, u = f.length; g < u; g++) {
                    var w = f[g],
                        x = c.items[g],
                        q = d.items[g];
                    d.idx === g || x && (q || 0 === m) ? b.renderObjectControls(a, w) : (q || x) && b.renderObjectControls(a,
                        w, !0)
                }
                h.controlSelection ? p(!0) : 1 < m && p(!1)
            }
        };
        var p = function() {
            var a = {
                select: {
                    selection: {
                        fill: "rgba(0,240,100,0.20)",
                        stroke: "rgba(0,240,100,1)"
                    },
                    object: {
                        fill: "rgba(255,255,255,0.20)",
                        stroke: "#0E81D4"
                    }
                },
                deselect: {
                    selection: {
                        fill: "rgba(255,50,100,0.20)",
                        stroke: "rgba(255,50,100,1)"
                    },
                    object: {
                        fill: "rgba(0,0,0,0.20)",
                        stroke: "#0E81D4"
                    }
                }
            };
            return function(m) {
                var p = f.pixelRatio,
                    g = f.zoom,
                    u = g * p,
                    x = f.scrollX * p,
                    l = f.scrollY * p,
                    p = e.active,
                    p = p.ctx;
                p.save();
                p.translate(d.tx, d.ty);
                p.scale(u, u);
                if (m) {
                    var A = h.controlSelection;
                    m = A.items;
                    var k = f.selection.length,
                        B = a[A.metaKey && k ? "deselect" : "select"],
                        x = x / u,
                        u = l / u;
                    p.lineWidth = 1 / g;
                    p.fillStyle = B.selection.fill;
                    p.strokeStyle = B.selection.stroke;
                    p.beginPath();
                    p.rect(A.x - x, A.y - u, A.width, A.height);
                    p.fill();
                    p.stroke();
                    p.lineWidth = .75;
                    p.fillStyle = B.object.fill;
                    p.strokeStyle = B.object.stroke;
                    var g = w.copy(f.selection.items),
                        u = h.children,
                        D;
                    for (D in m) m[D] ? (k++, g[D] = !0) : (k--, delete g[D]), (x = u[D]) && x.trx2D && (x.selected = !!g[D], B = x.bbox, l = x.trx2D, A = B.width * B.scale.x, B = B.height * B.scale.y, p.save(),
                        l.apply(p, !0), p.beginPath(), b.getFeature(x).showGhostPath ? q(p, x) : (p.rect(0, 0, A, B), p.fill(), p.stroke()), p.restore())
                } else g = f.selection.items, k = f.selection.length;
                c.debug && 1 < k && (p = e.active, p = p.ctx, D = f.selection.getBBox(g), p.lineWidth = 1, p.shadowOffsetX = 1, p.shadowOffsetY = 1, p.shadowBlur = 0, p.shadowColor = "#fff", p.strokeRect((D.x1 >> 0) - .5, (D.y1 >> 0) - .5, (D.x2 - D.x1 >> 0) + 1, (D.y2 - D.y1 >> 0) + 1), p.restore());
                p.restore()
            }
        }();
        b.renderObjectControls = function(a, c, p) {
            if (!1 !== c.visible) {
                var e = c.trx2D;
                if (!e || !e.apply) console.warn("transform not calculated");
                else if ("anchor" !== h.controlActive.id) {
                    var g = f.selection.id === c.id,
                        u = c.brush;
                    if (u && u.drawControl) a = u.drawControl(c), g && (h.controls = a);
                    else {
                        var w = c.bbox,
                            x = f.pixelRatio,
                            l = f.zoom,
                            k = l * x,
                            D = x / k,
                            F = w.scale.x,
                            G = w.scale.y,
                            H = w.width,
                            J = w.height,
                            u = H * F,
                            O = J * G,
                            K = b.getFeature(c),
                            L = f.theme.getControls(c),
                            M = L.anchor || {},
                            Q = !(!h.controlActive.rotating || !L.spinner),
                            R = !!h.controlActive.scaling;
                        !1 === Q && (K.showBBox || K.showGhostPath) && (a.save(), a.translate(d.tx, d.ty), a.scale(k, k), e.apply(a, !0), a.beginPath(), K.showGhostPath ?
                            q(a, c) : (a.rect(-.5, -.5, u, O), g = g ? M.focus || M : M.normal || M, a.lineWidth = (g.lineWidth || .75) * x, a.shadowOffsetX = g.shadowOffsetX || 1, a.shadowOffsetY = g.shadowOffsetY || 1, a.shadowBlur = g.shadowBlur || 0, a.shadowColor = g.strokeStyle || "#666", a.strokeStyle = g.shadowColor || "#fff", a.stroke()), a.restore());
                        if (!p) {
                            h.controls = [];
                            p = e.point2d(0 > F ? F * H : 0, 0 > G ? G * J : 0);
                            L.anchor && (g = L.anchor, x = g.padding, D *= x, K = "", f.selection.items[c.zIndex] && (K = g["title." + c.type + ":selected"] || g["title:selected"]), K || (K = g["title." + c.type] || g.title ||
                                ""), h.controls.push({
                                id: "anchor",
                                layerId: c.id,
                                layerIdx: c.zIndex,
                                type: "button",
                                cursor: g.cursor,
                                title: K,
                                event: g.command,
                                padding: x,
                                bbox: {
                                    units: w.units,
                                    x: p.x,
                                    y: p.y,
                                    left: 1.5 * -x,
                                    top: 1.5 * -x,
                                    width: Math.abs(F * H + D),
                                    height: Math.abs(G * J + D),
                                    scale: {
                                        x: 1,
                                        y: 1
                                    },
                                    rotate: w.rotate
                                }
                            }));
                            if (!R && L.spinner && !1 !== c.useControlSpinner && (a.save(), a.translate(d.tx, d.ty), a.scale(k, k), a.lineWidth = 1 / l, a.beginPath(), k = L.height + L.padding, w = u / 2, Q ? (l = e.spinnerDistance, g = L["spinner-focus"], a.strokeStyle = g.fillStyle, a.moveTo(e.cp.x, e.cp.y)) :
                                    (l = k / l / f.scale * (0 < G ? -1 : 1), a.moveTo(e.n.x, e.n.y)), e = e.point2d(w, l), a.lineTo(e.x, e.y), a.stroke(), a.restore(), m(a, c, L, {
                                        id: "spinner",
                                        x: w,
                                        y: l
                                    }), Q)) return;
                            e = L.nw && !1 !== c.useControlNW;
                            Q = L.ne && !1 !== c.useControlNE;
                            l = L.se && !1 !== c.useControlSE;
                            G = L.sw && !1 !== c.useControlSW;
                            w = L.n && !1 !== c.useControlN;
                            k = L.e && !1 !== c.useControlE;
                            F = L.s && !1 !== c.useControlS;
                            H = L.w && !1 !== c.useControlW;
                            R = J = L.padding;
                            L.nw_spinner && (m(a, c, L, {
                                id: "nw_spinner",
                                color: "#00f",
                                x: 0,
                                y: 0
                            }), m(a, c, L, {
                                id: "ne_spinner",
                                color: "#f0f",
                                x: 0,
                                y: 0
                            }), m(a, c, L, {
                                id: "se_spinner",
                                color: "#f00",
                                x: 0,
                                y: 0
                            }), m(a, c, L, {
                                id: "sw_spinner",
                                color: "#ff0",
                                x: 0,
                                y: 0
                            }));
                            w && m(a, c, L, {
                                id: "n",
                                color: "#e9e34d",
                                x: u / 2,
                                y: 0,
                                xPad: J,
                                yPad: R
                            });
                            k && m(a, c, L, {
                                id: "e",
                                color: "#e13b3b",
                                x: u,
                                y: O / 2,
                                xPad: J,
                                yPad: R
                            });
                            F && m(a, c, L, {
                                id: "s",
                                color: "#e9e34d",
                                x: u / 2,
                                y: O,
                                xPad: J,
                                yPad: R
                            });
                            H && m(a, c, L, {
                                id: "w",
                                color: "#e13b3b",
                                x: 0,
                                y: O / 2,
                                xPad: J,
                                yPad: R
                            });
                            e && m(a, c, L, {
                                id: "nw",
                                color: "#4fe896",
                                x: 0,
                                y: 0
                            });
                            Q && m(a, c, L, {
                                id: "ne",
                                color: "#3b8de1",
                                x: u,
                                y: 0
                            });
                            l && m(a, c, L, {
                                id: "se",
                                color: "#4fe896",
                                x: u,
                                y: O
                            });
                            G && m(a, c, L, {
                                id: "sw",
                                color: "#3b8de1",
                                x: 0,
                                y: O
                            });
                            L.nw_spinner_area &&
                                (m(a, c, L, {
                                    id: "nw_spinner_area",
                                    color: "#f00",
                                    x: 0,
                                    y: 0
                                }), m(a, c, L, {
                                    id: "ne_spinner_area",
                                    color: "#ff0",
                                    x: 0,
                                    y: 0
                                }), m(a, c, L, {
                                    id: "se_spinner_area",
                                    color: "#0f0",
                                    x: 0,
                                    y: 0
                                }), m(a, c, L, {
                                    id: "sw_spinner_area",
                                    color: "#0ff",
                                    x: 0,
                                    y: 0
                                }))
                        }
                    }
                }
            }
        };
        var m = function() {
            return function(a, b, m, p) {
                var e = p.id,
                    g = eventjs.isTouch ? "normal" : h.controlActive.id === e ? "focus" : h.controlHover.id === e ? "hover" : "normal",
                    u = m[e + "-" + g] || m[e];
                if (u) {
                    var x = f.zoom,
                        l = x * f.pixelRatio,
                        q = x * f.scale;
                    if (isFinite(u.padding)) var k = u.padding,
                        F = k,
                        G = k;
                    else k = m.padding, F =
                        p.xPad, G = p.yPad, F = isFinite(F) ? F : k, G = isFinite(G) ? G : k;
                    var F = F / x,
                        G = G / x,
                        H = b.bbox,
                        J = H.scale.x,
                        O = H.scale.y,
                        k = 0 > J ? -1 : 1,
                        K = 0 > O ? -1 : 1,
                        L = (k * u.left || 0) / x,
                        M = (K * u.top || 0) / x,
                        J = {
                            inherit: m.width / x * k,
                            percent: H.width * J
                        },
                        Q = {
                            inherit: m.height / x * K,
                            percent: H.height * O
                        };
                    m = u.width;
                    var R = u.height;
                    "string" === typeof m && (m = w.parseMath(m, J) * q);
                    "string" === typeof R && (R = w.parseMath(R, Q) * q);
                    O = m / q;
                    q = R / q;
                    R = u.x;
                    R = "string" === typeof R ? w.parseMath(R, J) - O / 2 : p.x - O / 2;
                    J = u.y;
                    J = "string" === typeof J ? w.parseMath(J, Q) - q / 2 : p.y - q / 2;
                    0 > O && (R += O, O = -O);
                    0 >
                        q && (J += q, q = -q);
                    J = b.trx2D.point2d(R, J);
                    e = {
                        id: e,
                        title: u.title,
                        type: "button",
                        cursor: u.cursor || "default",
                        hovered: "hover" === g,
                        event: u.command,
                        onmousedown: u.onmousedown,
                        onmouseup: u.onmouseup,
                        onhover: u.onhover,
                        bbox: {
                            units: H.units,
                            x: J.x,
                            y: J.y,
                            left: -F + L,
                            top: -G + M,
                            width: O * f.scale + 2 * F,
                            height: q * f.scale + 2 * G,
                            rotate: H.rotate,
                            scale: {
                                x: 1,
                                y: 1
                            }
                        }
                    };
                    H = e.bbox;
                    h.controls.push(e);
                    a.save();
                    a.beginPath();
                    a.translate(d.tx, d.ty);
                    a.scale(l, l);
                    a.translate(H.x, H.y);
                    a.rotate(H.rotate * w.DEG_RAD);
                    c.debugCache && (a.save(), a.globalAlpha =
                        "hover" === g ? 1 : .5, a.fillStyle = p.color, a.fillRect(H.left, H.top, H.width, H.height), a.restore());
                    p = "svg" === u.shape ? m / u.viewBox[2] : 1;
                    a.translate(L, M);
                    u.render({
                        ctx: a,
                        object: b,
                        control: e,
                        matrix: {
                            a: p * k / x,
                            b: 0,
                            c: 0,
                            d: p * K / x,
                            x: 0,
                            y: 0
                        }
                    });
                    a.restore()
                }
            }
        }();
        b.renderCenterPoint = function(b) {
            if ("reset" === b) a.tooltip && a.tooltip.update("");
            else {
                var c = b.point,
                    m = b.origin,
                    p = b.trx,
                    h = b.bbox,
                    g = b.useRotate,
                    u = b.useScale,
                    l = b.useMove,
                    q = h.rotate,
                    k = h.scale.x,
                    D = h.scale.y;
                a.tooltip && (u || l || g) && (u ? b.proportional ? (p = Math.abs(h.width * k).toFixed(0),
                    D = Math.abs(h.height * D).toFixed(0), p = "\t\t\t\t\t\t\tW: " + p + " px<br>\t\t\t\t\t\t\tH: " + D + " px\t\t\t\t\t\t") : (p = (100 * k).toFixed(0), D = (100 * D).toFixed(0), p = "\t\t\t\t\t\t\tSX: " + p + " %<br>\t\t\t\t\t\t\tSY: " + D + " %\t\t\t\t\t\t") : l ? (D = p.nw, h = p.ne, b = p.se, g = p.sw, p = Math.min(D.x, h.x, b.x, g.x).toFixed(2), D = Math.min(D.y, h.y, b.y, g.y).toFixed(2), p = "\t\t\t\t\t\tX: " + p + " px<br>\t\t\t\t\t\tY: " + D + " px\t\t\t\t\t") : p = Math.round((q + 360) % 360) + String.fromCharCode(176), a.tooltip.update(p, c));
                p = f.pixelRatio;
                D = p * f.zoom;
                c = m.x *
                    D + d.tx;
                m = m.y * D + d.ty;
                p *= 10;
                D = e.active.ctx;
                D.save();
                D.beginPath();
                D.shadowOffsetX = 1;
                D.shadowOffsetY = 1;
                D.shadowColor = "rgba(255,255,255,0.5)";
                D.shadowBlur = 0;
                D.beginPath();
                D.translate(c, m);
                D.rotate((q + 45) * w.DEG_RAD);
                x.cross(D, 0, 0, p, p);
                D.shadowColor = "rgba(0,0,0,0.5)";
                D.strokeStyle = "#dd167a";
                D.stroke();
                D.restore()
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.ControlEvent = function(g, f) {
        function q(e, g, A, q) {
            function k() {
                if ((eventjs.altKey || c.canvas.useGroupBBox) && xa) {
                    var a = b.getBoundingBox({
                        useSelection: !0
                    });
                    return b.getObjectOrigin(a)
                }
                var a = H[pa] || H.cp,
                    d;
                d = Ga ? H.cp : H[ma] || H.cp;
                return {
                    x: d.x / f.scale,
                    y: d.y / f.scale,
                    rad: x.angle(a, d) + Math.PI / 2
                }
            }

            function D(a, b, c) {
                var d = b + L.rotate;
                b = x(Sa);
                d = x.atRadianDistance(b, d * u.DEG_RAD, 1);
                d = x.nearestOnLine(a, b, d);
                a = x.distance(b, d) || u.ZERO;
                b = x.sub(b, d);
                var d = 0 > b.x,
                    m = 0 > b.y;
                void 0 ===
                    Q[c] && (Q[c] = {
                        x: d,
                        y: m
                    });
                if (ea && la || "xy" === c) return a;
                b = Q[c];
                return a * (b.x === d && b.y === m ? 1 : -1)
            }

            function F(a) {
                var b = D(a, 0, "x"),
                    c = D(a, 90, "y");
                if (Ea) return {
                    x: Za ? L.width : b,
                    y: ta ? L.height : c
                };
                if (Za && !ka) return {
                    x: u.ZERO,
                    y: c
                };
                if (ta && !ka) return {
                    x: b,
                    y: u.ZERO
                };
                if (ka) {
                    if (qa) var d = 0 > b ? -1 : 1,
                        m = 0 > c ? -1 : 1;
                    else m = d = 1;
                    xa ? (b = p[pa], 0 > L.scale.x !== 0 > L.scale.y && (b += 90), a = D(a, b, "xy")) : a = Math.max(Math.abs(b), Math.abs(c));
                    return {
                        x: a * d,
                        y: a * m
                    }
                }
                return {
                    x: b,
                    y: c
                }
            }
            var G = l();
            if (void 0 !== G) {
                var H = G.trx2D,
                    J = f.zoom,
                    O = f.zoom * f.scale,
                    K = f.pixelRatio,
                    L = G.bbox,
                    M = u.copy(L),
                    Q = {},
                    R, U, V = {},
                    P = {},
                    X, N, W, T, Y, S, ca;
                e = eventjs.altKey;
                var ha = eventjs.shiftKey,
                    ea, da, la, ka, aa = a.getFeature(G),
                    qa = aa.flippable,
                    xa = 1 < f.selection.length,
                    Ea = "text" === G.type && "pre-nowrap" !== G.whiteSpace && (aa.useResize || e || q),
                    Ga = "objectBoundingBox" === L.units && !Ea,
                    pa = b.controlHover.id || "",
                    ma = m[pa],
                    Ka = v[pa],
                    ta = !!t[pa],
                    Za = !!E[pa],
                    ib = !!y[pa],
                    Sa = k();
                return function(m, p) {
                    var e = p.env;
                    eventjs.prevent(m);
                    W = a.cleanState(p.state);
                    T = f.getActionUid(p);
                    Y = p.pointerStart;
                    S = p.pointerEnd;
                    ca = p.pointerMove;
                    ea = !(!1 === g || !1 === G.rotatable || !0 === ib);
                    da = ha;
                    la = !(!1 === A || !1 === G.scalable);
                    ka = ha === ib || g && A;
                    Y ? (e.cache = {}, b.controlActive = {
                        id: pa,
                        scaling: la,
                        rotating: ea
                    }, xa && la && (Ea || !ka) && (xa = !1, f.selection.reset(), f.selection.select(f.hovered.idx), c.tools.select.useConfigure && w.configurePane())) : S && (b.controlActive = {});
                    if (!f.__rendering || !ca) {
                        var v = {
                            x: (p.x - d.x / K) / O,
                            y: (p.y - d.y / K) / O
                        };
                        if (Ea && Ka && !xa) {
                            var t = v;
                            Y && (v = p.env, v.bbox = u.copy(L), v.width = L.width, v.height = L.height, v.x = L.x, v.y = L.y, v.offsetX = 0, v.offsetY = 0);
                            var v =
                                p.env,
                                y = v.bbox.scale,
                                x = y.x,
                                y = y.y,
                                z = 0 > x ? -1 : 1,
                                l = 0 > y ? -1 : 1,
                                q = F(t),
                                t = q.x / x,
                                q = q.y / y,
                                E = Ka.x,
                                k = Ka.y;
                            if (Y) v.flipX = 0 > x, v.flipY = 0 > y, v.offsetX = (Math.abs(t) - v.width) * z, v.offsetY = (Math.abs(q) - v.height) * l, -1 === E && 0 > x && (v.width *= -1), -1 === k && 0 > y && (v.height *= -1);
                            else {
                                var B = G.toolkit,
                                    I = B.minWidth,
                                    B = B.minHeight,
                                    Ga = 1,
                                    Q = 1,
                                    ya = 0,
                                    ja = 0,
                                    Na = 0,
                                    Ba = 0;
                                !0 !== aa.useAutoWidth && (ya = t - v.width - v.offsetX, v.width += ya, qa ? (z = 0 > t ? -1 : 1, ya = Math.max(I, v.width * z) - L.width, v.flipX !== 0 > t && (v.flipX = !v.flipX, Ga = -1)) : (v.width = Math.max(I, v.width * z), ya =
                                    (v.width - L.width) * z), -1 === E && (Na = -ya * Math.abs(x) * z, v.x += Na));
                                !0 !== aa.useAutoHeight && (ja = q - v.height - v.offsetY, v.height += ja, qa ? (l = 0 > q ? -1 : 1, ja = Math.max(B, v.height * l) - L.height, v.flipY !== 0 > q && (v.flipY = !v.flipY, Q = -1)) : (v.height = Math.max(B, v.height * l), ja = (v.height - L.height) * l), -1 === k && (Ba = -ja * Math.abs(y) * l, v.y += Ba));
                                f.selection.transform({
                                    cache: v.cache,
                                    origin: Sa,
                                    pointerId: T,
                                    state: W,
                                    sx: Ga,
                                    sy: Q,
                                    width: ya,
                                    height: ja,
                                    x: Na,
                                    y: Ba
                                })
                            }
                        } else ea && (x = Sa.y - v.y || u.ZERO, x = -Math.atan2(Sa.x - v.x || u.ZERO, x) * u.RAD_DEG + 180, y = 0,
                            da && (x -= x % 5, y = L.rotate % 5), void 0 === R && (R = x), U = x - R - y, R = x), la && (y = F(v), void 0 === V.x && (V.x = y.x), void 0 === V.y && (V.y = y.y), z = M.scale, x = y.x / V.x * z.x || (Za ? 1 : u.ZERO), y = y.y / V.y * z.y || (ta ? 1 : u.ZERO), X = x / (P.x || x), N = y / (P.y || y), P.x = x, P.y = y), f.selection.transform({
                            cache: e.cache,
                            pointerId: T,
                            state: W,
                            origin: Sa,
                            control: ma,
                            rotate: U,
                            sx: X,
                            sy: N
                        }), "spinner" === pa && (y = 0 > L.scale.y ? -1 : 1, x = -Math.abs(D(v, 90, "y")), H.spinnerDistance = (x + L.height * L.scale.y / 2 * y) * y), g && c.ui.cursorDynamic && b.controlHover.id && w.setCursor(b.controlHover.cursor,
                            G), ea && f.on.rotateEvent && f.on.rotateEvent(W), la && f.on.scaleEvent && f.on.scaleEvent(W);
                        if (Y || ca) {
                            var ba;
                            eventjs.useCSSTransform ? ba = eventjs.getPageXY(m) : -1 !== pa.indexOf("spinner") ? (e = p.bbox, ba = {
                                x: p.x + e.x1 - e.scrollLeft,
                                y: p.y + e.y1 - e.scrollTop
                            }) : H[pa] && (e = e.metrics || (e.metrics = eventjs.getBBox(m.target)), v = H[pa], ba = {
                                x: v.x * J + e.x1 - e.pageXOffset + d.tx / K,
                                y: v.y * J + e.y1 - e.pageYOffset + d.ty / K
                            });
                            ba && (h.dirtyCenterPoint = {
                                point: ba,
                                origin: H.cp,
                                bbox: L,
                                useRotate: ea,
                                useScale: la,
                                proportional: r[pa]
                            })
                        }
                        h.dirty = !0;
                        h.dirtyControls = !0;
                        S && (h.dirtyCenterPoint = "reset")
                    }
                }
            }
        }

        function l() {
            var a = b.getFocused() || b.getOneSelected();
            if (a && (void 0 === f.selection.item && f.scene.select(a), a.trx2D)) return a
        }
        var d = f.canvas2d,
            e = f.contexts,
            c = g.feature,
            h = f.render,
            b = f.scene,
            a = f.toolkit,
            w = g.ui,
            u = g.util,
            x = g.vector.Point;
        a.contextEvent = function() {
            return function(b, c) {
                eventjs.prevent(b);
                if (c.pointerStart) {
                    a.text && a.text.hide();
                    h.dirtyControls = !0;
                    h.dirty = !0;
                    var d = eventjs.getPageXY(b),
                        m = eventjs.getBBox(b.target);
                    w.contextMenu.show({
                        menu: "selectSingle",
                        at: {
                            x: d.x - m.pageXOffset + 5,
                            y: d.y - m.pageYOffset + 5
                        }
                    })
                }
            }
        };
        a.deleteEvent = function() {
            return function(c, d) {
                eventjs.prevent(c);
                if (d.pointerEnd && (b.controls[1] || {}).hovered) {
                    f.selection.remove();
                    a.text && a.text.hide();
                    var m = 0,
                        p = setInterval(function() {
                            var a = e.active,
                                b = a.ctx;
                            b.save();
                            b.globalAlpha = .25;
                            b.globalCompositeOperation = "destination-out";
                            b.fillRect(0, 0, a.width, a.width);
                            b.restore();
                            10 < ++m && (clearInterval(p), h.dirty = !0)
                        }, 25)
                }
            }
        };
        a.moveEvent = function() {
            var c = l();
            if (c) {
                var d = f.zoom * f.scale,
                    m = c.trx2D,
                    p = c.bbox;
                return function(e, r) {
                    eventjs.prevent(e);
                    var v = r.env,
                        g = a.cleanState(r.state),
                        t = r.pointerMoved,
                        y = r.pointerMove,
                        u = r.pointerEnd;
                    r.pointerStart ? (v.x = 0, v.y = 0, v.scrollX = 0, v.scrollY = 0, v.cache = {}) : u ? b.controlActive = {} : t && (b.controlActive = {
                        id: "origin",
                        moving: !0
                    });
                    if (1 === f.selection.length && c.brush && c.brush.move) c.brush.move(r);
                    else {
                        var w = 0,
                            x = 0;
                        y && (y = r.y - v.y, x = f.scrollY - v.scrollY, w = (r.x - v.x + (f.scrollX - v.scrollX)) / d, x = (y + x) / d);
                        v.x = r.x;
                        v.y = r.y;
                        v.scrollX = f.scrollX;
                        v.scrollY = f.scrollY;
                        if (w || x || u) f.selection.transform({
                            cache: v.cache,
                            pointerId: f.getActionUid(r),
                            state: g,
                            x: w,
                            y: x
                        }), h.dirty = !0, h.dirtyControls = !0, h.dirtyCenterPoint = u ? "reset" : {
                            point: eventjs.getPageXY(e),
                            trx: m,
                            origin: m.cp,
                            bbox: p,
                            useMove: t,
                            useScale: !t,
                            proportional: !0
                        }, f.on.moveEvent && f.on.moveEvent(g)
                    }
                }
            }
        };
        a.resizeEvent = function(a) {
            return q(a, !1, !1, !0)
        };
        a.scaleEvent = function(a) {
            return q(a, !1, !0, !1)
        };
        a.rotateEvent = function(a) {
            return q(a, !0, !1, !1)
        };
        a.rotateScaleEvent = function(a) {
            return q(a, !0, !0, !1)
        };
        var p = {
                n: 270,
                e: 0,
                s: 90,
                w: 180,
                ne: 315,
                se: 45,
                sw: 135,
                nw: 225
            },
            m = {
                n: "s",
                e: "w",
                s: "n",
                w: "e",
                ne: "sw",
                se: "nw",
                sw: "ne",
                nw: "se"
            },
            v = {
                e: {
                    x: 1,
                    y: 1
                },
                w: {
                    x: -1,
                    y: 1
                },
                n: {
                    x: 1,
                    y: -1
                },
                s: {
                    x: 1,
                    y: 1
                },
                ne: {
                    x: 1,
                    y: -1
                },
                se: {
                    x: 1,
                    y: 1
                },
                sw: {
                    x: -1,
                    y: 1
                },
                nw: {
                    x: -1,
                    y: -1
                }
            },
            r = {
                ne: !0,
                se: !0,
                sw: !0,
                nw: !0
            },
            y = {
                e: !0,
                w: !0,
                n: !0,
                s: !0
            },
            t = {
                e: !0,
                w: !0
            },
            E = {
                n: !0,
                s: !0
            }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneFind = function(g, f) {
        function q(a) {
            var b = f.zoom;
            return {
                x: a.x - f.scrollX / b,
                y: a.y - f.scrollY / b
            }
        }
        var l = f.canvas2d,
            d = f.contexts,
            e = g.feature,
            c = f.render,
            h = f.scene,
            b = f.toolkit,
            a = g.vector,
            w = a.Polygon,
            u = a.Point;
        h.findInRect = function(a) {
            var c = a.rect || a,
                m = a.objects || h.children,
                p = a.deselect || !1;
            a = a.usePointInBBox || !1;
            if (2 === c.length) var e = q(c[0]),
                r = q(c[1]),
                c = [e, u(r.x, e.y), r, u(e.x, r.y)];
            else e = q(c[0]), r = q(c[2]);
            var v = d.draw.ctx;
            v.rect(e.x + .5, e.y + .5, r.x - e.x, r.y - e.y);
            for (var e = f.selection, r = e.length, p = p && r, r = {}, g = m.length; g--;) {
                var t = m[g];
                if (!1 !== t.selectable && !1 !== t.visible) {
                    var y = t.trx2D;
                    if (y && y.point2d) {
                        var x = [y.nw, y.ne, y.se, y.sw],
                            l = t.bbox.scale;
                        0 > l.x * l.y && x.reverse();
                        if (w.SAT(c, x))
                            if (b.getFeature(t).usePointInPath && !1 === a)
                                for (t = t.data, x = t.length, l = 0; l < x; l++) {
                                    var E = t[l],
                                        E = y.point2d(E.x, E.y);
                                    if (v.isPointInPath(E.x, E.y)) {
                                        if (p)
                                            if (e.items[g]) r[g] = !1;
                                            else continue;
                                        else r[g] = !0;
                                        break
                                    }
                                } else p ? e.items[g] && (r[g] = !1) : r[g] = !0
                    }
                }
            }
            return r
        };
        h.findAtPoint = function(a) {
            var d;

            function m(a) {
                return y ? (u.push(a), u) : a
            }
            var r = q(p(a.point)),
                v = a.objects || h.children,
                g = a.selection || {},
                t = a.searchParam || {
                    selectable: !0
                },
                y = a.getArray || !1,
                u = [],
                x = !e.doc.editable,
                w = c.cache.pad,
                l = f.pixelRatio,
                E = void 0;
            if (a.useFocusPriority && (a = f.scene.getFocused()) && h.isPointInControl(r, a)) return m(a.zIndex);
            for (a = v.length; a--;) {
                var k = v[a];
                if (!1 !== k.visible) {
                    var Q = k.bbox;
                    if (Q) {
                        d = "button" === k.type;
                        if (!d)
                            if (x) continue;
                            else {
                                if (t.excludeType && k.type === t.excludeType) continue;
                                if (t.selectable && !1 === k.selectable) continue;
                                if (t.toolkitId && k.toolkitId !== t.toolkitId) continue;
                                if (t.type && k.type !== t.type) continue
                            }
                        if (h.isPointInControl(r, k)) {
                            var R = b.getFeature(k),
                                U = Q.scale,
                                V = U.x,
                                U = U.y;
                            if (d) {
                                if (k.event) return m(a);
                                u.push(a)
                            } else {
                                if (g[a]) return m(a);
                                if ((R.usePointInPath || R.usePointInImageData) && k.ctx) {
                                    d = k.ctx;
                                    var P = h.pointInObjectFromScene(r, k),
                                        k = k.__offset || h.calcOffset(k),
                                        X = Math.abs(V),
                                        N = Math.abs(U),
                                        W = P.x,
                                        T = P.y;
                                    0 > V && (W = -W + P.bbox_width);
                                    0 > U && (T = -T + P.bbox_height);
                                    W = W * X * l + w;
                                    T = T * N * l + w;
                                    W += k.x || 0;
                                    T += k.y || 0;
                                    W = Math.round(W);
                                    T = Math.round(T);
                                    if (R.usePointInPath && d.isPointInPath(W, T) || R.usePointInImageData && (d = d.getImageData(W, T, 1, 1)) && 8 < d.data[3]) return m(a)
                                }
                                if (R.usePointNearest) return m(a);
                                R.usePointInBBox && (Q = Q.width * V * Q.height * U, void 0 === E || E >= Q) && (u.push(a), E = Q)
                            }
                        }
                    }
                }
            }
            return y ? u : u.pop()
        };
        h.pointsIn = function(a, b, c) {
            a = h[a];
            for (var d = [], m = 0, p = b.length; m < p; m++) d.push(a(b[m], c));
            return d
        };
        h.pointInPeerSceneFromCanvas = function(a) {
            a = p(a);
            var b = f.scale,
                c = f.zoom,
                d = f.scrollX,
                m = f.scrollY;
            a.x = a.x / b + (d - d / c);
            a.y = a.y / b + (m - m / c);
            return a
        };
        h.pointInCanvasFromPeerScene =
            function(a) {
                a = r(a);
                var b = f.scale,
                    c = f.zoom,
                    d = f.scrollX,
                    m = f.scrollY;
                a.x = a.x * b + (d - d * c);
                a.y = a.y * b + (m - m * c);
                return a
            };
        h.pointInObjectFromCanvas = function(a, b) {
            return x(p(a), b)
        };
        var x = h.pointInObjectFromScene = function(a, b) {
            var c = b.trx2DInv || h.calcTransform2DInv(b),
                d = b.bbox;
            a = c.point2d(a.x, a.y);
            a.x -= c.tlx + (d.left || 0);
            a.y -= c.tly + (d.top || 0);
            a.bbox_x = c.tlx;
            a.bbox_y = c.tly;
            a.bbox_width = d.width;
            a.bbox_height = d.height;
            return a
        };
        h.pointInSceneFromEvent = function(a) {
            return p(m(a))
        };
        h.pointInSceneFromWindow = function(a) {
            return p(v(a))
        };
        var p = h.pointInSceneFromCanvas = function(a) {
                var b = f.zoom,
                    c = f.zoom * f.pixelRatio;
                return {
                    x: a.x / b - 1 * l.tx / c,
                    y: a.y / b - 1 * l.ty / c
                }
            },
            m = h.pointInCanvasFromEvent = function(a) {
                return eventjs.getPointInNode(a, f.container)
            },
            v = h.pointInCanvasFromWindow = function(a) {
                var b = eventjs.getBBox(f.container);
                return {
                    x: a.x - b.x1,
                    y: a.y - b.y1
                }
            },
            r = h.pointInCanvasFromScene = function(a) {
                var b = f.zoom,
                    c = f.pixelRatio;
                return {
                    x: a.x * b + 1 * l.tx / c,
                    y: a.y * b + 1 * l.ty / c
                }
            },
            y = h.pointInSceneFromObject = function(a) {
                a = a.bbox;
                return {
                    x: a.x + a.width / 2 * a.scale.x,
                    y: a.y + a.height / 2 * a.scale.y
                }
            };
        h.pointInWindowFromObject = function(a) {
            return t(y(a))
        };
        var t = h.pointInWindowFromScene = function(a) {
                var b = f.pixelRatio;
                return E({
                    x: a.x + l.tx / b,
                    y: a.y + l.ty / b
                })
            },
            E = h.pointInWindowFromCanvas = function(a) {
                var b = eventjs.getBBox(f.container);
                return {
                    x: a.x + b.x1,
                    y: a.y + b.y1
                }
            };
        h.isPointInControl = function(a, b) {
            var c = b.trx2D;
            if (c) return u.inRect(a, c.nw, c.ne, c.se);
            var d = h.pointInObjectFromScene(a, b),
                c = d.bbox_width,
                m = d.bbox_height,
                p = d.bbox_x,
                e = d.bbox_y,
                f = d.x + p,
                d = d.y + e;
            return f > p && d > e && f < p +
                c && d < e + m
        };
        h.findPixel = function(a, b, c) {
            var d = f.pixelRatio;
            a = f.contexts.layer0.ctx.getImageData(a.x * d, a.y * d, b || 1, c || 1).data;
            b = {};
            c = 0;
            for (d = a.length; c < d; c++) {
                var m = c % 4;
                b[m] = void 0 === b[m] ? a[c] : (b[m] + a[c]) / 2
            }
            return b
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.History = function(g, f) {
        function q(a) {
            --a.steps;
            if (v.vector) r.vector[a.cmd](a.steps, a.cmdSource);
            else if (v.bitmap) r.bitmap[a.cmd](a.steps, a.cmdSource);
            if (a.steps) q(a);
            else a.onsuccess()
        }

        function l(a, b, c, d) {
            b = b || {};
            var p = a.cmd,
                h = a.data;
            if (k !== t.current) {
                k = t.current;
                "remove" === p ? c && (p = "add") : "add" === p && c && (p = "remove");
                var r = y[p];
                if (r) r(p, h, c, b, d, a.userId), g.__nodejs || d || u.preload({
                    viaPeer: !0
                });
                else {
                    a = c ? h.from : h.to;
                    if (Array.isArray(a)) {
                        c = 0;
                        for (p = a.length; c < p; c++)
                            if (h =
                                a[c], r = x.getById(h.id)) h.labels && (r.labels = []), m.copyInto(h, r), x.decompress(r), h.fill && delete r.fill.__colors, h.stroke && delete r.stroke.__colors, delete r.__offset, x.setDirtyPixelData(r), h.content ? (r.__textMetrics = void 0, r.dirtyCheck = !0) : h.color || h.fillStyle || h.bbox && h.bbox.scale ? (r.dirtyCheck = !0, r.dirtyTransform = !0, delete r.inbounds) : (r.dirtyCheck = !0, r.dirtyResource = !0);
                        void 0 === b && e(a)
                    } else f.mixinMetaData(a, f);
                    g.__nodejs || d || (u.preload({
                        viaPeer: !0
                    }), g.ui.configurePane())
                }
            }
        }

        function d() {
            b.fs.autosave &&
                g.fs.authorized && (clearTimeout(d.timeout), d.timeout = setTimeout(function() {
                    f.__interacting ? d() : g.fs.saveProject({
                        onsuccess: function(data) {                            
                            g.ui.success("changes-saved", 1E3)
                        }
                    })
                }, 1E3))
        }

        function e(a) {
            if (v.autoSelect) {
                if ("select" === f.tool.type) {
                    for (var b = 0; b < a.length; b++) {
                        var c = a[b];
                        isFinite(c) ? x.selectById(c, !1) : x.selectById(c.id, !1)
                    }
                    x.handleSelection()
                }
            } else x.deselectAll()
        }
        var c = this,
            h = g.dom,
            b = g.feature,
            a = f.contexts,
            w = g.net,
            u = f.render,
            x = f.scene,
            p = f.toolkit,
            m = g.util,
            v = b.history,
            r = {
                bitmap: {},
                vector: {}
            },
            y = {};
        c.register = function(a, b) {
            y[a] = function(a, c, d, m, p, h) {
                b(a, c, d, m, p, h);
                void 0 === m && e(c)
            }
        };
        c.reset = function(a) {
            v.vector ? r.vector.reset(a) : v.bitmap && r.bitmap.reset(a)
        };
        c.store = function(a, b, c) {
            a = a || {};
            b = b || {};
            c = !1 !== c;
            v.vector ? r.vector.store(a, b) : v.bitmap && r.bitmap.store(b);
            f.emit("historyStore", a);
            g.doc.lastModified = Date.now();
            c && d()
        };
        c.canUndo = function() {
            if (v.vector) return -1 !== t.current
        };
        c.canRedo = function() {
            if (v.vector) return t.current !== t.data.length - 1
        };
        c.undo = function(a) {
            if (b.history.canUndo) {
                a =
                    a || {};
                var m = a.steps || 1,
                    p = a.onsuccess,
                    h = a.onerror,
                    r = a.cmdSource || {};
                c.canUndo() ? q({
                    cmd: "undo",
                    cmdSource: r,
                    steps: m,
                    onsuccess: function() {
                        f.emit("undo", m);
                        p && p();
                        d();
                        !0 !== r.viaPeer && f.on.record && f.on.record({
                            op: "HISTORY_UNDO",
                            data: {
                                steps: m
                            }
                        }, r)
                    }
                }) : h && h()
            }
        };
        c.redo = function(a) {
            if (b.history.canRedo) {
                a = a || {};
                var m = a.steps || 1,
                    p = a.onsuccess,
                    h = a.onerror,
                    r = a.cmdSource || {};
                c.canRedo() ? q({
                    cmd: "redo",
                    cmdSource: r,
                    steps: m,
                    onsuccess: function() {
                        f.emit("redo", m);
                        p && p();
                        d();
                        !0 !== r.viaPeer && f.on.record && f.on.record({
                            op: "HISTORY_REDO",
                            data: {
                                steps: m
                            }
                        }, r)
                    }
                }) : h && h()
            }
        };
        c.findCmd = function(a) {
            if (v.vector) {
                var b = a.cmd,
                    c = t.current,
                    d = c - a.within;
                a = t.data;
                for (var m = c < d ? 1 : -1, d = Math.abs(c - d), p = 0; p < d; p++) {
                    var h = c += m;
                    if ((h = a[h]) && h.cmd === b) return !0
                }
            }
        };
        c.getLastCmd = function() {
            if (v.vector) {
                var a = t.data;
                return a[a.length - 1]
            }
        };
        c.bitmap = {
            current: -1,
            data: [],
            max: m.clampFinite(v.limit)
        };
        r.bitmap.reset = function(a) {
            var b = c.bitmap;
            b.current = 0;
            b.data = b.data.splice(0, 1);
            f.setCanvasSize();
            r.bitmap.store(a)
        };
        r.bitmap.store = function(b) {
            b = c.bitmap;
            var d = b.data.length -
                1,
                m = d - b.current;
            m && (b.data = b.data.splice(0, d - m + 1));
            b.data.length === b.max ? b.data.push(b.data.shift()) : b.data.push(h.Canvas());
            b.current = b.data.length - 1;
            d = a.layer0;
            b = b.data[b.current].ctx;
            b.canvas.width = b.canvas.width;
            b.drawImage(d, 0, 0)
        };
        r.bitmap.undo = function(b, d) {
            var m = a.layer0.ctx,
                p = c.bitmap;
            p.current = Math.max(0, --p.current);
            m.canvas.width = m.canvas.width;
            m.drawImage(p.data[p.current], 0, 0)
        };
        r.bitmap.redo = function(b, d) {
            var m = a.layer0.ctx,
                p = c.bitmap;
            p.current = Math.min(p.data.length - 1, ++p.current);
            m.canvas.width =
                m.canvas.width;
            m.drawImage(p.data[p.current], 0, 0)
        };
        var t = c.vector = {
            current: -1,
            data: [],
            max: m.clampFinite(v.limit)
        };
        r.vector.reset = function(a) {
            t.current = -1;
            t.data = []
        };
        c.setData = function(a) {
            t.current = a.current;
            t.data = a.data;
            t.max = a.max
        };
        c.pop = function() {
            var a = t.data,
                b = a.length;
            if (b) return b - 1 === t.current && t.current--, f.emit("historyPop"), a.pop()
        };
        c.restore = function(a, b, c) {
            k = void 0;
            l(a, b, !!c)
        };
        r.vector.store = function(a, b) {
            if (a.cmd && a.data) {
                a.timestamp = f.timestamp();
                a.userId = b.userId || w.user.id;
                var c =
                    a,
                    d = t.data.length - 1,
                    m = d - t.current;
                m && (t.data = t.data.splice(0, d - m + 1));
                t.data.length === t.max && t.data.shift();
                c = "add" === c.cmd || "remove" === c.cmd ? x.copyDeepCompress(c) : x.copyDeep(c);
                t.data.push(c);
                t.current = k = t.data.length - 1;
                f.on.record && f.on.record({
                    op: "HISTORY_STORE",
                    type: "major",
                    data: c
                }, b)
            } else console.warn("storePacket", arguments)
        };
        r.vector.undo = function(a, b) {
            if (c.canUndo()) {
                t.current = Math.max(-1, --t.current);
                var d = t.data[t.current + 1];
                d && (f.emit("undo-step", d), l(d, b, !0, a))
            }
        };
        r.vector.redo = function(a,
            b) {
            if (c.canRedo()) {
                t.current = Math.min(t.data.length - 1, ++t.current);
                var d = t.data[t.current];
                d && (f.emit("redo-step", d), l(d, b, !1, a))
            }
        };
        var k = 0;
        c.register("add", function(a, b, c, d, m) {
            for (a = 0; a < b.length; a++) c = b[a], x.getById(c.id) || (c = x.copyDeep(c), !g.__nodejs && p.ensureToolkit(c), x.pushAt(c, c.zIndex, !0), x.updateTransform && (c.toolkit.updateObjectSize && c.toolkit.updateObjectSize(c), x.updateTransform(c), x.setDirtyPixelData(c)));
            x.reindex()
        });
        c.register("remove", function(a, b, c, d, m) {
            a = x.children;
            for (c = 0; c < b.length; c++) {
                m =
                    b[c].id;
                var p = x.getById(m);
                if (p)
                    for (d && p.zIndex === f.selection.idx && x.deselectAll(), p = 0; p < a.length; p++) {
                        var h = a[p];
                        if (h.id === m) {
                            u.cache && u.cache.clean(h.hash);
                            x.setDirtyPixelData(h);
                            x.shiftAt(p);
                            break
                        }
                    }
            }
            x.reindex()
        });
        c.register("replace", function(a, b, c, d) {
            c ? (a = b[1], b = b[0]) : (a = b[0], b = b[1]);
            k = void 0;
            l({
                cmd: "remove",
                data: a
            }, d, !1, 1);
            k = void 0;
            l({
                cmd: "add",
                data: b
            }, d, !1, 0)
        });
        c.register("zoom", function(a, b, c, d, m) {
            console.log("zoom", a, b, c)
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneOrganize = function(g, f) {
        function q(d, c) {
            for (var h = [], b = 0; b < c.length; b++) {
                var a = c[b],
                    f = d[a - b];
                !f || f.useStickToFront || f.useStickToBack || (d.splice(a - b, 1), h.push({
                    layer: f,
                    idx: a
                }))
            }
            return h
        }
        var l = g.util,
            d = f.scene;
        f.queueHistory && f.queueHistory.add(function() {
            f.history.register("organize", function(e, c, h, b, a) {
                e = d.children;
                a = h ? c.from : c.to;
                c = h ? c.to : c.from;
                b = !b.useReplay && "select" === f.tool.type;
                d.selection.reset();
                c = q(e, c);
                if (h = c.length) {
                    for (var g = 0; g < h; g++) {
                        var u =
                            c[g];
                        e.splice(a[g], 0, u.layer);
                        d.setDirtyPixelData(u.layer);
                        b && d.selectByIdx(u.idx)
                    }
                    d.reindex()
                }
            })
        });
        d.sendTo = function(e) {
            e = e || {};
            var c = e.idx,
                h = (e.record || !1) && f.history,
                b = d.selection.toArray(e.selection),
                a = e.onsuccess,
                g = d.children,
                u;
            a: {
                u = 0;
                for (var x = d.children, p = x.length, m = 0; m < p; m++)
                    if (x[m].useStickToBack) u++;
                    else break a;u = void 0
            }
            a: {
                x = 0;p = d.children;
                for (m = p.length; m--;)
                    if (p[m].useStickToFront) x++;
                    else break a;x = void 0
            }
            u = l.clamp(0 + u, g.length - x, c);
            b = q(g, b);
            if (x = b.length) {
                for (m = p = 0; m < x; m++) {
                    var v = b[m];
                    if (v.idx < u) p++;
                    else break
                }
                for (var r = [], y = [], m = 0; m < x; m++) {
                    var v = b[m],
                        t = v.layer,
                        c = u - p + m;
                    d.setDirtyPixelData(t);
                    g.splice(c, 0, t);
                    v.idx !== c && (r.push(v.idx), y.push(c))
                }
                h && r.length && f.history.store({
                    cmd: e.cmd || "organize",
                    name: e.name || "object-order",
                    data: {
                        from: r,
                        to: y
                    }
                });
                d.reindex();
                a && a()
            }
            return d
        };
        d.sendForwards = function(e) {
            e = e || {};
            var c = e.distance || 1,
                h = e.toFront || !1,
                b = e.record || !1;
            e = d.selection.toArray(e.selection);
            h ? (c = d.children.length, h = "object-to-front") : (c = e[e.length - 1] + c + 1, h = "object-forwards");
            return d.sendTo({
                idx: c,
                cmd: "organize",
                name: h,
                record: b,
                onsuccess: function() {
                    f.on.sendForwards && f.on.sendForwards()
                }
            })
        };
        d.sendBackwards = function(e) {
            e = e || {};
            var c = e.distance || 1,
                h = e.toBack || !1,
                b = e.record || !1;
            e = d.selection.toArray(e.selection);
            h ? (c = 0, h = "object-to-back") : (c = e[0] - c, h = "object-backwards");
            return d.sendTo({
                idx: c,
                cmd: "organize",
                name: h,
                record: b,
                onsuccess: function() {
                    f.on.sendBackwards && f.on.sendBackwards()
                }
            })
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Orientation = function(g, f, q) {
        var l = this;
        g.module.Listener(l);
        var d = f.canvas2d,
            e = g.feature.zoom || {},
            c = g.feature,
            h = f.render,
            b = f.toolkit;
        g = g.vector;
        l.mirrorX = 1;
        l.mirrorY = 1;
        l.zoom = {
            clampFormat: "px",
            fromCenter: !0,
            value: 1,
            min: 20,
            max: 100
        };
        l.rotate = {
            clampFormat: "degree",
            value: 0,
            min: 0,
            max: 0
        };
        l.offset = {
            x: 0,
            y: 0
        };
        l.origin = {
            x: 0,
            y: 0
        };
        l.mouse = {
            x: 0,
            y: 0
        };
        for (var a in q) l[a] = q[a];
        l.ctx = l.canvas.getContext("2d");
        var w = new g.Transform,
            u = new g.Transform,
            x = new g.Transform,
            p = new g.Transform;
        l.render = function() {
            l.decompose();
            h.dirtyClip = !0;
            f.setContainerBounds();
            f.render.dirty = !0;
            b.text && b.text.updateCSSTransform();
            return l
        };
        l.getTransform = function() {
            p.reset();
            p.multiply(x);
            p.multiply(w);
            p.multiply(u);
            p.translate(l.offset.x, l.offset.y);
            return p
        };
        l.decompose = function() {
            var a = f.pixelRatio,
                b = l.getTransform(),
                c = new CSSMatrix,
                b = b.matrix;
            c.a = b.a;
            c.b = b.b;
            c.c = b.c;
            c.d = b.d;
            c.e = b.x;
            c.f = b.y;
            c = c.decompose().translate;
            b = l.zoom.value;
            f.zoom = b;
            d.orientX = Math.round(c.x);
            d.orientY = Math.round(c.y);
            d.x =
                Math.round(c.x - f.originX * b * a);
            d.y = Math.round(c.y - f.originY * b * a);
            d.tx = d.x - f.scrollX;
            d.ty = d.y - f.scrollY;
            f.scrollElementCSS()
        };
        l.reset = function(a) {
            l.media = f.computed;
            a || (l.zoom.value = e.value || 1, l.rotate.value = 0, l.mirrorX = 1, l.mirrorY = 1, l.offset.x = 0, l.offset.y = 0);
            c.doc.centerOnLoad && l.setCenter();
            l.scale = 1;
            l.mouse.x = 0;
            l.mouse.y = 0;
            l.origin.x = 0;
            l.origin.y = 0;
            l.setZoomAtCenter();
            l.mirrorTo(l.mirrorX, l.mirrorY);
            l.rotateTo(l.rotate.value);
            l.zoomTo(l.zoom.value, !0);
            l.decompose();
            return l
        };
        l.setCenter = function() {
            var a =
                f.pixelRatio,
                b = parseFloat(l.canvas.style.width) || l.canvas.width,
                c = parseFloat(l.canvas.style.height) || l.canvas.height;
            l.offset.x = Math.max(0, b / 2 - l.media.width / 2) * a;
            l.offset.y = Math.max(0, c / 2 - l.media.height / 2) * a;
            l.origin.x = 0;
            l.origin.y = 0;
            l.mouse.x = 0;
            l.mouse.y = 0;
            return l
        };
        l.setPan = function(a, b) {
            l.offset.x += isFinite(a) ? a : 0;
            l.offset.y += isFinite(b) ? b : 0;
            l.setZoomAtCenter();
            return l
        };
        l.setRotate = function(a) {
            l.rotate.value = 360 === a ? 360 : (a + 360) % 360;
            l.rotateTo(l.rotate.value);
            l.render();
            l.emit("setRotate", a);
            return l
        };
        l.setZoom = function(a, b) {
            var c = l.zoom.value,
                d = Math.max(l.media.width, l.media.width);
            if ("px" === l.zoom.clampFormat) var p = l.zoom.min / d,
                d = l.zoom.max / d;
            else p = l.zoom.min, d = l.zoom.max;
            p = Math.min(d, Math.max(p, a));
            l.zoom.value = p;
            (c = 1 + (p - c) / c) && l.zoomTo(c);
            l.emit("setZoom", a);
            return l
        };
        l.mirrorTo = function(a, b) {
            var c = l.media,
                d = -1 === a ? c.width : 0,
                c = -1 === b ? c.height : 0;
            x.reset();
            x.translate(d, c);
            x.scale(a, b);
            l.emit("mirrorTo", a, b);
            return l
        };
        l.rotateTo = function(a) {
            var b = l.media,
                c = b.width / 2 + l.offset.x,
                b = b.height / 2 +
                l.offset.y;
            u.reset();
            u.translate(c, b);
            u.rotate(a * Math.PI / 180);
            u.translate(-c, -b);
            return l
        };
        l.zoomTo = function(a, b) {
            var c = l.origin;
            b && (w.reset(), c.x = 0, c.y = 0, l.scale = 1);
            w.translate(c.x, c.y);
            w.scale(a, a);
            if (l.zoom.fromCenter) {
                var d = l.scale,
                    p = l.mouse,
                    h = p.y / d + c.y - p.y / (d * a);
                w.translate(-(c.x = p.x / d + c.x - p.x / (d * a)), -(c.y = h))
            }
            l.scale *= a;
            return l
        };
        l.toString = function() {
            return JSON.stringify(l.getValues())
        };
        l.setZoomAtPoint = function(a) {
            a = eventjs.getPointInNode(a, l.canvas);
            var b = f.pixelRatio;
            l.mouse.x = a.x * b;
            l.mouse.y =
                a.y * b;
            return l
        };
        l.setZoomAtCenter = function() {
            var a = f.pixelRatio,
                b = f.viewport,
                c = l.media,
                d = l.getTransform(),
                p = d.point2d(0, 0),
                h = d.point2d(c.width, c.height),
                c = Math.max(0, p.x),
                p = Math.max(0, p.y),
                d = Math.min(b.height, h.y),
                b = Math.min(b.width, h.x),
                b = Math.max(0, b - c),
                d = Math.max(0, d - p);
            l.mouse.x = (c + b / 2) * a;
            l.mouse.y = (p + d / 2) * a;
            return l
        };
        l.getValues = function() {
            var a = l.zoom.value,
                b = w.matrix;
            return {
                x: b.x + l.offset.x * a,
                y: b.y + l.offset.y * a,
                zoom: a,
                rotate: l.rotate.value,
                mirror: {
                    x: l.mirrorX,
                    y: l.mirrorY
                }
            }
        };
        l.setSource = function(a) {
            "string" ===
            typeof a ? (l.media = new Image, l.media.onload = function() {
                l.reset(!0)
            }, l.media.src = a) : (l.media = a, l.reset(!0));
            return l
        }
    };
    k.module.Orientation.createController = function(g, f) {
        var q = g.feature.zoom || {},
            l = g.dom,
            d = f.contexts,
            e = f.scene,
            c = f.orient = new g.module.Orientation(g, f, {
                src: f.computed,
                canvas: d.layer0,
                mouseLayer: d.active,
                rotate: {
                    clampFormat: "degree",
                    value: 0,
                    min: 0,
                    max: 0
                },
                zoom: {
                    clampFormat: "%",
                    fromCenter: q.fromCenter,
                    value: q.value,
                    min: q.min,
                    max: q.max,
                    increment: q.increment
                }
            });
        c.setSource(c.src);
        c.controllerReset =
            function() {
                c.reset();
                c.render();
                var a = c.getKnobOffset(q.defaultValue);
                c.setController(a)
            };
        c.controllerSetZoom = function(a) {
            a = c.getKnobOffset(a || 1);
            c.setController(a)
        };
        c.getKnobOffset = function(a) {
            var b = c.zoom.max;
            a = a || f.zoom;
            var d = h.offsetHeight || 150;
            a = 2 + Math.log(a) / Math.log(2);
            b = 2 + Math.log(b) / Math.log(2);
            return (1 - a / b) * d
        };
        c.controllerZoomOut = function() {
            var a = Math.max(c.zoom.min, f.zoom - c.zoom.increment),
                a = c.getKnobOffset(a);
            c.setController(a)
        };
        c.controllerZoomIn = function() {
            var a = Math.max(c.zoom.min,
                    f.zoom + c.zoom.increment),
                a = c.getKnobOffset(a);
            c.setController(a)
        };
        c.setControllerCSS = function(a) {
            if (b) {
                var c = b.offsetHeight;
                b.style.top = Math.min((h.offsetHeight || 150) - c, Math.max(0, a - c / 2)) + "px"
            }
        };
        c.setController = function(a, b) {
            c.setControllerCSS(a);
            var d = h.offsetHeight || 150,
                f = c.zoom.max,
                e = 2 + Math.log(f) / Math.log(2),
                d = Math.min(f, Math.pow(2, (1 - a / d) * e - 2));
            b && (d *= 100, d = (d - d % b) / 100);
            c.setZoom(d);
            c.render();
            h.title = Math.round(100 * d) + "%"
        };
        var h = {
                offsetHeight: 150
            },
            b = l.$("#sk-orientation .controller");
        if (!b) {
            var a =
                l.$("#sk-orientation");
            if (a) {
                var w = function(a, b) {
                        eventjs.cancel(a);
                        g.ui.tooltip && g.ui.tooltip.update(u());
                        b && e.setDirtyBounds()
                    },
                    u = function() {
                        return Math.round(100 * c.zoom.value) + "%"
                    },
                    l = function(b, c, d) {
                        b = g.dom.create('<div class="' + b + '"></div>');
                        g.ui.tooltip && g.ui.tooltip.add(b, c);
                        a.appendChild(b);
                        eventjs.add(b, "mousedown", function(a, b) {
                            g.doc.orient[d]();
                            w(a)
                        })
                    };
                eventjs.add(a, "mousedown,dblclick", eventjs.stop);
                l("icon-add", "zoom-in", "controllerZoomIn");
                d = g.dom.create('<div class="controller"><div><span id="controller" style="top: 0px"></span></div></div>');
                g.ui.tooltip && g.ui.tooltip.add(d, u);
                a.appendChild(d);
                eventjs.add(d, "drag", function(a, b) {
                    g.doc.orient.setController(b.y, 5);
                    w(a, "up" === b.state)
                });
                b = d.firstChild.firstChild;
                b.style.top = c.getKnobOffset() + "px";
                l("icon-minus", "zoom-out", "controllerZoomOut");
                l("icon-frame", "reset", "controllerReset")
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.ScenePlacement = function(g, f) {
        var q = f.canvas2d,
            l = g.feature,
            d = f.contexts,
            e = f.scene,
            c = f.toolkit,
            h = g.util,
            b = g.vector;
        e.updateTransform = function(a, b) {
            a.data && !a.dataHash && (a.dataHash = e.createHash(a.data));
            if (a.dirtyTransform || a.dirtyCheck || !a.trx2D) {
                a.dirtyTransform = !1;
                if (a.useStretchToEdge || a.useStretchToFit) {
                    var c = a.bbox,
                        d = f.computed.width,
                        p = f.computed.height;
                    if (c.width !== d || c.height !== p) {
                        if (a.useStretchToEdge) c.width = d, c.height = p, c.x = f.originX, c.y = f.originY;
                        else {
                            var m = (c.owidth || c.width) / d,
                                h = (c.oheight || c.height) / p;
                            m > h ? (c.width = d * m, c.height = p, c.x = f.originX - (c.width - d) / 2, c.y = f.originY) : (c.width = d, c.height = p * h, c.x = f.originX, c.y = f.originY - (c.height - p) / 2)
                        }
                        a.dirtyCache = !0
                    }
                }
                e.calcTransform2D(a, b)
            }
        };
        e.calcTransform2D = function(a, c) {
            var d = a.bbox,
                g = d.rotate * h.DEG_RAD,
                p = d.width * d.scale.x,
                m = d.height * d.scale.y,
                v = p / 2,
                r = m / 2;
            a.trx2D || (a.trx2D = new b.Transform);
            a.trx2DInv || (a.trx2DInv = new b.Transform);
            var y = a.trx2D,
                t = d.x,
                l = d.y;
            y.reset();
            y.scale(f.scale, f.scale);
            y.translate(t,
                l);
            g && ("objectBoundingBox" === d.units ? (y.translate(v, r), y.rotate(g), y.translate(-v, -r)) : y.rotate(g));
            c || (y.nw = y.point2d(0, 0), y.ne = y.point2d(p, 0), y.se = y.point2d(p, m), y.sw = y.point2d(0, m), y.cp = y.point2d(v, r), y.n = y.point2d(v, 0), y.e = y.point2d(p, r), y.s = y.point2d(v, m), y.w = y.point2d(0, r), e.calcTransform2DInv(a))
        };
        e.calcTransform2DInv = function(a) {
            var c = a.bbox,
                d = c.rotate * h.DEG_RAD,
                f = c.scale.x,
                p = c.scale.y;
            if (a.trx2D) var m = a.trx2DInv.reset(),
                c = a.trx2D.nw;
            else m = new b.Transform;
            a = c.x;
            c = c.y;
            m.translate(a, c);
            d &&
                m.rotate(-d);
            m.scale(1 / f, 1 / p);
            m.translate(-a, -c);
            m.tlx = a;
            m.tly = c;
            return m
        };
        e.updateBBox = function(a) {
            if (a = a || e.selection.item) e.updateConstrain(a), "text" === a.type ? c.text && c.text.updateCSSTransform(a) : a.brush && (a.brush.bbox = a.bbox)
        };
        e.getCenterPoint = function() {
            var a = f.zoom,
                b = f.scrollX,
                c = f.scrollY,
                d = f.computed,
                p = f.viewport;
            return {
                x: Math.min(d.width, p.width / a) / 2 + b,
                y: Math.min(d.height, p.height / a) / 2 + c
            }
        };
        e.getBoundingBox = function(a) {
            a = a || {};
            var b = a.useVisibleRegion || !1,
                c = !!a.selection || a.useSelection || !1,
                h = !!a.hovered || a.useHovered || !1,
                p = a.asInteger || !1,
                m = Infinity,
                f = -Infinity,
                r = Infinity,
                g = -Infinity,
                t = a.selection || e.selection.items;
            a = a.hovered || e.hovered.items;
            c || h || (c = !0, t = e.children);
            for (var l = 0, q = e.children.length; l < q; l++) {
                var k = e.children[l],
                    A = k.trx2D;
                if (A) {
                    var I = k.zIndex,
                        B = a[I];
                    if (t[I] && c || B && h) {
                        var k = k.bbox,
                            B = k.width * k.scale.x,
                            D = k.height * k.scale.y,
                            k = A.point2d(0, 0),
                            I = A.point2d(B, 0),
                            B = A.point2d(B, D),
                            F = A.point2d(0, D),
                            A = Math.min(k.x, I.x, B.x, F.x) - 1,
                            D = Math.min(k.y, I.y, B.y, F.y) - 1,
                            G = Math.max(k.x, I.x,
                                B.x, F.x) + 2,
                            k = Math.max(k.y, I.y, B.y, F.y) + 2;
                        A < m && (m = A);
                        D < r && (r = D);
                        G > f && (f = G);
                        k > g && (g = k)
                    }
                }
            }
            b ? (m = Math.max(0, m), r = Math.max(0, r), b = d.layer0, B = Math.min(b.width - m, f - m), D = Math.min(b.height - r, g - r)) : (B = f - m, D = g - r);
            m = isFinite(m) ? m : 0;
            r = isFinite(r) ? r : 0;
            B = isFinite(B) ? B : 0;
            D = isFinite(D) ? D : 0;
            return {
                x: p ? Math.floor(m) : m,
                y: p ? Math.floor(r) : r,
                width: p ? Math.ceil(B) : B,
                height: p ? Math.ceil(D) : D,
                units: "objectBoundingBox",
                scale: {
                    x: 1,
                    y: 1
                }
            }
        };
        e.getObjectOrigin = function(a) {
            return "objectBoundingBox" === a.units ? {
                x: a.x + a.width / 2 * a.scale.x,
                y: a.y + a.height / 2 * a.scale.y
            } : {
                x: a.x,
                y: a.y
            }
        };
        e.calcOffset = function(a) {
            var b = f.pixelRatio,
                c = a.bbox.scale.x,
                d = "object" === typeof a.padding ? a.padding : {
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0
                },
                p = d.left + d.right,
                d = d.top + d.bottom,
                m = a.stroke;
            m && m.enabled || (m = {
                lineWidth: 0,
                miterLimit: 0
            });
            var m = m.lineWidth * m.miterLimit / 2,
                h = a.border && a.border.lineWidth || 0,
                p = Math.ceil(Math.abs((h + p) * c / 2)) + m,
                c = Math.ceil(Math.abs((h + d) * c / 2)) + m;
            return a.__offset = {
                x: p * b,
                y: c * b,
                pixelRatio: b
            }
        };
        e.isInBounds = function(a) {
            a.dirtyTransform && e.updateTransform(a);
            var b = a.trx2D;
            if (!b || !b.point2d) return !0;
            var c = f.zoom,
                d = f.pixelRatio,
                p = c * d,
                m = q.tx,
                h = q.ty,
                r = b.nw,
                g = b.ne,
                t = b.se,
                k = b.sw,
                b = Math.min(r.x, g.x, t.x, k.x) * p + m,
                z = Math.min(r.y, g.y, t.y, k.y) * p + h,
                C = Math.max(r.x, g.x, t.x, k.x) * p + m,
                r = Math.max(r.y, g.y, t.y, k.y) * p + h,
                g = q.width,
                A = q.height,
                k = f.scrollX,
                t = f.scrollY,
                I = f.computed;
            if (l.canvas.useForceInBounds) return a.inbounds = !0;
            l.canvas.useClipDoc ? (g = Math.min(I.width * c, g) * d, c = Math.min(I.height * c, A) * d, m = (f.originX - k) * p + m, d = (f.originY - t) * p + h) : (g *= d, c = A * d, d = m = 0);
            p = Math.max(0, m);
            h = Math.max(0, d);
            m = g + Math.max(0, m);
            c += Math.max(0, d);
            a.inbounds = b < m && C > p && z < c && r > h;
            return a.inbounds
        };
        e.getActionDataAsAbsolute = function(a, c) {
            var d = new b.Transform,
                f = a.bbox,
                p = f.scale.x,
                m = f.scale.y,
                e = f.rotate * h.DEG_RAD,
                r = f.width / 2 * p,
                g = f.height / 2 * m,
                t = -((a.diameter || 0) / 2) * (p - 1);
            d.translate(f.x, f.y);
            d.translate(r, g);
            e && d.rotate(e);
            d.translate(-r - t, -g - t);
            d.scale(p, m);
            f = [
                []
            ];
            p = 0;
            if (m = a.data)
                for (e = m.length, r = 0; r < e; r++) m = a.data[r], g = d.point2d(m.x, m.y), f[p] || (f[p] = []), f[p].push({
                    x: g.x,
                    y: g.y
                }), "z" === m.cmd && ++p;
            return c ? JSON.stringify(f) : f
        };
        e.updateConstrain = function(a, b) {
            var c = f.computed,
                d = c.width,
                c = c.height,
                p = a.bbox,
                m = p.scale.x,
                h = p.scale.y,
                r = a.useConstrain,
                g = a.useConstrainX,
                t = a.useConstrainY,
                l = a.useAlignX,
                q = a.useAlignY,
                k = a.trx2D;
            if (k && (r || g || t)) {
                var A = k.nw,
                    I = k.ne,
                    B = k.se,
                    D = k.sw,
                    k = Math.min(A.x, I.x, B.x, D.x),
                    F = Math.min(A.y, I.y, B.y, D.y),
                    G = Math.max(A.x, I.x, B.x, D.x),
                    A = Math.max(A.y, I.y, B.y, D.y),
                    D = Math.max(0, G - k),
                    H = Math.max(0, A - F),
                    A = p.x,
                    I = p.y,
                    B = A - k,
                    G = I - F,
                    D = d - D,
                    H = c - H;
                "size" === b ? (p.width += Math.min(0, D - k), p.height +=
                    Math.min(0, H - F)) : (k = D + B, F = H + G, r ? (p.x = Math.max(B, Math.min(k, A)), p.y = Math.max(G, Math.min(F, I))) : g ? p.x = Math.max(B, Math.min(k, A)) : t && (p.y = Math.max(G, Math.min(F, I))));
                a.dirtyTransform = !0
            }
            l && (m *= p.width, p.x = "right" === l ? d - m : "left" === l ? 0 : (d - m) / 2, a.dirtyTransform = !0);
            q && (d = p.height * h, p.y = "bottom" === q ? c - d : "top" === q ? 0 : (c - d) / 2, a.dirtyTransform = !0);
            a.dirtyTransform && e.updateTransform(a)
        };
        e.getConstraint = function(a, b, d) {
            var h = c.getFeature(a),
                p = a.useMinWidth || h.minWidth,
                m = a.useMinHeight || h.minHeight,
                e = a.useMaxWidth ||
                h.maxWidth,
                r = a.useMaxHeight || h.maxHeight;
            h.useConstrainToCanvas && (h = f.contexts.layer0, h = Math.min(h.height, h.width) / f.pixelRatio, r = Math.min(h, r), e = Math.min(h, e));
            h = a.bbox;
            a = h.width || 1E-4;
            var h = h.height || 1E-4,
                g = a,
                t = h,
                l = !1,
                q = !1;
            if (d) return d.x * a < p && (l = !0, d.x = p / a, d.y = d.x), d.y * h < m && (l = !0, d.y = m / h, d.x = d.y), d.x * a > e && (q = !0, d.x = e / a, d.y = d.x), d.y * h > r && (q = !0, d.y = r / h, d.x = d.y), {
                constrained: l || q,
                tooSmall: l,
                tooLarge: q,
                x: d.x,
                y: d.y
            };
            g < p && (l = !0, g = p);
            t < m && (l = !0, t = m);
            g > e && (q = !0, g = e);
            t > r && (q = !0, t = r);
            g !== a && b && (t = g / a * h);
            t !== h && b && (g = t / h * a);
            return {
                constrained: l || q,
                tooSmall: l,
                tooLarge: q,
                width: g,
                height: t
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneRender = function(g, f) {
        function q(b) {
            c.composite = b || "normal";
            b = !m.isNormalGCO[c.composite];
            c.blend !== b && (b ? (a.layer0.style.display = "none", a.draw.style.background = a.layer0.style.background) : (a.layer0.style.display = "block", a.draw.style.background = ""));
            u.Canvas.clear(a.draw);
            (c.blend = b) && a.draw.ctx.drawImage(a.layer0, 0, 0)
        }

        function l() {
            if (!f.__preloading)
                if (f.__rendering = !0, c.emit("render"), c.dirty = !1, c.perf = c.perf || g.perf(), x.doc.editable || c.chunkBatch) {
                    var d =
                        a.layer0,
                        m = d.ctx,
                        p = d.width,
                        r = d.height;
                    if (x.canvas.useClipDoc) {
                        if (c.dirtyClip) {
                            d.width = p;
                            c.dirtyClip = !1;
                            var d = f.clip,
                                v = f.pixelRatio,
                                u = f.zoom,
                                w = u * v,
                                l = f.scrollX - f.originX * v,
                                k = f.scrollY - f.originY * v;
                            m.beginPath();
                            d.path ? (l = b.x - l * u, u = b.y - k * u, m.save(), m.translate(l, u), m.scale(w, w), y.VOBPath(m, d.path), m.restore()) : (c.toExport ? (u = l = 0, k = m.canvas.width, w = m.canvas.height) : (v = f.computed, l = (d.x || 0) * w + b.x - l * u, u = (d.y || 0) * w + b.y - k * u, k = Math.min(v.width, d.width || Infinity) * w, w *= Math.min(v.height, d.height || Infinity)),
                                m.rect(l, u, k, w));
                            if (d.style) {
                                m.save();
                                w = d.style;
                                w.globalCompositeOperation && (m.globalCompositeOperation = w.globalCompositeOperation);
                                w = d.style;
                                w.fillStyle && (m.fillStyle = w.fillStyle || "#000", m.fill());
                                w = d.style;
                                w.shadowColor && (m.shadowColor = w.shadowColor, m.shadowOffsetX = w.shadowOffsetX || 0, m.shadowOffsetY = w.shadowOffsetY || 0, m.shadowBlur = w.shadowBlur || 0, m.stroke());
                                d = d.style;
                                if (d.lineWidth || d.strokeStyle) h.ctx_lineDash && ((w = d.dashArray) && "object" === typeof w && m.setLineDash(w), w = d.dashOffset) && (m.lineDashOffset =
                                    w), m.lineWidth = (d.lineWidth || 1) * f.pixelRatio, m.strokeStyle = d.strokeStyle || "#000", m.stroke();
                                m.restore()
                            }
                            m.clip()
                        }
                        m.clearRect(0, 0, p, r);
                        m.beginPath();
                        m.rect(0, 0, p, r);
                        m.clip()
                    } else m.clearRect(0, 0, p, r);
                    m.save();
                    e()
                } else {
                    p = c.from;
                    m = f.scene.children;
                    if (m.length) {
                        p = (isFinite(f.selection.idx) && "text.hide" !== p ? a.active : a.layer0).ctx;
                        for (r = 0; r < m.length; r++) d = m[r], !d.dirtyCheck && !d.dirtyTransform || d.error || (f.scene.updateTransform(d), c.object(p, d), c.dirtyControls = !0);
                        q(f.tool.device.composite)
                    }
                    t.run()
                }
        }

        function d() {
            c.dirtyActiveContext &&
                (c.dirtyActiveContext = !1, u.Canvas.clear(a.active));
            c.dirtyControls && (c.dirtyControls = !1, w.useRenderControls[f.tool.type] ? v.renderSceneControls(!0) : c.emit("dirtyControls"));
            if (c.dirtyCenterPoint) {
                var b = c.dirtyCenterPoint;
                c.dirtyCenterPoint = !1;
                v.getFeature(f.scene.hovered.item).showCenterPoint && w.useRenderControls[f.tool.type] && v.renderCenterPoint(b)
            }
        }

        function e() {
            for (var d = a.layer0.ctx, m = f.scene.children, h = m.length, r = k - z, y = c.chunkBatch, u = y ? 150 : 500, w = h - r, l = Date.now(), q = 0; q < w; q++) {
                var r = ++k - z,
                    K = r > h -
                    1,
                    L = 0 !== k && Date.now() - l > u;
                if (y && (L || K) && g.loader) {
                    var M = h && !K ? r / h : 1;
                    (100 !== 100 * M >> 0 || g.loader.threads.thread) && g.loader.create("thread", p.translate("rendering") + "...", 100 * M >> 0)
                }
                if (L) {
                    ++z;
                    requestAnimationFrame(e);
                    break
                }
                if (K) {
                    z = 0;
                    k = -1;
                    f.__rendering = !1;
                    c.chunkBatch = !1;
                    c.dirtyInBounds = !1;
                    d = a.layer0.ctx;
                    C.id && C.canvas && (C.render(d), C.id = null);
                    d.restore();
                    !x.canvas.useBGRender || c.highRes || c.toExport || (m = f.zoom, h = m * f.pixelRatio, y = f.computed, r = y.width, y = y.height, u = f.scrollX, w = f.scrollY, d.save(), d.beginPath(),
                        d.translate(b.orientX, b.orientY), d.scale(h, h), d.globalAlpha = 1, d.globalCompositeOperation = "destination-over", d.translate(-u, -w), d.rect(-.5, -.5, r * Math.max(1, m) + 1, y * Math.max(1, m) + 1), d.fillStyle = f.computed.background || "#000", d.fill(), d.restore());
                    t.run();
                    c.perf && (c.speed = c.perf());
                    x.debugRender && console.log("render", c.speed + "ms", c.from);
                    c.from = "";
                    c.perf = null;
                    break
                }
                K = m[r];
                if (!K.error) {
                    L = K.type;
                    if (void 0 === K.toolkit) {
                        x.debug && console.warn("toolkit was not loaded", L, r);
                        if (!v.getToolkit(L)) continue;
                        z = 0;
                        k = -1;
                        f.__rendering = !1;
                        requestAnimationFrame(c.preload);
                        break
                    }
                    f.scene.updateTransform(K);
                    if (!1 !== K.visible) {
                        if ("group" !== L && !c.toExport)
                            if (M = K.inbounds, c.dirtyInBounds || void 0 === M) {
                                if (!1 === f.scene.isInBounds(K)) continue
                            } else if (!1 === M) continue;
                        c.selection && void 0 === c.selection[r] || f.__editing && !x.tools.text.useCanvasRenderer && K.id === f.selection.id && "text" === L || c.object(d, K)
                    }
                }
            }
        }
        var c = this,
            h = g.agent,
            b = f.canvas2d,
            a = f.contexts,
            w = g.detect,
            u = g.dom,
            x = g.feature,
            p = g.lang,
            m = g.style,
            v = f.toolkit,
            r = g.util,
            y = g.vector.Shape;
        g.module.Listener(c);
        c.scene = function(a) {
            a = a || {};
            "string" === typeof a && (a = {
                from: a
            });
            "function" === typeof a && (a = {
                onsuccess: a
            });
            var b = a.from;
            (a = a.onsuccess) && t.push(a);
            c.dirty = !0;
            c.from = b;
            return c
        };
        c.objectToScene = function(b, d) {
            var m = a.layer0.ctx,
                p = f.scene.children;
            (p[p.length - 2] || {}).useStickToFront ? c.scene(d) : (f.scene.updateTransform(b), c.object(m, b), d && d())
        };
        c.now = function(a) {
            a && t.push(a);
            c.toExport = !0;
            l();
            c.toExport = !1;
            return c
        };
        c.blend = !1;
        c.chunkBatch = !0;
        c.composite = "normal";
        c.dirty = !1;
        c.dirtyCenterPoint = !1;
        c.dirtyClip = !1;
        c.dirtyControls = !1;
        c.dirtyActiveContext = !1;
        c.dirtyInBounds = !1;
        c.dirtyPointer = !1;
        c.from = "";
        c.highRes = !1;
        c.perf = null;
        c.selection = !1;
        c.speed = 0;
        c.toExport = !1;
        c.pointer = {};
        c.removePointer = function(a) {
            delete c.pointer[a]
        };
        c.prepareDeviceGCO = function(a) {
            var b = "normal",
                c;
            for (c in a) {
                var d = a[c];
                d.brush && (d = d.brush);
                d.object && (d = d.object);
                if (!m.isNormalGCO[d.composite]) {
                    b = d.composite;
                    break
                }
            }
            c && q(b)
        };
        (function() {
            function b() {
                p === b.frameId && requestAnimationFrame(b);
                g.stats && g.stats.begin();
                c.dirty ? l() : d();
                if (c.dirtyPointer) {
                    c.dirtyPointer = !1;
                    var h = c.pointer,
                        e = 0,
                        t = Date.now() - 6E4;
                    c.prepareDeviceGCO(h);
                    var y = f.zoom * f.scale * f.pixelRatio,
                        x = a.draw,
                        k = x.ctx,
                        z;
                    for (z in h) {
                        var E = h[z];
                        if (E.lastModified < t) c.removePointer(z), console.warn("prune pointer", z);
                        else {
                            var C = E.object;
                            if (C) switch (C.toolkitId) {
                                case "text":
                                    E.isFromBrowser && (f.scene.updateTransform(C), v.renderObjectControls(k, C));
                                    break;
                                case "media":
                                    if (C.dirtyCheck) {
                                        var M = C.bbox;
                                        M.scaleCache = {
                                            x: 1,
                                            y: 1
                                        };
                                        C.lastSampleSize = Math.sqrt(M.width * M.height);
                                        f.scene.updateTransform(C, !0)
                                    }
                                    c.object(k, C);
                                    break;
                                case "shape":
                                    f.scene.updateTransform(C, !0);
                                    c.object(k, C);
                                    break;
                                case "brush":
                                    if (M = C.brush) {
                                        var C = C.type,
                                            Q = m.getCompositeNative(M.composite);
                                        M.isEraser = "destination-out" === Q || "eraser" === C;
                                        M.useAreaTracker = w.useAreaTracker[C] && "color" !== M.fill.type;
                                        E = E.ctx || (E.ctx = u.Context2d(x.width, x.height));
                                        M.renderTo = E;
                                        var R = "ghost" === z;
                                        R && (M.batchRecord = r.copy(M.pathRecord || []));
                                        if (M.dirtyRender) {
                                            if (R || !w.useCacheOnDraw[C]) E.canvas.width = x.width, E.canvas.height =
                                                x.height;
                                            M.preprocess && M.preprocess();
                                            E.save();
                                            E.scale(y, y);
                                            E.translate(-f.scrollX, -f.scrollY);
                                            v.brush.renderBrush(E, M.batchRecord, M);
                                            E.restore();
                                            M.postprocess && M.postprocess()
                                        }
                                        k.save();
                                        w.useCacheForAlpha[C] && v.setGlobalAlpha(k, M);
                                        k.globalCompositeOperation = Q;
                                        k.drawImage(E.canvas, 0, 0);
                                        k.restore();
                                        M.speed && M.isFromBrowser && v.brush.addPointClone(M)
                                    }
                            }
                            e++
                        }
                    }
                    0 === e && q()
                }
                g.stats && g.stats.end()
            }
            var p;
            c.start = function() {
                void 0 === p && (p = r.now(), b.frameId = p, b())
            };
            c.stop = function() {
                p = void 0
            }
        })();
        var t = function() {
                var a = [];
                return {
                    push: function(b) {
                        "function" === typeof b && a.push(b)
                    },
                    run: function() {
                        d();
                        for (f.__rendering = !1; a.length;) a.shift()()
                    }
                }
            }(),
            k = -1,
            z = 0,
            C = {
                id: null,
                canvas: null,
                composite: null,
                opacity: null,
                render: function(a) {
                    a.globalCompositeOperation = C.composite;
                    a.globalAlpha = C.opacity / 100;
                    a.drawImage(C.canvas, 0, 0)
                }
            };
        c.object = function(a, d) {
            if (a && d) {
                var p = c.toExport;
                if (!p || !1 !== d.exportable) {
                    var h = f.pixelRatio,
                        e = f.scale * h,
                        r = f.zoom * h,
                        h = f.selection,
                        g = d.zIndex - z;
                    d.hovered = f.hovered.items[g] || !1;
                    d.selected = h.items[g] ||
                        !1;
                    if (d.groupId) {
                        if (C.id !== d.groupId) {
                            C.id && C.canvas && C.render(a);
                            var t = a.canvas;
                            C.id = d.groupId;
                            C.canvas = C.canvas || u.Canvas(t.width, t.height);
                            C.canvas.width = t.width;
                            C.canvas.height = t.height;
                            C.composite = d.composite;
                            C.opacity = d.opacity
                        }
                        C.id && (a = C.canvas.ctx)
                    } else C.id && C.canvas && (C.render(a), C.id = null);
                    var y = d.type,
                        l = c.cache,
                        h = d.usePixelData && d.isRecording,
                        t = d.useHighRes || c.highRes;
                    if (!t || w.useCacheOnRender[y] && !d.useHighRes || h)
                        if (t = !1, !d.ctx || d.dirtyCheck || d.dirtyCache || p)
                            if (l.add(d), d.ctx) d.dirtyCheck =
                                p;
                            else return;
                    var q = d.bbox,
                        p = q.width,
                        h = q.height,
                        g = q.scaleCache,
                        k, E;
                    g ? (k = g.x, E = g.y) : E = k = 1;
                    var R = q.scale.x,
                        U = q.scale.y,
                        V = q.rotate,
                        P = d.__offset;
                    if (P) {
                        var X = P.x,
                            P = P.y;
                        0 > k && (X *= -1);
                        0 > E && (P *= -1)
                    } else P = f.scene.calcOffset(d), X = P.x, P = P.y;
                    v.getFeature(d);
                    y = !w.useLocalAlpha[y];
                    a.save();
                    a.translate(b.tx, b.ty);
                    a.scale(r, r);
                    a.globalCompositeOperation = m.getComposite(d.composite);
                    y && v.setGlobalAlpha(a, d);
                    0 === V % 90 && (a.imageSmoothingEnabled = !1);
                    y = d.trx2D;
                    r = l.pad;
                    if (t) e = q.padding || 0, a.beginPath(), y.apply(a, !0), a.scale(1 /
                        f.scale, 1 / f.scale), w.shape[d.type] ? (d.render(a, y, !0), a.scale(R, U), a.translate(e, e)) : (a.scale(R, U), a.translate(e, e), d.render(a, y, !0));
                    else if (y.apply(a, !0), t = d.ctx.canvas, V = t.width, y = t.height, V && y) {
                        var l = 0 > k,
                            q = 0 > E,
                            N = (k - 1) * r,
                            W = (E - 1) * r;
                        l && (N -= k * r * 2);
                        q && (W -= E * r * 2);
                        X = -r / e - N / e - X * k / e;
                        P = -r / e - W / e - P * E / e;
                        0 > R && (X += p * R);
                        0 > U && (P += h * U);
                        R = V * Math.abs(k) / e;
                        e = y * Math.abs(E) / e;
                        l || q ? (a.save(), l && (X -= p * k * g.px), q && (P -= h * E * g.py), a.scale(l ? -1 : 1, q ? -1 : 1), a.drawImage(t, X, P, R, e), a.restore()) : a.drawImage(t, X, P, R, e)
                    }
                    a.restore()
                }
            } else x.debug &&
                console.error("render.object", arguments)
        };
        c.preload = function(a) {
            function b(a, v) {
                a.dirtyResource = !1;
                if (a.error) x.debug && console.error("object did not load properly", a);
                else if (v || !1 === a) a.error = !0, v && (console.error(v, a), e.push(v || "Action missing."));
                d && d(1 - (t - 1) / r);
                --t || (f.__rendering = !1, f.__preloading = !1, p ? (c.chunkBatch = !0, c.scene({
                    from: "render.preload",
                    onsuccess: m
                })) : c.scene({
                    from: "render.load",
                    onsuccess: m
                }), h && (c.dirtyPointer = !0), e.length && g.ui.log(e[0]))
            }
            a = a || {};
            var d = a.onprogress,
                m = a.onsuccess,
                p = a.chunkBatch || !1,
                h = a.viaPeer || !1;
            if (f.__preloading) m && m();
            else if (a = f.scene.children, 0 === a.length) h && (c.dirty = !0, c.dirtyPointer = !0), m && m();
            else {
                var e = [],
                    r = a.length,
                    t = r;
                f.__rendering = !0;
                f.__preloading = !0;
                f.scene.sort();
                for (var y = 0; y < r; y++) {
                    var u = a[y];
                    u.error ? b(u) : u.render && !u.dirtyResource ? b(u) : v.ensureToolkit(u) ? u.toolkit.loadResource({
                        object: u,
                        useLoader: !h,
                        onerror: function(a, c) {
                            b(a, c)
                        },
                        onsuccess: function(a) {
                            b(a)
                        },
                        onprogress: function(a) {
                            console.log(a)
                        }
                    }) : b(u, "Missing \u201c" + u.type + "\u201d toolkit")
                }
            }
        };
        c.cache = new g.module.SceneRenderCache(g, f, c);
        c.getGLFX = function(a) {
            return c.glfx || (c.glfx = glfx.applyShader(a || u.Canvas()))
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneRenderCache = function(g, f, q) {
        function l(a) {
            if (v[a]) {
                var b = v[a];
                b.copies++;
                return b
            }
            var c = w.Canvas(),
                b = c.ctx;
            c.className = "cache" + a;
            b.copies = 1;
            return v[a] = b
        }

        function d(a, d) {
            if (g.gl && a.ctx) {
                var m = a.ctx,
                    p = window.glfx && h.webgl,
                    v = a.filter,
                    u = !!(v && v[0] && v[0][1]),
                    w = g.gl.ColorMatrix && "image" === a.type,
                    l = w && p;
                if (u) l && v[0] && (w = v[0], l = w.length - 1, "colorMatrix" === w[l].id ? w[l] = e(a) : w.push(e(a)));
                else if (w) {
                    if (g.gl.ColorMatrix.isIdentity(a)) return;
                    if (l) v = a.filter = [
                        [{
                            cmd: "input",
                            id: "source0",
                            name: "colorMatrix",
                            enabled: !0
                        }, e(a)]
                    ];
                    else {
                        g.gl.ColorMatrix.setFilter(a).apply(m);
                        return
                    }
                } else return;
                if (u) {
                    var w = f.pixelRatio,
                        l = f.zoom,
                        k = c.pad,
                        D = 2 * k,
                        u = a.ctx.canvas,
                        F = a.bbox,
                        G = F.rotate * x.DEG_RAD,
                        H = F.scale.x * f.scale,
                        J = F.scale.y * f.scale,
                        O = F.height,
                        K = Math.abs(F.width * H) * w || 1,
                        L = Math.abs(O * J) * w || 1,
                        O = K + D * w >> 0,
                        D = L + D * w >> 0,
                        M = K / 2,
                        Q = L / 2,
                        H = 0 > H,
                        J = 0 > J;
                    if (a.useBackgroundOverlay) {
                        var R = F.x * w,
                            F = F.y * w;
                        H && (R -= K);
                        J && (F -= L);
                        m.save();
                        m.globalCompositeOperation = "source-atop";
                        m.fillStyle = f.computed.background;
                        m.fillRect(0, 0, O, D);
                        m.translate(k, k);
                        G && (m.translate(M, Q), m.rotate(-G), m.translate(-M, -Q));
                        m.translate(-R, -F);
                        m.scale(1 / l, 1 / l);
                        m.drawImage(b.layer0, 0, 0);
                        m.restore()
                    }
                    if (p) {
                        p = q.getGLFX(u);
                        p.source = u;
                        p.pixelRatio = w;
                        p.viewport(0, 0, O, D);
                        p.setFilter(v);
                        var U = !1,
                            V = !1;
                        p.render(function() {
                            U ? (a.dirtyCache = !0, q.dirty = !0) : (V = !0, d && d(a))
                        });
                        V ? (v = p.getComposite()) ? (m.clearRect(0, 0, u.width, u.height), m.drawImage(v, 0, 0)) : U = !0 : U = !0
                    }
                }
            }
        }

        function e(a) {
            return {
                cmd: "shader",
                id: "colorMatrix",
                enabled: !0,
                data: [void 0, a.tint,
                    a.temperature, a.brightness, a.contrast, a.exposure, void 0, void 0, a.saturation, void 0, a.hue
                ]
            }
        }
        var c = this,
            h = g.agent,
            b = f.contexts,
            a = g.detect,
            w = g.dom,
            u = g.feature,
            x = g.util,
            p = g.vector,
            m = p.Shape,
            v = c.data = {};
        c.enabled = u.cache2D;
        c.pad = u.cache2DPadding;
        c.dump = function() {
            x.each(v, function(a) {
                console.image(a.canvas)
            })
        };
        c.reset = function() {
            v = c.data = {}
        };
        c.setCacheTemp = function(a) {
            for (var b in a);
        };
        c.clean = function(a) {
            var b = v[a];
            b && b.canvas && !--b.copies && (delete v[a], u.debugCache && (w.$(u.debugCache) || document.body).removeChild(b.canvas))
        };
        c.add = function(b) {
            if (b && b.render) {
                var e = f.scene.createHash(b);
                if (!0 !== b.dirtyCache && v[e]) b.dirtyCache = !1, b.dirtyCheck = !1, b.hash !== e && (c.clean(b.hash), b.ctx = l(e), b.hash = e, f.scene.calcOffset(b));
                else {
                    b.hash = e;
                    b.ctx = l(e);
                    b.bbox.scaleCache = {
                        x: 1,
                        y: 1
                    };
                    b.dirtyDimension && (b.toolkit.updateObjectSize(b), b.dirtyDimension = !1);
                    var e = c.pad,
                        t = f.scene.calcOffset(b),
                        q = t.x + e,
                        k = t.y + e,
                        C = b.bbox,
                        t = C.width,
                        A = C.height,
                        I = C.scale.x * f.scale,
                        B = C.scale.y * f.scale,
                        D = f.pixelRatio,
                        F = Math.abs(t * I >> 0) * D,
                        G = Math.abs(A * B >> 0) * D,
                        H = F + 2 *
                        q,
                        J = G + 2 * k;
                    u.cache257 && a.useCache257[b.type] && (H = Math.max(257, H), J = Math.max(257, J));
                    var e = b.ctx,
                        O = e.canvas;
                    O.width = Math.min(8192, H || 1) >> 0;
                    O.height = Math.min(8192, J || 1) >> 0;
                    u.debugCache && ((w.$(u.debugCache) || document.body).appendChild(O), O.title = "idx: " + b.zIndex, O.onclick = function(a) {
                        return function() {
                            console.image(O);
                            var b = f.selection.fromObjects([a]);
                            g.exec("debug-layer", b)
                        }
                    }(b));
                    u.debugCache && (e.lineWidth = 2 * D, e.strokeStyle = "#f00", e.strokeRect(q, k, F, G), e.strokeStyle = "#00f", e.strokeRect(0, 0, F + 2 * q, G +
                        2 * k), e.fillStyle = "rgba(255,255,0,0.05)", e.fillRect(0, 0, H, J));
                    F = C.padding || 0;
                    q += F * I * D;
                    k += F * I * D;
                    e.save();
                    C = new p.Transform;
                    C.scale(I, B);
                    e.translate(q, k);
                    e.scale(D, D);
                    q = b.background;
                    k = b.border;
                    if (q || k) e.save(), F = b.padding || {
                        top: 0,
                        left: 0,
                        right: 0,
                        bottom: 0
                    }, D = -F.left, H = -F.right, F = t * Math.abs(I) + H + 0, G = A * Math.abs(B) + D + 0, k ? (e.beginPath(), e.globalAlpha = k.opacity || 1, m.roundRect(e, D, H, F, G, k.radius), e.lineWidth = k.lineWidth || x.ZERO, h.ctx_lineDash && ((t = k.dashArray) && "object" === typeof t && e.setLineDash(t), t = k.dashOffset) &&
                        (e.lineDashOffset = t), e.strokeStyle = k.color, e.stroke()) : (e.beginPath(), m.rect(e, D, H, F, G)), q && !1 !== q.enabled && (e.globalAlpha = q.opacity || 1, e.fillStyle = g.style.toContext2D(q, F, G), e.fill()), e.restore();
                    b.render(e, C, !1);
                    e.restore();
                    d(b);
                    b.dirtyCache = !1;
                    b.dirtyCheck = !1
                }
            } else u.debug && b && "group" !== b.type && console.warn("missing", arguments)
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneReplicate = function(g, f) {
        function q(a) {
            a = a || c.selection.items;
            for (var b = [], d = c.children, m = d.length; m--;) a[m] && b.push(d[m]);
            if (b.length) return c.copies = c.copyDeep(b), c.clipboard.save(), !0
        }

        function l(a, d) {
            function p(a) {
                var b = g.assets.getItem(a.src);
                b && b.clone && "clipart" === a.type && !1 === e.cacheSVG ? b.clone(function(b) {
                    g.assets.add(b.toDataURL(), function(b) {
                        a.src = b;
                        m(a)
                    })
                }, !0) : m(a)
            }

            function m(a) {
                t.push(y.length);
                c.push(a);
                l.push(a);
                h.ensureToolkit(a);
                a.toolkit.loadResource({
                    object: a,
                    onerror: r.pop,
                    onsuccess: r.pop,
                    useLoader: !1
                })
            }
            var v = a.length;
            if (v) {
                var r = b.pending(v, function() {
                    c.select(t);
                    c.reindex();
                    c.handleSelection();
                    var a = e.io.translateX,
                        b = e.io.translateY;
                    a || b ? (c.selection.transform({
                        x: a,
                        y: b
                    }), c.copy()) : f.render.dirty = !0;
                    f.history && f.history.store({
                        cmd: "add",
                        name: "paste-objects",
                        data: l
                    });
                    d && d()
                });
                c.deselectAll();
                for (var y = c.children, t = [], l = []; v--;) {
                    var q = c.copyDeep(a[v]);
                    c.getById(q.id) && (a[v].id = q.id = c.createId(), a[v].zIndex = q.zIndex = c.children.length);
                    var k = q.src;
                    "string" ===
                    typeof k && k.startsWith("#") && !g.assets.exists(k) && w[k] ? g.assets.add({
                        type: q.type,
                        data: w[k],
                        onerror: r.pop,
                        onsuccess: function(a, b) {
                            q.src = a;
                            p(q)
                        }
                    }) : p(q)
                }
            }
        }

        function d() {
            var a = c.toString(c.copies);
            event.clipboardData ? (event.clipboardData.clearData(), event.clipboardData.setData("text/plain", a)) : window.clipboardData && (window.clipboardData.clearData(), window.clipboardData.setData("text", a))
        }
        var e = g.feature,
            c = f.scene,
            h = f.toolkit,
            b = g.util,
            a = 0,
            w = {};
        c.clipboard = {
            save: function() {
                var a = c.copies;
                w = {};
                b.cookie.set("copies",
                    JSON.stringify(a));
                b.cookie.set("copies-paths", JSON.stringify({}));
                g.save.assets({
                    objects: a,
                    toBlobURL: !0,
                    onsuccess: function(a) {
                        b.cookie.set("copies-paths", JSON.stringify(a))
                    }
                })
            },
            restore: function() {
                -1 === a && (a = 0);
                b.cookie.get("copies", function(a) {
                    "object" === typeof a && (c.copies = a)
                });
                b.cookie.get("copies-paths", function(a) {
                    "object" === typeof a && (w = a)
                })
            }
        };
        c.cut = function(d) {
            a = -1;
            b.cookie.set("useNativePaste", !1);
            d = d || c.selection.items;
            for (var h = c.children, p = [], m = h.length; m--;)
                if (d[m]) {
                    var e = h[m];
                    p.push(e);
                    c.shiftAt(m);
                    c.setDirtyPixelData(e);
                    f.render.cache.clean(e.hash)
                }
            p.length && (c.reindex(), c.copies = c.copyDeep(p), c.clipboard.save(), c.deselectAll(), f.history && f.history.store({
                cmd: "remove",
                name: "cut-objects",
                data: c.copyDeep(p).reverse()
            }));
            f.emit("cut", c.copies);
            return c
        };
        c.copy = function(d) {
            a = -1;
            b.cookie.set("useNativePaste", !1);
            q(d) && f.emit("copy", c.copies);
            return c
        };
        c.paste = function(a) {
            l(c.copies, function() {
                a && a(c.copies);
                f.emit("paste", c.copies)
            });
            return c
        };
        c.onCutNative = function(a) {
            eventjs.cancel(a);
            g.exec("object-cut");
            d()
        };
        c.onCopyNative = function(a) {
            eventjs.cancel(a);
            g.exec("object-copy");
            d()
        };
        c.onPasteNative = function(d) {
            function h() {
                k !== a && -1 !== a && (b.cookie.set("useNativePaste", !0), a = k);
                b.cookie.get("useNativePaste", function(a) {
                    a ? k && (c.deselectAll(), q.forEach(function(a) {
                        "text" === a.type ? f.addObject(a) : f.addMedia(a, null, function() {
                            f.setTool("select")
                        })
                    }), f.emit("paste", c.copies)) : g.exec("object-paste")
                })
            }

            function p(a, b) {
                r(["Files", "image"], function(a, b) {
                    var c = a.getAsFile();
                    k += c.size;
                    q.push(c);
                    b(!0)
                }, a, b)
            }

            function m(a, b) {
                r(["text/html"], function(a, b) {
                    a.getAsString(function(a) {
                        g.convert.canvasFromHTML({
                            html: a,
                            onerror: b,
                            onsuccess: function(c) {
                                k += a.length;
                                q.push(c);
                                b(!0)
                            }
                        })
                    })
                }, a, b)
            }

            function e(a, b) {
                r(["text/plain"], function(a, b) {
                    a.getAsString(function(a) {
                        y(a) ? t(a) : (k += a.length, q.push({
                            centerOnPoint: !0,
                            type: "text",
                            content: a,
                            width: 300
                        }), b(!0))
                    })
                }, a, b)
            }

            function r(a, c, d, m) {
                a = function(a, c) {
                    var d = []; - 1 !== w.types.indexOf(a) && b.each(l, function(b) {
                        -1 !== b.type.indexOf(c || a) && d.push(b)
                    });
                    return d
                }.apply(null,
                    a);
                var p = a.length;
                if (p) {
                    var h = b.pending(p, function() {
                            e ? d() : m()
                        }),
                        e;
                    b.each(a, function(a) {
                        c(a, function(a) {
                            e = e || !0 === a;
                            h.pop()
                        })
                    })
                } else m()
            }

            function y(a) {
                return a.startsWith("[") && a.endsWith("]") && a.includes("toolkitId")
            }

            function t(a) {
                try {
                    a = JSON.parse(a), c.copies = a, g.exec("object-paste")
                } catch (b) {
                    console.error(b)
                }
            }
            if (!f.__rendering && !b.isEditingText()) {
                eventjs.cancel(d);
                var w;
                d.clipboardData ? w = d.clipboardData : window.clipboardData && (w = window.clipboardData);
                var l = w.items || w.files;
                if (void 0 === l || 0 === l.length) w.getData ?
                    (d = w.getData("text/plain"), y(d) ? t(d) : c.paste()) : (g.agent.clipboard = !1, c.paste());
                else {
                    var q = [],
                        k = 0;
                    d.msConvertURL ? b.Queue({
                        items: l,
                        oncomplete: h,
                        next: function(a, b, c) {
                            a instanceof File && (q.push(a), k += a.size);
                            this.next()
                        }
                    }) : p(h, function() {
                        m(h, function() {
                            e(h, function() {
                                console.log("nothing to paste.")
                            })
                        })
                    })
                }
            }
        };
        c.duplicate = function(a) {
            a = a || c.selection.items;
            b.count(a) && (q(a), l(c.copies), f.emit("duplicate", a));
            return c
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneSelection = function(g, f, q) {
        function l(a) {
            h.id = a.id;
            h.idx = a.zIndex;
            h.item = a
        }

        function d() {
            h.id = void 0;
            h.idx = void 0;
            h.item = void 0
        }

        function e(a) {
            var b = [],
                c;
            for (c in a)(a = q.children[c]) && b.push(a);
            return b
        }

        function c(a) {
            if (null != a)
                if (Array.isArray(a)) {
                    if (0 < a.length && null != a[0]) return isFinite(a[0].zIndex) ? h.fromObjects(a) : b.arrayToObject(a)
                } else return "number" === typeof a ? b.arrayToObject([a]) : a
        }
        var h = this,
            b = g.util;
        h.remove = function(a) {
            q.removeByIdx(h.items,
                a);
            q.deselectAll();
            return h
        };
        h.id = void 0;
        h.idx = void 0;
        h.item = void 0;
        h.length = 0;
        h.items = {};
        h.changed = !1;
        h.reset = function() {
            d();
            h.changed = !0;
            h.items = {};
            h.length = 0;
            return h
        };
        h.select = function(a) {
            var b = q.children[a];
            b && (void 0 === h.items[a] && (h.changed = !0, h.items[a] = !0, h.length++), 1 === h.length ? l(b) : d());
            return h
        };
        h.setData = function(a) {
            h.reset();
            for (var b in a) h.select(b);
            return h
        };
        h.deselect = function(a) {
            h.items[a] && (h.changed = !0, delete h.items[a], h.length--);
            var b = h.length;
            if (1 === b)
                for (a in h.items)(b =
                    q.children[a]) && l(b);
            else 0 === b && d();
            return h
        };
        h.toggle = function(a) {
            h.items[a] ? h.deselect(a) : h.select(a)
        };
        h.toObjects = function(a, b) {
            a = c(a || h.items);
            var d = e(a);
            return b ? q.copyDeep(d) : d
        };
        h.toIDArray = function(a) {
            a = e(c(a || h.items));
            for (var b = [], d = 0; d < a.length; d++) b.push(a[d].id);
            return b
        };
        h.parse = function(a) {
            return c(a)
        };
        h.fromObjects = function(a) {
            for (var b = {}, c = 0, d = a.length; c < d; c++) b[a[c].zIndex] = !0;
            return b
        };
        h.fromIDArray = function(a) {
            for (var b = {}, c = 0, d = a.length; c < d; c++) {
                var p = q.getById(a[c]);
                p && (b[p.zIndex] = !0)
            }
            return b
        };
        h.toArray = function(a) {
            if (Array.isArray(a)) return a;
            a = a || h.items;
            return Object.keys(a).map(function(a) {
                return parseInt(a)
            })
        };
        h.traverse = function(a) {
            for (var b in h.items) {
                var c = q.children[b];
                c && a(c)
            }
        };
        h.getBBox = function(a) {
            a = a || h.items;
            var b = new g.vector.BBox,
                c;
            for (c in a)
                if (a = q.children[c])
                    if (a = a.trx2D) b.extendTo(a.nw), b.extendTo(a.ne), b.extendTo(a.se), b.extendTo(a.sw);
            return b.asData()
        };
        g.module.SceneTransform(g, f, h)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Theme = function(g, f) {
        function q(a, b) {
            for (var c in b) {
                var d = b[c],
                    m = c.split("-"),
                    p = m.shift(),
                    m = m.shift() || "";
                a[c] = l(p, m, d, d.width || a.width, d.height || a.height)
            }
        }

        function l(a, b, c, d, m) {
            var p = {};
            if ("svg" === c.type) {
                p.command = c.command;
                for (var h in c) "title" === h.substr(0, 5) && (p[h] = c[h])
            } else x.copyInto(c, p, {
                referenceNodes: !0,
                filterOut: function(a, b) {
                    return void 0 !== b
                }
            });
            p.width = d;
            p.height = m;
            p.viewBox = [0, 0, d, m];
            p.type = a;
            p.render = function(h) {
                var e = h.ctx,
                    r = h.matrix,
                    v = f.zoom;
                c.render ? c.render({
                    ctx: e,
                    type: a,
                    state: b,
                    matrix: r,
                    control: h.control,
                    object: h.object
                }) : c.svg ? (e.save(), r = c.svg.vob, e.scale(d / r.width, m / r.height), c.svg.render(h), e.restore()) : c.image ? (h = c.image, e.save(), e.scale(r.a, r.d), e.drawImage(h, 0, 0), e.restore()) : isFinite(d + m) && (e.save(), e.beginPath(), "circle" === p.shape ? (h = m / 2 / v, e.arc(d / 2 / v, h, h, 0, 2 * Math.PI)) : e.rect(0, 0, 1 * d / v, 1 * m / v), p.lineWidth && (e.lineWidth = p.lineWidth / v), p.shadowColor && (e.shadowColor = p.shadowColor), p.shadowOffsetX && (e.shadowOffsetX = p.shadowOffsetX),
                    p.shadowOffsetY && (e.shadowOffsetY = p.shadowOffsetY), p.shadowBlur && (e.shadowBlur = p.shadowBlur), p.fillStyle && (e.fillStyle = p.fillStyle, e.fill()), p.strokeStyle && (e.strokeStyle = p.strokeStyle, e.stroke()), e.restore())
            };
            return p
        }

        function d() {
            var a = {},
                b;
            for (b in w.tools) {
                var c = w.tools[b];
                c && c.controls && (a[b] = e(b, c))
            }
            return a
        }

        function e(a, b) {
            var d = x.copy(b),
                p = {};
            p.mouse = c(d.controls.mouse);
            p.touch = c(d.controls.touch);
            var e = p.controls = {},
                f = x.copy(r),
                g;
            for (g in v) {
                var u = d.controls[g] || (d.controls[g] = {}),
                    w;
                for (w in m) {
                    var l =
                        f[w] || (f[w] = {}),
                        l = l[g] || (l[g] = x.copy(f[g]));
                    x.copyInto(u, l)
                }
            }
            for (w in m)
                if (u = d.controls[w], void 0 != u && !1 !== u) {
                    !0 === u && (u = d.controls[w] = {});
                    u.focus = u.focus || u.hover || u.normal;
                    u.hover = u.hover || u.normal;
                    x.copyInto(f[w], u, {
                        referenceNodes: !0,
                        filterOut: function(a, b) {
                            return void 0 !== b
                        }
                    });
                    for (g in v) x.copyInto(u, u[g], {
                        filterOut: function(a, b) {
                            return void 0 === b
                        }
                    });
                    h(e, w, "normal", u);
                    h(e, w, "hover", u);
                    h(e, w, "focus", u)
                }
            return p
        }

        function c(a) {
            a = a || {};
            a.padding = isFinite(a.padding) ? a.padding : 10;
            a.width = isFinite(a.width) ?
                a.width : 16;
            a.height = isFinite(a.height) ? a.height : 16;
            return a
        }

        function h(a, b, c, d) {
            var m = d[c] || d.hover || d.normal || {},
                p;
            for (p in d) v[p] || void 0 === m[p] && (m[p] = d[p]);
            if (x.isEmpty(m)) return {};
            d = m.command;
            "function" !== typeof d && (m.command = "string" === typeof d ? u[d + "Event"] : u.rotateScaleEvent);
            "normal" === c ? a[b] = m : a[b + "-" + c] = m
        }

        function b(b, c) {
            x.Queue({
                items: b,
                oncomplete: c,
                next: function(c, d, m) {
                    c.src ? a(b, c, this.next) : this.next()
                }
            })
        }

        function a(a, b, c) {
            var d = b.src;
            if (p.__cache[d]) a = p.__cache[d], "svg" === a.type ? b.svg =
                a : b.image = a, c();
            else if (g.vector.SVG.detect(d)) new g.vector.SVG({
                skipRender: !0,
                src: d,
                onerror: c,
                onsuccess: function(a) {
                    p.__cache[d] = a;
                    b.svg = a;
                    c()
                }
            });
            else return x.loadImage({
                src: d,
                onerror: c,
                onsuccess: function() {
                    p.__cache[d] = this;
                    b.image = this;
                    c()
                }
            })
        }
        var w = g.feature,
            u = f.toolkit,
            x = g.util,
            p;
        this.getControls = function(a) {
            a = p[a.type] || p[a.toolkitId] || p.defaults || {};
            return eventjs.isTouch ? a.touch : a.mouse || {}
        };
        var m = {
                anchor: !0,
                spinner: !0,
                n: !0,
                ne: !0,
                ne_spinner: !0,
                ne_spinner_area: !0,
                e: !0,
                se: !0,
                se_spinner: !0,
                se_spinner_area: !0,
                s: !0,
                sw: !0,
                sw_spinner: !0,
                sw_spinner_area: !0,
                w: !0,
                nw: !0,
                nw_spinner: !0,
                nw_spinner_area: !0
            },
            v = {
                normal: !0,
                hover: !0,
                focus: !0
            },
            r = {
                hover: {
                    lineWidth: .75,
                    strokeStyle: "#fff",
                    fillStyle: "#0080C2"
                },
                focus: {
                    lineWidth: .75,
                    strokeStyle: "#fff",
                    fillStyle: "#0080C2"
                },
                normal: {
                    lineWidth: .75,
                    strokeStyle: "#fff",
                    fillStyle: "rgba(30,30,30,1)"
                },
                anchor: {
                    command: "move",
                    cursor: "default",
                    padding: 5,
                    normal: {
                        lineWidth: .75,
                        shadowColor: "#fff",
                        shadowOffsetX: 1,
                        shadowOffsetY: 1,
                        shadowBlur: 0,
                        strokeStyle: "#000"
                    },
                    hover: {
                        lineWidth: .75,
                        shadowColor: "#fff",
                        shadowOffsetX: 1,
                        shadowOffsetY: 1,
                        shadowBlur: 0,
                        strokeStyle: "#000"
                    },
                    focus: {
                        lineWidth: .75,
                        shadowColor: "#000",
                        shadowOffsetX: 1,
                        shadowOffsetY: 1,
                        shadowBlur: 0,
                        strokeStyle: "#0080C2"
                    }
                }
            };
        this.create = function() {
            p = {
                __cache: {}
            };
            var a = d();
            x.Queue({
                items: a,
                oncomplete: function() {
                    for (var b in a) p[b] = {}, p[b].mouse = a[b].mouse, p[b].touch = a[b].touch, q(p[b].mouse, a[b].controls), q(p[b].touch, a[b].controls)
                },
                next: function(a, c, d) {
                    b(a.controls, this.next)
                }
            })
        };
        this.create()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.SceneTransform = function(g, f, q) {
        function l(b, a) {
            var d = f.pixelRatio,
                g = sk.doc.contexts.debug.ctx;
            if (g) {
                g.canvas.width = g.canvas.width;
                g.translate(f.canvas2d.x, f.canvas2d.y);
                g.scale(d, d);
                var x = l.scale;
                l.increasing ? 1 <= (l.scale += .005) && (l.increasing = !1) : 0 >= (l.scale -= .005) && (l.increasing = !0);
                var d = b.bbox,
                    p = f.scene.getObjectOrigin(d),
                    m = h.angle(p, a),
                    v = d.rotate * e.DEG_RAD;
                g.save();
                var r = new c.Transform;
                r.translate(d.x, d.y);
                r.scale(d.scale.x, d.scale.y);
                r.rotateAt(v,
                    p);
                r.scaleAt(x, 1, a, m);
                r.apply(g, !0);
                x = (new CSSMatrix(r.toCSSMatrix())).decompose();
                console.json(x);
                r = g.createLinearGradient(0, 0, 170, 170);
                r.addColorStop(0, "blue");
                r.addColorStop(1, "red");
                g.rect(0, 0, d.width, d.height);
                g.fillStyle = r;
                g.fill();
                g.restore();
                g.save();
                r = new c.Transform;
                r.translate(x.translate.x, x.translate.y);
                r.rotate(x.rotate.z);
                r.skew(x.skew.x, x.skew.y);
                r.scale(x.scale.x, x.scale.y);
                console.json(r.matrix);
                r.apply(g, !0);
                g.beginPath();
                g.rect(0, 0, d.width, d.height);
                g.lineWidth = 1.5;
                g.strokeStyle =
                    "black";
                g.stroke();
                g.restore();
                g = new c.Shape.debug(g);
                g.point(d, "blue");
                g.point(p, "crimson");
                g.point(a, "orange");
                g.vector(a, m + Math.PI / 2, "orange")
            }
        }
        var d = f.toolkit,
            e = g.util,
            c = g.vector,
            h = g.vector.Point;
        l.scale = .5;
        l.increasing = !0;
        q.transform = function(b, a) {
            var h, g, x = f.scene,
                p = b.cache || {},
                m = b.items || b.ids,
                v = b.origin,
                r = b.state;
            h = !r || "start" === r;
            g = !r || "end" === r;
            var y = b.control,
                r = b.pointerId,
                t = d.readResize(b),
                q = d.readRotate(b),
                k = d.readScale(b),
                C = d.readTranslate(b),
                A = "absolute" === b.position,
                I = !!t,
                B = !!q,
                D = !!k,
                F = !!C,
                G = I || B || D || F;
            if (!(G || h || g)) return this;
            if (h || void 0 === p.origin) p.rotate = 0, p.sx = 1, p.sy = 1, p.x = 0, p.y = 0, p.width = 0, p.height = 0, p.updated = !1, p.origin = v || x.getObjectOrigin(x.getBoundingBox({
                useSelection: !0,
                useHovered: !0
            }));
            A ? (I && (p.width = t.width, p.height = t.height), B && (p.rotate = q), D && (p.sx = k.x, p.sy = k.y), F && (p.x = C.x, p.y = C.y)) : (I && (p.width += t.width, p.height += t.height), B && (p.rotate += q), D && (p.sx *= k.x, p.sy *= k.y), F && (p.x += C.x, p.y += C.y));
            var H;
            H = Array.isArray(m) ? x.selection.fromIDArray(m) : m ? m : x.selection.items;
            var m = [],
                v = p.origin,
                J = e.count(H),
                O;
            for (O in H)
                if (H = x.children[O]) {
                    var K = H.bbox,
                        L = d.getFeature(H);
                    b.debug && l(H, v);
                    I && !1 !== H.resizable && !1 !== L.resizable && (A ? (K.width = t.width, K.height = t.height) : (K.width += t.width, K.height += t.height), H.dirtyCheck = !0, H.dirtyDimension = !0, p.updated = !0);
                    if (B && !1 !== H.rotatable && !1 !== L.rotatable) {
                        var M, Q;
                        "objectBoundingBox" === K.units ? (M = v.x - K.width / 2 * K.scale.x, Q = v.y - K.height / 2 * K.scale.y) : (M = v.x, Q = v.y);
                        var R;
                        R = A ? q - K.rotate : q;
                        var U = R * e.DEG_RAD,
                            V = K.x - M,
                            P = K.y - Q;
                        K.x = Math.cos(U) *
                            V - Math.sin(U) * P + M;
                        K.y = Math.sin(U) * V + Math.cos(U) * P + Q;
                        K.rotate = (K.rotate + R + 3600) % 360;
                        H.inbounds = void 0;
                        H.dirtyTransform = !0;
                        p.updated = !0
                    }
                    if (k || K.scaleCache) {
                        void 0 === K.scaleCache && (K.scaleCache = {
                            x: 1,
                            y: 1,
                            px: K.scale.x,
                            py: K.scale.y,
                            mx: K.x,
                            my: K.y
                        });
                        if (D && !1 !== H.scalable && !1 !== L.scalable) {
                            if (A) K.scale.x = k.x, K.scale.y = k.y;
                            else if (1 < J) {
                                M = (v.x - K.x) * k.x;
                                V = (v.y - K.y) * k.y;
                                if (1 === k.y || 1 === k.x) U = x.getObjectOrigin(K), M -= (v.x - U.x) * (1 - k.y), V -= (v.y - U.y) * (1 - k.x);
                                K.scale.x *= k.x;
                                K.scale.y *= k.y;
                                K.scaleCache.x *= k.x;
                                K.scaleCache.y *=
                                    k.y;
                                K.x = v.x - M;
                                K.y = v.y - V
                            } else {
                                K.scale.x *= k.x;
                                K.scale.y *= k.y;
                                K.scaleCache.x *= k.x;
                                K.scaleCache.y *= k.y;
                                M = x.getObjectOrigin(K);
                                if ("objectBoundingBox" === K.units) V = M.x, P = M.y;
                                else {
                                    var P = K,
                                        V = y,
                                        X = P.scale,
                                        U = P.width;
                                    Q = P.height;
                                    R = new c.Transform;
                                    R.translate(P.x, P.y);
                                    R.scale(X.x, X.y);
                                    "objectBoundingBox" === P.units ? V = R.point2d(U / 2, Q / 2) : (P = {}, P.cp = R.point2d(U / 2, Q / 2), P.nw = R.point2d(0, 0), P.ne = R.point2d(U, 0), P.se = R.point2d(U, Q), P.sw = R.point2d(0, Q), P.n = R.point2d(U / 2, 0), P.e = R.point2d(U, Q / 2), P.s = R.point2d(U / 2, Q), P.w = R.point2d(0,
                                        Q / 2), V = P[V] || P.cp);
                                    Q = V.x - M.x;
                                    R = V.y - M.y;
                                    U = K.rotate * e.DEG_RAD;
                                    P = Math.cos(U);
                                    U = Math.sin(U);
                                    V = Q * P - R * U + M.x;
                                    P = Q * U + R * P + M.y
                                }
                                K.x -= V - v.x;
                                K.y -= P - v.y
                            }
                            H.inbounds = void 0;
                            H.dirtyTransform = !0;
                            p.updated = !0
                        }
                        if (g || H.usePixelData) H.bbox.scaleCache = void 0, H.dirtyCheck = !0
                    }
                    F && !1 !== H.movable && !1 !== L.movable && (A ? (K.x = C.x, K.y = C.y) : (K.x += C.x, K.y += C.y), H.inbounds = void 0, H.dirtyTransform = !0, p.updated = !0);
                    x.setDirtyPixelData(H);
                    p.updated && (H.dirtyTransform && x.updateConstrain(H), g && k && (H.dirtyCheck = !0));
                    m.push(H.id)
                }
            if (p.updated) {
                f.on.record &&
                    !a && (G || g || h) && (h = {
                        state: b.state,
                        origin: v,
                        control: y,
                        pointerId: r,
                        ids: m
                    }, I && (h.width = t.width, h.height = t.height), B && (h.rotate = q), D && (h.sx = k.x, h.sy = k.y), F && (h.x = C.x, h.y = C.y), f.on.record({
                        op: "SCENE_TRANSFORM",
                        data: h
                    }));
                if (f.history && g && !a) {
                    h = {};
                    p.rotate && (h.rotate = p.rotate);
                    p.sx && 1 !== p.sx && (h.sx = p.sx);
                    p.sy && 1 !== p.sy && (h.sy = p.sy);
                    p.x && (h.x = p.x);
                    p.y && (h.y = p.y);
                    p.width && (h.width = p.width);
                    p.height && (h.height = p.height);
                    h.ids = m;
                    h.origin = v;
                    h.pointerId = r;
                    var N;
                    if (h.width || h.height) f.emit("objectResize", h, m), N =
                        N ? "transform" : "resize";
                    h.rotate && (f.emit("objectRotate", h, m), N = N ? "transform" : "rotate");
                    if (h.sx || h.sy) f.emit("objectScale", h, m), N = N ? "transform" : "scale";
                    if (h.x || h.y) f.emit("objectTranslate", h, m), N = N ? "transform" : "move";
                    N && (f.emit("objectTransform", h, m), f.history.store({
                        cmd: "transform",
                        pointerId: r,
                        name: N,
                        data: h
                    }, a))
                }
                x.updateBBox()
            }
        };
        q.rotate = function(b, a) {
            a = a || {};
            a.rotate = b;
            return q.transform(a)
        };
        q.flip = function(b, a, c) {
            c = c || {};
            c.sx = b ? -1 : 1;
            c.sy = a ? -1 : 1;
            return q.transform(c)
        };
        q.flipX = function(b) {
            return q.flip(1,
                0, b)
        };
        q.flipY = function(b) {
            return q.flip(0, 1, b)
        };
        q.scale = function(b, a, c) {
            c = c || {};
            c.sx = b;
            c.sy = a;
            return q.transform(c)
        };
        q.scaleX = function(b, a) {
            return q.scale(b, 1, a)
        };
        q.scaleY = function(b, a) {
            return q.scale(1, b, a)
        };
        q.translate = function(b, a, c) {
            c = c || {};
            c.x = b;
            c.y = a;
            return q.transform(c)
        };
        f.queueHistory && f.queueHistory.add(function() {
            f.history.register("transform", function(b, a, c) {
                b = a.ids;
                var h = a.origin,
                    g = d.readResize(a),
                    p = d.readRotate(a),
                    m = d.readTranslate(a),
                    v = d.readScale(a),
                    r, y;
                "number" === typeof v ? y = r = v : "object" ===
                    typeof v && (r = v.x, y = v.y);
                var t, l;
                "object" === typeof m && (t = m.x, l = m.y);
                var q, k;
                "object" === typeof g && (q = g.width, k = g.height);
                c && (g && (q = -q, k = -k), p && (p = 360 - p), v && (r = 1 / r, y = 1 / y), m && (t = -t, l = -l));
                for (c = 0; c < b.length; c++)
                    if (a = b[c], a = f.scene.getById(a)) {
                        var A = a.bbox;
                        g && (A.width += q, A.height += k, a.dirtyCheck = !0, a.dirtyDimension = !0);
                        if (p) {
                            var I, B;
                            "objectBoundingBox" === A.units ? (I = h.x - A.width / 2 * A.scale.x, B = h.y - A.height / 2 * A.scale.y) : (I = h.x, B = h.y);
                            var D = A.x - I,
                                F = A.y - B,
                                G = p * e.DEG_RAD;
                            A.x = Math.cos(G) * D - Math.sin(G) * F + I;
                            A.y =
                                Math.sin(G) * D + Math.cos(G) * F + B;
                            A.rotate = (A.rotate + p + 3600) % 360;
                            a.dirtyTransform = !0
                        }
                        v && (I = (h.x - A.x) * r, B = (h.y - A.y) * y, A.x = h.x - I, A.y = h.y - B, A.scale.x *= r, A.scale.y *= y, a.dirtyCheck = !0, a.dirtyTransform = !0);
                        m && (A.x += t, A.y += l, a.dirtyTransform = !0);
                        a.inbounds = void 0
                    }
            })
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.GenerateMedia = function(g, f) {
        function q(b) {
            var a = b.callback,
                c = b.ctx,
                d = c.canvas,
                h = c.createPattern(d, "repeat");
            g.agent.has("io.blob", function() {
                d.toBlobURL(function(c) {
                    h.css = "url(" + c + ")";
                    h.data = c;
                    h.id = b.id;
                    a && a(h)
                })
            }, function() {
                var c = d.toDataURL();
                h.css = "url(" + c + ")";
                h.data = c;
                h.id = b.id;
                a && a(h)
            });
            return h
        }
        var l = g.dom,
            d = g.gen,
            e = g.util,
            c = l.Canvas(),
            h = c.ctx;
        d.paper = function(b, a) {
            var c = (e.toMetrics || (e.toMetrics = e.getScreenMetrics()))["in>px"],
                c = {
                    notebook: {
                        id: "notebook",
                        lineStartTop: .85 * c,
                        lineHeight: 30,
                        lineColor: "#8CA6BD",
                        marginLeft: .85 * c,
                        marginColor: "#FF7088",
                        fillColor: "#F8F9B3"
                    },
                    looseLeaf: {
                        id: "looseLeaf",
                        lineStartTop: .85 * c,
                        lineHeight: 30,
                        lineColor: "#CAEAFB",
                        marginLeft: .85 * c,
                        marginColor: "#FF7088",
                        fillColor: "#FAFAFA"
                    },
                    lined: {
                        id: "lined",
                        lineStartTop: -.5,
                        gutter: .25 * c,
                        lineHeight: 30,
                        lineColor: "#8CA6BD",
                        fillColor: "#FAFAFA"
                    }
                };
            b = c[b] || b || c.notebook;
            b.callback = a;
            var h = b.grid || 0,
                f = b.gutter || 0,
                p = b.lineStartTop || 0,
                m = b.lineStartLeft || 0,
                c = b.lineHeight || 1,
                g = b.lineColor || "#8CA6BD",
                r = b.marginLeft || 0,
                y = b.marginColor || "#C37F9B",
                t = l.Canvas(1024, 1024).ctx;
            t.fillStyle = b.fillColor || "#fff";
            t.fillRect(0, 0, 1024, 1024);
            h && (t.save(), t.translate(f, f), h = d.grid({
                size: h,
                strokeColor: g,
                fillColor: "none"
            }), t.fillStyle = h, t.fillRect(0, 0, 1024, 1024), t.restore());
            h = 1024 / c;
            t.save();
            t.translate(m, p);
            for (p = 0; p < h; p++) t.beginPath(), t.moveTo(0, p * c), t.lineTo(1024, p * c), t.lineWidth = 1, t.strokeStyle = g, t.stroke();
            t.restore();
            r && (t.save(), t.beginPath(), t.moveTo(r, 0), t.lineTo(r, 1024), t.lineWidth = 1, t.strokeStyle =
                y, t.stroke(), t.restore());
            b.ctx = t;
            return q(b)
        };
        d.grid = function(b, a) {
            var c = {
                grid: {
                    id: "grid",
                    size: 20,
                    strokeColor: "#ddd",
                    fillColor: "#fff"
                },
                graphPaper: {
                    id: "graphPaper",
                    size: 20,
                    strokeColor: "#BEE0BD",
                    fillColor: "#F0FCE1"
                },
                blueprint: {
                    id: "blueprint",
                    size: 20,
                    strokeColor: "#2893e0",
                    fillColor: "#0078CF"
                }
            };
            b = c[b] || b || c.grid;
            var c = b.size || 12,
                d = b.strokeColor || "#000",
                h = b.fillColor || "#1f1f1f",
                p = l.Canvas(c, c).ctx;
            b.callback = a || b.callback;
            b.ctx = p;
            p.fillStyle = h;
            p.fillRect(0, 0, c, c);
            p.moveTo(0, 0);
            p.lineTo(0, c);
            p.moveTo(0,
                0);
            p.lineTo(c, 0);
            p.lineWidth = 1;
            p.strokeStyle = d;
            p.stroke();
            return q(b)
        };
        d.interlace = function(b, a) {
            b = b || {};
            var d = {
                    transparent: {
                        id: "transparent",
                        size: 12,
                        innerColor: "#fff",
                        outerColor: "#d9d9d9"
                    },
                    transparentDark: {
                        id: "transparentDark",
                        size: 12,
                        innerColor: "#000",
                        outerColor: "#1f1f1f"
                    }
                },
                e = d.transparent,
                d = d[b] || d[b.id] || b,
                f = d.size || e.size,
                p = d.innerColor || e.innerColor,
                e = d.outerColor || e.outerColor;
            c.width = 2 * f;
            c.height = 2 * f;
            h.fillStyle = p;
            h.fillRect(0, 0, f, f);
            h.fillStyle = e;
            h.fillRect(f, 0, f, f);
            h.fillStyle = e;
            h.fillRect(0,
                f, f, f);
            h.fillStyle = p;
            h.fillRect(f, f, f, f);
            if (b.toDataURL) return c.toDataURL();
            d.callback = a || d.callback;
            d.ctx = h;
            return q(d)
        };
        d.rangeBar = function(b) {
            b = b || {};
            b.dash = b.dash || {};
            g.ui.rangeStyle ? e.copyInto(g.ui.rangeStyle, b) : b.top = 8;
            c || initCanvas();
            var a = f.pixelRatio,
                d = (b.top || 0) * a,
                u = (b.left || 0) * a,
                l = (b.barWidth || 233) * a,
                p = (b.barHeight || 6) * a,
                m = b.fillStyle || "#555",
                v = b.gradient,
                r = d + p;
            b = b.dash;
            b.height = b.height || 4;
            b.heightSmall = b.heightSmall || 3;
            b.strokeStyle = b.strokeStyle || "#666";
            b.lineWidth = b.lineWidth || 1;
            b.globalAlpha =
                b.globalAlpha || 1;
            b.position = b.position || "top";
            c.width = l + 1;
            c.height = p + b.height + d;
            c.style.width = c.width / a + "px";
            c.style.height = c.height / a + "px";
            h.clearRect(u, d, l, 30);
            var a = 0,
                y = l - 9;
            h.save();
            h.beginPath();
            h.lineWidth = b.lineWidth;
            h.globalAlpha = b.globalAlpha;
            var t;
            t = "bottom" === b.position ? r - 5 : d - 1;
            for (var q = b.height, k = b.heightSmall, r = 0; r <= y + 1; r += y / 10) {
                var C = Math.round(r) + u + 4.5,
                    A = a % 5 ? k : q;
                h.moveTo(C, t);
                "bottom" === b.position ? h.lineTo(C, t + A) : h.lineTo(C, t - A);
                h.strokeStyle = b.strokeStyle;
                h.stroke();
                h.beginPath();
                a++
            }
            h.restore();
            if (v)
                for (m = h.createLinearGradient(0, 0, l, 0), r = 0, b = v.length; r < b; r++) m.addColorStop(r / (b - 1 || 1), v[r]);
            h.fillStyle = m;
            C = u + .5;
            h.lineWidth = .25;
            h.strokeStyle = "#000";
            g.vector.Shape ? g.vector.Shape.roundRect(h, C, d, C + l, p, p / 2) : h.rect(C, d, C + l, p);
            h.fill();
            h.stroke();
            return c
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.GeneratePreview = function(g) {
        var f = g.dom,
            q = g.util,
            l = g.gen || (g.gen = {}),
            d = g.vector;
        l.preview = function(e, c) {
            function h(a, b, c, d) {
                q.thumbnailer({
                    src: a,
                    crop: "edge",
                    width: l,
                    height: u,
                    background: m,
                    croparea: !1,
                    onsuccess: function(a) {
                        v ? a.toBlob(function(a) {
                            c.push({
                                filename: b,
                                blob: a
                            });
                            d()
                        }) : (c.push({
                            filename: b,
                            canvas: a
                        }), d())
                    }
                })
            }
            e = e || {};
            var b = e.pixelRatio || 1,
                a = e.type || "stamp",
                l = (e.width || 52) * b,
                u = (e.height || 52) * b,
                x = e.oncomplete ? [] : {},
                p = e.oncomplete || function(a) {},
                m = e.background ||
                "none",
                v = e.download || !1,
                b = e.debug || !1;
            e.src ? c = [{
                filepath: e.src
            }] : e.resource ? c = [{
                resource: e.resource
            }] : !c && g.lib && (c = g.lib[a].paths);
            var r = e.canvas || f.Canvas(),
                y = r.getContext("2d");
            b && document.body.appendChild(r);
            q.Queue({
                items: c,
                delayStart: !0,
                onprogress: function(a) {
                    1 < c.length && console.log("load", a)
                },
                oncomplete: function() {
                    v ? g.io.zip.encode(x, function(b) {
                        g.download.blob(b, a + "-preview.zip")
                    }, function(a) {
                        console.log(a)
                    }, function(a) {
                        console.log("zip", a)
                    }) : e.src || e.resource ? p(x[0]) : p(x)
                },
                next: function(b) {
                    function c(a) {
                        r.width =
                            l;
                        r.height = u;
                        a.render && a.render({
                            ctx: y,
                            placement: "crop",
                            width: l,
                            height: u
                        });
                        h(r, f, v, m.next)
                    }
                    var m = this;
                    if (b.filepath && "#" === b.filepath[0]) return this.next();
                    var p = b.filepath ? b.filepath : g.lib[a].getSrc(b, {
                            absolute: !0
                        }),
                        f = "",
                        v = [];
                    if (e.src || e.resource) x = v;
                    else {
                        var q = p.replace(g.loc.host, "").substr(1).split("/");
                        if (1 < q.length) {
                            for (var k = [x], f = q.pop(); q.length;) {
                                var F = q.shift();
                                if (F) {
                                    var G = k[k.length - 1];
                                    G[F] || (G[F] = []);
                                    k.push(G[F])
                                }
                            }
                            v = G[F]
                        } else x.length || (x = []), f = q[0], v = x
                    }
                    f = f.replace("svg", "png");
                    switch (a) {
                        case "clipart":
                            b.resource ?
                                c(b.resource) : d.SVG({
                                    ctx: y,
                                    src: p,
                                    debug: e.debug,
                                    useCache: !1 !== e.useCache,
                                    onerror: function(a) {
                                        console.log(a, "error loading svg", b);
                                        m.next()
                                    },
                                    onsuccess: c
                                });
                            break;
                        case "stamp":
                            h(p, f, v, m.next)
                    }
                }
            })
        };
        l.preview.stamp = function(d, c, h) {
            d = d || {};
            d.type = "stamp";
            l.preview(d, c, h)
        };
        l.preview.clipart = function(d, c, h) {
            d = d || {};
            d.type = "clipart";
            l.preview(d, c, h)
        };
        l.preview.font = l.preview.text = function(e) {
            function c(a, c) {
                h.width = 236;
                h.height = 60;
                h.style.width = "300px";
                h.style.height = "50px";
                b.textAlign = "center";
                b.textBaseline =
                    "middle";
                b.font = '60px "' + a.name + '", Arial, Helvetica';
                var m = b.measureText(a.name).width,
                    p = d.text.measureTextHeight(a.name, b.font),
                    m = Math.min(h.width / (m + 40), h.height / (p + 20));
                1 > m && (b.font = 60 * m + 'px "' + a.name + '", Arial, Helvetica');
                b.fillStyle = "#fff";
                b.fillText(a.name, h.width / 2, h.height / 2);
                h.toBlob(function(b) {
                    u.push({
                        filename: a.name + ".png",
                        canvas: h,
                        blob: b
                    });
                    c()
                })
            }
            var h = l.canvas || (l.canvas = f.Canvas(1, 1)),
                b = h.getContext("2d"),
                a = e.download || !1,
                w = e.oncomplete || function(a) {},
                u = [],
                x = [],
                p = g.lib.text;
            if (e) x =
                e.fonts;
            else
                for (var m in p.byName) {
                    var v = q.copy(p.byName[m]);
                    v.filepath = p.getSrc(v, {
                        absolute: !0
                    });
                    x.push(v)
                }
            q.Queue({
                items: x,
                oncomplete: function() {
                    a ? g.io.zip.encode(u, function(a) {
                        g.download.blob(a, "font-preview.zip")
                    }) : e.src || e.resource ? w(u[0]) : w(u)
                },
                onprogress: function(a) {
                    console.log(a)
                },
                next: function(a) {
                    var b = this;
                    d.text.detectFont(a.name) ? c(a, b.next) : d.text.attach({
                        family: a.name,
                        timeout: 1E3,
                        onsuccess: function() {
                            c(a, b.next)
                        },
                        onerror: function(d) {
                            console.error(d);
                            c(a, b.next)
                        }
                    })
                }
            })
        };
        return l
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.vector || (k.vector = {}),
        f = g.BBox = function(d) {
            this.unset();
            return d ? this.path(d) : this
        };
    f.toRect = function(d) {
        return [{
            x: d.x1,
            y: d.y1,
            cmd: "M"
        }, {
            x: d.x2,
            y: d.y1,
            cmd: "L"
        }, {
            x: d.x2,
            y: d.y2,
            cmd: "L"
        }, {
            x: d.x1,
            y: d.y2,
            cmd: "L"
        }]
    };
    k = f.prototype;
    k.asData = function() {
        return {
            x1: this.x.min,
            x2: this.x.max,
            y1: this.y.min,
            y2: this.y.max
        }
    };
    k.asRect = function() {
        return f.toRect(this.asData())
    };
    k.path = function(d) {
        var e = d.asRect || !1,
            c = d.convexHull || !1,
            h = d.expand || 0,
            b = d.matrix || void 0;
        d = d.data || d;
        var a, f = !0;
        b && (a =
            new g.Transform(b), f = g.Transform.isIdentity(b));
        var u, b = this.x,
            l = this.y,
            p, m;
        if (f)
            for (var f = 0, v = d.length; f < v; f++) switch ((u = d[f]).cmd) {
                case "M":
                    u.x < b.min && (b.min = u.x);
                    u.x > b.max && (b.max = u.x);
                    u.y < l.min && (l.min = u.y);
                    u.y > l.max && (l.max = u.y);
                    p = u.x;
                    m = u.y;
                    break;
                case "L":
                    u.x < b.min && (b.min = u.x);
                    u.x > b.max && (b.max = u.x);
                    u.y < l.min && (l.min = u.y);
                    u.y > l.max && (l.max = u.y);
                    p = u.x;
                    m = u.y;
                    break;
                case "C":
                    this.cubic(p, m, u.x1, u.y1, u.x2, u.y2, u.x, u.y, c);
                    p = u.x;
                    m = u.y;
                    break;
                case "Q":
                    var r = p + 2 / 3 * (u.x1 - p),
                        y = m + 2 / 3 * (u.y1 - m),
                        t = r + (u.x - p) /
                        3,
                        q = y + (u.y - m) / 3;
                    this.cubic(p, m, r, y, t, q, u.x, u.y, c);
                    p = u.x;
                    m = u.y
            } else
                for (f = 0, v = d.length; f < v; f++) switch ((u = d[f]).cmd) {
                    case "M":
                        var k = a.point2d(u.x, u.y);
                        k.x < b.min && (b.min = k.x);
                        k.x > b.max && (b.max = k.x);
                        k.y < l.min && (l.min = k.y);
                        k.y > l.max && (l.max = k.y);
                        p = k.x;
                        m = k.y;
                        break;
                    case "L":
                        k = a.point2d(u.x, u.y);
                        k.x < b.min && (b.min = k.x);
                        k.x > b.max && (b.max = k.x);
                        k.y < l.min && (l.min = k.y);
                        k.y > l.max && (l.max = k.y);
                        p = k.x;
                        m = k.y;
                        break;
                    case "C":
                        k = a.point2d(u.x, u.y);
                        r = a.point2d(u.x1, u.y1);
                        u = a.point2d(u.x2, u.y2);
                        this.cubic(p, m, r.x, r.y, u.x,
                            u.y, k.x, k.y, c);
                        p = k.x;
                        m = k.y;
                        break;
                    case "Q":
                        k = a.point2d(u.x, u.y), a.point2d(u.x1, u.y1), r = p + 2 / 3 * (k.x1 - p), y = m + 2 / 3 * (k.y1 - m), t = r + (k.x - p) / 3, q = y + (k.y - m) / 3, this.cubic(p, m, r, y, t, q, k.x, k.y, c), p = k.x, m = k.y
                }
        h && (b.expand(h), l.expand(h));
        return e ? this.asRect() : this.asData()
    };
    k.cubic = function(d, e, c, h, b, a, f, g, x) {
        var p = this.x,
            m = this.y;
        f < p.min && (p.min = f);
        f > p.max && (p.max = f);
        g < m.min && (m.min = g);
        g > m.max && (m.max = g);
        if (x) p.extendTo(c), p.extendTo(b), m.extendTo(h), m.extendTo(a);
        else {
            x = m.min <= h && h <= m.max && m.min <= a && a <= m.max;
            if (!(p.min <=
                    c && c <= p.max && p.min <= b && b <= p.max)) {
                var v = 3 * d - 9 * c + 9 * b - 3 * f,
                    r = 6 * c - 12 * b + 6 * f,
                    y = 3 * b - 3 * f;
                if (Math.abs(v) <= l) Math.abs(r) >= l && (y = -y / r, y > l && 1 > y && p.extendToCubic(y, 1 - y, d, f, c, b));
                else if (y = r * r - 4 * v * y, y >= l) {
                    var t = Math.sqrt(y),
                        y = (-r + t) / (2 * v);
                    y > l && 1 > y && p.extendToCubic(y, 1 - y, d, f, c, b);
                    y = (-r - t) / (2 * v);
                    y > l && 1 > y && p.extendToCubic(y, 1 - y, d, f, c, b)
                }
            }
            x || (v = 3 * e - 9 * h + 9 * a - 3 * g, r = 6 * h - 12 * a + 6 * g, y = 3 * a - 3 * g, Math.abs(v) <= l ? Math.abs(r) >= l && (y = -y / r, y > l && 1 > y && m.extendToCubic(y, 1 - y, e, g, h, a)) : (y = r * r - 4 * v * y, y >= l && (t = Math.sqrt(y), y = (-r + t) / (2 * v),
                y > l && 1 > y && m.extendToCubic(y, 1 - y, e, g, h, a), y = (-r - t) / (2 * v), y > l && 1 > y && m.extendToCubic(y, 1 - y, e, g, h, a))))
        }
    };
    k.unset = function() {
        this.x = new q({
            min: Infinity,
            max: -Infinity
        });
        this.y = new q({
            min: Infinity,
            max: -Infinity
        })
    };
    k.extendTo = function(d) {
        this.x.extendTo(d.x);
        this.y.extendTo(d.y)
    };
    var q = function(d) {
        this.min = d.min;
        this.max = d.max
    };
    q.prototype = {
        extendToCubic: function(d, e, c, h, b, a) {
            d = d * d * d * c + 3 * d * d * e * b + 3 * d * e * e * a + e * e * e * h;
            d < this.min && (this.min = d);
            d > this.max && (this.max = d)
        },
        extendTo: function(d) {
            d < this.min && (this.min =
                d);
            d > this.max && (this.max = d)
        },
        contains: function(d) {
            return this.min <= d && d <= this.max
        },
        expand: function(d) {
            this.min -= d;
            this.max += d
        }
    };
    var l = 1E-10
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.vector || (k.vector = {});
    g.catmullRomSplineUniform = function(f) {
        Array.isArray(f) && (f = {
            path: f,
            getResult: !0
        });
        var g = f.ctx || void 0,
            l = f.getResult || !g;
        f = f.path || [];
        var d = [];
        f[0] && (l && d.push({
            cmd: "M",
            x: f[0].x,
            y: f[0].y
        }), g && g.moveTo(f[0].x, f[0].y));
        var e = f.length;
        if (2 >= e) return f;
        for (var c = 0; c < e - 1; c++) {
            var h = 0 === c ? f[0] : f[c - 1],
                b = f[c],
                a = f[c + 1],
                w = c + 2 < e ? f[c + 2] : a,
                u = b.x + (1 * a.x - 1 * h.x) / 6,
                h = b.y + (1 * a.y - 1 * h.y) / 6,
                x = a.x + (1 * b.x - 1 * w.x) / 6,
                b = a.y + (1 * b.y - 1 * w.y) / 6,
                w = a.x,
                a = a.y;
            l && d.push({
                cmd: "C",
                x1: u,
                y1: h,
                x2: x,
                y2: b,
                x: w,
                y: a
            });
            g && g.bezierCurveTo(u, h, x, b, w, a)
        }
        return d
    };
    g.catmullRomSpline = function(f) {
        Array.isArray(f) && (f = {
            path: f,
            getResult: !0
        });
        if (0 === f.amount) return g.catmullRomSplineUniform(f);
        var k = f.amount || 1,
            l = f.ctx || void 0,
            d = f.getResult || !l;
        f = f.path || [];
        var e = [];
        f[0] && (d && e.push({
            cmd: "M",
            x: f[0].x,
            y: f[0].y
        }), l && l.moveTo(f[0].x, f[0].y));
        var c = f.length;
        if (2 >= c) return f;
        for (var h = 0; h < c - 1; h++) {
            var b = 0 === h ? f[0] : f[h - 1],
                a = f[h],
                w = f[h + 1],
                u = h + 2 < c ? f[h + 2] : w;
            if ("C" === a.cmd) var x = a.x1,
                b = a.y1,
                p = a.x2,
                u = a.y2,
                m = a.x,
                v = a.y;
            else {
                var p = Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2)),
                    m = Math.sqrt(Math.pow(a.x - w.x, 2) + Math.pow(a.y - w.y, 2)),
                    v = Math.sqrt(Math.pow(w.x - u.x, 2) + Math.pow(w.y - u.y, 2)),
                    x = Math.pow(p, k),
                    p = Math.pow(p, 2 * k),
                    r = Math.pow(m, k),
                    m = Math.pow(m, 2 * k),
                    y = Math.pow(v, k),
                    v = Math.pow(v, 2 * k),
                    t = 2 * p + 3 * x * r + m,
                    E = 2 * v + 3 * y * r + m,
                    z = 3 * x * (x + r);
                0 < z && (z = 1 / z);
                r = 3 * y * (y + r);
                0 < r && (r = 1 / r);
                x = (-m * b.x + t * a.x + p * w.x) * z;
                b = (-m * b.y + t * a.y + p * w.y) * z;
                p = (v * a.x + E * w.x - m * u.x) * r;
                u = (v * a.y + E * w.y - m * u.y) * r;
                m = w.x;
                v = w.y;
                0 === x && 0 === b && (x = a.x, b = a.y);
                0 === p && 0 === u && (p =
                    w.x, u = w.y)
            }
            d && e.push({
                cmd: "C",
                x1: x,
                y1: b,
                x2: p,
                y2: u,
                x: m,
                y: v
            });
            l && l.bezierCurveTo(x, b, p, u, m, v)
        }
        return e
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.util;
    k = k.vector = k.vector || {};
    (k.Degree = function(c) {}).flip = function(c, d, b) {
        return 0 > d && 0 > b ? 180 + c : 0 > d ? 360 - c : 0 > b ? 540 - c : c
    };
    var f = k.Point = function(c, d) {
        var b = {};
        1 === arguments.length ? "object" === typeof c ? c.length ? (b.x = c[0] || 0, b.y = c[1] || 0) : (b.x = c.x || 0, b.y = c.y || 0) : (b.x = c || 0, b.y = c || 0) : (b.x = c || 0, b.y = d || 0);
        return b
    };
    f.equals = function(c, d) {
        return c.x === d.x && c.y === d.y
    };
    f.exists = function(c) {
        return c && isFinite(c.x + c.y)
    };
    f.add = function(c, d) {
        "object" === typeof d ? (c.x += d.x, c.y += d.y) : (c.x += d, c.y +=
            d);
        return c
    };
    f.sub = function(c, d) {
        "object" === typeof d ? (c.x -= d.x, c.y -= d.y) : (c.x -= d, c.y -= d);
        return c
    };
    f.multiply = function(c, d) {
        "object" === typeof d ? (c.x *= d.x, c.y *= d.y) : (c.x *= d, c.y *= d);
        return c
    };
    f.dot = function(c, d) {
        return c.x * d.x + c.y * d.y
    };
    f.distance = function(c, d) {
        var b = c.x - d.x,
            a = c.y - d.y;
        return Math.sqrt(b * b + a * a)
    };
    f.angle = function(c, d, b) {
        c = Math.atan2(d.y - c.y, d.x - c.x);
        return b ? c * g.RAD_DEG : c
    };
    f.rotate = function(c, d) {
        return f.rotateAt(c, {
            x: 0,
            y: 0
        }, d)
    };
    f.rotateAt = function(c, d, b) {
        var a = c.x - d.x,
            e = c.y - d.y,
            f = Math.cos(b);
        b = Math.sin(b);
        c.x = f * a - b * e + d.x;
        c.y = b * a + f * e + d.y;
        return c
    };
    f.atRadianDistance = function(c, d, b) {
        return {
            x: Math.cos(d) * b + c.x,
            y: Math.sin(d) * b + c.y
        }
    };
    f.atRadianToTime = function(c, d, b, a, e, f) {
        var g = c - b,
            p = d - a;
        e *= Math.sqrt(g * g + p * p);
        c = Math.atan2(a - d, b - c);
        f && (c += f);
        return {
            x: Math.cos(c) * e,
            y: Math.sin(c) * e
        }
    };
    f.atTimeToRadius = function(c, d, b, a) {
        var e = d.x - c.x,
            f = d.y - c.y;
        d = c.x + e * b;
        c = c.y + f * b;
        e = Math.atan2(f, e) - 1.57079632;
        return {
            x: d + Math.cos(e) * a,
            y: c + Math.sin(e) * a
        }
    };
    f.atTimeOnLine = function(c, d, b) {
        return {
            x: c.x + (d.x - c.x) * b,
            y: c.y +
                (d.y - c.y) * b
        }
    };
    f.atTimeOnQuadratic = function(c, d, b, a) {
        var e = 1 - a,
            f = e * e,
            e = 2 * e * a;
        a *= a;
        return {
            x: f * c.x + e * d.x + a * b.x,
            y: f * c.y + e * d.y + a * b.y
        }
    };
    f.nearestOnLine = function(c, d, b, a) {
        var e = b.x - d.x;
        b = b.y - d.y;
        var f = e * e + b * b;
        c = (c.x - d.x) * e + (c.y - d.y) * b;
        var g = c / f;
        a && (g = Math.max(0, Math.min(1, c / f)));
        return {
            time: g,
            x: d.x + e * g,
            y: d.y + b * g
        }
    };
    f.reflect = function(c, d, b) {
        var a = b.x - d.x,
            e = b.y - d.y,
            f = a * a + e * e;
        b = (a * a - e * e) / f;
        a = 2 * a * e / f;
        return {
            x: b * (c.x - d.x) + a * (c.y - d.y) + d.x,
            y: a * (c.x - d.x) - b * (c.y - d.y) + d.y
        }
    };
    f.toLineDistance = function(c, d, b) {
        var a =
            b.x - d.x,
            e = b.y - d.y,
            f = a * a + e * e;
        if (0 === f) var g = d.x,
            p = d.y;
        else g = (c.x - d.x) * a, p = (c.y - d.y) * e, f = (g + p) / f, 0 > f ? (g = d.x, p = d.y) : 1 < f ? (g = b.x, p = b.y) : (g = d.x + f * a, p = d.y + f * e);
        a = c.x - g;
        e = c.y - p;
        return Math.sqrt(a * a + e * e)
    };
    f.lineToLineIntersectionSweep = function(c, d, b, a) {
        return (a.y - c.y) * (b.x - c.x) > (b.y - c.y) * (a.x - c.x) !== (a.y - d.y) * (b.x - d.x) > (b.y - d.y) * (a.x - d.x) && (b.y - c.y) * (d.x - c.x) > (d.y - c.y) * (b.x - c.x) !== (a.y - c.y) * (d.x - c.x) > (d.y - c.y) * (a.x - c.x)
    };
    f.lineToLineIntersection = function(c, d, b, a) {
        var e = d.y - c.y;
        d = d.x - c.x;
        var f = a.x - b.x,
            g = a.y -
            b.y;
        a = d * g - e * f;
        if (!a) return !1;
        var p = c.x - b.x;
        b = c.y - b.y;
        f = (f * b - g * p) / a;
        if (0 > f || 1 < f) return !1;
        b = (d * b - e * p) / a;
        return 0 > b || 1 < b ? !1 : {
            x: c.x + f * d,
            y: c.y + f * e
        }
    };
    f.inBBox = function(c, d) {
        return c.x > d.x1 && c.y > d.y1 && c.x < d.x2 && c.y < d.y2
    };
    f.inRect = function(c, d, b, a) {
        var e = b.x - d.x,
            f = b.y - d.y,
            g = a.x - b.x;
        a = a.y - b.y;
        d = e * (c.x - d.x) + f * (c.y - d.y);
        c = g * (c.x - b.x) + a * (c.y - b.y);
        return 0 < d && d < e * e + f * f && 0 < c && c < g * g + a * a
    };
    f.inPolygon = function(c, d, b) {
        for (var a = !1, e = c.length, f = 0, g = e - 1; f < e; g = f++) {
            var p = c[f],
                g = c[g];
            (p.y <= b && b < g.y || g.y <= b && b < p.y) && d <
                (g.x - p.x) * (b - p.y) / (g.y - p.y) + p.x && (a = !a)
        }
        return a
    };
    f.inPolygonChain = function(c, d, b) {
        for (var a = 0, e = 0, g = c.length; e < g; e++) f.inPolygon(c[e], d, b) && a++;
        return 1 === (a & 1)
    };
    var q = k.Polygon = function(c) {};
    q.clone = function(c) {
        for (var d = [], b = 0, a = c.length; b < a; b++) {
            var e = c[b];
            d.push({
                cmd: e.cmd || (0 === b ? "M" : "L"),
                x: e.x,
                y: e.y
            })
        }
        return d
    };
    q.distance = function(c) {
        for (var d = 0, b = 0, a = c.length; b < a; b++) d += f.distance(c[b], c[(b + 1) % a]);
        return d
    };
    q.isClockwise = function(c) {
        for (var d = 0, b = 0, a = c.length; b < a; b++) var e = c[b],
            f = c[(b + 1) %
                a],
            d = d + (f.x - e.x) * (f.y + e.y);
        return 0 >= d
    };
    q.collision = function(c, d) {
        for (var b = c.length, a = 0; a < b; a++) {
            var e = c[a];
            if (f.inPolygon(d, e.x, e.y)) return !0
        }
        b = d.length;
        for (a = 0; a < b; a++)
            if (e = d[a], f.inPolygon(c, e.x, e.y)) return !0;
        return q.intersects(c, d)
    };
    q.intersects = function(c, d) {
        for (var b = c.length, a = d.length, e = 0; e < b; e++)
            for (var g = c[e], l = c[(e + 1) % b], p = 0; p < a; p++)
                if (f.lineToLineIntersection(g, l, d[p], d[(p + 1) % a])) return !0;
        return !1
    };
    q.SAT = function() {
        var c = function(c, b, a) {
            for (var d = 0, e = c.length; d < e; d++) {
                var f = c[d],
                    p = c[(d +
                        1) % e],
                    m = f.x - p.x,
                    f = f.y - p.y;
                a ? m = -m : f = -f;
                a: {
                    for (var g = 0, r = b.length; g < r; g++) {
                        var y = b[g];
                        if (0 > f * (y.x - p.x) + m * (y.y - p.y)) {
                            p = !1;
                            break a
                        }
                    }
                    p = !0
                }
                if (p) return !1
            }
            return !0
        };
        return function(d, b) {
            return c(d, b) && c(b, d) ? !0 : !1
        }
    }();
    q.arcSpline = function(c, d, b) {
        for (var a = d.length - 1, e = 0; e < a; e++) {
            var u = d[(e + 0) % a],
                k = d[(e + 1) % a],
                p = d[(e + 2) % a],
                m = f.atTimeOnLine(u, k, .5),
                v = f.atTimeOnLine(k, p, .5),
                r = f.atRadianDistance(m, f.angle(u, k) + 90 * g.DEG_RAD, 1E4),
                y = f.atRadianDistance(v, f.angle(k, p) + 90 * g.DEG_RAD, 1E4),
                u = f.distance(u, k) / 2,
                u = f.distance(m,
                    v) / 2;
            if (r = f.lineToLineIntersection(m, r, v, y)) c.fillStyle = "#f00", c.fillRect(r.x - 10, r.y - 10, 20, 20);
            0 === e && c.moveTo(m.x, m.y);
            l(c, k, "#f0f");
            l(c, m, "#fff");
            l(c, v, "#ff0");
            c.arcTo(k.x, k.y, p.x, p.y, b > u ? u : b)
        }
        c.closePath()
    };
    var l = function(c, d, b) {
        c.fillStyle = b;
        c.fillRect(d.x - 5, d.y - 5, 10, 10)
    };
    k.Arc = function(c, d, b, a, e) {
        c = f(c, d);
        c.cp1 = f(b, a);
        c.radius = e;
        return c
    };
    var d = k.Quadratic = function(c, d, b, a) {
        c = f(c, d);
        c.cp1 = f(b, a);
        return c
    };
    d.fromArray = function(c) {
        return {
            x1: c[0],
            y1: c[1],
            x: c[2],
            y: c[3]
        }
    };
    d.distance = function(c, d,
        b, a, e, f) {
        e = c - 2 * b + e;
        f = d - 2 * a + f;
        c = 2 * b - 2 * c;
        a = 2 * a - 2 * d;
        d = 4 * (e * e + f * f);
        e = 4 * (e * c + f * a);
        a = c * c + a * a;
        f = 2 * Math.sqrt(d + e + a);
        c = Math.sqrt(d);
        b = 2 * d * c;
        var g = 2 * Math.sqrt(a),
            p = e / c;
        return (b * f + c * e * (f - g) + (4 * a * d - e * e) * Math.log((2 * c + p + f) / (p + g))) / (4 * b)
    };
    var e = k.Cubic = function(c, d, b, a, e, g) {
        c = f(c, d);
        c.cp1 = f(b, a);
        c.cp2 = f(e, g);
        return c
    };
    e.fromArray = function(c) {
        return {
            cmd: "C",
            x1: c[0],
            y1: c[1],
            x2: c[2],
            y2: c[3],
            x: c[4],
            y: c[5]
        }
    };
    e.fromLineSegment = function(c, d, b) {
        var a = f.atTimeOnLine(c, d, 1 / 3);
        c = f.atTimeOnLine(c, d, 2 / 3);
        b = b || f(d);
        b.cmd = "C";
        b.x1 = a.x;
        b.y1 = a.y;
        b.x2 = c.x;
        b.y2 = c.y;
        return b
    };
    e.pointAtTime = function(c, d, b, a, e, f, g, p, m) {
        var v = 1 - m,
            r = v * v * v,
            y = 3 * m * v * v,
            v = 3 * m * m * v;
        m *= m * m;
        return {
            x: r * c + y * b + v * e + m * g,
            y: r * d + y * a + v * f + m * p
        }
    };
    e.split = function(c, d, b, a, e, f, g, p, m) {
        var v = c + (b - c) * m,
            r = d + (a - d) * m,
            y = b + (e - b) * m,
            t = a + (f - a) * m;
        e += (g - e) * m;
        f += (p - f) * m;
        a = v + (y - v) * m;
        b = r + (t - r) * m;
        var y = y + (e - y) * m,
            t = t + (f - t) * m,
            l = a + (y - a) * m;
        m = b + (t - b) * m;
        return [
            [c, d, v, r, a, b, l, m],
            [l, m, y, t, e, f, g, p]
        ]
    };
    e.splitSegment = function() {
        return function(c, d, b) {
            b = 0 + (b - d) / (1 - d) * 1;
            d = e.split(c[0].x, c[0].y, c[1].x,
                c[1].y, c[2].x, c[2].y, c[3].x, c[3].y, d);
            c = d[0];
            d = d[1];
            b = e.split(d[0], d[1], d[2], d[3], d[4], d[5], d[6], d[7], b);
            d = b[0];
            return [c, d, b[1]]
        }
    }();
    e.isFlat = function(c, d) {
        return e.flatness1(c) <= (d || 1)
    };
    e.flatness1 = function(c) {
        var d = f.toLineDistance(c[1], c[0], c[3]);
        c = f.toLineDistance(c[2], c[0], c[3]);
        return d > c ? d : c
    };
    e.nearestTimeOnCurve = function() {
        var c = function(d, b, a, g, u) {
            if (1E-5 > u) return a;
            var l = a - u,
                p = a + u,
                m = e.pointAtTime(b[0].x, b[0].y, b[1].x, b[1].y, b[2].x, b[2].y, b[3].x, b[3].y, l),
                v = e.pointAtTime(b[0].x, b[0].y, b[1].x,
                    b[1].y, b[2].x, b[2].y, b[3].x, b[3].y, p),
                m = f.distance(d, m),
                v = f.distance(d, v);
            return 0 <= l && m < g ? c(d, b, l, m, u) : 1 >= p && v < g ? c(d, b, p, v, u) : c(d, b, a, g, u / 2)
        };
        return function(d, b) {
            for (var a = 0, l = g.INFINITY, u = 0; 10 > u; u++) {
                var k = e.pointAtTime(b[0].x, b[0].y, b[1].x, b[1].y, b[2].x, b[2].y, b[3].x, b[3].y, u / 10),
                    k = f.distance(d, k);
                k < l && (l = k, a = u / 10)
            }
            return c(d, b, a, l, 1 / 10.1)
        }
    }();
    e.nearestPointOnCurve = function(c, d) {
        var b = e.nearestTimeOnCurve(c, d),
            a = e.pointAtTime(d[0].x, d[0].y, d[1].x, d[1].y, d[2].x, d[2].y, d[3].x, d[3].y, b),
            g = f.distance(c,
                a);
        return {
            point: a,
            distance: g,
            time: b
        }
    };
    e.toPolyline = function() {
        var c, d = function(b, a, g) {
            e.isFlat(b, a || .33) || 10 < ++g ? c.push(f(b[3])) : (b = e.split(b[0].x, b[0].y, b[1].x, b[1].y, b[2].x, b[2].y, b[3].x, b[3].y, .5), d(e.fromArray2(b[0]), a, g), d(e.fromArray2(b[1]), a, g))
        };
        return function(b, a) {
            c = [];
            c.push(f(b[0]));
            d(b, a, 0);
            return c
        }
    }();
    e.fromArray2 = function(c) {
        return [{
            x: c[0],
            y: c[1]
        }, {
            x: c[2],
            y: c[3]
        }, {
            x: c[4],
            y: c[5]
        }, {
            x: c[6],
            y: c[7]
        }]
    };
    (function() {
        var c = [-.06405689286260563, .06405689286260563, -.1911188674736163, .1911188674736163, -.3150426796961634, .3150426796961634, -.4337935076260451, .4337935076260451, -.5454214713888396, .5454214713888396, -.6480936519369755, .6480936519369755, -.7401241915785544, .7401241915785544, -.820001985973903, .820001985973903, -.8864155270044011, .8864155270044011, -.9382745520027328, .9382745520027328, -.9747285559713095, .9747285559713095, -.9951872199970213, .9951872199970213],
            d = [.12793819534675216, .12793819534675216, .1258374563468283, .1258374563468283, .12167047292780339, .12167047292780339, .1155056680537256,
                .1155056680537256, .10744427011596563, .10744427011596563, .09761865210411388, .09761865210411388, .08619016153195327, .08619016153195327, .0733464814110803, .0733464814110803, .05929858491543678, .05929858491543678, .04427743881741981, .04427743881741981, .028531388628933663, .028531388628933663, .0123412297999872, .0123412297999872
            ];
        e.distance = function(b) {
            var a, e, f = 0,
                g = c.length,
                p = [];
            for (e = 0; 3 > e; e++) p.push({
                x: 3 * (b[e + 1].x - b[e].x),
                y: 3 * (b[e + 1].y - b[e].y)
            });
            for (b = 0; b < g; b++) {
                a = .5 * c[b] + .5;
                var m = 1 - a;
                e = p;
                var v = m * m,
                    m = m * a *
                    2,
                    r = a * a;
                a = v * e[0].x + m * e[1].x + r * e[2].x;
                e = v * e[0].y + m * e[1].y + r * e[2].y;
                f += d[b] * Math.sqrt(a * a + e * e)
            }
            return .5 * f
        }
    })()
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.vector = k.vector || {},
        f = k.vector.Cubic;
    g.Path = function(g) {
        this.ctx = g;
        this.start = {
            x: 0,
            y: 0
        };
        this.current = {
            x: 0,
            y: 0
        };
        this.data = [];
        this.dashIdx = 0;
        this.dashArray = [4, 4];
        this.dashCurve = !1;
        this.dashRemainder = this.dashOffset = 0;
        this.dashStyle = ["#f00", "#00f"];
        this.dashStyleIdx = 0;
        this.dashAdaptive = !1;
        this.distance = 0;
        this.reset = function() {
            this.dashRemainder = this.dashIdx = 0
        };
        this.resetPath = function() {
            this.distance = 0;
            this.data = [];
            this.reset()
        };
        this.moveTo = function(f, d) {
            var e = this.ctx,
                c = this.getData;
            e && e.moveTo(f, d);
            c && this.data.push({
                cmd: "M",
                x: f,
                y: d
            });
            this.start.x = f;
            this.start.y = d;
            this.current.x = f;
            this.current.y = d
        };
        this.lineTo = function(f, d) {
            for (var e = this.ctx, c = this.getData || !1, h = this.current || {
                    x: 0,
                    y: 0
                }, b = this.dashArray, a = b.length, g = this.dashIdx, u = h.x, k = h.y, p = f - h.x, m = d - h.y, v = Math.abs(p) > Math.abs(m), r = v ? m / p : p / m, y = Math.sqrt(p * p + m * m), t, q = y; .1 < q;) {
                this.dashRemainder ? (t = this.dashRemainder || .01, this.dashRemainder = 0) : t = b[++g % a] || .01;
                if (0 > (q -= t)) {
                    e && (0 === g % 2 ? e.lineTo(f, d) : e.moveTo(f, d));
                    break
                }
                t = Math.sqrt(t *
                    t / (1 + r * r));
                v ? (0 > p && (t = -t), h.x += t, h.y += r * t) : (0 > m && (t = -t), h.x += r * t, h.y += t);
                e && g % 2 && e && (e.moveTo(u, k), e.lineTo(h.x, h.y));
                c && (0 === this.data.length && this.data.push({
                    cmd: "M",
                    x: u,
                    y: k
                }), this.data.push({
                    cmd: "L",
                    x: h.x,
                    y: h.y
                }));
                u = h.x;
                k = h.y
            }
            this.dashIdx = g;
            this.dashRemainder = Math.abs(q);
            this.distance += y;
            this.current.x = f;
            this.current.y = d;
            if (c) return this.data
        };
        this.quadraticCurveTo = function(f, d, e, c) {
            var h = this.current;
            f = h.x + 2 / 3 * (f - h.x);
            d = h.y + 2 / 3 * (d - h.y);
            this.bezierCurveTo(f, d, f + (e - h.x) / 3, d + (c - h.y) / 3, e, c)
        };
        this.bezierCurveTo =
            function(g, d, e, c, h, b) {
                var a = this.ctx,
                    k = this.getData || !1,
                    u = this.current || {
                        x: 0,
                        y: 0
                    },
                    q = this.dashCurve || !1,
                    p = this.dashArray,
                    m = p.length,
                    v = this.dashIdx,
                    r = !0;
                g = [u.x, u.y, g, d, e, c, h, b];
                d = u.x;
                e = u.y;
                c = u.x;
                var y, t, u = u.y,
                    E, z = 0,
                    C, A, I, B, D, F = 0;
                if (r = this.dashAdaptive) {
                    B = f.fromArray2(g);
                    r = f.toPolyline(B, r);
                    B = f.distance(B);
                    t = r[r.length - 1];
                    for (E = 0; E < r.length; E++) r[E].cmd = "L", this.data.push(r[E]);
                    this.distance += B;
                    this.current.x = t.x;
                    this.current.y = t.y;
                    if (k) return this.data
                }
                for (; 1 > z;) {
                    this.dashRemainder ? (r = !1, D = this.dashRemainder ||
                        .01, this.dashRemainder = 0) : (r = !0, D = p[++v % m] || .01);
                    B = z = 0;
                    y = c;
                    for (E = u; 1 > z; z += .001) {
                        t = d - y;
                        E = e - E;
                        B += Math.sqrt(t * t + E * E);
                        if (B >= D) break;
                        E = 1 - z;
                        t = E * E * E;
                        C = 3 * z * E * E;
                        A = 3 * z * z * E;
                        I = z * z * z;
                        y = d;
                        E = e;
                        d = t * g[0] + C * g[2] + A * g[4] + I * h;
                        e = t * g[1] + C * g[3] + A * g[5] + I * b
                    }
                    F += B;
                    E = f.split(g[0], g[1], g[2], g[3], g[4], g[5], g[6], g[7], z);
                    g = E[1];
                    E = E[0];
                    r && (a && a.moveTo(c, u), k && 0 === this.data.length && this.data.push({
                        cmd: "M",
                        distance: 0,
                        x: c,
                        y: u
                    }));
                    a && v % 2 && (a.moveTo(c, u), q ? a.bezierCurveTo(E[2], E[3], E[4], E[5], E[6], E[7]) : a.lineTo(E[6], E[7]));
                    k && (q ? this.data.push({
                        cmd: "C",
                        distance: F,
                        x1: E[2],
                        y1: E[3],
                        x2: E[4],
                        y2: E[5],
                        x: E[6],
                        y: E[7]
                    }) : this.data.push({
                        cmd: "L",
                        distance: F,
                        x: E[6],
                        y: E[7]
                    }));
                    c = d;
                    u = e
                }
                this.dashIdx = v;
                this.dashRemainder = D - B;
                this.distance += F;
                this.current.x = d;
                this.current.y = e;
                if (k) return this.data
            };
        this.closePath = function() {
            var f = this.getData || !1,
                d = this.start;
            this.lineTo(d.x, d.y);
            f && this.data.push({
                x: d.x,
                y: d.y,
                cmd: "Z"
            });
            this.reset()
        }
    }
})(sketch);
(function(k) {
    var g = (k.vector = k.vector || {}).Point,
        f = k.vector.mcMasterSmooth = function(f, d) {
            d = d || 3;
            0 === d % 2 && d++;
            var e = d / 2 >> 0,
                c = f.length;
            if (c < d) return f;
            for (var h = 0, b = 0, a = 0; a < d; a++) var g = f[a],
                h = h + g.x,
                b = b + g.y;
            for (var a = f.slice(0, e), u = e, k = c - e; u < k; u++) g = f[u], u > e && (h -= f[u - e - 1].x, b -= f[u - e - 1].y, h += f[u + e].x, b += f[u + e].y), "C" === g.cmd ? a.push(g) : a.push({
                cmd: "L",
                x: (g.x + h / d) / 2,
                y: (g.y + b / d) / 2
            });
            return a.concat(f.slice(k, c))
        },
        q = k.vector.langSimplify = function(f, d, e) {
            d = d || 4;
            e = e || 1;
            var c = f.length - 1;
            if (0 >= c) return f;
            var h =
                0,
                b = 0,
                a = Math.min(d, c),
                b = b + a,
                c = c - a,
                k = [];
            for (k.push(f[h]); a;) {
                for (var u = f[h], q = f[b], p = 0, m = h + 1; m != b;) {
                    var v = g.toLineDistance(f[m], u, q),
                        p = Math.max(p, v);
                    if (p > e) break;
                    else m++
                }
                p < e ? (h = b, k.push(f[h]), a = Math.min(d, c), b += a, c -= a) : (b--, c++)
            }
            return k
        };
    k.vector.roundPath = function(f, d) {
        var e = Math.pow(10, d || 0);
        f.forEach(function(c) {
            for (var d in c) {
                var b = c[d];
                isFinite(b) && (c[d] = Math.round(b * e) / e)
            }
        });
        return f
    };
    k.vector.simplify = function(g, d, e) {
        return q(f(g, 3), 6, 1)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.vector = k.vector || {},
        f = g.Shape = g.Shape || {},
        q = Math.PI,
        l = 2 * q;
    f.record = function() {
        var a;
        this.data = [];
        this.save = function() {};
        this.restore = function() {};
        this.translate = function() {};
        this.rotate = function() {};
        this.scale = function() {};
        this.beginPath = function() {
            this.data = []
        };
        this.moveTo = function(b, c) {
            this.data.push(a = {
                cmd: "M",
                x: b,
                y: c
            })
        };
        this.lineTo = function(a, b) {
            this.data.push({
                cmd: "L",
                x: a,
                y: b
            })
        };
        this.bezierCurveTo = function(a, b, c, d, p, e) {
            this.data.push({
                cmd: "C",
                x1: a,
                y1: b,
                x2: c,
                y2: d,
                x: p,
                y: e
            })
        };
        this.quadraticCurveTo = function(a, b, c, d) {
            this.data.push({
                cmd: "Q",
                x1: a,
                y1: b,
                x: c,
                y: d
            })
        };
        this.arcTo = function(a, b, c, d, p) {
            this.data.push({
                cmd: "A",
                x1: a,
                y1: b,
                x2: c,
                y2: d,
                radius: p
            })
        };
        this.closePath = function() {
            this.data.push({
                cmd: "Z",
                x: a.x,
                y: a.y
            })
        };
        this.stringify = function() {
            return g.SVGPath.fromVOBPath(this.data)
        }
    };
    f.debug = function(a) {
        this.vector = function(b, c, d) {
            var e = g.Point.atRadianDistance(b, c, 9999);
            b = g.Point.atRadianDistance(b, c, -9999);
            a.beginPath();
            f.line(a, e.x, e.y, b.x, b.y);
            a.strokeStyle = d || "red";
            a.stroke()
        };
        this.point = function(b, c, d) {
            a.beginPath();
            f.circle(a, b.x, b.y, d || 5);
            a.fillStyle = c || "red";
            a.fill()
        }
    };
    f.VOBNode = function(a, m) {
        switch (m.type) {
            case "image":
                a.drawImage(m.image, m.x, m.y, m.width, m.height);
                break;
            case "line":
                a.moveTo(m.x1, m.y1);
                a.lineTo(m.x2, m.y2);
                break;
            case "polyline":
            case "polygon":
            case "path":
                d(a, m.data);
                break;
            case "ellipse":
                e(a, m.cx, m.cy, m.rx, m.ry);
                break;
            case "circle":
                e(a, m.cx, m.cy, m.r, m.r);
                break;
            case "rect":
                isFinite(m.rx) ? b(a, m.x, m.y, m.width, m.height, m.rx, m.ry) : c(a, m.x, m.y, m.width, m.height)
        }
    };
    var d = f.VOBPath = function(a, b) {
        for (var c = b && b.length, d = 0, e; d < c; d++)
            if (e = b[d]) switch (e.cmd) {
                case "M":
                    a.moveTo(e.x, e.y);
                    break;
                case "L":
                    a.lineTo(e.x, e.y);
                    break;
                case "Q":
                    a.quadraticCurveTo(e.x1, e.y1, e.x, e.y);
                    break;
                case "C":
                    a.bezierCurveTo(e.x1, e.y1, e.x2, e.y2, e.x, e.y);
                    break;
                case "A":
                    a.arcTo(e.x1, e.y1, e.x2, e.y2, e.radius);
                    break;
                case "Z":
                case "z":
                    a.closePath()
            }
    };
    f.VOBPathOffset = function(a, b, c, d) {
        for (var e = b && b.length, h = 0, f; h < e; h++)
            if (f = b[h]) {
                var g = f.x + c,
                    u = f.y + d;
                switch (f.cmd) {
                    case "M":
                        a.moveTo(g, u);
                        (!(f = b[h +
                            1]) || "L" !== f.cmd && "C" !== f.cmd) && a.lineTo(g + .01, u + .01);
                        break;
                    case "L":
                        a.lineTo(g, u);
                        break;
                    case "C":
                        a.bezierCurveTo(f.x1 + c, f.y1 + d, f.x2 + c, f.y2 + d, g, u);
                        break;
                    case "Z":
                        a.lineTo(g, u), a.closePath()
                }
            }
    };
    f.VOBPathDebug = function(a, b) {
        for (var c = "", d = b.length, e = 0, h; e < d; e++)
            if (h = b[i]) switch (h.cmd) {
                case "M":
                    c += "ctx.moveTo(" + h.x + "," + h.y + ");";
                    break;
                case "L":
                    c += "ctx.lineTo(" + h.x + "," + h.y + ");";
                    break;
                case "Q":
                    c += "ctx.quadraticCurveTo(" + h.x1 + "," + h.y1 + "," + h.x + "," + h.y + ");";
                    break;
                case "C":
                    c += "ctx.bezierCurveTo(" + h.x1 + "," +
                        h.y1 + "," + h.x2 + "," + h.y2 + "," + h.x + "," + h.y + ");";
                    break;
                case "A":
                    c += "ctx.arcTo(" + h.x1 + "," + h.y1 + "," + h.x2 + "," + h.y2 + "," + h.radius + ");";
                    break;
                case "Z":
                case "z":
                    c += "ctx.closePath();"
            }
            console.log(c);
        return c
    };
    f.line = function(a, b, c, d, e) {
        a.moveTo(b, c);
        a.lineTo(d, e)
    };
    f.circle = function(a, b, c, d, h) {
        return e(a, b, c, d, d, h)
    };
    var e = f.ellipse = function(a, b, c, d, e, h) {
        var f = .5522847498307936 * d,
            g = .5522847498307936 * e,
            u = b - d,
            l = c - e;
        d = b + d;
        e = c + e;
        a.moveTo(b, l);
        h ? (a.bezierCurveTo(b - f, l, u, c - g, u, c), a.bezierCurveTo(u, c + g, b - f, e, b, e), a.bezierCurveTo(b +
            f, e, d, c + g, d, c), a.bezierCurveTo(d, c - g, b + f, l, b, l)) : (a.bezierCurveTo(b + f, l, d, c - g, d, c), a.bezierCurveTo(d, c + g, b + f, e, b, e), a.bezierCurveTo(b - f, e, u, c + g, u, c), a.bezierCurveTo(u, c - g, b - f, l, b, l));
        a.closePath()
    };
    f.SVGPath = function(a, b) {
        return d(a, g.SVG.toVOBPath(b))
    };
    f.cross = function(a, b, c, d, e) {
        a.moveTo(b, c - e / 2);
        a.lineTo(b, c + e / 2);
        a.moveTo(b - d / 2, c);
        a.lineTo(b + d / 2, c)
    };
    f.exmark = function(a, b, c, d) {
        a.moveTo(b + d, c - d);
        a.lineTo(b - d, c + d);
        a.moveTo(b + d, c + d);
        a.lineTo(b - d, c - d)
    };
    f.square = function(a, b, c, d, e) {
        h(a, b - d, c - d, b + d, c +
            d, e)
    };
    var c = f.rect = function(a, b, c, d, e, f) {
            h(a, b, c, b + d, c + e, f)
        },
        h = f.rectangle = function(a, b, c, d, e, h) {
            a.moveTo(b, c);
            h ? (a.lineTo(b, e), a.lineTo(d, e), a.lineTo(d, c)) : (a.lineTo(d, c), a.lineTo(d, e), a.lineTo(b, e));
            a.closePath()
        };
    f.roundRectangle = function(a, c, d, e, h, f, g, u) {
        b(a, c, d, e - c, h - d, f, g, u)
    };
    var b = f.roundRect = function(a, b, c, d, e, h, f, g) {
        0 > d && (b -= d = Math.abs(d));
        0 > e && (c -= e = Math.abs(e));
        var u, l, k, x, w, F;
        "number" === typeof h ? (isFinite(f) || (f = h), u = d / 2, l = e / 2, h > u && (h = u), f > l && (f = l), u = l = k = x = h, f = w = F = h = f) : (Array.isArray(h) ?
            4 === h.length && (h = [h[0], h[0], h[1], h[1], h[2], h[2], h[3], h[3]]) : h = [10, 10, 10, 10, 10, 10, 10, 10], u = h[0], l = h[2], k = h[4], x = h[6], f = h[1], w = h[3], F = h[5], h = h[7]);
        var G = q / 4,
            H = G / 2,
            J = Math.cos(H),
            O = -q / 2,
            K = O + 1 * G,
            L = O + 2 * G,
            M = O + 3 * G,
            Q = O + 4 * G,
            R = O + 5 * G,
            U = O + 6 * G,
            V = O + 7 * G;
        a.moveTo(b + u, c);
        g ? (G *= -1, H *= -1, a.quadraticCurveTo(b + u + Math.cos(O + H) * u / J, c + f + Math.sin(O + H) * f / J, b + u + Math.cos(O + G) * u, c + f + Math.sin(O + G) * f), a.quadraticCurveTo(b + u + Math.cos(V + H) * u / J, c + f + Math.sin(V + H) * f / J, b + u + Math.cos(V + G) * u, c + f + Math.sin(V + G) * f), a.lineTo(b, c + e - f), a.quadraticCurveTo(b +
            x + Math.cos(U + H) * x / J, c + e - h + Math.sin(U + H) * h / J, b + x + Math.cos(U + G) * x, c + e - h + Math.sin(U + G) * h), a.quadraticCurveTo(b + x + Math.cos(R + H) * x / J, c + e - h + Math.sin(R + H) * h / J, b + x + Math.cos(R + G) * x, c + e - h + Math.sin(R + G) * h), a.lineTo(b + d - x, c + e), a.quadraticCurveTo(b + d - k + Math.cos(Q + H) * k / J, c + e - F + Math.sin(Q + H) * F / J, b + d - k + Math.cos(Q + G) * k, c + e - F + Math.sin(Q + G) * F), a.quadraticCurveTo(b + d - k + Math.cos(M + H) * k / J, c + e - F + Math.sin(M + H) * F / J, b + d - k + Math.cos(M + G) * k, c + e - F + Math.sin(M + G) * F), a.lineTo(b + d, c + F), a.quadraticCurveTo(b + d - l + Math.cos(L + H) * l / J, c +
            w + Math.sin(L + H) * w / J, b + d - l + Math.cos(L + G) * l, c + w + Math.sin(L + G) * w), a.quadraticCurveTo(b + d - l + Math.cos(K + H) * l / J, c + w + Math.sin(K + H) * w / J, b + d - l + Math.cos(K + G) * l, c + w + Math.sin(K + G) * w), a.lineTo(b + l, c)) : (a.lineTo(b + d - l, c), a.quadraticCurveTo(b + d - l + Math.cos(O + H) * l / J, c + w + Math.sin(O + H) * w / J, b + d - l + Math.cos(O + G) * l, c + w + Math.sin(O + G) * w), a.quadraticCurveTo(b + d - l + Math.cos(K + H) * l / J, c + w + Math.sin(K + H) * w / J, b + d - l + Math.cos(K + G) * l, c + w + Math.sin(K + G) * w), a.lineTo(b + d, c + e - F), a.quadraticCurveTo(b + d - k + Math.cos(L + H) * k / J, c + e - F + Math.sin(L +
            H) * F / J, b + d - k + Math.cos(L + G) * k, c + e - F + Math.sin(L + G) * F), a.quadraticCurveTo(b + d - k + Math.cos(M + H) * k / J, c + e - F + Math.sin(M + H) * F / J, b + d - k + Math.cos(M + G) * k, c + e - F + Math.sin(M + G) * F), a.lineTo(b + x, c + e), a.quadraticCurveTo(b + x + Math.cos(Q + H) * x / J, c + e - h + Math.sin(Q + H) * h / J, b + x + Math.cos(Q + G) * x, c + e - h + Math.sin(Q + G) * h), a.quadraticCurveTo(b + x + Math.cos(R + H) * x / J, c + e - h + Math.sin(R + H) * h / J, b + x + Math.cos(R + G) * x, c + e - h + Math.sin(R + G) * h), a.lineTo(b, c + f), a.quadraticCurveTo(b + u + Math.cos(U + H) * u / J, c + f + Math.sin(U + H) * f / J, b + u + Math.cos(U + G) * u, c + f +
            Math.sin(U + G) * f), a.quadraticCurveTo(b + u + Math.cos(V + H) * u / J, c + f + Math.sin(V + H) * f / J, b + u + Math.cos(V + G) * u, c + f + Math.sin(V + G) * f));
        a.closePath()
    };
    f.roundRect2 = function(a, b, c, d, e, h, f) {
        d < 2 * h && (h = d / 2);
        e < 2 * h && (h = e / 2);
        f ? (a.moveTo(b + d - h, c), a.arcTo(b, c, b, c + h, h), a.arcTo(b, c + e, b + h, c + e, h), a.arcTo(b + d, c + e, b + d, c + e - h, h), a.arcTo(b + d, c, b + d - h, c, h)) : (a.moveTo(b + h, c), a.arcTo(b + d, c, b + d, c + e, h), a.arcTo(b + d, c + e, b, c + e, h), a.arcTo(b, c + e, b, c, h), a.arcTo(b, c, b + d, c, h));
        a.closePath()
    };
    f.ring = function(b, c, d, h, e, f, g, u) {
        var l = -q / 2;
        f += l;
        g +=
            l;
        b.arc ? (b.arc(c, d, e, f, g, u), l = g, a(f, l) && (e = c + h * Math.cos(l), l = d + h * Math.sin(l), b.moveTo(e, l)), b.arc(c, d, h, g, f, !u)) : (w(b, e, e, e, f, g, u), l = g, a(f, l) && (c += h * Math.cos(l), d += h * Math.sin(l), b.moveTo(c, d)), w(b, e, e, h, g, f, !u));
        b.closePath()
    };
    f.pie = function(b, c, d, h, e, f, g) {
        var u = -q / 2;
        e += u;
        f += u;
        !1 === a(e, f) && b.moveTo(c, d);
        b.arc ? b.arc(c, d, h, e, f, g) : w(b, c, d, h, e, f, g);
        b.closePath()
    };
    var a = function(a, b) {
            var c = Math.abs((a + l) % l),
                d = Math.abs((b + l) % l);
            return c === d
        },
        w = function(a, b, c, e, h, f, u) {
            if (u) var l = Math.max(h, f),
                k = Math.min(h,
                    f) - 1E-10;
            else l = Math.min(h, f) - 1E-10, k = Math.max(h, f);
            var x = (l - k) / q / 2;
            1 < Math.abs(x) && (b -= 2 * e);
            h = b + e * Math.cos(l);
            l = c + e * Math.sin(l);
            f = b + e * Math.cos(k);
            k = c + e * Math.sin(k);
            x = .5 <= Math.abs(x) ? 1 : 0;
            u = u ? 0 : 1;
            a.moveTo(b, c);
            a.lineTo(h, l);
            d(a, g.SVGPath.arcToBezier(h, l, e, e, 0, x, u, f, k));
            a.closePath()
        };
    f.triangle = function(a, b, c, d, e) {
        u(a, b, c, d, 3, e)
    };
    var u = f.regularPolygon = function(a, b, c, d, e, h) {
        for (var f = Math.PI, g = l / e, u = 0; u < e; u++) {
            var k = g * (h ? e - u : u) + f,
                x = Math.sin(k) * d + b,
                k = -Math.cos(k) * d + c;
            0 === u ? a.moveTo(x, k) : a.lineTo(x, k)
        }
        a.closePath()
    };
    f.gear = function(a, b, c, d, e, h, f) {
        h = 1 - h;
        1 > h && (d *= h);
        var g = l / e,
            u = g / 4 * (f ? -1 : 1);
        h = d / h;
        var k = (g - q) / 2 + g / 8;
        f && (k += u);
        for (var x = 0; x < e; x++) {
            var w = g * (f ? e - x : x) + k,
                D = w - 3 * u,
                F = w - 2 * u,
                G = w - 1 * u,
                H = Math.cos(D) * h + b,
                D = Math.sin(D) * h + c;
            0 === x ? a.moveTo(H, D) : a.lineTo(H, D);
            a.lineTo(Math.cos(F) * h + b, Math.sin(F) * h + c);
            a.lineTo(Math.cos(G) * d + b, Math.sin(G) * d + c);
            a.lineTo(Math.cos(w) * d + b, Math.sin(w) * d + c)
        }
        a.closePath()
    };
    f.star = function(a, b, c, d, h, e, f) {
        e = 1 - e;
        1 > e && (d *= e);
        var g = l / h,
            u = g / 2 * (f ? -1 : 1);
        e = d / e;
        for (var k = (g - q) / 2, x = 0; x < h; x++) {
            var w =
                g * (f ? h - x : x) + k,
                D = Math.cos(w - u) * e + b,
                F = Math.sin(w - u) * e + c;
            0 === x ? a.moveTo(D, F) : a.lineTo(D, F);
            a.lineTo(Math.cos(w) * d + b, Math.sin(w) * d + c)
        }
        a.closePath()
    };
    f.burst = function(a, b, c, d, e, h, f) {
        var g = f ? -1 : 1,
            u = l / e,
            k = u / 2 * g,
            x = u / 4 * g,
            w = 3 * x,
            D = Math.cos(u / 4);
        1 > h && (d *= h);
        var F = d / h,
            D = F / D,
            G = (u - q) / 2;
        1 < h && (G += q);
        h = -u * g + G;
        a.moveTo(Math.cos(h) * d + b, Math.sin(h) * d + c);
        for (g = 0; g < e; g++) h = u * (f ? e - g : g) + G, a.quadraticCurveTo(Math.cos(h - w) * D + b, Math.sin(h - w) * D + c, Math.cos(h - k) * F + b, Math.sin(h - k) * F + c), a.quadraticCurveTo(Math.cos(h - x) * D + b, Math.sin(h -
            x) * D + c, Math.cos(h) * d + b, Math.sin(h) * d + c);
        a.closePath()
    };
    f.radialBurst = function(a, b, c, d, h, e, f, g) {
        var u = l / e,
            k = 4 * f,
            x = u / 4 * k,
            k = u / 8 * k;
        f = -q / 2 + u * f / 2;
        for (var w = 0; w < e; w++) {
            var D = u * w + f,
                F = D - x,
                G = D - k,
                H = Math.cos(G) * d + b,
                G = Math.sin(G) * d + c,
                J = Math.cos(F) * h + b,
                F = Math.sin(F) * h + c,
                O = Math.cos(D) * h + b,
                D = Math.sin(D) * h + c;
            a.moveTo(H, G);
            g ? (a.lineTo(H, G), a.lineTo(O, D), a.lineTo(J, F)) : (a.lineTo(J, F), a.lineTo(O, D), a.lineTo(H, G))
        }
        a.closePath()
    };
    var x = f.spiral = function(a, b, c, d, h, e, f, g) {
        var u = -q / 2;
        e = e / h * l;
        for (var k = 0; k <= h; k++) {
            var x = f ?
                h - k : k,
                w = Math.pow(d, x / h),
                D = x * e + u,
                x = Math.cos(D) * w + b,
                w = Math.sin(D) * w + c;
            0 !== k || g ? a.lineTo(x, w) : a.moveTo(x, w)
        }
    };
    f.spirals = function(a, b, c, d, h, e, f, g) {
        for (var u = h; u--;) {
            a.save();
            a.translate(b, c);
            a.rotate(u * l / h);
            a.translate(-b, -c);
            var k = 100 * e;
            x(a, b, c, d * f, k, e, !!g);
            x(a, b, c, d, k, e, !g, !0);
            a.closePath();
            a.restore()
        }
    };
    f.supershape = function(a, b, c, d, h, e, f, g, u, k) {
        e = e || .001;
        f = f || -.001;
        g = g || .001;
        u = u || .001;
        for (var x = 0; x <= h; x++) {
            var q = (k ? h - x : x) * l / h,
                w = Math.pow(Math.abs(Math.cos(e * q / 4) / 1), g),
                F = Math.pow(Math.abs(Math.sin(e *
                    q / 4) / 1), u),
                F = Math.pow(w + F, 1 / f);
            0 === F ? q = w = 0 : (w = 1 / F * Math.cos(q) * d, q = 1 / F * Math.sin(q) * d);
            0 === x ? a.moveTo(w + b, q + c) : a.lineTo(w + b, q + c)
        }
        a.closePath()
    };
    f.clearPath = function(a, b, c, d, h, e, f, g, u) {
        var l = a.globalCompositeOperation;
        a.beginPath();
        a.globalCompositeOperation = "destination-out";
        shape[b](a, b, c, d, h, e, f, g, u);
        a.fill();
        a.globalCompositeOperation = l;
        a.beginPath()
    };
    f.clipPath = function(a, b, c, d, h, e, f, g, u) {
        a.beginPath();
        shape[b](a, b, c, d, h, e, f, g, u);
        a.clip()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(c, d) {
        void 0 === c ? this.matrix = l() : isFinite(c.a + c.b + c.c + c.d + c.x + c.y) ? this.matrix = d ? q(c) : c : isFinite(c[0] + c[1] + c[2] + c[3] + c[4] + c[5]) ? this.fromArray(c) : this.matrix = l()
    }

    function f(c, d) {
        return {
            a: c.a * d.a + c.c * d.b,
            b: c.b * d.a + c.d * d.b,
            c: c.a * d.c + c.c * d.d,
            d: c.b * d.c + c.d * d.d,
            x: c.a * d.x + c.c * d.y + c.x,
            y: c.b * d.x + c.d * d.y + c.y
        }
    }

    function q(c) {
        return {
            a: c.a,
            b: c.b,
            c: c.c,
            d: c.d,
            x: c.x,
            y: c.y
        }
    }

    function l() {
        return {
            a: 1,
            b: 0,
            x: 0,
            c: 0,
            d: 1,
            y: 0
        }
    }

    function d(c) {
        return c.a === e.a && c.b === e.b && c.c === e.c && c.d === e.d && c.x === e.x &&
            c.y === e.y
    }
    var e = l();
    g.prototype = {
        matrices: [],
        save: function() {
            this.matrices.push(q(this.matrix))
        },
        restore: function() {
            this.matrix = this.matrices.pop() || l()
        },
        point2d: function(c, d, b) {
            var a = this.matrix;
            b = b || {};
            b.x = a.a * c + a.c * d + a.x;
            b.y = a.b * c + a.d * d + a.y;
            return b
        },
        point2dx: function(c, d, b) {
            var a = this.matrix,
                e = c[d],
                f = c[b];
            c[d] = a.a * e + a.c * f + a.x;
            c[b] = a.b * e + a.d * f + a.y;
            return c
        },
        flatten: function(c, e) {
            if (c && c.length && (e && (c = JSON.parse(JSON.stringify(c))), !d(this.matrix)))
                for (var b = 0, a = c.length, f; b < a; b++)
                    if (f = c[b]) switch (f.cmd) {
                        case "M":
                            this.point2dx(f,
                                "x", "y");
                            break;
                        case "L":
                            this.point2dx(f, "x", "y");
                            break;
                        case "C":
                            this.point2dx(f, "x", "y");
                            this.point2dx(f, "x1", "y1");
                            this.point2dx(f, "x2", "y2");
                            break;
                        case "Q":
                            this.point2dx(f, "x", "y");
                            this.point2dx(f, "x1", "y1");
                            break;
                        case "Z":
                        case "z":
                            isFinite(f.x + f.y) && this.point2dx(f, "x", "y")
                    }
                    return c
        },
        invert: function(c) {
            c = c || this.matrix;
            var d = 1 / (c.a * c.d - c.c * c.b);
            this.matrix = {
                a: c.d * d,
                b: -c.b * d,
                c: -c.c * d,
                d: c.a * d,
                x: (c.c * c.y - c.d * c.x) / d,
                y: (c.b * c.x - c.a * c.y) / d
            };
            return this
        },
        project: function(c) {},
        reflect: function(c) {},
        transform: function(c,
            d, b, a, e, f) {
            var g = this.matrix;
            this.matrix = {
                a: g.a * c + g.c * d,
                b: g.b * c + g.d * d,
                c: g.a * b + g.c * a,
                d: g.b * b + g.d * a,
                x: g.a * e + g.c * f + g.x,
                y: g.b * e + g.d * f + g.y
            };
            return this
        },
        setTransform: function(c, d, b, a, e, f) {
            this.matrix = {
                a: c,
                b: d,
                c: b,
                d: a,
                x: e,
                y: f
            };
            return this
        },
        rotate: function(c) {
            var d = Math.cos(c);
            c = Math.sin(c);
            var b = this.matrix;
            this.matrix = {
                a: b.a * d + b.b * -c,
                b: b.a * c + b.b * d,
                c: b.c * d + b.d * -c,
                d: b.c * c + b.d * d,
                x: b.x,
                y: b.y
            };
            return this
        },
        rotateAt: function(c, d) {
            var b = new g;
            b.translate(d.x, d.y);
            b.rotate(c);
            b.translate(-d.x, -d.y);
            return this.prepend(b)
        },
        scale: function(c, d) {
            void 0 === d && (d = c);
            var b = this.matrix;
            b.a *= c;
            b.b *= d;
            b.c *= c;
            b.d *= d;
            return this
        },
        scaleAt: function(c, d, b, a) {
            var e = new g;
            a ? (e.translate(b.x, b.y), e.rotate(-a), e.scale(c, d), e.rotate(a)) : (e.translate(b.x, b.y), e.scale(c, d));
            e.translate(-b.x, -b.y);
            return this.prepend(e)
        },
        skew: function(c, d) {
            void 0 === d && (d = 0);
            var b = this.matrix,
                a = b.a,
                e = b.b,
                f = b.c,
                g = b.d,
                p = Math.tan(c),
                m = Math.tan(d);
            b.a = a + f * m;
            b.b = e + g * m;
            b.c = a * p + f;
            b.d = e * p + g;
            return this
        },
        skewAt: function(c, d, b) {
            c = new g;
            c.translate(b.x, b.y);
            c.skew(angle);
            c.translate(-b.x, -b.y);
            return this.prepend(c)
        },
        translate: function(c, d) {
            void 0 === d && (d = 0);
            var b = this.matrix;
            b.x = b.a * c + b.c * d + b.x;
            b.y = b.b * c + b.d * d + b.y;
            return this
        },
        multiply: function() {
            for (var c = this.matrix, d = [], b = 0, a = arguments.length; b < a; b++) void 0 === c ? (c = arguments[b], c.matrix && (c = c.matrix)) : (d = arguments[b], d.matrix && (d = d.matrix), c = f(c, d));
            this.matrix = c;
            return this
        },
        prepend: function(c) {
            this.matrix = f(c.matrix, this.matrix);
            return this
        },
        clone: function() {
            return new g(this.matrix, !0)
        },
        reset: function() {
            this.matrix =
                l();
            return this
        },
        fromArray: function(c) {
            this.matrix = {
                a: c[0],
                b: c[1],
                c: c[2],
                d: c[3],
                x: c[4],
                y: c[5]
            };
            return this
        },
        fromString: function(c) {
            this.matrix = c.split(",").map(function(c) {
                return parseFloat(c)
            });
            return this
        },
        toArray: function(c) {
            c = c || this.matrix;
            return [c.a, c.b, c.c, c.d, c.x, c.y]
        },
        toCSSMatrix: function(c) {
            return "matrix(" + this.toString() + ")"
        },
        toString: function() {
            var c = this.matrix;
            return "" + c.a + "," + c.b + "," + c.c + "," + c.d + "," + c.x + "," + c.y
        },
        apply: function(c, d) {
            var b = this.matrix;
            d ? c.transform(b.a, b.b, b.c, b.d, b.x,
                b.y) : c.setTransform(b.a, b.b, b.c, b.d, b.x, b.y);
            return this
        }
    };
    g.cloneMatrix = q;
    g.getIdentity = l;
    g.isIdentity = d;
    (k.vector || (k.vector = {})).Transform = g
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Detect = function() {
        var g = this;
        g.addClone = function(f, k) {
            for (var l in g) "object" === typeof g[l] && g[l][f] && (g[l][k] = !0)
        };
        g.add = function(f, k) {
            var l = g[f] || (g[f] = {});
            if ("string" === typeof k) l[k] = !0;
            else
                for (; k.length;) l[k.pop()] = !0
        };
        g.add("brush", []);
        g.add("shape", []);
        g.add("media", []);
        g.add("utility", ["crop", "select", "zoom"]);
        g.add("useCacheOnRender", ["symbol", "clipart", "image", "paintbrush"]);
        g.add("useRenderControls", "floodfill symbol clipart camera image select text".split(" "));
        g.add("useDefaultDim", ["media", "shape", "text"]);
        g.add("useNonUniform", ["ellipse", "rectangle", "speechbubble"]);
        g.add("useNoConfigure", "move scissor screenshot select vectorfill zoom".split(" "));
        g.add("useCacheForAlpha", "arrow calligraphy eraser paintbrush pen pencil streamer".split(" "));
        g.add("useFillAlphaOnGlobal", ["calligraphy", "paintbrush", "pen", "pencil", "streamer"]);
        g.add("useLocalAlpha", "chrome crayon fur hair oil pastel shader sketchy spirograph spraypaint stamp web".split(" "));
        g.add("useColorModeAll", ["stamp"]);
        g.add("useColorModeCycle", "calligraphy chrome crayon fur hair pen shader sketchy spirograph spraypaint streamer web".split(" "));
        g.add("useCache257", "chrome fur hair shader sketchy spirograph web".split(" "));
        g.add("useCacheOnDraw", "calligraphy chrome crayon fur hair oil pastel pen shader sketchy spirograph spraypaint stamp streamer web".split(" "));
        g.add("useAreaTracker", ["paintbrush"]);
        g.add("useSafeGCO", "crayon pen spirograph spraypaint stamp streamer".split(" "));
        g.add("useStampResource", ["crayon", "spraypaint", "stamp"]);
        g.add("useSrc", ["symbol", "clipart", "image", "spraypaint", "stamp"])
    };
    "object" === typeof module && module.exports ? module.exports = new k.module.Detect : k.detect = new k.module.Detect
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.addToolkit = function(g, f) {
        if ("object" === typeof g && g.length)
            for (; g.length;) k.addToolkit(g.shift(), f);
        else {
            var q = k.module;
            q.toolkit = q.toolkit || {};
            q.toolkit[g] = f
        }
    };
    k.module = k.module || {};
    k.module.Toolkit = function(g, f) {
        var k = this,
            l = f.contexts,
            d = g.detect,
            e = g.feature,
            c = g.lang,
            h = g.util.string,
            b = g.style,
            a = g.util,
            w = g.vector;
        k.init = function(a) {
            a.toolkitId = a.id;
            a.gestures = 0;
            a.interval = 0;
            a.rendering = !1;
            a.device = a.device || {};
            a.loadObject = function(b) {
                b = a.mergeObjectDefaults(b);
                a.loadResource({
                    object: b
                });
                return b
            };
            a.mergeObjectDefaults = function(b) {
                var c = f.scene.copyProperties(a, f.toolkitConfig[b.type]);
                return f.scene.copyProperties(a, b, c)
            };
            g.module.Listener(a);
            return a
        };
        k.clone = function(a, b) {
            f.toolkitConfig.addClone(b, a);
            d.addClone(b, a);
            var c;
            d.brush[b] && (c = "brush.");
            d.shape[b] && (c = "shape.");
            c && g.addToolkit(c + a, g.module.toolkit[c + b])
        };
        k.setTool = function(a) {
            void 0 === a && (a = f.tool.type);
            "string" === typeof a && (a = {
                type: a
            });
            var c = a.type,
                d = a.tid,
                m = a.onsuccess;
            a = a.onerror;
            var h = k.getConfig(c);
            if (h) {
                var r =
                    k.getToolkit(h.toolkitId);
                r ? (f.tool.disable && f.tool.disable(), e.style.toGlobals && b.setGlobalFromObject(h), h = f.tool.type, r.type = c, r.typePrevious = h || c, f[d || "tool"] = r, k.updateDevice(c, function() {
                    e.doc.interactable && r.enable();
                    e.ui.cursorDefs && g.ui.setCursor();
                    f.emit("setTool", c);
                    m && m()
                }, a)) : a && a({
                    message: "Toolkit not found."
                })
            } else a && a({
                message: "Tool not found."
            })
        };
        k.updateDevice = function(a, b, c) {
            if (a = k.getConfig(a)) {
                var d = k[a.toolkitId];
                d.loadResource ? d.loadResource({
                    object: f.scene.copyProperties(d,
                        a, d.device = {}),
                    onerror: c,
                    onsuccess: b
                }) : b && b()
            }
        };
        k.setDefaultConfigure = function(a) {
            var b = k.getConfig(f.tool.type),
                c;
            for (c in a) {
                var d = a[c],
                    e = b[c];
                void 0 !== e && ("number" === typeof d ? void 0 !== e.max ? (e.min = d, e.max = d) : e.value = d : (e.min = d.min, e.max = d.max))
            }
        };
        (function() {
            function a(b, c) {
                switch (b) {
                    case "int":
                        return Math.round(c);
                    default:
                        return c
                }
            }
            k.setConfig = function(a, b) {
                var c = f.toolkitConfig[a];
                c && (f.toolkit.copyIntoConfig(b, c), f.toolkit.updateDevice(a))
            };
            k.setConfigProperty = function(c, d, m) {
                if ("object" ===
                    typeof c && null != d && null != m) {
                    var h = c.type;
                    if (-1 === h.indexOf("gl_")) {
                        var f = k.getToolkit(h);
                        if (!f) {
                            e.debug && console.warn("toolkit unavailable", h);
                            return
                        }
                        if (!f.attributes) return;
                        if (!f.attributes[d]) {
                            e.debug && console.warn("setConfigure:", arguments);
                            return
                        }
                    }
                    h = c[d];
                    if (null == h) {
                        if (!0 === c.__config) {
                            e.debug && console.warn("setConfigure:", arguments);
                            return
                        }
                        return c[d] = g.attrs.create(d, m)
                    }
                    m.getValue && (m = m.getValue());
                    if (h.setValue) h.setValue(m);
                    else if (isFinite(h)) isFinite(m) ? c[d] = m : isFinite(m.value) && (c[d] = m.value);
                    else if ("string" === typeof h) "string" === typeof m && (c[d] = m);
                    else if ("style" === h.constructor.type) {
                        if ("style" === m.constructor.type || b.validate(m)) c[d] = new b.create(m, h.constructor.method)
                    } else if (isFinite(h.min + h.max))
                        if (Array.isArray(m)) {
                            var f = isFinite(m[0]) ? m[0] : 0,
                                y = isFinite(m[1]) ? m[1] : 0;
                            1 === m.length ? h.min = h.max = a(h.format, f) : 2 === m.length && (h.min = a(h.format, f), h.max = a(h.format, y))
                        } else h.min = a(h.format, m.min), h.max = a(h.format, m.max);
                    else isFinite(h.value) ? Array.isArray(m) ? (m = isFinite(m[0]) ? m[0] : 0,
                        h.value = a(h.format, m)) : isFinite(m.value) ? h.value = a(h.format, m.value) : isFinite(m) && (h.value = a(h.format, m)) : c[d] = g.attrs.update(d, m, h);
                    return h
                }
                e.debug && console.warn("setConfigure:", arguments)
            };
            k.copyIntoConfig = function(a, b) {
                for (var c in a) k.setConfigProperty(b, c, a[c])
            }
        })();
        (function() {
            function b(a) {
                var c = a.type || "";
                if (c = 0 === c.indexOf("gl_") && c.substr(3)) {
                    k.getConfig(a.filter);
                    for (var d in a.params) {
                        var p = c,
                            e = a.params[d],
                            h = glfx.filters[p],
                            u = h.paramIndex[d];
                        switch (h.param[u].format.replace(")", "").split("(")[0]) {
                            case "int":
                                e =
                                    Math.round(e)
                        }
                        var l = f.render.glfx;
                        if (l && l.activeFilter) l.activeFilter.data[u] !== e && (l.activeFilter.data[u] = e, !glfx.animationId && l.render()), g.histogram && g.histogram.enabled && g.histogram.analyze();
                        else {
                            var x = !1,
                                w = f.scene.selection.toObjects(),
                                B = void 0;
                            for (B in w) {
                                var D = w[B];
                                if (D.filter)
                                    for (var F = D.filter[0], G = 0; G < F.length; G++)
                                        if (h = F[G], h.id === p) {
                                            h = h.data;
                                            h[u] !== e && (h[u] = e, !glfx.animationId && l.render());
                                            x = D.dirtyCache = !0;
                                            break
                                        }
                            }
                            x && (f.render.dirty = !0)
                        }
                    }
                    return !0
                }
            }

            function c(a, b) {
                var d = {};
                d[a] = b;
                return d
            }

            function p(a, b, d) {
                switch (typeof a) {
                    case "string":
                        return a = {}, a.filter = f.tool.type, a.params = c(a, b), a.selection = d, a;
                    case "object":
                        return "string" === typeof a.param ? (a.params = c(a.param, a.value), a) : "object" !== typeof a.params ? {
                            params: a
                        } : a;
                    default:
                        console.warn("invalid params", a)
                }
            }
            f.setConfigToolkit = function(a) {};
            f.setConfig = function(c) {
                if ((c = p(c)) && !b(c)) {
                    var h = c.cache || {},
                        g = c.param,
                        y = c.params,
                        t = f.selection.toObjects(c.selection || f.scene.selection.items),
                        l = c.filter || "",
                        x = !h.state || "start" === h.state,
                        w = !h.state ||
                        "end" === h.state;
                    c = [];
                    for (var A = [], I = 0, B = 0, D, F = 0, G = t.length; F < G; F++) {
                        var H = t[F],
                            J = H.type;
                        if (!l || J === l) {
                            D = void 0 === D ? J : D;
                            D !== J && (D = !1);
                            var J = {
                                    id: H.id
                                },
                                O = {
                                    id: H.id
                                },
                                K;
                            w && (K = !1);
                            for (var L in y) {
                                var M = y[L],
                                    Q = "data" + H.id + L;
                                x && (h[Q] = a.copy(H[L]));
                                k.setConfigProperty(H, L, M);
                                H.toolkit && (H.dirtyCheck = !0, H.toolkit.updateObjectSize(H), B++);
                                h[Q] !== H[L] && (J[L] = h[Q], O[L] = H[L], w && (f.scene.setDirtyPixelData(H), K = !0))
                            }
                            c.push(J);
                            A.push(O);
                            w && K && I++
                        }
                    }
                    K = D || l || f.tool.type;
                    !1 === D && t.length || w && k.setConfig(K, y);
                    I && f.history &&
                        (g = g ? k.getParamProperName(g) : "Object", f.history.store({
                            cmd: "update",
                            name: "Update " + g,
                            data: {
                                from: c,
                                to: A
                            }
                        }));
                    f.on.record && f.on.record({
                        op: "SCENE_UPDATE",
                        data: A
                    });
                    if (B)
                        if (e.ui.bruteForce) f.render.dirtyControls = !0, f.render.dirty = !0;
                        else {
                            var R = !!d.useLocalAlpha[K];
                            1 < B && (R = !0);
                            clearTimeout(h.interval);
                            h.interval = setTimeout(function() {
                                if (!R || R && w) f.render.dirtyControls = !0, f.render.dirty = !0
                            }, 75)
                        }
                }
            }
        })();
        (function() {
            var a = {
                visible: "visibility"
            };
            k.getParamProperName = function(b) {
                return h.ucwords(a[b] || b)
            }
        })();
        k.setType = function(a, b) {
            var p = f.selection.toObjects(b),
                m = p.length;
            if (0 === m) return f.setTool({
                type: a.replace(" ", "_")
            });
            for (var e = [], h = [], g = k.getToolkit(a), t = k.getConfig(a), t = f.scene.copyAttributes(g.attributes, t), l = function(b, d) {
                    b.dirtyCheck = !0;
                    g.updateObjectSize(b);
                    --m || (f.history && f.history.store({
                        cmd: "update",
                        name: c.translate("convert-format", c.translate(a)),
                        data: {
                            from: e,
                            to: h
                        }
                    }), f.render.dirtyControls = !0, f.render.dirty = !0)
                }, w = 0, C = p.length; w < C; w++) {
                var A = p[w];
                if (d.shape[A.type]) {
                    if (!d.shape[a]) {
                        m--;
                        continue
                    }
                } else if (d.brush[A.type]) {
                    if (!d.brush[a]) {
                        m--;
                        continue
                    }
                } else {
                    m--;
                    continue
                }(g = A.toolkit) ? ("arrow" === a && (t.curved = A.data && 2 === A.data.length ? !1 : !0), e.push(f.scene.copyAttributes(g.sattributes, A, {
                    id: A.id,
                    type: A.type
                })), h.push(f.scene.copyAttributes(g._attributes, t, {
                    id: A.id,
                    type: A.type = a
                })), void 0 === t.spacing && delete A.spacing, t.fill ? t.fill = A.fill : delete A.fill, t.stroke ? t.stroke = A.stroke : delete A.stroke, f.scene.copyAttributes(g.attributes, t, A), g.loadResource({
                    object: A,
                    onerror: l,
                    onsuccess: l
                })) :
                m--
            }
        };
        k.setup = function() {
            var b = g.module,
                c = {},
                p;
            for (p in f.toolkitConfig) {
                var m = f.toolkitConfig[p].toolkitId,
                    h = !a.exists("sketch.module.toolkit." + m);
                b.toolkit[m + "." + p] ? d.add(m, p) : w.Shape[p] ? d.add(m, p) : -1 === p.indexOf(".") && "media" === m && k.media && (0 === p.indexOf("gl_") ? window.glfx && d.add(m, p) : d.add(m, p));
                if (!h && !c[m]) {
                    c[m] = !0;
                    d.add(m, p);
                    h = new b.toolkit[m](g, f);
                    h.type = m;
                    h.draw = l.draw.ctx;
                    h.cache = l.cache.ctx;
                    h.active = l.active.ctx;
                    h.ctx = l.layer0.ctx;
                    h.updateObjectSize = h.updateObjectSize || function(a, b) {
                        b &&
                            b(a)
                    };
                    if (d.useDefaultDim[m]) {
                        var r = e.tools[m];
                        h.units = r.units || h.units;
                        h.minWidth = r.minWidth || h.minWidth;
                        h.minHeight = r.minHeight || h.minHeight;
                        h.maxWidth = r.maxWidth || h.maxWidth;
                        h.maxHeight = r.maxHeight || h.maxHeight;
                        h.defaultWidth = r.defaultWidth || h.defaultWidth;
                        h.defaultHeight = r.defaultHeight || h.defaultHeight
                    }
                    k[m] = h
                }
            }
        };
        k.getConfig = function(a) {
            var b = f.toolkitConfig[a];
            if (b) return b;
            e.debug && console.warn("missing configure", a)
        };
        k.getConfigFallback = function(a) {
            a = a || f.tool.type;
            return f.selection.item ||
                f.toolkitConfig[a] || window.glfx && window.glfx.config[a] || {}
        };
        k.getToolkit = function(a) {
            if (a = k.getToolkitId(a)) return k[a]
        };
        k.getToolkitId = function(a) {
            if (k[a]) return a;
            if (d.shape[a]) return "shape";
            if (d.brush[a]) return "brush";
            if (d.media[a]) return "media"
        };
        k.getFeature = function(a) {
            a = a || {};
            var b = e.tools;
            return b[a.type] || b[a.toolkitId] || {}
        };
        k.ensureToolkit = function(a) {
            if (a.toolkit) return a.toolkit;
            var b = k.getToolkit(a.type);
            if (b) return a.toolkit = b
        };
        k.getToolkitDevice = function(a) {
            return (a = k.getToolkit(a)) &&
                a.device
        };
        k.exists = function(a) {
            return (a = f.toolkitConfig[a]) && k[a.toolkitId]
        };
        k.setStyle = function(a, b) {
            var c = k.getBBox(b);
            if (c) {
                var d = b.fill,
                    e = b.stroke,
                    h = b.shadow;
                e && e.enabled && e.lineWidth && (a.globalAlpha = e.opacity || 1, a.strokeStyle = f.getW3CStyle("stroke", a, c.x1, c.y1, c.x2, c.y2, b), a.stroke());
                d && d.enabled && (a.globalAlpha = d.opacity || 1, a.fillStyle = f.getW3CStyle("fill", a, c.x1, c.y1, c.x2, c.y2, b), a.fill());
                h && h.enabled && (a.shadowColor = h.color, a.shadowBlur = h.blur, a.shadowOffsetX = h.x, a.shadowOffsetY = h.y)
            } else console.error(b)
        };
        k.setStyleToArea = function(a, b, c) {
            if (b.useAreaTracker && !f.render.highRes) {
                var d = c.x1,
                    e = c.x2,
                    h = c.y1;
                c = c.y2;
                a.globalAlpha = 1;
                a.globalCompositeOperation = "source-atop";
                a.fillStyle = f.getW3CStyle("fill", a, d, h, e, c, b);
                a.fillRect(d, h, e - d, c - h)
            }
        };
        k.setGlobalAlpha = function(a, b) {
            var c = isFinite(b.opacity) ? b.opacity / 100 : 1;
            a.globalAlpha = d.useFillAlphaOnGlobal[b.type] ? c * b.fill.opacity : c
        };
        k.getBBox = function(a) {
            var b = ((a.diameter || 0) + (a.lineWidth || 0) + (a.blur || 0)) / 2;
            if (a.bbox) {
                var c = a.bbox,
                    d = -c.padding,
                    e = -c.padding;
                return {
                    x1: d,
                    y1: e,
                    x2: d + c.width,
                    y2: e + c.height
                }
            }
            if (a.lineRecord) {
                if (d = a.path, c = d[0], a = d[1], c && a) {
                    var d = c.x,
                        e = c.y,
                        h = a.x,
                        f = a.y;
                    return {
                        x1: Math.min(d, h) - b,
                        y1: Math.min(e, f) - b,
                        x2: Math.max(d, h) + b,
                        y2: Math.max(e, f) + b
                    }
                }
            } else {
                if (a.calcBBox) return a.calcBBox();
                if (a.isRecording) return d = a.path, e = d.length, c = a.isGhost ? {
                    x1: Infinity,
                    y1: Infinity,
                    x2: -Infinity,
                    y2: -Infinity
                } : a._bbox || new w.BBox({
                    data: d,
                    expand: b
                }), f = d[e - 1], d = f.x - b, h = f.x + b, e = f.y - b, f = f.y + b, d < c.x1 && (c.x1 = d), e < c.y1 && (c.y1 = e), h > c.x2 && (c.x2 = h), f > c.y2 && (c.y2 = f), a._bbox = c
            }
        };
        k.prepareBrush = function() {
            var a = this.type;
            this.isEraser = "destination-out" === b.getCompositeNative(this.composite) || "eraser" === a;
            this.useAreaTracker = d.useAreaTracker[a] && "color" !== this.fill.type;
            return this.renderTo = this.ctx
        };
        k.getToolGroup = function(b) {
            if (b) {
                b = b.replace("_", " ");
                var c = g.ui.icons,
                    d;
                for (d in c) {
                    var m = c[d];
                    if (m.children && (m.children.length && (m.children = a.arrayToObject(m.children)), m.children[b])) return d
                }
            }
        };
        k.getToolIcon = function(a) {
            a = k.getToolGroup(a) || a;
            var b = g.ui.icons,
                c;
            for (c in b)
                if (a ===
                    c) return a = b[c], a.src || a
        };
        k.cleanState = function(a) {
            "down" === a && (a = "start");
            if ("move" === a || "press" === a) a = "change";
            "up" === a && (a = "end");
            return a
        };
        (function() {
            function a(b, c) {
                return isFinite(b) && b !== c
            }
            k.readResize = function(b) {
                var c = b.width;
                b = b.height;
                if (a(c, 0) || a(b, 0)) return {
                    width: c || 0,
                    height: b || 0
                }
            };
            k.readRotate = function(b) {
                if ((b = b.rotate) && a(b, 0)) return b
            };
            k.readScale = function(b) {
                var c, d = b.scale;
                d ? isFinite(d) ? b = c = d : (c = d.x, b = d.y) : (c = b.sx, b = b.sy);
                if (a(c, 1) || a(b, 1)) return {
                    x: c || 1,
                    y: b || 1
                }
            };
            k.readTranslate =
                function(b) {
                    var c, d = b.translate;
                    d ? (c = d.x, b = d.y) : (c = b.x, b = b.y);
                    if (a(c, 0) || a(b, 0)) return {
                        x: c || 0,
                        y: b || 0
                    }
                }
        })()
    }
})(sketch);
(function(k) {
    k.addToolkit("group", function(g, f) {
        var k = this,
            l = f.toolkit,
            d = g.util;
        k.id = "group";
        k._attributes = {
            opened: !1
        };
        var e = d.copy(k._attributes);
        k.attributes = d.copyInto(g.attrs.__basicObject, e);
        k.enable = function() {};
        k.disable = function() {};
        k.loadResource = function(c) {
            var d = c.object;
            (c = c.onsuccess) && c(d)
        };
        k.createObject = function(c, d) {
            var b = c.object,
                a = f.scene.addObject({
                    type: k.type,
                    composite: b.composite,
                    opacity: b.opacity,
                    groupId: b.groupId,
                    bbox: b.bbox
                });
            if (b.children) {
                var e = function() {
                        var c = g[l++];
                        c ?
                            ("group" !== c.type && (c.groupId = b.groupId, b.x && (c.x = (c.x || 0) + b.x), b.y && (c.y = (c.y || 0) + b.y)), f.scene.add(c, e, e)) : d && d(a)
                    },
                    g = b.children,
                    l = 0;
                e()
            } else d && d(a)
        };
        l.init(k)
    })
})(sketch);
(function(k) {
    k.addToolkit("select", function(g, f) {
        function k(a, b) {
            if (b) return a.proxy(function(a, c) {
                b(a, c);
                f.__interacting = !c.pointerEnd;
                if (c.pointerEnd) d.onDrag(a, c, !0)
            });
            console.error("setProxy", arguments)
        }

        function l(a) {
            var b = eventjs.metaKey,
                d = eventjs.shiftKey;
            b && h.selection.items[a] ? h.deselectByIdx(a) : h.selectByIdx(a, !b && !d);
            h.handleSelection();
            c.dirtyControls = !0;
            c.dirty = !0
        }
        var d = this,
            e = g.feature,
            c = f.render,
            h = f.scene,
            b = f.toolkit,
            a = g.ui,
            w = g.util,
            u = g.vector.Point;
        g.module.Listener(d);
        d.id = "select";
        d.type = "select";
        d.usePreventSelection = !1;
        d.events = {};
        d.enabled = !1;
        d.enable = function(b) {
            if (!1 === d.enabled) {
                b = b || {};
                d.usePreventSelection = b.cancelSelection || !1;
                d.searchParam = b.searchParam || {
                    selectable: !0
                };
                d.enabled = void 0 === b.events;
                b = b.events || d.events;
                var c = d.active.canvas;
                b.mouseout = eventjs.add({
                    target: c,
                    type: "mouseout",
                    listener: function() {
                        a.tooltip && a.tooltip.update("")
                    }
                });
                b.context = eventjs.add({
                    target: c,
                    type: "contextmenu",
                    listener: d.onContext
                });
                b.mousemove = eventjs.add({
                    target: c,
                    type: "mousemove",
                    listener: d.onCursor,
                    strict: !0
                });
                g.keyboard && g.keyboard.listen(f, b);
                b.ambiguous = eventjs.proxy.ambiguous({
                    target: c,
                    ongesture: {
                        listener: d.onGesture,
                        maxFingers: 2
                    },
                    ondrag: {
                        listener: d.onDrag,
                        maxFingers: 1
                    }
                })
            }
        };
        d.disable = function() {
            !0 === d.enabled && (d.enabled = !1, eventjs.bulk(d.events, "remove"), a.tooltip && a.tooltip.update(""))
        };
        d.onCursor = function(e) {
            if (!f.__interacting && "eyeDropper" !== a.colorPicker.state) {
                var m = h.pointInCanvasFromEvent(e);
                if (!d.on.pointer || !d.on.pointer(m)) {
                    var g, r = 0;
                    d.usePreventSelection ?
                        g = w.copy(h.controls) : (g = h.children.concat(h.controls), r = h.children.length);
                    for (var y = h.findAtPoint({
                            point: m,
                            objects: g,
                            searchParam: d.searchParam,
                            getArray: !0
                        }), t = "", l = h.controlHoverArray = [], k = 0, u = y.length; k < u; k++) {
                        var q = y[k];
                        e = g[q];
                        "button" === e.type && (l.push(e.id), t += e.id)
                    }
                    e = y[y.length - 1];
                    q = Math.max(0, e - r);
                    r = h.controls[q] || {};
                    g = (e = h.children[e] || h.getById(r.layerId)) ? e.zIndex : void 0;
                    h.control.id !== t && (c.dirtyControls = !0, h.control.changed = !0, h.control.id = t);
                    h.controlHover = r;
                    f.tool.coord = m;
                    m = f.hovered;
                    q = f.selection.idx;
                    void 0 === q && m.item && b.getFeature(m.item).useHoverAsFocus && (q = m.idx);
                    e && void 0 !== g || void 0 !== q ? e ? void 0 === m.items[g] && (m.reset(), m.select(g), b.renderSceneControls(), f.emit("hover", g)) : void 0 === m.items[q] && (m.reset(), m.select(q), b.renderSceneControls(), f.emit("hover", q)) : m.length && (m.reset(), b.renderSceneControls(), f.emit("hover"));
                    m = r.title || "";
                    t = r.cursor || "";
                    a.tooltip && a.tooltip.update(m);
                    a.setCursor(t, e)
                }
            }
        };
        d.onDrag = function(p, m, g) {
            eventjs.prevent(p);
            if (2 !== m.fingers && "eyeDropper" !==
                a.colorPicker.state) {
                var r = m.pointerStart,
                    y = m.pointerEnd,
                    t = m.pointerMoved,
                    w = eventjs.metaKey,
                    z = eventjs.shiftKey;
                f.__interacting = m.pointerDown;
                if (y) var C = d.__idx,
                    A = d.__control || {};
                else r ? (C = h.pointInCanvasFromEvent(p), A = h.findAtPoint({
                    point: C,
                    objects: h.controls,
                    searchParam: d.searchParam
                }), C = d.usePreventSelection ? void 0 : h.findAtPoint({
                    point: C,
                    objects: h.children,
                    selection: f.selection.items,
                    searchParam: d.searchParam,
                    useFocusPriority: !0
                }), A = h.controlHover = h.controls[A] || {}, d.__idx = C, d.__control = A) : A = {};
                if (!d.on.pointer || !d.on.pointer(m)) {
                    if (A.id)
                        if ("anchor" === A.id && f.selection.length) {
                            if (y) {
                                C = h.pointInCanvasFromEvent(p);
                                C.searchParam = d.searchParam;
                                var C = h.findAtPoint({
                                        point: C
                                    }),
                                    I = h.children[C];
                                if (I) {
                                    if (f.selection.idx === C) {
                                        p = Date.now();
                                        var B = 1E3 > p - d.__clickTime,
                                            D = "text" === I.type;
                                        if (e.beta && "path" === I.type && (B || e.tools.brush.useEditByClick)) {
                                            x(I);
                                            return
                                        }
                                        if (D && (B || e.tools.text.useEditByClick)) {
                                            b.text.show(I);
                                            return
                                        }
                                        if (B) {
                                            if (!1 === t && e.tools.select.clickToDeselect) {
                                                h.deselectAll();
                                                a.configurePane();
                                                c.dirtyControls = !0;
                                                c.dirty = !0;
                                                return
                                            }
                                        } else {
                                            d.__clickTime = p;
                                            return
                                        }
                                    }
                                    if (!t) {
                                        l(C);
                                        return
                                    }
                                }
                            }
                        } else {
                            if (y) return;
                            (I = f.hovered.item) && I !== f.selection.item && (h.selectByIdx(I.zIndex, !1), h.handleSelection());
                            if ("function" === typeof A.event) {
                                k(m, A.event(p));
                                return
                            }
                        }
                    else if (y && (I = h.children[C])) {
                        var F = b.getFeature(I);
                        if (F.usePointInPath) {
                            c.dirty = !0;
                            return
                        }
                    }
                    if (g) t ? void 0 === A.id && (f.hovered.reset(), f.hovered.select(C), f.emit("hover", C)) : l(C);
                    else if (!y || "anchor" !== A.id || t || z || w) {
                        g = void 0 !== C;
                        var y = f.selection.length,
                            t = b.text && b.text.dragging,
                            G = !1;
                        !r || g || !y || z || w || t || (f.__editing && "text" === f.tool.id && (G = !0), h.deselectAll(), c.dirtyControls = !0, c.dirty = !0);
                        if (r && f.selection.items[C] && !w) return h.handleSelection(), k(m, b.moveEvent());
                        if (!g || z || w) {
                            if ("select" === f.tool.id && r) return m.proxy(function(e, m) {
                                a: {
                                    eventjs.prevent(e);
                                    var p = m.pointerStart,
                                        g = m.pointerDrag,
                                        r = m.pointerEnd,
                                        v = m.hasMoved(1),
                                        t = eventjs.metaKey;p && (m.env.scrollX = f.scrollX, m.env.scrollY = f.scrollY, a.tooltip && a.tooltip.update(""), f.selection.item && b.text &&
                                        b.text.hide());
                                    var y = m.x + (f.scrollX - m.env.scrollX),
                                        l = m.y + (f.scrollY - m.env.scrollY),
                                        k = m.start,
                                        q = Math.min(k.x, y) - .01,
                                        w = Math.min(k.y, l) - .01,
                                        y = Math.max(k.x, y) + .01,
                                        l = Math.max(k.y, l) + .01,
                                        q = h.pointsIn("pointInSceneFromCanvas", [u(q, w), u(y, l)]);
                                    if (v) v = h.findInRect({
                                        rect: q,
                                        deselect: t
                                    });
                                    else if (r) {
                                        var x = h.findAtPoint({
                                                point: h.pointInCanvasFromEvent(e),
                                                searchParam: d.searchParam
                                            }),
                                            v = {};
                                        v[x] = !t || !f.selection.items[x]
                                    } else break a;
                                    if (p || g) x = q[0],
                                    p = q[1],
                                    h.controlSelection = {
                                        x: x.x + .5,
                                        y: x.y + .5,
                                        width: p.x - x.x,
                                        height: p.y -
                                            x.y,
                                        items: v,
                                        metaKey: t
                                    };
                                    else if (r) {
                                        h.controlSelection = void 0;
                                        t = [];
                                        p = [];
                                        for (x in v) v[x] ? t.push(x) : p.push(x);
                                        f.hovered.reset();
                                        f.hovered.select(x);
                                        f.emit("hover", x);
                                        t.length && h.selectByIdx(t, !1);
                                        p.length && h.deselectByIdx(p);
                                        h.handleSelection()
                                    }
                                    c.dirtyControls = !0
                                }
                                f.__interacting = !m.pointerEnd
                            });
                            if (f.tool.onRecord) return h.deselectAll(), F = b.getFeature(f.tool), m.proxy(function(a, b) {
                                if (F.useAddByDrag) {
                                    if (G) {
                                        if (b.pointerStart) {
                                            G = {
                                                event: a,
                                                self: b
                                            };
                                            return
                                        }
                                        if (b.pointerDrag) {
                                            b.state = "down";
                                            b.pointerStart = !0;
                                            f.tool.onRecord(G.event,
                                                G.self);
                                            G = void 0;
                                            return
                                        }
                                    }
                                    f.tool.onRecord(a, b);
                                    f.__interacting = !b.pointerEnd
                                } else eventjs.prevent(a)
                            })
                        }
                        if (isFinite(C)) return l(C), d.__clickTime = Date.now(), k(m, b.moveEvent())
                    } else l(C)
                }
            }
        };
        d.onGesture = function(a, d) {
            var h = d.state,
                g = d.env,
                y = d.scale,
                t = d.rotation,
                l = d.x,
                k = d.y;
            d.pointerStart && (g.cache = {}, g.rotate = 0, g.scale = 1, g.origin = u(l, k), g.x = l, g.y = k);
            var q = l - g.x,
                w = k - g.y,
                x = t - g.rotate,
                B = y - g.scale + 1;
            e.doc.gestureTransform && f.selection.length ? (f.selection.transform({
                cache: g.cache,
                state: b.cleanState(h),
                pointerId: f.getActionUid(d),
                origin: g.origin,
                rotate: x,
                scale: B,
                x: q,
                y: w
            }), c.dirty = !0, c.dirtyControls = !0, g.rotate = t, g.scale = y) : (e.doc.gestureZoom && f.setZoom(B), e.doc.gestureScroll && f.scrollTo({
                left: -Math.round(q),
                top: -Math.round(w),
                relative: !0,
                duration: 0
            }));
            g.x = l;
            g.y = k
        };
        d.onContext = function(b, c) {
            if (!c || "end" !== c.state) {
                eventjs.prevent(b);
                var e = a.contextMenu.getSelectMenu();
                e && (d.events.ambiguous && d.events.ambiguous.pause(), a.contextMenu.show({
                    at: eventjs.getPageXY(b),
                    menu: e
                }))
            }
        };
        var x = function(a) {
            b.setTool({
                type: "path",
                onsuccess: function() {
                    b.brush.loadResource({
                        object: a,
                        onsuccess: function() {
                            for (var b = 0; b < a.data.length; b++) delete a.data[b].bbox;
                            var b = w.copy(a.data),
                                c = w.copy(a.data),
                                d = f.tool,
                                e = d.device.brush;
                            e.batchRecord = b;
                            e.pathRecord = c;
                            e.ctx = d.ctx;
                            e.active = d.active;
                            e.isEditing = !0;
                            e.isRecording = !0;
                            e.render(a)
                        }
                    })
                }
            })
        };
        b.init(this)
    })
})(sketch);
(function(k) {
    k.addToolkit("zoom", function(g, f) {
        function k(b, c) {
            eventjs.prevent(b);
            var d = a.zoom.value,
                e = c.x - c.start.x,
                h = c.y - c.start.y;
            "up" === c.state && (a.zoom.fromCenter ? a.setZoomAtCenter() : a.setZoomAtPoint(b), w.setDirtyBounds());
            var g = f.pixelRatio;
            a.offset.x += (e - a.lx) / d * a.mirrorX * g;
            a.offset.y += (h - a.ly) / d * a.mirrorY * g;
            a.lx = e;
            a.ly = h;
            a.render()
        }

        function l(b) {
            a.lx = 0;
            a.ly = 0;
            x.drag = eventjs.proxy.drag({
                fingers: 1,
                event: b,
                target: a.canvas,
                listener: k
            })
        }

        function d(b, c) {
            eventjs.cancel(b);
            "end" === c.state && w.setDirtyBounds();
            a.setZoomAtPoint(b);
            var d = a.zoom.value;
            a.setZoom(d * (1 + c.wheelDelta / 120 / 2), !0);
            a.render();
            a.controllerSetZoom && d !== a.zoom.value && a.controllerSetZoom(a.zoom.value)
        }

        function e(b) {
            eventjs.keyTracker(b);
            var c = a.zoomMin,
                c = a.zoom.value / (a.zoomMax - c + c),
                d = b.shiftKey ? 10 : 1;
            switch (b.keyCode) {
                case 37:
                    eventjs.metaKey ? (eventjs.cancel(b), a.setRotate(a.rotate.value + d)) : (a.setPan(-1 * d, 0), a.render());
                    break;
                case 39:
                    eventjs.metaKey ? (eventjs.cancel(b), a.setRotate(a.rotate.value - d)) : (a.setPan(d, 0), a.render());
                    break;
                case 38:
                    eventjs.metaKey ?
                        (eventjs.cancel(b), a.setZoom(c - .01 * d)) : a.setPan(0, -1 * d);
                    a.render();
                    break;
                case 40:
                    eventjs.metaKey ? (eventjs.cancel(b), a.setZoom(c + .01 * d)) : a.setPan(0, d), a.render()
            }
        }
        var c = this,
            h = f.contexts,
            b = g.dom,
            a = f.orient,
            w = f.scene,
            u = f.toolkit;
        c.id = "zoom";
        var x = {};
        c.enabled = !1;
        c.enable = function() {
            if (!1 === c.enabled) {
                c.enabled = !0;
                g.keyboard && g.keyboard.listen(f, x);
                var a = b.$("#sk-orientation");
                a && a.classList.add("sk-opened");
                x.mousedown = eventjs.add(h.active, "mousedown", l);
                x.wheel = eventjs.add(h.active, "wheel", d);
                x.key =
                    eventjs.add(window, "keyup", eventjs.keyTracker);
                x.keydown = eventjs.add(window, "keydown", e);
                x.gesture = eventjs.add({
                    fingers: 2,
                    target: window,
                    type: "gesture",
                    listener: c.onGesture
                })
            }
        };
        c.disable = function() {
            if (!0 === c.enabled) {
                c.enabled = !1;
                var a = b.$("#sk-orientation");
                a && a.classList.remove("sk-opened");
                eventjs.bulk(x, "remove")
            }
        };
        a.lx = 0;
        a.ly = 0;
        c.onGesture = function(b, c) {
            var d = "end" === c.state;
            "start" === c.state ? (x.drag && x.drag.enabled && x.drag.remove(), c.startScale = f.zoom, c.__x = c.x, c.__y = c.y) : d && x.drag && x.drag.add();
            if (c.startScale && c.scale) {
                var d = eventjs.getBBox(a.canvas),
                    e = f.pixelRatio;
                a.mouse.x = c.x * e - d.x1;
                a.mouse.y = c.y * e - d.y1;
                a.offset.x += (c.x - c.__x) / f.zoom;
                a.offset.y += (c.y - c.__y) / f.zoom;
                f.orient.setZoom(c.startScale * c.scale);
                f.orient.render()
            }
            c.__x = c.x;
            c.__y = c.y
        };
        u.init(c)
    })
})(sketch);
(function(k) {
    function g(f, d, e) {
        e.cutout ? (f.apply(f, d.concat(!1)), d[3] *= e.cutout, f.apply(f, d.concat(!0))) : f.apply(f, d)
    }
    var f = k.util;
    k.addToolkit("shape", function(g, d) {
        function e(a, b, c, e, h, m) {
            a.width = b;
            a.height = c;
            m && (a.scale.x = 1, a.scale.y = q.useNonUniform[m] ? .5 : 1);
            var p = d.zoom * d.scale * d.pixelRatio,
                g = e.x - k.x / p;
            e = e.y - k.y / p;
            h || m ? (a.x = g - b / 2 * a.scale.x, a.y = e - c / 2 * a.scale.y, "userSpaceOnUse" === a.units && (b = E(g, e), E.rotateAt(a, b, a.rotate * f.DEG_RAD))) : (a.x = g, a.y = e)
        }

        function c(b, c, e) {
            var f = this.bbox,
                p = f.width,
                g =
                f.height;
            c = f.scale.x * d.scale;
            var f = f.scale.y * d.scale,
                r = 0 > c,
                v = 0 > f,
                t = p / 2 * (r ? -1 : 1),
                y = g / 2 * (v ? -1 : 1),
                l = Math.max(p, g) / 2,
                k = m.toolkit["shape." + this.type];
            if ("function" !== typeof k) console.error("shape.renderFast", this);
            else if (e && (r && (t += p), v && (y += g)), 1 === c && 1 === f ? (b.beginPath(), k(b, t, y, l, this)) : (b.save(), b.beginPath(), b.scale(c, f), k(b, t, y, l, this), b.restore()), (p = this.fill) && !1 !== p.enabled && p.opacity && h(b, "fill", c, f, e, this), (p = this.stroke) && !1 !== p.enabled && p.lineWidth && p.opacity) b.lineWidth = p.lineWidth, b.lineJoin =
                p.lineJoin, b.lineCap = p.lineCap, b.miterLimit = p.miterLimit, a.ctx_lineDash && ((g = p.dashArray) && "object" === typeof g && b.setLineDash(g), p = p.dashOffset) && (b.lineDashOffset = p), h(b, "stroke", c, f, e, this)
        }

        function h(a, b, c, e, h, m) {
            c = m[b];
            var f = c.type,
                p = b + "Style";
            a.globalAlpha = c.opacity;
            if ("destination-out" === m.composite) a[p] = "#000", a[b]();
            else if ("color" === f) a[p] = c.color, a[b]();
            else {
                var g = m.bbox;
                e = g.scale;
                c = e.x;
                e = e.y;
                var r = g.width,
                    g = g.height,
                    v = r,
                    t = g,
                    y = 0,
                    l = 0;
                "gradient" !== f || h || (0 > c && (v -= r, y -= r), 0 > e && (t -= g, l -= g));
                "pattern" === f && "fill" === b ? (a.save(), a.scale(c, e), a[p] = d.getW3CStyle(b, a, v, t, y, l, m), a[b](), a.restore()) : (a[p] = d.getW3CStyle(b, a, v * c, t * e, y * c, l * e, m), a[b]())
            }
        }
        var b = this,
            a = g.agent,
            k = d.canvas2d,
            u = d.contexts,
            q = g.detect,
            p = g.feature.tools.shape,
            m = g.module,
            v = g.net,
            r = d.render,
            y = d.scene,
            t = d.toolkit,
            E = g.vector.Point;
        b.id = "shape";
        b.units = p.units;
        b.device = {};
        b._attributes = {
            angle: "number",
            anticlockwise: "number",
            coils: "number",
            cutout: "number",
            imperfection: "number",
            m: "number",
            n1: "number",
            n2: "number",
            n3: "number",
            points: "number",
            roundness: "number",
            sides: "number",
            slope: "number",
            spread: "number"
        };
        var z = f.copy(b._attributes);
        b.attributes = f.copyInto(g.attrs.__styledObject, z);
        (function() {
            var a = {};
            b.enabled = !1;
            b.enable = function() {
                !1 === b.enabled && (b.enabled = !0, a.ambiguous = eventjs.proxy.ambiguous({
                    target: u.active,
                    ongesture: {
                        listener: t.select.onGesture
                    },
                    ondrag: {
                        listener: b.onRecord,
                        maxFingers: b.usePointerMax || f.INFINITY
                    }
                }), g.keyboard && g.keyboard.listen(d, a))
            };
            b.disable = function() {
                !0 === b.enabled && (b.enabled = !1, eventjs.bulk(a, "remove"))
            }
        })();
        b.loadResource = function(a) {
            var b = a.object,
                e = a.onerror,
                h = a.onsuccess;
            a = b.type;
            d.toolkitConfig[a] ? d.loadStyle(b, function() {
                b.dirtyCheck = !0;
                b.render = c;
                b.seed = b.seed || f.Random.seed();
                h && h(b)
            }) : e && e(b, {
                fatal: !0,
                message: a + " unavailable"
            })
        };
        b.createObject = function(a, c) {
            var d = a.object,
                e = d.bbox;
            e.width !== e.height && (e.width > e.height ? (e.scale.y = e.height / e.width, e.height = e.width) : (e.scale.x = e.width / e.height, e.width = e.height));
            d = y.addObject(b.mergeObjectDefaults(d));
            c && c(d)
        };
        b.onRecord = function(a, c) {
            if ("eyeDropper" !==
                g.ui.colorPicker.state) {
                var h = c.state,
                    m = c.pointerDown,
                    k = c.pointerStart,
                    u = c.pointerEnd,
                    w = d.getActionUid(c),
                    z = isFinite(c.shiftKey) ? c.shiftKey : eventjs.shiftKey,
                    J = isFinite(c.metaKey) ? c.metaKey : eventjs.metaKey,
                    O = !!a,
                    K = O && d.on.record;
                d.__interacting = m;
                O && (k || u ? eventjs.prevent(a) : eventjs.cancel(a));
                m = r.pointer[w];
                if (!m || !m.object)
                    if (O && k) m = r.pointer[w] = {}, m.isFromBrowser = !0, m.object = y.copyProperties(b, b.device), m.object.id = y.createId({
                        id: w
                    }), b.loadResource({
                        object: m.object
                    });
                    else {
                        console.warn("shape.onRecord - no pointer");
                        return
                    }
                m.lastModified = Date.now();
                var L = m.object,
                    M = L.type;
                k && (L.pointerId = w, m.env = {}, m.env.start = {
                    x: c.x,
                    y: c.y
                }, m.env.useHighRes = L.useHighRes);
                if (K) {
                    var Q;
                    k && (Q = y.copyDeepCompress(y.copyProperties(b, L)));
                    d.on.record({
                        op: "TOOL",
                        data: {
                            config: Q,
                            state: t.cleanState(h),
                            pointerId: w,
                            point: y.pointInPeerSceneFromCanvas(c),
                            metaKey: J,
                            shiftKey: z
                        }
                    })
                }
                var h = c.start || m.env.start,
                    k = d.zoom,
                    R = k * d.scale,
                    k = (k - 1) / k;
                Q = d.scrollX * k;
                var U = d.scrollY * k,
                    h = {
                        x: h.x / R + Q,
                        y: h.y / R + U
                    },
                    K = !q.useNonUniform[M],
                    k = "objectBoundingBox" === b.units ||
                    K;
                Q = c.x / R + Q - h.x;
                var V = c.y / R + U - h.y,
                    R = Math.abs(Q),
                    U = Math.abs(V),
                    P;
                P = K ? Math.sqrt(Q * Q + V * V) : Math.max(R, U);
                J = !!J;
                z = !!z;
                K ? (J = !z, z = !0) : J && (z = !0);
                J = J ? -Math.atan2(Q, V) * f.RAD_DEG : 0;
                K = 0 > Q ? -1 : 1;
                Q = 0 > V ? -1 : 1;
                !1 === z && (R > U ? Q *= U / R || 0 : K *= R / U || 0);
                k && (K = Math.abs(K), Q = Math.abs(Q), P *= 2);
                L.isRecording = !0;
                L.useHighRes = !0;
                z = L.bbox = {
                    width: P,
                    height: P,
                    rotate: J,
                    units: b.units,
                    scale: {
                        x: K,
                        y: Q
                    }
                };
                J = y.getConstraint(L, !0);
                e(z, J.width, J.height, h, k);
                L.dirtyCache = L.usePixelData;
                L.dirtyTransform = !0;
                if (u) {
                    r.removePointer(w);
                    L.isRecording = !1;
                    L.useHighRes = m.env.useHighRes;
                    if (p.useAddByClick) J.tooSmall && e(z, p.defaultWidth, p.defaultHeight, h, k, M);
                    else if (E.equals(c, c.start)) return;
                    b.createObject({
                        object: L
                    }, function(a) {
                        r.objectToScene(a);
                        O && d.history && d.history.store({
                            cmd: "add",
                            pointerId: a.pointerId,
                            name: M,
                            data: [a]
                        }, {
                            userId: v.user.id
                        })
                    })
                }
                r.dirtyPointer = !0
            }
        };
        t.init(this)
    });
    var q = k.vector.Shape;
    k.addToolkit("shape.ring", function(g, d, e, c, h) {
        var b = f.DEG_RAD,
            a = h.angle;
        q.ring(g, d, e, c * (h.cutout || 0), c, a.min * b, a.max * b, h.anticlockwise)
    });
    k.addToolkit("shape.pie",
        function(g, d, e, c, h) {
            var b = f.DEG_RAD,
                a = h.angle;
            q.pie(g, d, e, c, a.min * b, a.max * b, h.anticlockwise)
        });
    k.addToolkit(["shape.circle", "shape.ellipse"], function(f, d, e, c, h) {
        var b = h.imperfection;
        b ? (b /= 2, q.imperfectCircle(f, d, e, c - b, c + b, 42, h.seed)) : g(q.circle, [f, d, e, c], h)
    });
    k.addToolkit(["shape.square", "shape.rectangle"], function(f, d, e, c, h) {
        var b = h.roundness,
            a = h.imperfection;
        if (b) {
            var a = b * Math.max(c, c),
                b = b * Math.max(c, c),
                k = h.bbox.scale,
                u = Math.abs(k.x),
                k = Math.abs(k.y);
            u > k ? b *= u / k : a *= k / u;
            h.cutout ? (q.roundRect(f, d - c,
                e - c, 2 * c, 2 * c, a, b), q.roundRect(f, d - c * h.cutout, e - c * h.cutout, 2 * c * h.cutout, 2 * c * h.cutout, a, b, !0)) : q.roundRect(f, d - c, e - c, 2 * c, 2 * c, a, b)
        } else a ? (b = new q.record, q.rect(b, d - c, e - c, 2 * c, 2 * c), q.imperfect(f, a, h.seed, b.data)) : g(q.square, [f, d, e, c], h)
    });
    k.addToolkit("shape.triangle", function(f, d, e, c, h) {
        g(q.triangle, [f, d, e, c], h)
    });
    k.addToolkit("shape.regularPolygon", function(f, d, e, c, h) {
        g(q.regularPolygon, [f, d, e, c, Math.round(h.sides)], h)
    });
    k.addToolkit("shape.gear", function(f, d, e, c, h) {
        g(q.gear, [f, d, e, c, Math.round(h.sides),
            h.slope
        ], h)
    });
    k.addToolkit("shape.star", function(f, d, e, c, h) {
        g(q.star, [f, d, e, c, Math.round(h.sides), h.slope], h)
    });
    k.addToolkit("shape.burst", function(f, d, e, c, h) {
        g(q.burst, [f, d, e, c, Math.round(h.sides), h.slope], h)
    });
    k.addToolkit("shape.radialBurst", function(f, d, e, c, h) {
        q.radialBurst(f, d, e, 0, c, Math.round(h.sides), h.spread)
    });
    k.addToolkit("shape.spiral", function(f, d, e, c, h) {
        q.spirals(f, d, e, c, Math.round(h.sides), h.coils, 1 - h.spread / 100)
    });
    k.addToolkit("shape.supershape", function(f, d, e, c, h) {
        g(q.supershape, [f,
            d, e, c, h.points, Math.round(h.m), h.n1, h.n2, h.n3
        ], h)
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g() {
        var d;
        d = "undefined" === typeof document ? new l : document.createElement("canvas");
        d.ctx = d.getContext("2d");
        return d
    }
    var f = k.util = k.util || {};
    f.thumbnailer = function(d, e, c) {
        "string" === typeof d && (d = {
            src: d
        });
        var h = d.src,
            b = d.canvas || g(),
            a = b.ctx || b.getContext("2d");
        c = d.onerror || c;
        e = d.onsuccess || e;
        var w = d.background;
        "none" === w && (w = "");
        var u = d.shadow || !1,
            x = d.resample || "bicubic",
            p = d.center || !1;
        if (h) {
            var m = function() {
                    var c = v.width,
                        h = v.height;
                    if (c || h) {
                        var m = f.fitSize(c, h, d),
                            g = m.width,
                            r = m.height,
                            y = m.ratio,
                            l = m.crop,
                            q = m.croparea;
                        b.width = g;
                        b.height = r;
                        w && (a.save(), a.rect(0, 0, g, r), a.fillStyle = w, a.fill(), a.restore());
                        u && (a.shadowBlur = u.blur || 0, a.shadowOffsetX = u.offsetX || 0, a.shadowOffsetY = u.offsetY || 0, a.shadowColor = u.color || "transparent");
                        var m = q.x1,
                            F = q.y1,
                            G = q.x2,
                            q = q.y2,
                            c = Math.min(c, G - m),
                            h = Math.min(h, q - F);
                        if ("stretch" === l) a.drawImage(v, m, F, c, h, 0, 0, g, r);
                        else {
                            var l = Math.round(c * y) || 1,
                                H = Math.round(h * y) || 1,
                                g = Math.round(p ? (g - l) / 2 : 0),
                                r = Math.round(p ? (r - H) / 2 : 0);
                            if ("lanczos" === x && k.module.lanczos) {
                                var J =
                                    v.width / l,
                                    O = v.height / H,
                                    y = Math.max(J, O) >> 0;
                                v = k.module.lanczos(v, l, H, y);
                                Math.round(G / J);
                                Math.round(q / O)
                            }
                            a.drawImage(v, m, F, c, h, g, r, l, H)
                        }
                        e && e(b, v)
                    } else e && e(b, v), console.error("missing image")
                },
                v, r = String(h),
                y = "function" === typeof FlashCanvas;
            q[r] || y && "[object]" === r ? (v = h, m()) : (b.setAttribute("data-src", h), v = "undefined" === typeof document ? new l.Image : new Image, y ? (v.src = h, a.loadImage(v, m, c)) : f.loadImage({
                src: h,
                image: v,
                onsuccess: m,
                onerror: c
            }));
            return b
        }
        c && c();
        console.warn("Thumbnailer", d)
    };
    f.fitSize = function(d,
        e, c) {
        c = c || {};
        var h = c.crop || "none",
            b = c.croparea,
            a = (c.dpi || 72) / 72,
            f = isFinite(c.width) ? c.width * a : "auto",
            a = isFinite(c.height) ? c.height * a : "auto",
            g = c.maxWidth || Infinity,
            k = c.maxHeight || Infinity,
            p = c.minWidth || 0;
        c = c.minHeight || 0;
        if (!f && !g || !a && !k) console.error("invalid dimensions");
        else {
            b = Array.isArray(b) ? {
                x1: b[0] || 0,
                y1: b[1] || 0,
                x2: b[2] || d || 0,
                y2: b[3] || e || 0
            } : b || {
                x1: 0,
                y1: 0,
                x2: d || 0,
                y2: e || 0
            };
            d = "fit" === h;
            e = b.x2 - b.x1;
            var m = b.y2 - b.y1,
                v = e / m;
            if (0 === e || 0 === m) console.warn("invalid dimensions");
            else {
                var r = f,
                    y = a;
                "auto" ===
                f && "auto" === a ? (r = e, y = m) : "auto" === f ? r = v * y : "auto" === a && (y = 1 / v * r);
                r > g && (r = g, "auto" === a && (y = 1 / v * r));
                y > k && (y = k, "auto" === f && (r = v * y));
                r < p && (r = p, "auto" === a && (y = 1 / v * r));
                y < c && (y = c, "auto" === f && (r = v * y));
                "none" === h ? v = 1 : (f = r / y < v, v = d && f || !d && !f ? y / m : r / e);
                return {
                    crop: h,
                    croparea: b,
                    width: r,
                    height: y,
                    ratio: v
                }
            }
        }
    };
    var q = {
        "[object HTMLImageElement]": !0,
        "[object HTMLCanvasElement]": !0,
        "[object Canvas]": !0
    };
    if ("object" === typeof module && module.exports) {
        var l = require("canvas");
        module.exports.util = module.exports.util || {};
        module.exports.util.thumbnailer =
            f.thumbnailer
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.UI = function(g) {
        function f(a) {
            var b = g.doc,
                c = l();
            if (c) {
                x.empty(c);
                if (p.pane.header)
                    if ("select" === b.tool.type) t.appendHeader(c, {
                        title: m.translate("select"),
                        right: {
                            icon: "icon-contextmenu",
                            onclick: function(a, b) {
                                t.contextMenu.show({
                                    menu: "select",
                                    at: {
                                        element: b.target,
                                        align: "top left to bottom center"
                                    }
                                })
                            }
                        }
                    });
                    else {
                        var e = a.replace("gl_", "");
                        t.appendHeader(c, {
                            title: m.translate(e)
                        })
                    }
                x.append(c, '<div class="sk-pane-content"></div>');
                if (c = d()) t.ranges = {}, b.selection.item ?
                    k(C(b.selection.item)) : window.glfx && window.glfx.config[a] ? k(glfx.config[a]) : k(b.toolkitConfig[a]), g.detect.useNoConfigure[a] && ("select" === a ? (x.append(c, '\t\t\t\t\t\t\t<div class="sk-content-info">\t\t\t\t\t\t\t\t<span class="sk-selection-count"></span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t'), b.scene && b.scene.updateSelectionInfo()) : x.append(c, '\t\t\t\t\t\t\t<div class="sk-content-info">\t\t\t\t\t\t\t\t' + m.translate(a + "-tool-message") + "\t\t\t\t\t\t\t</div>\t\t\t\t\t\t"))
            }
        }

        function k(a, b) {
            b = b || d();
            for (var e in a) {
                var h =
                    a[e];
                if (h && h.type && !h.hidden) switch (h.type) {
                    case "input":
                    case "number":
                        t.appendInput(b, h);
                        break;
                    case "button":
                        t.appendLineBreak(b);
                        t.appendButton(b, h);
                        break;
                    case "checkbox":
                        t.appendCheckbox(b, h);
                        break;
                    case "clamp":
                        h.onchange = c(a, h);
                        t.appendRange(b, h);
                        break;
                    case "html":
                        t.appendHTML(b, a, h);
                        break;
                    case "palette":
                        if (1 === p.palette.version) g.palette.append(b, a);
                        else
                            for (var m in v.methods) a[m] && !a[m].hidden && g.palette.createTrigger({
                                container: b,
                                configure: a,
                                paint: a[m],
                                label: m,
                                title: m
                            });
                        break;
                    case "select":
                        if ("blend" ===
                            h.label && (h.selected = v.getCompositeReadable(h.selected), !1 === r.gco.__blend || !1 === p.style.blend)) break;
                        t.appendSelect(b, h);
                        break;
                    case "textarea":
                        t.appendInput(b, h);
                        break;
                    case "filePicker":
                        t.appendFilePicker(b, h);
                        break;
                    case "resource":
                        t.appendResource(b, h);
                        break;
                    case "subtool":
                        t.createSubtool(b, h, a.type);
                        break;
                    case "filter":
                        t.appendFilterStack(b, h)
                }
            }
        }

        function l() {
            return x.$("#sk-configure")
        }

        function d() {
            return x.$("#sk-configure .sk-pane-content")
        }

        function e(a, b, c) {
            var d = c.label;
            c = t[a](c);
            return "Checkbox" ===
                a ? t.appendLabel(b, c.element, d) : t.appendLabel(b, c, d)
        }

        function c(a, b) {
            return function(c, d) {
                var e = g.doc,
                    h = "end" === c.state;
                if ("update" !== c.state) {
                    var m = e.selection.items,
                        f = E.isEmpty(m) && !h;
                    if (!f || void 0 === m)
                        if (m = b.param, f = e.toolkit.setConfigProperty(a, m, c.values)) f.getValue && (f = f.getValue()), e.setConfig({
                            cache: c,
                            type: a.type,
                            param: m,
                            value: f
                        }), h && e.saveSettings()
                }
            }
        }

        function h(a, b) {
            g.sidebar.open && (g.sidebar.opened ? t.setPane("configure", {
                force: !0
            }) : g.sidebar.open())
        }

        function b(a, b) {
            var c = g.doc;
            eventjs.prevent(a);
            var d = b.target,
                e = t.domParseSkTool(d),
                h = e.type;
            e.type && e.shortcut && (c.toolkit.getConfig(e.type) || c.toolkit.clone(e.type, e.shortcut));
            if (c.toolkit.exists(e.type)) {
                if (e.type && (e.fill || e.stroke)) {
                    var m = c.toolkit.getConfig(e.type);
                    g.style.copyStyles(e, m)
                }
                t.setFilterStack(e);
                w();
                g.exec(h, function() {
                    if (e.composite)
                        for (var a = e.composite.split(","), b = 0; b < a.length; b++) {
                            var h = a[b];
                            if (r.gco[h]) {
                                c.setComposite(h);
                                break
                            }
                        }
                    t.domSelectTool(d);
                    t.setPane("configure", {
                        force: !0
                    })
                })
            } else g.exec(h)
        }

        function a(a, c) {
            var d =
                g.doc;
            c = c || ".sk-toolset";
            E.each(x.$$(c + " img"), function(b) {
                eventjs[a](b, "mousedown", function() {
                    return !1
                })
            });
            E.each(x.$$(c + " .sk-tool"), function(c) {
                var e = t.domParseSkTool(c).type;
                if (e) {
                    E.each(x.$$(".sk-arrow", c), function(d) {
                        var h, f;
                        g.detect.brush[e] ? (h = "brush", f = "choose-brush") : g.detect.shape[e] ? (h = "shape", f = "choose-shape") : g.detect.utility[e] ? (h = "utility", f = "choose-utility") : g.detect.media[e] && (h = "media", f = "choose-media");
                        eventjs[a](d, "mousedown", function(a) {
                            eventjs.cancel(a);
                            b(a, {
                                target: c
                            });
                            t.contextMenu.show({
                                at: {
                                    element: c,
                                    align: "top left to bottom left"
                                },
                                menu: h
                            })
                        });
                        t.tooltip && t.tooltip[a](d, m.translate(f))
                    });
                    if (d.toolkit.getToolkitId(e)) eventjs[a](c, "dblclick", h);
                    eventjs[a](c, "click", b);
                    t.tooltip && t.tooltip[a](c, function() {
                        return c.title || c.getAttribute("data-title")
                    })
                }
            })
        }

        function w() {
            t.pageBeforeUnload && (t.pageBeforeUnload(), t.pageBeforeUnload = void 0)
        }

        function u(a, b) {
            b.className && E.each(b.className.split(" "), function(b) {
                a.classList.add(b)
            });
            b.tooltip && t.tooltip && t.tooltip.add(a, function() {
                return "function" === typeof b.tooltip ?
                    b.tooltip.call(b) : b.tooltip
            });
            b.style && (a.style.cssText = b.style);
            b.onblur && eventjs.add(a, "blur", b.onblur);
            b.onfocus && eventjs.add(a, "focus", b.onfocus);
            b.container && x.append(b.container, a)
        }
        var x = g.dom,
            p = g.feature || {},
            m = g.lang,
            v = g.style,
            r = g.agent,
            y = g.util.string,
            t = g.ui,
            E = g.util,
            z = g.ui.vars;
        (function() {
            t.media = {};
            t.media.clear = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=";
            t.media.get = function(a) {
                var b = t.media[a];
                return b ? b : t.media[a] =
                    g.gen.interlace({
                        id: a
                    })
            }
        })();
        t.refresh = function(a) {
            t.setToolMenu(a, !1);
            f(a)
        };
        t.configurePane = function() {
            function a(c, d) {
                var e = g.doc;
                d = !!d;
                var h = e.toolkit.getConfigFallback(c);
                if (c = c || h.type) {
                    var m = d,
                        r = l();
                    if (null === r ? 0 : 0 === r.offsetWidth ? m : 1)
                        if ((m = d) || (m = l(), r = g.doc, h = void 0 !== h.id ? r.scene.createHash(h, {
                                seed: !0,
                                bbox: !0
                            }) : h.type, h === m.getAttribute("sk-hash") ? m = !1 : (m.setAttribute("sk-hash", h), m = !0)), m) {
                            if ("image" !== c || p.canvas.useGLFX || (c = "clipart"), f(c), !e.scene || !e.scene.children) {
                                var v = x.$("#sk-configure .sk-configure-header");
                                v && (e = y.ucwords(c.replace("gl_", "").replace(/([A-Z])/g, " $1")), v.innerHTML = "<span>" + e + "</span>")
                            }
                        } else a: {
                            if (e = c, h = g.doc, (m = h.scene) && m.children) {
                                var k = I.getSubId(),
                                    k = (r = h.selection.item) ? r[k] : {},
                                    u, q;
                                for (v in t.ranges) {
                                    u = t.ranges[v];
                                    if (!u) {
                                        p.debug && console.debug("disabled", v);
                                        break a
                                    }
                                    q = void 0;
                                    r && ("configure:" === I.pageId ? q = r[v] : k && (q = k[v]));
                                    void 0 === q && (q = m.copyDeepCompress(h.toolkitConfig[e][v]));
                                    if (void 0 !== q) {
                                        q = void 0 !== q.max ? [q.min, q.max] : void 0 !== q.value ? q.value : q;
                                        var w = u.thumbs;
                                        2 === w.length ?
                                            (w[0].value !== q[0] && (w[0].value = q[0], u.update(0, "update")), w[1].value !== q[1] && (w[1].value = q[1], u.update(1, "update"))) : 1 === w.length && (q = q[0] || q, w[0].value !== q && (w[0].value = q, u.update(0, "update")))
                                    }
                                }
                            }
                        }
                        else if (g.sidebar.on) g.sidebar.on("open", b)
                }
            }

            function b() {
                g.sidebar.off("open", b);
                a()
            }
            return a
        }();
        var C = function() {
            var a = E.arrayToObject("reset filePicker subtool resource palette toolkit".split(" "));
            return function(b) {
                var c = g.doc,
                    d = b.type,
                    e = c.toolkitConfig[d];
                if ((c = c.toolkit.getToolkit(d)) && c.attributes) {
                    var c =
                        c.attributes,
                        d = {},
                        h;
                    for (h in e) {
                        var m = e[h];
                        if (a[h] || m && "html" === m.type) d[h] = m;
                        else switch (c[h]) {
                            case "string":
                                m instanceof z.Select ? (d[h] = m, d[h].setValue(b[h])) : d[h] = b[h];
                                break;
                            case "style":
                                m && (d[h] = new v.create(b[h], h));
                                break;
                            case "clamp":
                            case "number":
                            case "object":
                                m && m.clone && (d[h] = m.clone(b[h]))
                        }
                    }
                    b.filter && (d.filter = new z.FilterStack({
                        filter: b.filter
                    }), delete d.palette);
                    return d
                }
                console.warn("undefined toolkit", b);
                return e
            }
        }();
        t.appendFilePicker = function(a, b) {
            var c = x.create("div");
            c.className =
                "sk-file-picker";
            c.textContent = m.translate("load-your-own-image");
            a.appendChild(c);
            g.uploader.addFileInput({
                target: c,
                onchange: function(a, c) {
                    if (b.onchange) b.onchange(a, c);
                    else g.uploader.onChangeDefault(a, c)
                }
            })
        };
        t.appendButton = function(a, b) {
            b = t.ensureInstanceOf(b, z.Button);
            var c = t.createElement("div", b);
            c.innerHTML = m.translate(b.title);
            c.classList.add("button");
            t.on("click", c, b.onclick);
            a.appendChild(c);
            return c
        };
        t.createSubtool = function(a, b, c) {
            function d(a) {
                "utility" === f || "media" === f ? e.setTool(a) :
                    (e.toolkit.setType(a), t.refresh(a))
            }
            var e = g.doc,
                h = x.create('<div class="sk-subtools"></div>');
            a.appendChild(h);
            var f = e.toolkit.getToolGroup(c),
                r = t.icons[f];
            if (r)
                if ("list" === p.ui.listTool) {
                    a = 0;
                    for (var v in r.children) b = x.create('<div class="sk-subtool"></div>'), x.setClass(b, r.children[v]), v === c && x.setClass(b, "selected"), h.appendChild(b), 0 === ++a % 5 && (b.style.borderRight = "none"),
                        function(a, b) {
                            t.tooltip && t.tooltip.add(a, b);
                            t.on("click", a, function() {
                                d(b)
                            })
                        }(b, v)
                } else {
                    h = {};
                    for (v in r.children) h[v] = '<span class="' +
                        r.children[v] + ' sk-icon"></span> ' + m.translate(v);
                    c = new t.SelectMenu({
                        id: "subtool",
                        className: "selectmenu-holder",
                        container: a,
                        selected: c,
                        options: h,
                        onchange: function(a) {
                            d(a)
                        }
                    });
                    t.appendLabel(a, c.container, b.title)
                }
        };
        t.appendCheckbox = function(a, b) {
            return e("Checkbox", a, b)
        };
        t.appendInput = function(a, b) {
            return e("Input", a, b)
        };
        t.appendTextarea = function(a, b) {
            b.type = "textarea";
            return e("Textarea", a, b)
        };
        t.appendHTML = function(a, b, c) {
            var d;
            c.innerHTML ? d = x.create(c.innerHTML) : c.construct && (d = c.construct(b));
            d &&
                (u(d, c), a.appendChild(d));
            return d
        };
        t.appendLabel = function(a, b, c) {
            c = t.createLabel(c);
            c.appendChild(b);
            a.appendChild(c);
            return c
        };
        t.createLabel = function(a) {
            var b = x.create("label");
            b.className = "sk-label";
            var c = x.create("span");
            c.className = "sk-title";
            c.innerHTML = m.translate(a);
            b.appendChild(c);
            return b
        };
        t.ensureInstanceOf = function(a, b) {
            return a instanceof b ? a : new b(a)
        };
        t.appendSelect = function(a, b) {
            var c = g.doc;
            b = t.ensureInstanceOf(b, z.Select);
            var d = new t.SelectMenu({
                id: b.param,
                className: "selectmenu-holder",
                container: a,
                labelIcon: b.labelIcon,
                options: b.getOptions(),
                selected: b.selected,
                tooltip: b.title,
                onopen: b.onopen,
                onclose: b.onclose,
                onchange: function(a) {
                    b.onchange(b.param, a);
                    c.saveSettings()
                }
            });
            t.appendLabel(a, d.container, b.label);
            return d
        };
        t.appendResource = function(a, b) {
            var c = b.format;
            t.appendLineBreak(a);
            A(a, b, c)
        };
        t.appendLineBreak = function(a) {
            return x.append(a, '<div class="sk-break"></div>')
        };
        t.ranges = {};
        t.appendRange = function(a, b) {
            b = t.ensureInstanceOf(b, z.Range);
            var c = b.onchange,
                d = b.asArray(),
                e = b.param,
                h = b.clamp;
            "spacing" === e && (d = [d[0]]);
            t.appendLineBreak(a);
            var f = x.create("div");
            f.className = "sk-slider";
            a.appendChild(f);
            var p = x.create("span");
            p.className = "sk-title";
            p.innerHTML = m.translate(e);
            p.setAttribute("data-cmd", e);
            f.appendChild(p);
            eventjs.add([f, p, a], "touchdown", eventjs.cancel, {
                strict: !0
            });
            p = x.create("span");
            p.className = "values";
            f.appendChild(p);
            for (var g = [], r = 0; r < d.length; r++) g.push(t.Input({
                type: "_number_",
                format: b.format,
                className: "value" + r,
                container: p,
                min: h.min,
                max: h.max,
                value: d[r],
                onchangeend: function(a) {
                    var b =
                        parseInt(this.className.substr(5)),
                        c = v.thumbs[b];
                    c.value !== a && (c.value = a, v.update(b, "end"))
                }
            })), isFinite(d[r + 1]) && x.append(p, "<small>&ndash;</small>");
            var v = new t.Range({
                _param_: e,
                parent: f,
                className: "sk-range",
                value: d.toString(),
                min: h.min,
                max: h.max,
                format: b.format,
                gradient: b.gradient,
                canCross: b.canCross,
                canPush: b.canPush,
                onchange: function(a, b) {
                    if (a.event) {
                        var d = g[b.index];
                        d && d.$setValue(b.value)
                    }
                    c && c(a, b)
                }
            });
            return t.ranges[e] = v
        };
        t.setToolMenu = function() {
            return function(a, b) {
                var c = g.doc;
                a = a || c.tool.type;
                var d = c.toolkit.getToolGroup(a);
                if ((c = x.$("[data-tool=" + a + "]") || x.$("[data-toolkit=" + d + "]")) && c.parentNode) {
                    if ((d = t.icons[d]) && d.children && (d = d.children[a.replace("_", " ")], !0 !== d))
                        if (c.setAttribute("data-tool", a), c.setAttribute("data-title", m.translate(a)), d.startsWith("icon-")) {
                            var e = x.$("img", c);
                            e && (e.src = t.media.get("clear"));
                            if (e = x.$(".sk-icon", c) || c) {
                                for (var e = e.classList, h = 0; h < e.length; h++) {
                                    var f = e[h];
                                    f.startsWith("icon-") && e.remove(f)
                                }
                                e.add(d)
                            }
                        } else e = x.$("img", c), e.src = d;
                        !1 !== b && t.domSelectTool(c)
                }
            }
        }();
        (function() {
            function a(b) {
                eventjs.cancel(b);
                (b = document.activeElement) && b.blur && b.blur()
            }
            t.on = function(b, c, d) {
                eventjs.add(c, b, d);
                eventjs.add(c, "mousedown", a)
            }
        })();
        t.domSelectTool = function(a) {
            x.setClass({
                name: "selected",
                list: x.$$(".sk-toolset .selected"),
                target: a,
                on: !0
            })
        };
        t.domParseSkTool = function(a) {
            var b = g.doc,
                c = a.getAttribute("data-toolFormula");
            return c ? (a = g.loc.parseQuery(c), b.scene.decompress(a)) : {
                type: a.getAttribute("data-tool")
            }
        };
        t.TSEvents = {};
        t.TSEvents.add = function(b) {
            a("add", b)
        };
        t.TSEvents.remove =
            function(b) {
                a("remove", b)
            };
        t.appendFilterStack = function(a, b) {
            var c = g.doc,
                d = b.value[0][0],
                e = glfx.config["gl_" + d.id];
            if (e) {
                var h = c.selection.item;
                (h = h && h.filter && h.filter[0][0]) && (d = h);
                c.render.getGLFX().activeFilter = d;
                k(e)
            }
        };
        t.createFilterStack = function(a) {
            var b = x.create("div");
            E.each(a.value[0], function(a, c) {
                var d = a.id,
                    e = glfx.config["gl_" + d];
                if (e) {
                    var h = x.append(b, "div");
                    h.className = "sk-stack";
                    var m = x.append(h, "div");
                    m.className = "sk-stack-header";
                    eventjs.add(m, "dblclick", function() {
                        h.classList.toggle("opened")
                    });
                    var f = x.append(m, "span");
                    f.className = "sk-stack-title";
                    f.textContent = y.spaceCamelCase(d);
                    d = x.append(m, "span");
                    d.className = "sk-stack-icon icon-caret-down";
                    t.on("click", d, function(a, b) {
                        h.classList.toggle("opened")
                    });
                    var p = x.append(m, "span");
                    p.className = "sk-stack-icon icon-eye-open";
                    t.on("click", p, function(a, b) {
                        p.classList.toggle("icon-eye-open");
                        p.classList.toggle("icon-eye-close")
                    });
                    m = x.append(m, "span");
                    m.className = "sk-stack-icon icon-contextmenu";
                    t.on("click", m, function(b, d) {
                        t.contextMenu.show({
                            thisArg: {
                                filter: a,
                                filterIdx: c
                            },
                            menu: "filters",
                            at: {
                                element: d.target,
                                align: "top left to bottom left"
                            }
                        })
                    });
                    m = x.append(h, "div");
                    m.className = "sk-stack-content";
                    k(e, m)
                }
            });
            return b
        };
        t.setFilterStackFromQuery = function(a) {
            a = g.doc.scene.decompress(g.loc.parseQuery(a));
            t.setFilterStack(a);
            g.exec(a.type)
        };
        t.setFilterStack = function(a) {
            var b = g.doc,
                c = b.toolkitConfig[a.type];
            if (c)
                if (a.filter) {
                    var d = b.toolkit.getToolkit(c.toolkitId);
                    b.scene.copyProperties(d, a, c);
                    c.filter = a.filter;
                    a.fill && (v.copyStyles(c, v), v.fill.type = "color", g.palette.setPaint(v.fill))
                } else c.filter &&
                    (delete c.filter, delete c.usePixelData, delete c.useBackgroundOverlay)
        };
        var A = function() {
            function a(b) {
                var c = g.doc.toolkit.getConfigFallback(b),
                    d = g.lib[b];
                return "text" === b ? d.byName[c.fontFamily] : d.byPath[(c.src || "").replace(b + "/", "")]
            }

            function b(c) {
                var d = g.lib[c],
                    e;
                for (e in d.tree) break;
                return (c = a(c)) && c.folder || d.defaultCategory || e
            }
            var c = {
                text: "fonts",
                stamp: "stamps",
                clipart: "clipart"
            };
            return function(d, e, h) {
                var m = g.doc;
                d = x.append(d, '<div class="sk-resources"></div>');
                d.classList.add("sk-" + h);
                var f =
                    g.lib[h];
                if (f) {
                    var r;
                    r = t.InfiniteScroll ? "text" === h && "dropmenu" === p.ui.listText ? !1 : !0 : void 0;
                    if (r) {
                        if (p.ui.scrollerCategories) {
                            r = {};
                            for (var v in f.tree) "Your Files" !== v && (r[v] = v);
                            new t.SelectMenu({
                                id: h + "_categories",
                                className: "categories",
                                tooltip: e.title || c[h],
                                container: d,
                                selected: b(h),
                                options: r,
                                onchange: function(a) {
                                    t.scrollers[h].scrollTo(a)
                                }
                            })
                        }
                        new t.InfiniteScroll(g, m, {
                            type: h,
                            target: d,
                            folder: "*"
                        })
                    } else {
                        r = {};
                        for (var k in f.byName) m = f.byName[k], r[k] = '<img src="' + f.getThumbnail(m) + '" height="22" />';
                        m = a(h);
                        k = new t.SelectMenu({
                            container: d,
                            tooltip: "Set Font Family",
                            selected: m && m.name,
                            options: r,
                            onchange: function(a) {
                                g.doc.setFont(a)
                            }
                        });
                        t.appendLabel(d, k.container, e.label)
                    }
                } else console.error("missing media type:", h)
            }
        }();
        t.pageBeforeUnload = void 0;
        t.pageBuildTimeout = void 0;
        t.pageBuildFn = function(a, b) {
            var c = I.pageId;
            c.startsWith("configure:") && 1 !== a || t.setPane(c, {
                force: !0
            })
        };
        var I = t.pages = t.pages || {};
        I.pageId = "configure";
        I.getPageId = function() {
            return I.pageId.split(":").shift()
        };
        I.getSubId = function() {
            return I.pageId.split(":").pop()
        };
        I.restore = function() {
            E.cookie.get("pages.pageId", function(a) {
                t.setPane(a || "configure", {
                    force: !0
                })
            })
        };
        I.register = function(a, b) {
            I[a] = b
        };
        I.register("configure", function(a) {
            t.configurePane(null, a.force)
        });
        I.register("layers", function(a) {
            var b = g.doc;
            a = a || {};
            a = a.delay;
            "layers" === I.getPageId() && (clearTimeout(t.pageBuildTimeout), t.pageBuildTimeout = setTimeout(function() {
                var a = g.perf();
                t.treeLayers.setData(b.scene.children);
                t.treeLayers.render();
                p.debug && console.debug("rebuildLayers", a())
            }, a || 100))
        });
        I.register("history",
            function(a) {
                var b = g.doc;
                a = a || {};
                a = a.delay;
                "history" === I.getPageId() && (clearTimeout(t.pageBuildTimeout), t.pageBuildTimeout = setTimeout(function() {
                    var a = g.perf();
                    t.treeHistory.setData(b.history.vector.data);
                    t.treeHistory.render();
                    p.debug && console.debug("rebuildHistory", a())
                }, a || 100))
            });
        t.setPane = function(a, b) {
            function c() {
                I[e] && (b.delay = !0, b.subpage = h, I[e](b))
            }
            b = b || {};
            var d = !!b.force;
            if (I.pageId !== a || d) {
                w();
                var d = a.split(":"),
                    e = d[0] || "",
                    h = d[1] || "";
                a = e + ":" + h;
                var f = ".icon-" + e.split("-").shift(),
                    d = x.$$(".sk-sidebar > .tabs span.selected");
                (f = x.$(".sk-sidebar " + f)) && x.setClass({
                    target: f,
                    list: d,
                    name: "selected",
                    on: !0
                });
                (f = x.$("#sk-" + e)) ? (x.setClass({
                    target: f,
                    list: ".sk-pane",
                    name: "selected"
                }), I.pageId = a, c(), E.cookie.set("pages.pageId", I.pageId), E.each(x.$$(".sk-translate"), function(a) {
                    a.innerHTML = m.translate(a.innerHTML)
                })) : c()
            }
        };
        t.UISidebarTabs = function() {
            function a(b, e, h) {
                var m = x.append(d, '<span class="sk-' + b + " icon-" + b + '"></span>');
                t.tooltip && t.tooltip.add(m, e || b);
                t.on("click", m, h || function() {
                    "configure" === b && c.setAttribute("sk-hash",
                        "");
                    t.setPane(b)
                })
            }
            var b = g.doc,
                c = l(),
                d = x.$(".sk-sidebar > .tabs");
            p.pane.configure && a("configure", "tool");
            p.pane.layers && (a("layers"), b.on("deselect", function(a) {
                "layers" === I.getPageId() && t.treeLayers.deselect(a)
            }), b.on("select", function(a) {
                "layers" === I.getPageId() && t.treeLayers.select(a)
            }));
            p.pane.history && a("history");
            p.pane.open && a("settings", "settings");
            p.pane.save && a("helpdesk", "helpdesk", function() {
                g.exec("about")
            });
            if (g.module.TreeMenu) {
                var e = g.module.TreeMenu;
                t.treeLayers = new e(g, b, "#sk-layers .sk-pane-content",
                    b.scene.children);
                t.treeHistory = new e(g, b, "#sk-history .sk-pane-content", b.history.vector.data)
            }
            b.on("historyPop", I.history);
            b.on("objectTransform", I.history);
            b.on("reset", I.history);
            g.on("open", t.pageBuildFn);
            b.on("undo", t.pageBuildFn);
            b.on("redo", t.pageBuildFn);
            b.on("cut", t.pageBuildFn);
            b.on("paste", t.pageBuildFn);
            b.on("sendForwards", t.pageBuildFn);
            b.on("sendBackwards", t.pageBuildFn);
            b.on("objectRemove", t.pageBuildFn);
            b.on("objectAdd", t.pageBuildFn)
        };
        t.scrollable = function(a, b) {
            p.preventScroll &&
                r.mobile && eventjs.add(a, "drag", function(c, d) {
                    b || eventjs.stop(c);
                    var e = a.scrollTop,
                        h = d.ly - d.y;
                    d.lx = d.x;
                    d.ly = d.y;
                    "touchmove" === c.type && (0 >= h && 0 >= e ? eventjs.prevent(c) : 0 <= h && e + a.offsetHeight >= a.scrollHeight && eventjs.prevent(c))
                }, {
                    strict: !0
                })
        };
        t.appendHeader = function(a, b) {
            function c(a, b) {
                a && t.Button({
                    container: p,
                    tooltip: a.tooltip,
                    class: "sk-href sk-" + b + " " + a.icon,
                    onclick: a.onclick
                })
            }
            "string" === typeof b && (b = {
                title: b
            });
            var d = b.left,
                e = b.right,
                h = b.title,
                f = b.icon,
                p = x.append(a, '<div class="sk-row-head"></div>');
            x.appendText(p, m.translate(h));
            c(d, "left");
            c(e, "right");
            b.icon && x.append(p, '<span class="' + f + ' icon"></span>')
        };
        t.createFooter = function(a) {
            var b = x.create('<div class="sk-footer"></div>');
            a.className && b.classList.add(a.className);
            a.cancel && t.appendButton(b, a.cancel);
            a.ok && t.appendButton(b, a.ok);
            return b
        };
        t.appendFooter = function(a, b) {
            a.appendChild(t.createFooter(b))
        };
        t.createElement = function(a, b) {
            var c = x.create(a);
            u(c, b);
            c.$setParam = function(a, d) {
                void 0 !== b[a] && (b[a] = d);
                void 0 !== c[a] && (c[a] = d)
            };
            return c
        };
        t.fastclick = function(a) {
            if (r.ios)
                if ("string" === typeof a) {
                    var b = x.$$(a);
                    E.each(b, function(a) {
                        t.fastclick(a)
                    })
                } else eventjs.add(a, "mousedown", eventjs.stop), eventjs.add(a, "click", function(b) {
                    eventjs.cancel(b);
                    switch (a.nodeName) {
                        case "A":
                        case "BUTTON":
                            a.click();
                            break;
                        case "TEXTAREA":
                            a.focus();
                            break;
                        case "INPUT":
                            switch (a.type) {
                                case "submit":
                                    a.click();
                                    break;
                                case "text":
                                    a.focus();
                                    break;
                                case "checkbox":
                                    a.checked = !a.checked;
                                    break;
                                default:
                                    console.log(a.type)
                            }
                            break;
                        default:
                            console.log(a.nodeName)
                    }
                })
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(f, d) {
        d.container && (f.container = d.container);
        d.className && (f.className = d.className);
        d.style && (f.style = d.style);
        d.param && (f.param = d.param);
        d.title && (f.title = d.title);
        d.label && (f.label = d.label);
        d.tooltip && (f.tooltip = d.tooltip);
        d.hidden && (f.hidden = d.hidden);
        d.onfocus && (f.onfocus = d.onfocus);
        d.onblur && (f.onblur = d.onblur);
        d.useGhostLayer && (f.useGhostLayer = !0)
    }
    k.ui || (k.ui = {});
    var f = k.util,
        q = k.ui.vars = {};
    q.Button = function(f) {
        g(this, f = f || {});
        this.type = "button";
        this.onclick = f.onclick
    };
    q.Checkbox = function(k) {
        g(this, k = k || {});
        this.type = "checkbox";
        this.checked = k.checked;
        this.onchange = k.onchange;
        this.setValue = function(d) {
            "boolean" === typeof d && this.checked !== d && (this.checked = d, this.onchange && this.onchange.call(this, d))
        };
        this.getValue = function() {
            return this.checked
        };
        this.clone = function(d) {
            var e = f.copy(k);
            d && (e.checked = d);
            return new q.Checkbox(e)
        }
    };
    q.HTML = function(f) {
        g(this, f = f || {});
        this.type = "html";
        this.innerHTML = f.innerHTML;
        this.construct = f.construct
    };
    q.Input = function(k) {
        function d() {
            return "number" ===
                k.type || "_number_" === k.type
        }
        g(this, k = k || {});
        this.type = k.type || "input";
        this.format = k.format || "float";
        this.value = k.value;
        this.onchange = k.onchange;
        this.onchangeend = k.onchangeend;
        d() && (this.max = k.max || f.INFINITY, this.min = k.min || -f.INFINITY, this.step = k.step || "any");
        this.setValue = function(e) {
            if (d())
                if (isFinite(e = parseFloat(e))) {
                    if (this.max < e || this.min > e) return !1;
                    switch (this.format) {
                        case "int":
                            e = Math.round(e)
                    }
                } else return !1;
            if (this.value !== e) return this.value = e, this.onchange && this.onchange.call(this, e), !0
        };
        this.getValue = function() {
            return this.value
        };
        this.clone = function(d) {
            var c = f.copy(k);
            d && (c.value = d);
            return new q.Input(c)
        }
    };
    q.Range = function(k) {
        var d = this;
        g(d, k = k || {});
        "object" === typeof k.value ? ((d.setValue = function(e) {
            Array.isArray(e) && (e.min = e[0], e.max = e[1]);
            isFinite(e.min) && (d.min = e.min);
            isFinite(e.max) && (d.max = e.max)
        })(k.value), d.getValue = function() {
            return {
                min: d.min,
                max: d.max
            }
        }, d.asArray = function() {
            return [d.min, d.max]
        }) : (d.value = k.value, d.setValue = function(e) {
            Array.isArray(e) && (e = e[0]);
            isFinite(e) &&
                (d.value = e)
        }, d.getValue = function() {
            return d.value
        }, d.asArray = function() {
            return [d.value]
        });
        d.type = "clamp";
        d.format = k.format || "float";
        d.canCross = k.canCross;
        d.canPush = k.canPush;
        d.gradient = k.gradient;
        d.clamp = {};
        d.clamp.min = k.min;
        d.clamp.max = k.max;
        d.onchange = k.onchange;
        d.clone = function(d) {
            var c = f.copy(k);
            d && (c.value = d);
            return new q.Range(c)
        }
    };
    q.Select = function(k) {
        g(this, k = k || {});
        this.type = "select";
        this.labelIcon = k.labelIcon || "";
        this.options = k.options;
        this.selected = k.selected;
        this.onchange = k.onchange;
        this.onclose =
            k.onclose;
        this.onopen = k.onopen;
        this.setValue = function(d) {
            "string" === typeof d && (this.selected = d)
        };
        this.getValue = function() {
            return this.selected
        };
        this.getOptions = function() {
            var d = this.options;
            if ("function" === typeof d) return d();
            if (Array.isArray(d)) {
                for (var e = {}, c = 0; c < d.length; c++) {
                    var h = d[c];
                    e[h] = h
                }
                return e
            }
            return d
        };
        this.clone = function(d) {
            var e = f.copy(k);
            d && (e.selected = d);
            return new q.Select(e)
        }
    };
    q.Textarea = function(k) {
        g(this, k = k || {});
        this.type = "textarea";
        this.value = k.value;
        this.setValue = function(d) {
            "string" ===
            typeof d && (this.value = d)
        };
        this.getValue = function() {
            return this.value
        };
        this.clone = function(d) {
            var e = f.copy(k);
            d && (e.value = d);
            return new q.Textarea(e)
        }
    };
    q.ColorPicker = function(k) {
        g(this, k = k || {});
        this.type = "color";
        this.color = k.color;
        this.setValue = function(d) {
            "string" === typeof d && (this.color = d)
        };
        this.getValue = function() {
            return this.color
        };
        this.clone = function(d) {
            var e = f.copy(k);
            d && (e.color = d);
            return new q.ColorPicker(e)
        }
    };
    q.Palette = function(f) {
        g(this, f || {});
        this.type = "palette"
    };
    q.FilePicker = function(f) {
        g(this,
            f = f || {});
        this.type = "filePicker";
        this.formats = f.formats;
        this.onchange = f.onchange
    };
    q.Resource = function(k) {
        g(this, k = k || {});
        this.type = "resource";
        this.format = k.format;
        this.clone = function(d) {
            d = f.copy(k);
            return new q.Resource(d)
        }
    };
    q.SubTool = function(f) {
        g(this, f || {});
        this.type = "subtool"
    };
    q.FilterStack = function(f) {
        g(this, f = f || {});
        this.type = "filter";
        this.value = f.filter;
        this.setValue = function(d) {
            this.value = d
        };
        this.getValue = function() {
            return this.value
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Alert = function(g) {
        function f() {
            return "undefined" === typeof alertify ? console.warn("alertify undefined") : !0
        }

        function k(b, a) {
            "string" === typeof a && (a = {
                message: a
            });
            a instanceof HTMLElement && (a = {
                message: a
            });
            a = a || {};
            var c = a.callback,
                g = a.message,
                l = a.labels || {
                    ok: "ok",
                    cancel: "cancel"
                };
            if (!0 === !!a.skip) c(!0);
            else if (f()) return c = d.create('<h3 class="alertify-caption"></h3>'), "string" === typeof g ? c.innerHTML = e.translate(g) : "object" === typeof g && d.append(c, g), l.ok = e.translate(l.ok ||
                "ok"), l.cancel = e.translate(l.cancel || "cancel"), l.disregard && (l.disregard = e.translate(l.disregard)), alertify.dialog(b, h.extend(h.copy(a), {
                labels: l,
                message: c
            }))
        }

        function l(b, a, c) {
            if (f()) return "string" === typeof a && (a = e.translate(a)), alertify[b](a, c)
        }
        var d = g.dom,
            e = g.lang,
            c = g.ui,
            h = g.util;
        c.overlay = function a(c) {
            a.id && alertify.hide(a.id);
            c = k("overlay", c);
            return a.id = c
        };
        c.alert = function(a) {
            return k("alert", a)
        };
        c.confirm = function(a) {
            return k("confirm", a)
        };
        c.prompt = function(a) {
            return k("prompt", a)
        };
        c.notify =
            function(a) {
                return k("notify", h.extend({
                    showCover: !0
                }, a))
            };
        c.log = function(a, c) {
            return l("log", a, c)
        };
        c.success = function(a, c) {
            return l("success", a, c)
        };
        c.error = function(a, c) {
            return l("error", a, c)
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.UICursor = function(g, f) {
        var k = g.agent,
            l = g.feature,
            d = g.ui,
            e = g.util,
            c = g.vector,
            h = g.dom.Canvas(),
            b = h.ctx,
            a, w = function(a) {
                return (h.style.cursor = a) === h.style.cursor.split('"').join("")
            },
            u = d.media.get("transparent").css,
            x = w(u + ", auto"),
            p = !k.safari;
        p && (p = w("-webkit-image-set(" + u + " 2x), auto"));
        var m = {
                n: 360,
                ne: 45,
                e: 90,
                se: 135,
                s: 180,
                sw: 225,
                w: 270,
                nw: 315
            },
            v = {
                ns: 360,
                nesw: 45,
                ew: 90,
                nwse: 135
            },
            r = Object.keys(m),
            y = Object.keys(v),
            t = {};
        c.SVGPath && (t.resize = c.SVGPath.toVOBPath("M14.3,8.5 9.7,2.2 5.1,8.5 8.3,8.5 8.3,17.3 11.1,17.3 11.1,8.5z"),
            t.rotate = c.SVGPath.toVOBPath("M16.6,8.5l-1.4-1.4c-2.9-2.9-7.6-2.9-10.5,0L3.3,8.4L1.5,6.6l-0.9,6.3l6.4-1l-1.8-1.8l1.3-1.3c1.9-1.9,5-1.9,6.9,0l1.4,1.4L13,12.1l6.4,1l-1-6.4C18.4,6.7,16.6,8.5,16.6,8.5z"));
        d.setCursor = function(d, g) {
            if (!k.mobile) {
                d = d || "";
                var u, w;
                if (d.indexOf && -1 !== d.indexOf("-")) {
                    var I = d.split(", ")[0].split("-");
                    w = I[0];
                    u = I[1]
                }
                var I = f.contexts.active,
                    B, D;
                m[w] ? (B = m[w], D = r) : v[w] && (B = v[w], D = y);
                if (B && (g = g || f.scene.getFocused())) {
                    var F = g.bbox,
                        G = F.scale;
                    B = F.rotate + c.Degree.flip(B, G.x, G.y);
                    F =
                        Math.round((B + 3600) % 360 / 45);
                    d = d.replace(w, D[F % D.length]);
                    w = d + (B - B % 10 >> 0);
                    a !== w && (a = w, x && t[u] && l.ui.cursorDynamic && (w = p && k.pixelRatio || 1, D = (h.width = h.height = 20 * w) / 2, b.translate(D, D), b.rotate(B * e.DEG_RAD), b.translate(-D, -D), b.scale(w, w), c.Shape.VOBPath(b, t[u]), b.shadowBlur = 3, b.shadowOffsetX = 0, b.shadowOffsetY = 1, b.shadowColor = "#000", b.lineWidth = 2, b.strokeStyle = "#fff", b.stroke(), b.shadowBlur = null, b.fillStyle = "#000", b.fill(), u = h.toDataURL(), d = p && 2 === w ? "-webkit-image-set(url(" + u + ") 2x) 10 10, " + d : "url(" +
                        u + ") 10 10, " + d), I.style.cursor = d)
                } else d || (u = f.tool, w = l.ui.cursorDefs, d = w[u.type] ? w[u.type] : ""), a !== d && (a = d, I.style.cursor = d)
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Keyboard = function(g) {
        function f(d) {
            function f(a, b) {
                !1 !== b && eventjs.cancel(a);
                p.scene.setDirtyControl(p.scene.selection.items)
            }
            var p = g.doc,
                m = p.keyboard.emit,
                v = p.__editing || w.isEditingText();
            eventjs.keyTracker(d);
            var r = d.keyCode,
                k = eventjs.keys[r],
                t = eventjs.altKey,
                q = eventjs.metaKey,
                z = eventjs.shiftKey;
            switch (r) {
                case 75:
                    if (q && z && e.nodewebkit) {
                        var C = require("nw.gui").Window.get();
                        C.isKioskMode ? require("nw.gui").App.quit() : C.enterKioskMode()
                    }
                    break;
                case 219:
                    if (q) {
                        t ?
                            g.exec("object-to-back") : g.exec("object-backwards");
                        f(d);
                        return
                    }
                    break;
                case 221:
                    if (q) {
                        t ? g.exec("object-to-front") : g.exec("object-forwards");
                        f(d);
                        return
                    }
                    break;
                case 80:
                    if (q) {
                        g.print();
                        f(d);
                        return
                    }
                    break;
                case 83:
                    if (q) {
                        t ? g.download.image() : z && p.toolkit.screenshot ? g.exec("screenshot") : g.save.fromQuery();
                        f(d);
                        return
                    }
                    break;
                case 27:
                    if (m("escapeKey", d, "escape")) return;
                    g.windows.hasFocus && g.windows.hasFocus() ? g.windows.hideFocused() : (p.scene.deselectAll(), p.render.dirty = !0, p.render.dirtyControls = !0);
                    f(d);
                    return
            }
            if (!v &&
                "eyeDropper" !== a.colorPicker.state && (C = b.lcfirst(eventjs.getKeyID(d)), !m(C + "Key", d, C))) {
                switch (r) {
                    case 48:
                        if (z && h.zoom) {
                            if (v && !q) break;
                            g.exec("zoom-reset");
                            f(d);
                            return
                        }
                        break;
                    case 173:
                    case 189:
                        if (z && h.zoom) {
                            if (v && !q) break;
                            g.exec("zoom-out");
                            f(d);
                            return
                        }
                        break;
                    case 61:
                    case 187:
                        if (z && h.zoom) {
                            if (v && !q) break;
                            g.exec("zoom-in");
                            f(d);
                            return
                        }
                        break;
                    case 188:
                        if (l("configure")) {
                            f(d);
                            return
                        }
                        break;
                    case 68:
                        if (l("download")) {
                            f(d);
                            return
                        }
                        break;
                    case 78:
                        if (l("document-new")) {
                            f(d);
                            return
                        }
                        break;
                    case 79:
                        if (q && e.chooseEntry) {
                            g.open.chooseEntry({
                                onsuccess: function(a) {
                                    p.addMedia({
                                        openAsNew: !0,
                                        data: a
                                    })
                                }
                            });
                            f(d);
                            return
                        }
                        if (l("document-open")) {
                            f(d);
                            return
                        }
                        break;
                    case 80:
                        if (l("print")) {
                            f(d);
                            return
                        }
                        break;
                    case 83:
                        if (l("share")) {
                            f(d);
                            return
                        }
                        break;
                    case 32:
                        p.orient && (d.preventDefault(), "zoom" !== p.tool.type && (g.ptool = p.tool.type, p.toolkit.setTool("zoom")));
                        return;
                    case 49:
                    case 50:
                    case 51:
                    case 52:
                    case 53:
                    case 54:
                    case 55:
                    case 56:
                    case 57:
                        if (h.hotkeys) switch (d = h.hotkeys[r - 49], d) {
                            case "brush":
                            case "shape":
                                if ((m = c.$(".sketch-select-" + d)) && m.id) return g.exec(m.id.replace("tool-", ""));
                            default:
                                return g.exec(d)
                        }
                        return;
                    case 191:
                        if (z) return g.exec("help");
                        return;
                    case 46:
                    case 8:
                        eventjs.cancel(d);
                        g.exec("object-delete");
                        return;
                    case 13:
                        document.activeElement === document.body && eventjs.cancel(d);
                        c.$("#alertify-ok") && c.$("#alertify-ok").click();
                        return;
                    case 18:
                        if (h.ui.quickSelect && p.toolkit.select) {
                            if (q) break;
                            h.doc.editable && p.tool !== p.toolkit.select && (g.ptool = p.tool.type, g.exec("select"))
                        }
                        return;
                    case 65:
                        q && (eventjs.cancel(d), z ? g.exec("select-inverse") : g.exec("select-all"));
                        return;
                    case 67:
                        z ? g.exec("color-picker") : q && (eventjs.cancel(d),
                            g.exec("object-copy"));
                        return;
                    case 73:
                        g.exec("debug-action");
                        return;
                    case 86:
                        q && !p.__rendering && (eventjs.cancel(d), g.exec("object-paste", "select" !== p.tool.type));
                        return;
                    case 88:
                        q && (eventjs.cancel(d), g.exec("object-cut"));
                        return;
                    case 90:
                        if (q && (eventjs.cancel(d), !p.__rendering))
                            if (z)
                                if (m("redo", d, "redo")) break;
                                else g.exec("redo");
                        else if (m("undo", d, "undo")) break;
                        else g.exec("undo");
                        return;
                    case 37:
                        if (p.selection.length) {
                            eventjs.altKey ? g.exec("object-clone-left", 1, k) : g.exec("object-move-left", 1, k);
                            eventjs.cancel(d);
                            break
                        } else z && g.sidebar && g.sidebar.close && g.sidebar.close();
                        break;
                    case 39:
                        if (p.selection.length) {
                            eventjs.altKey ? g.exec("object-clone-right", 1, k) : g.exec("object-move-right", 1, k);
                            eventjs.cancel(d);
                            break
                        } else z && g.sidebar && g.sidebar.open && g.sidebar.open();
                        break;
                    case 38:
                        t && p.pages && p.pages.length ? (p.setPage(-1, "useRelative"), eventjs.cancel(d)) : p.selection.length && (eventjs.altKey ? g.exec("object-clone-up", 1, k) : g.exec("object-move-up", 1, k), eventjs.cancel(d));
                        break;
                    case 40:
                        t && p.pages && p.pages.length ? (p.setPage(1,
                            "useRelative"), eventjs.cancel(d)) : p.selection.length && (eventjs.altKey ? g.exec("object-clone-down", 1, k) : g.exec("object-move-down", 1, k), eventjs.cancel(d));
                        break;
                    default:
                        return
                }
                f(d, !1)
            }
        }

        function k(a) {
            var c = g.doc,
                d = c.keyboard.emit;
            eventjs.keyTracker(a);
            if (!g.util.isEditingText()) {
                eventjs.metaKey && g.ptool && (c.scene.deselectAll(), g.exec(g.ptool), delete g.ptool);
                var e = b.lcfirst(eventjs.getKeyID(a));
                if (!d(e + "Key", a, e)) switch (a.keyCode) {
                    case 18:
                        h.ui.quickSelect && c.toolkit.select && g.ptool && h.doc.editable && (g.exec(g.ptool),
                            delete g.ptool);
                        break;
                    case 32:
                        c.orient && g.exec(g.ptool);
                        break;
                    case 37:
                    case 38:
                    case 39:
                    case 40:
                        eventjs.altKey ? g.exec("object-clone-end", 0, "end") : g.exec("object-move-end", 0, "end")
                }
            }
        }

        function l(b) {
            if (eventjs.shiftKey && g.fs.supported && a.setPane) return g.sidebar && g.sidebar.open && g.sidebar.open(), a.setPane(b), !0
        }
        var d = this,
            e = g.agent,
            c = g.dom,
            h = g.feature,
            b = g.util.string,
            a = g.ui,
            w = g.util;
        d.listen = function(a, b) {
            h.doc.interactable && (b.keydown = eventjs.add(a.targetListenable, "keydown", f), b.keyup = eventjs.add(a.targetListenable,
                "keyup", k))
        };
        (function() {
            var a = {};
            d.enable = function(b) {
                g.module.Listener(b.keyboard = {});
                if (e.clipboard = !1 === h.doc.interactable ? !1 : !1 === e.clipboard ? !1 : e.safari ? !1 : eventjs.detectEvent("paste", b.targetListenable) ? !!(b.scene && b.scene.paste && b.addMedia) : !1) b.targetEditable !== b.targetListenable && (a.onPasteEditable = eventjs.add(b.targetEditable, "paste", b.scene.onPasteNative)), a.onPaste = eventjs.add(b.targetListenable, "paste", b.scene.onPasteNative)
            };
            d.disable = function() {
                eventjs.bulk(a, "remove")
            }
        })()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.ui = k.ui || {};
    k.ui.Button = function(g) {
        var f = k.dom,
            q = k.lang,
            l = k.ui,
            d = {};
        d.element;
        d.add = function(e) {
            e = e || {};
            var c = e.container,
                h = e.src,
                b = e.symbol,
                a = e.title,
                g = f.create("span");
            g.className = "sk-tool";
            if (a) {
                var k = f.create("span");
                k.className = "sk-tool-title";
                k.innerHTML = q.translate(a || "");
                g.appendChild(k)
            }
            b && (a = f.create("span"), a.className = "sk-icon " + b, g.appendChild(a));
            h && (b = new Image, b.src = h, b.width = 26, g.appendChild(b));
            g.events = {};
            for (var x in e) switch (x) {
                case "src":
                case "symbol":
                case "container":
                    break;
                case "tooltip":
                    l.tooltip &&
                        l.tooltip.add(g, e[x]);
                    break;
                case "title":
                    g.setAttribute("data-title", e[x]);
                    break;
                case "id":
                    g.id = e[x];
                    break;
                case "class":
                    g.className = e[x];
                    break;
                default:
                    x.startsWith("on") ? g.events[x] = eventjs.add(g, x.substr(2), e[x]) : g.setAttribute(x, e[x])
            }
            c.appendChild(g);
            d.element = g
        };
        d.remove = function() {
            var e = d.element;
            e && (f.remove(e), d.element = void 0)
        };
        d.disable = function() {
            var e = d.element;
            e && (e.classList.add("disabled"), eventjs.bulk(e.events, "remove"))
        };
        d.enable = function() {
            var e = d.element;
            e && (e.classList.remove("disabled"),
                eventjs.bulk(e.events, "add"))
        };
        g && d.add(g);
        return d
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.ui = k.ui || {};
    k.ui.Checkbox = function(g) {
        function f(a, b) {
            var c = !!g.checked;
            c && a <= -b ? q(c = !1) : !c && a >= b && q(c = !0);
            return c
        }

        function q(a) {
            a ? x.add("sk-checked") : x.remove("sk-checked")
        }

        function l(a) {
            g.setValue(a);
            q(g.checked)
        }
        var d = k.dom,
            e = k.ui;
        g instanceof e.vars.Checkbox || (g = new e.vars.Checkbox(g));
        var c = g.checked,
            h = g.onchange,
            b = g.param,
            a = e.createElement("div", g),
            w = d.append(a, "div"),
            u = d.append(w, "div"),
            x = a.classList;
        x.add("sk-checkbox");
        eventjs.add(a, "drag", function(a, c) {
            var v = k.doc;
            eventjs.cancel(a);
            var r = c.env;
            if (c.pointerStart) {
                x.add("sk-moving");
                var y = d.measure(u),
                    t = d.measure(w),
                    y = r.width = t.width - y.width,
                    r = r.offset = g.checked ? r.width : 0
            } else y = r.width, r = r.offset;
            var t = Math.min(y, c.x),
                l = f(t, 5);
            c.pointerEnd ? (u.style.left = "", x.remove("sk-moving"), l = f(t, c.pointerMoved ? 5 : 0), l !== g.checked && (g.checked = l, h ? h.call(g, l) : v.setConfig({
                param: b,
                value: l
            }), v.saveSettings(), e.tooltip && e.tooltip.refresh())) : u.style.left = Math.max(0, Math.min(y, t + r)) + "px"
        }, {
            position: "difference"
        });
        q(c);
        return {
            attr: g,
            element: a,
            toggle: function() {
                l(!g.checked)
            },
            setValue: l
        }
    }
})(sketch);
(function(k) {
    function g(c) {
        if ("string" === typeof c) {
            if (e[c]) return e[c];
            if ("select" === c) return l.getSelectMenu()
        } else return c
    }
    var f = k.dom,
        q = k.ui,
        l = q.contextMenu || (q.contextMenu = {}),
        d, e = l.items || (l.items = {}),
        c = void 0;
    l.opened = !1;
    l.add = function(h, b, a) {
        d = d || f.append(document.body, '<div class="contextmenus" style="position: absolute; top: -1px; left: -1px; width: 0; height: 0; overflow: hidden;"></div>');
        e[h] = new q.SelectMenu({
            useHeader: !1,
            useBackdrop: !1 !== a,
            useSelectable: !1,
            useKeyboard: !1,
            id: "sk-menu-" +
                h,
            className: [h, "sk-contextmenu"],
            container: d,
            options: b,
            onopen: function() {
                l.opened = !0
            },
            onclose: function() {
                l.opened = !1;
                c = void 0
            }
        })
    };
    l.listen = function(c, b) {
        eventjs.add(c, "contextmenu", function(a) {
            eventjs.cancel(a);
            l.show({
                menu: b,
                at: {
                    element: c,
                    align: "top left to top right"
                }
            })
        })
    };
    l.id = function() {
        if (c) return c.id.replace("sk-menu-", "")
    };
    l.getSelectMenu = function() {
        var c = k.doc;
        return 1 === c.selection.length ? e.selectSingle : c.selection.length ? e.selectMultiple : e.selectDefault
    };
    l.show = function(d) {
        d = d || {};
        var b =
            g(d.menu);
        b ? c && c.id === b.id || (l.hide(), c = b, requestAnimationFrame(function() {
            b.show(d);
            q.tooltip && q.tooltip.hide()
        })) : console.warn("contextMenu.show", arguments)
    };
    l.hide = function() {
        c && c.hide();
        c = void 0
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.ui = k.ui || {};
    k.ui.Input = k.ui.Textarea = function(g) {
        function f() {
            b && b.call(g, g.value)
        }

        function q(a, b) {
            u ? g.setValue(Math.max(g.min, Math.min(g.max, a))) : g.setValue(a);
            g.value === a ? p.classList.remove("bounds-error") : p.classList.add("bounds-error");
            a = u ? b ? x(g.value) : isFinite(a) ? x(a) : "" : g.value || "";
            "number" === g.type ? p.value = a : e.text.setValue(p, a)
        }

        function l() {
            var a = parseFloat(p.value.replace(/[^.0-9]/g, ""));
            return "%" === g.format && 1 >= g.max ? a / 100 : a
        }

        function d(a, b) {
            console.log("handle", b.wheelDelta)
        }
        var e = k.dom,
            c = k.ui;
        g = c.ensureInstanceOf(g, k.ui.vars.Input);
        var h = g.container,
            b = g.onchangeend,
            a = g.useGhostLayer,
            w = "number" === g.type,
            u = "_number_" === g.type,
            x = function() {
                function a(b) {
                    return 10 <= g.max && 10 <= b ? Math.round(b) : Math.round(10 * b) / 10
                }
                return function(b) {
                    switch (g.format) {
                        case "float":
                            return b;
                        case "degree":
                            return a(b) + String.fromCharCode(176);
                        case "%":
                            return 1 >= g.max ? Math.round(100 * b) + "%" : Math.round(b) + "%";
                        case "px":
                            return a(b) + "px";
                        case "x":
                            return a(b) + "x";
                        case "em":
                            return a(b) + "em";
                        case "int":
                            return Math.round(b);
                        default:
                            return a(b) + g.format
                    }
                }
            }(),
            p;
        "textarea" === g.type ? p = c.createElement("textarea", g) : (p = c.createElement("input", g), p.type = u ? "text" : g.type);
        p.$setValue = q;
        var m;
        a && (m = e.create("div"), m.className = "sk-ghost-backdrop open");
        eventjs.add(p, "focus", function() {
            a && e.append(document.body, m);
            u && eventjs.add(p, "wheel", d)
        });
        eventjs.add(p, "blur", function() {
            a && e.remove(m);
            u && eventjs.remove(p, "wheel", d);
            q(g.value, !0);
            f()
        });
        eventjs.add(p, "mousedown", eventjs.stop);
        if (w || u) p.step = g.step, p.min = g.min, p.max = g.max;
        u ? (p.value =
            x(Math.max(g.min, Math.min(g.max, g.value))), eventjs.add(p, "keydown,change", function(a) {
                eventjs.stop(a);
                a = a.keyCode;
                if (38 === a || 40 === a) {
                    if ("number" !== g.type) {
                        var b = "any" === g.step ? "%" === g.format && 1 >= g.max ? .01 : 1 : g.step,
                            c = l();
                        38 === a && (c += b);
                        40 === a && (c -= b);
                        q(c);
                        f()
                    }
                } else 190 !== a && requestAnimationFrame(function() {
                    q(l());
                    f()
                })
            })) : (p.value = g.value, eventjs.add(p, "change", function() {
            q(this.value)
        }));
        h && h.appendChild(p);
        return p
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(f) {
        var g = [];
        if (f) {
            for ("number" === typeof f ? f = [f] : "string" === typeof f && (f = -1 !== f.indexOf(",") ? f.split(",") : f.split(" ")); f.length;) {
                var d = parseFloat(f.shift());
                g.push(d)
            }
            return g
        }
        return []
    }

    function f(f, g) {
        if (isFinite(f)) return f;
        f = parseFloat(f);
        return isNaN(f) ? g : f
    }
    k.ui = k.ui || {};
    k.ui.Range = function(q) {
        function l(a, b) {
            var c = b * (d.max - d.min) + d.min;
            switch (d.format) {
                case "int":
                    a.value = Math.round(c);
                    break;
                default:
                    a.value = c
            }
        }
        var d = this,
            e = q.css,
            c = q.onchange;
        d.target = q.target;
        d.setValue =
            function(a, b) {
                1 === d.thumbs.length && void 0 === b && (b = a, a = 0);
                d.thumbs[a].value = b;
                d.update(a, "set")
            };
        d.target && (d.target.onchange && (c = d.target.onchange), d.target.setValue = d.setValue, q.value = d.target.value, q.min = d.target.getAttribute("min"), q.max = d.target.getAttribute("max"), q.step = d.target.getAttribute("step"));
        d.values = g(q.value, 0);
        d.min = f(q.min, 0);
        d.max = f(q.max, 100);
        d.step = f(q.step, 1);
        d.thumbs = [];
        d.format = q.format;
        !0 === q.canCross ? (d.canCross = !0, d.canPush = !1) : !1 === q.canPush ? (d.canCross = !1, d.canPush = !1) :
            (d.canCross = !1, d.canPush = !0);
        var h = document.createElement("div"),
            b = document.createElement("span");
        b.className = "sk-track";
        h.appendChild(b);
        for (var a = 0, w = d.values.length, b = 0; b < w; b++) {
            var u = document.createElement("div");
            u.className = "sk-thumb";
            h.appendChild(u);
            d.thumbs.push({
                index: b,
                element: u,
                left: 0,
                value: d.values[b]
            })
        }
        if (2 === w) {
            var x = document.createElement("div");
            x.className = "sk-range-span";
            h.appendChild(x);
            var p = document.createElement("div");
            p.className = "sk-range-span";
            p.style.display = "none";
            h.appendChild(p)
        }
        d.element =
            h;
        d.setup = function() {
            q.parent && q.parent.appendChild(h);
            if (!e && (q.css = e = {}, q.className ? (e.slider = "", e.thumb = "") : (e.slider = "background: #000 -webkit-radial-gradient(45px 45px, cover, rgb(0, 0, 0) 0%, rgb(255, 255, 255) 100%); border: 1px solid #000; border-radius: 25px; width: 500px; height: 40px; top: 0; position: relative; z-index: 100", e.thumb = "background: #fff -webkit-radial-gradient(45px 45px, cover, rgb(0, 100, 255) 0%, rgb(255, 255, 255) 100%); border: 2px solid rgba(0,100,255,1); top: -2px; border-radius: 25px; width: 40px; height: 40px; position: absolute;"),
                    k.gen && k.gen.rangeBar && !k.feature.ui.customRangeBar)) {
                var a = k.gen.rangeBar({
                    gradient: q.gradient,
                    barWidth: h.offsetWidth || 204
                });
                e.slider += "\t\t\t\t\tbackground-image: url(" + a.toDataURL() + ");\t\t\t\t\tbackground-size:" + a.style.width + " " + a.style.height + ";"
            }
            h.className = q.className;
            h.style.cssText = e.slider;
            for (a = 0; a < w; a++) d.thumbs[a].element.style.cssText = e.thumb
        };
        d.setAnimate = function(a, b) {
            var c = d.thumbs[a].element,
                h = c.style.left;
            c.style.cssText = e.thumb;
            c.style.left = h
        };
        d.update = function(a, b, f) {
            var g = a ||
                0,
                t = d.thumbs[g],
                k = d.values,
                l = t.element;
            a = h.offsetWidth || 204;
            var u = l.offsetWidth || 10,
                q = u / 2,
                I = "construct" !== b;
            d.event = f;
            d.state = b || "change";
            b = a - u;
            b *= Math.max(0, Math.min(1, (t.value - d.min) / (d.max - d.min)));
            if (d.canPush) {
                f = b + q;
                if (f < t.left)
                    for (u = t.index - 1; - 1 < u; u--) {
                        var B = d.thumbs[u];
                        B.left > f && (B.element.style.cssText = e.thumb, B.element.style.left = b + "px", B.left = f, B.value = t.value, k[u] = t.value, I && c(d, B))
                    } else
                        for (u = t.index + 1; u < w; u++) B = d.thumbs[u], B.left < f && (B.element.style.cssText = e.thumb, B.element.style.left =
                            b + "px", B.left = f, B.value = t.value, k[u] = t.value, I && c(d, B));
                t.left = f
            } else if (d.canCross) t.left = b + q;
            else {
                f = b + q;
                if (f < t.left)
                    for (u = t.index - 1; - 1 < u; u--) {
                        if (B = d.thumbs[u], B.left > f) {
                            b = B.left - q;
                            f = B.left;
                            B.value = t.value;
                            k[u] = t.value;
                            I && c(d, B);
                            break
                        }
                    } else
                        for (u = t.index + 1; u < w; u++)
                            if (B = d.thumbs[u], B.left < f) {
                                b = B.left - q;
                                f = B.left;
                                B.value = t.value;
                                k[u] = t.value;
                                I && c(d, B);
                                break
                            }
                t.left = f
            }
            k[g] = t.value;
            l.style.left = Math.round(b) + "px";
            I && c(d, t);
            2 === w && (g = d.thumbs[0].left, t = d.thumbs[1].left, g <= t ? (x.style.left = Math.min(g, t) +
                "px", x.style.width = Math.abs(g - t) + "px", p.style.display = "none") : (x.style.left = "0px", x.style.width = t + "px", p.style.left = g + "px", p.style.width = a - g + "px", p.style.display = "block"))
        };
        d.wheel = function(a, b) {
            var c = d.thumbs[0],
                e = (c.value - d.min) / (d.max - d.min),
                e = Math.min(1, Math.max(0, e - b.wheelDelta / 5E3));
            l(c, e);
            d.update(0, b.state, a)
        };
        d.mousedown = function(b, c) {
            for (var e = eventjs.getPointInNode(b, h), f = Infinity, p, e = e.x, g = 0; g < w; g++) {
                var k = d.thumbs[g],
                    u = k.left - e,
                    q = Math.abs(u);
                if (0 > u && q <= f || -1 < u && q < f) f = q, p = k
            }
            if (p) {
                var x =
                    p.element,
                    B = p.index;
                x.style.zIndex = ++a;
                eventjs.proxy.drag({
                    event: b,
                    target: h,
                    position: "relative",
                    listener: function(a, b) {
                        d.setAnimate(B, "move" !== b.state);
                        var e = h.offsetWidth || 204,
                            f = x.offsetWidth,
                            e = Math.max(0, Math.min(e - f, b.x - f / 2)) / (e - f);
                        "down" === b.state ? (h.classList.add("active"), x.classList.add("active"), eventjs.blur(), eventjs.cancel(a), f = "start") : "up" === b.state ? (h.classList.remove("active"), x.classList.remove("active"), eventjs.cancel(a), f = "end") : (eventjs.cancel(a), f = "change");
                        l(p, e);
                        d.update(B, f,
                            a);
                        c && c(b)
                    }
                })
            }
        };
        eventjs.add(h, "mousedown", d.mousedown);
        d.target && d.target.parentNode && (d.target.parentNode.insertBefore(h, d.target), d.target.style.display = "none");
        d.setup();
        (function() {
            for (var a = w - 1; - 1 < a; a--) d.update(a, "construct"), d.state = "load"
        })()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = {};
    k.ui = k.ui || {};
    k.ui.SelectMenu = function(f) {
        function q() {
            if (p.selectedElement) {
                var a = eventjs.getBBox(p.selectedElement),
                    b = eventjs.getBBox(N),
                    c = b.height - a.height,
                    a = a.y1 - b.y1;
                0 > a ? N.scrollTop += a - 12 : a > c && (N.scrollTop += a - c + 12)
            }
        }

        function l() {
            var a = N.querySelector(".sk-hovered");
            a && a.classList.remove("sk-hovered")
        }

        function d(a) {
            var b = y.now();
            150 < b - p.lastTimeOpen && a(b)
        }

        function e(a) {
            eventjs.cancel(a);
            d(function(a) {
                p.lastTimeOpen = a;
                p.toggle()
            })
        }

        function c(b) {
            eventjs.prevent(b);
            var c = b.keyCode;
            if (27 === c || 13 === c) eventjs.stop(b), p.hide();
            else if (b = 0, 40 === c && b++, 38 === c && b--, b) {
                var c = b,
                    d = p.selected;
                b = S.length - 1;
                d = S.indexOf(d);
                d = y.clamp(0, b, d + c);
                d = S[d];
                p.setValue(d)
            } else a(c)
        }

        function h() {
            V.blur()
        }

        function b() {
            var a = N.scrollTop,
                b = T.classList;
            b.toggle("active", !(0 >= a));
            b = W.classList;
            a = a + N.offsetHeight >= N.scrollHeight;
            b.toggle("active", !a)
        }

        function a(a) {
            function b(a, c) {
                for (var d = 0; d < a.length && c[d] === a[d]; d++);
                return d
            }
            if (8 === a) V.value = "";
            else {
                var c, d = 0;
                requestAnimationFrame(function() {
                    var a = V.value.toLowerCase();
                    if (void 0 !== a[0]) {
                        clearTimeout(V.timeout);
                        V.timeout = setTimeout(function() {
                            V.value = ""
                        }, 1E3);
                        for (var e in ca) {
                            var h = ca[e],
                                f = h.translation,
                                f = h.nohtml || (h.nohtml = m.strip_html(f));
                            (f = b(f.toLowerCase(), a)) && f > d && (c = h.id, d = f)
                        }
                        c && p.setValue(c)
                    }
                })
            }
        }

        function w() {
            m.empty(N);
            ca = {};
            S = [];
            var a = p.options,
                b;
            if (Array.isArray(a)) b = !0;
            else {
                var c = b = !0,
                    d;
                for (d in a) {
                    var e = a[d];
                    void 0 === e.label && (b = !1);
                    "string" !== typeof e && (c = !1)
                }
                b = b || c
            }
            if (b) u(a);
            else
                for (var h in a) b = a[h], c = m.create("span"), c.innerHTML = v.translate(h),
                    c.className = "optgroup", N.appendChild(c), u(b);
            x()
        }

        function u(a) {
            function b(a) {
                if (a.element) return {
                    label: a.element,
                    translation: a.element.textContent,
                    eventOverride: a.eventOverride
                };
                console.warn("element returned by label handler is missing", arguments);
                return {}
            }

            function c(a, d) {
                switch (typeof a) {
                    case "function":
                        return a = a(d), a instanceof HTMLElement ? {
                            label: a,
                            translation: a.textContent
                        } : b(a);
                    case "object":
                        return b(a);
                    default:
                        return {
                            label: v.translate(a),
                            translation: a.textContent
                        }
                }
            }

            function d(a) {
                function b(a,
                    c) {
                    eventjs.cancel(a);
                    250 < y.now() - p.lastTimeOpen && (p.setValue(e), p.hide(), f && f.apply(H))
                }
                var e = a.id,
                    h = a.label,
                    f = a.onclick,
                    g = a.enabled,
                    r = m.create("li");
                if ("<br>" === h) r.className = "sk-selectmenu-break";
                else {
                    var v = m.create("span");
                    v.className = "sk-selectmenu-item";
                    var k = m.create("span");
                    k.className = "sk-selectmenu-option";
                    a = c(h, k);
                    var h = a.label,
                        t = a.translation;
                    a = a.eventOverride;
                    S.push(e);
                    ca[e] = {
                        id: e,
                        label: h,
                        onclick: f,
                        enabled: g,
                        translation: t,
                        target: v
                    };
                    U ? eventjs.add(v, "mousedown", eventjs.stop) : eventjs.add(v,
                        "mousedown", eventjs.cancel);
                    a || (U ? eventjs.add(v, "click", b) : (eventjs.add(v, "mouseup", b), eventjs.add(v, "mouseover", function(a) {
                        m.setClass({
                            target: this,
                            list: N.querySelectorAll(".sk-selectmenu-item"),
                            name: "sk-hovered"
                        })
                    })));
                    h instanceof HTMLElement ? k.appendChild(h) : k.innerHTML = h;
                    R && e === p.selected && v.classList.add("sk-selected");
                    v.appendChild(k);
                    r.appendChild(v)
                }
                N.appendChild(r)
            }
            Array.isArray(a) ? a.forEach(function(a, b) {
                    a.label ? d({
                        id: a.label,
                        label: a.label,
                        onclick: a.onclick,
                        enabled: a.enabled
                    }) : d({
                        id: a,
                        label: a
                    })
                }) :
                y.each(a, function(a, b) {
                    d({
                        id: b,
                        label: a.label || a,
                        onclick: a.onclick,
                        enabled: a.enabled
                    })
                })
        }

        function x() {
            if (M && void 0 === B) {
                var a = ca[p.selected];
                a && (X.innerHTML = v.translate(a.label))
            }
        }
        if (f) {
            var p = {},
                m = k.dom,
                v = k.lang,
                r = k.agent,
                y = k.util,
                t = k.ui,
                E = f.id,
                z = f.className,
                C = f.selected,
                A = f.options,
                I = m.$(f.container),
                B = f.icon,
                D = f.title,
                F = f.tooltip,
                G = f.style,
                H = f.thisArg,
                J = f.onchange,
                O = f.onopen,
                K = f.onclose,
                L = !1 !== f.useBackdrop,
                M = !1 !== f.useHeader,
                Q = !1 !== f.useKeyboard,
                R = !1 !== f.useSelectable,
                U = !!r.mobile,
                r = m.create("div");
            r.className = "sk-selectmenu-container";
            E && (r.id = E);
            z && m.addClass(r, z);
            D && (r.title = v.translate(D));
            G && (r.style.cssText = G);
            I.appendChild(r);
            var V = m.FocusNode();
            r.appendChild(V);
            if (M) {
                var P = m.create("div");
                P.className = "sk-selectmenu-header";
                var X = m.create("span");
                X.className = "data-header";
                P.appendChild(X);
                B ? 0 === B.indexOf("http") || 0 === B.indexOf(".") ? (I = m.create("img"), I.src = B) : (I = m.create("span"), I.className = B) : (I = m.create("span"), I.className = f.labelIcon || "icon-caret-down");
                P.appendChild(I);
                r.appendChild(P);
                F && t.tooltip && t.tooltip.add(P, function() {
                    return v.translate(p.tooltip)
                })
            }
            var N = m.create("ul");
            N.className = "sk-selectmenu";
            var W = m.create("div");
            W.className = "icon-caret-down arrow-down arrow";
            var T = m.create("div");
            T.className = "icon-caret-up arrow-up arrow";
            var Y = m.create("div");
            Y.className = "sk-selectmenu-backdrop";
            Y.appendChild(N);
            Y.appendChild(W);
            Y.appendChild(T);
            eventjs.add(N, "contextmenu", eventjs.cancel);
            eventjs.add(Y, "contextmenu", eventjs.cancel);
            z && m.addClass(N, z);
            z && m.addClass(Y, z);
            eventjs.add(N,
                "mouseout",
                function(a) {
                    a = eventjs.getPageXY(a);
                    eventjs.elementsFromPoint(a.x, a.y, N).pop() !== N && l()
                });
            p.toggle = function() {
                p.isVisible() ? p.hide() : p.show()
            };
            p.show = function() {
                function a() {
                    var b = L ? Y : N;
                    document.body.appendChild(b);
                    b.style.zIndex = 999999;
                    requestAnimationFrame(function() {
                        b.classList.add("open")
                    })
                }

                function c(a, b, d, e) {
                    N.offsetHeight < N.scrollHeight ? (a.style.display = "block", a.style.height = "12px", a.style.width = b.width + "px", a.style.top = d + "px", a.style.left = b.x1 + "px", N.style[e] = "12px") : (a.style.display =
                        "none", N.style[e] = "")
                }

                function d(a) {
                    (0, eventjs.add)(Y, "mouseup", eventjs.cancel);
                    setTimeout(function() {
                        (0, eventjs.remove)(Y, "mouseup", eventjs.cancel)
                    }, a)
                }
                return function(e) {
                    e = e || {};
                    e.element = e.element || N;
                    if (!1 === p.isVisible()) {
                        clearTimeout(p.hide.timeout);
                        d(300);
                        a();
                        var h = e;
                        N.style.display = "block";
                        N.style.height = "";
                        N.style.width = "";
                        N.style.minWidth = "";
                        var f = m.measure(N);
                        if (h = m.getCoordinateAt(h)) N.style.left = 0 > window.innerWidth - h.x - f.width ? h.x - f.width + "px" : h.x + "px", N.style.top = 0 > window.innerHeight -
                            h.y - f.height ? h.y - f.height + "px" : h.y + "px";
                        else {
                            h = m.measure(P);
                            N.style.top = h.y1 + h.height + "px";
                            N.style.left = h.x1 + h.margin.bottom + "px";
                            var g = f,
                                r = window.innerWidth,
                                v = h.width,
                                k = Math.max(v, g.width),
                                f = g.x1,
                                r = r - g.x2,
                                t = Math.max(f, r);
                            N.style.minWidth = v + "px";
                            r >= k ? N.style.left = h.x1 + h.margin.left + "px" : f >= k ? N.style.left = h.x2 - k - h.margin.left + "px" : (N.style.width = t + "px", N.style.left = f > r ? 0 : h.x1 + "px");
                            v = window.innerHeight;
                            g = g.height;
                            f = h.y1;
                            r = v - h.y2;
                            t = Math.max(f, r);
                            r >= g ? N.style.top = h.y2 + "px" : f >= g ? N.style.top = h.y1 - g + "px" :
                                (N.style.height = t + "px", N.style.top = f > r ? 0 : h.y2 + "px")
                        }!1 === U && (f = m.measure(N), c(T, f, f.y1, "paddingTop"), c(W, f, f.y2 - 12, "paddingBottom"));
                        q();
                        b();
                        V.focus();
                        H = e.thisArg || H;
                        O && O.apply(H)
                    }
                }
            }();
            p.isVisible = function() {
                return !!N.classList.contains("open")
            };
            p.hide = function(a) {
                if (a = g[a || p.id]) a.input.blur(), p.hide.timeout = setTimeout(function() {
                    L ? Y.classList.remove("open") : N.classList.remove("open");
                    p.hide.timeout = setTimeout(function() {
                        N.style.position = "";
                        N.style.left = "";
                        N.style.top = "";
                        N.style.display = "none";
                        l();
                        L ? m.remove(Y) : m.remove(N)
                    }, 250)
                }, 0), K && K.apply(H)
            };
            p.setValue = function(a) {
                a = a.toString();
                if (p.selected !== a) {
                    var b = ca[a];
                    b && (b = b.target, p.selectedElement = b, p.selected = a, R && m.setClass({
                        target: b,
                        list: N.querySelectorAll(".sk-selectmenu-item"),
                        name: "sk-selected"
                    }), q(), x(), J && J.apply(H, [a]))
                }
            };
            t.scrollable(N);
            eventjs.add(V, "focus", function(a) {
                eventjs.add(document.body, "click", h)
            });
            eventjs.add(V, "blur", function(a) {
                eventjs.remove(document.body, "click", h);
                p.lastTimeOpen = 0;
                p.hide()
            });
            eventjs.add(Y, "mousedown",
                eventjs.cancel);
            eventjs.add(Y, "click", h);
            U ? M && eventjs.add(P, "click", e) : (Q && eventjs.add(V, "keydown,keypress", c), eventjs.add(T, "hover", function(a, b) {
                N.scrollTop += -25
            }), eventjs.add(W, "hover", function(a, b) {
                N.scrollTop += 25
            }), eventjs.add(N, "scroll", b), M && eventjs.add(P, "drag", function(a, b) {
                "down" === b.state ? e(a) : "up" === b.state && 15 < b.distanceMoved() && p.hide()
            }));
            var S, ca;
            g[E] = p;
            p.container = r;
            p.input = V;
            p.ul = N;
            p.id = E;
            p.options = A;
            p.selected = C;
            p.tooltip = F;
            p.buildMenu = w;
            p.lastTimeOpen = 0;
            w();
            return p
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g() {
        var d = arguments;
        return function() {
            console.log("success", arguments, d)
        }
    }

    function f() {
        var d = arguments;
        return function(c) {
            console.error(d[0], d[1]);
            console.error(c)
        }
    }
    var q = k.convert || (k.convert = {}),
        l = k.dom || (k.dom = {}),
        d = k.util || (k.util = {});
    q.imageFromFile = function(d, c, h) {
        if (d) {
            var b = d.src || d;
            c = c || d.onsuccess || g(arguments);
            h = h || d.onerror || f("fileToImage", arguments);
            var a = k.util.loadImage({
                src: b,
                onerror: h,
                onsuccess: function() {
                    c(a)
                }
            })
        } else console.error("fileToImage", arguments)
    };
    q.canvasFromFile = function(d, c, h) {
        if (d) {
            var b = d.src || d,
                a = d.opacity || 1,
                k = d.canvas;
            c = c || d.onsuccess || g(arguments);
            h = h || d.onerror || f("fileToCanvas", arguments);
            q.imageFromFile(b, function(b) {
                c(q.canvasFromImage(b, k, a))
            }, h)
        } else console.error("fileToCanvas", arguments)
    };
    q.patternFromFile = function(d, c, h) {
        if (d) {
            var b = d.src || d,
                a = d.opacity || 1;
            c = c || d.onsuccess || g(arguments);
            h = h || d.onerror || f("fileToPattern", arguments);
            q.canvasFromFile({
                src: b,
                opacity: a,
                onerror: h,
                onsuccess: function(a) {
                    var b = a.ctx.createPattern(a,
                        "repeat");
                    b.canvas = a;
                    c(b)
                }
            })
        } else console.error("fileToPattern", arguments)
    };
    q.canvasFromHTML = function(d, c, h) {
        if (d)
            if ("undefined" === typeof html2canvas) console.warn("html2canvas undefined");
            else {
                var b = d.html || d;
                c = c || d.onsuccess || g(arguments);
                h = h || d.onerror || f("htmlToCanvas", arguments);
                var a = l.$("#sk-htmlToCanvas") || l.append(document.body, '<div id="sk-htmlToCanvas" style="position:fixed;top:0;left:0;display:none"></div>');
                a.style.display = "block";
                a.innerHTML = b;
                html2canvas(a, {
                    onerror: h,
                    onrendered: function(b) {
                        c(b);
                        a.style.display = "none"
                    }
                })
            }
        else console.error("htmlToCanvas", arguments)
    };
    q.canvasFromImage = function(d, c, h) {
        if (d) return c ? (c.ctx = c.ctx || c.getContext("2d"), c.width = d.width, c.height = d.height) : c = l.Canvas(d.width, d.height), k.agent.ios && window.MegaPixImage ? (new MegaPixImage(d)).render(c, {
            maxWidth: 1E3,
            maxHeight: 1E3
        }) : (c.ctx.save(), c.ctx.globalAlpha = h || 1, c.ctx.drawImage(d, 0, 0), c.ctx.restore()), c;
        console.error("imageToCanvas", arguments)
    };
    q.textFromBlob = function(e, c, h) {
        function b(b) {
            var d = new FileReader;
            d.onerror =
                a;
            d.onload = function(a) {
                c(this.result)
            };
            d.readAsText(b)
        }

        function a(a) {
            h && h(a)
        }
        if (e) {
            d.isBlob(e) && (e = {
                blob: e
            });
            var f = e.blob;
            c = c || e.onsuccess || g(arguments);
            h = h || e.onerror || a("blobToText", arguments);
            "application/zip" === f.type ? k.io.zip ? k.io.zip.decode(f, function(c) {
                1 === c.length ? b(c[0].blob) : a()
            }, a) : b(f) : b(f)
        } else a()
    };
    q.objectFromBlob = function(d, c, h) {
        if (d) {
            var b = d.blob || d;
            c = c || d.onsuccess || g(arguments);
            h = h || d.onerror || f("objectFromBlob:", arguments);
            q.textFromBlob({
                blob: b,
                onerror: h,
                onsuccess: function(a) {
                    try {
                        c(JSON.parse(a))
                    } catch (b) {
                        h(b)
                    }
                }
            })
        } else console.error("objectFromBlob args:",
            d)
    };
    q.blobFromBuffer = function(e) {
        var c = d.FileInfo.fromBuffer(e);
        if (c) return new Blob([e], {
            type: c.mime
        });
        console.warn("blobFromBuffer: format could not be determined");
        return new Blob([e])
    };
    q.blobFromDataURL = function(d) {
        d = d.split(",");
        var c = atob(d[1]);
        d = d[0].split(":")[1].split(";")[0];
        for (var h = new ArrayBuffer(c.length), b = new Uint8Array(h), a = 0; a < c.length; a++) b[a] = c.charCodeAt(a);
        return new Blob([h], {
            type: d
        })
    };
    q.bufferFromBlob = function(d, c) {
        var h = new FileReader;
        h.onload = function(b) {
            c(this.result)
        };
        h.readAsArrayBuffer(d)
    };
    q.blobToArrayBufferReader = function(d, c) {
        q.bufferFromBlob(d, function(d) {
            c(new function(b, a) {
                var c = 0;
                this.buffer = b;
                this.dataView = a = a || new DataView(b);
                this.readInt8 = function() {
                    if (!(c + 1 > b.byteLength)) return a.getUint8(c++ - 1, !1)
                };
                this.readInt16 = function() {
                    if (!(c + 2 > b.byteLength)) return a.getUint16((c += 2) - 2, !1)
                };
                this.readInt32 = function() {
                    if (!(c + 4 > b.byteLength)) return a.getUint32((c += 4) - 4, !1)
                };
                this.readString32 = function(b) {
                    b = this.readInt32();
                    for (var d = 0, e = ""; d < b; d++) e += String.fromCharCode(a.getUint16(c, !1)), c += 2;
                    return e
                };
                this.seekString = function(d) {
                    for (var e = "", h = b.byteLength, f = 0; e !== d && c < h;) {
                        ++f;
                        var g = String.fromCharCode(a.getUint8(c, !1));
                        c++;
                        if (d[e.length] === g) {
                            if (e += g, e === d) return f
                        } else e = ""
                    }
                }
            }(d))
        })
    };
    q.blobFromObject = function(d) {
        return new Blob([JSON.stringify(d)], {
            type: "text/json"
        })
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Download = function(g) {
        function f(a, b) {
            var c = g.doc,
                d = b.split("/").pop(),
                c = a || c.title || "sketch";
            return -1 === c.indexOf(d) ? c + "." + d : c
        }

        function k(a, b, c, d, e, h, f, y) {
            var t = g.doc,
                l = typeof a,
                q = "object" === l ? a : {},
                C = function(a, b, c) {
                    typeof q[a] !== b && (q[a] = c)
                },
                A = function(a, b, c) {
                    if ("function" === typeof c)
                        if (q.callback) {
                            var d = q.callback;
                            q.callback = function() {
                                d();
                                c()
                            }
                        } else q.callback = c;
                    if (typeof c === b) return q[a] = c, !0
                };
            "number" === l || "undefined" === l ? (A("x", "number", a), A("y", "number",
                b), A("width", "number", c), A("height", "number", d), A("mime", "string", e), A("quality", "number", h), A("dpi", "number", f), A("callback", "function", y)) : "string" === l ? (A("mime", "string", a), A("quality", "number", b), A("callback", "function", c)) : "function" === l && A("callback", "function", a);
            a = t.getBounds();
            a.width && C("width", "number", a.width);
            a.height && C("height", "number", a.height);
            e = q.mime = (q.mime || q.format || "image/jpeg").toLowerCase();
            0 !== e.indexOf("image/") && (e = q.mime = "image/" + e);
            "image/jpeg" === e && (q.background = q.background ||
                "#fff");
            C("mime", "string", "image/png");
            C("quality", "number", 1);
            C("dpi", "number", t.exportDPI);
            return q
        }
        var l = this,
            d = g.agent,
            e = g.dom,
            c = g.lang,
            h = g.ui,
            b = g.util;
        l.blob = function(b, c, e) {
            e = g.doc;
            b = b || new Blob(["hello world"]);
            c = c || e.title + ".txt";
            d.chooseEntry ? chrome.fileSystem.chooseEntry({
                type: "saveFile",
                suggestedName: c
            }, function(a) {
                a.createWriter(function(a) {
                    a.write(b)
                }, function(a) {
                    console.error(a)
                })
            }) : d.has("io.blob", function() {
                saveAs(b, c)
            }, function() {
                var d = URL.createObjectURL(b);
                a.download(d, c)
            })
        };
        l.object =
            function(a, c, d) {
                a = b.json.stringify(a);
                l.text(a, c, d)
            };
        l.text = function(b, c, e) {
            var h = g.doc;
            c = c || h.title + ".txt";
            e = e || "text/plain";
            d.has("io.blob", function() {
                l.blob(new Blob([b], {
                    type: e
                }), c)
            }, function() {
                var d = "data:" + e + ";base64," + btoa(b);
                a.download(d, c)
            })
        };
        l.canvas = function(c, g, k, p) {
            a.isReady() && (c = c || e.Canvas(), k = k || "image/png", p = p || 1, g = f(g, k), b.exists("canvas2ImagePlugin.saveImageDataToLibrary") ? canvas2ImagePlugin.saveImageDataToLibrary(function(a) {
                    h.alert("Image successfully saved to your Photo Gallery.")
                },
                function(a) {
                    h.alert("There was an error saving your image.")
                }, c) : d.has("io.blob", function() {
                c.toBlob(function(a) {
                    l.blob(a, g)
                }, k, p)
            }, function() {
                var b = c.toDataURL(k, p);
                a.download(b, g)
            }))
        };
        l.sketch = l.zip = function(b) {
            if (a.isReady()) {
                var c = g.doc;
                g.save.zip({
                    onsuccess: function(a) {
                        var d = b || c.title;
                        b = -1 === d.indexOf(".sketchpad") ? d + ".sketchpad" : d;
                        l.blob(a, b)
                    }
                })
            }
        };
        l.svg = function(b, c) {
            var d = g.doc;
            a.isReady() && (c = c || {}, "object" === typeof b && (c = b, b = c.filename || d.title), c.onsuccess = function(a) {
                var c = b || d.title;
                b = -1 === c.indexOf(".svg") ? c + ".svg" : c;
                l.text(a, b, "image/svg+xml")
            }, g.save.svg(c))
        };
        l.json = function(c, d) {
            var e = g.doc;
            a.isReady() && (d = d || {}, "object" === typeof c && (d = c, c = d.filename || e.title), d.onsuccess = function(a) {
                var d = c || e.title;
                a = b.json.stringify(a);
                c = -1 === d.indexOf(".json") ? d + ".json" : d;
                l.text(a, c, "application/json")
            }, g.save.json(d))
        };
        l.image = function(b, c, d, e, h, f, r, y) {
            a.onReady(function(a) {
                var E = k(b, c, d, e, h, f, r, y);
                g.save.canvas(E, function(a) {
                    72 === E.dpi ? l.canvas(a, E.filename, E.mime, E.quality) : l.canvasDPI(a,
                        E.filename, E.mime, E.quality)
                })
            })
        };
        (function() {
            l.canvasDPI = function(b, c, d, e, h) {
                d = d || "image/png";
                e = e || 1;
                c = f(c, d);
                b.toBlob(function(b) {
                    g.convert.blobToArrayBufferReader(b, function(e) {
                        e = a[d](b, e, h);
                        l.blob(e, c)
                    })
                }, d, e)
            };
            var a = {
                    "image/jpeg": function(a, b, c) {
                        b = b.dataView;
                        b.setUint8(13, 1);
                        b.setUint16(14, c);
                        b.setUint16(16, c);
                        return new Blob([b], {
                            type: "image/jpeg"
                        })
                    },
                    "image/png": function(a, c, e) {
                        e = b(e / 72 * 2834.6472);
                        e = [112, 72, 89, 115].concat(e).concat(e).concat(1);
                        e = b(e.length - 4).concat(e).concat(d(e));
                        var h = c.seekString("IDATx") -
                            5 - 4;
                        c = a.slice(0, h);
                        a = a.slice(h, a.size);
                        return new Blob([c, new Uint8Array(e), a], {
                            type: "image/png"
                        })
                    }
                },
                b = function(a) {
                    return [a >> 24 & 255, a >> 16 & 255, a >> 8 & 255, a & 255]
                },
                c = [0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615, 3915621685, 2657392035, 249268274, 2044508324, 3772115230, 2547177864, 162941995, 2125561021, 3887607047, 2428444049, 498536548, 1789927666, 4089016648, 2227061214, 450548861, 1843258603, 4107580753, 2211677639, 325883990, 1684777152, 4251122042, 2321926636, 335633487, 1661365465, 4195302755, 2366115317, 997073096,
                    1281953886, 3579855332, 2724688242, 1006888145, 1258607687, 3524101629, 2768942443, 901097722, 1119000684, 3686517206, 2898065728, 853044451, 1172266101, 3705015759, 2882616665, 651767980, 1373503546, 3369554304, 3218104598, 565507253, 1454621731, 3485111705, 3099436303, 671266974, 1594198024, 3322730930, 2970347812, 795835527, 1483230225, 3244367275, 3060149565, 1994146192, 31158534, 2563907772, 4023717930, 1907459465, 112637215, 2680153253, 3904427059, 2013776290, 251722036, 2517215374, 3775830040, 2137656763, 141376813, 2439277719, 3865271297,
                    1802195444, 476864866, 2238001368, 4066508878, 1812370925, 453092731, 2181625025, 4111451223, 1706088902, 314042704, 2344532202, 4240017532, 1658658271, 366619977, 2362670323, 4224994405, 1303535960, 984961486, 2747007092, 3569037538, 1256170817, 1037604311, 2765210733, 3554079995, 1131014506, 879679996, 2909243462, 3663771856, 1141124467, 855842277, 2852801631, 3708648649, 1342533948, 654459306, 3188396048, 3373015174, 1466479909, 544179635, 3110523913, 3462522015, 1591671054, 702138776, 2966460450, 3352799412, 1504918807, 783551873, 3082640443,
                    3233442989, 3988292384, 2596254646, 62317068, 1957810842, 3939845945, 2647816111, 81470997, 1943803523, 3814918930, 2489596804, 225274430, 2053790376, 3826175755, 2466906013, 167816743, 2097651377, 4027552580, 2265490386, 503444072, 1762050814, 4150417245, 2154129355, 426522225, 1852507879, 4275313526, 2312317920, 282753626, 1742555852, 4189708143, 2394877945, 397917763, 1622183637, 3604390888, 2714866558, 953729732, 1340076626, 3518719985, 2797360999, 1068828381, 1219638859, 3624741850, 2936675148, 906185462, 1090812512, 3747672003, 2825379669,
                    829329135, 1181335161, 3412177804, 3160834842, 628085408, 1382605366, 3423369109, 3138078467, 570562233, 1426400815, 3317316542, 2998733608, 733239954, 1555261956, 3268935591, 3050360625, 752459403, 1541320221, 2607071920, 3965973030, 1969922972, 40735498, 2617837225, 3943577151, 1913087877, 83908371, 2512341634, 3803740692, 2075208622, 213261112, 2463272603, 3855990285, 2094854071, 198958881, 2262029012, 4057260610, 1759359992, 534414190, 2176718541, 4139329115, 1873836001, 414664567, 2282248934, 4279200368, 1711684554, 285281116, 2405801727,
                    4167216745, 1634467795, 376229701, 2685067896, 3608007406, 1308918612, 956543938, 2808555105, 3495958263, 1231636301, 1047427035, 2932959818, 3654703836, 1088359270, 936918E3, 2847714899, 3736837829, 1202900863, 817233897, 3183342108, 3401237130, 1404277552, 615818150, 3134207493, 3453421203, 1423857449, 601450431, 3009837614, 3294710456, 1567103746, 711928724, 3020668471, 3272380065, 1510334235, 755167117
                ],
                d = function(a, d) {
                    d = (d | 0) ^ 4294967295;
                    for (var e = 0, h = a.length; e < h; e++) d = d >>> 8 ^ c[(d ^ a[e]) & 255];
                    return b(d ^ 4294967295)
                }
        })();
        l.pdf =
            function(d, e, h, f, m, v, r, y) {
                var t = g.doc;
                g.loader && g.loader.create("thread", c.translate("reading-files") + "...");
                a.onReady(function(a) {
                    var c = k(d, e, h, f, m, v, r, y);
                    g.io.pdf.save(b.copyInto({
                        onprogress: function(a) {
                            g.loader && g.loader.create("thread", null, a)
                        },
                        onsuccess: function(a) {
                            l.blob(a, (c.filename || t.title) + ".pdf")
                        },
                        onerror: function() {
                            console.warn("error saving pdf")
                        }
                    }, c))
                })
            };
        var a = new function() {
            var c = "undefined" === typeof document ? !1 : "download" in document.createElement("a");
            this.lapse = 1E3;
            this.getElement =
                function() {
                    var a = this.element || e.$("#sk-download-element");
                    if (a) return a;
                    this.element = document.createElement("a");
                    this.element.id = "download";
                    this.element.target = "_blank";
                    this.element.style.display = "none";
                    this.element.timestamp = b.now() - this.lapse;
                    document.body.appendChild(this.element);
                    return this.element
                };
            this.isReady = function(a) {
                var c = this.getElement(),
                    d = b.now();
                if (d - c.timestamp >= this.lapse) return a ? !0 : c.timestamp = d
            };
            this.onReady = function(a) {
                var b = this.getElement();
                if (this.isReady(!0)) return a(b),
                    b
            };
            this.download = function(b, d) {
                if (c) {
                    var e = a.getElement();
                    e.download = d;
                    e.href = b;
                    e.click()
                } else window.open().document.write("<title>" + d + '</title><img src="' + b + '"/>')
            }
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Open = function(g) {
        var f = this,
            k = g.dom,
            l = g.convert,
            d = g.io,
            e = g.lang,
            c = g.util.string,
            h = g.util;
        f.folder = function(b) {
            var a = b.entries,
                d = b.onerror,
                k = b.onsuccess,
                q = b.onprogress;
            g.loader && g.loader.create("thread", e.translate("reading-files") + "...");
            var p, m = h.Queue({
                items: a,
                delayStart: !0,
                oncomplete: function() {
                    p ? f.json(p, k, q) : (g.loader && g.loader.create("thread", null, 100), d && d({
                        message: "JSON not found in folder."
                    }))
                },
                next: function(b, d, e) {
                    d = (e + 1) / a.length * 100 >> 0;
                    g.loader &&
                        g.loader.create("thread", null, Math.max(0, d - 1));
                    if (d = b.name) switch (d) {
                        case "README.txt":
                            m.next();
                            break;
                        case "sketch.json":
                            l.textFromBlob(b, function(a) {
                                p = a;
                                m.next()
                            });
                            break;
                        default:
                            "asset-" === d.substr(0, 6) ? g.assets.add({
                                data: b,
                                onerror: m.next,
                                onsuccess: m.next,
                                targetId: "#" + c.filenameSansExtension(d)
                            }) : m.next()
                    } else return m.next()
                }
            })
        };
        f.chooseEntry = function(b) {
            b = b || {};
            var a = b.onsuccess;
            b = b.onerror;
            if (h.exists("navigator.camera.getPicture")) navigator.camera.getPicture(function(b) {
                l.canvasFromFile(b, function(d) {
                    d.toBlob(function(d) {
                        d.path =
                            b;
                        d.name = c.filename(b);
                        a(d);
                        navigator.camera.cleanup()
                    })
                })
            }, b, {
                destinationType: Camera.DestinationType.NATIVE_URI,
                sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
                allowEdit: !1,
                targetWidth: 640,
                targetHeight: 480,
                saveToPhotoAlbum: !1
            });
            else return h.exists("chrome.fileSystem.chooseEntry") ? (chrome.fileSystem.chooseEntry({
                type: "openFile",
                accepts: [{
                    extensions: g.uploader.formats
                }]
            }, function(b) {
                b && b.file(function(b) {
                    a(b)
                })
            }), !0) : !1
        };
        f.clipart = f.image = function(b) {
            function a(a) {
                if (b.openAsNew) {
                    g.exec("reset");
                    if (a.vob) {
                        var e = a.vob.width;
                        a = a.vob.height
                    } else e = a.width, a = a.height;
                    c.setSize(e, a);
                    c.scene.add({
                        centerOnPoint: !0,
                        type: v,
                        src: f,
                        width: e,
                        height: a,
                        x: e / 2,
                        y: a / 2
                    }, function() {
                        c.setTool("select");
                        c.scene.deselectAll();
                        c.orient.reset();
                        c.orient.render();
                        d && d()
                    }, h)
                } else c.addMedia(b)
            }
            var c = g.doc;
            "string" === typeof b && (b = {
                src: b
            });
            var d = b.onsuccess,
                e = b.onprogress,
                h = b.onerror,
                f = b.src || "",
                v = b.type || "image";
            if (b.blob) g.assets.add(b.blob, function(b, c) {
                a(c)
            }, h, e);
            else if (-1 !== f.indexOf("filesystem:")) {
                var r = new Image;
                r.src = f;
                r.onprogress = e;
                r.onerror = h;
                r.onload = function() {
                    var b = k.Canvas(this.width, this.height);
                    b.ctx.drawImage(this, 0, 0);
                    a(b)
                }
            } else g.assets.add(f, function(b, c) {
                a(c)
            }, h, e)
        };
        g.server && (f.fromServer = g.server.open);
        d.zip && (f.sketch = d.zip.open);
        d.svg && (f.svg = d.svg.open);
        d.pdf && (f.pdf = d.pdf.open);
        d.json && (f.json = d.json.open)
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Print = function(g) {
        var f = g.dom;
        return function(k) {
            k = k || {};
            var l = function(d) {
                var e = 72 / (k.dpi || 72),
                    c = e * d.width + "px",
                    e = e * d.height + "px";
                d.style.width = c;
                d.style.height = e;
                var h;
                (h = f.$("#sk-printable")) || (h = f.append(document.body, '<div id="sk-printable"></div>'));
                h.style.width = c;
                h.style.height = e;
                h.innerHTML = "";
                h.appendChild(d);
                window.print()
            };
            "CANVAS" === k.nodeName ? l(k) : g.save.canvas(k, l)
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Save = function(g) {
        function f(b, c, d, h, f, r) {
            var k = g.doc,
                t = e.Canvas(d, h),
                l = t.ctx;
            r && "none" !== r && "transparent" !== r && (l.save(), l.scale(f, f), l.fillStyle = r, l.translate(-Math.abs(b % d), -Math.abs(c % h)), l.fillRect(0, 0, 2 * d, 2 * h), l.restore());
            b = k.contexts;
            for (var q in b) a[q] || l.drawImage(b[q], 0, 0, d, h);
            return t
        }

        function k(a) {
            return a.mime ? a.mime : a.format ? "image/" + a.format : "image/png"
        }

        function l(a) {
            var c = a[0] || {};
            return "function" === typeof c ? {
                args: {},
                onsuccess: c,
                onerror: a[1]
            } : {
                args: c,
                onsuccess: a[1] || c.onsuccess || c.callback || b.errorHandler("onsuccess"),
                onerror: a[2] || c.onerror || b.errorHandler("onerror")
            }
        }
        var d = this,
            e = g.dom,
            c = g.feature,
            h = g.io,
            b = g.util;
        d.console = function(a) {
            d.canvas(a, console.image)
        };
        d.toDataURL = function() {
            var a = l(arguments),
                b = a.args,
                c = a.onsuccess,
                e = k(b),
                h = b.quality || 1;
            d.canvas(b, function(a) {
                c(a.toDataURL(e, h))
            })
        };
        d.toBlob = function() {
            var a = l(arguments),
                b = a.args,
                c = a.onsuccess,
                e = k(b),
                h = b.quality || 1;
            d.canvas(b, function(a) {
                a.toBlob(function(a) {
                    c(a)
                }, e, h)
            })
        };
        d.toBlobURL =
            function() {
                var a = l(arguments),
                    b = a.onsuccess;
                d.toBlob(a.args, function(a) {
                    b(URL.createObjectURL(a))
                })
            };
        d.canvas = function() {
            var a = g.doc,
                e = a.canvas2d,
                h = a.render,
                m = l(arguments),
                k = m.args,
                r = m.onsuccess;
            d.perf = g.perf();
            var y = a.pixelRatio,
                m = 72 * y,
                t = a.getBounds(),
                q = t.width,
                w = t.height,
                C = 0,
                A = 0,
                t = isFinite(k.dpi) ? k.dpi : m;
            k.scale && (t *= k.scale);
            if (k.crop) {
                var I = k.crop,
                    B = k.croparea,
                    D = k.center,
                    F = t,
                    G = isFinite(k.width) ? k.width : q,
                    H = isFinite(k.height) ? k.height : w,
                    J = function(a) {
                        b.thumbnailer({
                            src: a,
                            width: G,
                            height: H,
                            dpi: F,
                            background: k.background,
                            center: D,
                            croparea: B,
                            crop: I,
                            onsuccess: r
                        })
                    };
                if (k.width && k.height) var O = k.width / q,
                    K = k.height / w,
                    t = O < K ? t * O : t * K
            } else q = isFinite(k.width) ? k.width : q, w = isFinite(k.height) ? k.height : w, C = isFinite(k.x) ? k.x : 0, A = isFinite(k.y) ? k.y : 0, J = function(a) {
                r && r(a)
            };
            var L = t / 72,
                m = isFinite(k.highRes) ? k.highRes : h.highRes || t !== m,
                t = k.useVisibleRegion || !1,
                K = (O = k.useSelection || !1) || k.useBBox || !isFinite(C + A + q + w),
                M = k.usePixelBBox,
                Q = k.background || void 0;
            "transparent" !== a.background && "none" !== Q && ("default" === Q ?
                Q = a.computed.background : c.canvas.useBGSave && (Q = a.computed.background));
            M && g.raster.getPixelBBox ? (K = g.raster.getPixelBBox(a.contexts.layer0.ctx), C = K.x / y >> 0, A = K.y / y >> 0, q = K.width / y >> 0, w = K.height / y >> 0) : K && a.scene ? (K = a.scene.getBoundingBox(k), C = K.x * L >> 0, A = K.y * L >> 0, q = K.width * L >> 0, w = K.height * L >> 0) : (C -= a.scrollX, A -= a.scrollY, q *= L, w *= L);
            q = Math.ceil(q);
            w = Math.ceil(w);
            t && (q = Math.min(q, e.width), w = Math.min(w, e.height), C = Math.max(C, 0), A = Math.max(A, 0));
            if (g.getSnapshot) return g.getSnapshot(J, q, w);
            if (a.scene) {
                var R =
                    e.width,
                    U = e.height,
                    V = e.x,
                    P = e.y,
                    X = a.zoom,
                    N = h.highRes,
                    W = a.contexts.layer0,
                    T = W.width,
                    Y = W.height;
                q !== W.width && (W.width = q);
                w !== W.height && (W.height = w);
                a.pixelRatio = L;
                a.zoom = 1;
                e.width = q;
                e.height = w;
                e.x = (-C - a.originX) * L;
                e.y = (-A - a.originY) * L;
                h.dirtyClip = !0;
                h.highRes = m;
                h.selection = O && a.selection.items;
                a.scene.deselectAll();
                h.now(function() {
                    h.dirtyClip = !0;
                    h.selection = !1;
                    h.highRes = N;
                    e.width = R;
                    e.height = U;
                    e.x = V;
                    e.y = P;
                    a.zoom = X;
                    a.pixelRatio = y;
                    var b = f(C, A, q, w, L, Q);
                    T !== W.width && (W.width = T);
                    Y !== W.height && (W.height = Y);
                    a.render.dirty = !0;
                    J(b)
                })
            } else J(f(C, A, q, w, L, Q))
        };
        var a = {
            cache: !0,
            active: !0,
            draw: !0
        };
        h && h.json ? (d.json = h.json.save, d.assets = h.json.assets) : d.json = d.assets = function() {
            console.warn("IO.JSON support not included.")
        };
        d.toServer = g.server && g.server.save ? g.server.save : function() {
            console.warn("IO.Server support not included.")
        };
        d.toFS = g.fs.saveProject ? g.fs.saveProject : function() {
            console.warn("IO.FileSystem support not included.")
        };
        d.svg = h && h.svg ? h.svg.save : function() {
            console.warn("IO.SVG support not included.")
        };
        d.pdf = h && h.pdf ? h.pdf.save : function() {
            console.warn("IO.PDF support not included.")
        };
        d.zip = function(a) {
            "function" === typeof a && (a = {
                onsuccess: a
            });
            "object" !== typeof a && (a = {});
            a = a || {};
            var c = a.onsuccess || b.errorHandler("onsuccess");
            d.folder({
                embedHistory: a.embedHistory,
                onsuccess: function(a) {
                    h.zip.encode(a, function(a) {
                        c(a)
                    }, function(a) {
                        console.log(a)
                    }, onprogress)
                }
            })
        };
        d.folder = function(a) {
            "function" === typeof a && (a = {
                onsuccess: a
            });
            "object" !== typeof a && (a = {});
            a = a || {};
            var c = a.onsuccess || b.errorHandler("onsuccess"),
                e = a.embedHistory;
            d.assets(function(a) {
                d.json({
                    embedHistory: e,
                    onsuccess: function(b) {
                        var d = [],
                            e;
                        for (e in a) {
                            var h = w[a[e].type];
                            d.push({
                                filename: e.substr(1) + "." + h,
                                blob: a[e]
                            })
                        }
                        d.push({
                            filename: "sketch.json",
                            blob: new Blob([b], {
                                type: "application/json"
                            })
                        });
                        c(d)
                    }
                })
            })
        };
        d.sync = function(a) {
            function c(a) {
                h && h((t - (r - 1)) / t * 100);
                --r || f && f(q)
            }
            var e = g.doc;
            "object" !== typeof a && (a = {});
            a = a || {};
            var h = a.onprogress,
                f = a.onsuccess || b.errorHandler("onsuccess");
            a = a.sync || {};
            if (!b.count(a)) return f();
            var r = 0,
                k;
            for (k in a) a[k] &&
                (!0 === a[k] && (a[k] = {}), r++);
            var t = r,
                l, q = {};
            for (k in a)
                if (l = a[k]) switch (k) {
                    case "metadata":
                        (function(a) {
                            for (var b in a) q[b] = a[b]
                        })(l);
                        c("metadata");
                        break;
                    case "folder":
                        d.folder(b.copyInto(l, {
                            onsuccess: function(a) {
                                q.folder = a;
                                c("folder")
                            }
                        }));
                        break;
                    case "zip":
                        d.zip(b.copyInto(l, {
                            onsuccess: function(a) {
                                q.sketch = a;
                                c("zip")
                            }
                        }));
                        break;
                    case "svg":
                        d.svg(b.copyInto(l, {
                            onsuccess: function(a, b) {
                                q.svg = b;
                                c("svg")
                            }
                        }));
                        break;
                    case "json":
                        d.json(b.copyInto(l, {
                            onsuccess: function(a) {
                                q.json = a;
                                c("json")
                            }
                        }));
                        break;
                    case "thumb":
                        l.background =
                            e.computed.background, l.suffix = l.suffix || "thumb";
                    case "image":
                        var w = l.format || "png";
                        l.idx = l.suffix ? l.suffix + "." + w : w;
                        (function(a) {
                            a.toBlob ? d.toBlob(a, function(b) {
                                q[a.idx] = b;
                                c("image")
                            }) : d.toDataURL(a, function(b) {
                                q[a.idx] = b;
                                c("image")
                            })
                        })(l);
                        break;
                    default:
                        c()
                }
        };
        d.confirm = function(a) {
            a = a || {};
            var b = a.onrequestsave,
                c = a.oncontinue,
                d = a.oncancel;
            a = function() {
                g.ui.confirm({
                    message: "change-doc-confirm",
                    callback: function(a) {
                        !0 === a ? b && b() : -1 === a ? c && c() : d && d()
                    },
                    labels: {
                        ok: "save",
                        cancel: "cancel",
                        disregard: "dontSave"
                    }
                })
            };
            g.doc.needsSync() ? a() : c && c()
        };
        d.chooseEntry = function(a, c, d) {
            return g.agent.nodewebkit ? (c = g.dom.create('<input id="export_file" type="file" nwsaveas />'), c.addEventListener("change", function(b) {
                console.log(this.value);
                require("fs").writeFile(this.value, a, function(a) {
                    a && alert("error" + a)
                })
            }, !1), c.click(), !0) : b.exists("chrome.fileSystem.chooseEntry") ? (chrome.fileSystem.chooseEntry({
                type: "saveFile",
                suggestedName: "blah.image"
            }, function(a) {
                a.createWriter(function(a) {
                    a.onwriteend = function(b) {
                        a.onwriteend =
                            null;
                        a.truncate(content.size)
                    };
                    a.onerror = function(a) {
                        console.log("Write failed: " + a.toString())
                    };
                    a.write(blob)
                }, errorHandler)
            }), !0) : !1
        };
        d.fromQuery = function(a, b, d) {
            !c.sync.enabled || g.agent.nodewebkit || g.agent.incognito ? g.download.image() : g.on.requestsave ? g.on.requestsave({
                onsuccess: a,
                onerror: b,
                onprogress: d
            }) : g.fs.supported ? g.fs.saveProject({
                onsuccess: a,
                onerror: b,
                onprogress: d
            }) : g.save.toServer({
                onsave: a,
                onerror: b,
                onprogress: d
            })
        };
        var w = {
            "image/png": "png",
            "image/gif": "gif",
            "image/jpeg": "jpeg",
            "image/svg+xml": "svg"
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g() {
        console.log("success", arguments)
    }

    function f() {
        console.warn("error", arguments)
    }
    k.module = k.module || {};
    k.module.JSON = function(q) {
        function l(a, b, c) {
            b = b || a.onsuccess || g;
            c = c || a.onerror || f;
            var d = a.data || a;
            if (x[String(d)]) h.textFromBlob(d, function(a) {
                l(a, b, c)
            });
            else {
                var e;
                if ("string" === typeof d) {
                    if (d.startsWith("<")) {
                        q.loader && q.loader.stop("thread");
                        return
                    }
                    if (w.isValidXhrUrl(d)) {
                        u.request({
                            url: d,
                            format: "text",
                            onerror: c,
                            onsuccess: function(d, e) {
                                "object" !== typeof a && (a = {});
                                a.data =
                                    e;
                                l(a, b, c)
                            }
                        });
                        return
                    }
                    try {
                        e = JSON.parse(d)
                    } catch (k) {
                        c(k, d);
                        return
                    }
                } else e = d;
                e ? b(e) : c({
                    message: "JSON could not be read."
                })
            }
        }

        function d(a, b, c) {
            if (c || b) a = JSON.stringify(a);
            c && (a = new Blob([a], {
                type: "application/json"
            }));
            return a
        }

        function e(a, b, c) {
            var d = q.doc;
            d.mixinMetaData(a, d, {
                clip: !0
            });
            d.setMetrics(a);
            (a = a.background) ? d.setBackground(a, b, c): b()
        }
        var c = this,
            h = q.convert,
            b = q.feature,
            a = q.lang,
            w = q.loc,
            u = q.util,
            x = u.arrayToObject(["[object Blob]", "[object File]"]);
        this.open = function(d, h, f, g) {
            function k(a) {
                function d() {
                    t.lastModified =
                        t.lastSynced;
                    g && g(100);
                    h && h(a);
                    q.emit("open")
                }

                function p(a) {
                    g && g(99 * a >> 0)
                }

                function l() {
                    if (b.doc.editable) {
                        var c = a.history && a.history.vector;
                        c && u.isNotEmpty(c.data) ? t.history.setData(c) : t.history.store({
                            cmd: "open",
                            name: "open",
                            data: []
                        }, null, !1)
                    }
                    a.actions ? t.scene.load({
                        objects: a.actions,
                        onsuccess: d,
                        onprogress: p
                    }) : d()
                }
                C ? c.merge(a, h, f) : (g && g(0), a = c.upgrade(a), x ? w ? e(a.metadata, l, l) : e(a.metadata, d, d) : d())
            }
            var t = q.doc,
                w = !1 !== d.loadDocument,
                x = !1 !== d.loadMetadata,
                C = d.mergeIntoScene || !1;
            h = d.onsuccess || h;
            f = d.onerror ||
                f;
            g = d.onprogress || g || function(b) {
                q.loader && (0 === b ? q.loader.create("thread", a.translate("opening-format", ".JSON") + "...", 0) : 100 === b ? q.loader.stop("thread") : q.loader.create("thread", null, b))
            };
            l(d, function(a) {
                a.assets ? q.assets.addList(a.assets, function() {
                    k(a)
                }) : k(a)
            }, f)
        };
        this.merge = function(a, b, c) {
            if (a) {
                c = q.doc;
                a = a.actions ? a.actions : a;
                for (var d = 0; d < a.length; d++) {
                    var e = a[d];
                    void 0 === c.scene.getById(e.id) && c.scene.push(e)
                }
                c.scene.load({
                    onsuccess: b
                })
            } else c && c({
                message: "Data could not be merged."
            })
        };
        this.save =
            function(a) {
                "function" === typeof a && (a = {
                    onsuccess: a
                });
                "object" !== typeof a && (a = {});
                a = a || {};
                var b = q.doc,
                    e = a.toBlob || !1,
                    h = !1 !== a.toString,
                    f = a.embedAssets || !1,
                    k = a.embedHistory || !1,
                    l = a.quality || 1,
                    u = a.onsuccess || g,
                    w = b.scene.children,
                    x = {};
                x.metadata = b.mixinMetaData(b, {});
                x.version = q.__version;
                b.history && k && (x.history = {}, x.history.vector = b.history.vector);
                f ? c.assets({
                    quality: l,
                    toDataURL: !0,
                    onsuccess: function(a) {
                        x.assets = a;
                        x.actions = b.scene.copyDeepCompress(w);
                        var c = d(x, h, e);
                        u(c, a)
                    }
                }) : (x.actions = b.scene.copyDeepCompress(w),
                    a = d(x, h, e), u(a))
            };
        this.assets = function(a) {
            function c() {
                !--B && D >= x - 1 && h(w)
            }

            function d(a) {
                ++B;
                var e = q.assets.getId(a.src);
                if (e && !w[e]) {
                    a.src = e;
                    var h = q.assets.getItem(e);
                    a = a.type;
                    if ("clipart" === a) {
                        if ("function" !== typeof h.stringify) {
                            b.debug && console.warn("cannot stringify svg", h);
                            c();
                            return
                        }
                        if (k) {
                            w[e] = h.srcXML && !h.__colormap ? h.srcXML : h.stringify();
                            c();
                            return
                        }
                    } else if (q.detect.useStampResource[a] && "image/jpeg" === l && (a = h.getContext("2d"), a.save(), a.globalCompositeOperation = "destination-atop", a.fillStyle =
                            "#fff", a.fillRect(0, 0, h.width, h.height), a.restore()), k) {
                        w[e] = q.assets.getDataURL(e, l, u);
                        c();
                        return
                    }
                    f ? q.assets.getBlobURL(e, function(a) {
                        w[e] = a;
                        c()
                    }, l, u) : q.assets.getBlob(e, function(a) {
                        w[e] = a;
                        c()
                    }, l, u)
                } else c()
            }
            "function" === typeof a && (a = {
                onsuccess: a
            });
            "object" !== typeof a && (a = {});
            a = a || {};
            var e = q.doc,
                e = a.objects || e.scene.children,
                h = a.onsuccess || g,
                f = a.toBlobURL || !1,
                k = a.toDataURL || !1,
                l = a.mime || "image/png",
                u = a.quality || 1;
            1 !== u && (l = "image/jpeg");
            var w = {},
                x = e.length;
            if (0 === x || q.__nodejs) h(w);
            else
                for (var B =
                        0, D = 0; D < x; D++) a = e[D], a.src ? d(a) : c(++B)
        };
        this.upgrade = function(a) {
            a.version = a.version || "2.0a";
            a.version = a.version.replace("dev", "");
            for (var c = u.version(a.version || "2.0"), d = {
                    "2.0a": c.isLessThan("2.0a"),
                    "3.3": c.isLessThan("3.3"),
                    "3.4": c.isLessThan("3.4"),
                    "3.4.6": c.isLessThan("3.4.6"),
                    "3.4.6.1": c.isLessThan("3.4.6.1"),
                    "3.5.9.2": c.isLessThan("3.5.9.2"),
                    "3.6.8": c.isLessThan("3.6.8"),
                    "3.7.8.1": c.isLessThan("3.7.8.1")
                }, e = a.actions || [], h = 0, f = e.length; h < f; h++) {
                var g = e[h];
                g.bbox = g.bbox || {};
                g.bbox.scale = g.bbox.scale || {
                    x: 1,
                    y: 1
                };
                if (d["3.7.8.1"]) {
                    if (d["3.6.8"]) {
                        if (d["3.5.9.2"]) {
                            if (d["3.4.6"]) {
                                if (d["3.3"]) {
                                    if (d["2.0a"]) {
                                        var l = g;
                                        l.color_mode && (l.fill.mode = l.color_mode);
                                        l.color_noise && (l.fill.noise = l.color_noise);
                                        l.flow && (l.spacing = l.flow)
                                    }
                                    l = g;
                                    "string" === typeof l.src && (l.src = l.src.replace("/brush/", "/stamp/"), l.src = l.src.replace("/animal/", "/animals/"));
                                    "polygon" === l.type && (l.type = "regularPolygon");
                                    "radialBurst" === l.type && (l.spread = l.slope, delete l.slope);
                                    "0,00000000" === l.fill.gradient && (l.fill.gradient = "none")
                                }
                                l = g;
                                l.content && (l.content = l.content.split("\uf7c2\uf7a0").join(" "));
                                k.detect.brush[l.type] && l.bbox.padding && (l.bbox.x -= 2 * l.bbox.padding, l.bbox.y -= 2 * l.bbox.padding);
                                "paint" === l.composite && (l.composite = "source-over");
                                "light" === l.composite && (l.composite = "lighter");
                                l.saturation === +l.saturation && (l.type = "image");
                                "image" === l.type && (delete l.hue, delete l.saturation, delete l.temperature, delete l.tint, delete l.exposure, delete l.brightness, delete l.contrast, delete l.filters)
                            }
                            l = g;
                            "floodfill" === l.type && (l.usePixelData = !0);
                            l.roundness && (l.roundness /= 200);
                            l.filters && (l.filter = l.filters, delete l.filters)
                        }
                        l = g;
                        "string" !== typeof l.toolkitId && (l.toolkitId = k.doc.toolkit.getToolkitId(l.type));
                        l.fill && (l.fill = new k.style.Fill(l.fill), l.fill.enabled = !0, l.fill.angle = 225);
                        l.stroke && (l.stroke = new k.style.Fill(l.stroke), l.stroke.angle = 225)
                    }
                    g.pointerId = g.finger || "0:1";
                    delete g.finger;
                    isFinite(g.slope) && ("burst" === g.type ? console.log("handle", g) : g.slope = 1 - g.slope)
                }
            }
            e = a.metadata = a.metadata || {};
            d["3.7.8.1"] && (d["3.6.8"] && (d["3.4.6.1"] &&
                (d["3.4.6"] && (d["3.4"] && (d = a.metadata, a.title && (d.title = a.title), a.description && (d.description = a.description), a.width === +a.width && (d.width = a.width), a.height === +a.height && (d.height = a.height)), d = a.metadata, "string" !== typeof d.units && (d.units = !1 === d.autoResize || !1 === d.infiniteCanvas ? "px" : "%")), d = a.metadata, isFinite(d.x + d.y) && (d.x = -d.x, d.y = -d.y)), d = a.metadata, a.history && a.history.vector && (a.history.vector = {
                    max: 4294967295,
                    current: 0,
                    data: []
                }), "bluePrint" === d.background && (d.background = "blueprint"), "%" ===
                d.units && (d.width *= 100, d.height *= 100)), a.history && a.history.vector && (a.history.vector = {
                max: 4294967295,
                current: 0,
                data: []
            }), d = a.metadata, d.exportDPI = d.dpi || 72, d.exportFormat = d.format || "png", d.originX = d.x || 0, d.originY = d.y || 0, d.scrollX = d.scrollLeft || 0, d.scrollY = d.scrollTop || 0);
            e.uuid = e.uuid || u.uuid();
            e.background = e.background || "transparent";
            e.units = e.units || "%";
            isFinite(e.width + e.height) || (e.units = "%", e.width = 100, e.height = 100);
            isFinite(e.x + e.y) || (e.x = 0, e.y = 0);
            e.pages && e.pages.length || (e.pages = {
                length: 1,
                data: [{
                    width: e.width,
                    height: e.height
                }]
            });
            b.debug && c.isLessThan(q.__version.replace("dev", "")) && console.warn("upgraded from:", c);
            return a
        }
    }
})(sketch);
(function(k) {
    k.addToolkit("brush", function(g, f) {
        function k(a) {
            if ("eyeDropper" !== g.ui.colorPicker.state) {
                var b = eventjs.getPointInNode(a, f.container),
                    c = d("ghost", !0);
                if (void 0 !== c) {
                    var e = c.object.brush;
                    e.pointerId = "ghost";
                    e.isGhost = !0;
                    e.isRecording = !0;
                    e.event = a;
                    e.composite = r.composite;
                    e.interval = c.interval;
                    e.pointerId = e.pointerId || "A:0";
                    e.dirtyRender = !0;
                    c.fill && c.fill.__colors && (e.fill = c.fill);
                    c.stroke && c.stroke.__colors && (e.stroke = c.stroke);
                    g.assets.isDefault(e.resource) && g.assets.exists(e.src) && (e.resource =
                        g.assets.getItem(e.src));
                    var h = f.zoom;
                    a = f.scrollX;
                    var c = f.scrollY,
                        p = b.x / h,
                        b = b.y / h;
                    if (isFinite(e.ghostDistance + e.ghostX + e.ghostY)) {
                        var t = e.ghostX - p,
                            v = e.ghostY - b,
                            l = Math.sqrt(t * t + v * v),
                            h = e.ghostDistance;
                        l > h && (t = Math.atan2(v, t), e.ghostX = p + Math.cos(t) * h, e.ghostY = b + Math.sin(t) * h, e.x = p, e.y = b)
                    } else e.ghostX = p, e.ghostY = b, e.px = p, e.py = b, e.x = p, e.y = b;
                    A.ghostX = e.ghostX - a;
                    A.ghostY = e.ghostY - c;
                    e.pathRecord = [{
                        cmd: "M",
                        x: e.ghostX,
                        y: e.ghostY
                    }, {
                        cmd: "L",
                        x: p + .1,
                        y: b + .1
                    }];
                    m.dirtyPointer = !0
                }
            }
        }

        function l(a) {
            h.device.brush && (m.dirtyPointer = !0, m.removePointer("ghost"), delete A.ghostX, delete A.ghostY)
        }

        function d(a, b, c) {
            var d = h.device.brush || {};
            d.usePointerThread && (A.pointerId ? a = A.pointerId : A.pointerId = a);
            var e = m.pointer[a];
            if (!e || !e.object)
                if (b) d.disable && d.disable(), e = m.pointer[a] = {}, e.isFromBrowser = !0, e.object = c || v.copyProperties(h, h.device), e.object.seed = h.device.brush.seed, e.object.id = v.createId({
                    id: a
                }), h.loadResource({
                    object: e.object
                }), h.device = e.object, h.device.brush && h.device.brush.enable && h.device.brush.enable();
                else {
                    void 0 !==
                        d && !0 === d.useMonitor || console.warn("brush.onRecord - no pointer");
                    return
                }
            if (e.object.brush) return e.pointerId = a, e;
            console.warn("brush.onRecord - no brush", e)
        }

        function e(a, b, c) {
            var d = this.brush;
            if (d) {
                this.dirtyCheck && v.copyAttributes(h.attributes, this, d);
                var e = d.interval || this.interval;
                d.ctx = a;
                d.active = h.draw;
                d.cache = h.cache;
                d.isGhost = !1;
                d.isRecording = !1;
                d.interval = e;
                d.pointerId = this.pointerId;
                d.bbox = this.bbox;
                d.state = d.state || "up";
                if (!c) {
                    c = this.bbox;
                    var f = c.scale;
                    b.matrix.x = 0 > f.x ? -c.width * f.x : 0;
                    b.matrix.y =
                        0 > f.y ? -c.height * f.y : 0;
                    b.matrix.y += c.padding * (f.y - (f.x - 1) - 1);
                    b.apply(a, !0)
                }
                this.fill && this.fill.__colors && (d.fill = this.fill);
                this.stroke && this.stroke.__colors && (d.stroke = this.stroke);
                d.preprocess && d.preprocess();
                h.renderBrush(d.prepare(), this.data, d);
                d.interval = e;
                d.postprocess && d.postprocess()
            } else console.warn("brush undefined", d, this)
        }

        function c(a) {
            var b = f.toolkitConfig[a.type],
                c = 0;
            b.diameter && a.diameter && (isFinite(a.diameter) ? c = a.diameter || 0 : isFinite(a.diameter.value) ? c = a.diameter.value : isFinite(a.diameter.min) &&
                (c = a.diameter.max));
            var d = b.scale && a.scale && a.scale.max || 1,
                e = b.translate && a.translate && a.translate.max || 0,
                e = 2 * Math.sqrt(e * e + e * e);
            return Math.ceil(((2 * (b.blur && a.blur || 0) + c + (b.lineWidth && a.lineWidth || 0)) * d + e) / 2)
        }
        var h = this,
            b = f.canvas2d,
            a = f.contexts,
            w = g.detect,
            u = g.feature.tools.brush,
            x = g.feature,
            p = g.net,
            m = f.render,
            v = f.scene,
            r = g.style,
            y = f.toolkit,
            t = g.util,
            E = g.vector,
            z = E.Cubic,
            C = E.Point,
            A = {};
        h.id = "brush";
        h.units = u.units;
        h.device = {};
        h._attributes = {
            pathSimplify: "number",
            pathSmoothing: "number",
            content: "string",
            finger: "string",
            blur: "number",
            mode: "number",
            curved: "boolean",
            diameter: "number",
            increment: "number",
            lineWidth: "number",
            radius: "number",
            speed: "number",
            interval: "number",
            spacing: "clamp",
            spread: "number",
            src: "string",
            tolerance: "number",
            contiguous: "boolean",
            rotate: "clamp",
            scale: "clamp",
            translate: "clamp",
            data: "object"
        };
        var I = t.copy(h._attributes);
        h.attributes = t.copyInto(g.attrs.__styledObject, I);
        (function() {
            var b = {};
            h.enabled = !1;
            h.enable = function() {
                var c = h.device.brush || {};
                c.enable && c.enable();
                !1 === h.enabled &&
                    (h.enabled = !0, B.enable(), g.keyboard && g.keyboard.listen(f, b), b.ambiguous = eventjs.proxy.ambiguous({
                        target: a.active,
                        ongesture: {
                            listener: y.select.onGesture
                        },
                        ondrag: {
                            listener: h.onRecord,
                            maxFingers: c.usePointerMax || t.INFINITY,
                            monitor: c.useMonitor || !1
                        }
                    }))
            };
            h.disable = function() {
                var a = h.device.brush || {};
                a.disable && a.disable();
                !0 === h.enabled && (h.enabled = !1, B.disable(), eventjs.bulk(b, "remove"))
            }
        })();
        h.addPointClone = function(a) {
            var b = a.pointerId,
                c = a.batchRecord,
                d = a.pathRecord;
            if (c && 0 === c.length) {
                var e = {
                    cmd: "L",
                    x: a.x,
                    y: a.y
                };
                c.push(e);
                d.push(e);
                a.state = "move";
                a.dirtyRender = !0;
                f.on.record && f.on.record({
                    op: "TOOL",
                    data: {
                        state: y.cleanState(a.state),
                        pointerId: b,
                        point: v.pointInPeerSceneFromCanvas(e),
                        metaKey: eventjs.metaKey,
                        shiftKey: eventjs.shiftKey
                    }
                });
                m.dirtyPointer = !0
            }
        };
        h.loadResource = function(a) {
            var b = a.object,
                c = a.onerror,
                d = a.onsuccess;
            a = b.type;
            var m = g.module.toolkit["brush." + a];
            m ? new m(g, f, b, function(a, m) {
                m ? c && c(b, {
                    fatal: !0,
                    message: "&ldquo;" + b.src + "&rdquo; " + b.type + " unavailable."
                }) : (v.copyProperties(h, b, a),
                    a.toolkit = h, a.layer = b, a.prepare = a.prepare || y.prepareBrush, a.seed = b.seed || a.seed || t.Random.seed(), a.ctx = h.ctx, a.active = h.draw, a.cache = h.cache, f.loadStyle(a, function() {
                        b.fill && (b.fill.__colors = a.fill.__colors);
                        b.stroke && (b.stroke.__colors = a.stroke.__colors);
                        b.dirtyCheck = !0;
                        b.render = e;
                        b.brush = a;
                        d && d(b)
                    }))
            }) : c && c(b, {
                fatal: !0,
                message: a + " unavailable."
            })
        };
        h.createObject = function(a, b) {
            var c = a.device,
                d = a.object,
                e = v.copyProperties(h, c);
            e.data = t.copy(d.path);
            e.bbox = t.copyInto(d.bbox, h.updateObjectSize(e, !0));
            e.interval = c.__interval;
            d = v.addObject(e);
            b && b(d);
            return d
        };
        var B = function() {
            var b = {},
                c = !1;
            return {
                enable: function() {
                    if (u.useGhostMode && eventjs.isMouse) {
                        var d = h.device.brush;
                        d && !1 !== d.useGhostMode && !1 === c && (c = !0, b.onGhostOut = eventjs.add(a.active, "mouseout", l), b.onGhostMove = eventjs.add(a.active, "mousemove", k))
                    }
                },
                disable: function() {
                    !0 === c && (c = !1, eventjs.bulk(b, "remove"), m.dirtyPointer = !0, m.removePointer("ghost"))
                }
            }
        }();
        h.onRecord = function(a, b) {
            if ("eyeDropper" !== g.ui.colorPicker.state) {
                var e = b.state,
                    p =
                    b.pointerDown,
                    r = b.pointerStart,
                    k = b.pointerDrag,
                    l = b.pointerMove,
                    q = b.pointerEnd,
                    w = f.getActionUid(b),
                    x = isFinite(b.shiftKey) ? b.shiftKey : eventjs.shiftKey,
                    z = isFinite(b.metaKey) ? b.metaKey : eventjs.metaKey,
                    I = !!a,
                    V = I && f.on.record,
                    P = I && r,
                    X = I && (r || l);
                f.__interacting = p;
                I && (q && (h.device.brush.event = a), r ? (B.disable(), eventjs.prevent(a)) : q ? eventjs.prevent(a) : eventjs.cancel(a));
                if (p = d(w, P)) {
                    p.lastModified = Date.now();
                    var w = p.pointerId,
                        N = p.object,
                        p = N.type,
                        P = N.brush;
                    P.state = e;
                    P.pointerId = w;
                    P.isGhost = !1;
                    P.isRecording = !0;
                    P.isFromBrowser = I;
                    var W = P.batchRecord || (P.batchRecord = []),
                        T = P.pathRecord || (P.pathRecord = []),
                        Y = T.length,
                        S = f.scrollY,
                        ca = f.scrollX;
                    if (X) {
                        var X = b.env,
                            ha = ca + "x" + S;
                        X.scroll !== ha && (X.scroll = ha, b.resetBoundingBox(), P.dirtyRender = !0)
                    }
                    var X = f.zoom,
                        ea = f.zoom * f.scale,
                        da = (X - 1) / X,
                        ha = S * da,
                        da = ca * da,
                        la = b.x / ea + da,
                        ka = b.y / ea + ha,
                        aa = {
                            x: la,
                            y: ka
                        },
                        ea = {
                            x: b.start.x / ea + da,
                            y: b.start.y / ea + ha
                        };
                    if (V) {
                        var qa;
                        r && (qa = v.copyDeepCompress(v.copyAttributes(h.attributes, P)));
                        f.on.record({
                            op: "TOOL",
                            data: {
                                config: qa,
                                state: y.cleanState(e),
                                pointerId: w,
                                point: v.pointInPeerSceneFromCanvas(b),
                                metaKey: z,
                                shiftKey: x
                            }
                        })
                    }
                    if (r) P.__snap = void 0, P.__snapShift = x;
                    else if (P.__snapShift)
                        if (P.__snap) e = P.__snap, aa = C.nearestOnLine(aa, e.origin, e.end);
                        else if (e = C.distance(ea, aa), 4 < e / X) x = .25 * Math.PI, e = C.angle(ea, aa), e = Math.round(e / x) * x, P.__snap = {
                        angle: e,
                        origin: aa,
                        end: C.atRadianDistance(aa, e, 1)
                    };
                    else return;
                    if (!(r && P.onPointerStart && P.onPointerStart(b, aa) || l && P.onPointerMove && P.onPointerMove(b, aa) || k && P.onPointerDrag && P.onPointerDrag(b, aa)))
                        if (q && P.onPointerEnd &&
                            P.onPointerEnd(b, aa)) m.removePointer(w);
                        else {
                            if (q && Y && P.onDoubleTap) {
                                l = Date.now();
                                e = P.__dblTapObject;
                                x = T[Y - 1];
                                if (2 < Y && e && (e = C.distance(e, x), 500 > l - P.__dblTapTimestamp && 15 >= e && P.onDoubleTap(b, aa))) return;
                                P.__dblTapObject = C(x);
                                P.__dblTapTimestamp = l
                            }
                            P.onPointer && P.onPointer(b, W, aa) || (r ? (P.__interval = P.interval, P.ghostDistance && I && isFinite(A.ghostX + A.ghostY) && (aa.x = A.ghostX + ca / X + da, aa.y = A.ghostY + S / X + ha, delete A.ghostX, delete A.ghostY), aa.cmd = "M", !0 === P.click ? W.splice(0, 1, aa) : (T.push(aa), W.push(aa)), P.ghostDistance &&
                                (k = C(la, ka), k.cmd = "L", T.push(k), W.push(k))) : (aa.cmd = k ? "L" : "Z", P.lineRecord ? (aa.cmd = "L", T.splice(1, 1, aa), W.splice(1, 1, aa), q && (r = C(aa), r.cmd = "Z", T.splice(2, 1, r), W.splice(2, 1, r), P.lineRecordRotate && (r = C(W[0]), k = C(W[1]), e = C.angle(r, k), "objectBoundingBox" === u.units ? r = C.atTimeOnLine(r, k, .5) : (k = C(c(N)), r = C.add(r, C.rotate(k, e + Math.PI))), k = new E.Transform, k.rotateAt(-e / 2, r), k.flatten(W), k.flatten(T), W.__rotate = e * t.RAD_DEG))) : P.click ? k && W.splice(0, 1, aa) : (T.push(aa), W.push(aa))), q && (m.removePointer(w), I && (h.gestures--,
                                h.device.interval = P.interval || 1, 1 === b.fingers && B.enable()), T.length && (N = h.createObject({
                                device: P,
                                object: {
                                    toolkitId: "brush",
                                    type: p,
                                    path: T,
                                    bbox: {
                                        rotate: W.__rotate || 0
                                    }
                                }
                            }), h.renderToScene(N, function() {
                                I && h.addToHistory(N)
                            })), I && (h.device.brush.seed = t.Random.seed())), P.dirtyRender = !0, m.dirtyPointer = !0)
                        }
                }
            }
        };
        h.closePointerThread = function() {
            delete A.pointerId
        };
        h.renderToScene = function(b, c) {
            if (x.doc.editable) m.objectToScene(b, c);
            else {
                var d = a.layer0.ctx;
                d.globalAlpha = 1;
                d.globalCompositeOperation = "source-over";
                d.drawImage(a.draw, 0, 0);
                b.dirtyCheck = !1;
                c && c()
            }
        };
        h.renderBrush = function(a, b, c) {
            var d = b.length;
            if (0 !== d) {
                var e = c.type,
                    f = "disco" === c.composite,
                    m = c.isEraser,
                    g = c.isRecording,
                    p = c.isGhost,
                    k = isFinite(c.pathSmoothing),
                    t = isFinite(c.pathSimplify);
                c.dirtyRender = !1;
                c.interval = c.interval || 1;
                c.path = c.pathRecord || b;
                if (a = c.renderTo || c.ctx) {
                    a.save();
                    w.useLocalAlpha[e] && (a.globalAlpha = (c.opacity || 100) / 100 * (c.fill.opacity || 1));
                    a.globalCompositeOperation = m ? "source-over" : r.getComposite(c.composite, !!w.useSafeGCO[e] ||
                        !g);
                    if (c.render) {
                        if (k || t) t && (c.path = E.simplify(c.path, c.pathSimplify, !0)), k && (c.path = E.catmullRomSpline({
                            amount: c.pathSmoothing,
                            path: c.path
                        }));
                        b = b[d - 1];
                        c.cmd = b && b.cmd;
                        c.render(c)
                    } else
                        for (var e = z.pointAtTime, v, l = 0; l < d; l++) {
                            v = g || p ? b.shift() : b[l];
                            var y = c.x = v.x,
                                q = c.y = v.y,
                                u = c.cmd = v.cmd;
                            if ("M" === u) b.increment = 0, c.px = c.__px = m = y, c.py = c.__py = t = q, g && h.gestures++, c.drawStart && c.drawStart();
                            else if ("Z" === u) {
                                c.drawEnd && c.drawEnd();
                                break
                            } else c.px = m = c.__px, c.py = t = c.__py;
                            if (c.draw) {
                                var x = c.spacing,
                                    A = x.min,
                                    C = x.max,
                                    B = y - m,
                                    I = q - t,
                                    x = Math.sqrt(B * B + I * I) + 1;
                                if (!(x < A && "M" !== u)) {
                                    u = B / x || 0;
                                    A = I / x || 0;
                                    I = C || 1;
                                    C = C < x - 1 ? C : x - 1;
                                    if (k = k && !g) {
                                        var ha = b[l - 2] || {
                                                x: m,
                                                y: t
                                            },
                                            ea = {
                                                x: m,
                                                y: t
                                            },
                                            da = v,
                                            la = b[l + 1] || v;
                                        if (!(ha && ea && da && la)) continue
                                    }
                                    v = m;
                                    for (B = t; C < x; C += I) k ? (q = e(m, t, ea.x + (da.x - ha.x) / 6, ea.y + (da.y - ha.y) / 6, da.x + (ea.x - la.x) / 6, da.y + (ea.y - la.y) / 6, da.x, da.y, C / x), y = q.x, q = q.y) : (y = m + u * C, q = t + A * C), f && (a.globalCompositeOperation = 0 === c.interval % 2 ? "lighter" : "source-over"), c.x = y, c.y = q, c.px = v, c.py = B, c.draw(b.increment), c.interval++, v = y, B = q;
                                    c.__px = y;
                                    c.__py =
                                        q;
                                    b.increment++
                                }
                            }
                        }
                    a.restore()
                } else console.warn("undefined rendering context")
            }
        };
        h.onMultiRecord = function(a, b, c) {
            a = [{
                type: "arrow",
                composite: "hard-light",
                opacity: 100,
                diameter: 60,
                curved: !0
            }, {
                type: "pen",
                composite: "normal",
                opacity: 100,
                diameter: {
                    min: 2,
                    max: 30
                }
            }];
            b.x -= -5 * a.length / 2;
            b.y -= -5 * a.length / 2;
            b.interval = 1;
            for (var e = 0; e < a.length; e++) {
                if (b.pointerStart) {
                    var f = a[e],
                        m = y.brush,
                        g = v.copyAttributes(m.attributes, m.device.brush, {});
                    v.copyAttributes(m.attributes, f, g);
                    d(e, !0, g)
                }
                b.x += -5;
                b.y += -5;
                b.interval += -5;
                b.identifier = e;
                b.isFromBrowser = !0;
                h.onRecord(null, b, c)
            }
        };
        h.updateObjectSize = function(d, e) {
            var m = d.bbox,
                g = m && m.scale.x || 1,
                p = c(d);
            if ("floodfill" === d.type) var r = a.layer0,
                p = 0,
                k = {
                    x1: 0,
                    y1: 0,
                    x2: r.width,
                    y2: r.height
                };
            else k = isFinite(d.pathSmoothing) ? new E.BBox(E.catmullRomSpline({
                amount: d.pathSmoothing,
                path: d.data
            })) : new E.BBox(d.data);
            if (m) var t = m.units || "objectBoundingBox",
                v = (m.padding || 0) - p,
                r = m.x + v * g,
                l = m.y + v * g,
                v = 0;
            else t = h.units, v = p, r = k.x1, l = k.y1;
            var y = k.x2 - k.x1 + 2 * p,
                q = k.y2 - k.y1 + 2 * p,
                t = {
                    x: r - v * g,
                    y: l - v * g,
                    width: y,
                    height: q,
                    padding: p,
                    units: t,
                    viewBox: [0, 0, y, q]
                };
            if (e && !m) {
                r = k.x1 + p * g - p;
                l = k.y1 + p * g - p;
                m = d.data;
                for (g = 0; g < m.length; g++) p = m[g], p.x -= r, p.y -= l, isFinite(p.x1 + p.y1) && (p.x1 -= r, p.y1 -= l), isFinite(p.x2 + p.y2) && (p.x2 -= r, p.y2 -= l);
                r = f.zoom * f.pixelRatio;
                t.x -= 1 * b.x / r;
                t.y -= 1 * b.y / r;
                return t
            }
            t.scale = m.scale;
            t.rotate = m.rotate;
            return d.bbox = t
        };
        h.addToHistory = function(a) {
            f.history && a && f.history.store({
                cmd: "add",
                pointerId: a.pointerId,
                name: a.type,
                data: [a]
            }, {
                userId: p.user.id
            })
        };
        y.init(h)
    })
})(sketch);
(function(k) {
    k.addToolkit("brush.arrow", function(g, f, k, l) {
        function d(b, c, d, e) {
            b.moveTo(c.x, c.y);
            b.lineTo(d.x, d.y);
            b.lineTo(e.x, e.y);
            d = a.distance(c, e);
            c = a.atTimeToRadius(c, e, .5, .25 * d);
            b.lineTo(c.x, c.y);
            b.closePath()
        }
        var e = this,
            c = f.toolkit,
            h = g.util;
        g = g.vector;
        var b = g.Shape,
            a = g.Point;
        e.construct = function(a, b) {
            e.curved = !!a.curved;
            e.diameter = isFinite(a.diameter) ? a.diameter : 30;
            e.ghostDistance = isFinite(a.ghostDistance) ? a.ghostDistance : 10;
            e.mode = a.mode;
            e.pathSimplify = .5;
            e.pathSmoothing = .5;
            !1 === e.curved &&
                (e.lineRecord = !0, e.lineRecordRotate = !0);
            b(e)
        };
        e.render = function() {
            var g = e.renderTo,
                k = e.path,
                l = k.length - 1,
                p = e.mode || 1,
                m = e.diameter,
                v = m / 2;
            g.save();
            g.beginPath();
            g.lineWidth = m / 4;
            if (e.curved) {
                g.lineCap = "round";
                g.lineJoin = "round";
                b.VOBPathOffset(g, k, 0, 0);
                p = c.getBBox(e);
                g.strokeStyle = f.getW3CStyle("fill", g, p.x1, p.y1, p.x2, p.y2, e);
                g.stroke();
                var m = k[l],
                    r = k[l];
                if (m && r) {
                    for (; l--;)
                        if (7 < a.distance(r, k[l])) {
                            m = k[l];
                            break
                        }
                    var l = 1,
                        k = v / a.distance(m, r),
                        y = a.atTimeToRadius(m, r, l - k, v),
                        t = a.atTimeToRadius(m, r, 1 + k, 0),
                        q =
                        a.atTimeToRadius(m, r, l - k, -v);
                    g.beginPath();
                    d(g, y, t, q);
                    g.fillStyle = g.strokeStyle;
                    g.fill()
                }
            } else if (g.lineCap = "miter", g.miterLimit = 20, m = k[0], r = k[l], m && r) {
                a.equals(m, r) && (m.x -= h.ZERO, m.y -= h.ZERO);
                var l = 1,
                    z = .5 * v,
                    k = v / a.distance(m, r),
                    C = Math.min(1.5, v / 4 * .25);
                if (1 === p) var y = a.atTimeToRadius(m, r, l, z),
                    t = a.atTimeToRadius(m, r, l, -z),
                    q = a.atTimeToRadius(m, r, -k, -C),
                    A = a.atTimeToRadius(m, r, -k, C);
                else 2 === p ? (A = a.atTimeToRadius(m, r, 0, z), q = a.atTimeToRadius(m, r, 0, -z), t = a.atTimeToRadius(m, r, l + k, -C), y = a.atTimeToRadius(m,
                    r, l + k, C)) : (y = a.atTimeToRadius(m, r, l, z), t = a.atTimeToRadius(m, r, l, -z), q = a.atTimeToRadius(m, r, 0, -z), A = a.atTimeToRadius(m, r, 0, z));
                g.moveTo(y.x, y.y);
                g.lineTo(t.x, t.y);
                g.lineTo(q.x, q.y);
                g.lineTo(A.x, A.y);
                g.closePath();
                if (1 === p || 3 === p) y = a.atTimeToRadius(m, r, l - k, v), A = a.atTimeToRadius(m, r, 1 + k, 0), l = a.atTimeToRadius(m, r, l - k, -v), d(g, y, A, l);
                if (2 === p || 3 === p) y = a.atTimeToRadius(m, r, k, v), A = a.atTimeToRadius(m, r, -k, 0), l = a.atTimeToRadius(m, r, k, -v), d(g, l, A, y);
                c.setStyle(g, e)
            }
            g.restore()
        };
        e.construct(k, l)
    })
})(sketch);
(function(k) {
    k.addToolkit("brush.calligraphy", function(g, f, k, l) {
        var d = this;
        d.construct = function(e, c) {
            d.diameter = isFinite(e.diameter) ? e.diameter : 30;
            d.spacing = e.spacing || [0, 0];
            d.angle = e.angle || 0;
            d.pathSmoothing = 0;
            c(d)
        };
        d.draw = function() {
            var e = d.diameter,
                c = d.renderTo;
            c.save();
            c.beginPath();
            c.globalCompositeOperation = "source-over";
            c.lineJoin = "round";
            c.lineCap = "round";
            c.translate(-e / 2, 0);
            c.moveTo(d.px, d.py);
            c.lineTo(d.px + e, d.py - e / 2);
            c.lineTo(d.x + e, d.y - e / 2);
            c.lineTo(d.x, d.y);
            c.closePath();
            var e = d.fill.__colors || [],
                h = e.length,
                e = e[Math.abs((2 * d.interval + 1) % (2 * h) - h)];
            c.fillStyle = e;
            c.fill();
            c.strokeStyle = e;
            c.stroke();
            c.restore()
        };
        d.construct(k, l)
    })
})(sketch);
(function(k) {
    k.addToolkit(["brush.eraser", "brush.paintbrush"], function(g, f, k, l) {
        var d = f.toolkit,
            e = f.render,
            c = g.vector.Shape;
        this.bitmap = {};
        this.construct = function(c, b) {
            this.diameter = isFinite(c.diameter) ? c.diameter : 30;
            this.blur = isFinite(c.blur) ? c.blur : 10;
            this.spacing = c.spacing || [0, 0];
            this.pathSmoothing = this.pathSimplify = .5;
            b(this)
        };
        this.render = function(h) {
            var b = this.isRecording,
                a = this.isEraser,
                g = this.useAreaTracker,
                k = this.renderTo,
                l = f.pixelRatio,
                p = d.getBBox(this),
                m = this.diameter,
                v = this.blur * l;
            if (v)
                if (h &&
                    h.bbox) {
                    var r = h.bbox.scale.x;
                    h = Math.ceil(h.bbox.width) * l;
                    var y = e.cache.pad / Math.abs(r);
                    h = h - v + y;
                    y = 0
                } else {
                    r = f.zoom;
                    h = f.viewport;
                    var t = h.height,
                        q = h.width,
                        z = m + v;
                    t > q ? (h = q / r + m / 2, y = 0, 0 > this.x * r - q / 2 ? (h -= Math.min(0, p.x1 + z), h = -1 * h * l) : (h -= Math.min(0, h - (p.x2 + z)), h *= l)) : (h = 0, y = t / r + m / 2, 0 > this.y * r - t / 2 ? (y -= Math.min(0, p.y1 + z), y = -1 * y * l) : (y -= Math.min(0, y - (p.y2 + z)), y *= l))
                }
            else y = h = 0;
            k.save();
            k.beginPath();
            c.VOBPathOffset(k, this.path, -h / l, -y / l);
            a ? (a = f.computed.background, b && k.translate(f.canvas2d.x, f.canvas2d.y)) : (b =
                this.fill.__colors || [0, "#000"], a = b[1 % b.length]);
            v ? (k.strokeStyle = "#000", k.shadowOffsetX = h * r, k.shadowOffsetY = y * r, k.shadowBlur = Math.abs(v * r), k.shadowColor = a && a.indexOf ? a : "#000") : k.strokeStyle = a;
            k.lineCap = "round";
            k.lineJoin = "round";
            k.lineWidth = m;
            k.stroke();
            k.shadowBlur = null;
            g && d.setStyleToArea(k, this, p);
            k.restore()
        };
        this.construct(k, l)
    })
})(sketch);
(function(k) {
    k.addToolkit("brush.pencil", function(g, f, k, l) {
        var d = this,
            e = f.toolkit,
            c = g.vector.Shape;
        d.construct = function(c, b) {
            d.diameter = isFinite(c.diameter) ? c.diameter : 30;
            d.spacing = c.spacing || [0, 0];
            d.pathSimplify = .5;
            d.pathSmoothing = .5;
            b(d)
        };
        d.render = function(h) {
            var b = d.path;
            h = d.renderTo;
            h.save();
            h.beginPath();
            h.lineCap = "round";
            h.lineJoin = "round";
            h.lineWidth = d.diameter;
            c.VOBPathOffset(h, b, 0, 0);
            b = e.getBBox(d);
            h.strokeStyle = f.getW3CStyle("fill", h, b.x1, b.y1, b.x2, b.y2, d);
            h.stroke();
            h.restore()
        };
        d.construct(k,
            l)
    })
})(sketch);
(function(k) {
    k.addToolkit(["brush.streamer", "brush.pen"], function(g, f, k, l) {
        function d(b, a, c, d) {
            d = d.renderTo;
            if (b.hasMoved) {
                var e = 1 * b.thickness,
                    h = b.cos,
                    f = b.sin;
                d.arc(a, c, e, 0, 2 * Math.PI, !0);
                d.moveTo(b.x + h, b.y + f);
                d.lineTo(a + 1 * h, c + 1 * f);
                d.lineTo(a - 1 * h, c - 1 * f);
                d.lineTo(b.x - h, b.y - f);
                d.lineTo(b.x + h, b.y + f)
            } else d.arc(a, c, 1.5, 0, 2 * Math.PI, !0);
            b.useMultiFill && (d.fillStyle = b.color, d.fill(), d.beginPath())
        }
        var e = this,
            c = Math.PI / 2,
            h = {};
        e.construct = function(b, a) {
            e.spacing = b.spacing || [0, 0];
            e.diameter = b.diameter || 10;
            a(e)
        };
        e.drawStart = function() {
            var b = e.renderTo;
            b.lineCap = "round";
            b.lineJoin = "round";
            b.beginPath();
            b = e.fill;
            b.mode = "cycle";
            var a = h[e.pointerId] = {};
            a.x = e.x;
            a.y = e.y;
            a.px = e.x;
            a.py = e.y;
            a.vectorx = 0;
            a.vectory = 0;
            a.cos = 0;
            a.sin = 0;
            a.thickness = 0;
            a.angle = c;
            a.color = "#000";
            a.hasMoved = !1;
            a.useMultiFill = e.isRecording || "gradient" === b.type
        };
        e.draw = function() {
            var b = h[e.pointerId];
            if (null == b) console.warn("Streamer not setup", b);
            else {
                var a;
                a = e.fill.__colors || [];
                var f = a.length;
                a = a[Math.abs((2 * e.interval + 1) % (2 * f) - f)];
                b.color = a;
                a = e.x - b.px;
                f = e.y - b.py;
                if (!(1 >= Math.abs(a) && 1 >= Math.abs(f))) {
                    b.hasMoved = !0;
                    0 > a * b.vectorx + f * b.vectory && (d(b, e.px, e.py, e), b.x = b.px = e.px, b.y = b.py = e.py, b.angle += Math.PI, b.thickness *= 1);
                    b.x += .5 * (e.x - b.x);
                    b.y += .5 * (e.y - b.y);
                    var g = b.x - b.px,
                        k = b.y - b.py,
                        p = Math.sqrt(g * g + k * k),
                        m = e.diameter,
                        l = Math.max(m.min, Math.min(m.max, p)),
                        g = 0 === p ? 0 : c + Math.atan2(k, g),
                        m = "pen" === e.type ? (.5 + Math.max(0, m.max - l) + m.min) / 2 : (.5 + l) / 2,
                        k = b.thickness,
                        l = b.angle,
                        m = k + .42 * (m - k),
                        r = Math.sin(l),
                        y = Math.cos(l),
                        l = k * r,
                        k = k * y,
                        t = m * Math.sin(g),
                        q = m * Math.cos(g),
                        z = b.x,
                        C = b.y,
                        A = b.px,
                        I = b.py;
                    if (b.useMultiFill) var B = Math.sin(g - c),
                        D = Math.cos(g - c),
                        A = A - .25 * D,
                        I = I - .25 * B,
                        z = z + .25 * D,
                        C = C + .25 * B;
                    B = .33 * p * r;
                    D = -.33 * p * y;
                    p = A + k + B;
                    r = I + l + D;
                    y = A - k + B;
                    B = I - l + D;
                    D = e.renderTo;
                    D.moveTo(A + k, I + l);
                    D.quadraticCurveTo(p, r, z + q, C + t);
                    D.lineTo(z - q, C - t);
                    D.quadraticCurveTo(y, B, A - k, I - l);
                    D.lineTo(A + k, I + l);
                    b.useMultiFill && (D.fillStyle = b.color, D.fill(), D.beginPath());
                    b.px = b.x;
                    b.py = b.y;
                    b.angle = g;
                    b.thickness = m;
                    b.vectorx = a;
                    b.vectory = f;
                    b.cos = q;
                    b.sin = t
                }
            }
        };
        e.drawEnd = function() {
            var b = e.pointerId,
                a = h[b];
            a && (delete h[b],
                d(a, e.x, e.y, e), a.useMultiFill || (b = e.renderTo, b.fillStyle = a.color, b.fill()))
        };
        e.construct(k, l)
    })
})(sketch);
(function(k) {
    k.addToolkit(["brush.crayon", "brush.stamp"], function(g, f, k, l) {
        var d = this,
            e = g.dom,
            c = g.assets,
            h = g.util,
            b = g.vector;
        d.bitmap = {};
        d.getStampResource = function(a, b, d) {
            c.exists(a) ? b(c.getItem(a)) : c.add({
                type: "image",
                data: a,
                onerror: d,
                onsuccess: function(a, c) {
                    b(c)
                }
            })
        };
        d.construct = function(b, c) {
            d.rand = h.Random(d.seed || 1);
            d.diameter = b.diameter || 20;
            d.speed = b.speed || void 0;
            d.rotate = b.rotate || {
                min: 0,
                max: 0
            };
            d.scale = b.scale || {
                min: 1,
                max: 1
            };
            d.translate = b.translate || {
                min: 0,
                max: 0
            };
            d.spacing = b.spacing || a(d.diameter);
            d.pollock = b.pollock || !1;
            d.src = b.src || void 0;
            d.resource = new Image;
            d.src ? d.getStampResource(d.src, function(a) {
                d.resource = a;
                d.resource.loaded = !0;
                d.resource.error = !1;
                c(d)
            }, function() {
                d.resource.loaded = !0;
                d.resource.error = !0;
                c(d, "404")
            }) : c(d)
        };
        d.drawStart = function() {
            d.scaleX = d.bbox && d.bbox.scale.x || 1;
            "crayon" === d.type && (d.fill.mode = "cycle", d.spacing = a(d.diameter), d.src = void 0, d.scale = {
                min: 1,
                max: 1
            }, d.rotate = {
                min: 1,
                max: 360
            });
            var b = d.pointerId,
                c = d.rand = h.Random(d.seed || 1);
            d.rr = c.toDouble();
            d.sr = c.toDouble();
            d.bitmap[b] = d.create()
        };
        d.draw = function() {
            var a = d.renderTo,
                c = d.ratio,
                e = d.pointerId;
            if (d.bitmap[e]) {
                var e = d.bitmap[e],
                    f = e.canvas.width,
                    m = e.canvas.height,
                    g = f / 2,
                    r = m / 2;
                if (g && r) {
                    var k = d.translate.min || 1E-5,
                        t = d.translate.max || 1E-5;
                    if (0 === k && 0 === t) var l = 0,
                        k = 0;
                    else l = (t - k) * d.rand.toDouble() + k, k = (t - k) * d.rand.toDouble() + k;
                    var t = d.scale.min,
                        q = d.scale.max,
                        c = 1 === t && 1 === q ? c || 1E-5 : ((q - t) * d.rand.toDouble() + t) * c || 1E-5,
                        t = 0,
                        C = d.rotate.min,
                        q = d.rotate.max;
                    0 <= C && 0 <= q && (C <= q ? t = (q - C) * d.rand.toDouble() + C : (t = C - q, C = (360 - t) *
                        d.rand.toDouble(), t = C > q ? C + t : C));
                    d.pollock || a.save();
                    "cycle" === d.fill.mode && (q = d.fill.__colors || [], C = q.length, q = q[Math.abs((2 * d.interval + 1) % (2 * C) - C)], q !== e.fillStyle && (e.fillStyle = q, e.fillRect(0, 0, f, m)));
                    a.translate(d.x - g * c, d.y - r * c);
                    1 !== c && a.scale(c, c);
                    0 !== t && (a.translate(g, r), a.rotate(t * h.DEG_RAD), a.translate(-g, -r));
                    a.translate(1 * l / c, 1 * k / c);
                    a.drawImage(e.canvas, 0, 0);
                    d.decorate && (a.beginPath(), a.fillStyle = e.fillStyle, b.Shape.star(a, 0, 0, 10, 5, 2), a.fill());
                    d.pollock || a.restore()
                }
            }
        };
        d.drawEnd = function() {
            delete d.bitmap[d.pointerId]
        };
        d.create = function() {
            var a = d.pointerId,
                c = d.diameter * f.pixelRatio,
                h = Math.round(d.scale.max * c);
            if (!a || !h) return console.warn("stamp error", a, h);
            if (d.bitmap[a]) var g = d.bitmap[a],
                m = g.canvas;
            else m = e.Canvas(), g = m.ctx;
            if (d.src) {
                c = d.resource;
                if (c.error) return g;
                if ("clipart" === c.type) var k = c.viewBox,
                    r = k[2],
                    l = r - k[0],
                    k = k[3] - k[1];
                else l = c.width, k = c.height;
                l > h && (k *= h / l, l = h);
                k > h && (l *= h / k, k = h);
                var t = Math.sqrt(l * l + k * k);
                t > h && (h /= t, l *= h, k *= h);
                m.width = l;
                m.height = k;
                "clipart" === c.type ? (h = l / r, m = (new b.Transform).scale(h),
                    c.render({
                        ctx: g,
                        matrix: m.matrix
                    })) : g.drawImage(c, 0, 0, l, k)
            } else {
                l = m.width = h;
                k = m.height = h;
                m = g.getImageData(0, 0, l, k);
                r = m.data;
                h = 25 * c;
                c /= 2;
                for (t = 0; t < h; t++) {
                    var q = d.rand.toDouble() * c,
                        z = 2 * d.rand.toDouble() * Math.PI,
                        C = Math.sin(z) * q + c + .5 >> 0,
                        z = Math.cos(z) * q + c + .5 >> 0;
                    C >= l || 0 >= C || z >= k || 0 >= z || (r[4 * (z * l + C) + 3] = 255 * (1.5 - q / c))
                }
                g.putImageData(m, 0, 0)
            }
            g.globalCompositeOperation = "none" === d.fill[d.fill.type] ? "source-atop" : "source-in";
            g.fillStyle = f.getW3CStyle("fill", g, 0, 0, l, k, d);
            g.fillRect(0, 0, l, k);
            t = Math.sqrt(l * l + k * k);
            d.ratio = 1 / (t / d.diameter);
            return d.bitmap[a] = g
        };
        var a = function(a) {
            a = Math.sqrt(a);
            return {
                min: a,
                max: a
            }
        };
        d.construct(k, l)
    })
})(sketch);
(function(k) {
    var g = function(f) {
        return function(g, k, d, e) {
            function c(a) {
                if ("down" === a.state) {
                    if (1 < S()) return la(), !0;
                    ea()
                }
            }

            function h() {
                var a = z.self;
                if (a) z.toolkit.onRecord(a.event, a)
            }

            function b(a) {
                "down" === a.state && z.savePath()
            }

            function a(a) {
                ha();
                ca();
                z.__dblTapObject = void 0
            }

            function w(a) {
                if (1 < S()) return console.log("redo"), !0
            }

            function u(a) {
                if (1 < S()) return la(), !0;
                ea()
            }

            function x() {
                var a = Y(),
                    b = a.length,
                    c = a[b - 1],
                    a = a[b - 2];
                if (c && a) return J.distance(c, a)
            }

            function p(a) {
                if (a = a[a.length - 2]) a.bbox = void 0
            }

            function m(a, b) {
                z.convertingPoint = !0;
                var c = z.selected,
                    d = c.idx,
                    e = c.type;
                "cp1" === e && d--;
                var h = a[d],
                    f = J.distance(h, b),
                    m = f;
                "cp2" === e && (f = m = -f);
                if ("Z" === h.cmd) {
                    var g = a.length,
                        e = a[(g + d + 1) % g],
                        g = a[(g + d + 2) % g],
                        p = isFinite(g.x1 + g.y1) ? J(g.x1, g.y1) : h;
                    void 0 === c.point && (g = J.angle(e, p), c.point = J.atRadianDistance(h, g, .001));
                    m <= M && (b = c.point);
                    m = J.distance(e, p)
                }
                var g = J.angle(h, b),
                    c = J.atRadianDistance(h, g, -f),
                    h = J.atRadianDistance(h, g, +m),
                    e = d,
                    d = Y(),
                    g = d.length,
                    p = e - 1,
                    k = e,
                    m = e + 1,
                    f = d[e],
                    f = f.cmd;
                "M" === f ? "Z" === d[g - 1].cmd && (e =
                    g - 1, k = (g + e - 1) % g, p = (g + e - 2) % g, m = (g + e + 2) % g) : "Z" === f && (k = (g + e - 1) % g, p = (g + e - 2) % g, m = (g + e + 2) % g);
                f = d[k];
                e = d[p];
                d = d[m];
                f && ("M" === f.cmd ? z.adding && (d.x2 = c.x, d.y2 = c.y) : (f.cmd = "C", f.x2 = c.x, f.y2 = c.y, f.bbox = void 0, void 0 !== e.angleLock && z.adding || (e.angleLock = !0), isFinite(f.x1 + f.y1) || (f.x1 = e.x, f.y1 = e.y)));
                d && (d.cmd = "C", d.x1 = h.x, d.y1 = h.y, d.bbox = void 0, void 0 !== f.angleLock && z.adding || (f.angleLock = !0), isFinite(d.x2 + d.y2) || (d.x2 = d.x, d.y2 = d.y));
                e && (P(d, f), P(f, e))
            }

            function v(a, b) {
                var c = J.distance(a, b),
                    d = J.angle(a, b);
                return J.atRadianDistance(b,
                    d, c)
            }

            function r(a, b, c) {
                var d = Y(),
                    e = d[a];
                a = d[a + 1];
                e.x -= b;
                e.y -= c;
                e.bbox = void 0;
                a && isFinite(a.x1 + a.y1) && (a.x1 -= b, a.y1 -= c, a.bbox = void 0);
                isFinite(e.x2 + e.y2) && (e.x2 -= b, e.y2 -= c)
            }

            function y(a, b, c, d, e, h) {
                b = J(a[e], a[h]);
                var f = b.y - d.y;
                a[e] -= b.x - d.x;
                a[h] -= f;
                a.bbox = void 0;
                "x1" === e ? c.angleLock = !1 : a.angleLock = !1
            }

            function t(a, b, c, d) {
                a.beginPath();
                a.arc(b.x, b.y, d, 0, 2 * Math.PI);
                a.fillStyle = c;
                a.fill();
                a.lineWidth = .75;
                a.strokeStyle = "#fff";
                a.stroke()
            }

            function E(a, b, c, d) {
                a.beginPath();
                a.rect(b.x - d, b.y - d, 2 * d, 2 * d);
                a.fillStyle =
                    c;
                a.fill();
                a.lineWidth = 1;
                a.strokeStyle = "#000";
                a.stroke()
            }
            var z = this,
                C = k.keyboard,
                A = k.render,
                I = g.style,
                B = k.toolkit,
                D = g.ui,
                F = g.util,
                G = g.vector,
                H = G.Cubic,
                J = G.Point,
                O = G.Shape,
                K = {};
            z.useCubic = !0;
            z.useClosePath = !1;
            z.isEditing = !1;
            z.isRecording = !1;
            var L, M, Q, R = function() {
                if (eventjs.isMouse && z.useMonitor) return L = 5, Q = M = 7, !1;
                M = L = 10;
                Q = 14;
                return !0
            };
            z.construct = function(a, b) {
                z.composite = a.composite || "source-over";
                z.diameter = a.diameter || 0;
                z.lineWidth = a.lineWidth || 1;
                z.opacity = a.opacity || 100;
                z.spacing = a.spacing || [0, 0];
                z.useGhostMode = !1;
                z.usePointerMax = 1;
                z.usePointerThread = !0;
                z.useSnap = !1;
                z.useMonitor = !0;
                z.useCubic = "path" === f;
                z.useClosePath = "polygon" === f;
                var c = B.getFeature({
                    type: f,
                    toolkitId: "brush"
                });
                z.useAddPointAtDistanceOnDrag = c.useAddPointAtDistanceOnDrag;
                z.useBendable = c.useBendable;
                b(z)
            };
            (function() {
                var d = {};
                z.enabled = !1;
                z.enable = function() {
                    !1 === z.enabled && (z.enabled = !0, d.resize = g.on("resize", h), d.scroll = g.on("scroll", h), d.escapeKey = C.on("escapeKey", b), d.enterKey = C.on("enterKey", b), d.backspaceKey = C.on("backspaceKey",
                        c), d.deleteKey = C.on("deleteKey", c), d.altKey = C.on("altKey", a), d.metaKey = C.on("metaKey", a), d.shiftKey = C.on("shiftKey", a), d.undo = C.on("undo", u), d.redo = C.on("redo", w))
                };
                z.disable = function() {
                    !0 === z.enabled && (z.enabled = !1, z.savePath(), eventjs.bulk(d, "remove"))
                }
            })();
            z.render = function(a) {
                var b = z.isRecording;
                a = z.renderTo;
                var c = z.stroke && z.stroke.lineWidth,
                    d = Y();
                a.beginPath();
                a.lineCap = "round";
                a.lineJoin = "round";
                if (b) a.globalAlpha = z.opacity / 100, a.globalCompositeOperation = I.getComposite(z.composite), a.lineWidth =
                    c, z.isEditing ? G.VOBPath(a, d) : G.VOBPath(a, d.slice(0, -1));
                else {
                    var e = z.bbox.scale,
                        e = Math.max(Math.abs(e.x), Math.abs(e.y));
                    a.globalAlpha = 1;
                    a.lineWidth = c / e;
                    G.VOBPath(a, d)
                }
                B.setStyle(a, z);
                if (b) {
                    a.globalAlpha = 1;
                    a.globalCompositeOperation = "source-over";
                    var h = d && d.length;
                    if (h) {
                        var f = z.closingPath,
                            c = z.editingPath,
                            g = z.bendingSegment,
                            b = z.selected || {},
                            e = b.idx;
                        "cp1" === b.type && e--;
                        for (var b = h - 1, m = (e || 0) + (f ? 0 : 1), p = 0; p < h; p++)
                            if (e = d[p]) {
                                var k = e.cmd;
                                if ("C" === k && (p <= m && p >= m - (g ? 2 : 1) || f && 1 === p)) {
                                    var r = d[p - 1],
                                        k = J(e.x1,
                                            e.y1),
                                        l = J(e.x2, e.y2);
                                    J.equals(k, r) || (t(a, k, "#4f80ff", 3), ka.L(a, k, r, "#4f80ff"));
                                    J.equals(l, e) || (t(a, l, "#4f80ff", 3), ka.L(a, l, e, "#4f80ff"))
                                }
                            }
                        e = K.pointAtop;
                        p = K.pointAtopStart;
                        h = K.pointOnPath;
                        if (!(R() || h || e && (!p || eventjs.metaKey || eventjs.altKey) || !1 !== c && !z.useClosePath) && (e = d[b], k = e.cmd, ka[k]))
                            if (r = d[b - 1], p) ka[k](a, r, e, "#46f224");
                            else ka[k](a, r, e, "#4f80ff"), E(a, e, "#fff", 2.5);
                        if (h)
                            if (eventjs.metaKey) c = h.point, a.save(), a.beginPath(), O.exmark(a, c.x, c.y, 3), a.lineWidth = 2.5, a.strokeStyle = "#000", a.stroke(),
                                a.lineWidth = 1.5, a.strokeStyle = "#46f224", a.stroke(), a.restore();
                            else if (!1 === c && (k = h.cmd, ka[k])) ka[k](a, h.point0, h.point1, "#4f80ff");
                        c = "Z" === d[b].cmd;
                        for (p = 0; p < b; p++) !(e = d[p]) || c && p + 1 === b || (h = a, 0 !== p || c ? e.hovered ? eventjs.metaKey ? t(h, e, "#ff3535", 5) : eventjs.altKey ? t(h, e, "#bc19fc", 5) : t(h, e, "#4f80ff", 5) : t(h, e, "rgba(0,0,0,0.75)", 3) : e.hovered ? eventjs.metaKey ? E(h, e, "#ff3535", 4.5) : eventjs.altKey ? E(h, e, "#bc19fc", 4.5) : E(h, e, "#46f224", 4.5) : E(h, e, "#fff", 4.5))
                    }
                }
            };
            z.calcBBox = function() {
                if (z.path) return new G.BBox(Y())
            };
            z.onDoubleTap = function(a, b) {
                z.savePath()
            };
            z.onPointerMove = function(a, b) {
                if (!a.pointerDrag) {
                    z.self = a;
                    z.point = b;
                    for (var c = !1, d = !1, e = z.editingPath, h, f = Y(), g = f.length, m = 0; m < g; m++) {
                        var p = f[m],
                            k = p.cmd,
                            r = m < g - 1,
                            t = p.bbox;
                        void 0 !== t || !r && !1 !== e || (t = p.bbox = new G.BBox({
                            data: [h || p, p],
                            expand: Q,
                            convexHull: !0
                        }));
                        p.hovered = !1;
                        t && (t.hovered = !1, J.inBBox(b, t) && (t.hovered = !0, !r || !1 !== c && "point" === c.type || (t = J.distance(p, b), t < Q && (p.hovered = !0, c = J(p), c.idx = m, c.type = "point", c.distance = t)), !1 === c && ("C" === k ? (k = J(p.x1, p.y1),
                            t = J.distance(k, b), t < Q && (c = k, c.idx = m, c.type = "cp1", c.distance = t), r && (r = J(p.x2, p.y2), t = J.distance(r, b), t < Q && (c = r, c.idx = m, c.type = "cp2", c.distance = t), r = H.nearestPointOnCurve(b, [h, k, r, p]), r.distance < L && (!1 === d || r.distance < d.distance) && (d = {
                                cmd: "C",
                                idx: m,
                                time: r.time,
                                distance: r.distance,
                                point: r.point,
                                point0: h,
                                point1: p
                            }))) : "L" === k && r && (t = J.toLineDistance(b, h, p), t < L && (!1 === d || t < d.distance) && (r = J.nearestOnLine(b, h, p, !0), d = {
                            cmd: "L",
                            idx: m,
                            time: r.time,
                            distance: t,
                            point: r,
                            point0: h,
                            point1: p
                        })))));
                        h = p
                    }
                    e ? da("") : c ? (d = !1, "point" === c.type ? eventjs.altKey ? da("Alter Tension") : eventjs.metaKey ? da("Remove Point") : eventjs.shiftKey ? da("Move Point w/o Handles") : 0 === c.idx ? da("Close Path") : da("Move Point") : eventjs.altKey ? da("Move Handle") : eventjs.metaKey ? da("Remove Handle") : da("Move Handle Mirrored")) : d ? eventjs.metaKey ? da("Add Point") : eventjs.altKey ? "C" === d.cmd ? da("Move Curve") : da("Move Line") : "C" === d.cmd ? da("Bend Curve") : z.useBendable ? da("Bend Line") : da("Move Line") : (t = x()) ? da("D: " + t.toFixed(2) + "px") : da("");
                    K.pointAtop =
                        c;
                    K.pointAtopStart = c && 0 === c.idx;
                    K.pointOnPath = d
                }
            };
            z.onPointer = function(a, b, c) {
                z.batchRecord = b;
                z.self = a;
                var d = a.pointerStart,
                    e = a.pointerEnd,
                    h = a.pointerDrag,
                    f = a.pointerMove,
                    g = eventjs.altKey,
                    k = eventjs.metaKey,
                    t = eventjs.shiftKey;
                d && R() && (z.point = c, ha(), N(c));
                var l = K.pointAtop,
                    q = K.pointAtopStart;
                b = K.pointOnPath;
                a = z.pathRecord;
                var u = a.length;
                z.ghostIdx = void 0;
                if (d)
                    if (da(""), z.selected = void 0, z.adding = !1, z.bendingSegment = !1, z.closingPath = !1, z.convertingPoint = !1, z.deletingPoint = !1, z.editingPath = !0, z.movingPoint = !1, z.movingPointLocked = !1, z.movingSegment = !1, z.splittingSegment = !1, 0 === u) V(c, "M"), U(c), ca();
                    else if (l) {
                    z.selected = l;
                    if (k)
                        if (z.deletingPoint = !0, c = l.idx, a = l.type, "point" === a) {
                            b = Y();
                            a = b[c];
                            if (b = b[c + 1]) "M" === a.cmd ? X(b, "M") : "C" === b.cmd && (b.x1 = a.x1, b.y1 = a.y1), b.bbox = void 0;
                            T(c, 1)
                        } else d = Y(), b = d[c - 1], l = d[c], c = d[c + 1], "cp1" === a ? (l.x1 = b.x, l.y1 = b.y, b.angleLock = l.x1 === b.x2 && l.y1 === b.y2) : (l.x2 = l.x, l.y2 = l.y, l.angleLock = l.x2 === c.x1 && l.y2 === c.y1), P(l, b), l.bbox = void 0;
                    else t ? z.movingPoint = !0 : q ? (V(l, "Z"), z.closingPath = !0, z.selected = {
                        type: "point",
                        idx: S()
                    }) : (c = "point" === l.type, !g && c || g && !c ? z.movingPointLocked = !0 : m(a, l));
                    ca()
                } else if (b) {
                    z.selected = b;
                    if (k) a: switch (z.splittingSegment = !0, c = b.idx, d = b.time, l = a[c - 1], a = a[c], b.cmd) {
                        case "C":
                            d = H.split(l.x, l.y, a.x1, a.y1, a.x2, a.y2, a.x, a.y, d);
                            b = H.fromArray(d[0].slice(2));
                            d = H.fromArray(d[1].slice(2));
                            b.angleLock = l.angleLock;
                            d.angleLock = a.angleLock;
                            T(c, 1, b, d);
                            break a;
                        case "L":
                            a.bbox = void 0, b = J.atTimeOnLine(l, a, d), b.cmd = "L", T(c, 0, b)
                    } else g ? z.movingSegment = b : z.useCubic || z.useBendable ?
                        z.bendingSegment = b : z.movingSegment = b;
                    ca();
                    z.__dblTapObject = void 0
                } else z.isEditing || (U(c), ca());
                else e ? (z.editingPath = !1, z.closingPath ? z.savePath() : J.distance(a[0], a[u - 2]) <= M && 3 < a.length ? z.savePath(!0) : (p(a), N(c), ha(), ca())) : h ? (z.adding && z.useAddPointAtDistanceOnDrag ? x() > z.useAddPointAtDistanceOnDrag ? (p(a), U(c)) : N(c) : z.deletingPoint || z.splittingSegment || (z.movingPoint || z.movingPointLocked ? (b = z.selected, l = b.type, b = b.idx, d = a[b], e = a[b + 1], a = a[b - 1], "point" === l ? (a = d.x - c.x, c = d.y - c.y, z.movingPoint ? (b = Y()[b],
                    b.x -= a, b.y -= c, b.angleLock = !1, b.bbox = void 0) : r(b, a, c)) : "cp1" === l ? y(d, e, a, c, "x1", "y1") : "cp2" === l && y(d, e, a, c, "x2", "y2")) : z.movingSegment ? (a = z.movingSegment, b = a.idx, d = a.point, l = d.x - c.x, d = d.y - c.y, r(b, l, d), r(b - 1, l, d), a.point = c) : z.bendingSegment ? (b = z.bendingSegment, l = b.point, g = l.x - c.x, f = l.y - c.y, e = Math.min(.98, Math.max(.02, b.time)), h = 1 - e, l = 3 * e * h * h, k = 3 * e * e * h, t = .5 >= e ? Math.pow(2 * e, 3) / 2 : 1 - Math.pow(2 * h, 3) / 2, d = (1 - t) / l, l = d * g, d *= f, k = t / k, g *= k, f *= k, e < 1 / 3 ? (g = l * e, f = d * e) : e > 2 / 3 && (l = g * h, d = f * h), k = z.selected.idx, e = a[k], h =
                    a[k - 1], a = a[k + 1], "L" === e.cmd && (H.fromLineSegment(h, e, e), e.angleLock = !1), e.x1 -= l, e.y1 -= d, e.x2 -= g, e.y2 -= f, e.bbox = void 0, h && h.angleLock && isFinite(h.x2 + h.y2) && (l = v(J(e.x1, e.y1), h), h.x2 = l.x, h.y2 = l.y, h.bbox = void 0), a && e.angleLock && isFinite(a.x1 + a.y1) && (l = v(J(e.x2, e.y2), e), a.x1 = l.x, a.y1 = l.y, a.bbox = void 0), b.point = c) : z.convertingPoint || z.useCubic ? m(a, c) : N(c)), ca()) : f && (N(c), ca());
                return !0
            };
            var U = function(a) {
                    V(a, "L");
                    z.adding = !0;
                    z.selected = {
                        type: "point",
                        idx: S() - 1
                    }
                },
                V = function(a, b) {
                    a = J(a);
                    a.cmd = b;
                    z.batchRecord.push(a);
                    z.pathRecord.push(a);
                    z.point = a
                },
                P = function(a, b) {
                    a.x1 === b.x && a.y1 === b.y && a.x2 === a.x && a.y2 === a.y && X(a, "L")
                },
                X = function(a, b) {
                    a.cmd = b;
                    delete a.x1;
                    delete a.y1;
                    delete a.x2;
                    delete a.y2
                },
                N = function(a) {
                    if (!1 === z.isEditing) {
                        var b = K.pointAtopStart,
                            c = Y(),
                            d = c.length - 1,
                            e = c[d];
                        e && (b && (b = c[0], a.x = b.x, a.y = b.y), e.x = a.x, e.y = a.y, "C" === e.cmd && (e.x2 = a.x, e.y2 = a.y), z.ghostIdx = d)
                    }
                };
            z.closePath = function() {
                var a;
                a = Y();
                a = (a = a[a.length - 1]) ? "Z" === a.cmd : void 0;
                if (!0 !== a) {
                    a = Y();
                    var b = a[0];
                    b && 2 < a.length && (N(b), V(b, "Z"), z.ghostIdx =
                        void 0)
                }
            };
            z.savePath = function(a) {
                W();
                var b = Y();
                1 < b.length ? ((z.useClosePath || a) && z.closePath(), a = F.copy(b), T(-b.length), z.toolkit.createObject({
                    device: z,
                    object: {
                        path: a
                    }
                }, function(a) {
                    z.toolkit.closePointerThread();
                    z.toolkit.addToHistory(a);
                    z.toolkit.renderToScene(a);
                    ca()
                })) : ea()
            };
            var W = function() {
                if (!0 !== z.useClosePath) {
                    var a = z.ghostIdx;
                    isFinite(a) && (T(a, 1), z.ghostIdx = void 0)
                }
            };
            (function() {
                var a = {
                        bbox: !0,
                        hovered: !0
                    },
                    b = function(b, c) {
                        return a[b] ? void 0 : c
                    };
                return function(a) {
                    console.log(JSON.stringify(a,
                        b, "\t"))
                }
            })();
            var T = function(a, b) {
                    var c = Array.prototype.slice.call(arguments);
                    Array.prototype.splice.apply(z.batchRecord, c);
                    Array.prototype.splice.apply(z.pathRecord, c);
                    K.pointAtop = void 0
                },
                Y = function() {
                    return z.path || z.pathRecord || []
                },
                S = function() {
                    return (z.path || z.pathRecord || []).length - 1
                },
                ca = function() {
                    z.dirtyRender = !0;
                    A.dirtyPointer = !0
                },
                ha = function() {
                    z.self && z.onPointerMove(z.self, z.point)
                },
                ea = function() {
                    K = {};
                    ca();
                    A.removePointer(z.pointerId);
                    A.dirty = !0
                },
                da = function(a) {
                    D.tooltip && D.tooltip.update(a)
                },
                la = function() {
                    T(-1, 1);
                    N(z.point);
                    ha();
                    ca();
                    z.__dblTapObject = void 0
                },
                ka = {
                    L: function(a, b, c, d) {
                        a.beginPath();
                        a.moveTo(b.x, b.y);
                        a.lineTo(c.x, c.y);
                        a.lineWidth = 1;
                        a.strokeStyle = d;
                        a.stroke()
                    },
                    C: function(a, b, c, d) {
                        a.beginPath();
                        a.moveTo(b.x, b.y);
                        a.bezierCurveTo(c.x1, c.y1, c.x2, c.y2, c.x, c.y);
                        a.lineWidth = 1;
                        a.strokeStyle = d;
                        a.stroke()
                    }
                };
            z.construct(d, e)
        }
    };
    k.addToolkit("brush.path", g("path"));
    k.addToolkit("brush.polygon", g("polygon"));
    k.addToolkit("brush.polyline", g("polyline"))
})(sketch);
(function(k) {
    var g = String.fromCharCode(65279);
    k.addToolkit("text", function(f, k) {
        function l(a) {
            return k.__editing && a.id === k.selection.id
        }

        function d(a) {
            if (t.useHTML) {
                requestAnimationFrame(function() {
                    v.updateObjectSize();
                    h()
                });
                var b = [];
                eventjs.metaKey && b.push("Meta");
                eventjs.ctrlKey && b.push("Ctrl");
                eventjs.shiftKey && b.push("Shift");
                eventjs.altKey && b.push("Alt");
                b.push(eventjs.fromKeyCode[a.keyCode]);
                if (b = J[b.join(" ")]) document.execCommand(b[0], b[1], b[2]), eventjs.cancel(a)
            } else if (eventjs.metaKey)
                if (a =
                    a.keyCode, 86 === a || 88 === a || 90 === a) setTimeout(function() {
                    v.updateObjectSize();
                    h()
                }, 25);
                else if (b = k.selection.item) 85 === a ? (v.toggleTextStyle(b, "textDecoration", "underline", "none"), h()) : 73 === a ? (v.toggleTextStyle(b, "fontStyle", "italic", "normal"), h()) : 66 === a && (v.toggleTextStyle(b, "fontWeight", "bold", "normal"), h())
        }

        function e(a) {
            if (t.useHTML) requestAnimationFrame(function() {
                v.updateObjectSize();
                h()
            });
            else {
                var b = k.selection.item;
                if (void 0 !== b && 0 !== a.which && 8 !== a.keyCode && !eventjs.metaKey) {
                    eventjs.prevent(a);
                    var c = v.getContent();
                    a = v.cleanText(String.fromCharCode(a.charCode || a.keyCode));
                    if ("pre-nowrap" !== b.whiteSpace || 10 !== a.charCodeAt()) {
                        var d = y.text.getRange(F);
                        d && (b = c.substr(0, d.startOffset), c = c.substr(d.endOffset), v.setContent(b + a + c), (c = v.cleanText(b + a).length) && y.text.setRange(F, c, c), v.updateObjectSize(), h())
                    }
                }
            }
        }

        function c(a) {
            if (t.useHTML) v.updateObjectSize(), h();
            else switch (a.keyCode) {
                case 27:
                    z.deselectAll();
                    h();
                    break;
                case 86:
                case 88:
                    eventjs.metaKey && (v.updateObjectSize(), h());
                    break;
                case 46:
                case 8:
                    var b =
                        v.getContent(),
                        c = y.text.getRange();
                    c ? (a = b.substr(0, c.startOffset), b = b.substr(c.endOffset), v.setContent(a + b), (a = a.length) && y.text.setRange(F, a, a), v.updateObjectSize(), h()) : t.useCanvasRenderer && (v.setContent(b), v.updateObjectSize(), h())
            }(a = k.selection.item) && k.on.record && k.on.record({
                op: "SCENE_UPDATE",
                data: [{
                    id: a.id,
                    content: v.getContent()
                }]
            })
        }

        function h() {
            var a = k.selection.item;
            a && (z.updateTransform(a), E.dirtyControls = !0, t.useCanvasRenderer && (a.dirtyCache = !0, E.dirty = !0))
        }

        function b(a) {
            a ? document.execCommand("foreColor", !1, a) : document.execCommand("removeFormat", !1, "foreColor")
        }

        function a(a, b) {
            k.history && a && b && a.content !== b.content && k.history.store({
                cmd: "update",
                name: "update-text",
                data: {
                    from: [{
                        id: b.id,
                        content: a.content
                    }],
                    to: [{
                        id: b.id,
                        content: b.content
                    }]
                }
            })
        }

        function w(a) {
            if (t.useHTML) {
                u(a);
                var b = x(),
                    c = b.parentNode;
                html2canvas(b, {
                    canvas: a.ctx.canvas,
                    onrendered: function(a) {
                        c.style.display = "none"
                    }
                })
            } else I.text.drawLineBreaks(a)
        }

        function u(a) {
            var b = a.bbox,
                c = b.scale,
                d = c.x,
                c = c.y,
                e = x(),
                h = e.parentNode,
                f = eventjs.getDocumentScroll(),
                g = f.pageXOffset,
                f = f.pageYOffset,
                m = 0 > c ? b.height * -c : 0;
            e.style.left = (0 > d ? b.width * -d : 0) + g + "px";
            e.style.top = m + f + "px";
            e.className = "sk-dummy-text";
            I.text.setFontStyle(a, e);
            p(e, "matrix(" + d + ", 0, 0, " + c + ", -" + g + ", -" + f + ")", "0 0 0");
            e.style.color = a.fill && a.fill.color ? a.fill.color : "black";
            e.innerHTML = a.content;
            h.style.display = "block";
            e.style.display = "block";
            e.style.height = "auto";
            e.style.width = "pre-nowrap" === a.whiteSpace ? "auto" : b.width + "px"
        }

        function x() {
            return v.dummy || (v.dummy = I.text.createMeasureElement())
        }

        function p(a, b, c) {
            a = a.style;
            a.transform = a.msTransform = a.OTransform = a.MozTransform = a.webkitTransform = b;
            a.transformOrigin = a.msTransformOrigin = a.OTransformOrigin = a.MozTransformOrigin = a.webkitTransformOrigin = c
        }

        function m(a, b, c) {
            var d = l(this);
            if (t.useCanvasRenderer || !d) {
                void 0 === this.__textMetrics && v.updateObjectSize(this);
                b = z.copyAttributes(v._attributes, this, {
                    ctx: a,
                    pixelRatio: k.pixelRatio,
                    bbox: A.copy(this.bbox),
                    composite: this.composite,
                    opacity: this.opacity,
                    textMetrics: this.__textMetrics
                });
                d && (b.content =
                    v.getContent());
                this.fill && this.fill.enabled && (b.fill = this.fill);
                this.stroke && this.stroke.enabled && (b.stroke = this.stroke);
                var e = b.bbox,
                    h = e.width,
                    d = e.height;
                e.scale.x *= k.scale;
                e.scale.y *= k.scale;
                e.rotate = 0;
                e.x = 0;
                e.y = 0;
                c ? e.scale = {
                    x: 1,
                    y: 1
                } : !1 === t.useHTML && (c = e.scale.x, e = e.scale.y, c = 0 > c ? -h * c : 0, d = 0 > e ? -d * e : 0, (c || d) && a.translate(c, d));
                w(b)
            }
        }
        var v = this,
            r = k.canvas2d,
            y = f.dom,
            t = f.feature.tools.text,
            E = k.render,
            z = k.scene,
            C = k.toolkit,
            A = f.util,
            I = f.vector,
            B = y.create('<div class="sk-textarea-wrap"></div>'),
            D, F;
        v.id =
            "text";
        v.units = t.units;
        var G = {
            x: 200,
            y: 18,
            width: 400,
            height: 470,
            rotate: 0,
            scale: {
                x: 1,
                y: 1
            }
        };
        v._attributes = {
            content: "string",
            fontFamily: "string",
            fontSize: "number",
            fontStyle: "string",
            fontVariant: "string",
            fontWeight: "string",
            letterSpacing: "number",
            wordSpacing: "number",
            lineHeight: "number",
            textAlign: "string",
            textDecoration: "string",
            textShadow: "string",
            textTransform: "string",
            whiteSpace: "string",
            useFitText: "boolean"
        };
        var H = A.copy(v._attributes);
        v.attributes = A.copyInto(f.attrs.__styledObject, H);
        (function() {
            var a = {};
            v.enabled = !1;
            v.enable = function() {
                !1 === v.enabled && (v.enabled = !0, C.select && C.select.enable({
                    events: a,
                    searchParam: {
                        toolkitId: t.useSearch
                    }
                }))
            };
            v.disable = function() {
                !0 === v.enabled && (v.enabled = !1, k.__editing && v.hide(), eventjs.bulk(a, "remove"))
            }
        })();
        (function() {
            function b() {
                !0 === k.__editing && (k.__editing = !1, B.style.opacity = 0, B.style.display = "none", v.blur(), v.emit("hide"))
            }
            v.show = function(a) {
                if (a = a || z.getOneSelected()) "text" === a.type ? (a.__textContent = {
                    id: a.id,
                    content: a.content
                }, v.setContent(a.content), !1 === k.__editing && (k.__editing = !0, v.updateObjectSize(a), B.style.opacity = 1, B.style.display = "block", v.focus(), v.selectAll(), v.emit("show", a)), E.dirtyControls = !0, E.dirty = !0) : b()
            };
            v.hide = function() {
                b();
                var c = k.selection.item;
                if (c) {
                    var d = c.__textContent;
                    if (void 0 !== d) {
                        c.__textContent = void 0;
                        var e = v.getContent();
                        e.trim() && e !== g ? (c.dirtyCheck = !0, c.dirtyDimension = !0, c.content = e, a(d, z.getById(d.id))) : (d = (d = k.history.getLastCmd()) && "add" === d.cmd && "text" === d.name ? d : void 0, d ? (k.history.pop(), z.removeByIdx(c.zIndex, !1)) : z.removeByIdx(c.zIndex, !0))
                    }
                }
            }
        })();
        v.disableArea = function() {
            B.style.pointerEvents = "none";
            v.blur()
        };
        v.enableArea = function(a) {
            B.style.pointerEvents = "auto";
            v.focus()
        };
        v.focus = function() {
            F.focus()
        };
        v.blur = function() {
            F.blur()
        };
        v.selectAll = function() {
            t.useHTML ? y.text.selectAll(F) : y.text.selectAll(F.firstChild)
        };
        v.hasSelection = function() {
            return y.text.hasSelection(F)
        };
        v.setCursorPos = function(a) {
            y.text.setCursorPosition(F, a)
        };
        v.loadResource = function(a) {
            var b = a.object,
                c = a.onerror,
                d = a.onsuccess;
            k.loadStyle(b,
                function() {
                    v.loadFont({
                        fontFamily: b.fontFamily || "Arial",
                        onerror: function(a) {
                            c && c(b, a)
                        },
                        onsuccess: function(a) {
                            1 === a.code && (b.dirtyCache = !0, E.dirty = !0)
                        }
                    });
                    b.bbox || (b.bbox = A.copy(G));
                    b.render = m;
                    b.dirtyCheck = !0;
                    v.updateObjectSize(b);
                    d && d(b)
                })
        };
        v.loadFont = function(a) {
            function b(a) {
                e && e({
                    message: "&ldquo;" + h + "&rdquo; font-family unavailable."
                })
            }

            function c() {
                d && d({
                    code: 1
                })
            }
            "string" === typeof a && (a = {
                fontFamily: a
            });
            var d = a.onsuccess,
                e = a.onerror,
                h = a.fontFamily;
            I.text.detectFont(h) ? d && d({
                    code: 0
                }) : (a = f.lib.text.byName[h]) ?
                I.text.attach({
                    family: h,
                    filepath: f.lib.text.getSrc(a, {
                        absolute: !0
                    }),
                    useLoader: !0,
                    onerror: b,
                    onsuccess: c
                }) : I.text.attachFromGoogleAPI({
                    family: h,
                    onerror: b,
                    onsuccess: c
                })
        };
        var J = {
            "Shift Backspace": ["forwardDelete"],
            "Ctrl Shift [": ["justifyLeft"],
            "Ctrl Shift ]": ["justifyRight"],
            "Ctrl Shift \\": ["justifyCenter"],
            "Ctrl Shift Alt \\": ["justifyFull"],
            "Meta Shift S": ["strikeThrough"],
            "Meta B": ["bold"],
            "Meta I": ["italic"],
            "Meta U": ["underline"]
        };
        v.createObject = function(a, b) {
            var c = a.object,
                c = z.addObject(v.mergeObjectDefaults(c));
            c.dirtyDimension = !0;
            b && b(c)
        };
        v.onRecord = function(a, b) {
            b.pointerStart && eventjs.stop(a);
            f.agent.mobile && eventjs.prevent(a);
            if ("eyeDropper" !== f.ui.colorPicker.state) {
                var c = b.state,
                    d = b.pointerStart,
                    e = b.pointerDown,
                    h = b.pointerEnd,
                    g = k.getActionUid(b),
                    m = isFinite(b.shiftKey) ? b.shiftKey : eventjs.shiftKey,
                    p = isFinite(b.metaKey) ? b.metaKey : eventjs.metaKey,
                    l = !!a,
                    y = l && k.on.record;
                k.__interacting = e;
                if (l)
                    if (d) {
                        if (eventjs.prevent(a), z.controlHover.id) return
                    } else h ? eventjs.prevent(a) : eventjs.cancel(a);
                e = E.pointer[g];
                if (!e || !e.object)
                    if (l && d) e = E.pointer[g] = {}, e.isFromBrowser = !0, e.object = z.copyProperties(v, v.device), e.object.id = z.createId({
                        id: g
                    }), v.loadResource({
                        object: e.object
                    });
                    else {
                        console.warn("text.onRecord - no pointer");
                        return
                    }
                e.lastModified = Date.now();
                e = e.object;
                if ("function" !== typeof e.render) b.pause && b.pause(), v.loadResource({
                    object: e,
                    onsuccess: function(c) {
                        b.resume && b.resume();
                        v.onRecord(a, b)
                    },
                    onerror: function(a, b) {
                        console.error(a, b)
                    }
                }), E.removePointer(g);
                else {
                    if (y) {
                        var u;
                        d && (u = z.copyDeepCompress(z.copyProperties(v,
                            e)));
                        k.on.record({
                            op: "TOOL",
                            data: {
                                config: u,
                                state: C.cleanState(c),
                                pointerId: g,
                                point: z.pointInPeerSceneFromCanvas(b),
                                metaKey: p,
                                shiftKey: m
                            }
                        })
                    }
                    var p = k.zoom,
                        c = p * k.scale,
                        m = p * k.pixelRatio,
                        p = (p - 1) / p,
                        y = k.scrollX * p,
                        w = k.scrollY * p;
                    u = b.start.x / c + y;
                    p = b.start.y / c + w;
                    b.x = b.x / c + y;
                    b.y = b.y / c + w;
                    y = e.bbox;
                    w = Math.min(u, b.x) - 1 * r.x / m;
                    m = Math.min(p, b.y) - 1 * r.y / m;
                    u = Math.abs(u - b.x) || 1;
                    p = Math.abs(p - b.y) || 1;
                    d && v.blur();
                    y.x = w;
                    y.y = m;
                    y.width = u;
                    y.height = p;
                    y.units = v.units;
                    e.dirtyCheck = !0;
                    e.dirtyTransform = !0;
                    d = z.getConstraint(e, !1);
                    y.x -=
                        b.x < b.start.x ? d.width - y.width : 0;
                    y.y -= b.y < b.start.y ? d.height - y.height : 0;
                    y.width = d.width;
                    y.height = d.height;
                    if (h) {
                        E.removePointer(g);
                        if (u < v.minWidth || p < v.minHeight)
                            if (t.useAddByClick) u = k.viewport.width / 3 / c, p = 2 * e.fontSize / c, u = y.width = Math.max(v.defaultWidth, u), p = y.height = Math.max(v.defaultHeight, p);
                            else {
                                E.dirty = !0;
                                E.dirtyControls = !0;
                                return
                            }
                        e.pointerId = g;
                        e = z.addObject(e, {
                            useHistory: l
                        });
                        l && (z.selectByIdx(e.zIndex), v.show(e), v.focus(), v.updateCSS())
                    }
                    E.dirtyPointer = !0
                }
            }
        };
        v.updateBBox = function() {
            var a = k.selection.item;
            a && (v.setContent(a.content || ""), v.updateCSSTransform(a), E.dirty = !0, E.dirtyControls = !0)
        };
        var O = String.fromCharCode(32),
            K = String.fromCharCode(160);
        v.cleanText = function(a) {
            return (a || "").split(g).join("").split(K).join(O).split("&nbsp;").join(O).split("\r").join("\n") || g
        };
        v.getContent = function() {
            return t.useHTML ? F.innerHTML : v.cleanText(F.textContent)
        };
        v.setContent = function(a) {
            t.useHTML ? F.innerHTML = a : F.textContent = v.cleanText(a)
        };
        v.setForeColor = function(c, d, e, h) {
            if (t.useHTML) {
                "down" === e && (c.__cache = c.content);
                var f = x(),
                    g = f.parentNode,
                    m, p;
                if (l(c))
                    if (v.hasSelection()) "move" !== e && "up" !== e || document.execCommand("undo", !1, null), document.execCommand("foreColor", !1, d);
                    else {
                        if (e = window.getSelection().focusNode) {
                            !1 === y.contains(F, e) && (e = F, y.text.setRange(e, 0, 0));
                            if (c = y.text.getRange(e)) m = c.startOffset, p = c.endOffset;
                            y.text.selectAll(e.parentNode);
                            b(d);
                            c && y.text.setRange(e, m, p)
                        }
                    }
                else m = c.content, h && -1 !== m.indexOf(h) ? (F.innerHTML = m, c.content = m.split(h).join(d), c.dirtyCheck = !0) : (f.contentEditable = !0, f.innerHTML = m,
                    g.style.display = "block", y.text.selectAll(f), b(d), c.content = F.innerHTML = f.innerHTML, c.dirtyCheck = !0, g.style.display = "none"), "up" === e && a({
                    id: c.id,
                    content: c.__cache
                }, {
                    id: c.id,
                    content: c.content
                })
            }
        };
        v.measureText = function(a) {
            if (t.useHTML) {
                u(a);
                a = x();
                var b = {
                    width: a.offsetWidth,
                    height: a.offsetHeight
                };
                a.parentNode.style.display = "none";
                return b
            }
            return I.text.drawLineBreaks(a)
        };
        v.createTextarea = function() {
            if (F) {
                var a = F.style.cssText,
                    b = v.getContent();
                F.parentNode.removeChild(F);
                D.parentNode.removeChild(D)
            } else f.ui.tooltip &&
                f.ui.tooltip.add(B, ""), b = a = "";
            D = y.append(B, "style");
            D.type = "text/css";
            F = y.append(B, "div");
            F.className = "textarea";
            F.setAttribute("contentEditable", "true");
            F.style.cssText = a + "; white-space: pre-wrap;";
            v.setContent(b);
            eventjs.add(F, "drag", eventjs.stop);
            eventjs.add(F, "mouseup", eventjs.stop);
            eventjs.add(F, "keydown", d);
            eventjs.add(F, "keypress", e);
            eventjs.add(F, "keyup", c)
        };
        v.updateCSS = function(a) {
            v.updateCSSStyle(a);
            v.updateCSSTransform(a)
        };
        v.updateCSSTransform = function(a) {
            function b(a) {
                if ("objectBoundingBox" ===
                    a.units) {
                    var f = a.x - (w - w * a.scale.x) / 2;
                    a = a.y - (x - x * a.scale.y) / 2;
                    var g = "50% 50%"
                } else f = a.x, a = a.y, g = "0% 0%";
                return {
                    left: f * d + r.x / c - e,
                    top: a * d + r.y / c - h,
                    origin: g
                }
            }
            if ((a = a || k.selection.item) && a.bbox && l(a)) {
                var c = k.pixelRatio,
                    d = k.zoom * k.scale,
                    e = k.scrollX * (d - 1),
                    h = k.scrollY * (d - 1),
                    f = a.bbox,
                    g = isFinite(a.opacity) ? a.opacity : 100,
                    m = E.cache.pad / 2,
                    v = f.rotate,
                    y = f.scale.x + 1E-7,
                    u = f.scale.y + 1E-7,
                    w = f.width,
                    x = f.height,
                    A = Math.max(0, w - 0) * d,
                    m = Math.max(0, x - m - 0) * d;
                if (t.useClipBounds) var C = z.getBoundingBox(),
                    K = k.viewport,
                    w = Math.min(A,
                        (K.width - C.x) / y),
                    x = Math.min(m, (K.height - C.y) / u);
                else w = A, x = m;
                f = b(f);
                C = B.style;
                C.padding = "0px";
                C.opacity = g / 100;
                C.left = f.left + "px";
                C.top = f.top + "px";
                C.width = w + "px";
                C.height = x + "px";
                I.text.setFontStyle(a, B, d);
                F.style.display = "block" === F.style.display ? "inline-block" : "block";
                F.style.width = A + "px";
                F.style.height = m + "px";
                p(B, "rotate(" + v + "deg) scale(" + y + "," + u + ")", f.origin)
            }
        };
        v.updateCSSStyle = function(a) {
            if ((a = a || k.selection.item) && a.fill)
                if (t.useCanvasRenderer) t.useCanvasRenderer = !0, F.style.color = "black", F.style.webkitTextFillColor =
                    F.style.textFillColor = "transparent";
                else {
                    var b = "",
                        c = a.fill,
                        d = a.textShadow,
                        e = "webkitFilter" in F.style;
                    if ("webkitBackgroundClip" in F.style && e && !t.useHTML && !d) {
                        var h = f.style.toCSSBG(c),
                            b = b + ("\t\t\t\t\t.sketch-api .sk-textarea-wrap div.textarea { " + h + " }\t\t\t\t");
                        F.setAttribute("data-content", F.innerHTML);
                        F.style.webkitBackgroundClip = F.style.backgroundClip = "text";
                        F.style.webkitTextFillColor = F.style.textFillColor = "transparent";
                        c = f.style.getComposite();
                        F.style.webkitBackgroundBlendMode = F.style.backgroundBlendMode =
                            c
                    } else {
                        switch (c.type) {
                            case "color":
                                h = c.color;
                                break;
                            case "gradient":
                            case "pattern":
                                h = "#000"
                        }
                        F.style.color = h
                    }
                    a.textDecoration ? (c = a.textDecoration.split(","), F.style.textDecoration = c[0], B.style.textDecoration = c[1]) : (F.style.textDecoration = "", B.style.textDecoration = "");
                    a = a.background || {};
                    a.enabled ? (h = f.style.toCSSBG(a), b += "\t\t\t\t\t.sketch-api .sk-textarea-wrap { " + h + " }\t\t\t\t") : B.style.background = "";
                    D.innerHTML = b
                }
        };
        v.toggleTextStyle = function(a, b, c, d) {
            a[b] = a[b] === d ? c : d
        };
        v.updateObjectSize = function() {
            return function(a) {
                var b =
                    void 0 === a || l(a) ? v.getContent() || " " : a.content || " ";
                if (a = a || k.selection.item) {
                    var c = a.bbox,
                        d = z.copyAttributes(v._attributes, a, {
                            pixelRatio: k.pixelRatio,
                            bbox: A.copy(c)
                        });
                    d.content = t.useHTML ? b : I.text.format(b, a);
                    var e = k.scene.createHash(d);
                    if (e !== a.hashText) {
                        a.hashText = e;
                        if (a.useFitText) {
                            a.content = b;
                            var e = a,
                                h;
                            h = a;
                            h = I.text.fitText({
                                target: I.text.getLineBreaksElement({
                                    font: I.text.getFontStyle(h),
                                    content: h.content,
                                    textTransform: h.textTransform,
                                    lineHeight: h.lineHeight,
                                    letterSpacing: h.letterSpacing,
                                    wordSpacing: h.wordSpacing
                                }),
                                targetWidth: h.bbox.width - 10,
                                targetHeight: h.bbox.height - 10,
                                minFontSize: 1,
                                maxFontSize: 500
                            });
                            e.fontSize = h
                        }
                        "pre-nowrap" === a.whiteSpace ? (e = c.width, d.bbox.width = 0, d = v.measureText(d), h = I.text.getFontStyle(a), h = I.text.measureTextWidth("M", h), h = d.width + h, h !== e && (c.width = h, c.x += (e - h) / 2 * c.scale.x, a.dirtyCheck = !0)) : d = v.measureText(d);
                        a.content !== b && (a.dirtyCheck = !0);
                        t.useAutoHeight && c.height !== d.height && (a.dirtyCheck = !0, a.dirtyTransform = !0, c.height = d.height, l(a) && (B.style.height = c.height + "px"));
                        a.__textMetrics =
                            d
                    }
                    v.updateCSS(a)
                }
            }
        }();
        v.createTextarea();
        B.appendChild(F);
        k.container.appendChild(B);
        C.init(v)
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g() {
        return document.body.getClientRects ? (e.elBreaks = e.createMeasureElement(), e.getLineBreaks = f) : document.body.createTextRange ? (e.elBreaks = e.createMeasureElement(), e.getLineBreaks = q) : e.getLineBreaks = l
    }

    function f(a) {
        function b() {
            p.push(m);
            l.push({
                data: g,
                top: x,
                left: w,
                width: K,
                height: L
            });
            m = "";
            K = 0;
            g = []
        }
        a = e.getLineBreaksElement(a);
        var c = a.firstChild || a,
            d = document.createRange();
        d.setStart(c, 0);
        d.setEnd(c, 0);
        var h = d.getClientRects();
        if (0 === h.length) return {
            data: [],
            lines: 0,
            height: 1,
            width: 1
        };
        for (var f = k.agent && k.agent.firefox, g = [], m = "", p = [], l = [], v = 0, q = h[h.length - 1], u = q.bottom, w = q.left, x = q.top, K = 0, L = q.height, M = 0, Q = 1, R = c.textContent, U = R.length; R;) {
            if (Q > U) {
                b();
                break
            }
            d.setStart(c, M);
            d.setEnd(c, Q);
            q = d.getBoundingClientRect();
            u !== q.bottom && ((R = R.substr(v)) && !f && " " === m[m.length - 1] && (m = m.substr(0, m.length - 1), (v = g.pop()) && (K -= v.width)), b(), M = Q - 1, u = q.bottom, h = d.getClientRects(), q = h[h.length - 1], 0 === q.width && 1 < h.length && (q = h[h.length - 2]), w = q.left, x = q.top);
            v = Q - M;
            if ((h = R.substr(0, v).substr(-1)) &&
                65279 !== h.charCodeAt()) {
                var V = q.width - K;
                V && (m += h, K = q.width, L = q.height, g.push({
                    character: h,
                    width: V,
                    height: q.height,
                    left: q.left + q.width - V,
                    top: q.top
                }))
            }
            Q++
        }
        c = a.offsetHeight;
        d = a.offsetWidth;
        a.parentNode.style.display = "none";
        return {
            data: p,
            lineMetrics: l,
            lines: p.length,
            height: c,
            width: d
        }
    }

    function q(a) {
        a = e.getLineBreaksElement(a);
        for (var b = document.body.createTextRange(), c = 1, d = target.innerText, h = d.length, f = [], g = 0, m = a.offsetHeight, p = a.offsetWidth; d;) {
            if (c > h) {
                f.push(d);
                break
            }
            b.moveToElementText(target);
            b.collapse(!0);
            b.moveEnd("character", c);
            b.moveStart("character", g);
            b.select();
            c++;
            1 < b.getClientRects().length && (c--, f.push(d.substr(0, c - g - 1)), d = d.substr(c - g - 1), g = c - 1)
        }
        a.parentNode.style.display = "none";
        return {
            data: f,
            lines: f.length,
            height: m,
            width: p
        }
    }

    function l(a) {
        function b(c) {
            h.push(c);
            c = e.measureText(c, a.font);
            l += c.height;
            k = Math.max(c.width, k)
        }

        function c() {
            if (!(e.measureTextWidth(f, a.font) <= a.width)) {
                for (var d = f.length, h = 0, g = 0, m = 0; m < d; m++) {
                    var k = f.substr(h, ++g).replace(v, "");
                    e.measureTextWidth(k, a.font) > a.width &&
                        (k = k.substr(0, k.length - 1).replace(v, ""), k.match(p) ? (h = k.split(p), k = k[h[0].length], m -= h[1].length, b(h[0] + k)) : k.match(" ") ? (h = k.split(" "), m -= h.pop().length, b(h.join(" "))) : b(k), h = m, g = 1)
                }
                return f.substr(h, g + 1)
            }
        }
        for (var d = a.content.split("\n"), h = [], f = "", g, k = 0, l = 0, q = 0; q <= d.length; q++) {
            if (f) {
                b(f);
                if (q === d.length) break;
                f = ""
            }
            for (var u = d[q], w = u.split(m), x = 0, J = 0; J < w.length + 2; J++) {
                var O = 0 > x - 1 ? "" : u.substr(x - 1, 1),
                    K = w[J] || "";
                if (e.measureTextWidth(f + O + K, a.font) <= a.width) f += O + K;
                else if (g = c()) f = g + O + K;
                else {
                    g = O.match(p) ?
                        O : "";
                    if (f || O) e.measureTextWidth(f + g, a.font) > a.width ? "\u2013" === g ? K = f + g + K : (b(f), K = g + K) : b(f + g);
                    f = K
                }
                x += K.length + 1
            }
        }
        return {
            data: h,
            lines: h.length,
            height: l,
            width: k
        }
    }
    var d = k.vector = k.vector || {},
        e = d.text = d.text || {};
    e.entities = function(a) {
        return (a || "").split(String.fromCharCode(160)).join(String.fromCharCode(32)).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;")
    };
    e.format = function(a, b) {
        var c = b.textTransform,
            d = b.whiteSpace;
        if (c) switch (c) {
            case "uppercase":
                a = a.toUpperCase();
                break;
            case "lowercase":
                a = a.toLowerCase();
                break;
            case "capitalize":
                a = a.replace(/^(.)|\s(.)/g, function(a) {
                    return a.toUpperCase()
                })
        }
        if (d) switch (d) {
            case "pre-nowrap":
                a = a.split("\n").join(" ");
                break;
            case "pre-line":
            case "nowrap":
            case "normal":
                a = a.replace(/\s{2,}/g, " ")
        }
        return a
    };
    e.textTransform = function(a, b) {
        switch (b) {
            case "uppercase":
                return a.toUpperCase();
            case "lowercase":
                return a.toLowerCase();
            case "capitalize":
                return a.replace(/^(.)|\s(.)/g, function(a) {
                    return a.toUpperCase()
                });
            default:
                return a
        }
    };
    e.getMetrics =
        function(a, c) {
            var d = "ltr";
            window.getComputedStyle && (d = window.getComputedStyle(document.body, "").direction);
            var h = e.measureTextHeight(a, c),
                f = e.measureTextWidth(a, c);
            return b({
                marginReset: !0,
                text: a,
                callback: function(a) {
                    a.style.cssText = "font: " + c + "; white-space: nowrap; display: block;";
                    var b = e.image,
                        g = b.offsetTop + 1,
                        m = g - h;
                    a.style.cssText = "font: " + c + "; white-space: nowrap; line-height: 0; display: block;";
                    var p = b.offsetTop + 1;
                    a.style.verticalAlign = "sub";
                    var k = g - (b.offsetTop - h);
                    a.style.verticalAlign = "super";
                    return {
                        font: c,
                        direction: d,
                        ascent: g,
                        descent: -m,
                        height: h,
                        width: f,
                        textBaseline: {
                            alphabetic: 0,
                            top: g,
                            hanging: 8 * g / 10,
                            middle: p,
                            ideographic: m,
                            bottom: m,
                            subScript: k,
                            superScript: g - (b.offsetTop - h)
                        },
                        textAlign: {
                            left: 0,
                            start: -("ltr" === d) ? 0 : f,
                            end: -("ltr" === d) ? f : 0,
                            right: -f,
                            center: -f / 2
                        }
                    }
                }
            })
        };
    e.measureText = function(a, b) {
        return {
            width: e.measureTextWidth(a, b),
            height: e.measureTextHeight(a, b)
        }
    };
    e.measureTextWidth = function(a, c) {
        return b({
            text: a + a + a,
            callback: function(a) {
                a.style.cssText = "font: " + c + "; white-space: nowrap; display: inline;";
                return a.offsetWidth / 3
            }
        })
    };
    e.measureTextHeight = function(a, c) {
        return b({
            text: "1<br>2<br>3<br>4<br>5<br>6<br>7",
            callback: function(a) {
                a.style.cssText = "font: " + c + "; white-space: nowrap; display: inline;";
                return a.offsetHeight / 7 + .5 >> 0
            }
        })
    };
    e.textAlign = function(a, c) {
        var d = window.getComputedStyle(document.body, "").direction,
            h = e.measureTextWidth(a, c);
        return b({
            text: a,
            callback: function(a) {
                return {
                    left: 0,
                    start: -("ltr" === d) ? 0 : h,
                    end: -("ltr" === d) ? h : 0,
                    right: -h,
                    center: -h / 2
                }
            }
        })
    };
    e.textBaseline = function(a, c) {
        var d =
            e.measureTextHeight(a, c);
        return b({
            marginReset: !0,
            text: a,
            callback: function(a) {
                a.style.cssText = "font: " + c + "; white-space: nowrap; display: block;";
                var b = e.image.offsetTop + 1,
                    h = b - d;
                a.style.cssText = "font: " + c + "; white-space: nowrap; line-height: 0; display: block;";
                return {
                    alphabetic: 0,
                    top: b,
                    hanging: 8 * b / 10,
                    middle: e.image.offsetTop + 1,
                    ideographic: h,
                    bottom: h
                }
            }
        })
    };
    e.textBaselineTop = function(a, c) {
        return b({
            text: a,
            callback: function(a) {
                a.style.cssText = "font: " + c + "; white-space: nowrap; display: block;";
                return 1.315 *
                    e.image.offsetTop
            }
        })
    };
    var c, h, b = function(a) {
            var b = document.body;
            e.expand || (e.parent = document.createElement("span"), e.text = document.createElement("span"), e.parent.appendChild(e.text), e.image = document.createElement("img"), e.image.style.cssText = "vertical-align: baseline; background: #000; width: 10px; height: 1px; display: inline;", e.image.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=", e.parent.appendChild(e.image), e.expand = document.createElement("div"),
                e.expand.className = "sk-expand", e.expand.appendChild(e.parent), e.container = document.createElement("div"), e.container.id = "sk-text-metrics", e.container.appendChild(e.expand), b.insertBefore(e.container, b.firstChild));
            if (a)
                if (e.text.innerHTML = a.text, e.expand.style.cssText = "display: block;", a.marginReset) {
                    a.setup && 1 !== a.setup || (c = b.style.padding, h = b.style.margin, b.style.padding = 0, b.style.margin = 0);
                    if (!a.setup) var d = a.callback(e.parent);
                    a.setup && 2 !== a.setup || (b.style.padding = c, b.style.margin = h, e.expand.style.display =
                        "none");
                    if (!a.setup) return d
                } else return d = a.callback(e.parent), e.expand.style.display = "none", d;
            return e.container
        },
        a = e.getFontStyle = function(a) {
            var b = "";
            a.fontStyle && (b += a.fontStyle + " ");
            a.fontVariant && (b += a.fontVariant + " ");
            a.fontWeight && (b += a.fontWeight + " ");
            a.fontSize && (b += a.fontSize + "px ");
            a.fontFamily && (b += '"' + a.fontFamily + '"');
            return b
        };
    e.setFontStyle = function(a, b, c) {
        c = c || 1;
        var d = (a.fontSize || 30) * c,
            e = a.textMetrics || a.__textMetrics;
        e && e.lineHeight && Math.round(e.lineHeight * c);
        b = b.style;
        b.fontStyle =
            a.fontStyle || "normal";
        b.fontVariant = a.fontVariant || "normal";
        b.fontWeight = a.fontWeight || "normal";
        b.fontSize = d + "px";
        b.fontFamily = a.fontFamily || "Arial";
        b.lineHeight = "normal" === a.lineHeight ? "normal" : a.lineHeight + "em";
        b.letterSpacing = "normal" === a.letterSpacing ? "normal" : a.letterSpacing + "px";
        b.wordSpacing = "normal" === a.wordSpacing ? "normal" : a.wordSpacing + "px";
        b.textAlign = a.textAlign || "center";
        b.textDecoration = a.textDecoration || "none";
        b.textTransform = a.textTransform || "none";
        b.textShadow = a.textShadow || "none"
    };
    e.fitText = function(a) {
        var b = a.target,
            c = (a.targetWidth || b.offsetWidth) >> 0,
            d = (a.targetHeight || b.offsetHeight) >> 0,
            e = a.minFontSize || 1,
            h = a.maxFontSize || 500;
        a = a.widthOnly || !1;
        b.style.width = c + "px";
        for (var f, e = e + 1, h = h + 1; e <= h;) f = parseInt((e + h) / 2, 10), b.style.fontSize = f + "px", b.offsetWidth <= c && (a || b.offsetHeight <= d) ? e = f + 1 : h = f - 1;
        b.parentNode.style.display = "none";
        return f
    };
    var w = 1 / (180 / Math.PI);
    e.drawLineBreaks = function(b) {
        function c() {
            var a = l.canvas.width;
            l.save();
            l.translate(-a / q / W, 0);
            O.forEach(function(b) {
                l.shadowColor =
                    b.color;
                l.shadowOffsetX = b.x * q + a;
                l.shadowOffsetY = b.y * q;
                l.shadowBlur = b.blur * q;
                d()
            });
            l.restore()
        }

        function d() {
            for (var a = S.length, b = 0; b < a; b++)
                if (ca) {
                    var c = S[b],
                        e = ca[b],
                        g = e.top + Y.top;
                    h("underline", e, g);
                    h("overline", e, g);
                    if (qa)
                        for (var m = c.length, p = 0; p < m; p++) {
                            var k = e.data[p];
                            k && f(c[p], k.left, g)
                        } else f(c, e.left, g);
                    h("line-through", e, g)
                } else c = S[b], g = b * N.lineHeight + da + Y.top, l.textAlign = J, f(c, ea + T, g)
        }

        function h(a, b, c) {
            c += ha;
            if ((a = K[a]) && a.length)
                for (var d = 0, e = a.length; d < e; d++) {
                    var f = a[d].line;
                    if ("none" !== f) {
                        var m =
                            b.width,
                            p = b.left;
                        switch (f) {
                            case "underline":
                                g(p, c, m, ha);
                                break;
                            case "overline":
                                f = Y.alphabetic - Y.top;
                                g(p, c + f, m, ha);
                                break;
                            case "line-through":
                                f = .47 * b.height - Y.top, g(p, c + f, m, ha)
                        }
                    }
                }
        }

        function f(a, b, c) {
            aa ? (P && (l.globalAlpha = la, l.fillText(a, b, c)), V && (l.globalAlpha = ka, l.strokeText(a, b, c))) : (P && l.fillText(a, b, c), V && l.strokeText(a, b, c))
        }

        function g(a, b, c, d) {
            a >>= 0;
            b >>= 0;
            aa ? (P && (l.globalAlpha = la, l.fillRect(a, b, c, d)), V && (l.globalAlpha = ka, l.strokeRect(a, b, c, d))) : (P && l.fillRect(a, b, c, d), V && l.strokeRect(a, b, c, d))
        }
        var m = b.content;
        if (m) {
            var p = a(b),
                l = b.ctx,
                v = b.bbox,
                q = b.pixelRatio || 1,
                G = b.textMetrics,
                H = b.fontSize || "medium",
                J = b.textAlign || "left",
                O = b.textShadow || "none",
                K = b.textDecoration || "none",
                L = b.textTransform || "none",
                M = 0 < b.letterSpacing ? b.letterSpacing : "normal",
                Q = 0 < b.wordSpacing ? b.wordSpacing : "normal",
                R = b.lineHeight || "normal",
                U = b.useFitText || !1,
                V = !!b.stroke && !!b.stroke.lineWidth && !1 !== b.stroke.enabled,
                P = !!b.fill && !1 !== b.fill.enabled,
                X = !!b.clip,
                m = e.format(m, b),
                m = e.entities(m);
            G && G.data || (G = {
                font: p,
                content: m,
                textAlign: J,
                textTransform: L,
                lineHeight: R,
                letterSpacing: M,
                wordSpacing: Q,
                width: v.width
            }, U && (b.fontSize = e.fitText({
                target: e.getLineBreaksElement(G),
                targetWidth: v.width - 10,
                targetHeight: v.height - 10,
                minFontSize: U.minFontSize,
                maxFontSize: U.maxFontSize,
                widthOnly: U.widthOnly
            }), p = G.font = a(b)), G = e.getLineBreaks(G), G.baseline = e.textBaseline("test", p), G.lineHeight = G.height / G.lines);
            var N = {
                data: G.data,
                lines: G.lines,
                lineMetrics: G.lineMetrics,
                baseline: G.baseline,
                lineHeight: G.lineHeight,
                height: G.height,
                width: G.width,
                x: v.x,
                y: v.y
            };
            if (l) {
                l.save();
                l.font = p;
                var p = v.scale || {
                        x: 1,
                        y: 1
                    },
                    W = p.x,
                    p = p.y,
                    U = v.rotate * w;
                l.translate(v.x, v.y);
                U && l.rotate(U);
                l.translate(-v.x * W, -v.y * p);
                1 === W && 1 === p || l.scale(W, p);
                var T = 0;
                switch (J) {
                    case "right":
                        T = v.width;
                        break;
                    case "center":
                        T = v.width / 2
                }
                "string" === typeof O && (O = x(O));
                "string" === typeof K && (K = u(K));
                var Y = G.baseline,
                    S = G.data,
                    ca = G.lineMetrics,
                    ha = Math.max(.5, H / 12),
                    ea = v.x,
                    da = v.y,
                    la = 1,
                    ka = 1;
                P && (la = b.fill.opacity, l.fillStyle = k.doc.getW3CStyle("fill", l, 0, 0, v.width, v.height, b));
                V && (H = b.stroke, ka = H.opacity, l.lineWidth =
                    H.lineWidth, l.strokeStyle = k.doc.getW3CStyle("stroke", l, 0, 0, v.width, v.height, b));
                X && (l.rect(v.x, v.y, v.width, v.height), l.clip());
                var aa = la !== ka,
                    qa = "normal" !== M || "normal" !== Q || "justify" === J;
                O && O.length && c();
                d();
                l.restore()
            }
            return N
        }
    };
    var u = function() {
            var a = /\s+/;
            return function(b) {
                var c = [];
                b = b.split(",");
                for (var d = 0; d < b.length; d++) {
                    var e = b[d].trim().split(a),
                        h = e[0] || "none",
                        f = e[1] || "solid",
                        e = e[2] || "inherit";
                    "none" !== h && (c[h] = [], c[h].push({
                        line: h,
                        style: f,
                        color: e
                    }))
                }
                return c
            }
        }(),
        x = function() {
            var a = /((#[0-F]+|(rgba|rgb)\([^\)]+\))(\s-?\d+px){0,})/gi,
                b = /(#[0-F]+)|((rgb|rgba)\(.+\))|(-?\d+px)/gi;
            return function(c) {
                var d = [];
                if (c && "none" !== c && (c = c.match(a)))
                    for (var e = 0; e < c.length; e++) {
                        var h = c[e].match(b);
                        d.push({
                            color: h[0],
                            x: parseFloat(h[1]) || 0,
                            y: parseFloat(h[2]) || 0,
                            blur: parseFloat(h[3]) || 0
                        })
                    }
                return d.reverse()
            }
        }(),
        p = /[\u2014\u2013-]/,
        m = /[ \u2014\u2013-]/,
        v = /^\s+|\s+$/g;
    e.getLineBreaks = function(a) {
        return g()(a)
    };
    e.createMeasureElement = function() {
        var a = document.createElement("span");
        a.style.cssText = "white-space: pre-wrap; word-wrap: break-word;";
        a.className = "lineBreakData";
        var c = document.createElement("div");
        c.appendChild(a);
        c.className = "sk-expand";
        e.container = e.container || b();
        e.container.appendChild(c);
        return a
    };
    e.getLineBreaksElement = function(a) {
        var b = e.elBreaks || (e.elBreaks = e.createMeasureElement());
        b.parentNode.style.display = "block";
        var c = b.style;
        c.display = "inline-block";
        c.width = a.width ? a.width + "px" : "auto";
        c.font = a.font;
        c.lineHeight = "normal" === a.lineHeight ? "normal" : a.lineHeight + "em";
        c.letterSpacing = "normal" === a.letterSpacing ? "normal" :
            a.letterSpacing + "px";
        c.wordSpacing = "normal" === a.wordSpacing ? "normal" : a.wordSpacing + "px";
        c.textAlign = a.textAlign || "left";
        c.textTransform = a.textTransform || "none";
        b.innerHTML = a.content || "";
        return b
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.dom || (k.dom = {}),
        f = k.lang || (k.lang = {}),
        q = k.util || (k.util = {}),
        l = k.vector || (k.vector = {}),
        d = l.text = l.text || {};
    d.attach = function(c) {
        var d = c.family,
            b = c.filepath,
            a = c.onsuccess,
            f = c.onerror,
            g = new e(c);
        if (g.detectFont(d)) a && a();
        else {
            var k = document.createElement("style");
            k.type = "text/css";
            document.getElementsByTagName("head")[0].appendChild(k);
            d = b.startsWith("blob:") ? '@font-face {\t\t\t\t\tfont-family: "' + d + '";\t\t\t\t\tsrc: url("' + b + '");\t\t\t\t\tsrc: url("' + b + '?#iefix") format("embedded-opentype"),\t\t\t\t\t\turl("' +
                b + '") format("woff"),\t\t\t\t\t\turl("' + b + '") format("truetype"),\t\t\t\t\t\turl("' + b + "#" + d + '") format("svg");\t\t\t\t\tfont-weight: normal;\t\t\t\t\tfont-style: normal;\t\t\t\t}' : '@font-face {\t\t\t\t\tfont-family: "' + d + '";\t\t\t\t\tsrc: url("' + b + '.eot");\t\t\t\t\tsrc: url("' + b + '.eot?#iefix") format("embedded-opentype"),\t\t\t\t\t\turl("' + b + '.woff") format("woff"),\t\t\t\t\t\turl("' + b + '.ttf") format("truetype"),\t\t\t\t\t\turl("' + b + ".svg#" + d + '") format("svg");\t\t\t\t\tfont-weight: normal;\t\t\t\t\tfont-style: normal;\t\t\t\t}';
            k.styleSheet ? k.styleSheet.cssText = d : k.innerHTML = d;
            (a || f) && g.waitForFont(c)
        }
    };
    d.attachFromCSS = function(c) {
        var d = c.family,
            b = c.onsuccess,
            a = c.onerror,
            f = new e(c);
        if (f.detectFont(d)) b && b();
        else {
            var d = c.href.replace(/[^a-zA-Z 0-9]+/g, ""),
                g = document.getElementById(d);
            g ? (c = g.getAttribute("data-error")) ? a && a(c) : b && b() : (c.link = g = document.createElement("link"), g.href = c.href, g.id = d, g.setAttribute("rel", "stylesheet"), g.setAttribute("type", "text/css"), g.onerror = function() {
                a && a({
                    message: "StyleSheet Not Found",
                    code: 404
                });
                g.setAttribute("data-error", "404")
            }, document.body.appendChild(g), f.waitForFont(c))
        }
    };
    d.attachFromGoogleAPI = function(c) {
        var e = c.family,
            b = c.onerror;
        d.attachFromCSS({
            family: e,
            href: window.location.protocol + "//fonts.googleapis.com/css?family=" + e + ":regular",
            onsuccess: c.onsuccess,
            onerror: function(a) {
                b && b({
                    message: "&ldquo;" + e + "&rdquo; font-family unavailable.",
                    code: 404
                })
            }
        })
    };
    var e = function(c) {
            c = c || {};
            var e = this;
            this.metrics = void 0;
            this.test = c.test || "Thequickbrownfox";
            this.font = this.missing = this.arial = this.ctx =
                this.canvas = void 0;
            this.createHash = function(b) {
                e.canvas.width = e.canvas.width;
                e.ctx.font = e.font;
                e.ctx.fillText(b, 0, e.metrics.textBaseline.top);
                return e.ctx.canvas.toDataURL()
            };
            this.getHash = function(b) {
                e.metrics || (e.metrics = d.getMetrics(e.test, "16px Arial, Helvetica"), e.canvas = g.Canvas(e.metrics.width, e.metrics.height), e.font = "16px Arial, Helvetica", e.ctx = e.canvas.ctx, e.ctx.font = "16px Arial, Helvetica", e.arial = e.createHash(e.test), e.missing = e.createHash(""));
                e.font = '16px "' + b + '", Arial, Helvetica';
                return e.createHash(e.test)
            };
            this.detectFont = function(b) {
                var a = d.supports,
                    c = a[b];
                if ("boolean" === typeof c) return c;
                if ("arial" === b.toLowerCase()) return a[b] = !0;
                c = e.getHash(b);
                return c !== e.missing && c !== e.arial ? a[b] = !0 : !1
            };
            this.waitForFont = function(b) {
                function a(a) {
                    clearInterval(t);
                    d.supports[l] = !1;
                    g && g.setAttribute("data-error", "timeout");
                    v("timeout");
                    k && k.loader && k.loader.stop(l)
                }
                var c = b.timeout || 15E3,
                    g = b.link,
                    l = b.family,
                    p = b.filepath,
                    m = b.onsuccess,
                    v = b.onerror;
                if (e.detectFont(l)) m && m();
                else {
                    var r = q.now(),
                        y, t = setInterval(function() {
                            var b = e.getHash(l),
                                f = q.now() - r;
                            b !== e.missing && b !== e.arial ? (clearInterval(t), d.supports[l] = !0, m(), k && k.loader && k.loader.stop(l)) : f > c ? a() : p && 2E3 < f && !y && (y = q.request({
                                url: p,
                                method: "HEAD",
                                onerror: a
                            }))
                        }, 10);
                    k && k.loader && b.useLoader && k.loader.create(b.family, f.translate("loading") + " &ldquo;" + b.family + "&rdquo;")
                }
            }
        },
        l = new e;
    d.supports = {};
    d.detectFont = l.detectFont
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.Server = function(g) {
        function f(c) {
            var b = g.doc,
                a = c.url || g.loc.POST,
                d = c.entries,
                f = c.onabort,
                k = c.onerror,
                p = c.onprogress,
                m = c.onsave;
            if (!c || !e.count(d)) return console.warn("server sync is not setup");
            c = {
                action: a,
                confirm: "text",
                files: []
            };
            var v = c.files,
                r;
            for (r in d) v.push({
                name: r,
                data: d[r]
            });
            "string" !== typeof d.fileName && v.push({
                name: "fileName",
                data: b.title
            });
            c.onprogress = function(a, b) {
                p && p(a.transferPercent, "sync")
            };
            c.onabort = function(a, b) {
                f && f(b)
            };
            c.onerror = function(a,
                b) {
                k && k(b)
            };
            c.onupload = function(a, b) {
                l.debug && console.log(a.transferTotal, b, a);
                "false" === b || "<" === b[0] ? (console.warn("invalid server response", b), k && k(b)) : ((l.sync.json || l.sync.zip || l.sync.svg) && l.sync.hashId && g.loc.setHash(l.sync.hashFlag, b), g.emit("save", b, v), m && m(b, v))
            };
            new g.uploader.upload(c)
        }
        var k = this,
            l = g.feature,
            d = g.lang,
            e = g.util,
            c;
        k.auth = function(c) {
            l.requireAuth ? e.request({
                url: g.loc.host + "check-login.html",
                format: "text",
                onsuccess: function(b, a) {
                    c("true" === a)
                }
            }) : c(!0)
        };
        k.getResource = function() {
            if (g.loc.GET) return g.loc.getSketchID() ||
                e.pronounceable();
            console.warn("GET not setup");
            return "new"
        };
        k.open = function(c) {
            c = c || {};
            var b = c.url,
                a = c.onsuccess,
                f = c.onerror,
                k = c.onprogress || function(a) {
                    var b = d.translate("downloading") + "...";
                    1 > a ? (a = Math.max(0, 100 * a - 1) >> 0, g.loader && g.loader.create("thread", b, a)) : g.loader && g.loader.stop("thread")
                };
            b ? e.request({
                url: b,
                format: "text",
                onerror: function(a) {
                    k && k(1);
                    l.debug ? console.warn("server connection error", a) : (g.loc.setHash(l.sync.hashFlag, "new"), f && f({
                        message: "URL could not be reached."
                    }))
                },
                onsuccess: function(b,
                    c) {
                    if (c.startsWith("<?xml") || c.startsWith("<svg")) k && k(.99), g.open.svg(c, a, f);
                    else if (c.startsWith("<")) k && k(1), l.debug && console.log("invalid data from server", c), g.loc.setHash(l.sync.hashFlag, "new");
                    else if (c.startsWith("{")) k && k(.99), g.open.json(c, a, f);
                    else if (g.open.sketch) {
                        for (var d = new Uint8Array(c.length), e = 0; e < c.length; e++) d[e] = c.charCodeAt(e) & 255;
                        d = new Blob([d.buffer], {
                            type: "application/zip"
                        });
                        k && k(.99);
                        g.open.sketch({
                            blob: d,
                            onerror: f,
                            onsuccess: a
                        })
                    } else k && k(1), a && a()
                },
                onprogress: function(a,
                    b) {
                    k && k(b)
                }
            }) : f && f({
                message: "URL is invalid."
            })
        };
        k.save = function(d) {
            d = d || {};
            var b = d.url,
                a = d.sync || l.sync,
                w = d.entries || a.entries || {},
                u = d.onabort || a.onabort,
                x = d.onerror || a.onerror,
                p = d.onprogress || a.onprogress,
                m = d.onsave || a.onsave;
            250 > e.now() - c || (c = e.now(), k.auth(function(c) {
                c ? g.save.sync({
                    sync: a,
                    onprogress: function(a) {
                        p && p(0, "prepare")
                    },
                    onsuccess: function(a) {
                        var c = g.doc;
                        c.lastSynced = c.lastModified;
                        e.each(a, function(a, b) {
                            "folder" === b ? a.forEach(function(a) {
                                    w[a.filename] = a.blob
                                }) : a.filename && a.blob ? w[a.filename] =
                                a.blob : w[b] = a
                        });
                        f({
                            url: b,
                            entries: w,
                            onsave: m,
                            onabort: u,
                            onerror: x,
                            onprogress: function(a, b) {
                                p && p(a, b)
                            }
                        })
                    }
                }) : g.exec("login")
            }))
        };
        k.saveData = function(c) {
            c = c || {};
            k.auth(function(b) {
                b ? f(c) : g.exec("login")
            })
        }
    }
})(sketch);
"function" === self.WebKitCSSMatrix ? self.CSSMatrix = WebKitCSSMatrix : function() {
    function k(b) {
        if (void 0 === b || "none" === b) return q(this);
        if (b instanceof k) return g(b);
        var a = arguments;
        if (a.length) {
            if (16 === a.length) return h(this, a);
            if (6 === a.length) return c(this, a)
        }
        return this.setMatrixValue(b)
    }

    function g(b) {
        var a = new k;
        a.m11 = a.a = b.m11;
        a.m12 = a.b = b.m12;
        a.m13 = b.m13;
        a.m14 = b.m14;
        a.m21 = a.c = b.m21;
        a.m22 = a.d = b.m22;
        a.m23 = b.m23;
        a.m24 = b.m24;
        a.m31 = b.m31;
        a.m32 = b.m32;
        a.m33 = b.m33;
        a.m34 = b.m34;
        a.m41 = a.e = b.m41;
        a.m42 = a.f = b.m42;
        a.m43 = b.m43;
        a.m44 = b.m44;
        return a
    }

    function f(b, a) {
        return a instanceof k ? new k(a.m11 * b.m11 + a.m12 * b.m21 + a.m13 * b.m31 + a.m14 * b.m41, a.m11 * b.m12 + a.m12 * b.m22 + a.m13 * b.m32 + a.m14 * b.m42, a.m11 * b.m13 + a.m12 * b.m23 + a.m13 * b.m33 + a.m14 * b.m43, a.m11 * b.m14 + a.m12 * b.m24 + a.m13 * b.m34 + a.m14 * b.m44, a.m21 * b.m11 + a.m22 * b.m21 + a.m23 * b.m31 + a.m24 * b.m41, a.m21 * b.m12 + a.m22 * b.m22 + a.m23 * b.m32 + a.m24 * b.m42, a.m21 * b.m13 + a.m22 * b.m23 + a.m23 * b.m33 + a.m24 * b.m43, a.m21 * b.m14 + a.m22 * b.m24 + a.m23 * b.m34 + a.m24 * b.m44, a.m31 * b.m11 + a.m32 * b.m21 + a.m33 * b.m31 + a.m34 *
            b.m41, a.m31 * b.m12 + a.m32 * b.m22 + a.m33 * b.m32 + a.m34 * b.m42, a.m31 * b.m13 + a.m32 * b.m23 + a.m33 * b.m33 + a.m34 * b.m43, a.m31 * b.m14 + a.m32 * b.m24 + a.m33 * b.m34 + a.m34 * b.m44, a.m41 * b.m11 + a.m42 * b.m21 + a.m43 * b.m31 + a.m44 * b.m41, a.m41 * b.m12 + a.m42 * b.m22 + a.m43 * b.m32 + a.m44 * b.m42, a.m41 * b.m13 + a.m42 * b.m23 + a.m43 * b.m33 + a.m44 * b.m43, a.m41 * b.m14 + a.m42 * b.m24 + a.m43 * b.m34 + a.m44 * b.m44) : null
    }

    function q(b) {
        b.m11 = b.a = 1;
        b.m12 = b.b = 0;
        b.m13 = 0;
        b.m14 = 0;
        b.m21 = b.c = 0;
        b.m22 = b.d = 1;
        b.m23 = 0;
        b.m24 = 0;
        b.m31 = 0;
        b.m32 = 0;
        b.m33 = 1;
        b.m34 = 0;
        b.m41 = b.e = 0;
        b.m42 = b.f = 0;
        b.m43 =
            0;
        b.m44 = 1;
        return b
    }
    var l = k.prototype,
        d = /^matrix\((.*)\)/,
        e = /^matrix3d\((.*)\)/,
        c = function(b, a) {
            b.m11 = b.a = a[0];
            b.m12 = b.b = a[1];
            b.m41 = b.e = a[4];
            b.m21 = b.c = a[2];
            b.m22 = b.d = a[3];
            b.m42 = b.f = a[5];
            return b
        },
        h = function(b, a) {
            b.m11 = b.a = a[0];
            b.m12 = b.b = a[1];
            b.m13 = a[2];
            b.m14 = a[3];
            b.m21 = b.c = a[4];
            b.m22 = b.d = a[5];
            b.m23 = a[6];
            b.m24 = a[7];
            b.m31 = a[8];
            b.m32 = a[9];
            b.m33 = a[10];
            b.m34 = a[11];
            b.m41 = b.e = a[12];
            b.m42 = b.f = a[13];
            b.m43 = a[14];
            b.m44 = a[15];
            return b
        };
    l.setMatrixValue = function(b) {
        if ("string" === typeof b) {
            q(this);
            b = b.trim();
            if ("none" ===
                b) return this;
            for (var a = b.replace(/^.*\((.*)\)$/g, "$1").split(/\s*,\s*/), f = a.length; f--;) a[f] = parseFloat(a[f]);
            if (6 === a.length && d.test(b)) return c(this, a);
            if (16 === a.length && e.test(b)) return h(this, a)
        }
        throw Error("Failed to execute 'setMatrixValue' on 'CSSMatrix': Failed to parse '" + b + "'");
    };
    l.multiply = function(b) {
        return f(this, b)
    };
    l.inverse = function() {
        var b;
        b = (b = this.m14 * this.m23 * this.m32 * this.m41 - this.m13 * this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 * this.m41 + this.m12 * this.m24 * this.m33 * this.m41 +
            this.m13 * this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 * this.m41 - this.m14 * this.m23 * this.m31 * this.m42 + this.m13 * this.m24 * this.m31 * this.m42 + this.m14 * this.m21 * this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 - this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 * this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 - this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 * this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 + this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 * this.m34 * this.m43 -
            this.m13 * this.m22 * this.m31 * this.m44 + this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 * this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 - this.m12 * this.m21 * this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44) ? new k((this.m23 * this.m34 * this.m42 - this.m24 * this.m33 * this.m42 + this.m24 * this.m32 * this.m43 - this.m22 * this.m34 * this.m43 - this.m23 * this.m32 * this.m44 + this.m22 * this.m33 * this.m44) / b, (this.m14 * this.m33 * this.m42 - this.m13 * this.m34 * this.m42 - this.m14 * this.m32 * this.m43 + this.m12 * this.m34 * this.m43 + this.m13 *
            this.m32 * this.m44 - this.m12 * this.m33 * this.m44) / b, (this.m13 * this.m24 * this.m42 - this.m14 * this.m23 * this.m42 + this.m14 * this.m22 * this.m43 - this.m12 * this.m24 * this.m43 - this.m13 * this.m22 * this.m44 + this.m12 * this.m23 * this.m44) / b, (this.m14 * this.m23 * this.m32 - this.m13 * this.m24 * this.m32 - this.m14 * this.m22 * this.m33 + this.m12 * this.m24 * this.m33 + this.m13 * this.m22 * this.m34 - this.m12 * this.m23 * this.m34) / b, (this.m24 * this.m33 * this.m41 - this.m23 * this.m34 * this.m41 - this.m24 * this.m31 * this.m43 + this.m21 * this.m34 * this.m43 + this.m23 * this.m31 *
            this.m44 - this.m21 * this.m33 * this.m44) / b, (this.m13 * this.m34 * this.m41 - this.m14 * this.m33 * this.m41 + this.m14 * this.m31 * this.m43 - this.m11 * this.m34 * this.m43 - this.m13 * this.m31 * this.m44 + this.m11 * this.m33 * this.m44) / b, (this.m14 * this.m23 * this.m41 - this.m13 * this.m24 * this.m41 - this.m14 * this.m21 * this.m43 + this.m11 * this.m24 * this.m43 + this.m13 * this.m21 * this.m44 - this.m11 * this.m23 * this.m44) / b, (this.m13 * this.m24 * this.m31 - this.m14 * this.m23 * this.m31 + this.m14 * this.m21 * this.m33 - this.m11 * this.m24 * this.m33 - this.m13 * this.m21 * this.m34 +
            this.m11 * this.m23 * this.m34) / b, (this.m22 * this.m34 * this.m41 - this.m24 * this.m32 * this.m41 + this.m24 * this.m31 * this.m42 - this.m21 * this.m34 * this.m42 - this.m22 * this.m31 * this.m44 + this.m21 * this.m32 * this.m44) / b, (this.m14 * this.m32 * this.m41 - this.m12 * this.m34 * this.m41 - this.m14 * this.m31 * this.m42 + this.m11 * this.m34 * this.m42 + this.m12 * this.m31 * this.m44 - this.m11 * this.m32 * this.m44) / b, (this.m12 * this.m24 * this.m41 - this.m14 * this.m22 * this.m41 + this.m14 * this.m21 * this.m42 - this.m11 * this.m24 * this.m42 - this.m12 * this.m21 * this.m44 + this.m11 *
            this.m22 * this.m44) / b, (this.m14 * this.m22 * this.m31 - this.m12 * this.m24 * this.m31 - this.m14 * this.m21 * this.m32 + this.m11 * this.m24 * this.m32 + this.m12 * this.m21 * this.m34 - this.m11 * this.m22 * this.m34) / b, (this.m23 * this.m32 * this.m41 - this.m22 * this.m33 * this.m41 - this.m23 * this.m31 * this.m42 + this.m21 * this.m33 * this.m42 + this.m22 * this.m31 * this.m43 - this.m21 * this.m32 * this.m43) / b, (this.m12 * this.m33 * this.m41 - this.m13 * this.m32 * this.m41 + this.m13 * this.m31 * this.m42 - this.m11 * this.m33 * this.m42 - this.m12 * this.m31 * this.m43 + this.m11 * this.m32 *
            this.m43) / b, (this.m13 * this.m22 * this.m41 - this.m12 * this.m23 * this.m41 - this.m13 * this.m21 * this.m42 + this.m11 * this.m23 * this.m42 + this.m12 * this.m21 * this.m43 - this.m11 * this.m22 * this.m43) / b, (this.m12 * this.m23 * this.m31 - this.m13 * this.m22 * this.m31 + this.m13 * this.m21 * this.m32 - this.m11 * this.m23 * this.m32 - this.m12 * this.m21 * this.m33 + this.m11 * this.m22 * this.m33) / b) : !1;
        return b
    };
    l.translate = function(b, a, c) {
        c = c || 0;
        var d = g(this);
        d.m41 = d.e = d.m11 * b + d.m21 * a + d.m31 * c + d.m41;
        d.m42 = d.f = d.m12 * b + d.m22 * a + d.m32 * c + d.m42;
        d.m43 = d.m13 * b +
            d.m23 * a + d.m33 * c + d.m43;
        d.m44 = d.m14 * b + d.m24 * a + d.m34 * c + d.m44;
        return d
    };
    l.scale = function(b, a, c) {
        a !== +a && (a = b);
        c !== +c && (c = 1);
        var d = new k;
        d.m11 = d.a = b;
        d.m22 = d.d = a;
        d.m33 = c;
        return f(this, d)
    };
    l.rotate = function(b, a, c) {
        b !== +b && (b = 0);
        a !== +a && c !== +c && (c = b, a = b = 0);
        a !== +a && (a = 0);
        c !== +c && (c = 0);
        var d, e;
        b *= Math.PI / 180;
        d = Math.PI / 180 * a;
        e = Math.PI / 180 * c;
        c = Math.cos(b);
        b = -Math.sin(b);
        a = Math.cos(d);
        d = -Math.sin(d);
        var h = Math.cos(e);
        e = -Math.sin(e);
        var g = new k;
        g.m11 = g.a = a * h;
        g.m12 = g.b = -a * e;
        g.m13 = d;
        g.m21 = g.c = b * d * h + c * e;
        g.m22 = g.d =
            c * h - b * d * e;
        g.m23 = -b * a;
        g.m31 = b * e - c * d * h;
        g.m32 = b * h + c * d * e;
        g.m33 = c * a;
        return f(this, g)
    };
    l.rotateAxisAngle = function(b, a, c, d) {
        a !== +a && (a = b);
        c !== +c && (c = b);
        var e;
        e = Math.PI / 360 * d;
        d = Math.sin(e);
        e = Math.cos(e);
        var h = d * d,
            g = Math.sqrt(b * b + a * a + c * c);
        0 === g ? (a = b = 0, c = 1) : (b /= g, a /= g, c /= g);
        var g = b * b,
            l = a * a,
            r = c * c,
            y = new k;
        y.m11 = y.a = 1 - 2 * (l + r) * h;
        y.m12 = y.b = 2 * (b * a * h + c * d * e);
        y.m13 = 2 * (b * c * h - a * d * e);
        y.m21 = y.c = 2 * (a * b * h - c * d * e);
        y.m22 = y.d = 1 - 2 * (r + g) * h;
        y.m23 = 2 * (a * c * h + b * d * e);
        y.m31 = 2 * (c * b * h + a * d * e);
        y.m32 = 2 * (c * a * h - b * d * e);
        y.m33 = 1 - 2 * (g + l) * h;
        y.m14 =
            y.m24 = y.m34 = 0;
        y.m41 = y.e = y.m42 = y.f = y.m43 = 0;
        y.m44 = 1;
        return f(this, y)
    };
    l.toString = function() {
        var b = function(a) {
                return a.toFixed(6)
            },
            a;
        a = this.m13 || this.m14 || this.m23 || this.m24 || this.m31 || this.m32 || 1 !== this.m33 || this.m34 || this.m43 || 1 !== this.m44 ? !1 : !0;
        return a ? "matrix(" + [this.a, this.b, this.c, this.d, this.e, this.f].map(b).join(", ") + ")" : "matrix3d(" + [this.m11, this.m12, this.m13, this.m14, this.m21, this.m22, this.m23, this.m24, this.m31, this.m32, this.m33, this.m34, this.m41, this.m42, this.m43, this.m44].map(b).join(", ") +
            ")"
    };
    l.skewX = function(b) {
        b *= Math.PI / 180;
        var a = new k;
        a.m21 = a.c = Math.tan(b);
        return f(a, this)
    };
    l.skewY = function(b) {
        b *= Math.PI / 180;
        var a = new k;
        a.m12 = a.b = Math.tan(b);
        return f(a, this)
    };
    "undefined" !== typeof exports ? ("object" === typeof module && module.exports && (exports = module.exports = k), exports.CSSMatrix = k) : self.CSSMatrix = k
}();
(function() {
    function k(f, g, d, e) {
        this.x = f || 0;
        this.y = g || 0;
        this.z = d || 0;
        this.w = e || 0
    }

    function g(f) {
        f = f || {};
        var g = {
                perspective: null,
                translate: null,
                skew: null,
                scale: null,
                rotate: null
            },
            d;
        for (d in g) this[d] = f[d] ? f[d] : new k
    }
    var f = k.prototype;
    f.length = function() {
        return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
    };
    f.normalise = function() {
        var f = this.length();
        return new k(this.x / f, this.y / f, this.z / f)
    };
    f.dot = function(f) {
        return this.x * f.x + this.y * f.y + this.z * f.z + this.w * f.w
    };
    f.cross = function(f) {
        return new k(this.y *
            f.z - this.z * f.y, this.z * f.x - this.x * f.z, this.x * f.y - this.y * f.x)
    };
    f.combine = function(f, g, d) {
        return new k(g * this.x + d * f.x, g * this.y + d * f.y, g * this.z + d * f.z)
    };
    f = CSSMatrix.prototype;
    f.transformVector = function(f) {
        return new k(this.m11 * f.x + this.m12 * f.y + this.m13 * f.z, this.m21 * f.x + this.m22 * f.y + this.m23 * f.z, this.m31 * f.x + this.m32 * f.y + this.m33 * f.z)
    };
    f.point3d = function(f) {
        return new k(this.m11 * f.x + this.m21 * f.y + this.m31 * f.z + this.m41, this.m12 * f.x + this.m22 * f.y + this.m32 * f.z + this.m42, this.m13 * f.x + this.m23 * f.y + this.m33 * f.z +
            this.m43, this.m14 * f.x + this.m24 * f.y + this.m34 * f.z + this.m44)
    };
    f.transpose = function() {
        for (var f = new CSSMatrix, g = 0, d = 0, g = 0; 2 >= g; g++)
            for (d = g + 1; 3 >= d; d++) f["m" + (g + 1) + (d + 1)] = this["m" + (d + 1) + (g + 1)], f["m" + (d + 1) + (g + 1)] = this["m" + (g + 1) + (d + 1)];
        return f
    };
    f.determinant = function() {
        return this.m14 * this.m23 * this.m32 * this.m41 - this.m13 * this.m24 * this.m32 * this.m41 - this.m14 * this.m22 * this.m33 * this.m41 + this.m12 * this.m24 * this.m33 * this.m41 + this.m13 * this.m22 * this.m34 * this.m41 - this.m12 * this.m23 * this.m34 * this.m41 - this.m14 * this.m23 *
            this.m31 * this.m42 + this.m13 * this.m24 * this.m31 * this.m42 + this.m14 * this.m21 * this.m33 * this.m42 - this.m11 * this.m24 * this.m33 * this.m42 - this.m13 * this.m21 * this.m34 * this.m42 + this.m11 * this.m23 * this.m34 * this.m42 + this.m14 * this.m22 * this.m31 * this.m43 - this.m12 * this.m24 * this.m31 * this.m43 - this.m14 * this.m21 * this.m32 * this.m43 + this.m11 * this.m24 * this.m32 * this.m43 + this.m12 * this.m21 * this.m34 * this.m43 - this.m11 * this.m22 * this.m34 * this.m43 - this.m13 * this.m22 * this.m31 * this.m44 + this.m12 * this.m23 * this.m31 * this.m44 + this.m13 * this.m21 *
            this.m32 * this.m44 - this.m11 * this.m23 * this.m32 * this.m44 - this.m12 * this.m21 * this.m33 * this.m44 + this.m11 * this.m22 * this.m33 * this.m44
    };
    f.decompose = function() {
        var f = new CSSMatrix(this.toString()),
            l, d, e, c, h;
        if (0 === f.m33) return new g((new CSSMatrix).decompose());
        for (h = 1; 4 >= h; h++)
            for (j = 1; 4 >= j; j++) f["m" + h + j] /= f.m44;
        for (h = 1; 3 >= h; h++) f["m" + h + "4"] = 0;
        f.m44 = 1;
        if (0 === f.determinant()) return new g((new CSSMatrix).decompose());
        0 != f.m14 || 0 != f.m24 || 0 != f.m34 ? (l = new k(f.m14, f.m24, f.m34, f.m44), d = f.inverse(), d = d.transpose(),
            l = d.transformVector(l), f.m14 = f.m24 = f.m34 = 0, f.m44 = 1) : l = new k(0, 0, 0, 1);
        d = new k(f.m41, f.m42, f.m43);
        f.m41 = 0;
        f.m42 = 0;
        f.m43 = 0;
        e = [new k, new k, new k];
        for (h = 1; 3 >= h; h++) e[h - 1].x = f["m" + h + "1"], e[h - 1].y = f["m" + h + "2"], e[h - 1].z = f["m" + h + "3"];
        f = new k;
        c = new k;
        f.x = e[0].length();
        e[0] = e[0].normalise();
        c.x = e[0].dot(e[1]);
        e[1] = e[1].combine(e[0], 1, -c.x);
        f.y = e[1].length();
        e[1] = e[1].normalise();
        c.x /= f.y;
        c.y = e[0].dot(e[2]);
        e[2] = e[2].combine(e[0], 1, -c.y);
        c.z = e[1].dot(e[2]);
        e[2] = e[2].combine(e[1], 1, -c.z);
        f.z = e[2].length();
        e[2] =
            e[2].normalise();
        c.y /= f.z;
        c.y /= f.z;
        h = e[1].cross(e[2]);
        if (0 > e[0].dot(h))
            for (h = 0; 3 > h; h++) f.x *= -1, e[h].x *= -1, e[h].y *= -1, e[h].z *= -1;
        h = new k;
        h.y = Math.asin(-e[0].z);
        0 != Math.cos(h.y) ? (h.x = Math.atan2(e[1].z, e[2].z), h.z = Math.atan2(e[0].y, e[0].x)) : (h.x = Math.atan2(-e[2].x, e[1].y), h.z = 0);
        return new g({
            perspective: l,
            translate: d,
            skew: c,
            scale: f,
            rotate: h
        })
    }
})();
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(a, b) {
        var c = new d.Transform(b),
            e = c.point2d(a[0], a[1]),
            f = c.point2d(a[0], a[3]),
            h = c.point2d(a[2], a[3]),
            c = c.point2d(a[2], a[1]);
        return {
            x1: Math.min(e.x, f.x, h.x, c.x),
            y1: Math.min(e.y, f.y, h.y, c.y),
            x2: Math.max(e.x, f.x, h.x, c.x),
            y2: Math.max(e.y, f.y, h.y, c.y)
        }
    }

    function f(a) {
        if (a.__style) return a.__style;
        if (a.getAttribute) {
            var b = a.getAttribute("style");
            if (b) {
                for (var b = b.split(";"), c = {}, d = 0, e = b.length; d < e; d++) {
                    var f = b[d].split(":");
                    f[0] && f[1] && (c[f[0].trim()] = f[1].trim())
                }
                return a.__style =
                    c
            }
        }
        return a.__style = {}
    }

    function q(a) {
        var b = [];
        if (a)
            for ("string" === typeof a && (a = -1 !== a.indexOf(",") ? a.split(",") : a.split(" ")); a.length;) b.push(parseFloat(a.shift()));
        return b
    }

    function l(a, b) {
        return "undefined" !== typeof XPathResult ? a.evaluate('//*[@xml:id="' + b + '"]', a, function() {
            return "http://www.w3.org/XML/1998/namespace"
        }, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue : a.getElementById ? a.getElementById(b) : null
    }
    var d = k.vector || (k.vector = {}),
        e = k.util || (k.util = {}),
        c = {},
        h = {},
        b = 1 / (180 / Math.PI),
        a = ["g", "switch", "a"],
        w = d.SVG = function(a) {
            if (!(this instanceof w)) return new w(a);
            a = a || {};
            this.convertMetrics = e.getScreenMetrics ? this.convertMetrics || e.toMetrics || (e.toMetrics = e.getScreenMetrics()) : {
                normal_px: 16,
                "xx-small_px": 9,
                "x-small_px": 10,
                small_px: 13,
                medium_px: 16,
                large_px: 18,
                "x-large_px": 24,
                "xx-large_px": 32,
                "%>px": .16,
                "px>pt": .7500187504687618,
                "pt>pc": .08333333333333333,
                "px>in": .010416666666666666,
                "in>ft": .08333333333333333,
                "ft>yd": .3333333333333333,
                "px>mm": .2645833333333333,
                "mm>cm": .1,
                "cm>m": .01,
                "px>ex": .11951429390955158,
                "ex>em": .52295,
                "px>px": 1,
                "px>pc": .06250156253906347,
                "pt>px": 1.3333,
                "pc>px": 15.9996,
                "pc>pt": 12,
                "px>cm": .02645833333333333,
                "mm>m": .001,
                "mm>px": 3.779527559055119,
                "m>mm": 1E3,
                "cm>mm": 10,
                "px>m": 2.645833333333333E-4,
                "cm>px": 37.795275590551185,
                "m>px": 3779.527559055118,
                "m>cm": 100,
                "px>ft": 8.680555555555555E-4,
                "in>yd": .027777777777777776,
                "in>px": 96,
                "yd>in": 36,
                "ft>in": 12,
                "px>yd": 2.8935185185185184E-4,
                "ft>px": 1152,
                "yd>px": 3456,
                "yd>ft": 3,
                "px>em": .0625,
                "ex>px": 8.3672,
                "em>px": 16,
                "em>ex": 1.9122287025528253
            };
            this.type = "svg";
            this.cors = a.cors || !1;
            this.debug = a.debug || !1;
            this.debugSVG = a.debugSVG || !1;
            this.debugBBox = a.debugBBox || !1;
            this.debugHitArea = a.debugHitArea || !1;
            this.placement = a.placement || "bbox";
            this.defaultStroke = this.defaultFill = "#000000";
            this.state = {
                fillStyle: "#000000"
            };
            this.defs = {};
            this.vob = {
                type: "svg"
            };
            this.batch = 0;
            this.skipRender = a.skipRender || !1;
            this.useCache = a.useCache || !1;
            this.uid = 0;
            a.src && (this.src = a.src);
            a.srcs && (this.srcs = a.srcs);
            a.data && (this.data = a.data);
            a.ctxCache && (this.ctxCache = a.ctxCache);
            a.ctx && (this.ctx = a.ctx);
            a.onerror && (this.onerror = a.onerror);
            a.onsuccess && (this.onsuccess = a.onsuccess);
            a.document && (this.document = a.document);
            return a.src || a.document ? this.load() : this
        },
        u = w.prototype;
    u.load = function() {
        function a(c, d) {
            var e = b.onerror;
            e && e({
                message: d,
                code: c
            })
        }
        var b = this;
        if (this.src || this.data || this.document) {
            if (this.src || this.data) {
                var f = this.src || this.data;
                if ("string" === typeof f) {
                    this.__id = e.hashFast(f);
                    if (w.detect(f)) return this.fromString(f), this;
                    !1 !== this.useCache && "undefined" !==
                        typeof document && (this.document = document.getElementById(this.__id))
                } else return a(400, "Bad Request"), this
            } else if (this.document) return this.__id = "#", this.onParseReady(), this;
            if (h[f]) a(404, "Not Found");
            else if (this.document) {
                var g = c[this.__id];
                if (g && g.loaded || this.srcs && this.srcs[f]) this.onParseReady();
                else b.onParseReady()
            } else this.srcs && this.srcs[f] ? this.fromString(this.srcs[f]) : e.request({
                url: f,
                format: "text",
                onerror: function() {
                    h[f] = !0;
                    a(404, "Not Found")
                },
                onsuccess: function(c, e) {
                    d.SVG.detect(e) ?
                        b.fromString(e) : a(422, "Unprocessable Entity")
                }
            })
        }
        return this
    };
    w.decodeDataURL = function(a) {
        a = a.split(/;(.+)/);
        a.shift();
        a = a.shift().split(/,(.+)/);
        var b = a.shift();
        a = a.shift();
        return "utf8" === b ? a : atob(e.string.decodeUTF8(a))
    };
    u.fromString = function(a, b) {
        var c = new DOMParser;
        0 === a.indexOf("data:image/svg") && (a = w.decodeDataURL(a));
        this.srcXML = a;
        a = a.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g, "");
        a = a.replace(/(xmlns(:.*|)='&.*;')/g, "");
        this.document = c = c.parseFromString("<object>" + a + "</object>",
            "text/xml").documentElement;
        this.svg = c.querySelector ? c.querySelector("svg") : c;
        this.document.id = this.__id;
        "object" === typeof document && this.debugSVG && document.body.appendChild(this.document);
        this.onParseReady(b);
        !this.debugSVG && this.document.style && (this.document.style.visibility = "hidden", this.document.style.opacity = 0, this.document.style.zIndex = -1, this.document.style.width = "1px", this.document.style.height = "1px");
        return this
    };
    u.onParseReady = function(a) {
        var b = this,
            d = c[b.__id];
        d ? b.onsuccess && b.onsuccess(d) :
            (b.debug && (b.perf = e.perf()), b.loaded = !0, b.element = b.document.contentDocument || b.document, b.parse({
                document: b.element,
                skipRender: b.skipRender,
                node: {
                    childNodes: []
                },
                onsuccess: function(d) {
                    if (d && (b.vob = d[0], b.viewBox = b.getBoundingBox(null), b.viewBoxStroke = b.getBoundingBox(null, !0), b.perf && b.perf("SVG.parse", !0), b.useCache && (c[b.__id] = b), a && a(b), b.onsuccess && b.onsuccess(b), !b.debug)) try {
                        document.body.removeChild(b.document)
                    } catch (e) {}
                }
            }))
    };
    u.rxSplitByUppercase = /([A-Z]?[^A-Z]*)/g;
    u.rxNumeric = /[+-]?\d*\.?(e[+-]?\d+)*/g;
    u.rxTransform = /(\w+\(([+-]?\d*\.?(e[+-]?\d+)*[, ]?)+\))+/gi;
    u.parse = function(b) {
        function c() {
            if (0 === ++k.batch % 250) setTimeout(c, 0);
            else if (++H === G) b.onsuccess && b.onsuccess(q);
            else {
                var e = I[H],
                    h = e.type,
                    r = "";
                A && A.save();
                if ("none" === f(e).display) return c();
                switch (h) {
                    case "svg":
                        k.currentNode = r = k.getAttributes(e, "id,x,y,width,height,viewBox,version,source,author,license,keywords,metadata,brush");
                        r.matrix = d.Transform.getIdentity();
                        r.type = "svg";
                        if (void 0 !== d.SVGFont) {
                            h = k.element.getElementsByTagName("font");
                            h.length && (k.vob.type || (k.vob = r), A && (k.debug && (A.canvas.style.border = "1px solid rgba(0,0,0,0.1)", k.document.style.left = r.width + "px"), A.canvas.width = r.width || 1, A.canvas.height = r.height || 1), k.typeface = new d.SVGFont(A), k.document.width = r.width || 1, k.document.height = r.height || 1, u = r);
                            for (var v = 0; v < h.length; v++) k.typeface.load(h[v].cloneNode(!0), function(a) {})
                        }
                        if (r.viewBox) {
                            var v = r.viewBox,
                                x = v[2] - v[0],
                                B = v[3] - v[1],
                                h = r.width || x,
                                D = r.height || B;
                            A && (A.canvas.width = h, A.canvas.height = D);
                            x = Math.min(h / x, D / B);
                            B = new d.Transform;
                            B.translate(-v[0], -v[1]);
                            B.translate(h / 2, D / 2);
                            B.scale(x, x);
                            B.translate(-h / 2 * 1 / x, -D / 2 * 1 / x);
                            A && B.apply(A);
                            r.matrix = B.matrix;
                            r.transform = B.matrix;
                            r.transform.type = "transform"
                        } else A && (A.canvas.width = r.width, A.canvas.height = r.height);
                        q.push(r);
                        r.childNodes = [];
                        k.parse({
                            skipRender: b.skipRender,
                            document: e,
                            node: r,
                            svg: u,
                            onsuccess: function(a) {
                                r.childNodes = a;
                                A && A.restore();
                                c()
                            }
                        });
                        return;
                    case "title":
                        if (!u) break;
                        u.title = e.textContent;
                        break;
                    case "desc":
                        if (!u) break;
                        u.desc = e.textContent;
                        break;
                    case "a":
                    case "g":
                    case "switch":
                        if (k.currentNode =
                            r = k.getAttributes(e, "id,labels"), r.parentNode = b.node, r.type = "g", A && A.beginPath(), k.parseTransform(e, "transform"), k.parseClipPath(e, !0), r.style = k.parseStyle(A, e, !w), e.hasChildNodes) {
                            q.push(r);
                            r.childNodes = [];
                            k.parse({
                                skipRender: b.skipRender,
                                document: e,
                                node: r,
                                svg: u,
                                onsuccess: function(a) {
                                    r.childNodes = a;
                                    A && A.restore();
                                    c()
                                }
                            });
                            return
                        }
                    case "use":
                        if (h = k.parseHref(e))
                            if (k.currentNode = r = k.getAttributes(e, "id,xlink:href,labels"), r.parentNode = b.node, r.type = "use", h = h.substr(1), !k.defs[h]) {
                                A && A.beginPath();
                                k.parseTransform(e,
                                    "transform");
                                k.parseClipPath(e, !0);
                                h = k.getElementById(h); - 1 !== a.indexOf(h.nodeName) && (k.parseTransform(h, "transform", !1), k.parseClipPath(h, !0));
                                r.childNodes = [];
                                k.parse({
                                    skipRender: b.skipRender,
                                    document: h,
                                    node: r,
                                    svg: u,
                                    onsuccess: function(a) {
                                        A && A.restore();
                                        q.push(r);
                                        c()
                                    }
                                });
                                return
                            }
                        break;
                    case "fegaussianblur":
                        k.currentNode = r = k.getAttributes(e, "id,stdDeviation");
                        r.parentNode = b.node;
                        r.type = "GaussianBlur";
                        q.push(r);
                        break;
                    case "image":
                        if (h = k.parseHref(e)) {
                            if (!u.cors && "http" === h.substr(0, 4)) break;
                            k.currentNode =
                                r = k.getAttributes(e, "id,x,y,width,height,preserveAspectRatio,labels", !0);
                            r.parentNode = b.node;
                            r.type = "image";
                            r.x = r.x || 0;
                            r.y = r.y || 0;
                            A && A.beginPath();
                            k.parseTransform(e, "transform");
                            k.parseClipPath(e, !0);
                            k.svg.data ? (e = k.svg.data.split("/"), e.pop(), (e = e.join("/")) && (e += "/")) : e = "";
                            r.image = new Image;
                            r.image.node = r;
                            r.image.onload = function() {
                                var a = this.node,
                                    b = this.width,
                                    d = this.height,
                                    e = a.matrix;
                                A && A.setTransform(e.a, e.b, e.c, e.d, e.x, e.y);
                                if (a.preserveAspectRatio && "none" !== a.preserveAspectRatio) {
                                    var f = a.preserveAspectRatio.split(" ")[0],
                                        e = f.substr(1, 3),
                                        f = f.substr(5, 3);
                                    b > a.width && (d *= a.width / b, b = a.width);
                                    d > a.height && (b *= a.height / d, d = a.height);
                                    switch (e) {
                                        case "Min":
                                            e = 0;
                                            break;
                                        case "Mid":
                                            e = (a.width - b) / 2;
                                            break;
                                        case "Max":
                                            e = a.width - b
                                    }
                                    switch (f) {
                                        case "Min":
                                            f = 0;
                                            break;
                                        case "Mid":
                                            f = (a.height - d) / 2;
                                            break;
                                        case "Max":
                                            f = a.height - d
                                    }
                                    A && A.drawImage(this, e, f, b, d);
                                    r.x = e;
                                    r.y = f;
                                    r.width = b;
                                    r.height = d
                                } else A && A.drawImage(this, a.x, a.y, a.width, a.height);
                                r.bbox = g([r.x, r.y, r.x + r.width, r.y + r.height], r.matrix);
                                A && A.restore();
                                a.push(r);
                                c()
                            };
                            r.image.onerror = function() {
                                A &&
                                    A.restore();
                                c()
                            }; - 1 !== h.indexOf("base64") || "http" === h.substr(0, 4) ? (r.href = h, r.image.src = h) : (r.href = e + h, r.image.src = e + h);
                            return
                        }
                    case "text":
                        if (!d.text) {
                            console.log("missing text module");
                            break
                        }
                        k.currentNode = r = k.getAttributes(e, "id,x,y,dx,dy,labels", !0);
                        r.parentNode = b.node;
                        r.type = "text";
                        r.childNodes = [];
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.style = k.parseStyle(A, e, !w);
                        for (var x = D = Infinity, F = B = -Infinity, V = r.dx || 0 + (r.x || 0), P = r.dy || 0 + (r.y || 0), e = e.childNodes, v = h = 0, X = e.length; v <
                            X; v++) {
                            var N = e[v];
                            if ("[object Text]" === String(N)) {
                                var W = {},
                                    T = document.createElement("tspan");
                                T.textContent = N.textContent;
                                N = T
                            } else W = k.getAttributes(N, "id,x,y,dx,dy", !0);
                            void 0 !== W.x && (V = 0);
                            void 0 !== W.y && (P = 0);
                            V = 0 !== (W.dy || 0) ? W.dx || 0 : V + (W.dx || 0);
                            P += W.dy || 0;
                            W.x = V + (W.x || 0);
                            W.y = P + (W.y || 0);
                            W.parentNode = r;
                            W.type = "tspan";
                            W.content = N.textContent.trim();
                            k.currentNode = W;
                            W.style = k.parseStyle(A, N, !w);
                            r.childNodes.push(W);
                            T = k.fontStyleToString(A, W.style);
                            N = d.text.measureText(N.textContent, T);
                            D > W.x && (D = W.x);
                            x >
                                W.y && (x = W.y - W.style.fontSize);
                            F < W.y + N.height && (F = W.y + N.height - W.style.fontSize);
                            B < W.x + N.width && (B = W.x + N.width);
                            V += N.width;
                            h += N.width
                        }
                        switch (r.style.textAnchor) {
                            case "middle":
                                D -= h / 2;
                                B -= h / 2;
                                break;
                            case "end":
                                D -= h, B -= h
                        }
                        r.bbox = g([D, x, B, F], r.matrix);
                        q.push(r);
                        break;
                    case "rect":
                        k.currentNode = r = k.getAttributes(e, "id,x,y,rx,ry,width,height,labels");
                        r.parentNode = b.node;
                        r.type = "rect";
                        r.x || (r.x = 0);
                        r.y || (r.y = 0);
                        if (!r.width || !r.height) break;
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.bbox = g([r.x, r.y, r.x + r.width, r.y + r.height], r.matrix);
                        void 0 === r.rx && void 0 !== r.ry && (r.rx = r.ry);
                        void 0 === r.ry && void 0 !== r.rx && (r.ry = r.rx);
                        A && l && (void 0 === r.rx ? l.rect(A, r.x, r.y, r.width, r.height) : l.roundRect(A, r.x, r.y, r.width, r.height, r.rx, r.ry));
                        r.style = k.parseStyle(A, e, !w);
                        q.push(r);
                        break;
                    case "circle":
                        k.currentNode = r = k.getAttributes(e, "id,cx,cy,r,labels");
                        r.parentNode = b.node;
                        r.type = "circle";
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.bbox = g([r.cx - r.r, r.cy - r.r, r.cx + r.r,
                            r.cy + r.r
                        ], r.matrix);
                        r.cx = r.cx || 0;
                        r.cy = r.cy || 0;
                        A && l.ellipse(A, r.cx, r.cy, r.r, r.r);
                        r.style = k.parseStyle(A, e, !w);
                        q.push(r);
                        break;
                    case "ellipse":
                        k.currentNode = r = k.getAttributes(e, "id,cx,cy,rx,ry,labels");
                        r.parentNode = b.node;
                        r.type = "ellipse";
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.cx = r.cx || 0;
                        r.cy = r.cy || 0;
                        r.bbox = g([r.cx - r.rx, r.cy - r.ry, r.cx + r.rx, r.cy + r.ry], r.matrix);
                        A && l && l.ellipse(A, r.cx, r.cy, r.rx, r.ry);
                        r.style = k.parseStyle(A, e, !w);
                        q.push(r);
                        break;
                    case "line":
                        k.currentNode =
                            r = k.getAttributes(e, "id,x1,y1,x2,y2,labels");
                        r.parentNode = b.node;
                        r.type = "line";
                        r.x1 = r.x1 || 0;
                        r.y1 = r.y1 || 0;
                        r.x2 = r.x2 || 0;
                        r.y2 = r.y2 || 0;
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.bbox = g([r.x1, r.y1, r.x2, r.y2], r.matrix);
                        A && l && (A.moveTo(r.x1, r.y1), A.lineTo(r.x2, r.y2));
                        r.style = k.parseStyle(A, e, !w);
                        q.push(r);
                        break;
                    case "pencil":
                    case "polyline":
                    case "polygon":
                        v = k.parsePoints(e, h);
                        D = v.points;
                        k.currentNode = r = k.getAttributes(e, "id,labels");
                        r.parentNode = b.node;
                        r.type = h.toLowerCase();
                        r.points = D;
                        A && A.beginPath();
                        k.parseTransform(e, "transform");
                        k.parseClipPath(e, !0);
                        r.data = v.data;
                        r.bbox = new d.BBox(r);
                        A && l && l.VOBPath(A, r.data);
                        r.style = k.parseStyle(A, e, !w);
                        q.push(r);
                        break;
                    case "path":
                        k.currentNode = r = k.getAttributes(e, "id,d,labels"), r.parentNode = b.node, r.type = "path", A && A.beginPath(), k.parseTransform(e, "transform"), k.parseClipPath(e, !0), r.data = d.SVGPath.toVOBPath(r.d), r.bbox = new d.BBox(r), r.element = e, A && l && l.VOBPath(A, r.data), r.style = k.parseStyle(A, e, !w), q.push(r)
                }
                A && A.restore();
                c()
            }
        }
        if (b.node) {
            if (b.document && b.document.childNodes && b.document.childNodes.length) var e = b.document.childNodes;
            else if (b.document) {
                var h = b.document.nodeName.toLowerCase();
                if (x[h]) e = [b.document];
                else return b.onsuccess && b.onsuccess([]), this
            } else return b.onsuccess && b.onsuccess([]), this;
            b.defs && (this.defs = b.defs);
            for (var k = this, l = d.Shape, q = b.node.childNodes, u = b.svg || k.svg, w = b.skipRender || !1, A = b.ctx || this.ctx, I = [], B = 0, D = e.length; B < D; B++) {
                var F = e[B],
                    h = F.nodeName.toLowerCase();
                "#" !== h[0] && (0 === h.indexOf("svg:") &&
                    (h = h.substr(4)), 0 === h.indexOf("scalable_vector_graphics:") && (h = h.substr(25)), 0 === h.indexOf("sketchjs:") && (h = h.substr(9)), F.type = h, I.push(F))
            }
            var G = I.length,
                H = -1;
            c();
            return q
        }
    };
    u.parseAttribute = function(a, b, c) {
        void 0 === a && (a = c);
        "inherit" === a && (a = this.currentNode, a = a.parentNode && a.parentNode.style && a.parentNode.style[b] ? a.parentNode.style[b] : c);
        return a
    };
    u.parseStyleAttribute = function(a, b, c) {
        a = b[c] || a.getAttribute(c);
        b = "color" === c ? "color" : c + "Style";
        if (a) {
            if (k.color.webcolors[a]) a = "#" + k.color.webcolors[a];
            else if ("none" === a) a = "transparent";
            else if ("currentColor" === a) a = this.state.color;
            else if ("url" === a.substr(0, 3)) {
                a = a.substr(5, a.indexOf(")") - 5);
                var d = this.ctx,
                    e = this.parseDefs(d, a, c);
                e ? d && this.setStyle(d, e, b) : a = ""
            }
            "inherit" === a && (d = this.currentNode, d.parentNode && d.parentNode.style && d.parentNode.style[b] ? a = d.parentNode.style[b] : "stroke" !== c && (a = "#000000"));
            return a
        }
    };
    u.parseStyle = function(a, b, c) {
        var h = this.currentNode,
            g = this.state = e.copy(h.parentNode.style || this.state),
            k = f(b);
        h.uid = this.uid++;
        a && a.save();
        var l = this.getAttributes(b, "opacity,fill-rule,fill-opacity,stroke-width,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-dasharray,stroke-dashoffset,stroke-opacity,font-size,font-family,font-weight,font-style,line-height,text-anchor", !0);
        void 0 !== l.opacity ? (g.opacity = l.opacity, a && (a.globalAlpha = g.opacity)) : h.parentNode.style ? (g.opacity = h.parentNode.style.opacity, a && (a.globalAlpha = g.opacity)) : (g.opacity = 1, a && (a.globalAlpha = 1));
        var q = b.attributes;
        if (q) {
            var u = q.length;
            u && void 0 === h.attributes &&
                (h.attributes = {});
            for (var w = 0; w < u; w++) {
                var x = q[w];
                if ("data-" === x.name.substr(0, 5)) {
                    var B = x.name.substr(5).split("-");
                    B[1] && (B[1] = B[1][0].toUpperCase() + B[1].substr(1));
                    B = B.join("");
                    h.attributes[B] = x.value
                }
            }(q = k.filter || b.getAttribute("filter")) ? (u = q.substr(5, q.length - 6), !this.defs[u] && (q = this.getElementById(u)) && (this.defs[u] = this.getAttributes(q, "id,x,y,width,height"), this.defs[u].type = "filter", this.defs[u].filter = this.parse({
                document: q,
                node: {
                    childNodes: []
                }
            })), g.filter = u) : delete g.filter;
            l.fontSize &&
                (g.fontSize = l.fontSize);
            if (l.fontFamily)
                for (g.fontFamily = l.fontFamily, q = l.fontFamily.split(","); u = q.shift();) {
                    if (this.typeface && this.typeface.packages[u]) {
                        g.fontRenderer = "SVG";
                        break
                    }
                    if (d.text && d.text.detectFont(u)) {
                        g.fontRenderer = "native";
                        break
                    }
                }
            l.fontWeight && (g.fontWeight = l.fontWeight);
            l.fontStyle && (g.fontStyle = l.fontStyle);
            l.lineHeight && (g.lineHeight = l.lineHeight);
            l.textAnchor && (g.textAnchor = l.textAnchor);
            a && (a.font = this.fontStyleToString(a, g));
            if (q = this.parseStyleAttribute(b, k, "color")) g.color =
                q;
            if (q = this.parseStyleAttribute(b, k, "fill")) l.fillStyle = q;
            else if (q = h.parentNode, q.style) {
                q = e.copy(q.style);
                for (B in l) q[B] = l[B];
                l = q
            } else l.fillStyle = "default";
            g.fillStyle = this.parseAttribute(l.fillStyle, "fillStyle", "#000000");
            g.fillRule = this.parseAttribute(l.fillRule, "fillRule", "nonzero");
            g.fillOpacity = Math.max(0, this.parseAttribute(l.fillOpacity, "fillOpacity", 1));
            c && g && a && ("default" === g.fillStyle ? a.fillStyle = this.defaultFill : g.fillStyle && (a.fillStyle = g.fillStyle), a.save(), a.globalAlpha *= g.fillOpacity,
                h.content ? "SVG" === g.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.fillText(h.content, h.x, h.y)) : a.fillText(h.content, h.x, h.y) : a.fill(), a.restore());
            if (q = this.parseStyleAttribute(b, k, "stroke")) l.strokeStyle = q;
            else if (q = h.parentNode, q.style) {
                q = e.copy(q.style);
                for (B in l) q[B] = l[B];
                l = q
            }
            g.strokeWidth = this.parseAttribute(l.strokeWidth, "strokeWidth", 1);
            g.strokeStyle = this.parseAttribute(l.strokeStyle, "strokeStyle", "none");
            g.strokeLinecap = this.parseAttribute(l.strokeLinecap, "strokeLinecap", "butt");
            g.strokeLinejoin = this.parseAttribute(l.strokeLinejoin, "strokeLinejoin", "miter");
            g.strokeMiterlimit = Math.max(1, this.parseAttribute(l.strokeMiterlimit, "strokeMiterlimit", 4));
            g.strokeDasharray = this.parseAttribute(l.strokeDasharray, "strokeDasharray", "none");
            g.strokeDashoffset = this.parseAttribute(l.strokeDashoffset, "strokeDashoffset", 0);
            g.strokeOpacity = Math.max(0, this.parseAttribute(l.strokeOpacity, "strokeOpacity", 1));
            c && g && a && (a.lineWidth = 0 === g.strokeWidth ? e.ZERO : g.strokeWidth || 1, a.lineCap = g.strokeLinecap ||
                "butt", a.lineJoin = g.strokeLinejoin || "miter", a.miterLimit = g.strokeMiterlimit || a.lineWidth, g.strokeStyle && "none" !== g.strokeStyle && (a.strokeStyle = g.strokeStyle, a.save(), a.globalAlpha *= g.strokeOpacity, h.content ? "SVG" === g.fontRenderer ? (this.typeface.setFont(a.font), this.typeface.strokeText(h.content, h.x, h.y)) : a.strokeText(h.content, h.x, h.y) : a.stroke(), a.restore()));
            a && a.restore();
            return g
        }
    };
    u.parseDefs = function(a, b, c) {
        if (this.defs[b]) return this.defs[b];
        var d = this.getElementById(b);
        if (!d) return {};
        c = d.nodeName.toLowerCase();
        switch (c) {
            case "pattern":
                return this.defs[b] = this.PatternExtract(a, d);
            case "lineargradient":
            case "radialgradient":
                return this.defs[b] = this.GradientExtract(a, d, c)
        }
    };
    u.addDef = function(a) {
        return this.defs[a.id] = a
    };
    u.Gradient = function(a) {
        a = a || {};
        var b = {
            id: a.id || "MyGradient",
            type: a.type || "linearGradient",
            gradientTransform: a.gradientTransform,
            gradientUnits: a.gradientUnits || "objectBoundingBox",
            spreadMethod: a.spreadMethod || "pad",
            stops: a.stops || [{
                color: "#fff",
                offset: 0
            }, {
                color: "#000",
                offset: 1
            }]
        };
        "radialGradient" ===
        b.type ? (b.cx = isFinite(a.cx) ? a.cx : 0, b.cy = isFinite(a.cy) ? a.cy : 1, b.fx = isFinite(a.fx) ? a.fx : 0, b.fy = isFinite(a.fy) ? a.fy : 0, b.r = isFinite(a.r) ? a.r : 1) : (b.x1 = isFinite(a.x1) ? a.x1 : 0, b.x2 = isFinite(a.x2) ? a.x2 : 1, b.y1 = isFinite(a.y1) ? a.h1 : 0, b.y2 = isFinite(a.y2) ? a.y2 : 0);
        return b
    };
    u.GradientEncode = function(a) {
        var b;
        b = "<" + a.type;
        b = this.encodeAttributes(b, a);
        b += ">\n";
        for (var c = a.stops, d = 0; d < c.length; d++) {
            var e = c[d],
                f = e.color;
            if ("rgba" === f.substr(0, 4)) {
                var f = k.color.space(f, "W3>RGBA"),
                    h = f.A / 255,
                    f = k.color.space(f, "RGB>W3");
                b += '\t<stop offset="' + e.offset + '" style="stop-color:' + f + ";stop-opacity:" + h + ';"/>\n'
            } else b += '\t<stop offset="' + e.offset + '" style="stop-color:' + e.color + ';"/>\n'
        }
        return b += "</" + a.type + ">\n"
    };
    u.GradientExtract = function(a, b, c) {
        if ("lineargradient" === c) {
            var d = this.getAttributes(b, "id,x1,y1,x2,y2,spreadMethod,gradientUnits,gradientTransform");
            d.type = "linearGradient"
        } else d = this.getAttributes(b, "id,cx,cy,r,fx,fy,spreadMethod,gradientUnits,gradientTransform"), d.type = "radialGradient", void 0 === d.fx && (d.fx = d.cx,
            d.fy = d.cy);
        void 0 === d.gradientUnits && (d.gradientUnits = "objectBoundingBox");
        var e = [],
            h = b.childNodes,
            g = this.parseHref(b);
        if (g) return e = this.parseDefs(a, g.substr(1), c), d.stops = e.stops, d;
        var l = f(b);
        b = l.color || b.getAttribute("color") || this.state.color;
        a = 0;
        for (var q in h)
            if (g = h[q], g.nodeName && (c = g.nodeName.toLowerCase(), "stop" === c && (l = f(g), c = l["stop-color"] || g.getAttribute("stop-color")))) k.color.webcolors[c] ? c = "#" + k.color.webcolors[c] : "none" === c ? c = "transparent" : "currentColor" === c ? c = b || "#000000" : "inherit" ===
                c && (c = b || "#000000"), (l = l["stop-opacity"] || g.getAttribute("stop-opacity")) && "1" !== l && ("inherit" === l && (l = 1), "#" === c.substr(0, 1) ? (c = k.color.space(c.substr(1), "W3>HEX24>RGB"), c.A = 255 * parseFloat(l)) : "rgba" === c.substr(0, 4) ? (c = k.color.space(c, "W3>RGBA"), c.A *= parseFloat(l)) : "rgb" === c.substr(0, 3) && (c = k.color.space(c, "W3>RGB"), c.A = 255 * parseFloat(l)), c = k.color.space.RGBA_W3(c)), g = g.getAttribute("offset") || "0", l = -1 !== g.indexOf("%") ? 100 : 1, g = parseFloat(g) / l, g < a && (g = a), e.push({
                    offset: g,
                    color: c
                }), a = g;
        d.stops = e;
        return d
    };
    u.Pattern = function(a) {
        return {
            id: a.id || "MyPattern",
            type: a.type || "pattern",
            pattern: a.pattern || CanvasPattern,
            patternContentUnits: a.patternContentUnits,
            patternTransform: a.patternTransform,
            patternUnits: a.patternUnits || "userSpaceOnUse",
            width: a.width || 100,
            height: a.height || 100
        }
    };
    u.PatternEncode = function(a) {
        var b;
        b = this.encodeAttributes("<pattern", a);
        b += ">\n";
        a = a.childNodes;
        a.length && (b += this.encodeChildNodes(a, "", "\t"));
        return b += "</pattern>\n"
    };
    u.PatternExtract = function(a, b) {
        var c = this,
            d = this.getAttributes(b,
                "patternUnits,patternContentUnits,patternTransform,x,y,width,height,preserveAspectRatio,href"),
            e = this.parseHref(b);
        e && (d.href = e);
        d.type = "pattern";
        d.id = b.id;
        var f = new w;
        f.element = b;
        f.parse({
            skipRender: !0,
            document: b,
            node: {
                childNodes: []
            },
            onsuccess: function(b) {
                d.childNodes = b;
                if (b.length) {
                    b = c.createContext();
                    var e = c.getBoundingBox(d.childNodes, !1, .5);
                    b.canvas.width = e[2] - e[0];
                    b.canvas.height = e[3] - e[1];
                    f.render({
                        ctx: b,
                        childNodes: d.childNodes,
                        viewBox: e,
                        placement: "crop"
                    });
                    a && b.canvas.width && b.canvas.height &&
                        (d.pattern = a.createPattern(b.canvas, "repeat"))
                }
                d.href && c.parseDefs(a, d.href.substr(1), "pattern")
            }
        });
        return d
    };
    u.parseHref = function(a) {
        return a.getAttribute("xlink:href") || a.getAttribute("href")
    };
    u.parseTransform = function(a, c, e) {
        var f = this.ctx,
            h = this.currentNode;
        if (a) {
            a = a.getAttribute(c);
            e = !1 !== e;
            var g = (c = "transform" === c) ? h.matrix ? h.matrix : h.parentNode.matrix ? h.matrix = d.Transform.cloneMatrix(h.parentNode.matrix) : h.matrix = d.Transform.getIdentity() : d.Transform.getIdentity();
            if (a) {
                var g = new d.Transform(g),
                    k = new d.Transform;
                if (a = a.match(this.rxTransform))
                    for (var l = 0, u = a.length; l < u; l++) {
                        var w = a[l].replace(/^\s+|\s+$/, "").split("("),
                            x = w[0].replace(/^\s+|\s+$/, ""),
                            w = q(w[1]);
                        switch (x) {
                            case "matrix":
                                c && (f && f.transform(w[0], w[1], w[2], w[3], w[4], w[5]), k.transform(w[0], w[1], w[2], w[3], w[4], w[5]));
                                g.transform(w[0], w[1], w[2], w[3], w[4], w[5]);
                                break;
                            case "translate":
                                2 === w.length ? (c && (f && f.translate(w[0], w[1]), k.translate(w[0], w[1])), g.translate(w[0], w[1])) : (c && (f && f.translate(w[0], 0), k.translate(w[0], 0)), g.translate(w[0]));
                                break;
                            case "scale":
                                2 === w.length ? (c && (f && f.scale(w[0], w[1]), k.scale(w[0], w[1])), g.scale(w[0], w[1])) : (c && (f && f.scale(w[0], w), k.scale(w[0], w[0])), g.scale(w[0], w[0]));
                                break;
                            case "rotate":
                                x = w[0] * b;
                                3 === w.length ? (c && (f && (f.translate(w[1], w[2]), f.rotate(x), f.translate(-w[1], -w[2])), k.translate(w[1], w[2]), k.rotate(x), k.translate(-w[1], -w[2])), g.translate(w[1], w[2]), g.rotate(x), g.translate(-w[1], -w[2])) : (c && (f && f.rotate(x), k.rotate(x)), g.rotate(x));
                                break;
                            case "skewX":
                                x = w[0] * b;
                                c && (f && f.transform(1, 0, Math.tan(x),
                                    1, 0, 0), k.skew(x, 0));
                                g.skew(x, 0);
                                break;
                            case "skewY":
                                x = w[0] * b, c && (f && f.transform(1, Math.tan(x), 0, 1, 0, 0), k.skew(0, x)), g.skew(0, x)
                        }
                    }
                e && (h.transform = k.matrix, h.transform.type = "transform", h.matrix = g.matrix);
                return {
                    matrix: g.matrix,
                    transform: k.matrix
                }
            }
        }
    };
    u.parseClipPath = function(a, b) {
        var c = this.ctx,
            d = this.currentNode;
        if (a) {
            var e = a.getAttribute("clip-path");
            if (e) {
                e = e.substr(5, e.length - 6);
                if (this.defs[e]) return b && (d.clipPath = this.defs[e].d), c && (this.renderChildNodes(c, {}, d.clipPath, !0), c.clip(), c.beginPath()),
                    this.defs[e];
                var f = this.getElementById(e);
                if (f) return this.defs[e] = this.getAttributes(f, "id,x,y,width,height,clipPathUnits"), this.defs[e].type = "clipPath", f = this.parse({
                    document: f,
                    matrix: this.vob.matrix,
                    node: {
                        childNodes: []
                    },
                    skipRender: !0
                }), c && (c.clip(), c.beginPath()), f.id = e, this.defs[e].d = f, b && (d.clipPath = f), this.defs[e]
            }
        }
    };
    u.parsePoints = function(a, b) {
        var c = a.getAttribute("points");
        if (c) {
            var d = c.replace(/[\s,]+/g, " ").trim().split(/[, ]/);
            if (!(2 > d.length)) {
                for (var e = [], c = [], f = 0, h = d.length; f < h; f += 2) {
                    var g =
                        d[f],
                        k = d[f + 1];
                    e.push({
                        cmd: c.length ? "L" : "M",
                        x: parseFloat(g),
                        y: parseFloat(k)
                    });
                    c.push([g, k])
                }
                d = c.length - 1;
                f = c[d];
                isFinite(f[1]) || (e[d].y = f[1] = c[0][1]);
                "polygon" === b.toLowerCase() ? (c = "" + c.join(" ") + "", e.push({
                    cmd: "Z",
                    x: e[0].x,
                    y: e[0].y
                })) : c = "" + c.join(" ");
                return {
                    points: c,
                    data: e
                }
            }
        }
    };
    u.getAttributes = function(a, b, c) {
        var d = {};
        if (!a || !a.getAttribute) return {};
        var e = f(a),
            h = 0;
        b = b.split(",");
        for (var g = b.length; h < g; h++) {
            var k = b[h],
                l = this.__attributes[k],
                u = !1;
            if (!l)
                if (l = this.__attributesNS[k]) k = this.__namepace +
                    ":" + k, u = !0;
                else if (k = k.match(this.rxSplitByUppercase).slice(0, -1).join("-").toLowerCase(), l = this.__attributes[k], !l) {
                console.log(k);
                continue
            }
            l = l.format;
            if (c) {
                var w = e[k] || a.getAttribute(k); - 1 !== k.indexOf("-") && (k = k.split("-"), k[1] && (k[1] = k[1][0].toUpperCase() + k[1].substr(1)), k = k.join(""))
            } else w = a.getAttribute(k) || e[k], "id" !== k || w || (w = a.getAttribute("xml:id"));
            if (w)
                if ("inherit" === w) u = this.currentNode, u.parentNode && u.parentNode.style && u.parentNode.style[k] && (d[k] = u.parentNode.style[k]);
                else if ("none" ===
                w) d[k] = w;
            else switch (u && (k = k.replace(this.__namepace + ":", "")), l) {
                case "numarray":
                    d[k] = q(w);
                    break;
                case "coordinate":
                    d[k] = parseFloat(w);
                    (l = w.replace(this.rxNumeric, "")) && "%" !== l && "px" !== l && (d[k] *= this.convertMetrics[l + ">px"]);
                    Infinity === d[k] && (d[k] = 4294967295); - Infinity === d[k] && (d[k] = -4294967295);
                    break;
                case "float":
                    d[k] = parseFloat(w);
                    Infinity === d[k] && (d[k] = 4294967295); - Infinity === d[k] && (d[k] = -4294967295);
                    break;
                case "gradientTransform":
                case "patternTransform":
                case "transform":
                    u = this.parseTransform(a,
                        l, !1);
                    d[k] = u.matrix;
                    break;
                case "string":
                    d[k] = w
            }
        }
        return d
    };
    u.getBoundingBox = function(a, b, c) {
        var d = function(a) {
                for (var c, f = a.length, h = 0; h < f; h++)
                    if (c = a[h]) {
                        if (c.bbox) {
                            if (b && c.style && c.style.strokeStyle) var g = c.style.strokeWidth || 0,
                                p = c.bbox.x1 - g,
                                k = c.bbox.x2 + g,
                                l = c.bbox.y1 - g,
                                g = c.bbox.y2 + g;
                            else p = c.bbox.x1, k = c.bbox.x2, l = c.bbox.y1, g = c.bbox.y2;
                            p < e.x1 && (e.x1 = p);
                            l < e.y1 && (e.y1 = l);
                            k > e.x2 && (e.x2 = k);
                            g > e.y2 && (e.y2 = g)
                        }
                        c.childNodes && d(c.childNodes)
                    }
            },
            e = {
                x1: Infinity,
                y1: Infinity,
                x2: -Infinity,
                y2: -Infinity
            };
        d(a || [this.vob]);
        c && (e.x1 -= c, e.y1 -= c, e.x2 += c, e.y2 += c);
        return [e.x1, e.y1, e.x2, e.y2]
    };
    u.getElementById = function(a) {
        if (this.element.ownerDocument) {
            var b = this.element.ownerDocument.getElementById(a);
            b || (b = l(this.element.ownerDocument, a))
        } else(b = this.element.getElementById(a)) || (b = l(this.element, a));
        return b
    };
    u.getLayerById = function(a) {
        var b = function(c) {
            for (var d = 0; d < c.length; d++) {
                var e = c[d];
                if (e.id === a || e.childNodes && (e = b(e.childNodes))) return e
            }
        };
        return b(this.vob.childNodes)
    };
    u.getLayerBy = function(a, b) {
        var c = function(d) {
            for (var e =
                    0; e < d.length; e++) {
                var f = d[e];
                if (f[a] === b || f.childNodes && (f = c(f.childNodes))) return f
            }
        };
        return c(this.vob.childNodes)
    };
    u.fontStyleToString = function(a, b) {
        if (a && b) {
            var c = b.textAnchor || "left";
            "middle" === c && (c = "center");
            a.textAlign = c;
            return (b.fontStyle || "normal") + " " + (b.fontWeight || "normal") + " " + (b.fontSize || "normal") + "px " + (b.fontFamily || "sans-serif")
        }
    };
    u.createContext = function() {
        var a = "undefined" === typeof document ? new Canvas : document.createElement("canvas");
        a.ctx = a.getContext("2d");
        return a.ctx
    };
    u.walk =
        function(a, b, c) {
            var d = void 0 !== c,
                e = function(f) {
                    for (var h = 0; h < f.length; h++) {
                        var g = f[h];
                        if (b) {
                            if (d && g[b] === c) return a(g);
                            g[b] && a(g)
                        } else a(g);
                        if (g.childNodes && (g = e(g.childNodes))) return g
                    }
                };
            if (this.vob) return e(this.vob.childNodes)
        };
    var x = {
        text: !0,
        rect: !0,
        circle: !0,
        ellipse: !0,
        line: !0,
        polyline: !0,
        polygon: !0,
        path: !0
    };
    d.SVG.Gradient = u.Gradient;
    d.SVG.GradientEncode = u.GradientEncode;
    d.SVG.Pattern = u.Pattern;
    d.SVG.PatternEncode = u.PatternEncode;
    d.SVG.cache = c;
    d.SVG.resetCache = function() {
        d.SVG.cache = c = {}
    };
    d.SVG.detect =
        function(a) {
            return a.startsWith("data:image/svg") || a.startsWith("<?xml") && a.includes("<svg") || a.startsWith("<svg")
        }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k = (k.vector || (k.vector = {})).SVG.prototype;
    k.nodeType = 1;
    k.__dtd = "https://sketch.io/dtd/";
    k.__namepace = "sketchjs";
    k.__version = "3.0";
    k.__attributesNS = {
        labels: {
            param: "labels",
            format: "string",
            value: ""
        },
        keywords: {
            param: "labels",
            format: "string",
            value: ""
        },
        license: {
            param: "license",
            format: "string",
            value: ""
        },
        author: {
            param: "author",
            format: "string",
            value: ""
        },
        source: {
            param: "source",
            format: "string",
            value: ""
        },
        version: {
            param: "version",
            format: "string",
            value: ""
        },
        metadata: {
            param: "metadata",
            format: "string",
            value: ""
        },
        brush: {
            param: "brush",
            format: "string",
            value: ""
        },
        uid: {
            param: "uid",
            format: "int",
            value: ""
        }
    };
    k.__attributes = {
        id: {
            param: "id",
            format: "string",
            value: ""
        },
        src: {
            param: "src",
            format: "string",
            value: ""
        },
        href: {
            param: "href",
            format: "string",
            value: ""
        },
        "xlink:href": {
            param: "xlink:href",
            format: "string",
            value: ""
        },
        display: {
            param: "display",
            format: "string",
            valid: "inline | block | list-item | run-in | compact | marker | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | none | inherit",
            value: "inline"
        },
        visibility: {
            param: "visibility",
            format: "string",
            valid: "visible | hidden | collapse | inherit",
            value: "visible"
        },
        viewBox: {
            param: "viewBox",
            format: "numarray",
            value: 0
        },
        preserveAspectRatio: {
            param: "preserveAspectRatio",
            format: "string",
            valid: "[defer] <align> [<meetOrSlice>]",
            value: "xMidYMid meet"
        },
        x: {
            param: "x",
            format: "coordinate",
            value: ""
        },
        y: {
            param: "y",
            format: "coordinate",
            value: ""
        },
        width: {
            param: "width",
            format: "coordinate",
            value: ""
        },
        height: {
            param: "height",
            format: "coordinate",
            value: ""
        },
        transform: {
            param: "transform",
            format: "transform",
            value: "matrix(1,0,0,1,0,0)"
        },
        dx: {
            param: "dx",
            format: "coordinate",
            value: ""
        },
        dy: {
            param: "dy",
            format: "coordinate",
            value: ""
        },
        cx: {
            param: "cx",
            format: "coordinate",
            value: ""
        },
        cy: {
            param: "cy",
            format: "coordinate",
            value: ""
        },
        rx: {
            param: "rx",
            format: "float",
            value: ""
        },
        ry: {
            param: "ry",
            format: "float",
            value: ""
        },
        r: {
            param: "r",
            format: "coordinate",
            value: ""
        },
        x1: {
            param: "x1",
            format: "float",
            value: ""
        },
        y1: {
            param: "y1",
            format: "float",
            value: ""
        },
        x2: {
            param: "x2",
            format: "float",
            value: ""
        },
        y2: {
            param: "y2",
            format: "float",
            value: ""
        },
        d: {
            param: "d",
            format: "string",
            value: ""
        },
        points: {
            param: "points",
            format: "string",
            value: ""
        },
        "font-size": {
            param: "font-size",
            format: "float",
            valid: "<absolute-size> | <relative-size> | <length> | <percentage> | inherit",
            value: "medium"
        },
        "font-style": {
            param: "font-style",
            format: "string",
            valid: "normal | italic | oblique | inherit",
            value: "normal"
        },
        "font-family": {
            param: "font-family",
            format: "string",
            valid: "[[ <family-name> | <generic-family> ],]* [<family-name> | <generic-family>] | inherit",
            value: "sans-serif"
        },
        "font-weight": {
            param: "font-weight",
            format: "string",
            valid: "normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit",
            value: "normal"
        },
        "line-height": {
            param: "line-height",
            format: "float",
            valid: "normal | <number> | <length> | <percentage> | inherit",
            value: "normal"
        },
        "text-decoration": {
            param: "text-decoration",
            format: "string",
            valid: "none | [ underline || overline || line-through || blink ] | inherit",
            value: "none"
        },
        "text-anchor": {
            param: "text-anchor",
            format: "string",
            valid: "start | middle | end | inherit",
            value: "start"
        },
        kerning: {
            param: "kerning",
            format: "float",
            valid: "auto | <length> | inherit",
            value: "auto"
        },
        "letter-spacing": {
            param: "letter-spacing",
            format: "float",
            valid: "normal | <length> | inherit",
            value: "normal"
        },
        "word-spacing": {
            param: "word-spacing",
            format: "float",
            valid: "normal | <length> | inherit",
            value: "normal"
        },
        "clip-path": {
            param: "clip-path",
            format: "string",
            value: ""
        },
        clipPathUnits: {
            param: "clipPathUnits",
            format: "string",
            value: "userSpaceOnUse"
        },
        opacity: {
            param: "opacity",
            format: "float",
            value: 1
        },
        fill: {
            param: "fill",
            format: "string",
            value: "black"
        },
        "fill-rule": {
            param: "fill-rule",
            format: "string",
            valid: "nonzero | evenodd | inherit",
            value: "nonzero"
        },
        "fill-opacity": {
            param: "fill-opacity",
            format: "float",
            valid: "<opacity-value> | inherit",
            value: 1
        },
        stroke: {
            param: "stroke",
            format: "string",
            value: "black"
        },
        "stroke-width": {
            param: "stroke-width",
            format: "coordinate",
            valid: "<percentage> | <length> | inherit",
            value: 1
        },
        "stroke-linecap": {
            param: "stroke-linecap",
            format: "string",
            valid: "butt | round | square | inherit",
            value: "butt"
        },
        "stroke-linejoin": {
            param: "stroke-linejoin",
            format: "string",
            valid: "miter | round | bevel | inherit",
            value: "miter"
        },
        "stroke-miterlimit": {
            param: "stroke-miterlimit",
            format: "float",
            valid: "<miterlimit> | inherit",
            value: 4
        },
        "stroke-dasharray": {
            param: "stroke-dasharray",
            format: "numarray",
            valid: "none | <dasharray> | inherit",
            value: "none"
        },
        "stroke-dashoffset": {
            param: "stroke-dashoffset",
            format: "coordinate",
            valid: "<percentage> | <length> | inherit",
            value: 0
        },
        "stroke-opacity": {
            param: "stroke-opacity",
            format: "float",
            valid: "<opacity-value> | inherit",
            value: 1
        },
        stops: {
            param: "stops",
            format: "string",
            value: ""
        },
        gradientUnits: {
            param: "gradientUnits",
            format: "string",
            valid: "userSpace | userSpaceOnUse | objectBoundingBox",
            value: "userSpace"
        },
        gradientTransform: {
            param: "gradientTransform",
            format: "gradientTransform",
            value: "matrix(1,0,0,1,0,0)"
        },
        spreadMethod: {
            param: "spreadMethod",
            format: "string",
            valid: "pad | reflect | repeat",
            value: "pad"
        },
        fx: {
            param: "fx",
            format: "coordinate",
            value: ""
        },
        fy: {
            param: "fy",
            format: "coordinate",
            value: ""
        },
        patternUnits: {
            param: "patternUnits",
            format: "string",
            value: ""
        },
        patternContentUnits: {
            param: "patternContentUnits",
            format: "string",
            value: ""
        },
        patternTransform: {
            param: "patternTransform",
            format: "patternTransform",
            value: "matrix(1,0,0,1,0,0)"
        },
        stdDeviation: {
            param: "stdDeviation",
            format: "float",
            value: 0
        },
        filter: {
            param: "filter",
            format: "string",
            value: ""
        },
        color: {
            param: "color",
            format: "string",
            value: ""
        },
        "color-interpolation-filters": {
            param: "color-interpolation-filters",
            format: "string",
            valid: "auto | sRGB | linearRGB | inherit",
            value: "sRGB"
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(d, e, c) {
        if (!l[d]) {
            var f = c.__attributes[d];
            if (!f)
                if (f = c.__attributesNS[d]) d = c.__namepace + ":" + d;
                else if (d = d.match(c.rxSplitByUppercase).slice(0, -1).join("-").toLowerCase(), f = c.__attributes[d], !f) {
                k.feature.debug && console.log(d, e);
                return
            }
            if (f.value !== e) switch (f.format) {
                case "string":
                case "gradientTransform":
                case "patternTransform":
                case "transform":
                    if ("string" === typeof e) return " " + d + '="' + e + '"';
                    break;
                case "coordinate":
                case "float":
                case "int":
                    if (isFinite(e)) return " " + d + '="' + e + '"';
                    break;
                case "numarray":
                    return " " + d + '="' + e + '"';
                default:
                    console.log("unhandled", f)
            }
        }
    }

    function f(d, e, c) {
        var f = c.__attributes[d];
        if (f && f.value !== e) {
            "default" === e && (e = "fill" === d ? c.defaultFill : c.defaultStroke);
            if (c.defs[e]) return " " + d + '="url(#' + e + ')"';
            if (e) return " " + d + '="' + e + '"'
        }
    }
    var q = (k.vector || (k.vector = {})).SVG.prototype;
    q.clone = function(d, e) {
        (new ROOT).fromString(this.toDataURL(), function(c) {
            e && (c.vob.id = "clone" + Math.round(16777215 * Math.random()));
            d && d(c)
        })
    };
    q.toCanvas = function(d) {
        this.ctx || (this.ctx =
            this.createContext(), this.render({
                ctx: this.ctx,
                placement: "crop"
            }));
        d && d(this.ctx.canvas)
    };
    q.toBlob = function(d) {
        var e = new Blob([this.stringify()], {
            type: "image/svg+xml"
        });
        if (d) d(e);
        else return e
    };
    q.toDataURL = function() {
        return "data:image/svg+xml;base64," + this.btoa()
    };
    q.btoa = function() {
        return btoa(this.stringify())
    };
    q.toString = q.stringify = function() {
        var d = "",
            e;
        for (e in this.defs) {
            var c = this.defs[e];
            switch (c.type) {
                case "linearGradient":
                case "radialGradient":
                    d += this.GradientEncode(c);
                    break;
                case "pattern":
                    d +=
                        this.PatternEncode(c);
                    break;
                case "filter":
                    for (var d = d + "<filter", d = this.encodeAttributes(d, c), d = d + ">\n", c = c.filter, f = 0; f < c.length; f++) var b = c[f],
                        d = d + ("\t<fe" + b.type),
                        d = this.encodeAttributes(d, b),
                        d = d + "/>\n";
                    d += "</filter>\n";
                    break;
                case "clipPath":
                    d += "<clipPath";
                    d = this.encodeAttributes(d, c);
                    d += ">\n";
                    c = c.d;
                    for (f = 0; f < c.length; f++) b = c[f], d += "\t<" + b.type, d = this.encodeAttributes(d, b), d += "/>\n";
                    d += "</clipPath>\n"
            }
        }
        return this.encodeChildNodes([this.vob], d, "")
    };
    q.encodeChildNodes = function(d, e, c) {
        var f = "";
        if (!d ||
            !d.length) return f;
        for (var b = 0, a = d.length; b < a; b++) {
            var g = d[b];
            if (g) {
                var k = g.type;
                switch (k) {
                    case "circle":
                    case "ellipse":
                    case "image":
                    case "line":
                    case "path":
                    case "polyline":
                    case "polygon":
                    case "rect":
                        f += c + "<" + k;
                        f = this.encodeAttributes(f, g);
                        f += "></" + k + ">\n";
                        break;
                    case "stamp":
                    case "eraser":
                    case "pencil":
                        k = this.__namepace + ":" + k;
                        f += c + "<" + k;
                        f = this.encodeAttributes(f, g);
                        f += "></" + k + ">\n";
                        break;
                    case "text":
                        f += c + "<text";
                        f = this.encodeAttributes(f, g);
                        f += ">";
                        if (g.content) f += g.content;
                        else if (g = g.childNodes)
                            for (var k =
                                    0, l = g.length; k < l; k++) f += "<tspan", f = this.encodeAttributes(f, g[k]), f += ">" + g[k].content + "</tspan>";
                        f += "</text>\n";
                        break;
                    case "a":
                    case "g":
                    case "switch":
                        f += c + "<" + k;
                        f = this.encodeAttributes(f, g);
                        f += ">\n";
                        f += this.encodeChildNodes(g.childNodes, e, c + "\t");
                        f += c + "</" + k + ">\n";
                        break;
                    case "svg":
                        f += '<?xml version="1.0" encoding="utf-8"?>\n';
                        f += "\x3c!-- Generator: sketch.js " + this.__version + " <https://api.sketch.io/> --\x3e\n";
                        f += '<svg version="1.1" xmlns="http://www.w3.org/2000/svg"';
                        f += ' xmlns:xlink="http://www.w3.org/1999/xlink"';
                        f += " xmlns:" + this.__namepace + '="' + this.__dtd + '"';
                        g.version = g.version || this.__version;
                        f = this.encodeAttributes(f, g);
                        f += ">\n";
                        e && (f += "<defs>" + e + "</defs>");
                        f += this.encodeChildNodes(g.childNodes, e, c + "\t");
                        f += "</svg>";
                        break;
                    case "use":
                        f += c + "<use";
                        f = this.encodeAttributes(f, g);
                        f += ">\n";
                        f += c + "</use>\n";
                        break;
                    default:
                        f += this.encodeChildNodes(g.childNodes, e, c + "\t")
                }
            }
        }
        return f
    };
    q.encodeAttributes = function(d, e) {
        for (var c in e) {
            var h = e[c];
            if (void 0 !== h) switch (c) {
                case "href":
                    (h = g("xlink:href", h, this)) && (d += h);
                    break;
                case "clipPath":
                    (h = g("clip-path", "url(#" + h.id + ")", this)) && (d += h);
                    break;
                case "viewBox":
                    (h = g(c, h.join(" "), this)) && (d += h);
                    break;
                case "transform":
                case "gradientTransform":
                case "patternTransform":
                    h && (h = g(c, "matrix(" + h.a + "," + h.b + "," + h.c + "," + h.d + "," + h.x + "," + h.y + ")", this)) && (d += h);
                    break;
                case "fill":
                case "fillStyle":
                    (h = f("fill", h, this)) && (d += h);
                    break;
                case "stroke":
                case "strokeStyle":
                    (h = f("stroke", h, this)) && (d += h);
                    break;
                case "style":
                    d += this.encodeAttributes("", e.style);
                    break;
                case "attributes":
                case "element":
                    break;
                default:
                    (h = g(c, h, this)) && (d += h)
            }
        }
        return d
    };
    var l = {
        type: !0,
        childNodes: !0,
        parentNode: !0,
        matrix: !0,
        data: !0,
        bbox: !0
    }
})(sketch);
(function(k) {
    function g(d, e, c, f, b) {
        if (d) {
            d.current_style = d.current_style || {};
            b ? (d.style[e] = d.current_style[e] || d.style[e], delete d.current_style[e]) : d.current_style[e] = d.current_style[e] || d.style[e];
            var a = [],
                k = {};
            k.uid = d.uid;
            k[e] = d.style[e];
            a.push(k);
            d.orig_style = d.orig_style || {};
            d.orig_style[e] = d.orig_style[e] || k[e];
            d.style[e] = c;
            var l = f && d.childNodes;
            if (l)
                for (var x = 0; x < l.length; x++) {
                    d = l[x];
                    var p = d.style;
                    q[p[e]] || (d.childNodes ? a = a.concat(g(d, e, c, f, b)) : (k = {}, k.uid = d.uid, k[e] = p[e], a.push(k), d.orig_style =
                        d.orig_style || {}, d.orig_style[e] = d.orig_style[e] || k[e], p[e] = c))
                }
            return a
        }
    }
    var f = k.vector = k.vector || {};
    f.setStyleAt = function() {
        function d(d, c) {
            var f = d.bbox,
                b = d.svg,
                a = f.width / b.viewBox[2],
                g = d.trx2D.clone();
            g.rotate(-f.rotate * l);
            g.scale(a, a);
            g.matrix.x = 0;
            g.matrix.y = 0;
            c.matrix = g.matrix;
            return b.hitTest(c)
        }
        return function(e) {
            var c = k.doc,
                h = c.scene,
                b = f.Polygon;
            e = e || {};
            var a = e.object,
                g = e.fillMode,
                l = e.paint || {},
                q = e.point;
            e = e.rect;
            "string" === typeof l && (l = k.style.create(l));
            if (a)
                if (a.svg)
                    if (e ? (h = h.pointsIn("pointInObjectFromCanvas", [{
                            x: e.x1,
                            y: e.y1
                        }, {
                            x: e.x2,
                            y: e.y1
                        }, {
                            x: e.x2,
                            y: e.y2
                        }, {
                            x: e.x1,
                            y: e.y2
                        }], a), q = a.bbox.scale, 0 > q.x * q.y && h.reverse(), b = d(a, {
                            rect: b.clone(h)
                        })) : b = d(a, {
                            point: h.pointInObjectFromCanvas(q, a)
                        }), b.length) {
                        if ("group" === g) {
                            for (g = b.pop(); g && "g" !== g.type;) g = g.parentNode;
                            b = g.childNodes
                        } else "single" === g && (g = b.pop(), b = [g]);
                        g = k.style.toSVG(l);
                        "string" === typeof g ? l = g : (l = g.id, a.svg.addDef(g));
                        f.setObjectStyle({
                            object: a,
                            nodes: b,
                            dna: l,
                            recursive: !0,
                            useRecord: !0,
                            useRender: !0
                        }, c)
                    } else console.log("no nodes");
            else c.setStyle({
                fill: {
                    dna: l[l.type],
                    paintType: l.type
                },
                selection: h.selection.fromObjects([a]),
                useColorPicker: !0,
                useRecord: !0,
                useRender: !0
            })
        }
    }();
    f.setNodeListStyle = function(d) {
        d = d || {};
        var e = d.dna || "#000",
            c = d.nodes || [],
            f = d.recursive || !1;
        d = d.useRecord || !1;
        for (var b = [], a = c.length; a--;) {
            var k = c[a];
            "stroke" !== k.parentNode.id && (b = b.concat(g(k, "fillStyle", e, f, d)))
        }
        return b
    };
    f.setObjectStyle = function(d, e) {
        d = d || {};
        var c = d.dna || "#000",
            h = d.object || e.scene.getOneSelected(),
            b = d.useRecord || !1,
            c = {
                id: h.id,
                fillStyle: c,
                uida: f.setNodeListStyle(d)
            },
            a = c.uida.length;
        a && (h.dirtyCache = !0, h.dirtyCheck = !0, h.hasVectorFill = !0, h.svg.__colormap = void 0);
        b && (e.history && a && e.history.store({
            cmd: "VOBNodeList",
            name: "update-clipart-color",
            data: [c]
        }), e.render.dirty = !0, e.render.dirtyControls = !0)
    };
    f.revertSVG = function() {
        for (var d = k.doc, e = d.scene.children, c = [], f = 0; f < e.length; f++) {
            var b = e[f];
            b.hasVectorFill && (b.dirtyCache = !0, b.dirtyRender = !0, b.hasVectorFill = !1, b.svg.walk(function(a) {
                var d = a.orig_style.fillStyle;
                c.push({
                    id: b.id,
                    fillStyle: d,
                    uida: g(a, "fillStyle", d, !0, !0)
                })
            }, "orig_style"))
        }
        d.history &&
            c.length && d.history.store({
                cmd: "VOBNodeList",
                name: "reset-clipart-color",
                data: c
            })
    };
    var q = {
            "rgba(0,0,0,0)": !0,
            none: !0
        },
        l = Math.PI / 180;
    k.module && k.module.add(function(d, e) {
        e && e.history && e.history.register("VOBNodeList", function(c, f, b) {
            for (c = 0; c < f.length; c++) {
                var a = f[c],
                    g = e.scene.getById(a.id);
                if (g) {
                    var k = d.assets.getItem(g.src);
                    if (k) {
                        k.__colormap = void 0;
                        var l = {},
                            p;
                        for (p in a) "id" !== p && "uida" !== p && (l[p] = a[p]);
                        for (var a = a.uida, m = 0; m < a.length; m++) {
                            var v = a[m],
                                r = k.getLayerBy("uid", v.uid);
                            if (r)
                                if (b)
                                    for (p in v) "uid" !==
                                        p && (r.style[p] = v[p]);
                                else
                                    for (p in l) r.style[p] = l[p]
                        }
                        g.dirtyCache = !0;
                        g.dirtyRender = !0
                    }
                }
            }
        })
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.vector = k.vector || {};
    k.vector.SVGFont = function(d) {
        var e = k.util,
            c = k.vector;
        c.fonts = c.fonts || {};
        var h = {
                direction: "ltr",
                font: "",
                fontFamily: "sans-serif",
                fontSize: "40px",
                fontStyle: "normal",
                fontWeight: "normal",
                fontVariant: "normal",
                textAlign: "start",
                textBaseline: "alphabetic",
                textDecoration: "none",
                textTransform: "none",
                lineHeight: "1em",
                letterSpacing: 0,
                whiteSpace: "normal",
                ctx: d,
                scaleFactor: 1,
                pkg: {},
                pkgs: {},
                load: function(a, d) {
                    var f = function(a) {
                        var f, h;
                        if (l) h = require("domino").createWindow(a).document;
                        else {
                            var k = document.createElement("div");
                            "string" === typeof a ? k.innerHTML = a : k.appendChild(a);
                            h = k
                        }
                        var r = null,
                            q = h.getElementsByTagName("font")[0],
                            t = h.getElementsByTagName("font-face")[0];
                        a = t.getAttribute("font-family") || a.id;
                        var k = (r = t.getElementsByTagName("font-face-name")[0]) ? r.getAttribute("name") : a,
                            u = t.getAttribute("font-style") || "all",
                            z = t.getAttribute("font-variant") || "normal",
                            C = t.getAttribute("font-weight") || "all",
                            A = t.getAttribute("font-stretch") || "normal",
                            I = t.getAttribute("unicode-range") || "U+0-10FFFF",
                            B = t.getAttribute("panose-1") || "0 0 0 0 0 0 0 0 0 0",
                            D = t.getAttribute("cap-height") || 0,
                            F = t.getAttribute("x-height") || 0,
                            G = parseFloat(t.getAttribute("units-per-em") || 1E3, 10),
                            r = h.getElementsByTagName("missing-glyph")[0],
                            H = {
                                x: parseFloat(q.getAttribute("horiz-adv-x"), 10),
                                y: parseFloat(q.getAttribute("vert-adv-y") || 0, 10) || G
                            };
                        parseFloat(r ? r.getAttribute("horiz-adv-x") : H.x, 10);
                        var q = {
                                horiz: {
                                    x: parseFloat(q.getAttribute("horiz-origin-x") || 0, 10),
                                    y: parseFloat(q.getAttribute("horiz-origin-y") || 0, 10)
                                },
                                vert: {
                                    x: parseFloat(q.getAttribute("vert-origin-x") ||
                                        0, 10),
                                    y: parseFloat(q.getAttribute("vert-origin-y") || 0, 10)
                                }
                            },
                            J = parseFloat(t.getAttribute("ascent") || G - q.vert.y, 10),
                            O = parseFloat(t.getAttribute("descent") || q.vert.y, 10),
                            K = {},
                            r = e.arrayToObject(["alphabetic", "ideographic", "mathematical", "hanging"]);
                        for (f in r)
                            if (r = t.getAttribute(f)) K[f] = parseFloat(r, 10);
                        t = {};
                        h = h.getElementsByTagName("glyph");
                        var L;
                        for (f in h)
                            if ((r = h[f]).getAttribute) {
                                var M = r.getAttribute("unicode");
                                if (M) {
                                    if (M.match(g)) {
                                        L = M;
                                        if (L.match(g)) {
                                            for (var Q = {
                                                        amp: "&",
                                                        apos: "'",
                                                        quot: '"',
                                                        lt: "<",
                                                        gt: ">"
                                                    },
                                                    R = void 0, U = ""; null !== (R = g.exec(L));) U = "x" === R[1].charAt(1) ? U + String.fromCharCode(R[1].slice(2), 16) : isNaN(parseInt(R[1].slice(1), 10)) ? U + Q(R[1]) : U + String.fromCharCode(R[1].slice(1));
                                            L = U
                                        }
                                        L = L.charCodeAt()
                                    } else L = M.charCodeAt();
                                    var Q = parseFloat(r.getAttribute("horiz-adv-x") || H.x, 10),
                                        R = r.getAttribute("d"),
                                        U = c.SVGPath.toVOBPath(R) || [],
                                        V = new c.BBox(U);
                                    t[L] = {
                                        unicode: M,
                                        name: r.getAttribute("glyph-name"),
                                        xadv: Q,
                                        width: V.x2 - V.x1,
                                        height: V.y2 - V.y1,
                                        path: R,
                                        data: U
                                    }
                                }
                            }
                        f = {
                            family: a,
                            name: k,
                            style: u,
                            variant: z,
                            weight: C,
                            stretch: A,
                            range: I,
                            panose: B.split(" ").map(parseFloat),
                            capHeight: D,
                            unitsPerEm: G,
                            origin: q,
                            advance: H,
                            ascent: J,
                            descent: O,
                            xheight: F,
                            baseline: K,
                            glyphs: t
                        };
                        f = b(f);
                        d && d(f)
                    };
                    "string" === typeof a && -1 === a.indexOf("<font") && -1 === a.indexOf("<?xml") ? e.request({
                        url: a,
                        format: "text",
                        onprogress: function(a, b) {},
                        onsuccess: function(a, b) {
                            f(b)
                        },
                        onerror: function(a) {}
                    }) : f(a)
                }
            },
            b = function(a) {
                if ("string" === typeof a) {
                    var b = a;
                    a = c.fonts[b]
                } else b = a.family || "unknown", c.fonts[b] = a;
                h.pkg.family !== b && (a ? h.pkg = h.pkgs[b] = a : b in h.pkgs && (h.pkg =
                    h.pkgs[b]));
                return a
            };
        h.measureText = function(a) {
            if (a) {
                a = "" + a;
                for (var b = h.pkg.glyphs, c = a.length, d = 0, e = h.pkg.advance.y, f = 0, g = 0; g < c; g++) {
                    var k = b[a.charCodeAt(g)];
                    k && (d += k.xadv, f += k.width)
                }
                return {
                    width: d * h.scaleFactor,
                    height: e * h.scaleFactor,
                    actualWidth: f * h.scaleFactor,
                    actualHeight: 0 * h.scaleFactor
                }
            }
        };
        h.strokeText = function(a, b, c, d) {
            if (a && isFinite(b + c)) return a = this.drawText(a, b, c, d), b = h.ctx, b.stroke(), b.beginPath(), a
        };
        h.fillText = function(a, b, c, d) {
            if (a && isFinite(b + c)) return a = this.drawText(a, b, c, d), b = h.ctx,
                b.fill(), b.beginPath(), a
        };
        h.getTextBaseline = function(a) {
            switch (a || this.textBaseline) {
                case "alphabetic":
                    return 0;
                case "top":
                    return h.pkg.ascent * h.scaleFactor;
                case "hanging":
                    return 8 * h.pkg.ascent / 10 * h.scaleFactor;
                case "middle":
                case "absmiddle":
                    return ((h.pkg.ascent - h.pkg.descent) / 2 + h.pkg.descent) * h.scaleFactor;
                case "ideographic":
                    return h.pkg.descent * h.scaleFactor;
                case "bottom":
                    return h.pkg.descent * h.scaleFactor;
                default:
                    return 0
            }
        };
        h.getTextAlign = function(a, b) {
            switch (a) {
                case "left":
                    return 0;
                case "start":
                    return "ltr" ===
                        h.direction ? 0 : h.measureText(b).width;
                case "end":
                    return "ltr" === h.direction ? h.measureText(b).width : 0;
                case "right":
                    return h.measureText(b).width;
                case "center":
                    return h.measureText(b).width / 2
            }
        };
        h.getScaleFactor = function() {
            var a = h.fontSize;
            if ("number" === typeof a) var b = "px";
            else b = a.toLowerCase(), a = parseFloat(b), b = b.replace(a, "");
            isFinite(a) || (a = 1);
            if (e.getScreenMetrics) {
                var c = e.toMetrics || (e.toMetrics = e.getScreenMetrics());
                2 < b.length ? a = c[b + "_px"] : "px" !== b && (a *= c[b + "_px"])
            }
            h.scaleFactor = a / h.pkg.unitsPerEm;
            return h.scaleFactor
        };
        h.drawText = function(a, b, d, e) {
            if (a.length) {
                for (var g = 0; g < f.length; g++) a = a.split(f[g]).join(" ");
                h.getScaleFactor();
                var m, g = d || 0;
                m = (b || 0) - this.getTextAlign(this.textAlign, a);
                var g = g + this.getTextBaseline(this.textBaseline),
                    k, l, q, t, E;
                "object" === typeof e && (k = e, l = k.minWidth, e = k.maxWidth, q = k.maxHeight, E = k.targetWidth, t = k.targetHeight, k = k.getData);
                b = h.ctx;
                b.save();
                b.beginPath();
                d = this.measureText(a);
                var z = d.width,
                    C = d.height;
                d = k ? new c.Transform : b;
                isFinite(E) ? (d.scale(E / z, 1), m = m * z / E) :
                    (isFinite(e) && z > e && (d.scale(e / z, 1), m = m * z / e), isFinite(l) && z < l && (d.scale(l / z, 1), m = m * z / l));
                isFinite(t) ? (d.scale(1, t / C), g = g * C / t) : isFinite(q) && C > q && (d.scale(1, q / C), g = g * C / q);
                (m || g) && d.translate(m || 0, g || 0);
                d.scale(h.scaleFactor, -h.scaleFactor);
                e = h.pkg.glyphs;
                q = [];
                "number" === typeof a && (a = String(a));
                t = 0;
                for (E = a.length; t < E; t++) l = e[g = a.charCodeAt(t)], 10 !== g && 13 !== g && (l || (l = e["?".charCodeAt()]), l && (l.data || (l.data = c.SVGPath.toVOBPath(l.path) || []), l.data && (g = l.data, k && l.path ? q.push({
                    d: l.path,
                    data: d.flatten(l.data, !0)
                }) : (b.beginPath(), c.Shape.VOBPath(b, g), b.fill()), d.translate(l.xadv, 0))));
                b.restore();
                if (k) return {
                    childNodes: q
                }
            }
        };
        h.toSVG = function(a, b) {
            new c.SVG({
                ctx: h.ctx,
                src: a,
                onsuccess: function(a) {
                    a = a.typeface.pkg.glyphs;
                    var d = {},
                        e;
                    for (e in a) {
                        var f = a[e];
                        if (f.path) {
                            var h = c.SVGPath.toVOBPath(f.path),
                                g = new c.BBox(h),
                                h = (new c.Transform).translate(0, g.y2).scale(1, -1).flatten(h, !0),
                                h = c.SVGPath.fromVOBPath(h),
                                k = g.x2 - g.x1,
                                l = g.y2 - g.y1,
                                g = g.x1;
                            d[f.unicode.charCodeAt() + ".svg"] = '<?xml version="1.0" encoding="UTF-8"?>\t<svg version="1.1" width="' +
                                k + '" height="' + l + '" viewBox="' + g + " 0 " + k + " " + l + '" xmlns="http://www.w3.org/2000/svg">\t<path d="' + h + '"/>\t</svg>'
                        }
                    }
                    b(d)
                }
            })
        };
        h.setFont = function(a) {
            if (h.font !== a) {
                for (var c = a.trim().split(" "), d = c.length, e = 0, f = 0, g = Math.min(3, d); e < g;) {
                    var k = c[e];
                    if (0 === (f & 1) && -1 !== " normal italic oblique ".indexOf(" " + k + " ")) h.fontStyle = c[e++], f |= 1;
                    else if (0 === (f & 2) && -1 !== " normal small-caps ".indexOf(" " + k + " ")) h.fontVariant = c[e++], f |= 2;
                    else if (0 === (f & 4) && (-1 !== " normal bold bolder lighter ".indexOf(" " + k + " ") || 3 ===
                            k.length && "1" <= k.charAt(0) && "9" >= k.charAt(0) && "0" === k.charAt(1) && "0" === k.charAt(2))) h.fontWeight = q[c[e++]], f |= 4;
                    else break
                }
                e < d && (f = c[e], g = f.indexOf("/"), -1 === g ? e++ : (f = f.substring(0, g), c[e] = c[e].substring(g)), h.fontSize = f);
                e < d && "/" === c[e].substr(0, 1) && ("/" !== c[e] ? h.lineHeight = c[e++].substring(1) : ++e < d && (h.lineHeight = c[e++]));
                if (e < d) {
                    for (f = c[e++]; e < d;) f += " " + c[e++];
                    h.fontFamily = f;
                    b(f)
                }
                h.font = a
            }
        };
        c.font && (b(c.font), h.fontFamily = c.font.name);
        return h
    };
    var g = /&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,
        f = ["\t",
            "\n", "\x0B", "\f", "\r"
        ],
        q = {
            normal: 400,
            bold: 700,
            lighter: 300,
            bolder: 500
        },
        l = "object" === typeof module && module.exports;
    l && (module.exports.vector = module.exports.vector || {}, module.exports.vector.SVGFont = k.vector.SVGFont)
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g = k.vector = k.vector || {},
        f = g.SVGPath = {};
    f.fromVOBPath = function(f, d) {
        isFinite(d) && g.roundPath && (f = g.roundPath(f, d));
        for (var e = "", c = 0, h, b; c < f.length; c++)
            if (h = f[c]) {
                switch (h.cmd) {
                    case "M":
                        "M" !== b && (e += "M");
                        e += h.x + " " + h.y + " ";
                        break;
                    case "L":
                        "L" !== b && (e += "L");
                        e += h.x + " " + h.y + " ";
                        break;
                    case "C":
                        "C" !== b && (e += "C");
                        e += h.x1 + " " + h.y1 + " " + h.x2 + " " + h.y2 + " " + h.x + " " + h.y + " ";
                        break;
                    case "Q":
                        "Q" !== b && (e += "Q");
                        e += h.x1 + " " + h.y1 + " " + h.x + " " + h.y + " ";
                        break;
                    case "Z":
                    case "z":
                        e += "z"
                }
                b = h.cmd
            }
            "z" !== b && (e += "z ");
        return e.slice(0, -1)
    };
    f.fromARRPath = function(f) {
        for (var d = "", e = {}, c = 0, h = f.length; c < h; c++)
            if (e = f[c]) switch (e[0]) {
                case "M":
                    d += "M" + e[1] + " " + e[2] + " ";
                    break;
                case "L":
                    d += "L" + e[1] + " " + e[2] + " ";
                    break;
                case "C":
                    d += "C" + e[1] + " " + e[2] + ", " + e[3] + " " + e[4] + ", " + e[5] + " " + e[6] + " ";
                    break;
                case "Q":
                    d += "Q" + e[1] + " " + e[2] + ", " + e[3] + " " + e[4] + " ";
                    break;
                case "Z":
                case "z":
                    d += "z"
            }
            "z" !== pcmd && (d += "z ");
        return d.slice(0, -1)
    };
    f.fromVOBPolygon = function(f) {
        for (var d = "", e = {}, c = 0, h = f.length; c < h; c++) switch ((e = f[c]).cmd) {
            case "Z":
            case "z":
                break;
            default:
                d += e.x + "," + e.y + " "
        }
        return d.slice(0, -1)
    };
    f.toVOBPolygon = function(f) {
        if (f) {
            f = f.match(/[0-9]*/gi);
            for (var d = [], e = 0, c = f.length; e < c; e++) f[e] && d.push(parseFloat(f[e]));
            f = [];
            e = 0;
            for (c = d.length; e < c; e += 2) f.push({
                cmd: 0 === e ? "M" : "L",
                x: d[e],
                y: d[e + 1]
            });
            f.push({
                cmd: "Z"
            });
            return f
        }
    };
    f.toVOBPath = function(g) {
        if (g) {
            g = g.replace(/([^e])([+-])/gi, "$1 $2");
            g = g.match(/([mlhvcsqtaz])|(([\-0-9]*\.?[0-9]*)|(\.[0-9]+))(e[+-]?[0-9]+)?/gi);
            for (var d = [], e = 0, c = g.length; e < c; e++) g[e] && d.push(g[e]);
            g = d;
            for (var d = "", h = e = 0,
                    b = 0, a = 0, k = 0, u, x, p = "", m = 0, v = []; d = g[e];) {
                var r = q[d.toLowerCase()] + 1;
                if (r) {
                    for (var y = 1, c = r, t = []; y < c; y++) t.push(parseFloat(g[e + y]));
                    m = r;
                    e += r
                } else {
                    y = 0;
                    c = m - 1;
                    for (t = []; y < c; y++) t.push(parseFloat(g[e + y]));
                    d = "m" === p ? "l" : "M" === p ? "L" : p;
                    e += m - 1
                }
                if (d) {
                    switch (d) {
                        case "M":
                            h = t[0];
                            b = t[1];
                            a = h;
                            k = b;
                            u = x = null;
                            v.push({
                                cmd: "M",
                                x: h,
                                y: b
                            });
                            break;
                        case "m":
                            h += t[0];
                            b += t[1];
                            a = h;
                            k = b;
                            u = x = null;
                            v.push({
                                cmd: "M",
                                x: h,
                                y: b
                            });
                            break;
                        case "L":
                            h = t[0];
                            b = t[1];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "l":
                            h += t[0];
                            b += t[1];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "H":
                            h = t[0];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "h":
                            h += t[0];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "V":
                            b = t[0];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "v":
                            b += t[0];
                            u = x = null;
                            v.push({
                                cmd: "L",
                                x: h,
                                y: b
                            });
                            break;
                        case "C":
                            h = t[4];
                            b = t[5];
                            u = t[2];
                            x = t[3];
                            v.push({
                                cmd: "C",
                                x1: t[0],
                                y1: t[1],
                                x2: t[2],
                                y2: t[3],
                                x: t[4],
                                y: t[5]
                            });
                            break;
                        case "c":
                            0 === t[4] && 0 === t[5] && (t[4] += 1E-4, t[5] += 1E-4);
                            v.push({
                                cmd: "C",
                                x1: t[0] + h,
                                y1: t[1] + b,
                                x2: t[2] + h,
                                y2: t[3] + b,
                                x: t[4] + h,
                                y: t[5] + b
                            });
                            u = h + t[2];
                            x = b + t[3];
                            h +=
                                t[4];
                            b += t[5];
                            break;
                        case "S":
                            null !== u && p.match(/[sc]/i) || (u = h, x = b);
                            v.push({
                                cmd: "C",
                                x1: h - (u - h),
                                y1: b - (x - b),
                                x2: t[0],
                                y2: t[1],
                                x: t[2],
                                y: t[3]
                            });
                            u = t[0];
                            x = t[1];
                            h = t[2];
                            b = t[3];
                            break;
                        case "s":
                            0 === t[2] && 0 === t[3] && (t[2] += 1E-4, t[3] += 1E-4);
                            null !== u && p.match(/[sc]/i) || (u = h, x = b);
                            v.push({
                                cmd: "C",
                                x1: h - (u - h),
                                y1: b - (x - b),
                                x2: h + t[0],
                                y2: b + t[1],
                                x: h + t[2],
                                y: b + t[3]
                            });
                            u = h + t[0];
                            x = b + t[1];
                            h += t[2];
                            b += t[3];
                            break;
                        case "Q":
                            u = t[0];
                            x = t[1];
                            h = t[2];
                            b = t[3];
                            v.push({
                                cmd: "Q",
                                x1: t[0],
                                y1: t[1],
                                x: t[2],
                                y: t[3]
                            });
                            break;
                        case "q":
                            0 === t[2] && 0 === t[3] && (t[2] +=
                                1E-4, t[3] += 1E-4);
                            v.push({
                                cmd: "Q",
                                x1: t[0] + h,
                                y1: t[1] + b,
                                x: t[2] + h,
                                y: t[3] + b
                            });
                            u = h + t[0];
                            x = b + t[1];
                            h += t[2];
                            b += t[3];
                            break;
                        case "T":
                            null !== u && p.match(/[qt]/i) ? (u = h - (u - h), x = b - (x - b)) : (u = h, x = b);
                            v.push({
                                cmd: "Q",
                                x1: u,
                                y1: x,
                                x: t[0],
                                y: t[1]
                            });
                            h = t[0];
                            b = t[1];
                            break;
                        case "t":
                            0 === t[0] && 0 === t[1] && (t[0] += 1E-4, t[1] += 1E-4);
                            null !== u && p.match(/[qt]/i) ? (u = h - (u - h), x = b - (x - b)) : (u = h, x = b);
                            v.push({
                                cmd: "Q",
                                x1: u,
                                y1: x,
                                x: h + t[0],
                                y: b + t[1]
                            });
                            h += t[0];
                            b += t[1];
                            break;
                        case "A":
                            c = f.arcToBezier(h, b, t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
                            for (h = 0; h < c.length; h++) v.push(c[h]);
                            h = t[5];
                            b = t[6];
                            break;
                        case "a":
                            t[5] += h;
                            t[6] += b;
                            c = f.arcToBezier(h, b, t[0], t[1], t[2], t[3], t[4], t[5], t[6]);
                            for (h = 0; h < c.length; h++) v.push(c[h]);
                            h = t[5];
                            b = t[6];
                            break;
                        case "Z":
                            v.push({
                                cmd: "Z",
                                x: a,
                                y: k
                            });
                            k = a = 0;
                            break;
                        case "z":
                            v.push({
                                cmd: "Z",
                                x: a,
                                y: k
                            }), h = a, b = k
                    }
                    p = d
                }
            }
            return v
        }
    };
    f.arcToBezier = function(f, d, e, c, h, b, a, g, k) {
        var q = h * Math.PI / 180;
        h = Math.sin(q);
        var q = Math.cos(q),
            p = [];
        e = Math.abs(e);
        c = Math.abs(c);
        var m = q * (f - g) * .5 + h * (d - k) * .5,
            v = q * (d - k) * .5 - h * (f - g) * .5,
            m = m * m / (e * e) + v * v / (c * c);
        1 < m && (m = Math.sqrt(m), e *= m, c *= m);
        var m =
            q / e,
            v = h / e,
            r = -h / c,
            y = q / c,
            t = m * f + v * d;
        d = r * f + y * d;
        f = m * g + v * k;
        g = r * g + y * k;
        m = 1 / ((f - t) * (f - t) + (g - d) * (g - d)) - .25;
        0 > m && (m = 0);
        m = Math.sqrt(m);
        a === b && (m = -m);
        b = .5 * (t + f) - m * (g - d);
        k = .5 * (d + g) + m * (f - t);
        t = Math.atan2(d - k, t - b);
        d = Math.atan2(g - k, f - b) - t;
        0 > d && 1 === a ? d += 2 * Math.PI : 0 < d && 0 === a && (d -= 2 * Math.PI);
        a = Math.ceil(Math.abs(d / (.5 * Math.PI + .001)));
        for (var E = 0; E < a; E++) {
            g = t + E * d / a;
            var z = t + (E + 1) * d / a,
                m = q * e,
                v = -h * c,
                r = h * e,
                y = q * c;
            f = .5 * (z - g);
            var C = 8 / 3 * Math.sin(.5 * f) * Math.sin(.5 * f) / Math.sin(f);
            f = b + Math.cos(g) - C * Math.sin(g);
            g = k + Math.sin(g) + C * Math.cos(g);
            var A = b + Math.cos(z),
                I = k + Math.sin(z),
                B = A + C * Math.sin(z),
                z = I - C * Math.cos(z);
            p[E] = {
                cmd: "C",
                x1: m * f + v * g,
                y1: r * f + y * g,
                x2: m * B + v * z,
                y2: r * B + y * z,
                x: m * A + v * I,
                y: r * A + y * I
            }
        }
        return p
    };
    var q = {
        m: 2,
        l: 2,
        h: 1,
        v: 1,
        c: 6,
        s: 4,
        q: 4,
        t: 2,
        a: 7,
        z: 0
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(c, d, b) {
        function a(a, b) {
            e.fillStyle = b;
            e.beginPath();
            Array.isArray(a) ? Array.isArray(a[0]) ? a.forEach(function(a) {
                l.Shape.VOBPath(e, a)
            }) : l.Shape.VOBPath(e, a) : l.Shape.circle(e, a.x, a.y, 5);
            e.fill()
        }
        var e = k.doc ? k.doc.contexts.draw.ctx : b.ctx;
        e && (e.save(), a(c, "red"), a(d, "green"), e.restore())
    }

    function f(c) {
        var d = new l.Path;
        d.getData = !0;
        d.dashAdaptive = 1;
        l.Shape.VOBNode(d, c);
        c = (new l.Transform(c.matrix)).flatten(d.data);
        for (var d = [], b, a = 0; a < c.length; a++) {
            var e = c[a];
            "M" === e.cmd ? d.push(b = [e]) : b.push(e)
        }
        return d
    }

    function q(c) {
        var d = c.calcStroke,
            b = c.ctx,
            a = c.trx || new l.Transform(c.matrix),
            e = c.viewBox,
            f = c.viewBoxStroke,
            d = d ? f : e;
        switch (c.placement) {
            case "crop":
                a.translate(-d[0], -d[1]);
                var e = a.matrix,
                    g = d[2] - d[0],
                    k = d[3] - d[1],
                    f = c.width,
                    m = c.height,
                    v = c.pixelRatio || 1;
                f && m && ("auto" === f && (f = m / k * g), "auto" === m && (m = f / g * k), f *= v, m *= v, v = Math.min(f / g, m / k), e.a *= v, e.d *= v, e.x += d[0] * (1 - v), e.y += d[1] * (1 - v), c.center && (c = (k - g) * v / 2, 0 < c ? e.x += c : e.y -= c), g = f, k = m);
                if (b) {
                    if (c = b.canvas) c.width = g >> 0, c.height = k >> 0;
                    a.apply(b, !0)
                }
                this.vob && (this.vob._matrix = e);
                break;
            case "bbox":
                e = a.matrix;
                c = d[2] * e.a;
                f = c - d[0] * e.a;
                a.scale(c / f);
                a.translate(-d[0], -d[1]);
                b && a.apply(b, !0);
                this.vob && (this.vob._matrix = a.matrix);
                break;
            case "none":
                b && (b.canvas.width = this.ctx.canvas.width, b.canvas.height = this.ctx.canvas.height)
        }
    }
    var l = k.vector || (k.vector = {}),
        d = l.SVG.prototype;
    d.render = function(c) {
        c = c || {};
        var d = c.ctx || (c.ctx = this.ctx),
            b = c.childNodes || (c.childNodes = [this.vob]);
        c.placement || (c.placement = this.placement);
        c.viewBox || (c.viewBox = this.viewBox);
        c.viewBoxStroke || (c.viewBoxStroke = this.viewBoxStroke);
        c.defaultFill && (this.defaultFill = c.defaultFill);
        d && (d.save(), q.call(this, c), this.renderChildNodes(d, c, b), d.restore());
        this.perf && this.perf("SVG.render", !0)
    };
    d.hitTest = function(c) {
        var d = c.trx || (c.trx = new l.Transform),
            b = c.childNodes || (c.childNodes = [this.vob]);
        c.placement || (c.placement = this.placement);
        c.viewBox || (c.viewBox = this.viewBox);
        c.viewBoxStroke || (c.viewBoxStroke = this.viewBoxStroke);
        this._hitAreas = [];
        this._transform = new l.Transform;
        this._transforms = [];
        d.save();
        q.call(this, c);
        this.hitTestChildNodes(d, c, b);
        d.restore();
        return this._hitAreas
    };
    d.hitTestChildNodes = function(c, d, b) {
        if (b && b.length)
            for (var a = l.Point, e = l.Polygon, k = d.debug, q = b.length, p = 0; p < q; p++) {
                var m = b[p];
                this.currentNode = m;
                c.save();
                if (m.matrix) {
                    var v = m.matrix;
                    c.transform(v.a, v.b, v.c, v.d, v.x, v.y)
                }
                if (m.bbox) {
                    var r = c.clone().invert(),
                        v = l.BBox.toRect(m.bbox);
                    if (d.point) r = r.point2d(d.point.x, d.point.y), a.inPolygon(v, r.x, r.y) && (v = m._vertices || (m._vertices = f(m)), k && g(r, v, d), a.inPolygonChain(v,
                        r.x, r.y) && this._hitAreas.push(m));
                    else if (d.rect && (r = r.flatten(d.rect, !0), k && g(r, v, d), e.SAT(r, v))) {
                        v = m._vertices || (m._vertices = f(m));
                        k && g(r, v, d);
                        a: {
                            for (var y = l.Polygon, t = 0, E = v.length; t < E; t++)
                                if (y.collision(r, v[t])) {
                                    v = !0;
                                    break a
                                }
                            v = void 0
                        }
                        v && this._hitAreas.push(m)
                    }
                }
                c.restore();
                m.childNodes && m.childNodes.length && this.hitTestChildNodes(c, d, m.childNodes)
            }
    };
    d.renderChildNodes = function(c, d, b, a) {
        if (b && b.length && b[0]) {
            var f = l.Shape;
            this.typeface && (this.typeface.ctx = c);
            for (var g = b.length, k = 0; k < g; k++) {
                var p =
                    b[k],
                    m = p.bbox;
                this.currentNode = p;
                c.save();
                c.beginPath();
                if (p.matrix) {
                    var v = p.matrix;
                    c.transform(v.a, v.b, v.c, v.d, v.x, v.y)
                }
                p.clipPath && p.clipPath.length && (this.renderChildNodes(c, d, p.clipPath, !0), c.clip(), c.beginPath());
                f.VOBNode(c, p);
                if ((v = p.style) && !a) {
                    c.save();
                    void 0 !== v.opacity && (c.globalAlpha = v.opacity);
                    v.fillStyle && (c.save(), this.setStyle(c, this.defs[v.fillStyle] || this.defs[this.defaultFill] || v, "fillStyle", this.defaultFill), c.globalAlpha *= v.fillOpacity, p.content ? (c.font = this.fontStyleToString(c,
                        v), "SVG" === v.fontRenderer ? (this.typeface.setFont(c.font), this.typeface.fillText(p.content, p.x, p.y)) : c.fillText(p.content, p.x, p.y)) : c.fill(), c.restore());
                    if (v.strokeStyle && "none" !== v.strokeStyle) {
                        c.save();
                        c.lineWidth = 0 === v.strokeWidth ? e : v.strokeWidth || 1;
                        c.lineCap = v.strokeLinecap || "butt";
                        c.lineJoin = v.strokeLinejoin || "miter";
                        c.miterLimit = v.strokeMiterlimit || c.lineWidth;
                        var r = v.strokeDasharray;
                        c.setLineDash && "none" !== r && c.setLineDash(r);
                        r = v.strokeDashoffset;
                        0 < r && (c.lineDashOffset = r);
                        this.setStyle(c, this.defs[v.strokeStyle] ||
                            this.defs[this.defaultStroke] || v, "strokeStyle", this.defaultStroke);
                        c.globalAlpha *= v.strokeOpacity;
                        p.content ? (c.font = this.fontStyleToString(c, v), "SVG" === v.fontRenderer ? (this.typeface.setFont(c.font), this.typeface.strokeText(p.content, p.x, p.y)) : c.strokeText(p.content, p.x, p.y)) : c.stroke();
                        c.restore()
                    }
                    c.restore()
                }!a && m && this.debugBBox && (v = this.vob._matrix, c.save(), c.setTransform(v.a, v.b, v.c, v.d, v.x, v.y), c.strokeStyle = "red", c.lineWidth = .25, c.strokeRect(m.x1, m.y1, m.x2 - m.x1, m.y2 - m.y1), c.restore());
                c.restore();
                p.childNodes && p.childNodes.length && this.renderChildNodes(c, d, p.childNodes, a)
            }
        }
    };
    d.setStyle = function(c, d, b, a) {
        void 0 !== d.strokeWidth && (c.lineWidth = d.strokeWidth || e);
        void 0 !== d.strokeLinecap && (c.lineCap = d.strokeLinecap);
        void 0 !== d.strokeLinejoin && (c.lineJoin = d.strokeLinejoin);
        void 0 !== d.strokeMiterlimit && (c.miterLimit = d.strokeMiterlimit);
        var f;
        if (d.gradientTransform) {
            var g = d.gradientTransform;
            this.currentNode && this.currentNode.matrix && (f = new l.Transform, f.transform(g.a, g.b, g.c, g.d, g.x, g.y), f = f.matrix)
        }
        switch (d.type) {
            case "linearGradient":
                void 0 ===
                    d.x1 && (d.x1 = 0);
                void 0 === d.y1 && (d.y1 = 0);
                void 0 === d.x2 && (d.x2 = 0);
                void 0 === d.y2 && (d.y2 = 0);
                if (c) {
                    f && c.transform(f.a, f.b, f.c, f.d, f.x, f.y);
                    if ("objectBoundingBox" === d.gradientUnits) {
                        0 === d.x1 + d.y1 + d.x2 + d.y2 && (d.x2 = 1);
                        var k = this.currentNode;
                        if (!k.bbox) break;
                        a = k.bbox;
                        var p = a.x1 + (a.x2 - a.x1) * d.x1,
                            m = a.y1 + (a.y2 - a.y1) * d.y1,
                            v = a.x1 + (a.x2 - a.x1) * d.x2,
                            r = a.y1 + (a.y2 - a.y1) * d.y2;
                        f = c.createLinearGradient(p, m, v, r);
                        f = (new l.Transform(k.matrix)).invert();
                        p = f.point2d(p, m);
                        f = f.point2d(v, r);
                        f = c.createLinearGradient(p.x, p.y, f.x,
                            f.y)
                    } else f = c.createLinearGradient(d.x1, d.y1, d.x2, d.y2);
                    a = 0;
                    for (g = d.stops.length; a < g; a++) {
                        var q = d.stops[a];
                        f.addColorStop(q.offset, q.color)
                    }
                    c[b] = f
                }
                break;
            case "radialGradient":
                void 0 === d.cx && (d.cx = .5);
                void 0 === d.cy && (d.cy = .5);
                void 0 === d.fx && (d.fx = .5);
                void 0 === d.fy && (d.fy = .5);
                void 0 === d.r && (d.r = .5);
                if (c) {
                    f && c.transform(f.a, f.b, f.c, f.d, f.x, f.y);
                    if ("objectBoundingBox" === d.gradientUnits) {
                        k = this.currentNode;
                        a = k.bbox;
                        if (!k.bbox) break;
                        var g = a.x2 - a.x1,
                            q = a.y2 - a.y1,
                            p = a.x1 + g * d.cx,
                            m = a.y1 + q * d.cy,
                            v = a.x1 + g * d.fx,
                            r = a.y1 + q * d.cy,
                            t = Math.max(g, q) * d.r * 1.6;
                        f = (new l.Transform(k.matrix)).invert();
                        p = f.point2d(p, m);
                        f = f.point2d(v, r);
                        f = c.createRadialGradient(p.x, p.y, 0, f.x, f.y, t);
                        q < g && (g = q / g, c.translate(0, a.y2), c.scale(1, g))
                    } else f = c.createRadialGradient(d.cx, d.cy, 0, d.fx, d.fy, d.r);
                    a = 0;
                    for (g = d.stops.length; a < g; a++) q = d.stops[a], f.addColorStop(q.offset, q.color);
                    c[b] = f
                }
                break;
            case "pattern":
                c.translate(d.x || 0, d.y || 0);
                c[b] = d.pattern || "transparent";
                break;
            default:
                c[b] = "default" === d[b] ? a || this.defaultFill : d[b]
        }
    };
    var e = 1E-10
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(f, g) {
        console.log("callback", f, g)
    }
    k.module = k.module || {};
    k.module.SVG = function(f) {
        function k(c) {
            c = e.toSVG(c);
            if ("string" === typeof c) return c;
            svg.addDef(c);
            return c.id
        }
        var l = this,
            d = f.lang,
            e = f.style,
            c = f.vector;
        l.save = function(d) {
            var b = f.doc,
                a = b.canvas2d,
                e = b.scene,
                l = b.toolkit;
            d = d || {};
            for (var x = !!d.flattenMatrix, p = d.objects || e.children, m = d.onsuccess || g, v = [], r = new c.SVG, p = e.copyDeep(p), y = 0; y < p.length; y++) {
                var t = p[y],
                    E = t.bbox;
                t.style = t.style || {};
                var z = {
                    a: E.scale.x,
                    b: 0,
                    c: 0,
                    d: E.scale.y,
                    x: E.x + a.x,
                    y: E.y + a.y
                };
                "pencil" === t.type && (t.type = "polyline", t.stroke = t.fill, t.stroke.lineWidth = t.diameter);
                var C = {
                        id: t.id,
                        type: t.type,
                        parentNode: r.vob
                    },
                    A = C.type,
                    I = f.detect.brush[A],
                    B = f.detect.shape[A];
                if (I || B) {
                    var D = t.data;
                    x && (z = new c.Transform(z), D = z.flatten(D, !0), z = z.reset().matrix);
                    I && (A = "brush", C.type !== t.type && (C.brush = C.type));
                    B && (C.shape = C.type, A = "shape");
                    switch (A) {
                        case "shape":
                            A = new c.Shape.record;
                            I = Math.max(E.width, E.height) / 2;
                            (0, f.module.toolkit["shape." + C.type])(A, E.x, E.y, I, t);
                            C.d = A.stringify();
                            C.type = "path";
                            break;
                        case "stamp":
                        case "path":
                            C.d = c.SVGPath.fromVOBPath(D);
                            break;
                        case "brush":
                        case "polygon":
                        case "polyline":
                            C.points = c.SVGPath.fromVOBPolygon(D);
                            break;
                        default:
                            console.warn(A)
                    }
                    t.src && (C.src = t.src)
                } else if ("text" === A) C.content = t.content, e.copyAttributes(l.text._attributes, t, C), z.y += E.height;
                else if ("clipart" === A)
                    if (A = f.assets.getItem(t.src)) B = t.svg.viewBox, I = B[2] - B[0], B = B[3] - B[1], C.type = "image", C["xlink:href"] = A.toDataURL(), z.a *= E.width / I, z.d *= E.height / B, C.width = E.width, C.height = E.height;
                    else continue;
                else "image" === A ? (C["xlink:href"] = t.src, C.width = E.width, C.height = E.height) : console.warn(A, t);
                C.bbox = {
                    x1: E.x,
                    y1: E.y,
                    x2: E.x + E.width,
                    y2: E.y + E.height
                };
                C.matrix = z;
                C.transform = z;
                E = C;
                A = t;
                z = {};
                z.opacity = A.opacity / 100;
                I = z;
                if (B = A.stroke) I.strokeLinecap = B.lineCap, I.strokeLinejoin = B.lineJoin, I.strokeMiterlimit = B.miterLimit, I.strokeDasharray = B.dashArray, I.strokeDashoffset = B.dashOffset, I.strokeOpacity = B.opacity, I.strokeStyle = k(B), I.strokeWidth = B.lineWidth;
                I = z;
                if (A = A.fill) I.fillOpacity = A.opacity, I.fillRule =
                    A.fillRule, I.fillStyle = k(A);
                E.style = z;
                t.author && (C.author = t.author);
                t.labels && (C.labels = t.labels.join(","));
                t.license && (C.license = t.license);
                v.push(C)
            }
            a = b.getBounds();
            r.vob.viewBox = [0, 0, a.width, a.height];
            r.vob.childNodes = v;
            r.vob.metadata = btoa(JSON.stringify(b.mixinMetaData(b, {})));
            d.toDataURL ? m(r, r.toDataURL()) : m(r, r.stringify())
        };
        l.toActions = function(d, b) {
            var a = f.doc,
                g = a.toolkit,
                k = d.svg;
            if (k && k.vob) {
                k = k.vob.childNodes;
                if (d.mergeIntoScene) var l = [];
                else l = [], a.scene.setData(l);
                var p = function(b) {
                    for (var d =
                            0; d < b.length; d++) {
                        var f = b[d];
                        f.childNodes && p(f.childNodes);
                        if (f.data) {
                            for (var h = f.matrix, k = (new CSSMatrix("matrix(" + [h.a, h.b, h.c, h.d, h.x, h.y].join() + ")")).decompose(), h = k.rotate, q = k.scale, k = k.translate, u = c.bbox(f.data), C = u.x, A = u.y, I = a.scene.copyDeep(f.data), B = 0; B < I.length; B++) isFinite(I[B].x) && (I[B].x -= C, I[B].y -= A), isFinite(I[B].x1) && (I[B].x1 -= C, I[B].y1 -= A), isFinite(I[B].x2) && (I[B].x2 -= C, I[B].y2 -= A);
                            h = {
                                id: a.scene.createId({
                                    id: f.id,
                                    increment: !0
                                }),
                                toolkitId: g && g.getToolkitId(f.type),
                                type: f.type,
                                zIndex: d,
                                data: I,
                                opacity: 100 * f.style.fillOpacity,
                                stroke: new e.Stroke({
                                    lineWidth: f.style.strokeWidth,
                                    color: f.style.strokeStyle
                                }),
                                dirtyDimension: !0,
                                bbox: {
                                    x: C * q.x + k.x,
                                    y: A * q.y + k.y,
                                    width: u.width / q.x,
                                    height: u.height / q.y,
                                    units: "objectBoundingBox",
                                    scale: {
                                        x: q.x,
                                        y: q.y
                                    },
                                    rotate: h.z
                                }
                            };
                            f.labels && (h.labels = f.labels.split(","));
                            f.license && (h.license = f.license);
                            f.author && (h.author = f.author);
                            l.push(h)
                        }
                    }
                };
                p(k);
                b(l)
            } else console.error("toActions", d)
        };
        l.open = function(e, b, a) {
            var k = f.doc;
            if (void 0 === e) console.error("svg.open", arguments);
            else {
                b = b || e.onsuccess || g;
                a = a || e.onerror || g;
                var q;
                e.data ? q = e.data : "string" === typeof e ? q = e : e.src && (q = e.src);
                0 === q.indexOf("<polygon") && (q = '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketchjs="https://sketch.io/dtd/" sketchjs:version="3.0">' + q + "</svg>");
                0 === q.indexOf("<svg") && (q = '<?xml version="1.0" encoding="UTF-8"?>' + q);
                0 === q.indexOf("<?xml") && (q = "data:image/svg+xml;base64," + btoa(q));
                f.loader && f.loader.create("thread", d.translate("reading-format", ".SVG..."), 0);
                var x = e.mergeIntoScene;
                return new c.SVG({
                    skipRender: !0,
                    placement: "none",
                    src: q,
                    onerror: a,
                    onsuccess: function(a) {
                        if (a.vob.metadata) {
                            var c = JSON.parse(atob(a.vob.metadata));
                            k.labels = c.labels;
                            k.license = c.license;
                            k.author = c.author
                        }
                        l.toActions({
                            svg: a,
                            mergeIntoScene: x
                        }, function(c) {
                            f.loader && f.loader.create("thread", d.translate("rendering") + "...", 50);
                            setTimeout(function() {
                                if (x) f.io.json.merge(c), f.loader && f.loader.create("thread", null, 100);
                                else {
                                    var d = a.vob.viewBox || a.viewBox || [0, 0, window.innerWidth, window.innerHeight];
                                    k.setMetrics({
                                        width: d[2],
                                        height: d[3],
                                        units: "px"
                                    });
                                    k.history.reset();
                                    k.scene.setData(c);
                                    k.render.preload({
                                        chunkBatch: !0,
                                        onsuccess: function() {
                                            f.loader && f.loader.stop("thread");
                                            b && b(c);
                                            f.emit("open")
                                        }
                                    })
                                }
                            }, 0)
                        })
                    }
                })
            }
        }
    }
})(sketch);
(function(k) {
    k.addToolkit("media", function(g, f) {
        function k(b, c, d) {
            return function() {
                b.dirtyCheck = !0;
                c && (b.bbox.scaleCache = {
                    x: 1,
                    y: 1
                }, b = w.addObject(b, {
                    useHistory: !0
                }), d && w.selectByIdx(b.zIndex), a.dirty = !0, a.dirtyControls = !0);
                a.dirtyPointer = !0
            }
        }

        function l(a) {
            var b = a.asset,
                c = a.scaleBBox,
                d = a.object;
            a = a.onsuccess;
            var e = d.bbox,
                e = "default" === b.className ? [0, 0, e.width, e.height] : [0, 0, b.width, b.height];
            g.assets.isDefault(b) || c(e[2] - e[0], e[3] - e[1]);
            d.dirtyTransform = !0;
            d.render = function(a, c, d) {
                c = this.bbox;
                var e =
                    c.width,
                    f = c.height,
                    g = c.scale;
                c = g.x;
                var g = g.y,
                    h = Math.abs(e * c),
                    m = Math.abs(f * g),
                    e = 0 > c ? e * c : 0,
                    f = 0 > g ? f * g : 0,
                    k = e ? -1 : 1,
                    p = f ? -1 : 1;
                a.save();
                d ? (a.scale(1 / c, 1 / g), a.scale(k, p)) : (a.scale(k, p), a.translate(e, f));
                a.drawImage(b, 0, 0, h, m);
                a.restore()
            };
            a && a(d)
        }

        function d(a) {
            if (p.exists("sketch.vector.SVG")) {
                var b = a.asset,
                    c = a.scaleBBox,
                    d = a.object;
                a = a.onsuccess;
                var e = d.bbox,
                    f = e.width,
                    h = e.height,
                    k = b.viewBox;
                c(k[2] - k[0], k[3] - k[1]);
                if ("objectBoundingBox" === e.units) {
                    var c = e.scale,
                        l = e.height;
                    e.x += (1 - e.width / f) * f / 2 * c.x;
                    e.y += (1 -
                        l / h) * h / 2 * c.y
                }
                d.svg = b;
                d.dirtyCheck = !0;
                e = b.viewBox || k;
                f = b.viewBoxStroke || k;
                d.padding = {
                    left: e[0] - f[0],
                    right: f[2] - e[2],
                    top: e[1] - f[1],
                    bottom: f[3] - e[3]
                };
                d.render = function(a, c, d) {
                    if (b.render) {
                        var e = {
                            ctx: a
                        };
                        if ("symbol" === this.type) {
                            var f = this.fill;
                            f ? (f = g.style.toSVG(f), "string" === typeof f ? e.defaultFill = f : (f.id = "defaultFill", this.svg.addDef(f), e.defaultFill = "defaultFill")) : e.defaultFill = "#000000"
                        }
                        e.trx = d ? new m.Transform : c;
                        var h = this.bbox,
                            f = h.width,
                            p = h.height,
                            l = h.scale,
                            h = l.x,
                            l = l.y,
                            r = f / k[2];
                        d ? (a.save(), a.scale(r,
                            r), b.render(e), a.restore()) : (c.translate(0 > h ? -f : 0, 0 > l ? -p : 0), c.scale(r, r), b.render(e))
                    } else console.warn("error", b)
                };
                a && a(d)
            } else console.error("SVG module is required")
        }
        var e = this,
            c = f.canvas2d,
            h = g.detect,
            b = g.feature.tools.media,
            a = f.render,
            w = f.scene,
            u = f.toolkit,
            x = g.ui,
            p = g.util,
            m = g.vector;
        e.id = "media";
        e.units = b.units;
        var v = {
            x: 0,
            y: 0,
            width: 100,
            height: 100,
            rotate: 0,
            scale: {
                x: 1,
                y: 1
            }
        };
        e._attributes = {
            brightness: "number",
            contrast: "number",
            exposure: "number",
            hue: "number",
            saturation: "number",
            temperature: "number",
            tint: "number",
            src: "string"
        };
        var r = p.copy(e._attributes);
        e.attributes = p.copyInto(g.attrs.__styledObject, r);
        (function() {
            var a = {};
            e.enabled = !1;
            e.enable = function() {
                !1 === e.enabled && (e.enabled = !0, u.select && u.select.enable({
                    events: a,
                    searchParam: {
                        toolkitId: b.useSearch
                    }
                }))
            };
            e.disable = function() {
                !0 === e.enabled && (e.enabled = !1, eventjs.bulk(a, "remove"))
            }
        })();
        e.loadResource = function(a) {
            var b = a.object,
                c = a.onerror,
                e = a.onsuccess,
                h = a.onprogress,
                m = b.src;
            a = b.type;
            if (f.toolkitConfig[a] && m) {
                var k = b.bbox || (b.bbox = p.copy(v)),
                    r = k.owidth || k.width,
                    q = k.oheight || k.height;
                g.assets.add({
                    data: m,
                    type: a,
                    onprogress: function(a) {
                        h && h(a.loaded / a.total)
                    },
                    onerror: function() {
                        c && c(b, {
                            fatal: !0,
                            message: "&ldquo;" + m.split("/").pop() + "&rdquo; unavailable."
                        })
                    },
                    onsuccess: function(a) {
                        ("clipart" === this.type ? d : l)({
                            asset: this,
                            hash: a,
                            object: b,
                            onsuccess: e,
                            src: m,
                            scaleBBox: function(a, b) {
                                r / a > q / b && (q = r / a * b);
                                r / a < q / b && (r = q / b * a);
                                k.width = r;
                                k.height = q;
                                k.owidth = k.owidth || r;
                                k.oheight = k.oheight || q
                            }
                        })
                    }
                })
            } else c && c(b, {
                fatal: !0,
                message: a + " unavailable"
            })
        };
        e.createObject =
            function(a, b) {
                var c = e.mergeObjectDefaults(a.object),
                    c = w.addObject(c);
                b && b(c)
            };
        e.onEnterKey = function() {
            w.deselectAll();
            w.render()
        };
        e.onRecord = function(d, m) {
            if ("eyeDropper" !== x.colorPicker.state) {
                var l = m.state,
                    r = m.pointerStart,
                    v = m.pointerDown,
                    A = m.pointerEnd,
                    I = f.getActionUid(m),
                    B = isFinite(m.shiftKey) ? m.shiftKey : eventjs.shiftKey,
                    D = isFinite(m.metaKey) ? m.metaKey : eventjs.metaKey,
                    F = !!d,
                    G = F && f.on.record;
                f.__interacting = v;
                if (F)
                    if (r) {
                        if (eventjs.prevent(d), w.controlHover.id) return
                    } else eventjs.cancel(d);
                v = a.pointer[I];
                if (!v || !v.object)
                    if (F && r) v = a.pointer[I] = {}, v.isFromBrowser = !0, v.object = w.copyProperties(e, e.device), v.object.id = w.createId({
                        id: I
                    }), e.loadResource({
                        object: v.object
                    });
                    else {
                        console.warn("media.onRecord - no pointer");
                        return
                    }
                v.lastModified = Date.now();
                var v = v.object,
                    H = v.type;
                if ("function" !== typeof v.render) m.pause && m.pause(), v.src ? e.loadResource({
                    object: v,
                    onsuccess: function(a) {
                        m.pointerDown && (m.resume && m.resume(), m.pointerStart = !0, m.state = "down", e.onRecord(d, m))
                    },
                    onerror: function(a, b) {
                        console.error(a,
                            b)
                    }
                }) : console.error("media.onRecord - undefined src", v), a.removePointer(I);
                else {
                    if (G) {
                        var J;
                        r && (J = w.copyDeepCompress(w.copyProperties(e, v)));
                        f.on.record({
                            op: "TOOL",
                            data: {
                                config: J,
                                state: u.cleanState(l),
                                pointerId: I,
                                point: w.pointInPeerSceneFromCanvas(m),
                                metaKey: D,
                                shiftKey: B
                            }
                        })
                    }
                    var l = f.zoom,
                        G = l * f.scale,
                        O = G * f.pixelRatio,
                        l = (l - 1) / l;
                    J = f.scrollX * l;
                    var K = f.scrollY * l,
                        L = m.start,
                        l = 0 > m.x - L.x ? -1 : 1,
                        D = 0 > m.y - L.y ? -1 : 1,
                        M = L.x / G + J,
                        Q = L.y / G + K,
                        L = m.x / G + J - M,
                        R = m.y / G + K - Q,
                        G = v.bbox;
                    J = 2 * Math.abs(L || 1);
                    K = 2 * Math.abs(R || 1);
                    J / G.width >
                        K / G.height ? K = J / G.width * G.height : J = K / G.height * G.width;
                    if (r && (v.dirtyCheck = !0, v.lastSampleSize = Math.sqrt(J * K), r = g.lib[H].byPath[v.src])) {
                        if (!1 === w.ensureMaxCopies(v)) {
                            a.removePointer(I);
                            return
                        }
                        w.copyRules(r, v)
                    }
                    v.dirtyTransform = !0;
                    G.x = M - 1 * c.x / O;
                    G.y = Q - 1 * c.y / O;
                    G.width = J;
                    G.height = K;
                    G.units = e.units;
                    r = w.getConstraint(v, !0);
                    G.width = G.owidth = r.width;
                    G.height = G.oheight = r.height;
                    O = "objectBoundingBox" === e.units;
                    H = !h.useNonUniform[H];
                    H = O || H;
                    B || !1 === H ? G.rotate = 0 : (L = -Math.atan2(L, R), G.rotate = (L * p.RAD_DEG + 3600) % 360);
                    L = G.scale;
                    if (B || !1 === H)
                        if (L.x !== l || L.y !== D) r.constrained = !0, L.x = l, L.y = D;
                    H ? O ? (G.x -= L.x * G.width / 2, G.y -= L.y * G.height / 2) : (L = -G.width / 2 * G.scale.x, R = -G.height / 2 * G.scale.y, B = G.rotate * p.DEG_RAD, G.x = Math.cos(B) * L - Math.sin(B) * R + G.x, G.y = Math.sin(B) * L + Math.cos(B) * R + G.y) : (G.x -= L.x * G.width / 2, G.y -= L.y * G.height / 2);
                    B = Math.sqrt(G.width * G.height) / v.lastSampleSize;
                    G.scaleCache = {
                        x: B,
                        y: B
                    };
                    if (A && (a.removePointer(I), J * K < e.minWidth * e.minHeight))
                        if (b.useAddByClick) 5 >= J && 5 >= K ? (I = e.defaultWidth, H = e.defaultHeight) : (I = e.minWidth,
                            H = e.minHeight), I / J > H / K && (H = I / J * K), I / J < H / K && (I = H / K * J), G.width = G.owidth = I, G.height = G.oheight = H, G.x -= (I - J) / 2, G.y -= (H - K) / 2;
                        else return;
                    w.updateConstrain(v);
                    clearTimeout(v.timeout);
                    I = .5 > B || 3 < B || 1 !== B && r.constrained;
                    A || I && B ? k(v, A, F)() : 1 < B && (v.timeout = setTimeout(k(v), 250));
                    a.dirtyPointer = !0
                }
            }
        };
        u.init(e)
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(k, l) {
        if (!(this instanceof g)) return new g(k, l);
        this.filters = {};
        this.id = "ColorMatrix";
        if (k)
            if ("object" === typeof k) {
                var d = !0,
                    e;
                for (e in k) d = !1;
                d && (this.matrix = f.slice(0));
                for (var c in k) break;
                if ("number" === typeof k[c])
                    if (isNaN(c)) this.update(k);
                    else {
                        d = {};
                        for (e in k) d[e] = o[e];
                        this.matrix = d
                    }
                else "object" === typeof k[c] && this.combine(k)
            } else this.update(k, l);
        else this.matrix = f.slice(0);
        return this
    }
    var f = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
    g.prototype = {
        brightness: function(f) {
            return [1,
                0, 0, 0, f, 0, 1, 0, 0, f, 0, 0, 1, 0, f, 0, 0, 0, 1, 0
            ]
        },
        contrast: function(f, g) {
            g = g || .5;
            return [++f, 0, 0, 0, g * (1 - f), 0, f, 0, 0, g * (1 - f), 0, 0, f, 0, g * (1 - f), 0, 0, 0, 1, 0]
        },
        sepia: function() {
            return [.393, .769, .189, 0, 0, .349, .686, .168, 0, 0, .272, .534, .131, 0, 0, 0, 0, 0, 1, 0]
        },
        exposure: function(f) {
            return [f, 0, 0, 0, 0, 0, f, 0, 0, 0, 0, 0, f, 0, 0, 0, 0, 0, 1, 0]
        },
        colorize: function(g) {
            var k = (g >>> 16 & 255) / 255,
                d = (g >>> 8 & 255) / 255,
                e = (g & 255) / 255;
            g = (g >>> 24) / 255;
            k = [.212656 * k, .715158 * k, .072186 * k, 0, 0, .212656 * d, .715158 * d, .072186 * d, 0, 0, .212656 * e, .715158 * e, .072186 * e, 0, 0, 0,
                0, 0, 1, 0
            ];
            if (1 > g)
                for (d = 0; 20 > d; d++) k[d] = (1 - g) * f[d] + g * k[d];
            return k
        },
        monotone: function(g) {
            var k = (g >>> 16 & 255) / 255,
                d = (g >>> 8 & 255) / 255,
                e = (g & 255) / 255;
            g = (g >>> 24) / 255;
            k = [k, d, e, 0, 0, k, d, e, 0, 0, k, d, e, 0, 0, 0, 0, 0, 1, 0];
            if (1 > g)
                for (d = 0; 20 > d; d++) k[d] = (1 - g) * f[d] + g * k[d];
            return k
        },
        hue: function(f) {
            f *= sketch.util.DEG_RAD;
            var g = Math.cos(f);
            f = Math.sin(f);
            return [.212656 + .787344 * g + -.212656 * f, .715158 + -.715158 * g + -.715158 * f, .072186 + -.072186 * g + .927814 * f, 0, 0, .212656 + -.212656 * g + .143 * f, .715158 + g * (1 - .715158) + .14 * f, .072186 + -.072186 * g +
                -.283 * f, 0, 0, .212656 + -.212656 * g + -.787344 * f, .715158 + -.715158 * g + .715158 * f, .072186 + .927814 * g + .072186 * f, 0, 0, 0, 0, 0, 1, 0
            ]
        },
        invert: function(f, g) {
            g = g || 1;
            f *= -1;
            return [f, 0, 0, 0, g, 0, f, 0, 0, g, 0, 0, f, 0, g, 0, 0, 0, 1, 0]
        },
        temperature: function(f) {
            return [1 + f / 256, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1 + -f / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        tint: function(f) {
            return [1 + f / 256, 0, 0, 0, 0, 0, 1 + -f / 256, 0, 0, 0, 0, 0, 1 + f / 256, 0, 0, 0, 0, 0, 1, 0]
        },
        saturation: function(f) {
            var g = .212656 * (1 - f),
                d = .715158 * (1 - f),
                e = .072186 * (1 - f);
            return [g + f, d, e, 0, 0, g, d + f, e, 0, 0, g, d, e + f, 0, 0, 0, 0, 0, 1, 0]
        },
        blend: function(f,
            g) {
            for (var d = this.matrix, e = [], c = 0; 20 > c; c++) e[c] = (1 - g) * d[c] + g * f[c];
            this.matrix = e;
            return this
        },
        light: function(f, g, d, e) {
            d = e.highlights;
            g = -clamp(d.value * (d.max - d.min) + d.min, d.min, d.max);
            d = e.shadows;
            e = -clamp(d.value * (d.max - d.min) + d.min, d.min, d.max);
            var c = Math.PI;
            d = Math.cos(c);
            for (var c = Math.sin(c), h = f.data, b = h.length, a = 0; a < b; a += 4) {
                var k = h[a],
                    u = h[a + 1],
                    x = h[a + 2],
                    p = k,
                    m = u,
                    v = x,
                    k = k ^ 255,
                    u = u ^ 255,
                    x = x ^ 255,
                    r = (.299 + .701 * d + .168 * c) * k + (.587 - .587 * d + .33 * c) * u + (.114 - .114 * d - .497 * c) * x,
                    y = (.299 - .299 * d - .328 * c) * k + (.587 + .413 * d +
                        .035 * c) * u + (.114 - .114 * d + .292 * c) * x,
                    t = (.299 - .3 * d + 1.25 * c) * k + (.587 - .588 * d - 1.05 * c) * u + (.114 + .886 * d - .203 * c) * x,
                    k = p < r ? p : r,
                    u = m < y ? m : y,
                    x = v < t ? v : t,
                    p = (1 - g) * p + g * k,
                    m = (1 - g) * m + g * u,
                    v = (1 - g) * v + g * x,
                    k = p > r ? p : r,
                    u = m > y ? m : y,
                    x = v > t ? v : t,
                    p = (1 - e) * p + e * k,
                    m = (1 - e) * m + e * u,
                    v = (1 - e) * v + e * x;
                h[a] = (0 > p ? 0 : 256 > p ? p : 255) >> 0;
                h[a + 1] = (0 > m ? 0 : 256 > m ? m : 255) >> 0;
                h[a + 2] = (0 > v ? 0 : 256 > v ? v : 255) >> 0
            }
            return f
        },
        duotone: function(f, g, d, e) {
            g = Color.HSV_RGB({
                H: 360 * e.hue.value,
                S: 100 * e.saturation.value,
                V: 100 * e.saturation.value
            });
            d = 1.5 * e.luminance.value;
            e = e.amount.value;
            for (var c =
                    f.data, h = c.length, b = 0; b < h; b += 4) {
                var a = c[b],
                    k = c[b + 1],
                    u = c[b + 2],
                    x = .212656 * a + .715158 * k + .072186 * u,
                    p = (1 - x / 255) * g.R + x / 255 * x,
                    m = (1 - x / 255) * g.G + x / 255 * x,
                    v = (1 - x / 255) * g.B + x / 255 * x,
                    x = x - (p + m + v) / 3,
                    p = p + x,
                    m = m + x,
                    v = v + x,
                    x = (p + m + v) / 3,
                    r = Math.min(p, m, v);
                0 > r && (p = x + (p - x) * x / (x - r), m = x + (m - x) * x / (x - r), v = x + (v - x) * x / (x - r));
                r = Math.max(p, m, v);
                255 < r && (p = x + (p - x) * (255 - x) / (r - x), m = x + (m - x) * (255 - x) / (r - x), v = x + (v - x) * (255 - x) / (r - x));
                p = ((1 - e) * a + e * p) * d;
                m = ((1 - e) * k + e * m) * d;
                v = ((1 - e) * u + e * v) * d;
                c[b] = p;
                c[b + 1] = m;
                c[b + 2] = v
            }
            return f
        },
        combine: function(f) {
            var g = [];
            if ("number" === typeof f[0])
                for (var d = 0, e = arguments.length; d < e; d++) g[d] = arguments[d];
            else g = f;
            var e = this.matrix,
                c = [];
            for (d in g)
                if (e) {
                    for (var h = 0; 5 > h; h++)
                        for (var b = 0; 20 > b; b += 5) c[b + h] = e[b] * g[d][h] + e[b + 1] * g[d][h + 5] + e[b + 2] * g[d][h + 10] + e[b + 3] * g[d][h + 15] + (4 === h ? e[b + 4] : 0);
                    e = c
                } else e = g[d];
            this.matrix = e;
            return this
        },
        update: function(f, g) {
            if ("string" === typeof f) {
                if (!this[f]) return;
                "number" === typeof g ? this.filters[f] = this[f](g) : delete this.filters[f]
            } else
                for (var d in f) this[d] && ("number" === typeof f[d] ? this.filters[d] =
                    this[d](f[d]) : delete this.filters[d]);
            delete this.matrix;
            this.combine(this.filters);
            return this
        },
        getMatrix4x4: function() {
            var f = this.matrix;
            return [f[0], f[1], f[2], f[3], f[5], f[6], f[7], f[8], f[10], f[11], f[12], f[13], f[15], f[16], f[17], f[18]]
        },
        toString: function() {
            return this.matrix.join(",")
        },
        apply: function(f, g, d, e) {
            var c = f.canvas;
            e || (e = [0, 0]);
            d || (d = f);
            g || (g = [0, 0, c.width, c.height]);
            f = f.getImageData(g[0], g[1], g[2], g[3]);
            g = f.data;
            for (var h = this.matrix, c = h[0], b = h[1], a = h[2], k = h[3], u = h[4], x = h[5], p = h[6], m = h[7],
                    v = h[8], r = h[9], y = h[10], t = h[11], E = h[12], z = h[13], C = h[14], A = h[15], I = h[16], B = h[17], D = h[18], h = h[19], F, G, H, J, O, K, L, M = 0, Q = g.length; M < Q; M += 4) F = g[M], G = g[M + 1], H = g[M + 2], J = g[M + 3], O = F * c + G * b + H * a + J * k + u, K = F * x + G * p + H * m + J * v + r, L = F * y + G * t + H * E + J * z + C, F = F * A + G * I + H * B + J * D + h, f.data[M] = (0 > O ? 0 : 255 > O ? O : 255) >> 0, f.data[M + 1] = (0 > K ? 0 : 255 > K ? K : 255) >> 0, f.data[M + 2] = (0 > L ? 0 : 255 > L ? L : 255) >> 0, f.data[M + 3] = (0 > F ? 0 : 255 > F ? F : 255) >> 0;
            d.putImageData(f, e[0], e[1])
        },
        reset: function() {
            this.matrix = f.slice(0)
        }
    };
    g.isIdentity = function(f) {
        return 1 === f.saturation &&
            0 === f.hue && 0 === f.tint && 0 === f.temperature && 1 === f.exposure && 0 === f.brightness && 0 === f.contrast
    };
    g.setFilter = function(f) {
        var k = new g;
        isFinite(f.saturation) && k.update("saturation", f.saturation);
        !0 === f.invert && k.update("invert", f.invert);
        isFinite(f.hue) && k.update("hue", f.hue);
        !0 === f.sepia && k.update("sepia", f.sepia);
        isFinite(f.tint) && k.update("tint", f.tint);
        isFinite(f.temperature) && k.update("temperature", f.temperature);
        isFinite(f.exposure) && k.update("exposure", f.exposure);
        isFinite(f.brightness) && k.update("brightness",
            f.brightness);
        isFinite(f.contrast) && k.update("contrast", f.contrast, 1);
        isFinite(f.colorize) && k.update("colorize", 4294901760);
        isFinite(f.monotone) && k.update("monotone", 4283782485);
        return k
    };
    k.gl = k.gl || {};
    k.gl.ColorMatrix = g
})(sketch);
"undefined" === typeof PDFJS && (("undefined" !== typeof window ? window : this).PDFJS = {});
PDFJS.version = "1.0.266";
PDFJS.build = "5b16323";
(function() {
    function k(a) {
        PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.infos && console.log("Info: " + a)
    }

    function g(a) {
        PDFJS.verbosity >= PDFJS.VERBOSITY_LEVELS.warnings && console.log("Warning: " + a)
    }

    function f(a) {
        if (1 < arguments.length) {
            var b = ["Error:"];
            b.push.apply(b, arguments);
            console.log.apply(console, b);
            a = [].join.call(arguments, " ")
        } else console.log("Error: " + a);
        console.log(q());
        I.notify(A.unknown);
        throw Error(a);
    }

    function q() {
        try {
            throw Error();
        } catch (a) {
            return a.stack ? a.stack.split("\n").slice(2).join("\n") :
                ""
        }
    }

    function l(a, b) {
        if (!b) return a;
        if (/^[a-z][a-z0-9+\-.]*:/i.test(b)) return b;
        var c;
        if ("/" == b.charAt(0)) return c = a.indexOf("://"), "/" === b.charAt(1) ? ++c : c = a.indexOf("/", c + 3), a.substring(0, c) + b;
        var d = a.length;
        c = a.lastIndexOf("#");
        d = 0 <= c ? c : d;
        c = a.lastIndexOf("?", d);
        c = a.lastIndexOf("/", 0 <= c ? c : d);
        return a.substring(0, c + 1) + b
    }

    function d(a, b) {
        if (!a) return !1;
        var c = /^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);
        if (!c) return b;
        c = c[0].toLowerCase();
        switch (c) {
            case "http":
            case "https":
            case "ftp":
            case "mailto":
                return !0;
            default:
                return !1
        }
    }

    function e(a, b, c) {
        Object.defineProperty(a, b, {
            value: c,
            enumerable: !0,
            configurable: !0,
            writable: !1
        });
        return c
    }

    function c(a) {
        for (var b = a.length, c = new Uint8Array(b), d = 0; d < b; ++d) c[d] = a.charCodeAt(d) & 255;
        return c
    }

    function h(a) {
        var b, c = a.length,
            d = [];
        if ("\u00fe" === a[0] && "\u00ff" === a[1])
            for (b = 2; b < c; b += 2) d.push(String.fromCharCode(a.charCodeAt(b) << 8 | a.charCodeAt(b + 1)));
        else
            for (b = 0; b < c; ++b) {
                var e = J[a.charCodeAt(b)];
                d.push(e ? String.fromCharCode(e) : a.charAt(b))
            }
        return d.join("")
    }

    function b(a) {
        return a instanceof
        Name
    }

    function a(a, c) {
        if (!(a instanceof Dict)) return !1;
        if (!c) return !0;
        var d = a.get("Type");
        return b(d) && d.name == c
    }

    function w(a) {
        return a instanceof Array
    }

    function u() {
        var a = {};
        a.promise = new Promise(function(b, c) {
            a.resolve = b;
            a.reject = c
        });
        return a
    }

    function x(a, b) {
        this.name = a;
        this.comObj = b;
        this.callbackIndex = 1;
        this.postMessageTransfers = !0;
        var c = this.callbacksCapabilities = {},
            d = this.actionHandler = {};
        d.console_log = [function(a) {
            console.log.apply(console, a)
        }];
        d.console_error = [function(a) {
            console.error.apply(console,
                a)
        }];
        d._unsupported_feature = [function(a) {
            I.notify(a)
        }];
        b.onmessage = function(a) {
            var e = a.data;
            if (e.isReply)
                if (a = e.callbackId, e.callbackId in c) {
                    var g = c[a];
                    delete c[a];
                    "error" in e ? g.reject(e.error) : g.resolve(e.data)
                } else f("Cannot resolve callback " + a);
            else if (e.action in d) {
                var h = d[e.action];
                e.callbackId ? Promise.resolve().then(function() {
                    return h[0].call(h[1], e.data)
                }).then(function(a) {
                    b.postMessage({
                        isReply: !0,
                        callbackId: e.callbackId,
                        data: a
                    })
                }, function(a) {
                    b.postMessage({
                        isReply: !0,
                        callbackId: e.callbackId,
                        error: a
                    })
                }) : h[0].call(h[1], e.data)
            } else f("Unknown action from worker: " + e.action)
        }
    }

    function p(a, b, c) {
        var d = new Image;
        d.onload = function() {
            c.resolve(a, d)
        };
        d.src = b
    }

    function m(a, b) {
        var c = document.createElement("canvas");
        c.width = a;
        c.height = b;
        return c
    }

    function v(a) {
        a.mozCurrentTransform || (a._scaleX = a._scaleX || 1, a._scaleY = a._scaleY || 1, a._originalSave = a.save, a._originalRestore = a.restore, a._originalRotate = a.rotate, a._originalScale = a.scale, a._originalTranslate = a.translate, a._originalTransform = a.transform,
            a._originalSetTransform = a.setTransform, a._transformMatrix = [a._scaleX, 0, 0, a._scaleY, 0, 0], a._transformStack = [], Object.defineProperty(a, "mozCurrentTransform", {
                get: function() {
                    return this._transformMatrix
                }
            }), Object.defineProperty(a, "mozCurrentTransformInverse", {
                get: function() {
                    var a = this._transformMatrix,
                        b = a[0],
                        c = a[1],
                        d = a[2],
                        e = a[3],
                        f = a[4],
                        a = a[5],
                        g = b * e - c * d,
                        h = c * d - b * e;
                    return [e / g, c / h, d / h, b / g, (e * f - d * a) / h, (c * f - b * a) / g]
                }
            }), a.save = function() {
                var a = this._transformMatrix;
                this._transformStack.push(a);
                this._transformMatrix =
                    a.slice(0, 6);
                this._originalSave()
            }, a.restore = function() {
                var a = this._transformStack.pop();
                a && (this._transformMatrix = a, this._originalRestore())
            }, a.translate = function(a, b) {
                var c = this._transformMatrix;
                c[4] = c[0] * a + c[2] * b + c[4];
                c[5] = c[1] * a + c[3] * b + c[5];
                this._originalTranslate(a, b)
            }, a.scale = function(a, b) {
                var c = this._transformMatrix;
                c[0] *= a;
                c[1] *= a;
                c[2] *= b;
                c[3] *= b;
                this._originalScale(a, b)
            }, a.transform = function(b, c, d, e, f, g) {
                var h = this._transformMatrix;
                this._transformMatrix = [h[0] * b + h[2] * c, h[1] * b + h[3] * c, h[0] *
                    d + h[2] * e, h[1] * d + h[3] * e, h[0] * f + h[2] * g + h[4], h[1] * f + h[3] * g + h[5]
                ];
                a._originalTransform(b, c, d, e, f, g)
            }, a.setTransform = function(b, c, d, e, f, g) {
                this._transformMatrix = [b, c, d, e, f, g];
                a._originalSetTransform(b, c, d, e, f, g)
            }, a.rotate = function(a) {
                var b = Math.cos(a),
                    c = Math.sin(a),
                    d = this._transformMatrix;
                this._transformMatrix = [d[0] * b + d[2] * c, d[1] * b + d[3] * c, d[0] * -c + d[2] * b, d[1] * -c + d[3] * b, d[4], d[5]];
                this._originalRotate(a)
            })
    }

    function r(a) {
        var b = a.width,
            c = a.height,
            d, e, f = b + 1,
            g = new Uint8Array(f * (c + 1)),
            h = new Uint8Array([0, 2, 4,
                0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0
            ]),
            m = b + 7 & -8,
            k = a.data,
            p = new Uint8Array(m * c),
            r = 0;
        a = 0;
        for (d = k.length; a < d; a++) {
            e = 128;
            for (var l = k[a]; 0 < e;) p[r++] = l & e ? 0 : 255, e >>= 1
        }
        r = k = 0;
        0 !== p[r] && (g[0] = 1, ++k);
        for (d = 1; d < b; d++) p[r] !== p[r + 1] && (g[d] = p[r] ? 2 : 1, ++k), r++;
        0 !== p[r] && (g[d] = 2, ++k);
        for (a = 1; a < c; a++) {
            r = a * m;
            e = a * f;
            p[r - m] !== p[r] && (g[e] = p[r] ? 1 : 8, ++k);
            l = (p[r] ? 4 : 0) + (p[r - m] ? 8 : 0);
            for (d = 1; d < b; d++) l = (l >> 2) + (p[r + 1] ? 4 : 0) + (p[r - m + 1] ? 8 : 0), h[l] && (g[e + d] = h[l], ++k), r++;
            p[r - m] !== p[r] && (g[e + d] = p[r] ? 2 : 4, ++k);
            if (1E3 < k) return null
        }
        r = m * (c - 1);
        e = a * f;
        0 !== p[r] && (g[e] = 8, ++k);
        for (d = 1; d < b; d++) p[r] !== p[r + 1] && (g[e + d] = p[r] ? 4 : 8, ++k), r++;
        0 !== p[r] && (g[e + d] = 4, ++k);
        if (1E3 < k) return null;
        var h = new Int32Array([0, f, -1, 0, -f, 0, 0, 0, 1]),
            t = [];
        for (a = 0; k && a <= c; a++) {
            m = a * f;
            for (p = m + b; m < p && !g[m];) m++;
            if (m !== p) {
                p = [m % f, a];
                r = g[m];
                d = m;
                do {
                    e = h[r];
                    do m += e; while (!g[m]);
                    e = g[m];
                    5 !== e && 10 !== e ? (r = e, g[m] = 0) : (r = e & 51 * r >> 4, g[m] &= r >> 2 | r << 2);
                    p.push(m % f);
                    p.push(m / f | 0);
                    --k
                } while (d !== m);
                t.push(p);
                --a
            }
        }
        return function(a) {
            a.save();
            a.scale(1 / b, -1 / c);
            a.translate(0, -c);
            a.beginPath();
            for (var d = 0,
                    e = t.length; d < e; d++) {
                var f = t[d];
                a.moveTo(f[0], f[1]);
                for (var g = 2, h = f.length; g < h; g += 2) a.lineTo(f[g], f[g + 1])
            }
            a.fill();
            a.beginPath();
            a.restore()
        }
    }

    function y(a) {
        var b = da[a[0]];
        b || f("Unknown IR type: " + a[0]);
        return b.fromIR(a)
    }
    var t = "undefined" === typeof window ? this : window,
        E = "undefined" == typeof window,
        z = [.001, 0, 0, .001, 0, 0];
    t.PDFJS || (t.PDFJS = {});
    t.PDFJS.pdfBug = !1;
    PDFJS.VERBOSITY_LEVELS = {
        errors: 0,
        warnings: 1,
        infos: 5
    };
    var C = PDFJS.OPS = {
            dependency: 1,
            setLineWidth: 2,
            setLineCap: 3,
            setLineJoin: 4,
            setMiterLimit: 5,
            setDash: 6,
            setRenderingIntent: 7,
            setFlatness: 8,
            setGState: 9,
            save: 10,
            restore: 11,
            transform: 12,
            moveTo: 13,
            lineTo: 14,
            curveTo: 15,
            curveTo2: 16,
            curveTo3: 17,
            closePath: 18,
            rectangle: 19,
            stroke: 20,
            closeStroke: 21,
            fill: 22,
            eoFill: 23,
            fillStroke: 24,
            eoFillStroke: 25,
            closeFillStroke: 26,
            closeEOFillStroke: 27,
            endPath: 28,
            clip: 29,
            eoClip: 30,
            beginText: 31,
            endText: 32,
            setCharSpacing: 33,
            setWordSpacing: 34,
            setHScale: 35,
            setLeading: 36,
            setFont: 37,
            setTextRenderingMode: 38,
            setTextRise: 39,
            moveText: 40,
            setLeadingMoveText: 41,
            setTextMatrix: 42,
            nextLine: 43,
            showText: 44,
            showSpacedText: 45,
            nextLineShowText: 46,
            nextLineSetSpacingShowText: 47,
            setCharWidth: 48,
            setCharWidthAndBounds: 49,
            setStrokeColorSpace: 50,
            setFillColorSpace: 51,
            setStrokeColor: 52,
            setStrokeColorN: 53,
            setFillColor: 54,
            setFillColorN: 55,
            setStrokeGray: 56,
            setFillGray: 57,
            setStrokeRGBColor: 58,
            setFillRGBColor: 59,
            setStrokeCMYKColor: 60,
            setFillCMYKColor: 61,
            shadingFill: 62,
            beginInlineImage: 63,
            beginImageData: 64,
            endInlineImage: 65,
            paintXObject: 66,
            markPoint: 67,
            markPointProps: 68,
            beginMarkedContent: 69,
            beginMarkedContentProps: 70,
            endMarkedContent: 71,
            beginCompat: 72,
            endCompat: 73,
            paintFormXObjectBegin: 74,
            paintFormXObjectEnd: 75,
            beginGroup: 76,
            endGroup: 77,
            beginAnnotations: 78,
            endAnnotations: 79,
            beginAnnotation: 80,
            endAnnotation: 81,
            paintJpegXObject: 82,
            paintImageMaskXObject: 83,
            paintImageMaskXObjectGroup: 84,
            paintImageXObject: 85,
            paintInlineImageXObject: 86,
            paintInlineImageXObjectGroup: 87,
            paintImageXObjectRepeat: 88,
            paintImageMaskXObjectRepeat: 89,
            paintSolidColorImageMask: 90,
            constructPath: 91
        },
        A = PDFJS.UNSUPPORTED_FEATURES = {
            unknown: "unknown",
            forms: "forms",
            javaScript: "javaScript",
            smask: "smask",
            shadingPattern: "shadingPattern",
            font: "font"
        },
        I = PDFJS.UnsupportedManager = function() {
            var a = [];
            return {
                listen: function(b) {
                    a.push(b)
                },
                notify: function(b) {
                    g('Unsupported feature "' + b + '"');
                    for (var c = 0, d = a.length; c < d; c++) a[c](b)
                }
            }
        }();
    PDFJS.isValidUrl = d;
    var B = PDFJS.PasswordResponses = {
        NEED_PASSWORD: 1,
        INCORRECT_PASSWORD: 2
    };
    (function() {
        function a(b, c) {
            this.name = "PasswordException";
            this.message = b;
            this.code = c
        }
        a.prototype = Error();
        return a.constructor = a
    })();
    (function() {
        function a(b,
            c) {
            this.name = "UnknownErrorException";
            this.message = b;
            this.details = c
        }
        a.prototype = Error();
        return a.constructor = a
    })();
    (function() {
        function a(b) {
            this.name = "InvalidPDFException";
            this.message = b
        }
        a.prototype = Error();
        return a.constructor = a
    })();
    (function() {
        function a(b) {
            this.name = "MissingPDFException";
            this.message = b
        }
        a.prototype = Error();
        return a.constructor = a
    })();
    var D = function() {
        function a(b) {
            this.message = b
        }
        a.prototype = Error();
        a.prototype.name = "NotImplementedException";
        return a.constructor = a
    }();
    (function() {
        function a(b,
            c) {
            this.begin = b;
            this.end = c;
            this.message = "Missing data [" + b + ", " + c + ")"
        }
        a.prototype = Error();
        a.prototype.name = "MissingDataException";
        return a.constructor = a
    })();
    (function() {
        function a(b) {
            this.message = b
        }
        a.prototype = Error();
        a.prototype.name = "XRefParseException";
        return a.constructor = a
    })();
    Object.defineProperty(PDFJS, "isLittleEndian", {
        configurable: !0,
        get: function() {
            var a = PDFJS,
                b = new Uint8Array(2);
            b[0] = 1;
            b = new Uint16Array(b.buffer);
            return e(a, "isLittleEndian", 1 === b[0])
        }
    });
    Object.defineProperty(PDFJS, "hasCanvasTypedArrays", {
        configurable: !0,
        get: function() {
            var a = PDFJS,
                b = document.createElement("canvas");
            b.width = b.height = 1;
            b = b.getContext("2d").createImageData(1, 1);
            return e(a, "hasCanvasTypedArrays", "undefined" !== typeof b.data.buffer)
        }
    });
    var F = function() {
            function a(d, e) {
                this.buffer = d;
                this.byteLength = d.length;
                for (var f = this.length = void 0 === e ? this.byteLength >> 2 : e; c < f;) Object.defineProperty(a.prototype, c, b(c)), c++
            }

            function b(a) {
                return {
                    get: function() {
                        var b = this.buffer,
                            c = a << 2;
                        return (b[c] | b[c + 1] << 8 | b[c + 2] << 16 | b[c + 3] << 24) >>> 0
                    },
                    set: function(b) {
                        var c = this.buffer,
                            d = a << 2;
                        c[d] = b & 255;
                        c[d + 1] = b >> 8 & 255;
                        c[d + 2] = b >> 16 & 255;
                        c[d + 3] = b >>> 24 & 255
                    }
                }
            }
            a.prototype = Object.create(null);
            var c = 0;
            return a
        }(),
        G = [1, 0, 0, 1, 0, 0],
        H = PDFJS.Util = function() {
            function a() {}
            a.makeCssRgb = function(a) {
                return "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")"
            };
            a.transform = function(a, b) {
                return [a[0] * b[0] + a[2] * b[1], a[1] * b[0] + a[3] * b[1], a[0] * b[2] + a[2] * b[3], a[1] * b[2] + a[3] * b[3], a[0] * b[4] + a[2] * b[5] + a[4], a[1] * b[4] + a[3] * b[5] + a[5]]
            };
            a.applyTransform = function(a, b) {
                return [a[0] * b[0] + a[1] * b[2] + b[4],
                    a[0] * b[1] + a[1] * b[3] + b[5]
                ]
            };
            a.applyInverseTransform = function(a, b) {
                var c = b[0] * b[3] - b[1] * b[2];
                return [(a[0] * b[3] - a[1] * b[2] + b[2] * b[5] - b[4] * b[3]) / c, (-a[0] * b[1] + a[1] * b[0] + b[4] * b[1] - b[5] * b[0]) / c]
            };
            a.getAxialAlignedBoundingBox = function(b, c) {
                var d = a.applyTransform(b, c),
                    e = a.applyTransform(b.slice(2, 4), c),
                    f = a.applyTransform([b[0], b[3]], c),
                    g = a.applyTransform([b[2], b[1]], c);
                return [Math.min(d[0], e[0], f[0], g[0]), Math.min(d[1], e[1], f[1], g[1]), Math.max(d[0], e[0], f[0], g[0]), Math.max(d[1], e[1], f[1], g[1])]
            };
            a.inverseTransform =
                function(a) {
                    var b = a[0] * a[3] - a[1] * a[2];
                    return [a[3] / b, -a[1] / b, -a[2] / b, a[0] / b, (a[2] * a[5] - a[4] * a[3]) / b, (a[4] * a[1] - a[5] * a[0]) / b]
                };
            a.apply3dTransform = function(a, b) {
                return [a[0] * b[0] + a[1] * b[1] + a[2] * b[2], a[3] * b[0] + a[4] * b[1] + a[5] * b[2], a[6] * b[0] + a[7] * b[1] + a[8] * b[2]]
            };
            a.singularValueDecompose2dScale = function(a) {
                var b = [a[0], a[2], a[1], a[3]],
                    c = a[0] * b[0] + a[1] * b[2],
                    d = a[2] * b[1] + a[3] * b[3],
                    e = (c + d) / 2;
                a = Math.sqrt((c + d) * (c + d) - 4 * (c * d - (a[2] * b[0] + a[3] * b[2]) * (a[0] * b[1] + a[1] * b[3]))) / 2;
                b = e - a || 1;
                return [Math.sqrt(e + a || 1), Math.sqrt(b)]
            };
            a.normalizeRect = function(a) {
                var b = a.slice(0);
                a[0] > a[2] && (b[0] = a[2], b[2] = a[0]);
                a[1] > a[3] && (b[1] = a[3], b[3] = a[1]);
                return b
            };
            a.intersect = function(b, c) {
                function d(a, b) {
                    return a - b
                }
                var e = [b[0], b[2], c[0], c[2]].sort(d),
                    f = [b[1], b[3], c[1], c[3]].sort(d),
                    g = [];
                b = a.normalizeRect(b);
                c = a.normalizeRect(c);
                if (e[0] === b[0] && e[1] === c[0] || e[0] === c[0] && e[1] === b[0]) g[0] = e[1], g[2] = e[2];
                else return !1;
                if (f[0] === b[1] && f[1] === c[1] || f[0] === c[1] && f[1] === b[1]) g[1] = f[1], g[3] = f[2];
                else return !1;
                return g
            };
            a.sign = function(a) {
                return 0 >
                    a ? -1 : 1
            };
            a.concatenateToArray = function(a, b) {
                Array.prototype.push.apply(a, b)
            };
            a.prependToArray = function(a, b) {
                Array.prototype.unshift.apply(a, b)
            };
            a.extendObj = function(a, b) {
                for (var c in b) a[c] = b[c]
            };
            a.getInheritableProperty = function(a, b) {
                for (; a && !a.has(b);) a = a.get("Parent");
                return a ? a.get(b) : null
            };
            a.inherit = function(a, b, c) {
                a.prototype = Object.create(b.prototype);
                a.prototype.constructor = a;
                for (var d in c) a.prototype[d] = c[d]
            };
            a.loadScript = function(a, b) {
                var c = document.createElement("script"),
                    d = !1;
                c.setAttribute("src",
                    a);
                b && (c.onload = function() {
                    d || b();
                    d = !0
                });
                document.getElementsByTagName("head")[0].appendChild(c)
            };
            return a
        }();
    PDFJS.PageViewport = function() {
        function a(b, c, d, e, f, g) {
            this.viewBox = b;
            this.scale = c;
            this.rotation = d;
            this.offsetX = e;
            this.offsetY = f;
            var h = (b[2] + b[0]) / 2,
                m = (b[3] + b[1]) / 2,
                k, p, r;
            d %= 360;
            switch (0 > d ? d + 360 : d) {
                case 180:
                    d = -1;
                    p = k = 0;
                    r = 1;
                    break;
                case 90:
                    d = 0;
                    p = k = 1;
                    r = 0;
                    break;
                case 270:
                    d = 0;
                    p = k = -1;
                    r = 0;
                    break;
                default:
                    d = 1, p = k = 0, r = -1
            }
            g && (p = -p, r = -r);
            0 === d ? (e = Math.abs(m - b[1]) * c + e, f = Math.abs(h - b[0]) * c + f, g = Math.abs(b[3] -
                b[1]) * c, b = Math.abs(b[2] - b[0]) * c) : (e = Math.abs(h - b[0]) * c + e, f = Math.abs(m - b[1]) * c + f, g = Math.abs(b[2] - b[0]) * c, b = Math.abs(b[3] - b[1]) * c);
            this.transform = [d * c, k * c, p * c, r * c, e - d * c * h - p * c * m, f - k * c * h - r * c * m];
            this.width = g;
            this.height = b;
            this.fontScale = c
        }
        a.prototype = {
            clone: function(b) {
                b = b || {};
                var c = "scale" in b ? b.scale : this.scale,
                    d = "rotation" in b ? b.rotation : this.rotation;
                return new a(this.viewBox.slice(), c, d, this.offsetX, this.offsetY, b.dontFlip)
            },
            convertToViewportPoint: function(a, b) {
                return H.applyTransform([a, b], this.transform)
            },
            convertToViewportRectangle: function(a) {
                var b = H.applyTransform([a[0], a[1]], this.transform);
                a = H.applyTransform([a[2], a[3]], this.transform);
                return [b[0], b[1], a[0], a[1]]
            },
            convertToPdfPoint: function(a, b) {
                return H.applyInverseTransform([a, b], this.transform)
            }
        };
        return a
    }();
    var J = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 728, 711, 710, 729, 733, 731, 730, 732, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 8226, 8224, 8225, 8230, 8212, 8211, 402, 8260, 8249, 8250, 8722, 8240, 8222, 8220, 8221, 8216, 8217, 8218, 8482, 64257, 64258, 321, 338, 352, 376, 381, 305, 322, 339, 353, 382, 0, 8364
    ];
    PDFJS.createPromiseCapability = u;
    (function() {
        function a(c) {
            this._status = b;
            this._handlers = [];
            try {
                c.call(this, this._resolve.bind(this), this._reject.bind(this))
            } catch (d) {
                this._reject(d)
            }
        }
        if (t.Promise) "function" !== typeof t.Promise.all && (t.Promise.all = function(a) {
            var b = 0,
                c = [],
                d, e, f = new t.Promise(function(a, b) {
                    d =
                        a;
                    e = b
                });
            a.forEach(function(a, f) {
                b++;
                a.then(function(a) {
                    c[f] = a;
                    b--;
                    0 === b && d(c)
                }, e)
            });
            0 === b && d(c);
            return f
        }), "function" !== typeof t.Promise.resolve && (t.Promise.resolve = function(a) {
            return new t.Promise(function(b) {
                b(a)
            })
        }), "function" !== typeof t.Promise.reject && (t.Promise.reject = function(a) {
            return new t.Promise(function(b, c) {
                c(a)
            })
        }), "function" !== typeof t.Promise.prototype["catch"] && (t.Promise.prototype["catch"] = function(a) {
            return t.Promise.prototype.then(void 0, a)
        });
        else {
            var b = 0,
                c = {
                    handlers: [],
                    running: !1,
                    unhandledRejections: [],
                    pendingRejectionCheck: !1,
                    scheduleHandlers: function(a) {
                        a._status != b && (this.handlers = this.handlers.concat(a._handlers), a._handlers = [], this.running || (this.running = !0, setTimeout(this.runHandlers.bind(this), 0)))
                    },
                    runHandlers: function() {
                        for (var a = Date.now() + 1; 0 < this.handlers.length;) {
                            var b = this.handlers.shift(),
                                c = b.thisPromise._status,
                                d = b.thisPromise._value;
                            try {
                                1 === c ? "function" == typeof b.onResolve && (d = b.onResolve(d)) : "function" === typeof b.onReject && (d = b.onReject(d), c = 1, b.thisPromise._unhandledRejection &&
                                    this.removeUnhandeledRejection(b.thisPromise))
                            } catch (e) {
                                c = 2, d = e
                            }
                            b.nextPromise._updateStatus(c, d);
                            if (Date.now() >= a) break
                        }
                        0 < this.handlers.length ? setTimeout(this.runHandlers.bind(this), 0) : this.running = !1
                    },
                    addUnhandledRejection: function(a) {
                        this.unhandledRejections.push({
                            promise: a,
                            time: Date.now()
                        });
                        this.scheduleRejectionCheck()
                    },
                    removeUnhandeledRejection: function(a) {
                        a._unhandledRejection = !1;
                        for (var b = 0; b < this.unhandledRejections.length; b++) this.unhandledRejections[b].promise === a && (this.unhandledRejections.splice(b),
                            b--)
                    },
                    scheduleRejectionCheck: function() {
                        this.pendingRejectionCheck || (this.pendingRejectionCheck = !0, setTimeout(function() {
                            this.pendingRejectionCheck = !1;
                            for (var a = Date.now(), b = 0; b < this.unhandledRejections.length; b++)
                                if (500 < a - this.unhandledRejections[b].time) {
                                    var c = this.unhandledRejections[b].promise._value,
                                        d = "Unhandled rejection: " + c;
                                    c.stack && (d += "\n" + c.stack);
                                    g(d);
                                    this.unhandledRejections.splice(b);
                                    b--
                                }
                            this.unhandledRejections.length && this.scheduleRejectionCheck()
                        }.bind(this), 500))
                    }
                };
            a.all = function(b) {
                function c(a) {
                    2 !==
                        f._status && (h = [], e(a))
                }
                var d, e, f = new a(function(a, b) {
                        d = a;
                        e = b
                    }),
                    g = b.length,
                    h = [];
                if (0 === g) return d(h), f;
                for (var m = 0, k = b.length; m < k; ++m) {
                    var p = b[m],
                        r = function(a) {
                            return function(b) {
                                2 !== f._status && (h[a] = b, g--, 0 === g && d(h))
                            }
                        }(m);
                    a.isPromise(p) ? p.then(r, c) : r(p)
                }
                return f
            };
            a.isPromise = function(a) {
                return a && "function" === typeof a.then
            };
            a.resolve = function(b) {
                return new a(function(a) {
                    a(b)
                })
            };
            a.reject = function(b) {
                return new a(function(a, c) {
                    c(b)
                })
            };
            a.prototype = {
                _status: null,
                _value: null,
                _handlers: null,
                _unhandledRejection: null,
                _updateStatus: function(b, d) {
                    1 !== this._status && 2 !== this._status && (1 == b && a.isPromise(d) ? d.then(this._updateStatus.bind(this, 1), this._updateStatus.bind(this, 2)) : (this._status = b, this._value = d, 2 === b && 0 === this._handlers.length && (this._unhandledRejection = !0, c.addUnhandledRejection(this)), c.scheduleHandlers(this)))
                },
                _resolve: function(a) {
                    this._updateStatus(1, a)
                },
                _reject: function(a) {
                    this._updateStatus(2, a)
                },
                then: function(b, d) {
                    var e = new a(function(a, b) {
                        this.reject = this.resolve = b
                    });
                    this._handlers.push({
                        thisPromise: this,
                        onResolve: b,
                        onReject: d,
                        nextPromise: e
                    });
                    c.scheduleHandlers(this);
                    return e
                },
                "catch": function(a) {
                    return this.then(void 0, a)
                }
            };
            t.Promise = a
        }
    })();
    var O = function() {
        function a() {
            this.started = {};
            this.times = [];
            this.enabled = !0
        }
        a.prototype = {
            time: function(a) {
                this.enabled && (a in this.started && g("Timer is already running for " + a), this.started[a] = Date.now())
            },
            timeEnd: function(a) {
                this.enabled && (a in this.started || g("Timer has not been started for " + a), this.times.push({
                        name: a,
                        start: this.started[a],
                        end: Date.now()
                    }),
                    delete this.started[a])
            },
            toString: function() {
                var a, b, c = this.times,
                    d = "",
                    e = 0;
                a = 0;
                for (b = c.length; a < b; ++a) {
                    var f = c[a].name;
                    f.length > e && (e = f.length)
                }
                a = 0;
                for (b = c.length; a < b; ++a) {
                    for (var g = c[a], f = g.end - g.start, g = g.name; g.length < e;) g += " ";
                    d += g + " " + f + "ms\n"
                }
                return d
            }
        };
        return a
    }();
    PDFJS.createBlob = function(a, b) {
        if ("undefined" !== typeof Blob) return new Blob([a], {
            type: b
        });
        var c = new MozBlobBuilder;
        c.append(a);
        return c.getBlob(b)
    };
    PDFJS.createObjectURL = function() {
        return function(a, b) {
            if (!PDFJS.disableCreateObjectURL &&
                "undefined" !== typeof URL && URL.createObjectURL) {
                var c = PDFJS.createBlob(a, b);
                return URL.createObjectURL(c)
            }
            for (var c = "data:" + b + ";base64,", d = 0, e = a.length; d < e; d += 3) var f = a[d] & 255,
                g = a[d + 1] & 255,
                h = a[d + 2] & 255,
                c = c + ("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [f >> 2] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [(f & 3) << 4 | g >> 4] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [d + 1 < e ? (g & 15) << 2 | h >> 6 : 64] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" [d +
                    2 < e ? h & 63 : 64
                ]);
            return c
        }
    }();
    x.prototype = {
        on: function(a, b, c) {
            var d = this.actionHandler;
            d[a] && f('There is already an actionName called "' + a + '"');
            d[a] = [b, c]
        },
        send: function(a, b, c) {
            this.postMessage({
                action: a,
                data: b
            }, c)
        },
        sendWithPromise: function(a, b, c) {
            var d = this.callbackIndex++;
            a = {
                action: a,
                data: b,
                callbackId: d
            };
            b = u();
            this.callbacksCapabilities[d] = b;
            try {
                this.postMessage(a, c)
            } catch (e) {
                b.reject(e)
            }
            return b.promise
        },
        postMessage: function(a, b) {
            b && this.postMessageTransfers ? this.comObj.postMessage(a, b) : this.comObj.postMessage(a)
        }
    };
    var K = ["Link", "Text", "Widget"],
        L = function() {
            function c(a, b, d) {
                var e = H.getAxialAlignedBoundingBox(b, d);
                b = e[0];
                d = e[1];
                var f = e[2],
                    e = e[3];
                if (b === f || d === e) return [1, 0, 0, 1, a[0], a[1]];
                f = (a[2] - a[0]) / (f - b);
                e = (a[3] - a[1]) / (e - d);
                return [f, 0, 0, e, a[0] - b * f, a[1] - d * e]
            }

            function d(b) {
                if (b.data) this.data = b.data;
                else {
                    var c = b.dict,
                        e = this.data = {};
                    e.subtype = c.get("Subtype").name;
                    var f = c.get("Rect") || [0, 0, 0, 0];
                    e.rect = H.normalizeRect(f);
                    e.annotationFlags = c.get("F");
                    f = c.get("C");
                    w(f) && 3 === f.length ? e.color = f : e.color = [0, 0, 0];
                    if (c.has("BS")) f =
                        c.get("BS"), e.borderWidth = f.has("W") ? f.get("W") : 1;
                    else if (f = c.get("Border") || [0, 0, 1], e.borderWidth = f[2] || 0, f = f[3], 0 < e.borderWidth && f)
                        if (w(f)) {
                            var g = f.length;
                            if (0 < g) {
                                for (var h = !1, m = 0, k = 0; k < g; k++)
                                    if (0 <= +f[k]) 0 < f[k] && m++;
                                    else {
                                        h = !0;
                                        break
                                    }
                                if (h || 0 === m) e.borderWidth = 0
                            }
                        } else e.borderWidth = 0;
                    var p, f = c.get("AP");
                    a(f) ? (f = f.get("N"), a(f) ? (c = c.get("AS")) && f.has(c.name) && (p = f.get(c.name)) : p = f) : p = void 0;
                    this.appearance = p;
                    e.hasAppearance = !!this.appearance;
                    e.id = b.ref.num
                }
            }
            d.prototype = {
                getData: function() {
                    return this.data
                },
                hasHtml: function() {
                    return !1
                },
                getHtmlElement: function(a) {
                    throw new D("getHtmlElement() should be implemented in subclass");
                },
                getEmptyContainer: function(a, b, c) {
                    E && f("getEmptyContainer() should be called from main thread");
                    c = c || 0;
                    b = b || this.data.rect;
                    a = document.createElement(a);
                    a.style.borderWidth = c + "px";
                    var d = b[3] - b[1] - 2 * c;
                    a.style.width = b[2] - b[0] - 2 * c + "px";
                    a.style.height = d + "px";
                    return a
                },
                isInvisible: function() {
                    var a = this.data;
                    return a && -1 !== K.indexOf(a.subtype) ? !1 : !!(a && a.annotationFlags && a.annotationFlags &
                        1)
                },
                isViewable: function() {
                    var a = this.data;
                    return !(this.isInvisible() || !a || a.annotationFlags && a.annotationFlags & 34 || !a.rect)
                },
                isPrintable: function() {
                    var a = this.data;
                    return !!(!this.isInvisible() && a && a.annotationFlags && a.annotationFlags & 4 && a.rect)
                },
                loadResources: function(a) {
                    return new Promise(function(b, c) {
                        this.appearance.dict.getAsync("Resources").then(function(d) {
                            d ? (new ObjectLoader(d.map, a, d.xref)).load().then(function() {
                                b(d)
                            }, c) : b()
                        }, c)
                    }.bind(this))
                },
                getOperatorList: function(a) {
                    if (!this.appearance) return Promise.resolve(new OperatorList);
                    var b = this.data,
                        d = this.appearance.dict,
                        e = this.loadResources("ExtGState ColorSpace Pattern Shading XObject Font".split(" ")),
                        f = d.get("BBox") || [0, 0, 1, 1],
                        g = d.get("Matrix") || [1, 0, 0, 1, 0, 0],
                        h = c(b.rect, f, g),
                        m = this;
                    return e.then(function(c) {
                        var d = new OperatorList;
                        d.addOp(C.beginAnnotation, [b.rect, h, g]);
                        return a.getOperatorList(m.appearance, c, d).then(function() {
                            d.addOp(C.endAnnotation, []);
                            m.appearance.reset();
                            return d
                        })
                    })
                }
            };
            d.getConstructor = function(a, b) {
                if (a) {
                    if ("Link" === a) return V;
                    if ("Text" === a) return U;
                    if ("Widget" === a) {
                        if (b) return "Tx" === b ? Q : M
                    } else return d
                }
            };
            d.fromData = function(a) {
                var b = d.getConstructor(a.subtype, a.fieldType);
                if (b) return new b({
                    data: a
                })
            };
            d.fromRef = function(c, e) {
                var f = c.fetchIfRef(e);
                if (a(f)) {
                    var h = f.get("Subtype");
                    if (h = b(h) ? h.name : "") {
                        var m = H.getInheritableProperty(f, "FT"),
                            m = b(m) ? m.name : "";
                        if (m = d.getConstructor(h, m)) {
                            f = new m({
                                dict: f,
                                ref: e
                            });
                            if (f.isViewable() || f.isPrintable()) return f;
                            g("unimplemented annotation type: " + h)
                        }
                    }
                }
            };
            d.appendToOperatorList = function(a, b, c, d, e) {
                var f = u();
                c = [];
                for (var g = 0, h = a.length; g < h; ++g)("display" === e && a[g].isViewable() || "print" === e && a[g].isPrintable()) && c.push(a[g].getOperatorList(d));
                Promise.all(c).then(function(a) {
                    b.addOp(C.beginAnnotations, []);
                    for (var c = 0, d = a.length; c < d; ++c) b.addOpList(a[c]);
                    b.addOp(C.endAnnotations, []);
                    f.resolve()
                }, function(a) {
                    f.reject(a)
                });
                return f.promise
            };
            return d
        }();
    PDFJS.Annotation = L;
    var M = function() {
            function a(c) {
                L.call(this, c);
                if (!c.data) {
                    var d = c.dict,
                        e = this.data;
                    e.fieldValue = h(H.getInheritableProperty(d, "V") || "");
                    e.alternativeText = h(d.get("TU") || "");
                    e.defaultAppearance = H.getInheritableProperty(d, "DA") || "";
                    var f = H.getInheritableProperty(d, "FT");
                    e.fieldType = b(f) ? f.name : "";
                    e.fieldFlags = H.getInheritableProperty(d, "Ff") || 0;
                    this.fieldResources = H.getInheritableProperty(d, "DR") || Dict.empty;
                    var f = [],
                        g = d;
                    for (c = c.ref; g;) {
                        var d = g.get("Parent"),
                            m = g.getRaw("Parent");
                        if (g = g.get("T")) f.unshift(h(g));
                        else {
                            var g = d.get("Kids"),
                                k, p;
                            k = 0;
                            for (p = g.length; k < p; k++) {
                                var r = g[k];
                                if (r.num == c.num && r.gen == c.gen) break
                            }
                            f.unshift("`" + k)
                        }
                        g =
                            d;
                        c = m
                    }
                    e.fullName = f.join(".")
                }
            }
            var c = L.prototype;
            H.inherit(a, L, {
                isViewable: function() {
                    return "Sig" === this.data.fieldType ? (g("unimplemented annotation type: Widget signature"), !1) : c.isViewable.call(this)
                }
            });
            return a
        }(),
        Q = function() {
            function a(b) {
                M.call(this, b);
                b.data || (this.data.textAlignment = H.getInheritableProperty(b.dict, "Q"))
            }
            H.inherit(a, M, {
                hasHtml: function() {
                    return !this.data.hasAppearance && !!this.data.fieldValue
                },
                getHtmlElement: function(a) {
                    E && f("getHtmlElement() shall be called from main thread");
                    var b = this.data,
                        c = this.getEmptyContainer("div");
                    c.style.display = "table";
                    var d = document.createElement("div");
                    d.textContent = b.fieldValue;
                    d.style.textAlign = ["left", "center", "right"][b.textAlignment];
                    d.style.verticalAlign = "middle";
                    d.style.display = "table-cell";
                    a = b.fontRefName ? a.getData(b.fontRefName) : null;
                    var e = d.style;
                    e.fontSize = b.fontSize + "px";
                    e.direction = 0 > b.fontDirection ? "rtl" : "ltr";
                    a && (e.fontWeight = a.black ? a.bold ? "bolder" : "bold" : a.bold ? "bold" : "normal", e.fontStyle = a.italic ? "italic" : "normal", b = a.loadedName,
                        e.fontFamily = (b ? '"' + b + '", ' : "") + (a.fallbackName || "Helvetica, sans-serif"));
                    c.appendChild(d);
                    return c
                },
                getOperatorList: function(a) {
                    if (this.appearance) return L.prototype.getOperatorList.call(this, a);
                    var b = new OperatorList,
                        d = this.data;
                    if (!d.defaultAppearance) return Promise.resolve(b);
                    d = new Stream(c(d.defaultAppearance));
                    return a.getOperatorList(d, this.fieldResources, b).then(function() {
                        return b
                    })
                }
            });
            return a
        }(),
        R = function() {
            function a(b) {
                L.call(this, b)
            }
            H.inherit(a, L, {
                hasHtml: function() {
                    return !0
                },
                highlight: function() {
                    this.highlightElement &&
                        this.highlightElement.hasAttribute("hidden") && this.highlightElement.removeAttribute("hidden")
                },
                unhighlight: function() {
                    this.highlightElement && !this.highlightElement.hasAttribute("hidden") && this.highlightElement.setAttribute("hidden", !0)
                },
                initContainer: function() {
                    for (var a = this.data, b = this.getEmptyContainer("section", a.rect, a.borderWidth), c = b.style.backgroundColor = a.color, d = [], e = 0; 3 > e; ++e) d[e] = Math.round(255 * c[e]);
                    a.colorCssRgb = H.makeCssRgb(d);
                    a = document.createElement("div");
                    a.className = "annotationHighlight";
                    a.style.left = a.style.top = "-4px";
                    a.style.right = a.style.bottom = "-4px";
                    a.setAttribute("hidden", !0);
                    this.highlightElement = a;
                    b.appendChild(this.highlightElement);
                    return b
                }
            });
            return a
        }(),
        U = function() {
            function a(b) {
                R.call(this, b);
                if (!b.data) {
                    b = b.dict;
                    var c = this.data,
                        d = b.get("Contents"),
                        e = b.get("T");
                    c.content = h(d || "");
                    c.title = h(e || "");
                    c.hasAppearance ? c.name = "NoIcon" : (c.rect[1] = c.rect[3] - 22, c.rect[2] = c.rect[0] + 22, c.name = b.has("Name") ? b.get("Name").name : "Note");
                    b.has("C") && (c.hasBgColor = !0)
                }
            }
            H.inherit(a, R, {
                getHtmlElement: function(a) {
                    E && f("getHtmlElement() shall be called from main thread");
                    var b = this.data,
                        c = b.rect;
                    10 > c[3] - c[1] && (c[3] = c[1] + 10);
                    10 > c[2] - c[0] && (c[2] = c[0] + (c[3] - c[1]));
                    var d = this.initContainer();
                    d.className = "annotText";
                    a = document.createElement("img");
                    a.style.height = d.style.height;
                    a.style.width = d.style.width;
                    var e = b.name;
                    a.src = PDFJS.imageResourcesPath + "annotation-" + e.toLowerCase() + ".svg";
                    a.alt = "[{{type}} Annotation]";
                    a.dataset.l10nId = "text_annotation_type";
                    a.dataset.l10nArgs = JSON.stringify({
                        type: e
                    });
                    e = document.createElement("div");
                    e.className = "annotTextContentWrapper";
                    e.style.left = Math.floor(c[2] - c[0] + 5) + "px";
                    e.style.top = "-10px";
                    var g = document.createElement("div");
                    g.className = "annotTextContent";
                    g.setAttribute("hidden", !0);
                    if (b.hasBgColor) {
                        for (var h = b.color, m = [], c = 0; 3 > c; ++c) {
                            var k = Math.round(255 * h[c]);
                            m[c] = Math.round(.7 * (255 - k)) + k
                        }
                        g.style.backgroundColor = H.makeCssRgb(m)
                    }
                    h = document.createElement("h1");
                    m = document.createElement("p");
                    h.textContent = b.title;
                    if (b.content || b.title) {
                        for (var k = document.createElement("span"),
                                p = b.content.split(/(?:\r\n?|\n)/), c = 0, b = p.length; c < b; ++c) k.appendChild(document.createTextNode(p[c])), c < b - 1 && k.appendChild(document.createElement("br"));
                        m.appendChild(k);
                        var r = !1,
                            l = function(a) {
                                a && (r = !0);
                                g.hasAttribute("hidden") && (d.style.zIndex += 1, g.removeAttribute("hidden"))
                            },
                            t = function(a) {
                                a && (r = !1);
                                g.hasAttribute("hidden") || r || (--d.style.zIndex, g.setAttribute("hidden", !0))
                            };
                        a.addEventListener("click", function() {
                            r ? t(!0) : l(!0)
                        }, !1);
                        a.addEventListener("mouseover", function() {
                            l()
                        }, !1);
                        a.addEventListener("mouseout",
                            function() {
                                t()
                            }, !1);
                        g.addEventListener("click", function() {
                            t(!0)
                        }, !1)
                    } else g.setAttribute("hidden", !0);
                    g.appendChild(h);
                    g.appendChild(m);
                    e.appendChild(g);
                    d.appendChild(a);
                    d.appendChild(e);
                    return d
                }
            });
            return a
        }(),
        V = function() {
            function c(e) {
                R.call(this, e);
                if (!e.data) {
                    var f = e.dict;
                    e = this.data;
                    var h = f.get("A");
                    if (h)
                        if (f = h.get("S").name, "URI" === f) {
                            var m = h.get("URI");
                            b(m) ? m = "/" + m.name : m && (m = m && 0 === m.indexOf("www.") ? "http://" + m : m);
                            d(m, !1) || (m = "");
                            e.url = m
                        } else "GoTo" === f ? e.dest = h.get("D") : "GoToR" === f ? (f = h.get("F"),
                            a(f) && (m = f.get("F") || ""), d(m, !1) || (m = ""), e.url = m, e.dest = h.get("D")) : "Named" === f ? e.action = h.get("N").name : g("unrecognized link type: " + f);
                    else f.has("Dest") && (m = f.get("Dest"), e.dest = b(m) ? m.name : m)
                }
            }
            H.inherit(c, R, {
                hasOperatorList: function() {
                    return !1
                },
                getHtmlElement: function(a) {
                    a = this.initContainer();
                    a.className = "annotLink";
                    a.style.borderColor = this.data.colorCssRgb;
                    a.style.borderStyle = "solid";
                    var b = document.createElement("a");
                    b.href = b.title = this.data.url || "";
                    a.appendChild(b);
                    return a
                }
            });
            return c
        }();
    PDFJS.maxImageSize = void 0 === PDFJS.maxImageSize ? -1 : PDFJS.maxImageSize;
    PDFJS.cMapUrl = void 0 === PDFJS.cMapUrl ? null : PDFJS.cMapUrl;
    PDFJS.cMapPacked = void 0 === PDFJS.cMapPacked ? !1 : PDFJS.cMapPacked;
    PDFJS.disableFontFace = void 0 === PDFJS.disableFontFace ? !1 : PDFJS.disableFontFace;
    PDFJS.imageResourcesPath = void 0 === PDFJS.imageResourcesPath ? "" : PDFJS.imageResourcesPath;
    PDFJS.disableWorker = void 0 === PDFJS.disableWorker ? !1 : PDFJS.disableWorker;
    PDFJS.workerSrc = void 0 === PDFJS.workerSrc ? null : PDFJS.workerSrc;
    PDFJS.disableRange =
        void 0 === PDFJS.disableRange ? !1 : PDFJS.disableRange;
    PDFJS.disableAutoFetch = void 0 === PDFJS.disableAutoFetch ? !1 : PDFJS.disableAutoFetch;
    PDFJS.pdfBug = void 0 === PDFJS.pdfBug ? !1 : PDFJS.pdfBug;
    PDFJS.postMessageTransfers = void 0 === PDFJS.postMessageTransfers ? !0 : PDFJS.postMessageTransfers;
    PDFJS.disableCreateObjectURL = void 0 === PDFJS.disableCreateObjectURL ? !1 : PDFJS.disableCreateObjectURL;
    PDFJS.disableWebGL = void 0 === PDFJS.disableWebGL ? !0 : PDFJS.disableWebGL;
    PDFJS.verbosity = void 0 === PDFJS.verbosity ? PDFJS.VERBOSITY_LEVELS.warnings :
        PDFJS.verbosity;
    PDFJS.getDocument = function(a, b, c, d) {
        var e, g;
        "string" === typeof a ? a = {
            url: a
        } : "object" == typeof a && null !== a && void 0 !== a && "byteLength" in a ? a = {
            data: a
        } : "object" !== typeof a && f("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");
        a.url || a.data || f("Invalid parameter array, need either .data or .url");
        var h = {};
        for (e in a) h[e] = "url" === e && "undefined" !== typeof window ? l(window.location.href, a[e]) : a[e];
        a = u();
        e = u();
        g = new N(a, e, b, d);
        a.promise.then(function() {
            g.passwordCallback =
                c;
            g.fetchDocument(h)
        });
        return e.promise
    };
    var P = function() {
            function a(b, c) {
                this.pdfInfo = b;
                this.transport = c
            }
            a.prototype = {get numPages() {
                    return this.pdfInfo.numPages
                },
                get fingerprint() {
                    return this.pdfInfo.fingerprint
                },
                getPage: function(a) {
                    return this.transport.getPage(a)
                },
                getPageIndex: function(a) {
                    return this.transport.getPageIndex(a)
                },
                getDestinations: function() {
                    return this.transport.getDestinations()
                },
                getAttachments: function() {
                    return this.transport.getAttachments()
                },
                getJavaScript: function() {
                    return this.transport.getJavaScript()
                },
                getOutline: function() {
                    return this.transport.getOutline()
                },
                getMetadata: function() {
                    return this.transport.getMetadata()
                },
                getData: function() {
                    return this.transport.getData()
                },
                getDownloadInfo: function() {
                    return this.transport.downloadInfoCapability.promise
                },
                cleanup: function() {
                    this.transport.startCleanup()
                },
                destroy: function() {
                    this.transport.destroy()
                }
            };
            return a
        }(),
        X = function() {
            function a(b, c, d) {
                this.pageIndex = b;
                this.pageInfo = c;
                this.transport = d;
                this.stats = new O;
                this.stats.enabled = !!t.PDFJS.enableStats;
                this.commonObjs =
                    d.commonObjs;
                this.objs = new W;
                this.pendingDestroy = this.cleanupAfterRender = !1;
                this.intentStates = {}
            }
            a.prototype = {get pageNumber() {
                    return this.pageIndex + 1
                },
                get rotate() {
                    return this.pageInfo.rotate
                },
                get ref() {
                    return this.pageInfo.ref
                },
                get view() {
                    return this.pageInfo.view
                },
                getViewport: function(a, b) {
                    2 > arguments.length && (b = this.rotate);
                    return new PDFJS.PageViewport(this.view, a, b, 0, 0)
                },
                getAnnotations: function() {
                    return this.annotationsPromise ? this.annotationsPromise : this.annotationsPromise = this.transport.getAnnotations(this.pageIndex)
                },
                render: function(a) {
                    function b(a) {
                        var d = e.renderTasks.indexOf(f);
                        0 <= d && e.renderTasks.splice(d, 1);
                        g.cleanupAfterRender && (g.pendingDestroy = !0);
                        g._tryDestroy();
                        a ? f.capability.reject(a) : f.capability.resolve();
                        c.timeEnd("Rendering");
                        c.timeEnd("Overall")
                    }
                    var c = this.stats;
                    c.time("Overall");
                    this.pendingDestroy = !1;
                    var d = "intent" in a ? "print" == a.intent ? "print" : "display" : "display";
                    this.intentStates[d] || (this.intentStates[d] = {});
                    var e = this.intentStates[d];
                    e.displayReadyCapability || (e.receivingOperatorList = !0, e.displayReadyCapability =
                        u(), e.operatorList = {
                            fnArray: [],
                            argsArray: [],
                            lastChunk: !1
                        }, this.stats.time("Page Request"), this.transport.messageHandler.send("RenderPageRequest", {
                            pageIndex: this.pageNumber - 1,
                            intent: d
                        }));
                    var f = new Y(b, a, this.objs, this.commonObjs, e.operatorList, this.pageNumber);
                    e.renderTasks || (e.renderTasks = []);
                    e.renderTasks.push(f);
                    a = new T(f);
                    var g = this;
                    e.displayReadyCapability.promise.then(function(a) {
                        g.pendingDestroy ? b() : (c.time("Rendering"), f.initalizeGraphics(a), f.operatorListChanged())
                    }, function(a) {
                        b(a)
                    });
                    return a
                },
                getTextContent: function() {
                    return this.transport.messageHandler.sendWithPromise("GetTextContent", {
                        pageIndex: this.pageNumber - 1
                    })
                },
                destroy: function() {
                    this.pendingDestroy = !0;
                    this._tryDestroy()
                },
                _tryDestroy: function() {
                    this.pendingDestroy && !Object.keys(this.intentStates).some(function(a) {
                        a = this.intentStates[a];
                        return 0 !== a.renderTasks.length || a.receivingOperatorList
                    }, this) && (Object.keys(this.intentStates).forEach(function(a) {
                            delete this.intentStates[a]
                        }, this), this.objs.clear(), this.annotationsPromise = null,
                        this.pendingDestroy = !1)
                },
                _startRenderPage: function(a, b) {
                    this.intentStates[b].displayReadyCapability.resolve(a)
                },
                _renderPageChunk: function(a, b) {
                    var c = this.intentStates[b],
                        d, e;
                    d = 0;
                    for (e = a.length; d < e; d++) c.operatorList.fnArray.push(a.fnArray[d]), c.operatorList.argsArray.push(a.argsArray[d]);
                    c.operatorList.lastChunk = a.lastChunk;
                    for (d = 0; d < c.renderTasks.length; d++) c.renderTasks[d].operatorListChanged();
                    a.lastChunk && (c.receivingOperatorList = !1, this._tryDestroy())
                }
            };
            return a
        }(),
        N = function() {
            function a(b,
                c, d, e) {
                this.pdfDataRangeTransport = d;
                this.workerReadyCapability = c;
                this.progressCallback = e;
                this.commonObjs = new W;
                this.pageCache = [];
                this.pagePromises = [];
                this.downloadInfoCapability = u();
                this.passwordCallback = null;
                if (!t.PDFJS.disableWorker && "undefined" !== typeof Worker) {
                    (c = PDFJS.workerSrc) || f("No PDFJS.workerSrc specified");
                    try {
                        var g = new Worker(c),
                            h = new x("main", g);
                        this.messageHandler = h;
                        h.on("test", function(a) {
                            a && a.supportTypedArray ? (this.worker = g, a.supportTransfers || (PDFJS.postMessageTransfers = !1), this.setupMessageHandler(h),
                                b.resolve()) : (t.PDFJS.disableWorker = !0, this.loadFakeWorkerFiles().then(function() {
                                this.setupFakeWorker();
                                b.resolve()
                            }.bind(this)))
                        }.bind(this));
                        var m = new Uint8Array([PDFJS.postMessageTransfers ? 255 : 0]);
                        try {
                            h.send("test", m, [m.buffer])
                        } catch (p) {
                            k("Cannot use postMessage transfers"), m[0] = 0, h.send("test", m)
                        }
                        return
                    } catch (r) {
                        k("The worker has been disabled.")
                    }
                }
                t.PDFJS.disableWorker = !0;
                this.loadFakeWorkerFiles().then(function() {
                    this.setupFakeWorker();
                    b.resolve()
                }.bind(this))
            }
            a.prototype = {
                destroy: function() {
                    this.pageCache = [];
                    this.pagePromises = [];
                    var a = this;
                    this.messageHandler.sendWithPromise("Terminate", null).then(function() {
                        aa.clear();
                        a.worker && a.worker.terminate()
                    })
                },
                loadFakeWorkerFiles: function() {
                    PDFJS.fakeWorkerFilesLoadedCapability || (PDFJS.fakeWorkerFilesLoadedCapability = u(), H.loadScript(PDFJS.workerSrc));
                    return PDFJS.fakeWorkerFilesLoadedCapability.promise
                },
                setupFakeWorker: function() {
                    g("Setting up fake worker.");
                    var a = {
                            postMessage: function(b) {
                                a.onmessage({
                                    data: b
                                })
                            },
                            terminate: function() {}
                        },
                        b = new x("main", a);
                    this.setupMessageHandler(b);
                    PDFJS.WorkerMessageHandler.setup(b)
                },
                setupMessageHandler: function(a) {
                    function b(c) {
                        a.send("UpdatePassword", c)
                    }
                    this.messageHandler = a;
                    var c = this.pdfDataRangeTransport;
                    c && (c.addRangeListener(function(b, c) {
                        a.send("OnDataRange", {
                            begin: b,
                            chunk: c
                        })
                    }), c.addProgressListener(function(b) {
                        a.send("OnDataProgress", {
                            loaded: b
                        })
                    }), a.on("RequestDataRange", function(a) {
                        c.requestDataRange(a.begin, a.end)
                    }, this));
                    a.on("GetDoc", function(a) {
                        var b = a.pdfInfo;
                        this.numPages = a.pdfInfo.numPages;
                        this.pdfDocument = a = new P(b, this);
                        this.workerReadyCapability.resolve(a)
                    }, this);
                    a.on("NeedPassword", function(a) {
                        if (this.passwordCallback) return this.passwordCallback(b, B.NEED_PASSWORD);
                        this.workerReadyCapability.reject(a.exception.message, a.exception)
                    }, this);
                    a.on("IncorrectPassword", function(a) {
                        if (this.passwordCallback) return this.passwordCallback(b, B.INCORRECT_PASSWORD);
                        this.workerReadyCapability.reject(a.exception.message, a.exception)
                    }, this);
                    a.on("InvalidPDF", function(a) {
                            this.workerReadyCapability.reject(a.exception.name, a.exception)
                        },
                        this);
                    a.on("MissingPDF", function(a) {
                        this.workerReadyCapability.reject(a.exception.message, a.exception)
                    }, this);
                    a.on("UnknownError", function(a) {
                        this.workerReadyCapability.reject(a.exception.message, a.exception)
                    }, this);
                    a.on("DataLoaded", function(a) {
                        this.downloadInfoCapability.resolve(a)
                    }, this);
                    a.on("StartRenderPage", function(a) {
                        var b = this.pageCache[a.pageIndex];
                        b.stats.timeEnd("Page Request");
                        b._startRenderPage(a.transparency, a.intent)
                    }, this);
                    a.on("RenderPageChunk", function(a) {
                        this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,
                            a.intent)
                    }, this);
                    a.on("commonobj", function(a) {
                        var b = a[0],
                            c = a[1];
                        if (!this.commonObjs.hasData(b)) switch (c) {
                            case "Font":
                                a = a[2];
                                var d;
                                if ("error" in a) {
                                    var e = a.error;
                                    g("Error during font loading: " + e);
                                    this.commonObjs.resolve(b, e);
                                    break
                                } else d = new qa(a);
                                aa.bind([d], function(a) {
                                    this.commonObjs.resolve(b, d)
                                }.bind(this));
                                break;
                            case "FontPath":
                                this.commonObjs.resolve(b, a[2]);
                                break;
                            default:
                                e("Got unknown common object type " + c)
                        }
                    }, this);
                    a.on("obj", function(a) {
                        var b = a[0],
                            c = a[2],
                            d = this.pageCache[a[1]];
                        if (!d.objs.hasData(b)) switch (c) {
                            case "JpegStream":
                                a =
                                    a[3];
                                p(b, a, d.objs);
                                break;
                            case "Image":
                                a = a[3];
                                d.objs.resolve(b, a);
                                a && "data" in a && 8E6 < a.data.length && (d.cleanupAfterRender = !0);
                                break;
                            default:
                                f("Got unknown object type " + c)
                        }
                    }, this);
                    a.on("DocProgress", function(a) {
                        this.progressCallback && this.progressCallback({
                            loaded: a.loaded,
                            total: a.total
                        })
                    }, this);
                    a.on("DocError", function(a) {
                        this.workerReadyCapability.reject(a)
                    }, this);
                    a.on("PageError", function(a) {
                        var b = this.pageCache[a.pageNum - 1].intentStates[a.intent];
                        b.displayReadyCapability.promise ? b.displayReadyCapability.reject(a.error) :
                            f(a.error)
                    }, this);
                    a.on("JpegDecode", function(a) {
                        var b = a[0],
                            c = a[1];
                        return 3 != c && 1 != c ? Promise.reject(Error("Only 3 components or 1 component can be returned")) : new Promise(function(a, d) {
                            var e = new Image;
                            e.onload = function() {
                                var b = e.width,
                                    d = e.height,
                                    f = b * d,
                                    g = 4 * f,
                                    f = new Uint8Array(f * c),
                                    h = m(b, d).getContext("2d");
                                h.drawImage(e, 0, 0);
                                var h = h.getImageData(0, 0, b, d).data,
                                    k, p;
                                if (3 == c)
                                    for (p = k = 0; k < g; k += 4, p += 3) f[p] = h[k], f[p + 1] = h[k + 1], f[p + 2] = h[k + 2];
                                else if (1 == c)
                                    for (p = k = 0; k < g; k += 4, p++) f[p] = h[k];
                                a({
                                    data: f,
                                    width: b,
                                    height: d
                                })
                            };
                            e.onerror = function() {
                                d(Error("JpegDecode failed to load image"))
                            };
                            e.src = b
                        })
                    })
                },
                fetchDocument: function(a) {
                    a.disableAutoFetch = PDFJS.disableAutoFetch;
                    a.chunkedViewerLoading = !!this.pdfDataRangeTransport;
                    this.messageHandler.send("GetDocRequest", {
                        source: a,
                        disableRange: PDFJS.disableRange,
                        maxImageSize: PDFJS.maxImageSize,
                        cMapUrl: PDFJS.cMapUrl,
                        cMapPacked: PDFJS.cMapPacked,
                        disableFontFace: PDFJS.disableFontFace,
                        disableCreateObjectURL: PDFJS.disableCreateObjectURL,
                        verbosity: PDFJS.verbosity
                    })
                },
                getData: function() {
                    return this.messageHandler.sendWithPromise("GetData",
                        null)
                },
                getPage: function(a, b) {
                    if (0 >= a || a > this.numPages || (a | 0) !== a) return Promise.reject(Error("Invalid page request"));
                    var c = a - 1;
                    if (c in this.pagePromises) return this.pagePromises[c];
                    var d = this.messageHandler.sendWithPromise("GetPage", {
                        pageIndex: c
                    }).then(function(a) {
                        a = new X(c, a, this);
                        return this.pageCache[c] = a
                    }.bind(this));
                    return this.pagePromises[c] = d
                },
                getPageIndex: function(a) {
                    return this.messageHandler.sendWithPromise("GetPageIndex", {
                        ref: a
                    })
                },
                getAnnotations: function(a) {
                    return this.messageHandler.sendWithPromise("GetAnnotations", {
                        pageIndex: a
                    })
                },
                getDestinations: function() {
                    return this.messageHandler.sendWithPromise("GetDestinations", null)
                },
                getAttachments: function() {
                    return this.messageHandler.sendWithPromise("GetAttachments", null)
                },
                getJavaScript: function() {
                    return this.messageHandler.sendWithPromise("GetJavaScript", null)
                },
                getOutline: function() {
                    return this.messageHandler.sendWithPromise("GetOutline", null)
                },
                getMetadata: function() {
                    return this.messageHandler.sendWithPromise("GetMetadata", null).then(function(a) {
                        return {
                            info: a[0],
                            metadata: a[1] ?
                                new PDFJS.Metadata(a[1]) : null
                        }
                    })
                },
                startCleanup: function() {
                    this.messageHandler.sendWithPromise("Cleanup", null).then(function() {
                        for (var a = 0, b = this.pageCache.length; a < b; a++) {
                            var c = this.pageCache[a];
                            c && c.destroy()
                        }
                        this.commonObjs.clear();
                        aa.clear()
                    }.bind(this))
                }
            };
            return a
        }(),
        W = function() {
            function a() {
                this.objs = {}
            }
            a.prototype = {
                ensureObj: function(a) {
                    if (this.objs[a]) return this.objs[a];
                    var b = {
                        capability: u(),
                        data: null,
                        resolved: !1
                    };
                    return this.objs[a] = b
                },
                get: function(a, b) {
                    if (b) return this.ensureObj(a).capability.promise.then(b),
                        null;
                    var c = this.objs[a];
                    c && c.resolved || f("Requesting object that isn't resolved yet " + a);
                    return c.data
                },
                resolve: function(a, b) {
                    var c = this.ensureObj(a);
                    c.resolved = !0;
                    c.data = b;
                    c.capability.resolve(b)
                },
                isResolved: function(a) {
                    var b = this.objs;
                    return b[a] ? b[a].resolved : !1
                },
                hasData: function(a) {
                    return this.isResolved(a)
                },
                getData: function(a) {
                    var b = this.objs;
                    return b[a] && b[a].resolved ? b[a].data : null
                },
                clear: function() {
                    this.objs = {}
                }
            };
            return a
        }(),
        T = function() {
            function a(b) {
                this.internalRenderTask = b;
                this.promise =
                    this.internalRenderTask.capability.promise
            }
            a.prototype = {
                cancel: function() {
                    this.internalRenderTask.cancel()
                },
                then: function(a, b) {
                    return this.promise.then(a, b)
                }
            };
            return a
        }(),
        Y = function() {
            function a(b, c, d, e, f, g) {
                this.callback = b;
                this.params = c;
                this.objs = d;
                this.commonObjs = e;
                this.operatorListIdx = null;
                this.operatorList = f;
                this.pageNumber = g;
                this.running = !1;
                this.graphicsReadyCallback = null;
                this.cancelled = this.graphicsReady = !1;
                this.capability = u();
                this._continueBound = this._continue.bind(this);
                this._scheduleNextBound =
                    this._scheduleNext.bind(this);
                this._nextBound = this._next.bind(this)
            }
            a.prototype = {
                initalizeGraphics: function(a) {
                    if (!this.cancelled) {
                        PDFJS.pdfBug && "StepperManager" in t && t.StepperManager.enabled && (this.stepper = t.StepperManager.create(this.pageNumber - 1), this.stepper.init(this.operatorList), this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint());
                        var b = this.params;
                        this.gfx = new ha(b.canvasContext, this.commonObjs, this.objs, b.imageLayer);
                        this.gfx.beginDrawing(b.viewport, a);
                        this.operatorListIdx = 0;
                        this.graphicsReady = !0;
                        this.graphicsReadyCallback && this.graphicsReadyCallback()
                    }
                },
                cancel: function() {
                    this.running = !1;
                    this.cancelled = !0;
                    this.callback("cancelled")
                },
                operatorListChanged: function() {
                    this.graphicsReady ? (this.stepper && this.stepper.updateOperatorList(this.operatorList), this.running || this._continue()) : this.graphicsReadyCallback || (this.graphicsReadyCallback = this._continueBound)
                },
                _continue: function() {
                    this.running = !0;
                    this.cancelled || (this.params.continueCallback ? this.params.continueCallback(this._scheduleNextBound) :
                        this._scheduleNext())
                },
                _scheduleNext: function() {
                    window.requestAnimationFrame(this._nextBound)
                },
                _next: function() {
                    this.cancelled || (this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper), this.operatorListIdx === this.operatorList.argsArray.length && (this.running = !1, this.operatorList.lastChunk && (this.gfx.endDrawing(), this.callback())))
                }
            };
            return a
        }();
    PDFJS.Metadata = function() {
        function a(b) {
            return b.replace(/>\\376\\377([^<]+)/g, function(a,
                b) {
                for (var c = b.replace(/\\([0-3])([0-7])([0-7])/g, function(a, b, c, d) {
                        return String.fromCharCode(64 * b + 8 * c + 1 * d)
                    }), d = "", e = 0; e < c.length; e += 2) var f = 256 * c.charCodeAt(e) + c.charCodeAt(e + 1),
                    d = d + ("&#x" + (65536 + f).toString(16).substring(1) + ";");
                return ">" + d
            })
        }

        function b(c) {
            "string" === typeof c ? (c = a(c), c = (new DOMParser).parseFromString(c, "application/xml")) : c instanceof Document || f("Metadata: Invalid metadata object");
            this.metaDocument = c;
            this.metadata = {};
            this.parse()
        }
        b.prototype = {
            parse: function() {
                var a = this.metaDocument.documentElement;
                if ("rdf:rdf" !== a.nodeName.toLowerCase())
                    for (a = a.firstChild; a && "rdf:rdf" !== a.nodeName.toLowerCase();) a = a.nextSibling;
                var b = a ? a.nodeName.toLowerCase() : null;
                if (a && "rdf:rdf" === b && a.hasChildNodes()) {
                    var a = a.childNodes,
                        c, d, e, f, g, h;
                    e = 0;
                    for (g = a.length; e < g; e++)
                        if (b = a[e], "rdf:description" === b.nodeName.toLowerCase())
                            for (f = 0, h = b.childNodes.length; f < h; f++) "#text" !== b.childNodes[f].nodeName.toLowerCase() && (c = b.childNodes[f], d = c.nodeName.toLowerCase(), this.metadata[d] = c.textContent.trim())
                }
            },
            get: function(a) {
                return this.metadata[a] ||
                    null
            },
            has: function(a) {
                return "undefined" !== typeof this.metadata[a]
            }
        };
        return b
    }();
    var S = function() {
            var a = {};
            return {
                getCanvas: function(b, c, d, e) {
                    b in a ? (b = a[b], b.canvas.width = c, b.canvas.height = d, b.context.setTransform(1, 0, 0, 1, 0, 0)) : (c = m(c, d), d = c.getContext("2d"), e && v(d), a[b] = b = {
                        canvas: c,
                        context: d
                    });
                    return b
                },
                clear: function() {
                    a = {}
                }
            }
        }(),
        ca = function() {
            function a(b) {
                this.alphaIsShape = !1;
                this.fontSize = 0;
                this.fontSizeScale = 1;
                this.textMatrix = G;
                this.fontMatrix = z;
                this.wordSpacing = this.charSpacing = this.lineY = this.lineX =
                    this.y = this.x = this.leading = 0;
                this.textHScale = 1;
                this.textRise = this.textRenderingMode = 0;
                this.strokeColor = this.fillColor = "#000000";
                this.lineWidth = this.strokeAlpha = this.fillAlpha = 1;
                this.activeSMask = null;
                this.old = b
            }
            a.prototype = {
                clone: function() {
                    return Object.create(this)
                },
                setCurrentPoint: function(a, b) {
                    this.x = a;
                    this.y = b
                }
            };
            return a
        }(),
        ha = function() {
            function a(b, c, d, e) {
                this.ctx = b;
                this.current = new ca;
                this.stateStack = [];
                this.pendingClip = null;
                this.pendingEOFill = !1;
                this.xobjs = this.res = null;
                this.commonObjs = c;
                this.objs = d;
                this.imageLayer = e;
                this.groupStack = [];
                this.baseTransform = this.processingType3 = null;
                this.baseTransformStack = [];
                this.groupLevel = 0;
                this.smaskStack = [];
                this.smaskCounter = 0;
                this.tempSMask = null;
                b && v(b)
            }

            function b(a, c) {
                if ("undefined" !== typeof ImageData && c instanceof ImageData) a.putImageData(c, 0, 0);
                else {
                    var d = c.height,
                        e = c.width,
                        g = d / 16,
                        h = Math.floor(g),
                        g = Math.ceil(g),
                        d = d - 16 * h,
                        m = a.createImageData(e, 16),
                        k = 0,
                        p, r = c.data,
                        l = m.data,
                        t, v, q;
                    if (1 === c.kind) {
                        var y = r.byteLength,
                            l = PDFJS.hasCanvasTypedArrays ? new Uint32Array(l.buffer) :
                            new F(l),
                            u = l.length,
                            x = e + 7 >> 3,
                            w = PDFJS.isLittleEndian || !PDFJS.hasCanvasTypedArrays ? 4278190080 : 255;
                        for (t = 0; t < g; t++) {
                            q = t < h ? 16 : d;
                            for (v = p = 0; v < q; v++) {
                                for (var z = y - k, A = 0, z = z > x ? e : 8 * z - 7, B = z & -8, E = 0, C = 0; A < B; A += 8) C = r[k++], l[p++] = C & 128 ? 4294967295 : w, l[p++] = C & 64 ? 4294967295 : w, l[p++] = C & 32 ? 4294967295 : w, l[p++] = C & 16 ? 4294967295 : w, l[p++] = C & 8 ? 4294967295 : w, l[p++] = C & 4 ? 4294967295 : w, l[p++] = C & 2 ? 4294967295 : w, l[p++] = C & 1 ? 4294967295 : w;
                                for (; A < z; A++) 0 === E && (C = r[k++], E = 128), l[p++] = C & E ? 4294967295 : w, E >>= 1
                            }
                            for (; p < u;) l[p++] = 0;
                            a.putImageData(m,
                                0, 16 * t)
                        }
                    } else if (3 === c.kind) {
                        v = 0;
                        q = 64 * e;
                        for (t = 0; t < h; t++) l.set(r.subarray(k, k + q)), k += q, a.putImageData(m, 0, v), v += 16;
                        t < g && (l.set(r.subarray(k, k + e * d * 4)), a.putImageData(m, 0, v))
                    } else if (2 === c.kind)
                        for (q = 16 * e, t = 0; t < g; t++) {
                            t >= h && (q = d, q *= e);
                            p = 0;
                            for (v = q; v--;) l[p++] = r[k++], l[p++] = r[k++], l[p++] = r[k++], l[p++] = 255;
                            a.putImageData(m, 0, 16 * t)
                        } else f("bad image kind: " + c.kind)
                }
            }

            function c(a, b) {
                for (var d = b.height, e = b.width, f = d / 16, g = Math.floor(f), f = Math.ceil(f), d = d - 16 * g, h = a.createImageData(e, 16), m = 0, k = b.data, p = h.data,
                        r = 0; r < f; r++) {
                    for (var l = r < g ? 16 : d, t = 3, v = 0; v < l; v++)
                        for (var q = 0, y = 0; y < e; y++) {
                            if (!q) var u = k[m++],
                                q = 128;
                            p[t] = u & q ? 0 : 255;
                            t += 4;
                            q >>= 1
                        }
                    a.putImageData(h, 0, 16 * r)
                }
            }

            function d(a, b) {
                for (var c = "strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font".split(" "), e = 0, f = c.length; e < f; e++) {
                    var g = c[e];
                    g in a && (b[g] = a[g])
                }
                "setLineDash" in a ? (b.setLineDash(a.getLineDash()), b.lineDashOffset = a.lineDashOffset) : "mozDash" in a && (b.mozDash = a.mozDash, b.mozDashOffset = a.mozDashOffset)
            }

            function h(a, b, c, d, e, f) {
                f = f ? function(a, b, c, d) {
                    for (var e = d.length, f = 3; f < e; f += 4) {
                        var g = d[f] / 255;
                        if (0 === g) d[f - 3] = a, d[f - 2] = b, d[f - 1] = c;
                        else if (1 > g) {
                            var h = 1 - g;
                            d[f - 3] = d[f - 3] * g + a * h | 0;
                            d[f - 2] = d[f - 2] * g + b * h | 0;
                            d[f - 1] = d[f - 1] * g + c * h | 0
                        }
                    }
                }.bind(null, f[0], f[1], f[2]) : function() {};
                e = "Luminosity" === e ? function(a, b) {
                    for (var c = a.length, d = 3; d < c; d += 4) b[d] = b[d] * (77 * a[d - 3] + 152 * a[d - 2] + 28 * a[d - 1] | 0) >> 16
                } : function(a, b) {
                    for (var c = a.length, d = 3; d < c; d += 4) b[d] = b[d] * a[d] / 255 | 0
                };
                for (var g = Math.min(d, Math.ceil(65536 / c)), m = 0; m < d; m += g) {
                    var k =
                        Math.min(g, d - m),
                        p = a.getImageData(0, m, c, k),
                        k = b.getImageData(0, m, c, k);
                    f(p.data);
                    e(p.data, k.data);
                    a.putImageData(k, 0, m)
                }
            }
            var m = ["butt", "round", "square"],
                p = ["miter", "round", "bevel"],
                l = {},
                t = {};
            a.prototype = {
                beginDrawing: function(a, b) {
                    var c = this.ctx.canvas.width,
                        d = this.ctx.canvas.height;
                    b ? this.ctx.clearRect(0, 0, c, d) : (this.ctx.mozOpaque = !0, this.ctx.save(), this.ctx.fillStyle = "rgb(255, 255, 255)", this.ctx.fillRect(0, 0, c, d), this.ctx.restore());
                    c = a.transform;
                    this.ctx.save();
                    this.ctx.transform.apply(this.ctx,
                        c);
                    this.baseTransform = this.ctx.mozCurrentTransform.slice();
                    this.imageLayer && this.imageLayer.beginLayout()
                },
                executeOperatorList: function(a, b, c, d) {
                    var e = a.argsArray;
                    a = a.fnArray;
                    b = b || 0;
                    var f = e.length;
                    if (f == b) return b;
                    for (var g = Date.now() + 15, h = this.commonObjs, m = this.objs, k;;) {
                        if (d && b === d.nextBreakPoint) return d.breakIt(b, c), b;
                        k = a[b];
                        if (k !== C.dependency) this[k].apply(this, e[b]);
                        else {
                            k = e[b];
                            for (var p = 0, r = k.length; p < r; p++) {
                                var l = k[p],
                                    t = "g_" == l.substring(0, 2);
                                if (!t && !m.isResolved(l)) return m.get(l, c), b;
                                if (t &&
                                    !h.isResolved(l)) return h.get(l, c), b
                            }
                        }
                        b++;
                        if (b == f) return b;
                        if (c && Date.now() > g) return c(), b
                    }
                },
                endDrawing: function() {
                    this.ctx.restore();
                    S.clear();
                    ea.clear();
                    this.imageLayer && this.imageLayer.endLayout()
                },
                setLineWidth: function(a) {
                    this.current.lineWidth = a;
                    this.ctx.lineWidth = a
                },
                setLineCap: function(a) {
                    this.ctx.lineCap = m[a]
                },
                setLineJoin: function(a) {
                    this.ctx.lineJoin = p[a]
                },
                setMiterLimit: function(a) {
                    this.ctx.miterLimit = a
                },
                setDash: function(a, b) {
                    var c = this.ctx;
                    "setLineDash" in c ? (c.setLineDash(a), c.lineDashOffset =
                        b) : (c.mozDash = a, c.mozDashOffset = b)
                },
                setRenderingIntent: function(a) {},
                setFlatness: function(a) {},
                setGState: function(a) {
                    for (var b = 0, c = a.length; b < c; b++) {
                        var d = a[b],
                            e = d[1];
                        switch (d[0]) {
                            case "LW":
                                this.setLineWidth(e);
                                break;
                            case "LC":
                                this.setLineCap(e);
                                break;
                            case "LJ":
                                this.setLineJoin(e);
                                break;
                            case "ML":
                                this.setMiterLimit(e);
                                break;
                            case "D":
                                this.setDash(e[0], e[1]);
                                break;
                            case "RI":
                                this.setRenderingIntent(e);
                                break;
                            case "FL":
                                this.setFlatness(e);
                                break;
                            case "Font":
                                this.setFont(e[0], e[1]);
                                break;
                            case "CA":
                                this.current.strokeAlpha =
                                    d[1];
                                break;
                            case "ca":
                                this.current.fillAlpha = d[1];
                                this.ctx.globalAlpha = d[1];
                                break;
                            case "BM":
                                e && e.name && "Normal" !== e.name ? (d = e.name.replace(/([A-Z])/g, function(a) {
                                    return "-" + a.toLowerCase()
                                }).substring(1), this.ctx.globalCompositeOperation = d, this.ctx.globalCompositeOperation !== d && g('globalCompositeOperation "' + d + '" is not supported')) : this.ctx.globalCompositeOperation = "source-over";
                                break;
                            case "SMask":
                                this.current.activeSMask && this.endSMaskGroup(), this.current.activeSMask = e ? this.tempSMask : null, this.current.activeSMask &&
                                    this.beginSMaskGroup(), this.tempSMask = null
                        }
                    }
                },
                beginSMaskGroup: function() {
                    var a = this.current.activeSMask,
                        b = S.getCanvas("smaskGroupAt" + this.groupLevel, a.canvas.width, a.canvas.height, !0),
                        c = this.ctx,
                        e = c.mozCurrentTransform;
                    this.ctx.save();
                    b = b.context;
                    b.scale(1 / a.scaleX, 1 / a.scaleY);
                    b.translate(-a.offsetX, -a.offsetY);
                    b.transform.apply(b, e);
                    d(c, b);
                    this.ctx = b;
                    this.setGState([
                        ["BM", "Normal"],
                        ["ca", 1],
                        ["CA", 1]
                    ]);
                    this.groupStack.push(c);
                    this.groupLevel++
                },
                endSMaskGroup: function() {
                    var a = this.ctx;
                    this.groupLevel--;
                    var b = this.ctx = this.groupStack.pop(),
                        c = this.current.activeSMask,
                        d = c.canvas,
                        e = c.context;
                    b.setTransform(c.scaleX, 0, 0, c.scaleY, c.offsetX, c.offsetY);
                    var f = c.backdrop || null;
                    ea.isEnabled ? (a = ea.composeSMask(a.canvas, d, {
                        subtype: c.subtype,
                        backdrop: f
                    }), b.setTransform(1, 0, 0, 1, 0, 0), b.drawImage(a, c.offsetX, c.offsetY)) : (h(e, a, d.width, d.height, c.subtype, f), b.drawImage(d, 0, 0));
                    this.ctx.restore()
                },
                save: function() {
                    this.ctx.save();
                    var a = this.current;
                    this.stateStack.push(a);
                    this.current = a.clone();
                    this.current.activeSMask &&
                        (this.current.activeSMask = null)
                },
                restore: function() {
                    var a = this.stateStack.pop();
                    a && (this.current.activeSMask && this.endSMaskGroup(), this.current = a, this.ctx.restore())
                },
                transform: function(a, b, c, d, e, f) {
                    this.ctx.transform(a, b, c, d, e, f)
                },
                constructPath: function(a, b) {
                    for (var c = this.ctx, d = this.current, e = d.x, f = d.y, g = 0, h = 0, m = a.length; g < m; g++) switch (a[g] | 0) {
                        case C.moveTo:
                            e = b[h++];
                            f = b[h++];
                            c.moveTo(e, f);
                            break;
                        case C.lineTo:
                            e = b[h++];
                            f = b[h++];
                            c.lineTo(e, f);
                            break;
                        case C.curveTo:
                            e = b[h + 4];
                            f = b[h + 5];
                            c.bezierCurveTo(b[h],
                                b[h + 1], b[h + 2], b[h + 3], e, f);
                            h += 6;
                            break;
                        case C.curveTo2:
                            c.bezierCurveTo(e, f, b[h], b[h + 1], b[h + 2], b[h + 3]);
                            e = b[h + 2];
                            f = b[h + 3];
                            h += 4;
                            break;
                        case C.curveTo3:
                            e = b[h + 2];
                            f = b[h + 3];
                            c.bezierCurveTo(b[h], b[h + 1], e, f, e, f);
                            h += 4;
                            break;
                        case C.closePath:
                            c.closePath()
                    }
                    d.setCurrentPoint(e, f)
                },
                closePath: function() {
                    this.ctx.closePath()
                },
                rectangle: function(a, b, c, d) {
                    0 === c && (c = this.getSinglePixelWidth());
                    0 === d && (d = this.getSinglePixelWidth());
                    this.ctx.rect(a, b, c, d)
                },
                stroke: function(a) {
                    a = "undefined" !== typeof a ? a : !0;
                    var b = this.ctx,
                        c = this.current.strokeColor;
                    0 === this.current.lineWidth && (b.lineWidth = this.getSinglePixelWidth());
                    b.globalAlpha = this.current.strokeAlpha;
                    c && c.hasOwnProperty("type") && "Pattern" === c.type ? (b.save(), b.strokeStyle = c.getPattern(b, this), b.stroke(), b.restore()) : b.stroke();
                    a && this.consumePath();
                    b.globalAlpha = this.current.fillAlpha
                },
                closeStroke: function() {
                    this.closePath();
                    this.stroke()
                },
                fill: function(a) {
                    a = "undefined" !== typeof a ? a : !0;
                    var b = this.ctx,
                        c = this.current.fillColor,
                        d = !1;
                    c && c.hasOwnProperty("type") && "Pattern" ===
                        c.type && (b.save(), b.fillStyle = c.getPattern(b, this), d = !0);
                    if (this.pendingEOFill) {
                        if (void 0 !== b.mozFillRule) b.mozFillRule = "evenodd", b.fill(), b.mozFillRule = "nonzero";
                        else try {
                            b.fill("evenodd")
                        } catch (e) {
                            b.fill()
                        }
                        this.pendingEOFill = !1
                    } else b.fill();
                    d && b.restore();
                    a && this.consumePath()
                },
                eoFill: function() {
                    this.pendingEOFill = !0;
                    this.fill()
                },
                fillStroke: function() {
                    this.fill(!1);
                    this.stroke(!1);
                    this.consumePath()
                },
                eoFillStroke: function() {
                    this.pendingEOFill = !0;
                    this.fillStroke()
                },
                closeFillStroke: function() {
                    this.closePath();
                    this.fillStroke()
                },
                closeEOFillStroke: function() {
                    this.pendingEOFill = !0;
                    this.closePath();
                    this.fillStroke()
                },
                endPath: function() {
                    this.consumePath()
                },
                clip: function() {
                    this.pendingClip = l
                },
                eoClip: function() {
                    this.pendingClip = t
                },
                beginText: function() {
                    this.current.textMatrix = G;
                    this.current.x = this.current.lineX = 0;
                    this.current.y = this.current.lineY = 0
                },
                endText: function() {
                    var a = this.pendingTextPaths,
                        b = this.ctx;
                    if (void 0 === a) b.beginPath();
                    else {
                        b.save();
                        b.beginPath();
                        for (var c = 0; c < a.length; c++) {
                            var d = a[c];
                            b.setTransform.apply(b,
                                d.transform);
                            b.translate(d.x, d.y);
                            d.addToPath(b, d.fontSize)
                        }
                        b.restore();
                        b.clip();
                        b.beginPath();
                        delete this.pendingTextPaths
                    }
                },
                setCharSpacing: function(a) {
                    this.current.charSpacing = a
                },
                setWordSpacing: function(a) {
                    this.current.wordSpacing = a
                },
                setHScale: function(a) {
                    this.current.textHScale = a / 100
                },
                setLeading: function(a) {
                    this.current.leading = -a
                },
                setFont: function(a, b) {
                    var c = this.commonObjs.get(a),
                        d = this.current;
                    c || f("Can't find font for " + a);
                    d.fontMatrix = c.fontMatrix ? c.fontMatrix : z;
                    0 !== d.fontMatrix[0] && 0 !== d.fontMatrix[3] ||
                        g("Invalid font matrix for font " + a);
                    0 > b ? (b = -b, d.fontDirection = -1) : d.fontDirection = 1;
                    this.current.font = c;
                    this.current.fontSize = b;
                    if (!c.isType3Font) {
                        var d = c.black ? c.bold ? "bolder" : "bold" : c.bold ? "bold" : "normal",
                            e = c.italic ? "italic" : "normal",
                            c = '"' + (c.loadedName || "sans-serif") + '", ' + c.fallbackName,
                            h = 16 <= b ? b : 16;
                        this.current.fontSizeScale = 16 != h ? 1 : b / 16;
                        this.ctx.font = e + " " + d + " " + h + "px " + c
                    }
                },
                setTextRenderingMode: function(a) {
                    this.current.textRenderingMode = a
                },
                setTextRise: function(a) {
                    this.current.textRise = a
                },
                moveText: function(a,
                    b) {
                    this.current.x = this.current.lineX += a;
                    this.current.y = this.current.lineY += b
                },
                setLeadingMoveText: function(a, b) {
                    this.setLeading(-b);
                    this.moveText(a, b)
                },
                setTextMatrix: function(a, b, c, d, e, f) {
                    this.current.textMatrix = [a, b, c, d, e, f];
                    this.current.x = this.current.lineX = 0;
                    this.current.y = this.current.lineY = 0
                },
                nextLine: function() {
                    this.moveText(0, this.current.leading)
                },
                applyTextTransforms: function() {
                    var a = this.ctx,
                        b = this.current;
                    a.transform.apply(a, b.textMatrix);
                    a.translate(b.x, b.y + b.textRise);
                    0 < b.fontDirection ?
                        a.scale(b.textHScale, -1) : a.scale(-b.textHScale, 1)
                },
                paintChar: function(a, b, c) {
                    var d = this.ctx,
                        e = this.current,
                        f = e.font,
                        g = e.fontSize / e.fontSizeScale,
                        h = e.textRenderingMode,
                        e = h & 3,
                        h = !!(h & 4),
                        m;
                    if (f.disableFontFace || h) m = f.getPathGenerator(this.commonObjs, a);
                    f.disableFontFace ? (d.save(), d.translate(b, c), d.beginPath(), m(d, g), 0 !== e && 2 !== e || d.fill(), 1 !== e && 2 !== e || d.stroke(), d.restore()) : (0 !== e && 2 !== e || d.fillText(a, b, c), 1 !== e && 2 !== e || d.strokeText(a, b, c));
                    h && (this.pendingTextPaths || (this.pendingTextPaths = [])).push({
                        transform: d.mozCurrentTransform,
                        x: b,
                        y: c,
                        fontSize: g,
                        addToPath: m
                    })
                },
                get isFontSubpixelAAEnabled() {
                    var a = document.createElement("canvas").getContext("2d");
                    a.scale(1.5, 1);
                    a.fillText("I", 0, 10);
                    for (var a = a.getImageData(0, 0, 10, 10).data, b = !1, c = 3; c < a.length; c += 4)
                        if (0 < a[c] && 255 > a[c]) {
                            b = !0;
                            break
                        }
                    return e(this, "isFontSubpixelAAEnabled", b)
                },
                showText: function(a) {
                    var b = this.ctx,
                        c = this.current,
                        d = c.font,
                        e = c.fontSize,
                        f = c.fontSizeScale,
                        g = c.charSpacing,
                        h = c.wordSpacing,
                        m = c.textHScale * c.fontDirection,
                        k = c.fontMatrix || z,
                        p = a.length,
                        r = d.vertical,
                        l = d.defaultVMetrics,
                        t, v, q;
                    if (0 !== e)
                        if (d.isType3Font) {
                            b.save();
                            b.transform.apply(b, c.textMatrix);
                            b.translate(c.x, c.y);
                            b.scale(m, 1);
                            for (t = 0; t < p; ++t) v = a[t], null === v ? (this.ctx.translate(h, 0), c.x += h * m) : (this.processingType3 = v, this.save(), b.scale(e, e), b.transform.apply(b, k), this.executeOperatorList(d.charProcOperatorList[v.operatorListId]), this.restore(), q = (H.applyTransform([v.width, 0], k)[0] * e + g) * c.fontDirection, b.translate(q, 0), c.x += q * m);
                            b.restore();
                            this.processingType3 = null
                        } else {
                            b.save();
                            this.applyTextTransforms();
                            t = c.lineWidth;
                            var k = c.textMatrix[0],
                                y = c.textMatrix[1],
                                k = Math.sqrt(k * k + y * y);
                            t = 0 === k || 0 === t ? this.getSinglePixelWidth() : t / k;
                            1 != f && (b.scale(f, f), t /= f);
                            b.lineWidth = t;
                            for (t = k = 0; t < p; ++t)
                                if (v = a[t], null === v) k += c.fontDirection * h;
                                else {
                                    var y = !1,
                                        u = v.fontChar,
                                        x = v.vmetric || l;
                                    if (r) var w = v.vmetric ? x[1] : .5 * v.width,
                                        w = -w * e * c.fontMatrix[0],
                                        A = x[2] * e * c.fontMatrix[0];
                                    q = x ? -x[0] : v.width;
                                    x = q * e * c.fontMatrix[0] + g * c.fontDirection;
                                    v = v.accent;
                                    var B, E, C;
                                    r ? (B = w / f, E = (k + A) / f) : (B = k / f, E = 0);
                                    d.remeasure && 0 < q && this.isFontSubpixelAAEnabled && (y = 1E3 * b.measureText(u).width /
                                        c.fontSize * c.fontSizeScale, q /= y, y = !0, b.save(), b.scale(q, 1), B /= q, v && (C /= q));
                                    this.paintChar(u, B, E);
                                    v && (C = B + v.offset.x / f, u = E - v.offset.y / f, this.paintChar(v.fontChar, C, u));
                                    k += x;
                                    y && b.restore()
                                }
                            r ? c.y -= k * m : c.x += k * m;
                            b.restore()
                        }
                },
                showSpacedText: function(a) {
                    for (var b = this.current, c = b.fontSize, d = .001 * b.textHScale * b.fontDirection, e = a.length, f = b.font.vertical, g = 0; g < e; ++g) {
                        var h = a[g];
                        "number" == typeof h ? (h = -h * c * d, f ? b.y += h : b.x += h) : this.showText(h)
                    }
                },
                nextLineShowText: function(a) {
                    this.nextLine();
                    this.showText(a)
                },
                nextLineSetSpacingShowText: function(a, b, c) {
                    this.setWordSpacing(a);
                    this.setCharSpacing(b);
                    this.nextLineShowText(c)
                },
                setCharWidth: function(a, b) {},
                setCharWidthAndBounds: function(a, b, c, d, e, f) {
                    this.rectangle(c, d, e - c, f - d);
                    this.clip();
                    this.endPath()
                },
                getColorN_Pattern: function(a) {
                    return "TilingPattern" == a[0] ? new ka(a, a[1], this.ctx, this.objs, this.commonObjs, this.baseTransform) : y(a)
                },
                setStrokeColorN: function() {
                    this.current.strokeColor = this.getColorN_Pattern(arguments)
                },
                setFillColorN: function() {
                    this.current.fillColor =
                        this.getColorN_Pattern(arguments)
                },
                setStrokeRGBColor: function(a, b, c) {
                    var d = H.makeCssRgb(arguments);
                    this.ctx.strokeStyle = d;
                    this.current.strokeColor = d
                },
                setFillRGBColor: function(a, b, c) {
                    var d = H.makeCssRgb(arguments);
                    this.ctx.fillStyle = d;
                    this.current.fillColor = d
                },
                shadingFill: function(a) {
                    var b = this.ctx;
                    this.save();
                    a = y(a);
                    b.fillStyle = a.getPattern(b, this, !0);
                    var c = b.mozCurrentTransformInverse;
                    if (c) {
                        var b = b.canvas,
                            d = b.width,
                            e = b.height,
                            b = H.applyTransform([0, 0], c);
                        a = H.applyTransform([0, e], c);
                        var f = H.applyTransform([d,
                                0
                            ], c),
                            g = H.applyTransform([d, e], c),
                            c = Math.min(b[0], a[0], f[0], g[0]),
                            d = Math.min(b[1], a[1], f[1], g[1]),
                            e = Math.max(b[0], a[0], f[0], g[0]),
                            b = Math.max(b[1], a[1], f[1], g[1]);
                        this.ctx.fillRect(c, d, e - c, b - d)
                    } else this.ctx.fillRect(-1E10, -1E10, 2E10, 2E10);
                    this.restore()
                },
                beginInlineImage: function() {
                    f("Should not call beginInlineImage")
                },
                beginImageData: function() {
                    f("Should not call beginImageData")
                },
                paintFormXObjectBegin: function(a, b) {
                    this.save();
                    this.baseTransformStack.push(this.baseTransform);
                    a && w(a) && 6 == a.length &&
                        this.transform.apply(this, a);
                    this.baseTransform = this.ctx.mozCurrentTransform;
                    b && w(b) && 4 == b.length && (this.rectangle(b[0], b[1], b[2] - b[0], b[3] - b[1]), this.clip(), this.endPath())
                },
                paintFormXObjectEnd: function() {
                    this.restore();
                    this.baseTransform = this.baseTransformStack.pop()
                },
                beginGroup: function(a) {
                    this.save();
                    var b = this.ctx;
                    a.isolated || k("TODO: Support non-isolated groups.");
                    a.knockout && g("Knockout groups not supported.");
                    var c = b.mozCurrentTransform;
                    a.matrix && b.transform.apply(b, a.matrix);
                    a.bbox || f("Bounding box is required.");
                    var e = H.getAxialAlignedBoundingBox(a.bbox, b.mozCurrentTransform),
                        e = H.intersect(e, [0, 0, b.canvas.width, b.canvas.height]) || [0, 0, 0, 0],
                        h = Math.floor(e[0]),
                        m = Math.floor(e[1]),
                        p = Math.max(Math.ceil(e[2]) - h, 1),
                        r = Math.max(Math.ceil(e[3]) - m, 1),
                        l = e = 1;
                    4096 < p && (e = p / 4096, p = 4096);
                    4096 < r && (l = r / 4096, r = 4096);
                    var t = "groupAt" + this.groupLevel;
                    a.smask && (t += "_smask_" + this.smaskCounter++ % 2);
                    p = S.getCanvas(t, p, r, !0);
                    r = p.context;
                    r.scale(1 / e, 1 / l);
                    r.translate(-h, -m);
                    r.transform.apply(r, c);
                    a.smask ? this.smaskStack.push({
                        canvas: p.canvas,
                        context: r,
                        offsetX: h,
                        offsetY: m,
                        scaleX: e,
                        scaleY: l,
                        subtype: a.smask.subtype,
                        backdrop: a.smask.backdrop
                    }) : (b.setTransform(1, 0, 0, 1, 0, 0), b.translate(h, m), b.scale(e, l));
                    d(b, r);
                    this.ctx = r;
                    this.setGState([
                        ["BM", "Normal"],
                        ["ca", 1],
                        ["CA", 1]
                    ]);
                    this.groupStack.push(b);
                    this.groupLevel++
                },
                endGroup: function(a) {
                    this.groupLevel--;
                    var b = this.ctx;
                    this.ctx = this.groupStack.pop();
                    void 0 !== this.ctx.imageSmoothingEnabled ? this.ctx.imageSmoothingEnabled = !1 : this.ctx.mozImageSmoothingEnabled = !1;
                    a.smask ? this.tempSMask = this.smaskStack.pop() :
                        this.ctx.drawImage(b.canvas, 0, 0);
                    this.restore()
                },
                beginAnnotations: function() {
                    this.save();
                    this.current = new ca
                },
                endAnnotations: function() {
                    this.restore()
                },
                beginAnnotation: function(a, b, c) {
                    this.save();
                    a && w(a) && 4 == a.length && (this.rectangle(a[0], a[1], a[2] - a[0], a[3] - a[1]), this.clip(), this.endPath());
                    this.transform.apply(this, b);
                    this.transform.apply(this, c)
                },
                endAnnotation: function() {
                    this.restore()
                },
                paintJpegXObject: function(a, b, c) {
                    var d = this.objs.get(a);
                    if (d) {
                        this.save();
                        var e = this.ctx;
                        e.scale(1 / b, -1 / c);
                        e.drawImage(d,
                            0, 0, d.width, d.height, 0, -c, b, c);
                        this.imageLayer && (d = e.mozCurrentTransformInverse, e = this.getCanvasPosition(0, 0), this.imageLayer.appendImage({
                            objId: a,
                            left: e[0],
                            top: e[1],
                            width: b / d[0],
                            height: c / d[3]
                        }));
                        this.restore()
                    } else g("Dependent image isn't ready yet")
                },
                paintImageMaskXObject: function(a) {
                    var b = this.ctx,
                        d = a.width,
                        e = a.height,
                        f = this.processingType3;
                    !f || "compiled" in f || (f.compiled = 1E3 >= d && 1E3 >= e ? r({
                        data: a.data,
                        width: d,
                        height: e
                    }) : null);
                    f && f.compiled ? f.compiled(b) : (b = S.getCanvas("maskCanvas", d, e), f = b.context,
                        f.save(), c(f, a), f.globalCompositeOperation = "source-in", a = this.current.fillColor, f.fillStyle = a && a.hasOwnProperty("type") && "Pattern" === a.type ? a.getPattern(f, this) : a, f.fillRect(0, 0, d, e), f.restore(), this.paintInlineImageXObject(b.canvas))
                },
                paintImageMaskXObjectRepeat: function(a, b, d, e) {
                    var f = a.width,
                        g = a.height,
                        h = this.ctx,
                        m = S.getCanvas("maskCanvas", f, g),
                        k = m.context;
                    k.save();
                    c(k, a);
                    k.globalCompositeOperation = "source-in";
                    a = this.current.fillColor;
                    k.fillStyle = a && a.hasOwnProperty("type") && "Pattern" === a.type ?
                        a.getPattern(k, this) : a;
                    k.fillRect(0, 0, f, g);
                    k.restore();
                    k = 0;
                    for (a = e.length; k < a; k += 2) h.save(), h.transform(b, 0, 0, d, e[k], e[k + 1]), h.scale(1, -1), h.drawImage(m.canvas, 0, 0, f, g, 0, -1, 1, 1), h.restore()
                },
                paintImageMaskXObjectGroup: function(a) {
                    for (var b = this.ctx, d = 0, e = a.length; d < e; d++) {
                        var f = a[d],
                            g = f.width,
                            h = f.height,
                            m = S.getCanvas("maskCanvas", g, h),
                            k = m.context;
                        k.save();
                        c(k, f);
                        k.globalCompositeOperation = "source-in";
                        var p = this.current.fillColor;
                        k.fillStyle = p && p.hasOwnProperty("type") && "Pattern" === p.type ? p.getPattern(k,
                            this) : p;
                        k.fillRect(0, 0, g, h);
                        k.restore();
                        b.save();
                        b.transform.apply(b, f.transform);
                        b.scale(1, -1);
                        b.drawImage(m.canvas, 0, 0, g, h, 0, -1, 1, 1);
                        b.restore()
                    }
                },
                paintImageXObject: function(a) {
                    (a = this.objs.get(a)) ? this.paintInlineImageXObject(a): g("Dependent image isn't ready yet")
                },
                paintImageXObjectRepeat: function(a, b, c, d) {
                    if (a = this.objs.get(a)) {
                        for (var e = a.width, f = a.height, h = [], m = 0, k = d.length; m < k; m += 2) h.push({
                            transform: [b, 0, 0, c, d[m], d[m + 1]],
                            x: 0,
                            y: 0,
                            w: e,
                            h: f
                        });
                        this.paintInlineImageXObjectGroup(a, h)
                    } else g("Dependent image isn't ready yet")
                },
                paintInlineImageXObject: function(a) {
                    var c = a.width,
                        d = a.height,
                        e = this.ctx;
                    this.save();
                    e.scale(1 / c, -1 / d);
                    var f = e.mozCurrentTransformInverse,
                        g = f[0],
                        h = f[1],
                        g = Math.max(Math.sqrt(g * g + h * h), 1),
                        h = f[2],
                        m = f[3],
                        h = Math.max(Math.sqrt(h * h + m * m), 1),
                        k;
                    if (a instanceof HTMLElement || !a.data) m = a;
                    else {
                        k = S.getCanvas("inlineImage", c, d);
                        var p = k.context;
                        b(p, a);
                        m = k.canvas
                    }
                    for (var r = c, l = d, t = "prescale1"; 2 < g && 1 < r || 2 < h && 1 < l;) {
                        var v = r,
                            q = l;
                        2 < g && 1 < r && (v = Math.ceil(r / 2), g /= r / v);
                        2 < h && 1 < l && (q = Math.ceil(l / 2), h /= l / q);
                        k = S.getCanvas(t, v, q);
                        p = k.context;
                        p.clearRect(0, 0, v, q);
                        p.drawImage(m, 0, 0, r, l, 0, 0, v, q);
                        m = k.canvas;
                        r = v;
                        l = q;
                        t = "prescale1" === t ? "prescale2" : "prescale1"
                    }
                    e.drawImage(m, 0, 0, r, l, 0, -d, c, d);
                    this.imageLayer && (e = this.getCanvasPosition(0, -d), this.imageLayer.appendImage({
                        imgData: a,
                        left: e[0],
                        top: e[1],
                        width: c / f[0],
                        height: d / f[3]
                    }));
                    this.restore()
                },
                paintInlineImageXObjectGroup: function(a, c) {
                    var d = this.ctx,
                        e = a.width,
                        f = a.height,
                        g = S.getCanvas("inlineImage", e, f);
                    b(g.context, a);
                    for (var h = 0, m = c.length; h < m; h++) {
                        var k = c[h];
                        d.save();
                        d.transform.apply(d,
                            k.transform);
                        d.scale(1, -1);
                        d.drawImage(g.canvas, k.x, k.y, k.w, k.h, 0, -1, 1, 1);
                        this.imageLayer && (k = this.getCanvasPosition(k.x, k.y), this.imageLayer.appendImage({
                            imgData: a,
                            left: k[0],
                            top: k[1],
                            width: e,
                            height: f
                        }));
                        d.restore()
                    }
                },
                paintSolidColorImageMask: function() {
                    this.ctx.fillRect(0, 0, 1, 1)
                },
                markPoint: function(a) {},
                markPointProps: function(a, b) {},
                beginMarkedContent: function(a) {},
                beginMarkedContentProps: function(a, b) {},
                endMarkedContent: function() {},
                beginCompat: function() {},
                endCompat: function() {},
                consumePath: function() {
                    var a =
                        this.ctx;
                    if (this.pendingClip) {
                        if (this.pendingClip == t)
                            if (void 0 !== a.mozFillRule) a.mozFillRule = "evenodd", a.clip(), a.mozFillRule = "nonzero";
                            else try {
                                a.clip("evenodd")
                            } catch (b) {
                                a.clip()
                            } else a.clip();
                        this.pendingClip = null
                    }
                    a.beginPath()
                },
                getSinglePixelWidth: function(a) {
                    a = this.ctx.mozCurrentTransformInverse;
                    return Math.sqrt(Math.max(a[0] * a[0] + a[1] * a[1], a[2] * a[2] + a[3] * a[3]))
                },
                getCanvasPosition: function(a, b) {
                    var c = this.ctx.mozCurrentTransform;
                    return [c[0] * a + c[2] * b + c[4], c[1] * a + c[3] * b + c[5]]
                }
            };
            for (var q in C) a.prototype[C[q]] =
                a.prototype[q];
            return a
        }(),
        ea = function() {
            function a(b, c, d) {
                d = b.createShader(d);
                b.shaderSource(d, c);
                b.compileShader(d);
                if (!b.getShaderParameter(d, b.COMPILE_STATUS)) throw b = b.getShaderInfoLog(d), Error("Error during shader compilation: " + b);
                return d
            }

            function b(a, c) {
                for (var d = a.createProgram(), e = 0, f = c.length; e < f; ++e) a.attachShader(d, c[e]);
                a.linkProgram(d);
                if (!a.getProgramParameter(d, a.LINK_STATUS)) throw d = a.getProgramInfoLog(d), Error("Error during program linking: " + d);
                return d
            }

            function c(a, b, d) {
                a.activeTexture(d);
                d = a.createTexture();
                a.bindTexture(a.TEXTURE_2D, d);
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE);
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE);
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, a.NEAREST);
                a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, a.NEAREST);
                a.texImage2D(a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, b);
                return d
            }

            function d() {
                f || (g = document.createElement("canvas"), f = g.getContext("webgl", {
                    premultipliedalpha: !1
                }))
            }
            var f, g, h = null,
                m = null;
            return {get isEnabled() {
                    if (PDFJS.disableWebGL) return !1;
                    var a = !1;
                    try {
                        d(), a = !!f
                    } catch (b) {}
                    return e(this, "isEnabled", a)
                },
                composeSMask: function(e, m, k) {
                    var p = e.width,
                        r = e.height;
                    if (!h) {
                        var l, t;
                        d();
                        l = g;
                        g = null;
                        t = f;
                        f = null;
                        var v = a(t, "  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
                                t.VERTEX_SHADER),
                            q = a(t, "  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
                                t.FRAGMENT_SHADER),
                            y = b(t, [v, q]);
                        t.useProgram(y);
                        v = {};
                        v.gl = t;
                        v.canvas = l;
                        v.resolutionLocation = t.getUniformLocation(y, "u_resolution");
                        v.positionLocation = t.getAttribLocation(y, "a_position");
                        v.backdropLocation = t.getUniformLocation(y, "u_backdrop");
                        v.subtypeLocation = t.getUniformLocation(y, "u_subtype");
                        l = t.getAttribLocation(y, "a_texCoord");
                        var q = t.getUniformLocation(y, "u_image"),
                            y = t.getUniformLocation(y, "u_mask"),
                            u = t.createBuffer();
                        t.bindBuffer(t.ARRAY_BUFFER, u);
                        t.bufferData(t.ARRAY_BUFFER, new Float32Array([0,
                            0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1
                        ]), t.STATIC_DRAW);
                        t.enableVertexAttribArray(l);
                        t.vertexAttribPointer(l, 2, t.FLOAT, !1, 0, 0);
                        t.uniform1i(q, 0);
                        t.uniform1i(y, 1);
                        h = v
                    }
                    t = h;
                    v = t.canvas;
                    l = t.gl;
                    v.width = p;
                    v.height = r;
                    l.viewport(0, 0, l.drawingBufferWidth, l.drawingBufferHeight);
                    l.uniform2f(t.resolutionLocation, p, r);
                    k.backdrop ? l.uniform4f(t.resolutionLocation, k.backdrop[0], k.backdrop[1], k.backdrop[2], 1) : l.uniform4f(t.resolutionLocation, 0, 0, 0, 0);
                    l.uniform1i(t.subtypeLocation, "Luminosity" === k.subtype ? 1 : 0);
                    e = c(l, e, l.TEXTURE0);
                    m =
                        c(l, m, l.TEXTURE1);
                    k = l.createBuffer();
                    l.bindBuffer(l.ARRAY_BUFFER, k);
                    l.bufferData(l.ARRAY_BUFFER, new Float32Array([0, 0, p, 0, 0, r, 0, r, p, 0, p, r]), l.STATIC_DRAW);
                    l.enableVertexAttribArray(t.positionLocation);
                    l.vertexAttribPointer(t.positionLocation, 2, l.FLOAT, !1, 0, 0);
                    l.clearColor(0, 0, 0, 0);
                    l.enable(l.BLEND);
                    l.blendFunc(l.ONE, l.ONE_MINUS_SRC_ALPHA);
                    l.clear(l.COLOR_BUFFER_BIT);
                    l.drawArrays(l.TRIANGLES, 0, 6);
                    l.flush();
                    l.deleteTexture(e);
                    l.deleteTexture(m);
                    l.deleteBuffer(k);
                    return v
                },
                drawFigures: function(c, e, h,
                    k, p) {
                    if (!m) {
                        var r, l;
                        d();
                        r = g;
                        g = null;
                        l = f;
                        f = null;
                        var t = a(l, "  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
                                l.VERTEX_SHADER),
                            v = a(l, "  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ", l.FRAGMENT_SHADER),
                            t = b(l, [t,
                                v
                            ]);
                        l.useProgram(t);
                        v = {};
                        v.gl = l;
                        v.canvas = r;
                        v.resolutionLocation = l.getUniformLocation(t, "u_resolution");
                        v.scaleLocation = l.getUniformLocation(t, "u_scale");
                        v.offsetLocation = l.getUniformLocation(t, "u_offset");
                        v.positionLocation = l.getAttribLocation(t, "a_position");
                        v.colorLocation = l.getAttribLocation(t, "a_color");
                        m = v
                    }
                    r = m;
                    l = r.canvas;
                    t = r.gl;
                    l.width = c;
                    l.height = e;
                    t.viewport(0, 0, t.drawingBufferWidth, t.drawingBufferHeight);
                    t.uniform2f(r.resolutionLocation, c, e);
                    c = 0;
                    var q, y, u;
                    q = 0;
                    for (y = k.length; q < y; q++) switch (k[q].type) {
                        case "lattice":
                            u =
                                k[q].coords.length / k[q].verticesPerRow | 0;
                            c += (u - 1) * (k[q].verticesPerRow - 1) * 6;
                            break;
                        case "triangles":
                            c += k[q].coords.length
                    }
                    v = new Float32Array(2 * c);
                    e = new Uint8Array(3 * c);
                    var x = p.coords,
                        w = p.colors,
                        A = 0,
                        z = 0;
                    q = 0;
                    for (y = k.length; q < y; q++) {
                        u = k[q];
                        var B = u.coords,
                            E = u.colors;
                        switch (u.type) {
                            case "lattice":
                                var C = u.verticesPerRow;
                                u = B.length / C | 0;
                                for (var H = 1; H < u; H++)
                                    for (var J = H * C + 1, D = 1; D < C; D++, J++) v[A] = x[B[J - C - 1]], v[A + 1] = x[B[J - C - 1] + 1], v[A + 2] = x[B[J - C]], v[A + 3] = x[B[J - C] + 1], v[A + 4] = x[B[J - 1]], v[A + 5] = x[B[J - 1] + 1], e[z] = w[E[J -
                                        C - 1]], e[z + 1] = w[E[J - C - 1] + 1], e[z + 2] = w[E[J - C - 1] + 2], e[z + 3] = w[E[J - C]], e[z + 4] = w[E[J - C] + 1], e[z + 5] = w[E[J - C] + 2], e[z + 6] = w[E[J - 1]], e[z + 7] = w[E[J - 1] + 1], e[z + 8] = w[E[J - 1] + 2], v[A + 6] = v[A + 2], v[A + 7] = v[A + 3], v[A + 8] = v[A + 4], v[A + 9] = v[A + 5], v[A + 10] = x[B[J]], v[A + 11] = x[B[J] + 1], e[z + 9] = e[z + 3], e[z + 10] = e[z + 4], e[z + 11] = e[z + 5], e[z + 12] = e[z + 6], e[z + 13] = e[z + 7], e[z + 14] = e[z + 8], e[z + 15] = w[E[J]], e[z + 16] = w[E[J] + 1], e[z + 17] = w[E[J] + 2], A += 12, z += 18;
                                break;
                            case "triangles":
                                for (u = 0, C = B.length; u < C; u++) v[A] = x[B[u]], v[A + 1] = x[B[u] + 1], e[z] = w[E[q]], e[z + 1] =
                                    w[E[u] + 1], e[z + 2] = w[E[u] + 2], A += 2, z += 3
                        }
                    }
                    h ? t.clearColor(h[0] / 255, h[1] / 255, h[2] / 255, 1) : t.clearColor(0, 0, 0, 0);
                    t.clear(t.COLOR_BUFFER_BIT);
                    h = t.createBuffer();
                    t.bindBuffer(t.ARRAY_BUFFER, h);
                    t.bufferData(t.ARRAY_BUFFER, v, t.STATIC_DRAW);
                    t.enableVertexAttribArray(r.positionLocation);
                    t.vertexAttribPointer(r.positionLocation, 2, t.FLOAT, !1, 0, 0);
                    k = t.createBuffer();
                    t.bindBuffer(t.ARRAY_BUFFER, k);
                    t.bufferData(t.ARRAY_BUFFER, e, t.STATIC_DRAW);
                    t.enableVertexAttribArray(r.colorLocation);
                    t.vertexAttribPointer(r.colorLocation,
                        3, t.UNSIGNED_BYTE, !1, 0, 0);
                    t.uniform2f(r.scaleLocation, p.scaleX, p.scaleY);
                    t.uniform2f(r.offsetLocation, p.offsetX, p.offsetY);
                    t.drawArrays(t.TRIANGLES, 0, c);
                    t.flush();
                    t.deleteBuffer(h);
                    t.deleteBuffer(k);
                    return l
                },
                clear: function() {
                    m = h = null
                }
            }
        }(),
        da = {
            RadialAxial: {
                fromIR: function(a) {
                    var b = a[1],
                        c = a[2],
                        d = a[3],
                        e = a[4],
                        f = a[5],
                        g = a[6];
                    return {
                        type: "Pattern",
                        getPattern: function(a) {
                            var h;
                            "axial" === b ? h = a.createLinearGradient(d[0], d[1], e[0], e[1]) : "radial" === b && (h = a.createRadialGradient(d[0], d[1], f, e[0], e[1], g));
                            a = 0;
                            for (var m = c.length; a < m; ++a) {
                                var k = c[a];
                                h.addColorStop(k[0], k[1])
                            }
                            return h
                        }
                    }
                }
            }
        },
        la = function() {
            function a(b, c, d, e, f, g, h, m) {
                var k = c.coords,
                    p = c.colors,
                    r = b.data;
                b = 4 * b.width;
                var l;
                k[d + 1] > k[e + 1] && (l = d, d = e, e = l, l = g, g = h, h = l);
                k[e + 1] > k[f + 1] && (l = e, e = f, f = l, l = h, h = m, m = l);
                k[d + 1] > k[e + 1] && (l = d, d = e, e = l, l = g, g = h, h = l);
                l = (k[d] + c.offsetX) * c.scaleX;
                d = (k[d + 1] + c.offsetY) * c.scaleY;
                var t = (k[e] + c.offsetX) * c.scaleX;
                e = (k[e + 1] + c.offsetY) * c.scaleY;
                var v = (k[f] + c.offsetX) * c.scaleX;
                c = (k[f + 1] + c.offsetY) * c.scaleY;
                if (!(d >= c)) {
                    f = p[g];
                    k = p[g +
                        1];
                    g = p[g + 2];
                    var q = p[h],
                        y = p[h + 1];
                    h = p[h + 2];
                    var u = p[m],
                        x = p[m + 1];
                    m = p[m + 2];
                    for (var w = Math.round(d), p = Math.round(c), z, A, B, E, C, J, H, D, I = w; I <= p; I++) {
                        I < e ? (D = I < d ? 0 : d === e ? 1 : (d - I) / (d - e), w = l - (l - t) * D, z = f - (f - q) * D, A = k - (k - y) * D, B = g - (g - h) * D) : (D = I > c ? 1 : e === c ? 0 : (e - I) / (e - c), w = t - (t - v) * D, z = q - (q - u) * D, A = y - (y - x) * D, B = h - (h - m) * D);
                        D = I < d ? 0 : I > c ? 1 : (d - I) / (d - c);
                        E = l - (l - v) * D;
                        C = f - (f - u) * D;
                        J = k - (k - x) * D;
                        H = g - (g - m) * D;
                        D = Math.round(Math.min(w, E));
                        for (var K = Math.round(Math.max(w, E)), F = b * I + 4 * D, G = D; G <= K; G++) D = (w - G) / (w - E), D = 0 > D ? 0 : 1 < D ? 1 : D, r[F++] = z - (z -
                            C) * D | 0, r[F++] = A - (A - J) * D | 0, r[F++] = B - (B - H) * D | 0, r[F++] = 255
                    }
                }
            }
            return function(b, c, d, e, g, h) {
                var m = Math.floor(b[0]),
                    k = Math.floor(b[1]),
                    p = Math.ceil(b[2]) - m;
                b = Math.ceil(b[3]) - k;
                var l = Math.min(Math.ceil(Math.abs(p * c[0] * 1.1)), 3E3),
                    r = Math.min(Math.ceil(Math.abs(b * c[1] * 1.1)), 3E3),
                    p = p / l;
                b /= r;
                e = {
                    coords: d,
                    colors: e,
                    offsetX: -m,
                    offsetY: -k,
                    scaleX: 1 / p,
                    scaleY: 1 / b
                };
                var t;
                if (ea.isEnabled) g = ea.drawFigures(l, r, h, g, e), d = S.getCanvas("mesh", l, r, !1), d.context.drawImage(g, 0, 0);
                else {
                    d = S.getCanvas("mesh", l, r, !1);
                    c = d.context;
                    r = c.createImageData(l,
                        r);
                    if (h) {
                        var v = r.data,
                            l = 0;
                        for (t = v.length; l < t; l += 4) v[l] = h[0], v[l + 1] = h[1], v[l + 2] = h[2], v[l + 3] = 255
                    }
                    for (l = 0; l < g.length; l++) {
                        h = r;
                        var q = g[l];
                        t = e;
                        var v = q.coords,
                            y = q.colors,
                            u = void 0,
                            x = void 0;
                        switch (q.type) {
                            case "lattice":
                                for (var q = q.verticesPerRow, x = Math.floor(v.length / q) - 1, w = q - 1, u = 0; u < x; u++)
                                    for (var z = u * q, A = 0; A < w; A++, z++) a(h, t, v[z], v[z + 1], v[z + q], y[z], y[z + 1], y[z + q]), a(h, t, v[z + q + 1], v[z + 1], v[z + q], y[z + q + 1], y[z + 1], y[z + q]);
                                break;
                            case "triangles":
                                u = 0;
                                for (x = v.length; u < x; u += 3) a(h, t, v[u], v[u + 1], v[u + 2], y[u], y[u + 1], y[u +
                                    2]);
                                break;
                            default:
                                f("illigal figure")
                        }
                    }
                    c.putImageData(r, 0, 0)
                }
                g = d.canvas;
                return {
                    canvas: g,
                    offsetX: m,
                    offsetY: k,
                    scaleX: p,
                    scaleY: b
                }
            }
        }();
    da.Mesh = {
        fromIR: function(a) {
            var b = a[2],
                c = a[3],
                d = a[4],
                e = a[5],
                f = a[6],
                g = a[8];
            return {
                type: "Pattern",
                getPattern: function(a, h, m) {
                    var k;
                    if (m) k = H.singularValueDecompose2dScale(a.mozCurrentTransform);
                    else {
                        k = H.singularValueDecompose2dScale(f);
                        var p = H.singularValueDecompose2dScale(h.baseTransform);
                        k = [k[0] * p[0], k[1] * p[1]]
                    }
                    k = la(e, k, b, c, d, m ? null : g);
                    m || (a.setTransform.apply(a, h.baseTransform),
                        f && a.transform.apply(a, f));
                    a.translate(k.offsetX, k.offsetY);
                    a.scale(k.scaleX, k.scaleY);
                    return a.createPattern(k.canvas, "no-repeat")
                }
            }
        }
    };
    da.Dummy = {
        fromIR: function() {
            return {
                type: "Pattern",
                getPattern: function() {
                    return "hotpink"
                }
            }
        }
    };
    var ka = function() {
        function a(b, c, d, e, f, g) {
            this.operatorList = b[2];
            this.matrix = b[3] || [1, 0, 0, 1, 0, 0];
            this.bbox = b[4];
            this.xstep = b[5];
            this.ystep = b[6];
            this.paintType = b[7];
            this.tilingType = b[8];
            this.color = c;
            this.objs = e;
            this.commonObjs = f;
            this.baseTransform = g;
            this.type = "Pattern";
            this.ctx =
                d
        }
        a.prototype = {
            createPatternCanvas: function(a) {
                var b = this.operatorList,
                    c = this.bbox,
                    d = this.xstep,
                    e = this.ystep,
                    f = this.paintType,
                    g = this.color,
                    h = this.objs,
                    m = this.commonObjs;
                k("TilingType: " + this.tilingType);
                var p = c[0],
                    l = c[1],
                    r = c[2],
                    t = c[3],
                    v = [p, l],
                    q = [p + d, l + e],
                    y = q[0] - v[0],
                    q = q[1] - v[1],
                    u = H.singularValueDecompose2dScale(this.matrix),
                    x = H.singularValueDecompose2dScale(this.baseTransform),
                    u = [u[0] * x[0], u[1] * x[1]],
                    y = Math.min(Math.ceil(Math.abs(y * u[0])), 3E3),
                    q = Math.min(Math.ceil(Math.abs(q * u[1])), 3E3),
                    u = S.getCanvas("pattern",
                        y, q, !0),
                    x = u.context,
                    h = new ha(x, m, h);
                h.groupLevel = a.groupLevel;
                this.setFillAndStrokeStyleToContext(x, f, g);
                this.setScale(y, q, d, e);
                this.transformToScale(h);
                h.transform.apply(h, [1, 0, 0, 1, -v[0], -v[1]]);
                this.clipBbox(h, c, p, l, r, t);
                h.executeOperatorList(b);
                return u.canvas
            },
            setScale: function(a, b, c, d) {
                this.scale = [a / c, b / d]
            },
            transformToScale: function(a) {
                var b = this.scale;
                a.transform.apply(a, [b[0], 0, 0, b[1], 0, 0])
            },
            scaleToContext: function() {
                var a = this.scale;
                this.ctx.scale(1 / a[0], 1 / a[1])
            },
            clipBbox: function(a, b, c, d,
                e, f) {
                b && w(b) && 4 == b.length && (a.rectangle(c, d, e - c, f - d), a.clip(), a.endPath())
            },
            setFillAndStrokeStyleToContext: function(a, b, c) {
                switch (b) {
                    case 1:
                        b = this.ctx;
                        a.fillStyle = b.fillStyle;
                        a.strokeStyle = b.strokeStyle;
                        break;
                    case 2:
                        b = H.makeCssRgb(c);
                        a.fillStyle = b;
                        a.strokeStyle = b;
                        break;
                    default:
                        f("Unsupported paint type: " + b)
                }
            },
            getPattern: function(a, b) {
                var c = this.createPatternCanvas(b);
                a = this.ctx;
                a.setTransform.apply(a, this.baseTransform);
                a.transform.apply(a, this.matrix);
                this.scaleToContext();
                return a.createPattern(c,
                    "repeat")
            }
        };
        return a
    }();
    PDFJS.disableFontFace = !1;
    var aa = {
            insertRule: function(a) {
                var b = document.getElementById("PDFJS_FONT_STYLE_TAG");
                b || (b = document.createElement("style"), b.id = "PDFJS_FONT_STYLE_TAG", document.documentElement.getElementsByTagName("head")[0].appendChild(b));
                b = b.sheet;
                b.insertRule(a, b.cssRules.length)
            },
            clear: function() {
                var a = document.getElementById("PDFJS_FONT_STYLE_TAG");
                a && a.parentNode.removeChild(a)
            },
            get loadTestFont() {
                return e(this, "loadTestFont", atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))
            },
            loadTestFontId: 0,
            loadingContext: {
                requests: [],
                nextRequestId: 0
            },
            isSyncFontLoadingSupported: function() {
                if (E) return !1;
                var a = /Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(window.navigator.userAgent);
                return a && 14 <= a[1] ? !0 : !1
            }(),
            bind: function(a, b) {
                E && f("bind() shall be called from main thread");
                for (var c = [], d = [], e = 0, g = a.length; e < g; e++) {
                    var h = a[e];
                    if (!h.attached && !1 !== h.loading) {
                        h.attached = !0;
                        var m = h.bindDOM();
                        m && (c.push(m), d.push(h))
                    }
                }
                e = aa.queueLoadingCallback(b);
                0 < c.length && !this.isSyncFontLoadingSupported ? aa.prepareFontLoadEvent(c,
                    d, e) : e.complete()
            },
            queueLoadingCallback: function(a) {
                var b = aa.loadingContext,
                    c = {
                        id: "pdfjs-font-loading-" + b.nextRequestId++,
                        complete: function() {
                            c.end && f("completeRequest() cannot be called twice");
                            for (c.end = Date.now(); 0 < b.requests.length && b.requests[0].end;) {
                                var a = b.requests.shift();
                                setTimeout(a.callback, 0)
                            }
                        },
                        callback: a,
                        started: Date.now()
                    };
                b.requests.push(c);
                return c
            },
            prepareFontLoadEvent: function(a, b, c) {
                function d(a, b) {
                    return a.charCodeAt(b) << 24 | a.charCodeAt(b + 1) << 16 | a.charCodeAt(b + 2) << 8 | a.charCodeAt(b +
                        3) & 255
                }

                function e(a, b, c, d) {
                    var f = a.substr(0, b);
                    a = a.substr(b + c);
                    return f + d + a
                }

                function f(a, b) {
                    p++;
                    30 < p ? (g("Load test font never loaded."), b()) : (k.font = "30px " + a, k.fillText(".", 0, 20), 0 < k.getImageData(0, 0, 1, 1).data[3] ? b() : setTimeout(f.bind(null, a, b)))
                }
                var h, m;
                a = document.createElement("canvas");
                a.width = 1;
                a.height = 1;
                var k = a.getContext("2d"),
                    p = 0;
                a = "lt" + Date.now() + this.loadTestFontId++;
                var l = this.loadTestFont,
                    l = e(l, 976, a.length, a),
                    r = d(l, 16);
                h = 0;
                for (m = a.length - 3; h < m; h += 4) r = r - 1482184792 + d(a, h) | 0;
                h < a.length &&
                    (r = r - 1482184792 + d(a + "XXX", h) | 0);
                l = e(l, 16, 4, String.fromCharCode(r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, r & 255));
                h = "url(data:font/opentype;base64," + btoa(l) + ");";
                aa.insertRule('@font-face { font-family:"' + a + '";src:' + h + "}");
                l = [];
                h = 0;
                for (m = b.length; h < m; h++) l.push(b[h].loadedName);
                l.push(a);
                var t = document.createElement("div");
                t.setAttribute("style", "visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");
                h = 0;
                for (m = l.length; h < m; ++h) b = document.createElement("span"), b.textContent = "Hi",
                    b.style.fontFamily = l[h], t.appendChild(b);
                document.body.appendChild(t);
                f(a, function() {
                    document.body.removeChild(t);
                    c.complete()
                })
            }
        },
        qa = function() {
            function a(b, c, d) {
                this.compiledGlyphs = {};
                if (1 === arguments.length) {
                    var e = arguments[0],
                        f;
                    for (f in e) this[f] = e[f]
                }
            }
            a.prototype = {
                bindDOM: function() {
                    if (!this.data) return null;
                    if (PDFJS.disableFontFace) return this.disableFontFace = !0, null;
                    var a, b = new Uint8Array(this.data);
                    a = b.length;
                    if (8192 > a) a = String.fromCharCode.apply(null, b);
                    else {
                        for (var c = [], d = 0; d < a; d += 8192) {
                            var e =
                                Math.min(d + 8192, a),
                                e = b.subarray(d, e);
                            c.push(String.fromCharCode.apply(null, e))
                        }
                        a = c.join("")
                    }
                    b = this.loadedName;
                    a = "url(data:" + this.mimetype + ";base64," + window.btoa(a) + ");";
                    b = '@font-face { font-family:"' + b + '";src:' + a + "}";
                    aa.insertRule(b);
                    PDFJS.pdfBug && "FontInspector" in t && t.FontInspector.enabled && t.FontInspector.fontAdded(this, a);
                    return b
                },
                getPathGenerator: function(a, b) {
                    if (!(b in this.compiledGlyphs)) {
                        var c = a.get(this.loadedName + "_path_" + b);
                        this.compiledGlyphs[b] = new Function("c", "size", c)
                    }
                    return this.compiledGlyphs[b]
                }
            };
            return a
        }()
}).call("undefined" === typeof window ? this : window);
PDFJS.workerSrc || "undefined" === typeof document || (PDFJS.workerSrc = function() {
    var k = (document.body || document.getElementsByTagName("head")[0]).lastChild.src;
    return k && k.replace(/\.js$/i, ".worker.js")
}());
! function(k, g) {
    g["true"] = k;
    var f = function(c) {
        function d(a) {
            var b = {};
            this.subscribe = function(a, c, d) {
                if ("function" != typeof c) return !1;
                b.hasOwnProperty(a) || (b[a] = {});
                var e = Math.random().toString(35);
                return b[a][e] = [c, !!d], e
            };
            this.unsubscribe = function(a) {
                for (var c in b)
                    if (b[c][a]) return delete b[c][a], !0;
                return !1
            };
            this.publish = function(d) {
                if (b.hasOwnProperty(d)) {
                    var e = Array.prototype.slice.call(arguments, 1),
                        f = [],
                        g;
                    for (g in b[d]) {
                        var h = b[d][g];
                        try {
                            h[0].apply(a, e)
                        } catch (k) {
                            c.console && console.error("jsPDF PubSub Error",
                                k.message, k)
                        }
                        h[1] && f.push(g)
                    }
                    f.length && f.forEach(this.unsubscribe)
                }
            }
        }

        function b(f, g, k, m) {
            var v = {};
            "object" == typeof f && (v = f, f = v.orientation, g = v.unit || g, k = v.format || k, m = v.compress || v.compressPdf || m);
            g = g || "mm";
            k = k || "a4";
            f = ("" + (f || "P")).toLowerCase();
            var r, y, t, E, z, C = ("" + k).toLowerCase(),
                A = !!m && "function" == typeof Uint8Array,
                I = v.textColor || "0 g",
                B = v.drawColor || "0 G",
                D = v.fontSize || 16,
                F = v.lineHeight || 1.15,
                G = v.lineWidth || .200025,
                H = 2,
                J = !1,
                O = [],
                K = {},
                L = {},
                M = 0,
                Q = [],
                R = [],
                U = 0,
                V = 0,
                P = 0,
                X = {
                    title: "",
                    subject: "",
                    author: "",
                    keywords: "",
                    creator: ""
                },
                N = {},
                W = new d(N),
                T = function(a) {
                    return a.toFixed(2)
                },
                Y = function(a) {
                    return ("0" + parseInt(a)).slice(-2)
                },
                S = function(a) {
                    J ? Q[M].push(a) : (P += a.length + 1, R.push(a))
                },
                ca = function() {
                    return H++, O[H] = P, S(H + " 0 obj"), H
                },
                ha = function(a) {
                    S("stream");
                    S(a);
                    S("endstream")
                },
                ea = function(a, b) {
                    var c;
                    c = a;
                    var d = b,
                        e, f, g, h, m, k, p;
                    if (d = d || {}, e = d.sourceEncoding || "Unicode", g = d.outputEncoding, (d.autoencode || g) && K[r].metadata && K[r].metadata[e] && K[r].metadata[e].encoding && (f = K[r].metadata[e].encoding, !g && K[r].encoding &&
                            (g = K[r].encoding), !g && f.codePages && (g = f.codePages[0]), "string" == typeof g && (g = f[g]), g)) {
                        m = !1;
                        h = [];
                        e = 0;
                        for (f = c.length; f > e; e++)(k = g[c.charCodeAt(e)]) ? h.push(String.fromCharCode(k)) : h.push(c[e]), h[e].charCodeAt(0) >> 8 && (m = !0);
                        c = h.join("")
                    }
                    for (e = c.length; void 0 === m && 0 !== e;) c.charCodeAt(e - 1) >> 8 && (m = !0), e--;
                    if (m) {
                        h = d.noBOM ? [] : [254, 255];
                        e = 0;
                        for (f = c.length; f > e; e++) {
                            if (k = c.charCodeAt(e), p = k >> 8, p >> 8) throw Error("Character at position " + e + " of string '" + c + "' exceeds 16bits. Cannot be encoded into UCS-2 BE");
                            h.push(p);
                            h.push(k - (p << 8))
                        }
                        c = String.fromCharCode.apply(void 0, h)
                    }
                    return c.replace(/\\/g, "\\\\").replace(/\(/g, "\\(").replace(/\)/g, "\\)")
                },
                da = function() {
                    M++;
                    J = !0;
                    Q[M] = [];
                    S(T(G * y) + " w");
                    S(B);
                    0 !== U && S(U + " J");
                    0 !== V && S(V + " j");
                    W.publish("addPage", {
                        pageNumber: M
                    })
                },
                la = function(a, b) {
                    var c;
                    a = void 0 !== a ? a : K[r].fontName;
                    b = void 0 !== b ? b : K[r].fontStyle;
                    try {
                        c = L[a][b]
                    } catch (d) {}
                    if (!c) throw Error("Unable to look up font label for font '" + a + "', '" + b + "'. Refer to getFontList() for available fonts.");
                    return c
                },
                ka = function() {
                    J = !1;
                    H = 2;
                    R = [];
                    O = [];
                    S("%PDF-" + a);
                    var d, e, f, g, h, m = E * y,
                        k = z * y;
                    h = c.adler32cs || b.adler32cs;
                    A && "undefined" == typeof h && (A = !1);
                    for (d = 1; M >= d; d++) {
                        if (ca(), S("<</Type /Page"), S("/Parent 1 0 R"), S("/Resources 2 0 R"), S("/Contents " + (H + 1) + " 0 R>>"), S("endobj"), e = Q[d].join("\n"), ca(), A) {
                            f = [];
                            for (g = e.length; g--;) f[g] = e.charCodeAt(g);
                            g = h.from(e);
                            e = new l(6);
                            e.append(new Uint8Array(f));
                            e = e.flush();
                            f = new Uint8Array(e.length + 6);
                            f.set(new Uint8Array([120, 156]));
                            f.set(e, 2);
                            f.set(new Uint8Array([255 & g, g >> 8 & 255, g >> 16 & 255, g >>
                                24 & 255
                            ]), e.length + 2);
                            e = String.fromCharCode.apply(null, f);
                            S("<</Length " + e.length + " /Filter [/FlateDecode]>>")
                        } else S("<</Length " + e.length + ">>");
                        ha(e);
                        S("endobj")
                    }
                    O[1] = P;
                    S("1 0 obj");
                    S("<</Type /Pages");
                    d = "/Kids [";
                    for (g = 0; M > g; g++) d += 3 + 2 * g + " 0 R ";
                    S(d + "]");
                    S("/Count " + M);
                    S("/MediaBox [0 0 " + T(m) + " " + T(k) + "]");
                    S(">>");
                    S("endobj");
                    for (var p in K) K.hasOwnProperty(p) && (m = K[p], m.objectNumber = ca(), S("<</BaseFont/" + m.PostScriptName + "/Type/Font"), "string" == typeof m.encoding && S("/Encoding/" + m.encoding), S("/Subtype/Type1>>"),
                        S("endobj"));
                    W.publish("putResources");
                    O[2] = P;
                    S("2 0 obj");
                    S("<<");
                    S("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");
                    S("/Font <<");
                    for (var r in K) K.hasOwnProperty(r) && S("/" + r + " " + K[r].objectNumber + " 0 R");
                    S(">>");
                    S("/XObject <<");
                    W.publish("putXobjectDict");
                    S(">>");
                    S(">>");
                    S("endobj");
                    W.publish("postPutResources");
                    ca();
                    S("<<");
                    S("/Producer (jsPDF " + b.version + ")");
                    for (var t in X) X.hasOwnProperty(t) && X[t] && S("/" + t.substr(0, 1).toUpperCase() + t.substr(1) + " (" + ea(X[t]) + ")");
                    p = new Date;
                    S(["/CreationDate (D:",
                        p.getFullYear(), Y(p.getMonth() + 1), Y(p.getDate()), Y(p.getHours()), Y(p.getMinutes()), Y(p.getSeconds()), ")"
                    ].join(""));
                    S(">>");
                    S("endobj");
                    ca();
                    S("<<");
                    S("/Type /Catalog");
                    S("/Pages 1 0 R");
                    S("/OpenAction [3 0 R /FitH null]");
                    S("/PageLayout /OneColumn");
                    W.publish("putCatalog");
                    S(">>");
                    S("endobj");
                    r = P;
                    S("xref");
                    S("0 " + (H + 1));
                    S("0000000000 65535 f ");
                    for (p = 1; H >= p; p++) S(("0000000000" + O[p]).slice(-10) + " 00000 n ");
                    S("trailer");
                    S("<<");
                    S("/Size " + (H + 1));
                    S("/Root " + H + " 0 R");
                    S("/Info " + (H - 1) + " 0 R");
                    return S(">>"),
                        S("startxref"), S(r), S("%%EOF"), J = !0, R.join("\n")
                },
                aa = function(a) {
                    var b = "S";
                    return "F" === a ? b = "f" : "FD" === a || "DF" === a ? b = "B" : ("f" === a || "f*" === a || "B" === a || "B*" === a) && (b = a), b
                },
                qa = function() {
                    for (var a = ka(), b = a.length, c = new ArrayBuffer(b), d = new Uint8Array(c); b--;) d[b] = a.charCodeAt(b);
                    return c
                },
                xa = function() {
                    return new Blob([qa()], {
                        type: "application/pdf"
                    })
                },
                Ea = function(a) {
                    return a.foo = function() {
                        try {
                            return a.apply(this, arguments)
                        } catch (b) {
                            var d = b.stack || "";
                            ~d.indexOf(" at ") && (d = d.split(" at ")[1]);
                            d = "Error in function " +
                                d.split("\n")[0].split("<")[0] + ": " + b.message;
                            if (!c.console) throw Error(d);
                            c.console.error(d, b);
                            c.alert && alert(d)
                        }
                    }, a.foo.bar = a, a.foo
                }(function(a, b) {
                    var d = "dataur" === ("" + a).substr(0, 6) ? "data:application/pdf;base64," + btoa(ka()) : 0;
                    switch (a) {
                        case void 0:
                            return ka();
                        case "save":
                            if (navigator.getUserMedia && (void 0 === c.URL || void 0 === c.URL.createObjectURL)) return N.output("dataurlnewwindow");
                            q(xa(), b);
                            "function" == typeof q.unload && c.setTimeout && setTimeout(q.unload, 911);
                            break;
                        case "arraybuffer":
                            return qa();
                        case "blob":
                            return xa();
                        case "bloburi":
                        case "bloburl":
                            return c.URL && c.URL.createObjectURL(xa()) || void 0;
                        case "datauristring":
                        case "dataurlstring":
                            return d;
                        case "dataurlnewwindow":
                            var e = c.open(d);
                            if (e || "undefined" == typeof safari) return e;
                        case "datauri":
                        case "dataurl":
                            return c.document.location.href = d;
                        default:
                            throw Error('Output type "' + a + '" is not supported.');
                    }
                });
            switch (g) {
                case "pt":
                    y = 1;
                    break;
                case "mm":
                    y = 72 / 25.4;
                    break;
                case "cm":
                    y = 72 / 2.54;
                    break;
                case "in":
                    y = 72;
                    break;
                case "px":
                    y = 96 / 72;
                    break;
                case "pc":
                    y =
                        12;
                    break;
                case "em":
                    y = 12;
                    break;
                case "ex":
                    y = 6;
                    break;
                default:
                    throw "Invalid unit: " + g;
            }
            if (e.hasOwnProperty(C)) z = e[C][1] / y, E = e[C][0] / y;
            else try {
                z = k[1], E = k[0]
            } catch (Ga) {
                throw Error("Invalid format: " + k);
            }
            if ("p" === f || "portrait" === f) f = "p", E > z && (t = E, E = z, z = t);
            else {
                if ("l" !== f && "landscape" !== f) throw "Invalid orientation: " + f;
                f = "l";
                z > E && (t = E, E = z, z = t)
            }
            N.internal = {
                pdfEscape: ea,
                getStyle: aa,
                getFont: function() {
                    return K[la.apply(N, arguments)]
                },
                getFontSize: function() {
                    return D
                },
                getLineHeight: function() {
                    return D * F
                },
                write: function(a) {
                    S(1 ===
                        arguments.length ? a : Array.prototype.join.call(arguments, " "))
                },
                getCoordinateString: function(a) {
                    return T(a * y)
                },
                getVerticalCoordinateString: function(a) {
                    return T((z - a) * y)
                },
                collections: {},
                newObject: ca,
                putStream: ha,
                events: W,
                scaleFactor: y,
                pageSize: {
                    width: E,
                    height: z
                },
                output: function(a, b) {
                    return Ea(a, b)
                },
                getNumberOfPages: function() {
                    return Q.length - 1
                },
                pages: Q
            };
            N.addPage = function() {
                return da(), this
            };
            N.text = function(a, b, c, d, e) {
                function f(a) {
                    return a = a.split("\t").join(Array(v.TabLen || 9).join(" ")), ea(a, d)
                }
                "number" ==
                typeof a && (t = c, c = b, b = a, a = t);
                "string" == typeof a && a.match(/[\n\r]/) && (a = a.split(/\r\n|\r|\n/g));
                "number" == typeof d && (e = d, d = null);
                var g = "",
                    h = "Td";
                e && (e *= Math.PI / 180, g = Math.cos(e), h = Math.sin(e), g = [T(g), T(h), T(-1 * h), T(g), ""].join(" "), h = "Tm");
                if (d = d || {}, "noBOM" in d || (d.noBOM = !0), "autoencode" in d || (d.autoencode = !0), "string" == typeof a) a = f(a);
                else {
                    if (!(a instanceof Array)) throw Error('Type of text must be string or Array. "' + a + '" is not recognized.');
                    a = a.concat();
                    e = [];
                    for (var m = a.length; m--;) e.push(f(a.shift()));
                    a = e.join(") Tj\nT* (")
                }
                return S("BT\n/" + r + " " + D + " Tf\n" + D * F + " TL\n" + I + "\n" + g + T(b * y) + " " + T((z - c) * y) + " " + h + "\n(" + a + ") Tj\nET"), this
            };
            N.line = function(a, b, c, d) {
                return this.lines([
                    [c - a, d - b]
                ], a, b)
            };
            N.lines = function(a, b, c, d, e, f) {
                var g, h, m, k, p, l, r, v;
                "number" == typeof a && (t = c, c = b, b = a, a = t);
                d = d || [1, 1];
                S((b * y).toFixed(3) + " " + ((z - c) * y).toFixed(3) + " m ");
                g = d[0];
                d = d[1];
                h = a.length;
                v = c;
                for (c = 0; h > c; c++) m = a[c], 2 === m.length ? (b = m[0] * g + b, v = m[1] * d + v, S((b * y).toFixed(3) + " " + ((z - v) * y).toFixed(3) + " l")) : (k = m[0] * g + b, p = m[1] * d +
                    v, l = m[2] * g + b, r = m[3] * d + v, b = m[4] * g + b, v = m[5] * d + v, S((k * y).toFixed(3) + " " + ((z - p) * y).toFixed(3) + " " + (l * y).toFixed(3) + " " + ((z - r) * y).toFixed(3) + " " + (b * y).toFixed(3) + " " + ((z - v) * y).toFixed(3) + " c"));
                return f && S(" h"), null !== e && S(aa(e)), this
            };
            N.rect = function(a, b, c, d, e) {
                aa(e);
                return S([T(a * y), T((z - b) * y), T(c * y), T(-d * y), "re"].join(" ")), null !== e && S(aa(e)), this
            };
            N.triangle = function(a, b, c, d, e, f, g) {
                return this.lines([
                    [c - a, d - b],
                    [e - c, f - d],
                    [a - e, b - f]
                ], a, b, [1, 1], g, !0), this
            };
            N.roundedRect = function(a, b, c, d, e, f, g) {
                var h =
                    4 / 3 * (Math.SQRT2 - 1);
                return this.lines([
                    [c - 2 * e, 0],
                    [e * h, 0, e, f - f * h, e, f],
                    [0, d - 2 * f],
                    [0, f * h, -(e * h), f, -e, f],
                    [-c + 2 * e, 0],
                    [-(e * h), 0, -e, -(f * h), -e, -f],
                    [0, -d + 2 * f],
                    [0, -(f * h), e * h, -f, e, -f]
                ], a + e, b, [1, 1], g), this
            };
            N.ellipse = function(a, b, c, d, e) {
                var f = 4 / 3 * (Math.SQRT2 - 1) * c,
                    g = 4 / 3 * (Math.SQRT2 - 1) * d;
                return S([T((a + c) * y), T((z - b) * y), "m", T((a + c) * y), T((z - (b - g)) * y), T((a + f) * y), T((z - (b - d)) * y), T(a * y), T((z - (b - d)) * y), "c"].join(" ")), S([T((a - f) * y), T((z - (b - d)) * y), T((a - c) * y), T((z - (b - g)) * y), T((a - c) * y), T((z - b) * y), "c"].join(" ")), S([T((a -
                    c) * y), T((z - (b + g)) * y), T((a - f) * y), T((z - (b + d)) * y), T(a * y), T((z - (b + d)) * y), "c"].join(" ")), S([T((a + f) * y), T((z - (b + d)) * y), T((a + c) * y), T((z - (b + g)) * y), T((a + c) * y), T((z - b) * y), "c"].join(" ")), null !== e && S(aa(e)), this
            };
            N.circle = function(a, b, c, d) {
                return this.ellipse(a, b, c, c, d)
            };
            N.setProperties = function(a) {
                for (var b in X) X.hasOwnProperty(b) && a[b] && (X[b] = a[b]);
                return this
            };
            N.setFontSize = function(a) {
                return D = a, this
            };
            N.setFont = function(a, b) {
                return r = la(a, b), this
            };
            N.setFontStyle = N.setFontType = function(a) {
                return r = la(void 0,
                    a), this
            };
            N.getFontList = function() {
                var a, b, c, d = {};
                for (a in L)
                    if (L.hasOwnProperty(a))
                        for (b in d[a] = c = [], L[a]) L[a].hasOwnProperty(b) && c.push(b);
                return d
            };
            N.setLineWidth = function(a) {
                return S((a * y).toFixed(2) + " w"), this
            };
            N.setDrawColor = function(a, b, c, d) {
                var e;
                return e = void 0 === b || void 0 === d && a === b === c ? "string" == typeof a ? a + " G" : T(a / 255) + " G" : void 0 === d ? "string" == typeof a ? [a, b, c, "RG"].join(" ") : [T(a / 255), T(b / 255), T(c / 255), "RG"].join(" ") : "string" == typeof a ? [a, b, c, d, "K"].join(" ") : [T(a), T(b), T(c), T(d), "K"].join(" "),
                    S(e), this
            };
            N.setFillColor = function(a, b, c, d) {
                var e;
                return e = void 0 === b || void 0 === d && a === b === c ? "string" == typeof a ? a + " g" : T(a / 255) + " g" : void 0 === d ? "string" == typeof a ? [a, b, c, "rg"].join(" ") : [T(a / 255), T(b / 255), T(c / 255), "rg"].join(" ") : "string" == typeof a ? [a, b, c, d, "k"].join(" ") : [T(a), T(b), T(c), T(d), "k"].join(" "), S(e), this
            };
            N.setTextColor = function(a, b, c) {
                "string" == typeof a && /^#[0-9A-Fa-f]{6}$/.test(a) && (c = parseInt(a.substr(1), 16), a = c >> 16 & 255, b = c >> 8 & 255, c &= 255);
                return I = 0 === a && 0 === b && 0 === c || "undefined" ==
                    typeof b ? (a / 255).toFixed(3) + " g" : [(a / 255).toFixed(3), (b / 255).toFixed(3), (c / 255).toFixed(3), "rg"].join(" "), this
            };
            N.CapJoinStyles = {
                0: 0,
                butt: 0,
                but: 0,
                miter: 0,
                1: 1,
                round: 1,
                rounded: 1,
                circle: 1,
                2: 2,
                projecting: 2,
                project: 2,
                square: 2,
                bevel: 2
            };
            N.setLineCap = function(a) {
                var b = this.CapJoinStyles[a];
                if (void 0 === b) throw Error("Line cap style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
                return U = b, S(b + " J"), this
            };
            N.setLineJoin = function(a) {
                var b = this.CapJoinStyles[a];
                if (void 0 ===
                    b) throw Error("Line join style of '" + a + "' is not recognized. See or extend .CapJoinStyles property for valid styles");
                return V = b, S(b + " j"), this
            };
            N.output = Ea;
            N.save = function(a) {
                N.output("save", a)
            };
            for (var pa in b.API) b.API.hasOwnProperty(pa) && ("events" === pa && b.API.events.length ? ! function(a, b) {
                var c, d, e;
                for (e = b.length - 1; - 1 !== e; e--) c = b[e][0], d = b[e][1], a.subscribe.apply(a, [c].concat("function" == typeof d ? [d] : d))
            }(W, b.API.events) : N[pa] = b.API[pa]);
            return function() {
                for (var a = [
                        ["Helvetica", "helvetica", "normal"],
                        ["Helvetica-Bold", "helvetica", "bold"],
                        ["Helvetica-Oblique", "helvetica", "italic"],
                        ["Helvetica-BoldOblique", "helvetica", "bolditalic"],
                        ["Courier", "courier", "normal"],
                        ["Courier-Bold", "courier", "bold"],
                        ["Courier-Oblique", "courier", "italic"],
                        ["Courier-BoldOblique", "courier", "bolditalic"],
                        ["Times-Roman", "times", "normal"],
                        ["Times-Bold", "times", "bold"],
                        ["Times-Italic", "times", "italic"],
                        ["Times-BoldItalic", "times", "bolditalic"]
                    ], b = 0, c = a.length; c > b; b++) {
                    var d, e = a[b][0],
                        f = a[b][1];
                    d = a[b][2];
                    var g = "F" + (Object.keys(K).length +
                            1).toString(10),
                        e = K[g] = {
                            id: g,
                            PostScriptName: e,
                            fontName: f,
                            fontStyle: d,
                            encoding: "StandardEncoding",
                            metadata: {}
                        },
                        h = g;
                    L.hasOwnProperty(f) || (L[f] = {});
                    L[f][d] = h;
                    d = (W.publish("addFont", e), g);
                    g = a[b][0].split("-");
                    e = g[0];
                    g = g[1] || "";
                    L.hasOwnProperty(e) || (L[e] = {});
                    L[e][g] = d
                }
                W.publish("addFonts", {
                    fonts: K,
                    dictionary: L
                })
            }(), r = "F1", da(), W.publish("initialized"), N
        }
        var a = "1.3",
            e = {
                a0: [2383.94, 3370.39],
                a1: [1683.78, 2383.94],
                a2: [1190.55, 1683.78],
                a3: [841.89, 1190.55],
                a4: [595.28, 841.89],
                a5: [419.53, 595.28],
                a6: [297.64, 419.53],
                a7: [209.76, 297.64],
                a8: [147.4, 209.76],
                a9: [104.88, 147.4],
                a10: [73.7, 104.88],
                b0: [2834.65, 4008.19],
                b1: [2004.09, 2834.65],
                b2: [1417.32, 2004.09],
                b3: [1000.63, 1417.32],
                b4: [708.66, 1000.63],
                b5: [498.9, 708.66],
                b6: [354.33, 498.9],
                b7: [249.45, 354.33],
                b8: [175.75, 249.45],
                b9: [124.72, 175.75],
                b10: [87.87, 124.72],
                c0: [2599.37, 3676.54],
                c1: [1836.85, 2599.37],
                c2: [1298.27, 1836.85],
                c3: [918.43, 1298.27],
                c4: [649.13, 918.43],
                c5: [459.21, 649.13],
                c6: [323.15, 459.21],
                c7: [229.61, 323.15],
                c8: [161.57, 229.61],
                c9: [113.39, 161.57],
                c10: [79.37, 113.39],
                dl: [311.81, 623.62],
                letter: [612, 792],
                "government-letter": [576, 756],
                legal: [612, 1008],
                "junior-legal": [576, 360],
                ledger: [1224, 792],
                tabloid: [792, 1224],
                "credit-card": [153, 243]
            };
        return b.API = {
            events: []
        }, b.version = "1.0.209-git 2014-07-28T16:27:diegocr", "function" == typeof define && define.amd ? define("jsPDF", function() {
            return b
        }) : c.jsPDF = b, b
    }("undefined" != typeof self && self || "undefined" != typeof window && window || this);
    ! function(c) {
        c.addHTML = function(c, b, a, d, e) {
            if ("undefined" == typeof html2canvas && "undefined" == typeof rasterizeHTML) throw Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");
            "number" != typeof b && (d = b, e = a);
            "function" == typeof d && (e = d, d = null);
            var f = this.internal,
                g = f.scaleFactor,
                m = f.pageSize.width,
                k = f.pageSize.height;
            return (d = d || {}, d.onrendered = function(c) {
                b = parseInt(b) || 0;
                a = parseInt(a) || 0;
                var f = d.dim || {},
                    h = f.h || 0,
                    l = f.w || Math.min(m, c.width / g) - b,
                    q = "JPEG";
                if (d.format && (q = d.format), c.height > k && d.pagesplit) h = function() {
                    for (var d = 0;;) {
                        var f = document.createElement("canvas");
                        f.width = Math.min(m * g, c.width);
                        f.height = Math.min(k * g, c.height - d);
                        f.getContext("2d").drawImage(c, 0, d, c.width,
                            f.height, 0, 0, f.width, f.height);
                        var h = [f, b, d ? 0 : a, f.width / g, f.height / g, q, null, "SLOW"];
                        if (this.addImage.apply(this, h), d += f.height, d >= c.height) break;
                        this.addPage()
                    }
                    e(l, d, null, h)
                }.bind(this), "CANVAS" === c.nodeName ? (f = new Image, f.onload = h, f.src = c.toDataURL("image/png"), c = f) : h();
                else {
                    var f = Math.random().toString(35),
                        x = [c, b, a, l, h, q, f, "SLOW"];
                    this.addImage.apply(this, x);
                    e(l, h, f, x)
                }
            }.bind(this), "undefined" == typeof html2canvas || d.rstz) ? "undefined" != typeof rasterizeHTML ? (f = "drawDocument", "string" == typeof c && (f =
                /^http/.test(c) ? "drawURL" : "drawHTML"), d.width = d.width || m * g, rasterizeHTML[f](c, void 0, d).then(function(a) {
                d.onrendered(a.image)
            }, function(a) {
                e(null, a)
            })) : null : html2canvas(c, d)
        }
    }(f.API);
    (function(c) {
        var d = ["jpeg", "jpg", "png"],
            b = function(a) {
                var c = this.internal.newObject(),
                    d = this.internal.write,
                    e = this.internal.putStream;
                if (a.n = c, d("<</Type /XObject"), d("/Subtype /Image"), d("/Width " + a.w), d("/Height " + a.h), a.cs === this.color_spaces.INDEXED ? d("/ColorSpace [/Indexed /DeviceRGB " + (a.pal.length / 3 - 1) + " " + ("smask" in
                        a ? c + 2 : c + 1) + " 0 R]") : (d("/ColorSpace /" + a.cs), a.cs === this.color_spaces.DEVICE_CMYK && d("/Decode [1 0 1 0 1 0 1 0]")), d("/BitsPerComponent " + a.bpc), "f" in a && d("/Filter /" + a.f), "dp" in a && d("/DecodeParms <<" + a.dp + ">>"), "trns" in a && a.trns.constructor == Array) {
                    for (var f = "", g = 0, h = a.trns.length; h > g; g++) f += a.trns[g] + " " + a.trns[g] + " ";
                    d("/Mask [" + f + "]")
                }
                if ("smask" in a && d("/SMask " + (c + 1) + " 0 R"), d("/Length " + a.data.length + ">>"), e(a.data), d("endobj"), "smask" in a) c = {
                    w: a.w,
                    h: a.h,
                    cs: "DeviceGray",
                    bpc: a.bpc,
                    dp: "/Predictor 15 /Colors 1 /BitsPerComponent " +
                        a.bpc + " /Columns " + a.w,
                    data: a.smask
                }, "f" in a && (c.f = a.f), b.call(this, c);
                a.cs === this.color_spaces.INDEXED && (this.internal.newObject(), d("<< /Length " + a.pal.length + ">>"), e(this.arrayBufferToBinaryString(new Uint8Array(a.pal))), d("endobj"))
            },
            a = function() {
                var a = this.internal.collections.addImage_images,
                    c;
                for (c in a) b.call(this, a[c])
            },
            e = function() {
                var a, b = this.internal.collections.addImage_images,
                    c = this.internal.write,
                    d;
                for (d in b) a = b[d], c("/I" + a.i, a.n, "0", "R")
            },
            f = function(a) {
                return a && "string" == typeof a &&
                    (a = a.toUpperCase()), a in c.image_compression ? a : c.image_compression.NONE
            },
            g = function(a) {
                var b = 0;
                if (a) {
                    if (Object.keys) a = Object.keys(a).length;
                    else {
                        var b = 0,
                            c;
                        for (c in a) a.hasOwnProperty(c) && b++;
                        a = b
                    }
                    b = a
                }
                return b
            },
            k = function(a) {
                return "string" == typeof a && Array.prototype.reduce && a.split("").reduce(function(a, b) {
                    return a = (a << 5) - a + b.charCodeAt(0), a & a
                }, 0)
            },
            m = function(a, b) {
                var c;
                if (b)
                    for (var d in b)
                        if (a === b[d].alias) {
                            c = b[d];
                            break
                        }
                return c
            };
        c.color_spaces = {
            DEVICE_RGB: "DeviceRGB",
            DEVICE_GRAY: "DeviceGray",
            DEVICE_CMYK: "DeviceCMYK",
            CAL_GREY: "CalGray",
            CAL_RGB: "CalRGB",
            LAB: "Lab",
            ICC_BASED: "ICCBased",
            INDEXED: "Indexed",
            PATTERN: "Pattern",
            SEPERATION: "Seperation",
            DEVICE_N: "DeviceN"
        };
        c.decode = {
            DCT_DECODE: "DCTDecode",
            FLATE_DECODE: "FlateDecode",
            LZW_DECODE: "LZWDecode",
            JPX_DECODE: "JPXDecode",
            JBIG2_DECODE: "JBIG2Decode",
            ASCII85_DECODE: "ASCII85Decode",
            ASCII_HEX_DECODE: "ASCIIHexDecode",
            RUN_LENGTH_DECODE: "RunLengthDecode",
            CCITT_FAX_DECODE: "CCITTFaxDecode"
        };
        c.image_compression = {
            NONE: "NONE",
            FAST: "FAST",
            MEDIUM: "MEDIUM",
            SLOW: "SLOW"
        };
        c.isString =
            function(a) {
                return "string" == typeof a
            };
        c.extractInfoFromBase64DataURI = function(a) {
            return /^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)
        };
        c.supportsArrayBuffer = function() {
            return "undefined" != typeof ArrayBuffer && "undefined" != typeof Uint8Array
        };
        c.isArrayBuffer = function(a) {
            return this.supportsArrayBuffer() ? a instanceof ArrayBuffer : !1
        };
        c.isArrayBufferView = function(a) {
            return this.supportsArrayBuffer() ? "undefined" == typeof Uint32Array ? !1 : a instanceof Int8Array || a instanceof Uint8Array || "undefined" != typeof Uint8ClampedArray &&
                a instanceof Uint8ClampedArray || a instanceof Int16Array || a instanceof Uint16Array || a instanceof Int32Array || a instanceof Uint32Array || a instanceof Float32Array || a instanceof Float64Array : !1
        };
        c.binaryStringToUint8Array = function(a) {
            for (var b = a.length, c = new Uint8Array(b), d = 0; b > d; d++) c[d] = a.charCodeAt(d);
            return c
        };
        c.arrayBufferToBinaryString = function(a) {
            this.isArrayBuffer(a) && (a = new Uint8Array(a));
            for (var b = "", c = a.byteLength, d = 0; c > d; d++) b += String.fromCharCode(a[d]);
            return b
        };
        c.arrayBufferToBase64 = function(a) {
            var b,
                c, d, e, f, g = "";
            a = new Uint8Array(a);
            e = a.byteLength;
            for (var h = e % 3, m = e - h, k = 0; m > k; k += 3) f = a[k] << 16 | a[k + 1] << 8 | a[k + 2], b = (16515072 & f) >> 18, c = (258048 & f) >> 12, d = (4032 & f) >> 6, e = 63 & f, g += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [b] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [c] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [d] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [e];
            return 1 == h ? (f = a[m], b = (252 & f) >> 2, c = (3 & f) << 4, g += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [b] +
                "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [c] + "==") : 2 == h && (f = a[m] << 8 | a[m + 1], b = (64512 & f) >> 10, c = (1008 & f) >> 4, d = (15 & f) << 2, g += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [b] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [c] + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/" [d] + "="), g
        };
        c.createImageInfo = function(a, b, c, d, e, f, g, h, m, k, p, l) {
            a = {
                alias: h,
                w: b,
                h: c,
                cs: d,
                bpc: e,
                i: g,
                data: a
            };
            return f && (a.f = f), m && (a.dp = m), k && (a.trns = k),
                p && (a.pal = p), l && (a.smask = l), a
        };
        c.addImage = function(b, l, q, t, E, z, C, A) {
            if ("number" == typeof l) {
                var I = z;
                z = E;
                E = t;
                t = q;
                q = l;
                l = I
            }
            var B;
            B = this.internal.collections.addImage_images;
            I = (B || (this.internal.collections.addImage_images = B = {}, this.internal.events.subscribe("putResources", a), this.internal.events.subscribe("putXobjectDict", e)), B);
            if (!(B = m(b, I))) {
                var D;
                if ("object" == typeof b && 1 === b.nodeType) {
                    a: {
                        B = b;b = l;
                        if ("IMG" === B.nodeName && B.hasAttribute("src")) {
                            var F = "" + B.getAttribute("src");
                            if (0 === F.indexOf("data:image/")) {
                                B =
                                    F;
                                break a
                            }!b && /\.png(?:[?#].*)?$/i.test(F) && (b = "png")
                        }
                        if ("CANVAS" === B.nodeName) F = B;
                        else {
                            F = document.createElement("canvas");
                            F.width = B.clientWidth || B.width;
                            F.height = B.clientHeight || B.height;
                            var G = F.getContext("2d");
                            if (!G) throw "addImage requires canvas to be supported by browser.";
                            G.drawImage(B, 0, 0, F.width, F.height)
                        }
                        B = F.toDataURL("png" == ("" + b).toLowerCase() ? "image/png" : "image/jpeg")
                    }
                    b = B
                }
                if (("undefined" == typeof C || null === C) && (C = k(b)), !(B = m(C, I))) {
                    this.isString(b) && ((F = this.extractInfoFromBase64DataURI(b)) ?
                        (l = F[2], b = atob(F[3])) : 137 === b.charCodeAt(0) && 80 === b.charCodeAt(1) && 78 === b.charCodeAt(2) && 71 === b.charCodeAt(3) && (l = "png"));
                    if (l = (l || "JPEG").toLowerCase(), -1 === d.indexOf(l)) throw Error("addImage currently only supports formats " + d + ", not '" + l + "'");
                    if ("function" != typeof c["process" + l.toUpperCase()]) throw Error("please ensure that the plugin for '" + l + "' support is added");
                    if (this.supportsArrayBuffer() && (D = b, b = this.binaryStringToUint8Array(b)), B = this["process" + l.toUpperCase()](b, g(I), C, f(A), D), !B) throw Error("An unkwown error occurred whilst processing the image");
                }
            }
            l = q;
            q = B;
            C = B.i;
            A = z;
            z = (E || A || (E = -96, A = -96), 0 > E && (E = -72 * q.w / E / this.internal.scaleFactor), 0 > A && (A = -72 * q.h / A / this.internal.scaleFactor), 0 === E && (E = A * q.w / q.h), 0 === A && (A = E * q.h / q.w), [E, A]);
            A = this.internal.getCoordinateString;
            D = this.internal.getVerticalCoordinateString;
            E = z[0];
            z = z[1];
            I[C] = q;
            this.internal.write("q", A(E), "0 0", A(z), A(l), D(t + z), "cm /I" + q.i, "Do Q");
            return this
        };
        c.processJPEG = function(a, b, c, d, e) {
            var f;
            d = this.color_spaces.DEVICE_RGB;
            var g = this.decode.DCT_DECODE;
            if (this.isString(a)) {
                a: {
                    e = a;
                    var h,
                        m, k;
                    if (255 === !e.charCodeAt(0) || 216 === !e.charCodeAt(1) || 255 === !e.charCodeAt(2) || 224 === !e.charCodeAt(3) || 74 === !e.charCodeAt(6) || 70 === !e.charCodeAt(7) || 73 === !e.charCodeAt(8) || 70 === !e.charCodeAt(9) || 0 === !e.charCodeAt(10)) throw Error("getJpegSize requires a binary string jpeg file");
                    for (var p = 256 * e.charCodeAt(4) + e.charCodeAt(5), l = 4, q = e.length; q > l;) {
                        if (l += p, 255 !== e.charCodeAt(l)) throw Error("getJpegSize could not find the size of the image");
                        if (192 === e.charCodeAt(l + 1) || 193 === e.charCodeAt(l + 1) || 194 === e.charCodeAt(l +
                                1) || 195 === e.charCodeAt(l + 1) || 196 === e.charCodeAt(l + 1) || 197 === e.charCodeAt(l + 1) || 198 === e.charCodeAt(l + 1) || 199 === e.charCodeAt(l + 1)) {
                            e = (m = 256 * e.charCodeAt(l + 5) + e.charCodeAt(l + 6), h = 256 * e.charCodeAt(l + 7) + e.charCodeAt(l + 8), k = e.charCodeAt(l + 9), [h, m, k]);
                            break a
                        }
                        l += 2;
                        p = 256 * e.charCodeAt(l) + e.charCodeAt(l + 1)
                    }
                    e = void 0
                }
                a = (f = e, this.createImageInfo(a, f[0], f[1], 1 == f[3] ? this.color_spaces.DEVICE_GRAY : d, 8, g, b, c))
            }
            else {
                this.isArrayBuffer(a) && (a = new Uint8Array(a));
                if (this.isArrayBufferView(a)) {
                    a: {
                        h = a;
                        if (65496 !== (h[0] <<
                                8 | h[1])) throw Error("Supplied data is not a JPEG");
                        var u;m = h.length;k = (h[4] << 8) + h[5];
                        for (var x = 4; m > x;) {
                            if (x += k, p = h.subarray(x, x + 5), k = (p[2] << 8) + p[3], (192 === p[1] || 194 === p[1]) && 255 === p[0] && 7 < k) {
                                m = x + 5;
                                h = (p = h.subarray(m, m + 5), l = (p[2] << 8) + p[3], q = (p[0] << 8) + p[1], u = p[4], {
                                    width: l,
                                    height: q,
                                    numcomponents: u
                                });
                                break a
                            }
                            x += 2
                        }
                        throw Error("getJpegSizeFromBytes could not find the size of the image");
                    }
                    b = (f = h, a = e || this.arrayBufferToBinaryString(a), this.createImageInfo(a, f.width, f.height, 1 == f.numcomponents ? this.color_spaces.DEVICE_GRAY :
                        d, 8, g, b, c))
                }
                else b = null;
                a = b
            }
            return a
        };
        c.processJPG = function() {
            return this.processJPEG.apply(this, arguments)
        }
    })(f.API);
    (function(c) {
        c.autoPrint = function() {
            var c;
            return this.internal.events.subscribe("postPutResources", function() {
                c = this.internal.newObject();
                this.internal.write("<< /S/Named /Type/Action /N/Print >>", "endobj")
            }), this.internal.events.subscribe("putCatalog", function() {
                this.internal.write("/OpenAction " + c + " 0 R")
            }), this
        }
    })(f.API);
    (function(c) {
        var d, b, a, e, f = {
                x: void 0,
                y: void 0,
                w: void 0,
                h: void 0,
                ln: void 0
            },
            g = 1,
            k = {
                left: 0,
                top: 0,
                bottom: 0
            };
        c.setHeaderFunction = function(a) {
            e = a
        };
        c.getTextDimensions = function(c) {
            d = this.internal.getFont().fontName;
            b = this.table_font_size || this.internal.getFontSize();
            a = this.internal.getFont().fontStyle;
            var e, f, g = 19.049976 / 25.4;
            return f = document.createElement("font"), f.id = "jsPDFCell", f.style.fontStyle = a, f.style.fontName = d, f.style.fontSize = b + "pt", f.innerText = c, document.body.appendChild(f), e = {
                w: (f.offsetWidth + 1) * g,
                h: (f.offsetHeight + 1) * g
            }, document.body.removeChild(f), e
        };
        c.cellAddPage = function() {
            var a = this.margins || k;
            this.addPage();
            f = {
                x: a.left,
                y: a.top,
                w: void 0,
                h: void 0,
                ln: void 0
            };
            g += 1
        };
        c.cellInitialize = function() {
            f = {
                x: void 0,
                y: void 0,
                w: void 0,
                h: void 0,
                ln: void 0
            };
            g = 1
        };
        c.cell = function(a, b, c, d, e, g, h) {
            var l = f;
            void 0 !== l.ln && (l.ln === g ? (a = l.x + l.w, b = l.y) : (l.y + l.h + d + 13 >= this.internal.pageSize.height - (this.margins || k).bottom && (this.cellAddPage(), this.printHeaders && this.tableHeaderRow && this.printHeaderRow(g, !0)), b = f.y + f.h));
            if (void 0 !== e[0])
                if (this.printingHeaderRow ? this.rect(a,
                        b, c, d, "FD") : this.rect(a, b, c, d), "right" === h) {
                    if (e instanceof Array)
                        for (h = 0; h < e.length; h++) {
                            var l = e[h],
                                q = this.getStringUnitWidth(l) * this.internal.getFontSize();
                            this.text(l, a + c - q - 3, b + this.internal.getLineHeight() * (h + 1))
                        }
                } else this.text(e, a + 3, b + this.internal.getLineHeight());
            f = {
                x: a,
                y: b,
                w: c,
                h: d,
                ln: g
            };
            return this
        };
        c.arrayMax = function(a, b) {
            var c, d, e, f = a[0];
            c = 0;
            for (d = a.length; d > c; c += 1) e = a[c], b ? -1 === b(f, e) && (f = e) : e > f && (f = e);
            return f
        };
        c.table = function(a, b, d, e, h) {
            if (!d) throw "No data for PDF table";
            var l, q, w,
                A, I, B, D, F, G = [];
            B = [];
            var H = {},
                J = {},
                O = [];
            D = [];
            w = !1;
            var K = !0;
            q = 12;
            A = k;
            if (A.width = this.internal.pageSize.width, h && (!0 === h.autoSize && (w = !0), !1 === h.printHeaders && (K = !1), h.fontSize && (q = h.fontSize), h.margins && (A = h.margins)), this.lnMod = 0, f = {
                    x: void 0,
                    y: void 0,
                    w: void 0,
                    h: void 0,
                    ln: void 0
                }, g = 1, this.printHeaders = K, this.margins = A, this.setFontSize(q), this.table_font_size = q, void 0 === e || null === e) G = Object.keys(d[0]);
            else if (e[0] && "string" != typeof e[0])
                for (A = 19.049976 / 25.4, h = 0, q = e.length; q > h; h += 1) l = e[h], G.push(l.name),
                    B.push(l.prompt), J[l.name] = l.width * A;
            else G = e;
            if (w)
                for (F = function(a) {
                        return a[l]
                    }, h = 0, q = G.length; q > h; h += 1) {
                    l = G[h];
                    H[l] = d.map(F);
                    O.push(this.getTextDimensions(B[h] || l).w);
                    I = H[l];
                    e = 0;
                    for (w = I.length; w > e; e += 1) A = I[e], O.push(this.getTextDimensions(A).w);
                    J[l] = c.arrayMax(O)
                }
            if (K) {
                H = this.calculateLineHeight(G, J, B.length ? B : G);
                h = 0;
                for (q = G.length; q > h; h += 1) l = G[h], D.push([a, b, J[l], H, String(B.length ? B[h] : l)]);
                this.setTableHeaderRow(D);
                this.printHeaderRow(1, !1)
            }
            h = 0;
            for (q = d.length; q > h; h += 1)
                for (B = d[h], H = this.calculateLineHeight(G,
                        J, B), e = 0, D = G.length; D > e; e += 1) l = G[e], this.cell(a, b, J[l], H, B[l], h + 2, l.align);
            return this.lastCellPos = f, this.table_x = a, this.table_y = b, this
        };
        c.calculateLineHeight = function(a, b, c) {
            for (var d, e = 0, f = 0; f < a.length; f++) d = a[f], c[d] = this.splitTextToSize(String(c[d]), b[d] - 3), d = this.internal.getLineHeight() * c[d].length + 3, d > e && (e = d);
            return e
        };
        c.setTableHeaderRow = function(a) {
            this.tableHeaderRow = a
        };
        c.printHeaderRow = function(a, b) {
            if (!this.tableHeaderRow) throw "Property tableHeaderRow does not exist.";
            var c, d, h;
            if (this.printingHeaderRow = !0, void 0 !== e) d = e(this, g), f = {
                x: d[0],
                y: d[1],
                w: d[2],
                h: d[3],
                ln: -1
            };
            this.setFontStyle("bold");
            var k = [];
            d = 0;
            for (h = this.tableHeaderRow.length; h > d; d += 1) this.setFillColor(200, 200, 200), c = this.tableHeaderRow[d], b && (c[1] = this.margins && this.margins.top || 0, k.push(c)), c = [].concat(c), this.cell.apply(this, c.concat(a));
            0 < k.length && this.setTableHeaderRow(k);
            this.setFontStyle("normal");
            this.printingHeaderRow = !1
        }
    })(f.API);
    (function(c) {
        var d, b, a, e, f, g, k, m, l, r, q, t, E, z, C, A, I, B, D;
        d = function() {
            function a() {}
            return function(b) {
                return a.prototype =
                    b, new a
            }
        }();
        l = function(a) {
            var b, c, d, e, f;
            c = 0;
            d = a.length;
            for (f = e = !1; !e && c !== d;)(b = a[c] = a[c].trimLeft()) && (e = !0), c++;
            for (c = d - 1; d && !f && -1 !== c;)(b = a[c] = a[c].trimRight()) && (f = !0), c--;
            e = /\s+$/g;
            f = !0;
            for (c = 0; c !== d;) b = a[c].replace(/\s+/g, " "), f && (b = b.trimLeft()), b && (f = e.test(b)), a[c] = b, c++;
            return a
        };
        r = function(a, b, c, d) {
            return this.pdf = a, this.x = b, this.y = c, this.settings = d, this.watchFunctions = [], this.init(), this
        };
        q = function(b) {
            var c, d;
            c = void 0;
            d = b.split(",");
            for (b = d.shift(); !c && b;) c = a[b.trim().toLowerCase()],
                b = d.shift();
            return c
        };
        t = function(a) {
            a = "auto" === a ? "0px" : a; - 1 < a.indexOf("em") && !isNaN(Number(a.replace("em", ""))) && (a = 18.719 * Number(a.replace("em", "")) + "px"); - 1 < a.indexOf("pt") && !isNaN(Number(a.replace("pt", ""))) && (a = 1.333 * Number(a.replace("pt", "")) + "px");
            var b;
            return (b = E[a]) ? b : (b = {
                "xx-small": 9,
                "x-small": 11,
                small: 13,
                medium: 16,
                large: 19,
                "x-large": 23,
                "xx-large": 28,
                auto: 0
            }[{
                css_line_height_string: a
            }], void 0 !== b ? E[a] = b / 16 : (b = parseFloat(a)) ? E[a] = b / 16 : (b = a.match(/([\d\.]+)(px)/), E[a] = 3 === b.length ? parseFloat(b[1]) /
                16 : 1))
        };
        m = function(a) {
            var b, c, d;
            return d = function(a) {
                    var b;
                    return b = function(a) {
                            return document.defaultView && document.defaultView.getComputedStyle ? document.defaultView.getComputedStyle(a, null) : a.currentStyle ? a.currentStyle : a.style
                        }(a),
                        function(a) {
                            return a = a.replace(/-\D/g, function(a) {
                                return a.charAt(1).toUpperCase()
                            }), b[a]
                        }
                }(a), b = {}, c = void 0, b["font-family"] = q(d("font-family")) || "times", b["font-style"] = e[d("font-style")] || "normal", b["text-align"] = TextAlignMap[d("text-align")] || "left", c = f[d("font-weight")] ||
                "normal", "bold" === c && (b["font-style"] = "normal" === b["font-style"] ? c : c + b["font-style"]), b["font-size"] = t(d("font-size")) || 1, b["line-height"] = t(d("line-height")) || 1, b.display = "inline" === d("display") ? "inline" : "block", "block" === b.display && (b["margin-top"] = t(d("margin-top")) || 0, b["margin-bottom"] = t(d("margin-bottom")) || 0, b["padding-top"] = t(d("padding-top")) || 0, b["padding-bottom"] = t(d("padding-bottom")) || 0, b["margin-left"] = t(d("margin-left")) || 0, b["margin-right"] = t(d("margin-right")) || 0, b["padding-left"] =
                    t(d("padding-left")) || 0, b["padding-right"] = t(d("padding-right")) || 0), b["float"] = g[d("cssFloat")] || "none", b.clear = k[d("clear")] || "none", b
        };
        z = function(a, b, c) {
            var d, e, f, g;
            if (f = !1, d = c["#" + a.id])
                if ("function" == typeof d) f = d(a, b);
                else
                    for (e = 0, g = d.length; !f && e !== g;) f = d[e](a, b), e++;
            if (d = c[a.nodeName], !f && d)
                if ("function" == typeof d) f = d(a, b);
                else
                    for (e = 0, g = d.length; !f && e !== g;) f = d[e](a, b), e++;
            return f
        };
        D = function(a, b) {
            var c, d, e, f, g, h;
            c = [];
            d = [];
            e = 0;
            h = a.rows[0].cells.length;
            for (f = a.clientWidth; h > e;) g = a.rows[0].cells[e],
                d[e] = {
                    name: g.textContent.toLowerCase().replace(/\s+/g, ""),
                    prompt: g.textContent.replace(/\r?\n/g, ""),
                    width: g.clientWidth / f * b.pdf.internal.pageSize.width
                }, e++;
            for (e = 1; e < a.rows.length;) {
                h = a.rows[e];
                g = {};
                for (f = 0; f < h.cells.length;) g[d[f].name] = h.cells[f].textContent.replace(/\r?\n/g, ""), f++;
                c.push(g);
                e++
            }
            return {
                rows: c,
                headers: d
            }
        };
        var F = {
                SCRIPT: 1,
                STYLE: 1,
                NOSCRIPT: 1,
                OBJECT: 1,
                EMBED: 1,
                SELECT: 1
            },
            G = 1;
        b = function(a, c, d) {
            var e, f, g, h, k, p, l;
            f = a.childNodes;
            e = void 0;
            a = m(a);
            (h = "block" === a.display) && (c.setBlockBoundary(),
                c.setBlockStyle(a));
            g = 0;
            for (k = f.length; k > g;) {
                if (e = f[g], "object" == typeof e) {
                    if (c.executeWatchFunctions(e), 1 === e.nodeType && "HEADER" === e.nodeName) {
                        var r = e,
                            t = c.pdf.margins_doc.top;
                        c.pdf.internal.events.subscribe("addPage", function() {
                            c.y = t;
                            b(r, c, d);
                            c.pdf.margins_doc.top = c.y + 10;
                            c.y += 10
                        }, !1)
                    }
                    if (8 === e.nodeType && "#comment" === e.nodeName) ~e.textContent.indexOf("ADD_PAGE") && (c.pdf.addPage(), c.y = c.pdf.margins_doc.top);
                    else if (1 !== e.nodeType || F[e.nodeName])
                        if (3 === e.nodeType) {
                            if ((p = e.nodeValue) && "LI" === e.parentNode.nodeName)
                                if ("OL" ===
                                    e.parentNode.parentNode.nodeName) p = G++ + ". " + p;
                                else {
                                    var v = 2;
                                    20 < 16 * a["font-size"] && (v = 3);
                                    l = function(a, b) {
                                        this.pdf.circle(a, b, v, "FD")
                                    }
                                }
                            c.addText(p, a)
                        } else "string" == typeof e && c.addText(e, a);
                    else if ("IMG" === e.nodeName && C[e.getAttribute("src")]) {
                        c.pdf.internal.pageSize.height - c.pdf.margins_doc.bottom < c.y + e.height && c.y > c.pdf.margins_doc.top && (c.pdf.addPage(), c.y = c.pdf.margins_doc.top, c.executeWatchFunctions(e));
                        p = m(e);
                        var q = c.x,
                            u = 12 / c.pdf.internal.scaleFactor,
                            y = (p["margin-left"] + p["padding-left"]) * u,
                            x =
                            (p["margin-right"] + p["padding-right"]) * u,
                            w = (p["margin-top"] + p["padding-top"]) * u,
                            u = (p["margin-bottom"] + p["padding-bottom"]) * u,
                            q = q + (void 0 !== p["float"] && "right" === p["float"] ? c.settings.width - e.width - x : y);
                        c.pdf.addImage(C[e.getAttribute("src")], q, c.y + w, e.width, e.height);
                        void 0 !== p["float"] ? ("right" === p["float"] || "left" === p["float"]) && (c.watchFunctions.push(function(a, b, d, e) {
                            return c.y >= b ? (c.x += a, c.settings.width += d, !0) : e && 1 === e.nodeType && !F[e.nodeName] && c.x + e.width > c.pdf.margins_doc.left + c.pdf.margins_doc.width ?
                                (c.x += a, c.y = b, c.settings.width += d, !0) : !1
                        }.bind(this, "left" === p["float"] ? -e.width - y - x : 0, c.y + e.height + w + u, e.width)), c.watchFunctions.push(function(a, b, d) {
                            return c.y < a && b === c.pdf.internal.getNumberOfPages() ? 1 === d.nodeType && "both" === m(d).clear ? (c.y = a, !0) : !1 : !0
                        }.bind(this, c.y + e.height, c.pdf.internal.getNumberOfPages())), c.settings.width -= e.width + y + x, "left" === p["float"] && (c.x += e.width + y + x)) : c.y += e.height + u
                    } else "TABLE" === e.nodeName ? (p = D(e, c), c.y += 10, c.pdf.table(c.x, c.y, p.rows, p.headers, {
                        autoSize: !1,
                        printHeaders: !0,
                        margins: c.pdf.margins_doc
                    }), c.y = c.pdf.lastCellPos.y + c.pdf.lastCellPos.h + 20) : "OL" === e.nodeName || "UL" === e.nodeName ? (G = 1, z(e, c, d) || b(e, c, d), c.y += 10) : "LI" === e.nodeName ? (p = c.x, c.x += "UL" === e.parentNode.nodeName ? 22 : 10, c.y += 3, z(e, c, d) || b(e, c, d), c.x = p) : z(e, c, d) || b(e, c, d)
                }
                g++
            }
            return h ? c.setBlockBoundary(l) : void 0
        };
        C = {};
        A = function(a, b, c, d) {
            function e() {
                b.pdf.internal.events.publish("imagesLoaded");
                d()
            }

            function f(a, b, c) {
                if (a) {
                    var d = new Image;
                    ++g;
                    d.crossOrigin = "";
                    d.onerror = d.onload = function() {
                        d.complete && (0 ===
                            d.src.indexOf("data:image/") && (d.width = b || d.width || 0, d.height = c || d.height || 0), d.width + d.height && (C[a] = C[a] || d));
                        --g || e()
                    };
                    d.src = a
                }
            }
            a = a.getElementsByTagName("img");
            c = a.length;
            for (var g = 0; c--;) f(a[c].getAttribute("src"), a[c].width, a[c].height);
            return g || e()
        };
        I = function(a, c, d, e) {
            var f = a.getElementsByTagName("footer");
            if (0 < f.length) {
                f = f[0];
                a = c.pdf.internal.write;
                var g = c.y;
                c.pdf.internal.write = function() {};
                b(f, c, d);
                var h = Math.ceil(c.y - g) + 5;
                c.y = g;
                c.pdf.internal.write = a;
                c.pdf.margins_doc.bottom += h;
                a = function(a) {
                    a =
                        void 0 !== a ? a.pageNumber : 1;
                    var e = c.y;
                    c.y = c.pdf.internal.pageSize.height - c.pdf.margins_doc.bottom;
                    c.pdf.margins_doc.bottom -= h;
                    for (var g = f.getElementsByTagName("span"), m = 0; m < g.length; ++m) - 1 < (" " + g[m].className + " ").replace(/[\n\t]/g, " ").indexOf(" pageCounter ") && (g[m].innerHTML = a), -1 < (" " + g[m].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") && (g[m].innerHTML = "###jsPDFVarTotalPages###");
                    b(f, c, d);
                    c.pdf.margins_doc.bottom += h;
                    c.y = e
                };
                for (var g = f.getElementsByTagName("span"), m = 0; m < g.length; ++m) - 1 <
                    (" " + g[m].className + " ").replace(/[\n\t]/g, " ").indexOf(" totalPages ") && c.pdf.internal.events.subscribe("htmlRenderingFinished", c.pdf.putTotalPages.bind(c.pdf, "###jsPDFVarTotalPages###"), !0);
                c.pdf.internal.events.subscribe("addPage", a, !1);
                a();
                F.FOOTER = 1
            }
            e()
        };
        B = function(a, c, d, e, f, g) {
            if (!c) return !1;
            "string" == typeof c || c.parentNode || (c = "" + c.innerHTML);
            "string" == typeof c && (c = function(a) {
                var b, c, d;
                return d = "jsPDFhtmlText" + Date.now().toString() + (1E3 * Math.random()).toFixed(0), c = document.createElement("div"),
                    c.style.cssText = "position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;", c.innerHTML = '<iframe style="height:1px;width:1px" name="' + d + '" />', document.body.appendChild(c), b = window.frames[d], b.document.body.innerHTML = a, b.document.body
            }(c.replace(/<\/?script[^>]*?>/gi, "")));
            var h = new r(a, d, e, f);
            return g = g || function() {}, A.call(this,
                c, h, f.elementHandlers,
                function() {
                    I.call(this, c, h, f.elementHandlers, function() {
                        b(c, h, f.elementHandlers);
                        h.pdf.internal.events.publish("htmlRenderingFinished");
                        g(h.dispose())
                    })
                }), h.dispose()
        };
        r.prototype.init = function() {
            return this.paragraph = {
                text: [],
                style: []
            }, this.pdf.internal.write("q")
        };
        r.prototype.dispose = function() {
            return this.pdf.internal.write("Q"), {
                x: this.x,
                y: this.y
            }
        };
        r.prototype.executeWatchFunctions = function(a) {
            var b = !1,
                c = [];
            if (0 < this.watchFunctions.length) {
                for (var d = 0; d < this.watchFunctions.length; ++d) !0 ===
                    this.watchFunctions[d](a) ? b = !0 : c.push(this.watchFunctions[d]);
                this.watchFunctions = c
            }
            return b
        };
        r.prototype.splitFragmentsIntoLines = function(a, b) {
            var c, e, f, g, m, k, p, l, r, t, v, q, u;
            r = this.pdf.internal.scaleFactor;
            g = {};
            k = p = u = m = f = l = e = void 0;
            t = [];
            v = [t];
            c = 0;
            for (q = this.settings.width; a.length;)
                if (m = a.shift(), u = b.shift(), m)
                    if (e = u["font-family"], l = u["font-style"], f = g[e + l], f || (f = this.pdf.internal.getFont(e, l).metadata.Unicode, g[e + l] = f), p = {
                            widths: f.widths,
                            kerning: f.kerning,
                            fontSize: 12 * u["font-size"],
                            textIndent: c
                        },
                        k = this.pdf.getStringUnitWidth(m, p) * p.fontSize / r, c + k > q) {
                        c = this.pdf.splitTextToSize(m, q, p);
                        for (t.push([c.shift(), u]); c.length;) t = [
                            [c.shift(), u]
                        ], v.push(t);
                        c = this.pdf.getStringUnitWidth(t[0][0], p) * p.fontSize / r
                    } else t.push([m, u]), c += k;
            if (void 0 !== u["text-align"] && ("center" === u["text-align"] || "right" === u["text-align"] || "justify" === u["text-align"]))
                for (e = 0; e < v.length; ++e) f = this.pdf.getStringUnitWidth(v[e][0][0], p) * p.fontSize / r, 0 < e && (v[e][0][1] = d(v[e][0][1])), f = q - f, "right" === u["text-align"] ? v[e][0][1]["margin-left"] =
                    f : "center" === u["text-align"] ? v[e][0][1]["margin-left"] = f / 2 : "justify" === u["text-align"] && (g = v[e][0][0].split(" ").length - 1, v[e][0][1]["word-spacing"] = f / g, e === v.length - 1 && (v[e][0][1]["word-spacing"] = 0));
            return v
        };
        r.prototype.RenderTextFragment = function(a, b) {
            var c;
            c = 0;
            this.pdf.internal.pageSize.height - this.pdf.margins_doc.bottom < this.y + this.pdf.internal.getFontSize() && (this.pdf.internal.write("ET", "Q"), this.pdf.addPage(), this.y = this.pdf.margins_doc.top, this.pdf.internal.write("q", "BT", this.pdf.internal.getCoordinateString(this.x),
                this.pdf.internal.getVerticalCoordinateString(this.y), "Td"), c = Math.max(c, b["line-height"], b["font-size"]), this.pdf.internal.write(0, (-12 * c).toFixed(2), "Td"));
            c = this.pdf.internal.getFont(b["font-family"], b["font-style"]);
            void 0 !== b["word-spacing"] && 0 < b["word-spacing"] && this.pdf.internal.write(b["word-spacing"].toFixed(2), "Tw");
            this.pdf.internal.write("/" + c.id, (12 * b["font-size"]).toFixed(2), "Tf", "(" + this.pdf.internal.pdfEscape(a) + ") Tj");
            void 0 !== b["word-spacing"] && this.pdf.internal.write(0, "Tw")
        };
        r.prototype.renderParagraph = function(a) {
            var b, c, d, e, f, g, h, m, k;
            if (c = l(this.paragraph.text), g = this.paragraph.style, b = this.paragraph.blockstyle, m = this.paragraph.blockstyle || {}, this.paragraph = {
                    text: [],
                    style: [],
                    blockstyle: {},
                    priorblockstyle: b
                }, c.join("").trim()) {
                g = this.splitFragmentsIntoLines(c, g);
                h = f = void 0;
                c = 12 / this.pdf.internal.scaleFactor;
                f = (Math.max((b["margin-top"] || 0) - (m["margin-bottom"] || 0), 0) + (b["padding-top"] || 0)) * c;
                m = ((b["margin-bottom"] || 0) + (b["padding-bottom"] || 0)) * c;
                b = this.pdf.internal.write;
                e = d = void 0;
                this.y += f;
                b("q", "BT", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td");
                for (var p = 0; g.length;) {
                    f = g.shift();
                    d = h = 0;
                    for (e = f.length; d !== e;) f[d][0].trim() && (h = Math.max(h, f[d][1]["line-height"], f[d][1]["font-size"]), k = 7 * f[d][1]["font-size"]), d++;
                    d = 0;
                    void 0 !== f[0][1]["margin-left"] && 0 < f[0][1]["margin-left"] && (wantedIndent = this.pdf.internal.getCoordinateString(f[0][1]["margin-left"]), d = wantedIndent - p, p = wantedIndent);
                    b(d, (-12 * h).toFixed(2),
                        "Td");
                    d = 0;
                    for (e = f.length; d !== e;) f[d][0] && this.RenderTextFragment(f[d][0], f[d][1]), d++;
                    if (this.y += h * c, this.executeWatchFunctions(f[0][1]) && 0 < g.length) {
                        var r = [],
                            t = [];
                        g.forEach(function(a) {
                            for (var b = 0, c = a.length; b !== c;) a[b][0] && (r.push(a[b][0] + " "), t.push(a[b][1])), ++b
                        });
                        g = this.splitFragmentsIntoLines(l(r), t);
                        b("ET", "Q");
                        b("q", "BT", this.pdf.internal.getCoordinateString(this.x), this.pdf.internal.getVerticalCoordinateString(this.y), "Td")
                    }
                }
                return a && "function" == typeof a && a.call(this, this.x - 9, this.y - k / 2),
                    b("ET", "Q"), this.y += m
            }
        };
        r.prototype.setBlockBoundary = function(a) {
            return this.renderParagraph(a)
        };
        r.prototype.setBlockStyle = function(a) {
            return this.paragraph.blockstyle = a
        };
        r.prototype.addText = function(a, b) {
            return this.paragraph.text.push(a), this.paragraph.style.push(b)
        };
        a = {
            helvetica: "helvetica",
            "sans-serif": "helvetica",
            "times new roman": "times",
            serif: "times",
            times: "times",
            monospace: "courier",
            courier: "courier"
        };
        f = {
            100: "normal",
            200: "normal",
            300: "normal",
            400: "normal",
            500: "bold",
            600: "bold",
            700: "bold",
            800: "bold",
            900: "bold",
            normal: "normal",
            bold: "bold",
            bolder: "bold",
            lighter: "normal"
        };
        e = {
            normal: "normal",
            italic: "italic",
            oblique: "italic"
        };
        TextAlignMap = {
            left: "left",
            right: "right",
            center: "center",
            justify: "justify"
        };
        g = {
            none: "none",
            right: "right",
            left: "left"
        };
        k = {
            none: "none",
            both: "both"
        };
        E = {
            normal: 1
        };
        c.fromHTML = function(a, b, c, d, e, f) {
            return this.margins_doc = f || {
                top: 0,
                bottom: 0
            }, d || (d = {}), d.elementHandlers || (d.elementHandlers = {}), B(this, a, isNaN(b) ? 4 : b, isNaN(c) ? 4 : c, d, e)
        }
    })(f.API);
    (function(c) {
        var d, b, a;
        c.addJS =
            function(c) {
                return a = c, this.internal.events.subscribe("postPutResources", function() {
                    d = this.internal.newObject();
                    this.internal.write("<< /Names [(EmbeddedJS) " + (d + 1) + " 0 R] >>", "endobj");
                    b = this.internal.newObject();
                    this.internal.write("<< /S /JavaScript /JS (", a, ") >>", "endobj")
                }), this.internal.events.subscribe("putCatalog", function() {
                    void 0 !== d && void 0 !== b && this.internal.write("/Names <</JavaScript " + d + " 0 R>>")
                }), this
            }
    })(f.API);
    (function(c) {
        var d = function(d, e, h, r) {
                var q = 5,
                    t = f;
                switch (r) {
                    case c.image_compression.FAST:
                        q =
                            3;
                        t = a;
                        break;
                    case c.image_compression.MEDIUM:
                        q = 6;
                        t = g;
                        break;
                    case c.image_compression.SLOW:
                        q = 9, t = k
                }
                for (var E, z, C = d.length / e, A = new Uint8Array(d.length + C), I = [b, a, f, g, k], B = 0; C > B; B++) {
                    if (z = B * e, r = d.subarray(z, z + e), t) A.set(t(r, h, E), z + B);
                    else {
                        for (var D = 0, F = I.length, G = []; F > D; D++) G[D] = I[D](r, h, E);
                        E = G.concat();
                        for (var H = void 0, F = D = void 0, J = 0, O = E.length; O > J;) {
                            for (var H = E[J].slice(1), K = 0, L = H.length, M = 0; L > K;) M += Math.abs(H[K++]);
                            H = M;
                            (D > H || !D) && (D = H, F = J);
                            J++
                        }
                        A.set(G[F], z + B)
                    }
                    E = r
                }
                d = A;
                e = Uint8Array;
                z = Math.LOG2E * Math.log(32768) -
                    8 << 4 | 8;
                h = z << 8;
                t = Math.min(3, 0);
                z = (h |= t << 6, h |= 0, h += 31 - h % 31, [z, h & 255]);
                e = new e(z);
                z = 1;
                t = 0;
                r = d.length;
                for (C = 0; 0 < r;) {
                    h = void 0 < r ? void 0 : r;
                    r -= h;
                    do z += d[C++], t += z; while (--h);
                    z %= 65521;
                    t %= 65521
                }
                h = (t << 16 | z) >>> 0;
                z = new l(q);
                q = z.append(d);
                z = z.flush();
                d = e.length + q.length + z.length;
                t = new Uint8Array(d + 4);
                return t.set(e), t.set(q, e.length), t.set(z, e.length + q.length), t[d++] = h >>> 24 & 255, t[d++] = h >>> 16 & 255, t[d++] = h >>> 8 & 255, t[d++] = 255 & h, c.arrayBufferToBinaryString(t)
            },
            b = function(a) {
                a = Array.apply([], a);
                return a.unshift(0),
                    a
            },
            a = function(a, b) {
                var c, d = [],
                    e = 0,
                    f = a.length;
                for (d[0] = 1; f > e; e++) c = a[e - b] || 0, d[e + 1] = a[e] - c + 256 & 255;
                return d
            },
            f = function(a, b, c) {
                var d = [],
                    e = 0,
                    f = a.length;
                for (d[0] = 2; f > e; e++) b = c && c[e] || 0, d[e + 1] = a[e] - b + 256 & 255;
                return d
            },
            g = function(a, b, c) {
                var d, e, f = [],
                    g = 0,
                    h = a.length;
                for (f[0] = 3; h > g; g++) d = a[g - b] || 0, e = c && c[g] || 0, f[g + 1] = a[g] + 256 - (d + e >>> 1) & 255;
                return f
            },
            k = function(a, b, c) {
                var d, e, f, g = [],
                    h = 0,
                    k = a.length;
                for (g[0] = 4; k > h; h++) {
                    d = a[h - b] || 0;
                    e = c && c[h] || 0;
                    f = c && c[h - b] || 0;
                    var l = d + e - f,
                        q = Math.abs(l - d),
                        u = Math.abs(l - e),
                        l = Math.abs(l -
                            f);
                    d = u >= q && l >= q ? d : l >= u ? e : f;
                    g[h + 1] = a[h] - d + 256 & 255
                }
                return g
            };
        c.processPNG = function(a, b, f, g) {
            var k, t, q, u, x, w, I = this.color_spaces.DEVICE_RGB,
                B = this.decode.FLATE_DECODE,
                D = 8;
            if (this.isArrayBuffer(a) && (a = new Uint8Array(a)), this.isArrayBufferView(a)) {
                if ("function" != typeof PNG || "function" != typeof e) throw Error("PNG support requires png.js and zlib.js");
                if (k = new PNG(a), a = k.imgData, D = k.bits, I = k.colorSpace, u = k.colors, -1 !== [4, 6].indexOf(k.colorType)) {
                    if (8 === k.bits)
                        for (var F, G, H = new window["Uint" + k.pixelBitlength +
                                "Array"](k.decodePixels().buffer), J = H.length, O = new Uint8Array(J * k.colors), K = new Uint8Array(J), L = k.pixelBitlength - k.bits, M = 0, Q = 0; J > M; M++) {
                            F = H[M];
                            for (G = 0; L > G;) O[Q++] = F >>> G & 255, G += k.bits;
                            K[M] = F >>> G & 255
                        }
                    if (16 === k.bits) {
                        H = new Uint32Array(k.decodePixels().buffer);
                        J = H.length;
                        O = new Uint8Array(32 / k.pixelBitlength * J * k.colors);
                        K = new Uint8Array(32 / k.pixelBitlength * J);
                        D = 1 < k.colors;
                        for (G = Q = M = 0; J > M;) F = H[M++], O[Q++] = F >>> 0 & 255, D && (O[Q++] = F >>> 16 & 255, F = H[M++], O[Q++] = F >>> 0 & 255), K[G++] = F >>> 16 & 255;
                        D = 8
                    }
                    if (J = g !== c.image_compression.NONE)
                        if (J =
                            "function" == typeof l, !J) throw Error("requires deflate.js for compression");
                    J ? (a = d(O, k.width * k.colors, k.colors, g), w = d(K, k.width, 1, g)) : (a = O, w = K, B = null)
                }
                if (3 === k.colorType && (I = this.color_spaces.INDEXED, x = k.palette, k.transparency.indexed)) {
                    g = k.transparency.indexed;
                    M = K = 0;
                    for (J = g.length; J > M; ++M) K += g[M];
                    if (K /= 255, K === J - 1 && -1 !== g.indexOf(0)) q = [g.indexOf(0)];
                    else if (K !== J) {
                        H = k.decodePixels();
                        K = new Uint8Array(H.length);
                        M = 0;
                        for (J = H.length; J > M; M++) K[M] = g[H[M]];
                        w = d(K, k.width, 1)
                    }
                }
                return t = B === this.decode.FLATE_DECODE ?
                    "/Predictor 15 /Colors " + u + " /BitsPerComponent " + D + " /Columns " + k.width : "/Colors " + u + " /BitsPerComponent " + D + " /Columns " + k.width, (this.isArrayBuffer(a) || this.isArrayBufferView(a)) && (a = this.arrayBufferToBinaryString(a)), (w && this.isArrayBuffer(w) || this.isArrayBufferView(w)) && (w = this.arrayBufferToBinaryString(w)), this.createImageInfo(a, k.width, k.height, I, D, B, b, f, t, q, x, w)
            }
            throw Error("Unsupported PNG image data, try using JPEG instead.");
        }
    })(f.API);
    (function(c) {
        c.addSVG = function(c, b, a, d, e) {
            function f(a) {
                for (var b =
                        parseFloat(a[1]), c = parseFloat(a[2]), d = [], e = 3, g = a.length; g > e;) "c" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2]), parseFloat(a[e + 3]), parseFloat(a[e + 4]), parseFloat(a[e + 5]), parseFloat(a[e + 6])]), e += 7) : "l" === a[e] ? (d.push([parseFloat(a[e + 1]), parseFloat(a[e + 2])]), e += 3) : e += 1;
                return [b, c, d]
            }
            if (void 0 === b || void 0 === a) throw Error("addSVG needs values for 'x' and 'y'");
            var g = function(a) {
                    var b = a.createElement("iframe"),
                        c = a.createElement("style");
                    c.type = "text/css";
                    c.styleSheet ? c.styleSheet.cssText = ".jsPDF_sillysvg_iframe {display:none;position:absolute;}" :
                        c.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));
                    a.getElementsByTagName("head")[0].appendChild(c);
                    return b.name = "childframe", b.setAttribute("width", 0), b.setAttribute("height", 0), b.setAttribute("frameborder", "0"), b.setAttribute("scrolling", "no"), b.setAttribute("seamless", "seamless"), b.setAttribute("class", "jsPDF_sillysvg_iframe"), a.body.appendChild(b), b
                }(document),
                g = function(a, b) {
                    var c = (b.contentWindow || b.contentDocument).document;
                    return c.write(a), c.close(),
                        c.getElementsByTagName("svg")[0]
                }(c, g);
            c = [1, 1];
            var k = parseFloat(g.getAttribute("width")),
                l = parseFloat(g.getAttribute("height"));
            k && l && (d && e ? c = [d / k, e / l] : d ? c = [d / k, d / k] : e && (c = [e / l, e / l]));
            var r, k = g.childNodes;
            d = 0;
            for (e = k.length; e > d; d++) g = k[d], g.tagName && "PATH" === g.tagName.toUpperCase() && (r = f(g.getAttribute("d").split(" ")), r[0] = r[0] * c[0] + b, r[1] = r[1] * c[1] + a, this.lines.call(this, r[2], r[0], r[1], c));
            return this
        }
    })(f.API);
    (function(c) {
        var d = c.getCharWidthsArray = function(a, b) {
                b || (b = {});
                var c, d, e, f = b.widths ?
                    b.widths : this.internal.getFont().metadata.Unicode.widths,
                    g = f.fof ? f.fof : 1,
                    h = b.kerning ? b.kerning : this.internal.getFont().metadata.Unicode.kerning,
                    k = h.fof ? h.fof : 1,
                    l = 0,
                    q = f[0] || g,
                    u = [];
                c = 0;
                for (d = a.length; d > c; c++) e = a.charCodeAt(c), u.push((f[e] || q) / g + (h[e] && h[e][l] || 0) / k), l = e;
                return u
            },
            b = function(a) {
                for (var b = a.length, c = 0; b;) b--, c += a[b];
                return c
            },
            a = c.getStringUnitWidth = function(a, c) {
                return b(d.call(this, a, c))
            },
            e = function(a, b, c, d) {
                for (var e = [], f = 0, g = a.length, h = 0; f !== g && h + b[f] < c;) h += b[f], f++;
                e.push(a.slice(0,
                    f));
                c = f;
                for (h = 0; f !== g;) h + b[f] > d && (e.push(a.slice(c, f)), h = 0, c = f), h += b[f], f++;
                return c !== f && e.push(a.slice(c, f)), e
            },
            f = function(c, f, g) {
                g || (g = {});
                var k, l, q, t, u, z = [],
                    C = [z];
                t = g.textIndent || 0;
                var A = 0,
                    I = 0,
                    B = c.split(" "),
                    D = d(" ", g)[0];
                if (u = -1 === g.lineIndent ? B[0].length + 2 : g.lineIndent || 0) {
                    var F = Array(u).join(" "),
                        G = [];
                    B.map(function(a) {
                        a = a.split(/\s*\n/);
                        1 < a.length ? G = G.concat(a.map(function(a, b) {
                            return (b && a.length ? "\n" : "") + a
                        })) : G.push(a[0])
                    });
                    B = G;
                    u = a(F, g)
                }
                c = 0;
                for (q = B.length; q > c; c++) {
                    var H = 0;
                    if (k = B[c], u && "\n" ==
                        k[0] && (k = k.substr(1), H = 1), l = d(k, g), I = b(l), t + A + I > f || H) {
                        if (I > f) {
                            t = e(k, l, f - (t + A), f);
                            z.push(t.shift());
                            for (z = [t.pop()]; t.length;) C.push([t.shift()]);
                            I = b(l.slice(k.length - z[0].length))
                        } else z = [k];
                        C.push(z);
                        t = I + u
                    } else z.push(k), t += A + I;
                    A = D
                }
                return C.map(u ? function(a, b) {
                    return (b ? F : "") + a.join(" ")
                } : function(a) {
                    return a.join(" ")
                })
            };
        c.splitTextToSize = function(a, b, c) {
            c || (c = {});
            var d = c.fontSize || this.internal.getFontSize(),
                e;
            e = {
                0: 1
            };
            var g = {};
            if (c.widths && c.kerning) e = {
                widths: c.widths,
                kerning: c.kerning
            };
            else {
                var h =
                    this.internal.getFont(c.fontName, c.fontStyle);
                e = h.metadata.Unicode ? {
                    widths: h.metadata.Unicode.widths || e,
                    kerning: h.metadata.Unicode.kerning || g
                } : {
                    widths: e,
                    kerning: g
                }
            }
            a = Array.isArray(a) ? a : a.split(/\r?\n/);
            b = 1 * this.internal.scaleFactor * b / d;
            e.textIndent = c.textIndent ? 1 * c.textIndent * this.internal.scaleFactor / d : 0;
            e.lineIndent = c.lineIndent;
            g = [];
            c = 0;
            for (d = a.length; d > c; c++) g = g.concat(f(a[c], b, e));
            return g
        }
    })(f.API);
    (function(c) {
        var d = function(a) {
                for (var b = {}, c = 0; 16 > c; c++) b["klmnopqrstuvwxyz" [c]] = "0123456789abcdef" [c];
                for (var d, e, f, g, h = {}, k = 1, l = h, q = [], w = "", I = "", B = a.length - 1, c = 1; c != B;) g = a[c], c += 1, "'" == g ? d ? (f = d.join(""), d = void 0) : d = [] : d ? d.push(g) : "{" == g ? (q.push([l, f]), l = {}, f = void 0) : "}" == g ? (e = q.pop(), e[0][e[1]] = l, f = void 0, l = e[0]) : "-" == g ? k = -1 : void 0 === f ? b.hasOwnProperty(g) ? (w += b[g], f = parseInt(w, 16) * k, k = 1, w = "") : w += g : b.hasOwnProperty(g) ? (I += b[g], l[f] = parseInt(I, 16) * k, k = 1, f = void 0, I = "") : I += g;
                return h
            },
            b = {
                codePages: ["WinAnsiEncoding"],
                WinAnsiEncoding: d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")
            },
            a = {
                Unicode: {
                    Courier: b,
                    "Courier-Bold": b,
                    "Courier-BoldOblique": b,
                    "Courier-Oblique": b,
                    Helvetica: b,
                    "Helvetica-Bold": b,
                    "Helvetica-BoldOblique": b,
                    "Helvetica-Oblique": b,
                    "Times-Roman": b,
                    "Times-Bold": b,
                    "Times-BoldItalic": b,
                    "Times-Italic": b
                }
            },
            e = {
                Unicode: {
                    "Courier-Oblique": d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-BoldItalic": d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
                    "Helvetica-Bold": d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
                    Courier: d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Courier-BoldOblique": d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-Bold": d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
                    Helvetica: d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
                    "Helvetica-BoldOblique": d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
                    "Courier-Bold": d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),
                    "Times-Italic": d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
                    "Times-Roman": d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
                    "Helvetica-Oblique": d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")
                }
            };
        c.events.push(["addFonts", function(b) {
            var c, d, f, g, h;
            for (d in b.fonts) b.fonts.hasOwnProperty(d) && (c = b.fonts[d], f = e.Unicode[c.PostScriptName], f && (g = c.metadata.Unicode ? c.metadata.Unicode : c.metadata.Unicode = {}, g.widths = f.widths, g.kerning = f.kerning), h = a.Unicode[c.PostScriptName], h && (g = c.metadata.Unicode ? c.metadata.Unicode : c.metadata.Unicode = {}, g.encoding = h, h.codePages && h.codePages.length && (c.encoding = h.codePages[0])))
        }])
    })(f.API);
    (function(c) {
        c.putTotalPages = function(c) {
            c = new RegExp(c, "g");
            for (var b = 1; b <=
                this.internal.getNumberOfPages(); b++)
                for (var a = 0; a < this.internal.pages[b].length; a++) this.internal.pages[b][a] = this.internal.pages[b][a].replace(c, this.internal.getNumberOfPages());
            return this
        }
    })(f.API);
    (function(c) {
        if (c.URL = c.URL || c.webkitURL, c.Blob && c.URL) try {
            return new Blob, void 0
        } catch (d) {}
        var b = c.BlobBuilder || c.WebKitBlobBuilder || c.MozBlobBuilder || function(a) {
            var b = function(a) {
                    return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]
                },
                c = function() {
                    this.data = []
                },
                d = function(a, b, c) {
                    this.data =
                        a;
                    this.size = a.length;
                    this.type = b;
                    this.encoding = c
                },
                e = c.prototype,
                f = d.prototype,
                g = a.FileReaderSync,
                h = function(a) {
                    this.code = this[this.name = a]
                },
                k = "NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
                l = k.length,
                q = a.URL || a.webkitURL || a,
                z = q.createObjectURL,
                C = q.revokeObjectURL,
                A = q,
                I = a.btoa,
                B = a.atob,
                D = a.ArrayBuffer,
                F = a.Uint8Array,
                G = /^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;
            for (d.fake = f.fake = !0; l--;) h.prototype[k[l]] = l + 1;
            return q.createObjectURL ||
                (A = a.URL = function(a) {
                    var b, c = document.createElementNS("http://www.w3.org/1999/xhtml", "a");
                    return c.href = a, "origin" in c || ("data:" === c.protocol.toLowerCase() ? c.origin = null : (b = a.match(G), c.origin = b && b[1])), c
                }), A.createObjectURL = function(a) {
                    var b, c = a.type;
                    return null === c && (c = "application/octet-stream"), a instanceof d ? (b = "data:" + c, "base64" === a.encoding ? b + ";base64," + a.data : "URI" === a.encoding ? b + "," + decodeURIComponent(a.data) : I ? b + ";base64," + I(a.data) : b + "," + encodeURIComponent(a.data)) : z ? z.call(q, a) : void 0
                },
                A.revokeObjectURL = function(a) {
                    "data:" !== a.substring(0, 5) && C && C.call(q, a)
                }, e.append = function(a) {
                    var c = this.data;
                    if (F && (a instanceof D || a instanceof F)) {
                        var e = "";
                        a = new F(a);
                        for (var f = 0, k = a.length; k > f; f++) e += String.fromCharCode(a[f]);
                        c.push(e)
                    } else if ("Blob" === b(a) || "File" === b(a)) {
                        if (!g) throw new h("NOT_READABLE_ERR");
                        e = new g;
                        c.push(e.readAsBinaryString(a))
                    } else a instanceof d ? "base64" === a.encoding && B ? c.push(B(a.data)) : "URI" === a.encoding ? c.push(decodeURIComponent(a.data)) : "raw" === a.encoding && c.push(a.data) :
                        ("string" != typeof a && (a += ""), c.push(unescape(encodeURIComponent(a))))
                }, e.getBlob = function(a) {
                    return arguments.length || (a = null), new d(this.data.join(""), a, "raw")
                }, e.toString = function() {
                    return "[object BlobBuilder]"
                }, f.slice = function(a, b, c) {
                    var e = arguments.length;
                    return 3 > e && (c = null), new d(this.data.slice(a, 1 < e ? b : this.data.length), c, this.encoding)
                }, f.toString = function() {
                    return "[object Blob]"
                }, f.close = function() {
                    this.size = 0;
                    delete this.data
                }, c
        }(c);
        c.Blob = function(a, c) {
            var d = c ? c.type || "" : "",
                e = new b;
            if (a)
                for (var f =
                        0, g = a.length; g > f; f++) e.append(a[f]);
            return e.getBlob(d)
        }
    })("undefined" != typeof self && self || "undefined" != typeof window && window || this.content || this);
    var q = q || "undefined" != typeof navigator && navigator.msSaveOrOpenBlob && navigator.msSaveOrOpenBlob.bind(navigator) || function(c) {
        if ("undefined" == typeof navigator || !/MSIE [1-9]\./.test(navigator.userAgent)) {
            var d = c.document,
                b = d.createElementNS("http://www.w3.org/1999/xhtml", "a"),
                a = !c.externalHost && "download" in b,
                e = function(a) {
                    var b = d.createEvent("MouseEvents");
                    b.initMouseEvent("click", !0, !1, c, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null);
                    a.dispatchEvent(b)
                },
                f = c.webkitRequestFileSystem,
                g = c.requestFileSystem || f || c.mozRequestFileSystem,
                k = function(a) {
                    (c.setImmediate || c.setTimeout)(function() {
                        throw a;
                    }, 0)
                },
                m = 0,
                l = function(a) {
                    var b = function() {
                        "string" == typeof a ? (c.URL || c.webkitURL || c).revokeObjectURL(a) : a.remove()
                    };
                    c.chrome ? b() : setTimeout(b, 10)
                },
                r = function(a, b, c) {
                    b = [].concat(b);
                    for (var d = b.length; d--;) {
                        var e = a["on" + b[d]];
                        if ("function" == typeof e) try {
                            e.call(a, c || a)
                        } catch (f) {
                            k(f)
                        }
                    }
                },
                q = function(d, h) {
                    var k, p, t, q = this,
                        y = d.type,
                        F = !1,
                        G = function() {
                            r(q, ["writestart", "progress", "write", "writeend"])
                        },
                        H = function() {
                            ((F || !k) && (k = (c.URL || c.webkitURL || c).createObjectURL(d)), p) ? p.location.href = k: void 0 == c.open(k, "_blank") && "undefined" != typeof safari && (c.location.href = k);
                            q.readyState = q.DONE;
                            G();
                            l(k)
                        },
                        J = function(a) {
                            return function() {
                                return q.readyState !== q.DONE ? a.apply(this, arguments) : void 0
                            }
                        },
                        O = {
                            create: !0,
                            exclusive: !1
                        };
                    return q.readyState = q.INIT, h || (h = "download"), a ? (k = (c.URL || c.webkitURL || c).createObjectURL(d),
                        b.href = k, b.download = h, e(b), q.readyState = q.DONE, G(), l(k), void 0) : (c.chrome && y && "application/octet-stream" !== y && (t = d.slice || d.webkitSlice, d = t.call(d, 0, d.size, "application/octet-stream"), F = !0), f && "download" !== h && (h += ".download"), ("application/octet-stream" === y || f) && (p = c), g ? (m += d.size, g(c.TEMPORARY, m, J(function(a) {
                        a.root.getDirectory("saved", O, J(function(a) {
                            var b = function() {
                                a.getFile(h, O, J(function(a) {
                                    a.createWriter(J(function(b) {
                                        b.onwriteend = function(b) {
                                            p.location.href = a.toURL();
                                            q.readyState = q.DONE;
                                            r(q, "writeend", b);
                                            l(a)
                                        };
                                        b.onerror = function() {
                                            var a = b.error;
                                            a.code !== a.ABORT_ERR && H()
                                        };
                                        ["writestart", "progress", "write", "abort"].forEach(function(a) {
                                            b["on" + a] = q["on" + a]
                                        });
                                        b.write(d);
                                        q.abort = function() {
                                            b.abort();
                                            q.readyState = q.DONE
                                        };
                                        q.readyState = q.WRITING
                                    }), H)
                                }), H)
                            };
                            a.getFile(h, {
                                create: !1
                            }, J(function(a) {
                                a.remove();
                                b()
                            }), J(function(a) {
                                a.code === a.NOT_FOUND_ERR ? b() : H()
                            }))
                        }), H)
                    }), H), void 0) : (H(), void 0))
                },
                t = q.prototype;
            return t.abort = function() {
                    this.readyState = this.DONE;
                    r(this, "abort")
                }, t.readyState = t.INIT =
                0, t.WRITING = 1, t.DONE = 2, t.error = t.onwritestart = t.onprogress = t.onwrite = t.onabort = t.onerror = t.onwriteend = null,
                function(a, b) {
                    return new q(a, b)
                }
        }
    }("undefined" != typeof self && self || "undefined" != typeof window && window || this.content);
    "undefined" != typeof module && null !== module && (module.exports = q);
    void
    function(c, d) {
        "object" == typeof module ? module.exports = d() : c.adler32cs = d()
    }(f, function() {
        var c = "function" == typeof ArrayBuffer && "function" == typeof Uint8Array,
            d = null,
            b = function() {
                if (!c) return function() {
                    return !1
                };
                try {
                    var a =
                        require("buffer");
                    "function" == typeof a.Buffer && (d = a.Buffer)
                } catch (b) {}
                return function(a) {
                    return a instanceof ArrayBuffer || null !== d && a instanceof d
                }
            }(),
            a = function() {
                return null !== d ? function(a) {
                    return (new d(a, "utf8")).toString("binary")
                } : function(a) {
                    return unescape(encodeURIComponent(a))
                }
            }(),
            e = function(a, b) {
                for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++) c = (c + (255 & b.charCodeAt(e))) % 65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            },
            f = function(a, b) {
                for (var c = 65535 & a, d = a >>> 16, e = 0, f = b.length; f > e; e++) c = (c + b[e]) %
                    65521, d = (d + c) % 65521;
                return (d << 16 | c) >>> 0
            },
            g = {},
            k = g.Adler32 = function() {
                var d = function(a) {
                        if (!(this instanceof d)) throw new TypeError("Constructor cannot called be as a function.");
                        if (!isFinite(a = null == a ? 1 : +a)) throw Error("First arguments needs to be a finite number.");
                        this.checksum = a >>> 0
                    },
                    g = d.prototype = {};
                return g.constructor = d, d.from = function(a) {
                        return a.prototype = g, a
                    }(function(a) {
                        if (!(this instanceof d)) throw new TypeError("Constructor cannot called be as a function.");
                        if (null == a) throw Error("First argument needs to be a string.");
                        this.checksum = e(1, a.toString())
                    }), d.fromUtf8 = function(a) {
                        return a.prototype = g, a
                    }(function(b) {
                        if (!(this instanceof d)) throw new TypeError("Constructor cannot called be as a function.");
                        if (null == b) throw Error("First argument needs to be a string.");
                        b = a(b.toString());
                        this.checksum = e(1, b)
                    }), c && (d.fromBuffer = function(a) {
                        return a.prototype = g, a
                    }(function(a) {
                        if (!(this instanceof d)) throw new TypeError("Constructor cannot called be as a function.");
                        if (!b(a)) throw Error("First argument needs to be ArrayBuffer.");
                        a = new Uint8Array(a);
                        return this.checksum = f(1, a)
                    })), g.update = function(a) {
                        if (null == a) throw Error("First argument needs to be a string.");
                        return a = a.toString(), this.checksum = e(this.checksum, a)
                    }, g.updateUtf8 = function(b) {
                        if (null == b) throw Error("First argument needs to be a string.");
                        b = a(b.toString());
                        return this.checksum = e(this.checksum, b)
                    }, c && (g.updateBuffer = function(a) {
                        if (!b(a)) throw Error("First argument needs to be ArrayBuffer.");
                        a = new Uint8Array(a);
                        return this.checksum = f(this.checksum, a)
                    }), g.clone =
                    function() {
                        return new k(this.checksum)
                    }, d
            }();
        return g.from = function(a) {
            if (null == a) throw Error("First argument needs to be a string.");
            return e(1, a.toString())
        }, g.fromUtf8 = function(b) {
            if (null == b) throw Error("First argument needs to be a string.");
            b = a(b.toString());
            return e(1, b)
        }, c && (g.fromBuffer = function(a) {
            if (!b(a)) throw Error("First argument need to be ArrayBuffer.");
            a = new Uint8Array(a);
            return f(1, a)
        }), g
    });
    var l = function() {
        function c() {
            var a = this;
            a.build_tree = function(b) {
                var c, d, e, f = a.dyn_tree;
                d =
                    a.stat_desc.static_tree;
                var h = a.stat_desc.elems,
                    k = -1;
                b.heap_len = 0;
                b.heap_max = q;
                for (c = 0; h > c; c++) 0 !== f[2 * c] ? (b.heap[++b.heap_len] = k = c, b.depth[c] = 0) : f[2 * c + 1] = 0;
                for (; 2 > b.heap_len;) e = b.heap[++b.heap_len] = 2 > k ? ++k : 0, f[2 * e] = 1, b.depth[e] = 0, b.opt_len--, d && (b.static_len -= d[2 * e + 1]);
                a.max_code = k;
                for (c = Math.floor(b.heap_len / 2); 1 <= c; c--) b.pqdownheap(f, c);
                e = h;
                do c = b.heap[1], b.heap[1] = b.heap[b.heap_len--], b.pqdownheap(f, 1), d = b.heap[1], b.heap[--b.heap_max] = c, b.heap[--b.heap_max] = d, f[2 * e] = f[2 * c] + f[2 * d], b.depth[e] = Math.max(b.depth[c],
                    b.depth[d]) + 1, f[2 * c + 1] = f[2 * d + 1] = e, b.heap[1] = e++, b.pqdownheap(f, 1); while (2 <= b.heap_len);
                b.heap[--b.heap_max] = b.heap[1];
                var m, p, h = a.dyn_tree,
                    k = a.stat_desc.static_tree,
                    l = a.stat_desc.extra_bits,
                    r = a.stat_desc.extra_base,
                    t = a.stat_desc.max_length,
                    v = 0;
                for (d = 0; g >= d; d++) b.bl_count[d] = 0;
                h[2 * b.heap[b.heap_max] + 1] = 0;
                for (c = b.heap_max + 1; q > c; c++) e = b.heap[c], d = h[2 * h[2 * e + 1] + 1] + 1, d > t && (d = t, v++), h[2 * e + 1] = d, e > a.max_code || (b.bl_count[d]++, m = 0, e >= r && (m = l[e - r]), p = h[2 * e], b.opt_len += p * (d + m), k && (b.static_len += p * (k[2 * e + 1] + m)));
                if (0 !== v) {
                    do {
                        for (d = t - 1; 0 === b.bl_count[d];) d--;
                        b.bl_count[d]--;
                        b.bl_count[d + 1] += 2;
                        b.bl_count[t]--;
                        v -= 2
                    } while (0 < v);
                    for (d = t; 0 !== d; d--)
                        for (e = b.bl_count[d]; 0 !== e;) m = b.heap[--c], m > a.max_code || (h[2 * m + 1] != d && (b.opt_len += (d - h[2 * m + 1]) * h[2 * m], h[2 * m + 1] = d), e--)
                }
                m = a.max_code;
                p = b.bl_count;
                b = [];
                e = 0;
                for (c = 1; g >= c; c++) b[c] = e = e + p[c - 1] << 1;
                for (p = 0; m >= p; p++)
                    if (d = f[2 * p + 1], 0 !== d) {
                        c = 2 * p;
                        e = b[d]++;
                        h = 0;
                        do h |= 1 & e, e >>>= 1, h <<= 1; while (0 < --d);
                        f[c] = h >>> 1
                    }
            }
        }

        function d(a, b, c, e, f) {
            this.static_tree = a;
            this.extra_bits = b;
            this.extra_base =
                c;
            this.elems = e;
            this.max_length = f
        }

        function b(a, b, c, d, e) {
            this.good_length = a;
            this.max_lazy = b;
            this.nice_length = c;
            this.max_chain = d;
            this.func = e
        }

        function a(a, b, c, d) {
            var e = a[2 * b];
            a = a[2 * c];
            return a > e || e == a && d[b] <= d[c]
        }

        function e() {
            function b() {
                var a;
                for (a = 0; r > a; a++) Ha[2 * a] = 0;
                for (a = 0; k > a; a++) Ma[2 * a] = 0;
                for (a = 0; m > a; a++) ua[2 * a] = 0;
                Ha[2 * t] = 1;
                Ca = bb = fa.opt_len = fa.static_len = 0
            }

            function f(a, b) {
                var c, d, e = -1,
                    g = a[1],
                    h = 0,
                    k = 7,
                    m = 4;
                0 === g && (k = 138, m = 3);
                a[2 * (b + 1) + 1] = 65535;
                for (c = 0; b >= c; c++) d = g, g = a[2 * (c + 1) + 1], ++h < k && d == g || (m > h ?
                    ua[2 * d] += h : 0 !== d ? (d != e && ua[2 * d]++, ua[2 * E]++) : 10 >= h ? ua[2 * z]++ : ua[2 * C]++, h = 0, e = d, 0 === g ? (k = 138, m = 3) : d == g ? (k = 6, m = 3) : (k = 7, m = 4))
            }

            function g(a) {
                fa.pending_buf[fa.pending++] = a
            }

            function q(a) {
                g(255 & a);
                g(a >>> 8 & 255)
            }

            function u(a, b) {
                ra > A - b ? (wa |= a << ra & 65535, q(wa), wa = a >>> A - ra, ra += b - A) : (wa |= a << ra & 65535, ra += b)
            }

            function w(a, b) {
                var c = 2 * a;
                u(65535 & b[c], 65535 & b[c + 1])
            }

            function x(a, b) {
                var c, d, e = -1,
                    f = a[1],
                    g = 0,
                    h = 7,
                    k = 4;
                0 === f && (h = 138, k = 3);
                for (c = 0; b >= c; c++)
                    if (d = f, f = a[2 * (c + 1) + 1], !(++g < h && d == f)) {
                        if (k > g) {
                            do w(d, ua); while (0 !== --g)
                        } else 0 !== d ? (d != e && (w(d, ua), g--), w(E, ua), u(g - 3, 2)) : 10 >= g ? (w(z, ua), u(g - 3, 3)) : (w(C, ua), u(g - 11, 7));
                        g = 0;
                        e = d;
                        0 === f ? (h = 138, k = 3) : d == f ? (h = 6, k = 3) : (h = 7, k = 4)
                    }
            }

            function y() {
                16 == ra ? (q(wa), wa = 0, ra = 0) : 8 <= ra && (g(255 & wa), wa >>>= 8, ra -= 8)
            }

            function V(a, b) {
                var d, e, f;
                if (fa.pending_buf[Ta + 2 * Ca] = a >>> 8 & 255, fa.pending_buf[Ta + 2 * Ca + 1] = 255 & a, fa.pending_buf[cb + Ca] = 255 & b, Ca++, 0 === a ? Ha[2 * b]++ : (bb++, a--, Ha[2 * (c._length_code[b] + l + 1)]++, Ma[2 * c.d_code(a)]++), 0 === (8191 & Ca) && 2 < va) {
                    d = 8 * Ca;
                    e = Z - Da;
                    for (f = 0; k > f; f++) d += Ma[2 * f] * (5 + c.extra_dbits[f]);
                    if (d >>>= 3, bb < Math.floor(Ca / 2) && d < Math.floor(e / 2)) return !0
                }
                return Ca == Oa - 1
            }

            function jb(a, b) {
                var d, e, f, g, h = 0;
                if (0 !== Ca) {
                    do d = fa.pending_buf[Ta + 2 * h] << 8 & 65280 | 255 & fa.pending_buf[Ta + 2 * h + 1], e = 255 & fa.pending_buf[cb + h], h++, 0 === d ? w(e, a) : (f = c._length_code[e], w(f + l + 1, a), g = c.extra_lbits[f], 0 !== g && (e -= c.base_length[f], u(e, g)), d--, f = c.d_code(d), w(f, b), g = c.extra_dbits[f], 0 !== g && (d -= c.base_dist[f], u(d, g))); while (Ca > h)
                }
                w(t, a);
                Ua = a[2 * t + 1]
            }

            function kb() {
                8 < ra ? q(wa) : 0 < ra && g(255 & wa);
                ra = wa = 0
            }

            function lb(a, b, c) {
                kb();
                Ua =
                    8;
                c && (q(b), q(~b));
                fa.pending_buf.set(ba.subarray(a, a + b), fa.pending);
                fa.pending += b
            }

            function La(a) {
                var e = 0 <= Da ? Da : -1,
                    g = Z - Da,
                    k, p, l = 0;
                if (0 < va) {
                    Va.build_tree(fa);
                    Wa.build_tree(fa);
                    f(Ha, Va.max_code);
                    f(Ma, Wa.max_code);
                    db.build_tree(fa);
                    for (l = m - 1; 3 <= l && 0 === ua[2 * c.bl_order[l] + 1]; l--);
                    l = (fa.opt_len += 3 * (l + 1) + 14, l);
                    k = fa.opt_len + 3 + 7 >>> 3;
                    p = fa.static_len + 3 + 7 >>> 3;
                    k >= p && (k = p)
                } else k = p = g + 5;
                if (k >= g + 4 && -1 != e) u((Ea << 1) + (a ? 1 : 0), 3), lb(e, g, !0);
                else if (p == k) u((Ga << 1) + (a ? 1 : 0), 3), jb(d.static_ltree, d.static_dtree);
                else {
                    u((pa <<
                        1) + (a ? 1 : 0), 3);
                    e = Va.max_code + 1;
                    g = Wa.max_code + 1;
                    l += 1;
                    u(e - 257, 5);
                    u(g - 1, 5);
                    u(l - 4, 4);
                    for (k = 0; l > k; k++) u(ua[2 * c.bl_order[k] + 1], 3);
                    x(Ha, e - 1);
                    x(Ma, g - 1);
                    jb(Ha, Ma)
                }
                b();
                a && kb();
                Da = Z;
                na.flush_pending()
            }

            function $a() {
                var a, b, c, d;
                do {
                    if (d = nb - ga - Z, 0 === d && 0 === Z && 0 === ga) d = ja;
                    else if (-1 == d) d--;
                    else if (Z >= ja + ja - ta) {
                        ba.set(ba.subarray(ja, ja + ja), 0);
                        Pa -= ja;
                        Z -= ja;
                        Da -= ja;
                        c = a = Qa;
                        do b = 65535 & oa[--c], oa[c] = b >= ja ? b - ja : 0; while (0 !== --a);
                        c = a = ja;
                        do b = 65535 & Fa[--c], Fa[c] = b >= ja ? b - ja : 0; while (0 !== --a);
                        d += ja
                    }
                    if (0 === na.avail_in) break;
                    a =
                        na.read_buf(ba, Z + ga, d);
                    ga += a;
                    ga >= ma && (ia = 255 & ba[Z], ia = (ia << Ia ^ 255 & ba[Z + 1]) & Ja)
                } while (ta > ga && 0 !== na.avail_in)
            }

            function mb(a) {
                var b, c, d = eb,
                    e = Z,
                    f = Aa,
                    g = Z > ja - ta ? Z - (ja - ta) : 0,
                    h = fb,
                    k = Ba,
                    m = Z + Ka,
                    p = ba[e + f - 1],
                    l = ba[e + f];
                Aa >= gb && (d >>= 2);
                h > ga && (h = ga);
                do
                    if (b = a, ba[b + f] == l && ba[b + f - 1] == p && ba[b] == ba[e] && ba[++b] == ba[e + 1]) {
                        e += 2;
                        for (b++; ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && ba[++e] == ba[++b] && m > e;);
                        if (c = Ka - (m - e), e = m - Ka, c > f) {
                            if (Pa = a,
                                f = c, c >= h) break;
                            p = ba[e + f - 1];
                            l = ba[e + f]
                        }
                    }
                while ((a = 65535 & Fa[a & k]) > g && 0 !== --d);
                return ga >= f ? f : ga
            }

            function pb(a) {
                for (var b, c, d = 0;;) {
                    if (ta > ga) {
                        if ($a(), ta > ga && a == G) return ca;
                        if (0 === ga) break
                    }
                    if (ga >= ma && (ia = (ia << Ia ^ 255 & ba[Z + (ma - 1)]) & Ja, d = 65535 & oa[ia], Fa[Z & Ba] = oa[ia], oa[ia] = Z), Aa = sa, ob = Pa, sa = ma - 1, 0 !== d && Ya > Aa && ja - ta >= (Z - d & 65535) && (Xa != D && (sa = mb(d)), 5 >= sa && (Xa == B || sa == ma && 4096 < Z - Pa) && (sa = ma - 1)), Aa >= ma && Aa >= sa) {
                        c = Z + ga - ma;
                        b = V(Z - 1 - ob, Aa - ma);
                        ga -= Aa - 1;
                        Aa -= 2;
                        do ++Z <= c && (ia = (ia << Ia ^ 255 & ba[Z + (ma - 1)]) & Ja, d = 65535 & oa[ia],
                            Fa[Z & Ba] = oa[ia], oa[ia] = Z); while (0 !== --Aa);
                        if (Ra = 0, sa = ma - 1, Z++, b && (La(!1), 0 === na.avail_out)) return ca
                    } else if (0 !== Ra) {
                        if (b = V(0, 255 & ba[Z - 1]), b && La(!1), Z++, ga--, 0 === na.avail_out) return ca
                    } else Ra = 1, Z++, ga--
                }
                return 0 !== Ra && (V(0, 255 & ba[Z - 1]), Ra = 0), La(a == O), 0 === na.avail_out ? a == O ? ea : ca : a == O ? da : ha
            }
            var na, za, ab, ya, ja, Na, Ba, ba, nb, Fa, oa, ia, Qa, hb, Ja, Ia, Da, sa, ob, Ra, Z, Pa, ga, Aa, eb, Ya, va, Xa, gb, fb, Ha, Ma, ua, fa = this,
                Va = new c,
                Wa = new c,
                db = new c;
            fa.depth = [];
            var cb, Oa, Ca, Ta, bb, Ua, wa, ra;
            fa.bl_count = [];
            fa.heap = [];
            Ha = [];
            Ma = [];
            ua = [];
            fa.pqdownheap = function(b, c) {
                for (var d = fa.heap, e = d[c], f = c << 1; f <= fa.heap_len && (f < fa.heap_len && a(b, d[f + 1], d[f], fa.depth) && f++, !a(b, e, d[f], fa.depth));) d[c] = d[f], c = f, f <<= 1;
                d[c] = e
            };
            fa.deflateInit = function(a, c, e, f, g, k) {
                f || (f = xa);
                g || (g = X);
                k || (k = F);
                a.msg = null;
                c == I && (c = 6);
                if (1 > g || g > P || f != xa || 9 > e || 15 < e || 0 > c || 9 < c || 0 > k || k > D) a = Q;
                else {
                    a.dstate = fa;
                    Na = e;
                    ja = 1 << Na;
                    Ba = ja - 1;
                    hb = g + 7;
                    Qa = 1 << hb;
                    Ja = Qa - 1;
                    Ia = Math.floor((hb + ma - 1) / ma);
                    ba = new Uint8Array(2 * ja);
                    Fa = [];
                    oa = [];
                    Oa = 1 << g + 6;
                    fa.pending_buf = new Uint8Array(4 * Oa);
                    ab =
                        4 * Oa;
                    Ta = Math.floor(Oa / 2);
                    cb = 3 * Oa;
                    va = c;
                    Xa = k;
                    a.total_in = a.total_out = 0;
                    a.msg = null;
                    fa.pending = 0;
                    fa.pending_out = 0;
                    za = aa;
                    ya = G;
                    Va.dyn_tree = Ha;
                    Va.stat_desc = d.static_l_desc;
                    Wa.dyn_tree = Ma;
                    Wa.stat_desc = d.static_d_desc;
                    db.dyn_tree = ua;
                    db.stat_desc = d.static_bl_desc;
                    ra = wa = 0;
                    Ua = 8;
                    b();
                    nb = 2 * ja;
                    for (a = oa[Qa - 1] = 0; Qa - 1 > a; a++) oa[a] = 0;
                    Ya = Y[va].max_lazy;
                    gb = Y[va].good_length;
                    fb = Y[va].nice_length;
                    eb = Y[va].max_chain;
                    ga = Da = Z = 0;
                    sa = Aa = ma - 1;
                    ia = Ra = 0;
                    a = K
                }
                return a
            };
            fa.deflateEnd = function() {
                return za != ka && za != aa && za != qa ? Q : (fa.pending_buf =
                    null, oa = null, Fa = null, ba = null, fa.dstate = null, za == aa ? R : K)
            };
            fa.deflateParams = function(a, b, c) {
                var d = K;
                return b == I && (b = 6), 0 > b || 9 < b || 0 > c || c > D ? Q : (Y[va].func != Y[b].func && 0 !== a.total_in && (d = a.deflate(H)), va != b && (va = b, Ya = Y[va].max_lazy, gb = Y[va].good_length, fb = Y[va].nice_length, eb = Y[va].max_chain), Xa = c, d)
            };
            fa.deflateSetDictionary = function(a, b, c) {
                a = c;
                var d = 0;
                if (!b || za != ka) return Q;
                if (ma > a) return K;
                a > ja - ta && (a = ja - ta, d = c - a);
                ba.set(b.subarray(d, d + a), 0);
                Da = Z = a;
                ia = 255 & ba[0];
                ia = (ia << Ia ^ 255 & ba[1]) & Ja;
                for (b = 0; a - ma >=
                    b; b++) ia = (ia << Ia ^ 255 & ba[b + (ma - 1)]) & Ja, Fa[b & Ba] = oa[ia], oa[ia] = b;
                return K
            };
            fa.deflate = function(a, b) {
                var c, e, f, k;
                if (b > O || 0 > b) return Q;
                if (!a.next_out || !a.next_in && 0 !== a.avail_in || za == qa && b != O) return a.msg = S[M - Q], Q;
                if (0 === a.avail_out) return a.msg = S[M - U], U;
                na = a;
                k = ya;
                ya = b;
                za == ka && (e = xa + (Na - 8 << 4) << 8, f = (va - 1 & 255) >> 1, 3 < f && (f = 3), e |= f << 6, 0 !== Z && (e |= la), za = aa, e += 31 - e % 31, g(e >> 8 & 255), g(e & 255));
                if (0 !== fa.pending) {
                    if (na.flush_pending(), 0 === na.avail_out) return ya = -1, K
                } else if (0 === na.avail_in && k >= b && b != O) return na.msg =
                    S[M - U], U;
                if (za == qa && 0 !== na.avail_in) return a.msg = S[M - U], U;
                if (0 !== na.avail_in || 0 !== ga || b != G && za != qa) {
                    switch (k = -1, Y[va].func) {
                        case N:
                            a: {
                                k = 65535;
                                for (k > ab - 5 && (k = ab - 5);;) {
                                    if (1 >= ga) {
                                        if ($a(), 0 === ga && b == G) {
                                            k = ca;
                                            break a
                                        }
                                        if (0 === ga) break
                                    }
                                    if ((Z += ga, ga = 0, c = Da + k, (0 === Z || Z >= c) && (ga = Z - c, Z = c, La(!1), 0 === na.avail_out)) || Z - Da >= ja - ta && (La(!1), 0 === na.avail_out)) {
                                        k = ca;
                                        break a
                                    }
                                }
                                k = (La(b == O), 0 === na.avail_out ? b == O ? ea : ca : b == O ? da : ha)
                            }
                            break;
                        case W:
                            a: {
                                for (k = 0;;) {
                                    if (ta > ga) {
                                        if ($a(), ta > ga && b == G) {
                                            k = ca;
                                            break a
                                        }
                                        if (0 === ga) break
                                    }
                                    if (ga >=
                                        ma && (ia = (ia << Ia ^ 255 & ba[Z + (ma - 1)]) & Ja, k = 65535 & oa[ia], Fa[Z & Ba] = oa[ia], oa[ia] = Z), 0 !== k && ja - ta >= (Z - k & 65535) && Xa != D && (sa = mb(k)), sa >= ma)
                                        if (c = V(Z - Pa, sa - ma), ga -= sa, Ya >= sa && ga >= ma) {
                                            sa--;
                                            do Z++, ia = (ia << Ia ^ 255 & ba[Z + (ma - 1)]) & Ja, k = 65535 & oa[ia], Fa[Z & Ba] = oa[ia], oa[ia] = Z; while (0 !== --sa);
                                            Z++
                                        } else Z += sa, sa = 0, ia = 255 & ba[Z], ia = (ia << Ia ^ 255 & ba[Z + 1]) & Ja;
                                    else c = V(0, 255 & ba[Z]), ga--, Z++;
                                    if (c && (La(!1), 0 === na.avail_out)) {
                                        k = ca;
                                        break a
                                    }
                                }
                                k = (La(b == O), 0 === na.avail_out ? b == O ? ea : ca : b == O ? da : ha)
                            }
                            break;
                        case T:
                            k = pb(b)
                    }
                    if ((k == ea || k == da) &&
                        (za = qa), k == ca || k == ea) return 0 === na.avail_out && (ya = -1), K;
                    if (k == ha) {
                        if (b == H) u(Ga << 1, 3), w(t, d.static_ltree), y(), 9 > 1 + Ua + 10 - ra && (u(Ga << 1, 3), w(t, d.static_ltree), y()), Ua = 7;
                        else if (u((Ea << 1) + 0, 3), lb(0, 0, !0), b == J)
                            for (c = 0; Qa > c; c++) oa[c] = 0;
                        if (na.flush_pending(), 0 === na.avail_out) return ya = -1, K
                    }
                }
                return b != O ? K : L
            }
        }

        function f() {
            this.total_out = this.avail_out = this.total_in = this.avail_in = this.next_out_index = this.next_in_index = 0
        }
        var g = 15,
            k = 30,
            m = 19,
            l = 256,
            r = l + 1 + 29,
            q = 2 * r + 1,
            t = 256,
            E = 16,
            z = 17,
            C = 18,
            A = 16,
            I = -1,
            B = 1,
            D = 2,
            F = 0,
            G = 0,
            H = 1,
            J = 3,
            O = 4,
            K = 0,
            L = 1,
            M = 2,
            Q = -2,
            R = -3,
            U = -5,
            V = [0, 1, 2, 3, 4, 4, 5, 5, 6, 6, 6, 6, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
                14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 16, 17, 18, 18, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26,
                26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29,
                29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29, 29
            ];
        c._length_code = [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 12, 12, 13, 13, 13, 13, 14, 14, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24,
            24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28
        ];
        c.base_length = [0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 16, 20, 24, 28, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 0];
        c.base_dist = [0, 1, 2, 3, 4, 6, 8, 12, 16, 24, 32, 48, 64, 96, 128, 192, 256, 384, 512, 768, 1024, 1536, 2048, 3072, 4096,
            6144, 8192, 12288, 16384, 24576
        ];
        c.d_code = function(a) {
            return 256 > a ? V[a] : V[256 + (a >>> 7)]
        };
        c.extra_lbits = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
        c.extra_dbits = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
        c.extra_blbits = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
        c.bl_order = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        d.static_ltree = [12, 8, 140, 8, 76, 8, 204, 8, 44, 8, 172, 8, 108, 8, 236, 8, 28, 8, 156, 8, 92, 8, 220, 8, 60, 8, 188, 8, 124, 8, 252, 8, 2, 8, 130, 8, 66, 8, 194, 8, 34, 8, 162, 8, 98, 8, 226,
            8, 18, 8, 146, 8, 82, 8, 210, 8, 50, 8, 178, 8, 114, 8, 242, 8, 10, 8, 138, 8, 74, 8, 202, 8, 42, 8, 170, 8, 106, 8, 234, 8, 26, 8, 154, 8, 90, 8, 218, 8, 58, 8, 186, 8, 122, 8, 250, 8, 6, 8, 134, 8, 70, 8, 198, 8, 38, 8, 166, 8, 102, 8, 230, 8, 22, 8, 150, 8, 86, 8, 214, 8, 54, 8, 182, 8, 118, 8, 246, 8, 14, 8, 142, 8, 78, 8, 206, 8, 46, 8, 174, 8, 110, 8, 238, 8, 30, 8, 158, 8, 94, 8, 222, 8, 62, 8, 190, 8, 126, 8, 254, 8, 1, 8, 129, 8, 65, 8, 193, 8, 33, 8, 161, 8, 97, 8, 225, 8, 17, 8, 145, 8, 81, 8, 209, 8, 49, 8, 177, 8, 113, 8, 241, 8, 9, 8, 137, 8, 73, 8, 201, 8, 41, 8, 169, 8, 105, 8, 233, 8, 25, 8, 153, 8, 89, 8, 217, 8, 57, 8, 185, 8, 121, 8, 249, 8, 5, 8, 133,
            8, 69, 8, 197, 8, 37, 8, 165, 8, 101, 8, 229, 8, 21, 8, 149, 8, 85, 8, 213, 8, 53, 8, 181, 8, 117, 8, 245, 8, 13, 8, 141, 8, 77, 8, 205, 8, 45, 8, 173, 8, 109, 8, 237, 8, 29, 8, 157, 8, 93, 8, 221, 8, 61, 8, 189, 8, 125, 8, 253, 8, 19, 9, 275, 9, 147, 9, 403, 9, 83, 9, 339, 9, 211, 9, 467, 9, 51, 9, 307, 9, 179, 9, 435, 9, 115, 9, 371, 9, 243, 9, 499, 9, 11, 9, 267, 9, 139, 9, 395, 9, 75, 9, 331, 9, 203, 9, 459, 9, 43, 9, 299, 9, 171, 9, 427, 9, 107, 9, 363, 9, 235, 9, 491, 9, 27, 9, 283, 9, 155, 9, 411, 9, 91, 9, 347, 9, 219, 9, 475, 9, 59, 9, 315, 9, 187, 9, 443, 9, 123, 9, 379, 9, 251, 9, 507, 9, 7, 9, 263, 9, 135, 9, 391, 9, 71, 9, 327, 9, 199, 9, 455, 9, 39, 9, 295,
            9, 167, 9, 423, 9, 103, 9, 359, 9, 231, 9, 487, 9, 23, 9, 279, 9, 151, 9, 407, 9, 87, 9, 343, 9, 215, 9, 471, 9, 55, 9, 311, 9, 183, 9, 439, 9, 119, 9, 375, 9, 247, 9, 503, 9, 15, 9, 271, 9, 143, 9, 399, 9, 79, 9, 335, 9, 207, 9, 463, 9, 47, 9, 303, 9, 175, 9, 431, 9, 111, 9, 367, 9, 239, 9, 495, 9, 31, 9, 287, 9, 159, 9, 415, 9, 95, 9, 351, 9, 223, 9, 479, 9, 63, 9, 319, 9, 191, 9, 447, 9, 127, 9, 383, 9, 255, 9, 511, 9, 0, 7, 64, 7, 32, 7, 96, 7, 16, 7, 80, 7, 48, 7, 112, 7, 8, 7, 72, 7, 40, 7, 104, 7, 24, 7, 88, 7, 56, 7, 120, 7, 4, 7, 68, 7, 36, 7, 100, 7, 20, 7, 84, 7, 52, 7, 116, 7, 3, 8, 131, 8, 67, 8, 195, 8, 35, 8, 163, 8, 99, 8, 227, 8
        ];
        d.static_dtree = [0,
            5, 16, 5, 8, 5, 24, 5, 4, 5, 20, 5, 12, 5, 28, 5, 2, 5, 18, 5, 10, 5, 26, 5, 6, 5, 22, 5, 14, 5, 30, 5, 1, 5, 17, 5, 9, 5, 25, 5, 5, 5, 21, 5, 13, 5, 29, 5, 3, 5, 19, 5, 11, 5, 27, 5, 7, 5, 23, 5
        ];
        d.static_l_desc = new d(d.static_ltree, c.extra_lbits, l + 1, r, g);
        d.static_d_desc = new d(d.static_dtree, c.extra_dbits, 0, k, g);
        d.static_bl_desc = new d(null, c.extra_blbits, 0, m, 7);
        var P = 9,
            X = 8,
            N = 0,
            W = 1,
            T = 2,
            Y = [new b(0, 0, 0, 0, N), new b(4, 4, 8, 4, W), new b(4, 5, 16, 8, W), new b(4, 6, 32, 32, W), new b(4, 4, 16, 16, T), new b(8, 16, 32, 32, T), new b(8, 16, 128, 128, T), new b(8, 32, 128, 256, T), new b(32, 128,
                258, 1024, T), new b(32, 258, 258, 4096, T)],
            S = "need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),
            ca = 0,
            ha = 1,
            ea = 2,
            da = 3,
            la = 32,
            ka = 42,
            aa = 113,
            qa = 666,
            xa = 8,
            Ea = 0,
            Ga = 1,
            pa = 2,
            ma = 3,
            Ka = 258,
            ta = Ka + ma + 1;
        return f.prototype = {
                deflateInit: function(a, b) {
                    return this.dstate = new e, b || (b = g), this.dstate.deflateInit(this, a, b)
                },
                deflate: function(a) {
                    return this.dstate ? this.dstate.deflate(this, a) : Q
                },
                deflateEnd: function() {
                    if (!this.dstate) return Q;
                    var a = this.dstate.deflateEnd();
                    return this.dstate = null, a
                },
                deflateParams: function(a, b) {
                    return this.dstate ? this.dstate.deflateParams(this, a, b) : Q
                },
                deflateSetDictionary: function(a, b) {
                    return this.dstate ? this.dstate.deflateSetDictionary(this, a, b) : Q
                },
                read_buf: function(a, b, c) {
                    var d = this.avail_in;
                    return d > c && (d = c), 0 === d ? 0 : (this.avail_in -= d, a.set(this.next_in.subarray(this.next_in_index, this.next_in_index + d), b), this.next_in_index += d, this.total_in += d, d)
                },
                flush_pending: function() {
                    var a = this.dstate.pending;
                    a > this.avail_out && (a = this.avail_out);
                    0 !== a && (this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,
                        this.dstate.pending_out + a), this.next_out_index), this.next_out_index += a, this.dstate.pending_out += a, this.total_out += a, this.avail_out -= a, this.dstate.pending -= a, 0 === this.dstate.pending && (this.dstate.pending_out = 0))
                }
            },
            function(a) {
                var b = new f,
                    c = G,
                    d = new Uint8Array(512);
                "undefined" == typeof a && (a = I);
                b.deflateInit(a);
                b.next_out = d;
                this.append = function(a, e) {
                    var f, g, h = [],
                        k = 0,
                        m = 0,
                        p = 0;
                    if (a.length) {
                        b.next_in_index = 0;
                        b.next_in = a;
                        b.avail_in = a.length;
                        do {
                            if (b.next_out_index = 0, b.avail_out = 512, f = b.deflate(c), f != K) throw "deflating: " +
                                b.msg;
                            b.next_out_index && (512 == b.next_out_index ? h.push(new Uint8Array(d)) : h.push(new Uint8Array(d.subarray(0, b.next_out_index))));
                            p += b.next_out_index;
                            e && 0 < b.next_in_index && b.next_in_index != k && (e(b.next_in_index), k = b.next_in_index)
                        } while (0 < b.avail_in || 0 === b.avail_out);
                        return g = new Uint8Array(p), h.forEach(function(a) {
                            g.set(a, m);
                            m += a.length
                        }), g
                    }
                };
                this.flush = function() {
                    var a, c, e = [],
                        f = 0,
                        g = 0;
                    do {
                        if (b.next_out_index = 0, b.avail_out = 512, a = b.deflate(O), a != L && a != K) throw "deflating: " + b.msg;
                        0 < 512 - b.avail_out && e.push(new Uint8Array(d.subarray(0,
                            b.next_out_index)));
                        g += b.next_out_index
                    } while (0 < b.avail_in || 0 === b.avail_out);
                    return b.deflateEnd(), c = new Uint8Array(g), e.forEach(function(a) {
                        c.set(a, f);
                        f += a.length
                    }), c
                }
            }
    }(this);
    ! function(c) {
        var d;
        d = function() {
            function b(a) {
                var b, c, d, e, f, g;
                this.data = a;
                this.pos = 8;
                this.palette = [];
                this.imgData = [];
                this.transparency = {};
                this.animation = null;
                this.text = {};
                for (e = null;;) {
                    b = this.readUInt32();
                    g = a = void 0;
                    g = [];
                    for (a = 0; 4 > a; ++a) g.push(String.fromCharCode(this.data[this.pos++]));
                    switch (a = g.join("")) {
                        case "IHDR":
                            this.width =
                                this.readUInt32();
                            this.height = this.readUInt32();
                            this.bits = this.data[this.pos++];
                            this.colorType = this.data[this.pos++];
                            this.compressionMethod = this.data[this.pos++];
                            this.filterMethod = this.data[this.pos++];
                            this.interlaceMethod = this.data[this.pos++];
                            break;
                        case "acTL":
                            this.animation = {
                                numFrames: this.readUInt32(),
                                numPlays: this.readUInt32() || 1 / 0,
                                frames: []
                            };
                            break;
                        case "PLTE":
                            this.palette = this.read(b);
                            break;
                        case "fcTL":
                            e && this.animation.frames.push(e);
                            this.pos += 4;
                            e = {
                                width: this.readUInt32(),
                                height: this.readUInt32(),
                                xOffset: this.readUInt32(),
                                yOffset: this.readUInt32()
                            };
                            a = this.readUInt16();
                            b = this.readUInt16() || 100;
                            e.delay = 1E3 * a / b;
                            e.disposeOp = this.data[this.pos++];
                            e.blendOp = this.data[this.pos++];
                            e.data = [];
                            break;
                        case "IDAT":
                        case "fdAT":
                            "fdAT" === a && (this.pos += 4, b -= 4);
                            a = (null != e ? e.data : void 0) || this.imgData;
                            for (g = 0; 0 <= b ? b > g : g > b; 0 <= b ? ++g : --g) a.push(this.data[this.pos++]);
                            break;
                        case "tRNS":
                            switch (this.transparency = {}, this.colorType) {
                                case 3:
                                    if (d = this.palette.length / 3, this.transparency.indexed = this.read(b), this.transparency.indexed.length >
                                        d) throw Error("More transparent colors than palette size");
                                    if (f = d - this.transparency.indexed.length, 0 < f)
                                        for (b = 0; 0 <= f ? f > b : b > f; 0 <= f ? ++b : --b) this.transparency.indexed.push(255);
                                    break;
                                case 0:
                                    this.transparency.grayscale = this.read(b)[0];
                                    break;
                                case 2:
                                    this.transparency.rgb = this.read(b)
                            }
                            break;
                        case "tEXt":
                            g = this.read(b);
                            b = g.indexOf(0);
                            a = String.fromCharCode.apply(String, g.slice(0, b));
                            this.text[a] = String.fromCharCode.apply(String, g.slice(b + 1));
                            break;
                        case "IEND":
                            e && this.animation.frames.push(e);
                            a: {
                                switch (this.colorType) {
                                    case 0:
                                    case 3:
                                    case 4:
                                        d =
                                            1;
                                        break a;
                                    case 2:
                                    case 6:
                                        d = 3;
                                        break a
                                }
                                d = void 0
                            }
                            this.colors = d;
                            this.hasAlphaChannel = 4 === (c = this.colorType) || 6 === c;
                            c = this.colors + (this.hasAlphaChannel ? 1 : 0);
                            this.pixelBitlength = this.bits * c;
                            a: {
                                switch (this.colors) {
                                    case 1:
                                        c = "DeviceGray";
                                        break a;
                                    case 3:
                                        c = "DeviceRGB";
                                        break a
                                }
                                c = void 0
                            }
                            return this.colorSpace = c, this.imgData = new Uint8Array(this.imgData), void 0;
                        default:
                            this.pos += b
                    }
                    if (this.pos += 4, this.pos > this.data.length) throw Error("Incomplete or corrupt PNG file");
                }
            }
            var a, d, f;
            b.load = function(a, c, d) {
                var e;
                return "function" ==
                    typeof c && (d = c), e = new XMLHttpRequest, e.open("GET", a, !0), e.responseType = "arraybuffer", e.onload = function() {
                        var a, f;
                        return a = new Uint8Array(e.response || e.mozResponseArrayBuffer), f = new b(a), "function" == typeof(null != c ? c.getContext : void 0) && f.render(c), "function" == typeof d ? d(f) : void 0
                    }, e.send(null)
            };
            b.prototype.read = function(a) {
                var b, c;
                c = [];
                for (b = 0; 0 <= a ? a > b : b > a; 0 <= a ? ++b : --b) c.push(this.data[this.pos++]);
                return c
            };
            b.prototype.readUInt32 = function() {
                var a, b, c, d;
                return a = this.data[this.pos++] << 24, b = this.data[this.pos++] <<
                    16, c = this.data[this.pos++] << 8, d = this.data[this.pos++], a | b | c | d
            };
            b.prototype.readUInt16 = function() {
                var a, b;
                return a = this.data[this.pos++] << 8, b = this.data[this.pos++], a | b
            };
            b.prototype.decodePixels = function(a) {
                var b, c, d, f, g, h, k, l, q, u, w, x, F, G, H;
                if (null == a && (a = this.imgData), 0 === a.length) return new Uint8Array(0);
                a = new e(a);
                a = a.getBytes();
                l = this.pixelBitlength / 8;
                x = l * this.width;
                q = new Uint8Array(x * this.height);
                h = a.length;
                for (c = u = w = 0; h > u;) {
                    switch (a[u++]) {
                        case 0:
                            for (b = 0; x > b; b += 1) q[c++] = a[u++];
                            break;
                        case 1:
                            for (f =
                                H = 0; x > H; f = H += 1) b = a[u++], g = l > f ? 0 : q[c - l], q[c++] = (b + g) % 256;
                            break;
                        case 2:
                            for (f = g = 0; x > g; f = g += 1) b = a[u++], d = (f - f % l) / l, F = w && q[(w - 1) * x + d * l + f % l], q[c++] = (F + b) % 256;
                            break;
                        case 3:
                            for (f = H = 0; x > H; f = H += 1) b = a[u++], d = (f - f % l) / l, g = l > f ? 0 : q[c - l], F = w && q[(w - 1) * x + d * l + f % l], q[c++] = (b + Math.floor((g + F) / 2)) % 256;
                            break;
                        case 4:
                            for (f = H = 0; x > H; f = H += 1) b = a[u++], d = (f - f % l) / l, g = l > f ? 0 : q[c - l], 0 === w ? F = G = 0 : (F = q[(w - 1) * x + d * l + f % l], G = d && q[(w - 1) * x + (d - 1) * l + f % l]), k = g + F - G, f = Math.abs(k - g), d = Math.abs(k - F), k = Math.abs(k - G), g = d >= f && k >= f ? g : k >= d ? F : G, q[c++] =
                                (b + g) % 256;
                            break;
                        default:
                            throw Error("Invalid filter algorithm: " + a[u - 1]);
                    }
                    w++
                }
                return q
            };
            b.prototype.decodePalette = function() {
                var a, b, c, d, e, f, g, h, k;
                c = this.palette;
                f = this.transparency.indexed || [];
                e = new Uint8Array((f.length || 0) + c.length);
                b = g = a = d = 0;
                for (h = c.length; h > g; b = g += 3) e[d++] = c[b], e[d++] = c[b + 1], e[d++] = c[b + 2], e[d++] = null != (k = f[a++]) ? k : 255;
                return e
            };
            b.prototype.copyToImageData = function(a, b) {
                var c, d, e, f, g, h, k, l, q;
                if (d = this.colors, l = null, c = this.hasAlphaChannel, this.palette.length && (l = null != (q = this._decodedPalette) ?
                        q : this._decodedPalette = this.decodePalette(), d = 4, c = !0), e = a.data || a, k = e.length, g = l || b, f = h = 0, 1 === d)
                    for (; k > f;) d = l ? 4 * b[f / 4] : h, h = g[d++], e[f++] = h, e[f++] = h, e[f++] = h, e[f++] = c ? g[d++] : 255, h = d;
                else
                    for (; k > f;) d = l ? 4 * b[f / 4] : h, e[f++] = g[d++], e[f++] = g[d++], e[f++] = g[d++], e[f++] = c ? g[d++] : 255, h = d
            };
            b.prototype.decode = function() {
                var a;
                return a = new Uint8Array(this.width * this.height * 4), this.copyToImageData(a, this.decodePixels()), a
            };
            try {
                d = c.document.createElement("canvas"), f = d.getContext("2d")
            } catch (g) {
                return -1
            }
            return a = function(a) {
                var b;
                return f.width = a.width, f.height = a.height, f.clearRect(0, 0, a.width, a.height), f.putImageData(a, 0, 0), b = new Image, b.src = d.toDataURL(), b
            }, b.prototype.decodeFrames = function(b) {
                var c, d, e, f, g, h, k;
                if (this.animation) {
                    h = this.animation.frames;
                    k = [];
                    c = f = 0;
                    for (g = h.length; g > f; c = ++f) c = h[c], d = b.createImageData(c.width, c.height), e = this.decodePixels(new Uint8Array(c.data)), this.copyToImageData(d, e), c.imageData = d, k.push(c.image = a(d));
                    return k
                }
            }, b.prototype.renderFrame = function(a, b) {
                var c, d, e;
                return d = this.animation.frames,
                    c = d[b], e = d[b - 1], 0 === b && a.clearRect(0, 0, this.width, this.height), 1 === (null != e ? e.disposeOp : void 0) ? a.clearRect(e.xOffset, e.yOffset, e.width, e.height) : 2 === (null != e ? e.disposeOp : void 0) && a.putImageData(e.imageData, e.xOffset, e.yOffset), 0 === c.blendOp && a.clearRect(c.xOffset, c.yOffset, c.width, c.height), a.drawImage(c.image, c.xOffset, c.yOffset)
            }, b.prototype.animate = function(a) {
                var b, c, d, e, f, g, h = this;
                return c = 0, g = this.animation, e = g.numFrames, d = g.frames, f = g.numPlays, (b = function() {
                    var g, k;
                    return g = c++ % e, k = d[g], h.renderFrame(a,
                        g), 1 < e && f > c / e ? h.animation._timeout = setTimeout(b, k.delay) : void 0
                })()
            }, b.prototype.stopAnimation = function() {
                var a;
                return clearTimeout(null != (a = this.animation) ? a._timeout : void 0)
            }, b.prototype.render = function(a) {
                var b, c;
                return a._png && a._png.stopAnimation(), a._png = this, a.width = this.width, a.height = this.height, b = a.getContext("2d"), this.animation ? (this.decodeFrames(b), this.animate(b)) : (c = b.createImageData(this.width, this.height), this.copyToImageData(c, this.decodePixels()), b.putImageData(c, 0, 0))
            }, b
        }();
        c.PNG =
            d
    }("undefined" != typeof window && window || this);
    var d = function() {
            function c() {
                this.bufferLength = this.pos = 0;
                this.eof = !1;
                this.buffer = null
            }
            return c.prototype = {
                ensureBuffer: function(c) {
                    var b = this.buffer,
                        a = b ? b.byteLength : 0;
                    if (a > c) return b;
                    for (var d = 512; c > d;) d <<= 1;
                    c = new Uint8Array(d);
                    for (d = 0; a > d; ++d) c[d] = b[d];
                    return this.buffer = c
                },
                getByte: function() {
                    for (var c = this.pos; this.bufferLength <= c;) {
                        if (this.eof) return null;
                        this.readBlock()
                    }
                    return this.buffer[this.pos++]
                },
                getBytes: function(c) {
                    var b = this.pos;
                    if (c) {
                        this.ensureBuffer(b +
                            c);
                        for (c = b + c; !this.eof && this.bufferLength < c;) this.readBlock();
                        var a = this.bufferLength;
                        c > a && (c = a)
                    } else {
                        for (; !this.eof;) this.readBlock();
                        c = this.bufferLength
                    }
                    return this.pos = c, this.buffer.subarray(b, c)
                },
                lookChar: function() {
                    for (var c = this.pos; this.bufferLength <= c;) {
                        if (this.eof) return null;
                        this.readBlock()
                    }
                    return String.fromCharCode(this.buffer[this.pos])
                },
                getChar: function() {
                    for (var c = this.pos; this.bufferLength <= c;) {
                        if (this.eof) return null;
                        this.readBlock()
                    }
                    return String.fromCharCode(this.buffer[this.pos++])
                },
                makeSubStream: function(c, b, a) {
                    for (var d = c + b; this.bufferLength <= d && !this.eof;) this.readBlock();
                    return new Stream(this.buffer, c, b, a)
                },
                skip: function(c) {
                    c || (c = 1);
                    this.pos += c
                },
                reset: function() {
                    this.pos = 0
                }
            }, c
        }(),
        e = function() {
            function c(a) {
                throw Error(a);
            }

            function e(a) {
                var b = 0,
                    f = a[b++],
                    g = a[b++]; - 1 != f && -1 != g || c("Invalid header in flate stream");
                8 != (15 & f) && c("Unknown compression method in flate stream");
                0 != ((f << 8) + g) % 31 && c("Bad FCHECK in flate stream");
                32 & g && c("FDICT bit set in flate stream");
                this.bytes = a;
                this.bytesPos = b;
                this.codeBuf = this.codeSize = 0;
                d.call(this)
            }
            if ("undefined" != typeof Uint32Array) {
                var b = new Uint32Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]),
                    a = new Uint32Array([3, 4, 5, 6, 7, 8, 9, 10, 65547, 65549, 65551, 65553, 131091, 131095, 131099, 131103, 196643, 196651, 196659, 196667, 262211, 262227, 262243, 262259, 327811, 327843, 327875, 327907, 258, 258, 258]),
                    f = new Uint32Array([1, 2, 3, 4, 65541, 65543, 131081, 131085, 196625, 196633, 262177, 262193, 327745, 327777, 393345, 393409, 459009, 459137, 524801, 525057, 590849, 591361,
                        657409, 658433, 724993, 727041, 794625, 798721, 868353, 876545
                    ]),
                    g = [new Uint32Array([459008, 524368, 524304, 524568, 459024, 524400, 524336, 590016, 459016, 524384, 524320, 589984, 524288, 524416, 524352, 590048, 459012, 524376, 524312, 589968, 459028, 524408, 524344, 590032, 459020, 524392, 524328, 59E4, 524296, 524424, 524360, 590064, 459010, 524372, 524308, 524572, 459026, 524404, 524340, 590024, 459018, 524388, 524324, 589992, 524292, 524420, 524356, 590056, 459014, 524380, 524316, 589976, 459030, 524412, 524348, 590040, 459022, 524396, 524332, 590008, 524300,
                        524428, 524364, 590072, 459009, 524370, 524306, 524570, 459025, 524402, 524338, 590020, 459017, 524386, 524322, 589988, 524290, 524418, 524354, 590052, 459013, 524378, 524314, 589972, 459029, 524410, 524346, 590036, 459021, 524394, 524330, 590004, 524298, 524426, 524362, 590068, 459011, 524374, 524310, 524574, 459027, 524406, 524342, 590028, 459019, 524390, 524326, 589996, 524294, 524422, 524358, 590060, 459015, 524382, 524318, 589980, 459031, 524414, 524350, 590044, 459023, 524398, 524334, 590012, 524302, 524430, 524366, 590076, 459008, 524369, 524305, 524569, 459024,
                        524401, 524337, 590018, 459016, 524385, 524321, 589986, 524289, 524417, 524353, 590050, 459012, 524377, 524313, 589970, 459028, 524409, 524345, 590034, 459020, 524393, 524329, 590002, 524297, 524425, 524361, 590066, 459010, 524373, 524309, 524573, 459026, 524405, 524341, 590026, 459018, 524389, 524325, 589994, 524293, 524421, 524357, 590058, 459014, 524381, 524317, 589978, 459030, 524413, 524349, 590042, 459022, 524397, 524333, 590010, 524301, 524429, 524365, 590074, 459009, 524371, 524307, 524571, 459025, 524403, 524339, 590022, 459017, 524387, 524323, 589990, 524291,
                        524419, 524355, 590054, 459013, 524379, 524315, 589974, 459029, 524411, 524347, 590038, 459021, 524395, 524331, 590006, 524299, 524427, 524363, 590070, 459011, 524375, 524311, 524575, 459027, 524407, 524343, 590030, 459019, 524391, 524327, 589998, 524295, 524423, 524359, 590062, 459015, 524383, 524319, 589982, 459031, 524415, 524351, 590046, 459023, 524399, 524335, 590014, 524303, 524431, 524367, 590078, 459008, 524368, 524304, 524568, 459024, 524400, 524336, 590017, 459016, 524384, 524320, 589985, 524288, 524416, 524352, 590049, 459012, 524376, 524312, 589969, 459028,
                        524408, 524344, 590033, 459020, 524392, 524328, 590001, 524296, 524424, 524360, 590065, 459010, 524372, 524308, 524572, 459026, 524404, 524340, 590025, 459018, 524388, 524324, 589993, 524292, 524420, 524356, 590057, 459014, 524380, 524316, 589977, 459030, 524412, 524348, 590041, 459022, 524396, 524332, 590009, 524300, 524428, 524364, 590073, 459009, 524370, 524306, 524570, 459025, 524402, 524338, 590021, 459017, 524386, 524322, 589989, 524290, 524418, 524354, 590053, 459013, 524378, 524314, 589973, 459029, 524410, 524346, 590037, 459021, 524394, 524330, 590005, 524298,
                        524426, 524362, 590069, 459011, 524374, 524310, 524574, 459027, 524406, 524342, 590029, 459019, 524390, 524326, 589997, 524294, 524422, 524358, 590061, 459015, 524382, 524318, 589981, 459031, 524414, 524350, 590045, 459023, 524398, 524334, 590013, 524302, 524430, 524366, 590077, 459008, 524369, 524305, 524569, 459024, 524401, 524337, 590019, 459016, 524385, 524321, 589987, 524289, 524417, 524353, 590051, 459012, 524377, 524313, 589971, 459028, 524409, 524345, 590035, 459020, 524393, 524329, 590003, 524297, 524425, 524361, 590067, 459010, 524373, 524309, 524573, 459026,
                        524405, 524341, 590027, 459018, 524389, 524325, 589995, 524293, 524421, 524357, 590059, 459014, 524381, 524317, 589979, 459030, 524413, 524349, 590043, 459022, 524397, 524333, 590011, 524301, 524429, 524365, 590075, 459009, 524371, 524307, 524571, 459025, 524403, 524339, 590023, 459017, 524387, 524323, 589991, 524291, 524419, 524355, 590055, 459013, 524379, 524315, 589975, 459029, 524411, 524347, 590039, 459021, 524395, 524331, 590007, 524299, 524427, 524363, 590071, 459011, 524375, 524311, 524575, 459027, 524407, 524343, 590031, 459019, 524391, 524327, 589999, 524295,
                        524423, 524359, 590063, 459015, 524383, 524319, 589983, 459031, 524415, 524351, 590047, 459023, 524399, 524335, 590015, 524303, 524431, 524367, 590079
                    ]), 9],
                    k = [new Uint32Array([327680, 327696, 327688, 327704, 327684, 327700, 327692, 327708, 327682, 327698, 327690, 327706, 327686, 327702, 327694, 0, 327681, 327697, 327689, 327705, 327685, 327701, 327693, 327709, 327683, 327699, 327691, 327707, 327687, 327703, 327695, 0]), 5];
                return e.prototype = Object.create(d.prototype), e.prototype.getBits = function(a) {
                    for (var b, d = this.codeSize, e = this.codeBuf, f = this.bytes,
                            g = this.bytesPos; a > d;) "undefined" == typeof(b = f[g++]) && c("Bad encoding in flate stream"), e |= b << d, d += 8;
                    return b = e & (1 << a) - 1, this.codeBuf = e >> a, this.codeSize = d - a, this.bytesPos = g, b
                }, e.prototype.getCode = function(a) {
                    var b = a[0],
                        d = a[1];
                    a = this.codeSize;
                    for (var e = this.codeBuf, f = this.bytes, g = this.bytesPos; d > a;) {
                        var h;
                        "undefined" == typeof(h = f[g++]) && c("Bad encoding in flate stream");
                        e |= h << a;
                        a += 8
                    }
                    d = b[e & (1 << d) - 1];
                    b = d >> 16;
                    d &= 65535;
                    return (0 == a || b > a || 0 == b) && c("Bad encoding in flate stream"), this.codeBuf = e >> b, this.codeSize =
                        a - b, this.bytesPos = g, d
                }, e.prototype.generateHuffmanTable = function(a) {
                    for (var b = a.length, c = 0, d = 0; b > d; ++d) a[d] > c && (c = a[d]);
                    for (var e = 1 << c, f = new Uint32Array(e), g = 1, h = 0, k = 2; c >= g; ++g, h <<= 1, k <<= 1)
                        for (var l = 0; b > l; ++l)
                            if (a[l] == g) {
                                for (var q = 0, u = h, d = 0; g > d; ++d) q = q << 1 | 1 & u, u >>= 1;
                                for (d = q; e > d; d += k) f[d] = g << 16 | l;
                                ++h
                            }
                    return [f, c]
                }, e.prototype.readBlock = function() {
                    function d(a, b, c, e, f) {
                        for (a = a.getBits(c) + e; 0 < a--;) b[z++] = f
                    }
                    var e = this.getBits(3);
                    if (1 & e && (this.eof = !0), e >>= 1, 0 == e) {
                        var h, l = this.bytes,
                            q = this.bytesPos;
                        "undefined" ==
                        typeof(h = l[q++]) && c("Bad block header in flate stream");
                        var t = h;
                        "undefined" == typeof(h = l[q++]) && c("Bad block header in flate stream");
                        t |= h << 8;
                        "undefined" == typeof(h = l[q++]) && c("Bad block header in flate stream");
                        e = h;
                        "undefined" == typeof(h = l[q++]) && c("Bad block header in flate stream");
                        (e | h << 8) != (65535 & ~t) && c("Bad uncompressed block length in flate stream");
                        this.codeSize = this.codeBuf = 0;
                        h = this.bufferLength;
                        e = this.ensureBuffer(h + t);
                        this.bufferLength = t = h + t;
                        for (var E = h; t > E; ++E) {
                            if ("undefined" == typeof(h = l[q++])) {
                                this.eof = !0;
                                break
                            }
                            e[E] = h
                        }
                        return this.bytesPos = q, void 0
                    }
                    if (1 == e) q = g, h = k;
                    else if (2 == e) {
                        e = this.getBits(5) + 257;
                        h = this.getBits(5) + 1;
                        for (var l = this.getBits(4) + 4, q = Array(b.length), z = 0; l > z;) q[b[z++]] = this.getBits(3);
                        q = this.generateHuffmanTable(q);
                        z = l = 0;
                        h = e + h;
                        for (t = Array(h); h > z;) E = this.getCode(q), 16 == E ? d(this, t, 2, 3, l) : 17 == E ? d(this, t, 3, 3, l = 0) : 18 == E ? d(this, t, 7, 11, l = 0) : t[z++] = l = E;
                        q = this.generateHuffmanTable(t.slice(0, e));
                        h = this.generateHuffmanTable(t.slice(e, h))
                    } else c("Unknown block type in flate stream");
                    t = (e = this.buffer) ?
                        e.length : 0;
                    for (E = this.bufferLength;;) {
                        var C = this.getCode(q);
                        if (256 > C) E + 1 >= t && (e = this.ensureBuffer(E + 1), t = e.length), e[E++] = C;
                        else {
                            if (256 == C) return this.bufferLength = E, void 0;
                            var C = C - 257,
                                C = a[C],
                                A = C >> 16;
                            0 < A && (A = this.getBits(A));
                            l = (65535 & C) + A;
                            C = this.getCode(h);
                            C = f[C];
                            A = C >> 16;
                            0 < A && (A = this.getBits(A));
                            C = (65535 & C) + A;
                            E + l >= t && (e = this.ensureBuffer(E + l), t = e.length);
                            for (A = 0; l > A; ++A, ++E) e[E] = e[E - C]
                        }
                    }
                }, e
            }
        }();
    ! function(c) {
        "undefined" == typeof c.btoa && (c.btoa = function(c) {
            var b, a, d, e, f = 0,
                g = 0,
                k = "",
                k = [];
            if (!c) return c;
            do b = c.charCodeAt(f++), a = c.charCodeAt(f++), d = c.charCodeAt(f++), e = b << 16 | a << 8 | d, b = e >> 18 & 63, a = e >> 12 & 63, d = e >> 6 & 63, e &= 63, k[g++] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e); while (f < c.length);
            k = k.join("");
            c = c.length % 3;
            return (c ? k.slice(0, c - 3) :
                k) + "===".slice(c || 3)
        });
        "undefined" == typeof c.atob && (c.atob = function(c) {
            var b, a, d, e, f, g = 0,
                k = 0,
                l = [];
            if (!c) return c;
            c += "";
            do b = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c.charAt(g++)), a = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c.charAt(g++)), e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c.charAt(g++)), f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(c.charAt(g++)), d = b << 18 |
                a << 12 | e << 6 | f, b = d >> 16 & 255, a = d >> 8 & 255, d &= 255, l[k++] = 64 == e ? String.fromCharCode(b) : 64 == f ? String.fromCharCode(b, a) : String.fromCharCode(b, a, d); while (g < c.length);
            return l.join("")
        });
        Array.prototype.map || (Array.prototype.map = function(c) {
            if (void 0 === this || null === this || "function" != typeof c) throw new TypeError;
            for (var b = Object(this), a = b.length >>> 0, d = Array(a), e = 1 < arguments.length ? arguments[1] : void 0, f = 0; a > f; f++) f in b && (d[f] = c.call(e, b[f], f, b));
            return d
        });
        Array.isArray || (Array.isArray = function(c) {
            return "[object Array]" ===
                Object.prototype.toString.call(c)
        });
        Array.prototype.forEach || (Array.prototype.forEach = function(c, b) {
            if (void 0 === this || null === this || "function" != typeof c) throw new TypeError;
            for (var a = Object(this), d = a.length >>> 0, e = 0; d > e; e++) e in a && c.call(b, a[e], e, a)
        });
        Object.keys || (Object.keys = function() {
            var c = Object.prototype.hasOwnProperty,
                b = !{
                    toString: null
                }.propertyIsEnumerable("toString"),
                a = "toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
                d = a.length;
            return function(e) {
                if ("object" !=
                    typeof e && ("function" != typeof e || null === e)) throw new TypeError;
                var f, g = [];
                for (f in e) c.call(e, f) && g.push(f);
                if (b)
                    for (f = 0; d > f; f++) c.call(e, a[f]) && g.push(a[f]);
                return g
            }
        }());
        String.prototype.trim || (String.prototype.trim = function() {
            return this.replace(/^\s+|\s+$/g, "")
        });
        String.prototype.trimLeft || (String.prototype.trimLeft = function() {
            return this.replace(/^\s+/g, "")
        });
        String.prototype.trimRight || (String.prototype.trimRight = function() {
            return this.replace(/\s+$/g, "")
        })
    }("undefined" != typeof self && self ||
        "undefined" != typeof window && window || this)
}({}, function() {
    return this
}());
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.PDF = function(g) {
        var f = g.dom,
            k = g.util;
        this.save = function(f) {
            f = f || {};
            var d = f.dpi || 72,
                e = f.quality || 1,
                c = f.onsuccess || k.errorHandler("onsuccess");
            f.onerror || k.errorHandler("onerror");
            var h = f.onprogress,
                b = g.doc,
                a = b.pages.data,
                w = k.count(a) || 1,
                u = 0,
                x = 0;
            0 === a.length ? (u = b.computed.width, x = b.computed.height) : k.each(a, function(a) {
                u = Math.max(u, a.width);
                x = Math.max(x, a.height)
            });
            var p = k.toMetrics["px>mm"],
                m = new jsPDF(u > x ? "landscape" : "portrait", "mm", [u * p, x * p]),
                v = m.internal.pageSize.width,
                r = m.internal.pageSize.height,
                y = 0,
                t = k.Queue({
                    delayStart: !0,
                    range: {
                        from: 0,
                        to: w - 1
                    },
                    oncomplete: function() {
                        h && h(100);
                        c(m.output("blob"))
                    },
                    next: function(c, k, p) {
                        0 !== p && m.addPage();
                        var q = a[p] || b.computed;
                        Array.isArray(a) ? (f.x = 0, f.y = y) : (g.doc = q, f.x = 0, f.y = 0);
                        f.width = q.width;
                        f.height = q.height;
                        g.save.canvas(f, function(a) {
                            var b = a.ctx;
                            b.globalCompositeOperation = "destination-atop";
                            b.fillStyle = "#fff";
                            b.fillRect(0, 0, a.width, a.height);
                            var b = a.toDataURL("image/jpeg", e),
                                c = 72 / d;
                            a = Math.max(a.width * c / v, a.height * c / r);
                            m.addImage(b,
                                "JPEG", 0, 0, q.width / a, q.height / a);
                            y += q.height;
                            h && h(p / w * 100);
                            g.agent.ios ? t.next() : setTimeout(t.next, 1)
                        })
                    }
                })
        };
        this.open = function(l) {
            var d = g.doc,
                e = g.feature,
                c = d.scene,
                h = l.point,
                b = l.openAsNew,
                a = l.onprogress,
                w = l.onsuccess;
            PDFJS.getDocument(l.file).then(function(l) {
                var x = [],
                    p = 0,
                    m = 0,
                    v = k.Queue({
                        delayStart: !0,
                        range: {
                            from: 1,
                            to: l.numPages
                        },
                        oncomplete: function() {
                            a && a(100);
                            if (b) {
                                g.exec("new");
                                d.setSize(m, p);
                                d.pages = {};
                                d.pages.data = [];
                                d.pages.length = x.length;
                                var f = 0,
                                    l = k.Queue({
                                        items: x,
                                        delayStart: !0,
                                        oncomplete: function() {
                                            d.setTool("select");
                                            g.exec("zoom-reset");
                                            c.selectByIdx(C, !1);
                                            w && w()
                                        },
                                        next: function(a, b, g) {
                                            a = x[g];
                                            d.pages.data[g] = {
                                                src: a.src,
                                                width: a.width,
                                                height: a.height
                                            };
                                            g = 0;
                                            b = f;
                                            "objectBoundingBox" === e.tools.media.units && (g += a.width / 2, b += a.height / 2);
                                            c.add({
                                                type: "image",
                                                src: a.src,
                                                width: a.width,
                                                height: a.height,
                                                x: g,
                                                y: b
                                            }, this.next);
                                            f += a.height
                                        }
                                    })
                            } else {
                                var t = e.io.translateX,
                                    v = e.io.translateY,
                                    u = x.length - 1;
                                h = h || c.getCenterPoint();
                                h.x -= u / 2 * t;
                                h.y -= u / 2 * v;
                                var C = {},
                                    l = k.Queue({
                                        items: x,
                                        delayStart: !0,
                                        oncomplete: function() {
                                            d.setTool("select");
                                            c.selectByIdx(C, !1);
                                            d.render.dirty = !0;
                                            w && w()
                                        },
                                        next: function(a, b, d) {
                                            c.add({
                                                type: "image",
                                                src: a.src,
                                                x: h.x + d * t,
                                                y: h.y + d * v
                                            }, function(a) {
                                                C[a.zIndex] = !0;
                                                l.next()
                                            })
                                        }
                                    })
                            }
                        },
                        next: function(b) {
                            l.getPage(b).then(function(c) {
                                var d = c.getViewport(1.5),
                                    e = f.Canvas(d.width, d.height);
                                c.render({
                                    canvasContext: e.ctx,
                                    viewport: d
                                }).then(function() {
                                    m = Math.max(e.width, m);
                                    p += e.height;
                                    e.toBlobURL(function(c) {
                                        a && a(Math.round(b / l.numPages * 100));
                                        x.push({
                                            src: c,
                                            width: e.width,
                                            height: e.height
                                        });
                                        v.next()
                                    })
                                })
                            })
                        }
                    })
            })
        }
    }
})(sketch);
(function(k) {
    var g = k.document,
        f = function() {
            function f(b) {
                function c(d) {
                    function e() {
                        h();
                        if (E && E.length)
                            for (var a = 0; a < E.length; a++) {
                                var c = E[a];
                                c.id ? r[c.id] = c.value : r.push(c.value)
                            }
                        "function" === typeof b && (E && E.length ? b(!0, r) : b(!0))
                    }
                    a.verify ? a.verify(E, function(a) {
                        a && e()
                    }) : e()
                }

                function d(a) {
                    eventjs.prevent(a);
                    h(a);
                    "function" === typeof b && b(-1)
                }

                function e(a) {
                    eventjs.prevent(a);
                    h(a);
                    "function" === typeof b && b(!1)
                }

                function h() {
                    A.hide();
                    A.unbind(g.body, "keyup", k);
                    A.unbind(p, "focus", m);
                    x && A.unbind(x, "click",
                        c);
                    w && A.unbind(w, "click", e);
                    u && A.unbind(u, "click", d)
                }

                function k(a) {
                    var b = a.keyCode;
                    b === z.ESC && w && e(a);
                    b === z.ENTER && x === g.activeElement && c(a)
                }

                function m(a) {
                    l ? E[0].focus() : A.buttonReverse || !w ? x.focus() : w.focus()
                }
                var l = E && E.length,
                    r = [];
                A.bind(p, "focus", m);
                x && A.bind(x, "click", c);
                w && A.bind(w, "click", e);
                u && A.bind(u, "click", d);
                A.bind(g.body, "keyup", k);
                A.transition.supported || A.setFocus()
            }

            function l(a, b) {
                function c() {
                    function d(b) {
                        a.style.width = a.style.maxWidth = b
                    }

                    function e(b) {
                        a.style.height = a.style.maxHeight =
                            b
                    }
                    if (!b.src)
                        if (b.width && b.height) d(b.width), e(b.height);
                        else {
                            d("auto");
                            t.style.display = "inline-block";
                            var f = t.offsetWidth + 20,
                                g = 40;
                            if (v)
                                for (var h = v.childNodes, k = 0; k < h.length; k++) g += h[k].offsetWidth;
                            f = Math.max(f, g);
                            t.style.display = "";
                            d(f + "px");
                            t.style.maxHeight = "auto";
                            e("auto");
                            f = Math.min((v && v.offsetHeight || 0) + t.offsetHeight, .75 * window.innerHeight);
                            t.style.maxHeight = l.offsetHeight + "px";
                            e(f + "px")
                        }
                }

                function d(a) {
                    v = g.createElement("nav");
                    v.className = "alertify-buttons";
                    l.appendChild(v);
                    a.forEach(e)
                }

                function e(a) {
                    if (A.labels[a]) {
                        var b =
                            g.createElement("button");
                        b.className = "alertify-button alertify-button-" + a;
                        b.id = "alertify-" + a;
                        b.innerHTML = A.labels[a];
                        v.appendChild(b)
                    }
                }
                var f = b.type,
                    h = b.message || "",
                    k = b.src || "",
                    m = b.className || "",
                    p = g.createElement("div");
                p.className = "alertify-dialog";
                var l = g.createElement("article");
                l.className = "alertify-inner";
                if (k) {
                    var t = g.createElement("iframe");
                    t.src = k
                } else t = g.createElement("p"), t.className = "alertify-message", "object" === typeof h ? t.appendChild(h) : t.innerHTML = h;
                l.appendChild(t);
                if ("prompt" === f) {
                    var h =
                        b.fields,
                        q = g.createElement("div");
                    q.className = "alertify-text-wrapper";
                    h.forEach(function(a) {
                        var b = a.value || "",
                            c;
                        "textarea" === a.type ? (c = g.createElement("textarea"), c.innerHTML = b) : (c = g.createElement("input"), c.value = b, c.type = a.type);
                        c.id = a.id;
                        c.title = a.title;
                        c.className = "alertify-text";
                        c.setAttribute("data-value", b);
                        b = g.createElement("span");
                        b.textContent = a.title;
                        q.appendChild(b);
                        q.appendChild(c)
                    });
                    t.appendChild(q)
                }
                var v, h = g.createElement("button");
                h.id = "alertify-resetFocus";
                h.className = "alertify-resetFocus";
                h.innerHTML = "Reset Focus";
                p.appendChild(h);
                p.appendChild(l);
                switch (f) {
                    case "confirm":
                    case "prompt":
                        d(["cancel", "disregard", "ok"]);
                        break;
                    case "alert":
                    case "notify":
                    case "overlay":
                        h = g.createElement("span"), h.className = "icon-close", h.id = "alertify-ok", p.appendChild(h)
                }
                var u = !1 !== b.showCover;
                y.classList.remove("alertify-hidden");
                u && r.classList.remove("alertify-hidden");
                a.innerHTML = "";
                a.appendChild(p);
                requestAnimationFrame(function() {
                    y.className = "alertify alertify-" + f + " " + m;
                    u && (r.className = "alertify-cover");
                    I.constrain && c();
                    eventjs.add(a, "mousedown", eventjs.stop)
                })
            }

            function d(a, b) {
                var c = A.transition.type;
                A.bind(a, c, function H(a) {
                    a.stopPropagation();
                    A.unbind(this, c, H);
                    b && b.call(this)
                })
            }

            function e(a, b, c) {
                var d = g.createElement("article");
                d.className = "alertify-log alertify-log-hide" + ("string" === typeof b && b ? " alertify-log-" + b : "");
                d.innerHTML = a;
                t.appendChild(d);
                A.close(d, c);
                A.lastItem = d;
                setTimeout(function() {
                    d.classList.remove("alertify-log-hide")
                }, 40)
            }

            function c(c) {
                var e = b[0],
                    k = e.callback;
                h = !0;
                A.transition.supported &&
                    !c && d(y, function() {
                        A.setFocus()
                    });
                l(y, e);
                eventjs.add(y.firstChild, "click", eventjs.stop);
                eventjs.add(r, "click", function() {
                    A.hide();
                    k && k(!1)
                });
                p = C("#alertify-resetFocus");
                x = C("#alertify-ok");
                w = C("#alertify-cancel");
                u = C("#alertify-disregard");
                m = "cancel" === A.buttonFocus ? w : "none" === A.buttonFocus ? g.body : x;
                E = g.querySelectorAll(".alertify-text-wrapper .alertify-text") || void 0;
                a = e;
                E && E.length && e.fields.forEach(function(a, b) {
                    E[b].placeholder = a.placeholder || ""
                });
                A.setFocus();
                f(k);
                return this
            }
            var h = !1,
                b = [],
                a,
                w, u, x, p, m, v, r, y, t, E, z = {
                    ENTER: 13,
                    ESC: 27
                },
                C = function(a) {
                    return g.querySelector(a) || void 0
                },
                A = {
                    labels: {
                        ok: "OK",
                        cancel: "Cancel"
                    },
                    delay: 4E3,
                    buttonReverse: !1,
                    buttonFocus: "ok",
                    transition: void 0,
                    bind: function(a, b, c) {
                        "object" === typeof eventjs ? eventjs.add(a, b, c) : "function" === typeof a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent && a.attachEvent("on" + b, c)
                    },
                    handleErrors: function() {
                        return "undefined" !== typeof k.onerror ? (k.onerror = function(a, b, c) {
                            A.error("[" + a + " on line " + c + " of " + b + "]", 0)
                        }, !0) : !1
                    },
                    appendButtons: function(a,
                        b) {
                        return A.buttonReverse ? b + a : a + b
                    },
                    close: function(a, b) {
                        function c() {
                            t.hasChildNodes() || (A.transition.supported ? (d(t, function() {
                                t.classList.add("alertify-hidden")
                            }), t.classList.add("alertify-logs-hide")) : t.classList.add("alertify-hidden"))
                        }

                        function e(a) {
                            void 0 !== a && (A.transition.supported ? (d(a, function() {
                                a.parentNode === t && t.removeChild(a);
                                c()
                            }), a.classList.add("alertify-log-hide")) : (a.parentNode === t && t.removeChild(a), c()))
                        }
                        a = a || A.lastItem;
                        var f = isFinite(b) ? b : A.delay;
                        A.bind(a, "click", function() {
                            e(a)
                        });
                        0 !== b && setTimeout(function() {
                            e(a)
                        }, f)
                    }
                };
            A.dialog = function() {
                return function(a, d, e, f, k) {
                    var m = {};
                    "[object Object]" === Object.prototype.toString.call(d) ? (m = d).labels && (A.labels = m.labels) : (m.message = d, m.callback = e, m.fields = f, m.className = k);
                    m.type = a;
                    if (m.fields) {
                        d = m;
                        e = m.fields;
                        f = [];
                        "string" === typeof e && (e = [e]);
                        if (Array.isArray(e)) {
                            k = {
                                string: "text",
                                number: "number",
                                "boolean": "checkbox"
                            };
                            for (var p = 0; p < e.length; p++) {
                                var l = e[p],
                                    r = typeof l;
                                "object" === r ? f.push(l) : (r = k[r]) && f.push({
                                    type: r,
                                    placeholder: l
                                })
                            }
                        }
                        0 ===
                            f.length && f.push({
                                type: "text",
                                placeholder: ""
                            });
                        d.fields = f
                    }
                    m.id = Date.now();
                    v = g.activeElement;
                    if ("string" !== typeof a) throw Error("type must be a string");
                    if ("undefined" !== typeof m.callback && "function" !== typeof m.callback) throw Error("callback must be a function");
                    A.init && A.init();
                    b.push(m);
                    !h && c();
                    return m.id
                }
            }();
            A.extend = function(a) {
                if ("string" !== typeof a) throw Error("extend method must have exactly one paramter");
                return function(b, c) {
                    A.log(b, a, c);
                    return this
                }
            };
            A.hide = function() {
                function a(c) {
                    for (var d =
                            0; d < b.length; d++)
                        if (b[d].id === c) return b.splice(d, 1)[0]
                }
                return function(e) {
                    if (v) {
                        if (isFinite(e)) {
                            if (!a(e)) return
                        } else b.splice(0, 1);
                        if (0 < b.length) c(!0);
                        else {
                            h = !1;
                            var f = r.classList,
                                g = y.classList;
                            A.transition.supported ? (d(y, function() {
                                g.contains("alertify-hide") && (g.add("alertify-hidden"), f.add("alertify-hidden"))
                            }), g.add("alertify-hide"), f.add("alertify-cover-hide")) : (g.add("alertify-hide", "alertify-hidden"), f.add("alertify-cover-hide", "alertify-hidden"));
                            v.focus()
                        }
                    }
                }
            }();
            A.init = function() {
                g.createElement("nav");
                g.createElement("article");
                g.createElement("section");
                r = g.createElement("div");
                r.className = "alertify-cover alertify-cover-hide alertify-hidden";
                g.body.appendChild(r);
                y = g.createElement("section");
                y.id = "alertify";
                y.className = "alertify alertify-hide alertify-hidden";
                g.body.appendChild(y);
                t = g.createElement("section");
                t.id = "alertify-logs";
                t.className = "alertify-logs alertify-hidden";
                g.body.appendChild(t);
                g.body.setAttribute("tabindex", "0");
                var a, b = !1,
                    c = g.createElement("fakeelement"),
                    d = {
                        transition: "transitionend",
                        WebkitTransition: "webkitTransitionEnd",
                        MozTransition: "transitionend",
                        OTransition: "otransitionend"
                    },
                    e;
                for (e in d)
                    if (void 0 !== c.style[e]) {
                        a = d[e];
                        b = !0;
                        break
                    }
                A.transition = {
                    type: a,
                    supported: b
                };
                A.init = void 0
            };
            A.log = function(a, b, c) {
                A.init && A.init();
                t.className = "alertify-logs";
                e(a, b, c);
                return {
                    lastItem: A.lastItem,
                    close: A.close,
                    hide: A.hide
                }
            };
            A.set = function(a) {
                if ("object" !== typeof a && a instanceof Array) throw Error("args must be an object");
                for (var b in a) a.hasOwnProperty(b) && (A[b] = a[b])
            };
            A.setFocus = function() {
                E &&
                    E.length ? (E[0].focus(), E[0].select()) : m && m.focus()
            };
            A.unbind = function(a, b, c) {
                "object" === typeof eventjs ? eventjs.remove(a, b, c) : "function" === typeof a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent && a.detachEvent("on" + b, c)
            };
            var I = {
                constrain: !0
            };
            return {
                close: function(a, b) {
                    A.close(a, b || 1)
                },
                log_visible: function() {
                    return !(!C(".alertify-logs") || C(".alertify-logs.alertify-hidden"))
                },
                hide: function(a) {
                    A.hide(a)
                },
                alert: function(a, b, c) {
                    return A.dialog("alert", a, b, "", c)
                },
                confirm: function(a, b, c) {
                    return A.dialog("confirm",
                        a, b, "", c)
                },
                extend: A.extend,
                init: A.init,
                log: function(a, b) {
                    return A.log(a, "", b)
                },
                prompt: function(a, b, c, d) {
                    return A.dialog("prompt", a, b, c, d)
                },
                success: function(a, b) {
                    return A.log(a, "success", b)
                },
                error: function(a, b) {
                    return A.log(a, "error", b)
                },
                warn: function(a, b) {
                    return A.log(a, "warn", b)
                },
                dialog: A.dialog,
                set: A.set,
                labels: A.labels,
                debug: A.handleErrors,
                opts: I
            }
        };
    "function" === typeof define && define.amd ? define([], function() {
        return new f
    }) : "undefined" === typeof k.alertify && (k.alertify = new f)
})(this);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.UISidebar = function(g, f) {
        var k = this,
            l = g.dom,
            d = g.util;
        g.module.Listener(k);
        k.opened = !1;
        k.disabled = !0;
        var e = "sk-sidebar-" + f,
            c = l.$("." + e),
            h = document.documentElement;
        if (c && c.parentNode) {
            for (var b, a = c.offsetWidth, w = ["transform", "webkitTransform", "MozTransform", "OTransform", "msTransform"], l = 0; l < w.length; l++)
                if ("string" === typeof c.style[w[l]]) {
                    b = !0;
                    w = w[l];
                    break
                }
            k.setAnimate = function(a, b) {
                c.style.cssText = "transition: " + (a ? "all" : "none") + " " + (b || .35) + "s;"
            };
            k.setPosition =
                function(a) {
                    var d = "right" === f ? -1 : 1;
                    b ? (c.style[w] = "translate3d(" + a * d + "px, 0, 0)", c.style[f] = 0) : c.style[f] = a + "px"
                };
            k.open = function() {
                d.cookie.set("show-sidebar-" + f, "true");
                !1 === k.disabled && !1 === k.opened && (k.opened = !0, clearTimeout(k.timeoutClose), k.timeoutOpen = setTimeout(function() {
                    k.setPosition(0);
                    h.classList.add("sk-sidebar-active-" + f);
                    setTimeout(function() {
                        k.emit("open")
                    }, 350)
                }, 1))
            };
            k.close = function() {
                d.cookie.set("show-sidebar-" + f, "false");
                !1 === k.disabled && !0 === k.opened && (k.opened = !1, k.setPosition(-a),
                    h.classList.remove("sk-sidebar-active-" + f), clearTimeout(k.timeoutOpen), k.emit("close"))
            };
            k.toggle = function() {
                k.setAnimate(!0, .35);
                !0 === k.opened ? k.close() : k.open()
            };
            k.disable = function() {
                k.disabled || (k.disabled = !0, eventjs.remove(c, "drag", u))
            };
            k.enable = function() {
                k.disabled && (k.disabled = !1, eventjs.add(c, "drag", u))
            };
            var u = function(b, c) {
                eventjs.stop(b);
                var e = c.pointerEnd,
                    g = c.pointerMove;
                c.pointerStart && (c.moved = !1, c.timestamp = d.now(), document.activeElement && document.activeElement.blur());
                var h = c.start;
                if ("right" === f) var l = h.x - c.x,
                    t = h.y - c.y;
                else l = c.x - h.x, t = c.y - h.y;
                h = Math.abs(l);
                t = Math.abs(t);
                g && h > t && eventjs.prevent(b);
                if (!1 === k.disabled) {
                    k.opened ? (g = Math.min(0, l), -20 <= g && !c.moved ? g = 0 : c.moved = !0) : (g = Math.min(0, Math.max(0, l) - a), g <= -a + 20 && !c.moved ? g = -a : c.moved = !0);
                    if (e)
                        if (eventjs.prevent(b), e = d.now() - c.timestamp, e = Math.min(350, e) / 1E3, l = !c.moved && c.isArrow, k.opened) {
                            if (-50 >= g || l) {
                                k.setAnimate(!0, e);
                                k.close();
                                return
                            }
                            g = 0
                        } else {
                            if (g >= -a + 50 || l) {
                                k.setAnimate(!0, e);
                                k.open();
                                return
                            }
                            g = -a
                        }
                    k.setAnimate(!1);
                    k.setPosition(g)
                }
            };
            g.ui.scrollable(c, !0);
            h.classList.add("sk-sidebar-ready");
            k.enable();
            return this
        }
        console.warn(e + " does not exist")
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.UITooltip = function(g) {
        function f(c) {
            var d, e;
            eventjs.isTouch ? (d = 22, e = -15) : (d = 10, e = -10);
            d = Math.max(0, c.x + 15 + d);
            c = Math.max(0, c.y + 0 + e);
            e = Math.max(0, w - (window.innerWidth + window.pageXOffset - d));
            var f = Math.max(0, a - (window.innerHeight + window.pageYOffset - c));
            e ? (e = w + 30, b.classList.remove("right")) : b.classList.add("right");
            b.style.left = d - e + "px";
            b.style.top = c - f + "px"
        }

        function k(a) {
            p && f(eventjs.getPageXY(a))
        }

        function l(a, b, c, f) {
            eventjs[b](a, "mouseover", function(b) {
                eventjs.stop(b);
                e.update(c, null, f, a)
            });
            eventjs[b](a, "mouseout", d)
        }

        function d(a) {
            eventjs.stop(a);
            e.hide()
        }
        var e = this,
            c = g.agent || {},
            h = g.lang,
            b, a, w, u = !1,
            x = {},
            p = !1,
            m = void 0;
        e.add = function(a, b, d) {
            c.mobile || ("string" === typeof a && (a = document.querySelector(a)), l(a, "add", b, d))
        };
        e.remove = function(a) {
            l(a, "remove")
        };
        e.update = function(a, b, c, d) {
            (a !== m || v.triggered()) && e.show(a, b, c, d)
        };
        e.create = function() {
            b = document.createElement("div");
            b.setAttribute("id", "sk-tooltip");
            b.style.opacity = 0;
            b.style.filter = "alpha(opacity=0)";
            x.move =
                eventjs.add(document, "mousemove", k);
            x.down = eventjs.add(b, "mousedown", eventjs.cancel);
            document.body.appendChild(b);
            window.event && (p = !0, w = b.offsetWidth, a = b.offsetHeight, k(window.event));
            return b
        };
        e.destroy = function() {
            b && (eventjs.bulk(x, "remove"), b.parentNode.removeChild(b), b = null)
        };
        e.show = function(d, g, k, l) {
            c.mobile || (m = d, (d = "function" === typeof d ? h.translate(d.call(l)) : h.translate(d)) ? (b = b || e.create(), b.innerHTML = d, b.style.width = "auto", b.style.display = "block", v.abort(), u || (u = !0), b.style.opacity = 1, p = !0, w = b.offsetWidth, a = b.offsetHeight, g && (p = !1, f(g))) : e.hide())
        };
        e.hide = function() {
            u && (b = b || e.create(), b.style.opacity = 0, v())
        };
        e.refresh = function() {
            e.show(m)
        };
        var v = g.util.throttle(function() {
            m = void 0;
            u = p = !1;
            b.style.display = "none"
        }, 250)
    }
})(sketch);
(function(k) {
    k.module = k.module || {};
    k.module.TreeMenu = function(g, f, k, l) {
        function d() {
            var a = y.length,
                b = A.vector.current,
                c = a,
                d = t.$(".file.enabled", H);
            d && (d.classList.remove("enabled"), c = parseInt(d.getAttribute("data-layer")));
            for (c = Math.min(c, b); c < a; c++)
                if (d = t.$(".file" + c, H)) c === b ? (d.classList.add("enabled"), e(d)) : c > b ? e(d) : d.classList.remove("selected")
        }

        function e(a, b) {
            if (a = t.$(a)) t.setClass(a, "selected", b), y.selected = a
        }

        function c(a, b, c) {
            var d = t.create('<span class="divider ' + c + '"></span>');
            d.setAttribute("data-layer",
                b);
            d.setAttribute("data-command", c);
            a.insertBefore(d, a.firstChild)
        }

        function h(d, g, h, k) {
            var m = t.create('<li data-layer="' + h + '"></li>');
            if (k) {
                k = t.append(m, "ul");
                var p = String(g.groupId).split(".").pop();
                b(g, m, p, h + 1);
                d.insertBefore(m, d.firstChild);
                c(k, h - 1, "before");
                c(d, h + 1, "after");
                return k
            }
            k = g.name || g.type || "";
            p = t.create('<span class="content"></span>');
            m.appendChild(p);
            m.className = "file file" + h;
            if (D) {
                if (!1 === g.selectable) return;
                f.selection.items[h] && e(m);
                var l = new Image;
                l.width = 18;
                l.height = 29;
                v(l, g);
                p.appendChild(l)
            } else l = t.create("b"), l.className = "icon-" + (J[g.name] || "infinity"), p.appendChild(l), -1 !== h && (l = t.create("i"), l.style.cssText = "float: right; padding-right: 10px;", l.textContent = "#" + (h + 1), p.appendChild(l));
            a(g, m, p, k);
            d.insertBefore(m, d.firstChild);
            B.tooltip.add(m, function() {
                if (this && this.classList && F) return this.classList.contains("enabled") ? "Now" : this.classList.contains("selected") ? "The future" : "The past"
            });
            eventjs.add(m, "mousedown", u(g, m));
            c(d, h + 1, "after");
            return d
        }

        function b(b, c, d,
            e) {
            e = t.create("input");
            e.className = "checkbox";
            e.type = "checkbox";
            e.checked = !0;
            c.appendChild(e);
            e = t.create("label");
            var f = t.create('<span class="carret"></span>');
            e.appendChild(f);
            c.appendChild(e);
            a(b, c, e, d, !0);
            eventjs.add(f, "mousedown", function(a, b) {
                input.checked = !input.checked
            });
            eventjs.add({
                target: e,
                mousedown: eventjs.prevent,
                dblclick: function(a, b) {
                    input.checked = !input.checked
                }
            })
        }

        function a(a, b, c, d, e) {
            function g(a) {
                return !1 === a ? "icon-eye-close" : "icon-eye-open"
            }
            e = t.create("font");
            e.innerHTML = E.translate(d);
            c.appendChild(e);
            if (D) {
                eventjs.add(c, "contextmenu", w);
                eventjs.add(c, "drag", m(b), {
                    position: "difference"
                });
                var h = t.create("span");
                h.className = g(a.visible);
                eventjs.add(h, "mousedown", function(b) {
                    eventjs.cancel(b);
                    b = !(a.visible = !1 !== a.visible);
                    h.className = g(b);
                    f.setConfig({
                        selection: [a],
                        param: "visible",
                        value: b
                    })
                });
                d = t.create('<span class="icon-contextmenu"></span>');
                eventjs.add(d, "mousedown", u(a, b));
                eventjs.add(d, "mousedown", w);
                b = t.create("div");
                b.className = "right";
                b.appendChild(h);
                b.appendChild(d);
                c.appendChild(b)
            }
        }

        function w(a) {
            eventjs.cancel(a);
            B.contextMenu.show({
                at: {
                    element: this,
                    align: "top left to bottom left"
                },
                menu: "layers"
            })
        }

        function u(a, b) {
            return D ? p(a, b) : x(a, b)
        }

        function x(a, b) {
            return function(a) {
                eventjs.cancel(a);
                a = A.vector.current;
                var c = r(b);
                (a -= c) && (0 > a ? A.redo({
                    steps: Math.abs(a)
                }) : A.undo({
                    steps: a
                }));
                y.selected = b
            }
        }

        function p(a, b) {
            return function(c) {
                eventjs.cancel(c);
                if (eventjs.shiftKey) {
                    var d = y.selected;
                    c = r(b);
                    var e = r(d || b),
                        d = Math.min(c, e);
                    for (c = Math.max(c, e); d <= c; d++)(e = f.scene.children[d]) && (eventjs.metaKey ?
                        e.selected ? f.scene.deselect(d) : f.scene.selectByIdx(d, !1) : f.scene.selectByIdx(d, !1))
                } else eventjs.metaKey ? a.selected ? f.scene.deselect(a.zIndex) : f.scene.selectByIdx(a.zIndex, !1) : !1 === b.classList.contains("selected") && f.scene.selectByIdx(a.zIndex, !0);
                y.selected = b;
                f.render.dirty = !0;
                f.render.dirtyControls = !0
            }
        }

        function m(a) {
            var b = null,
                c = null,
                d = r(a),
                e = function() {
                    if (c) {
                        var a = r(c),
                            e = c.getAttribute("data-command");
                        console.log("send", d, a, e);
                        f.scene.sendTo({
                            idx: a,
                            record: !0
                        });
                        f.render.dirty = !0;
                        f.render.dirtyControls = !0;
                        y.render();
                        t.setClass({
                            target: c,
                            name: "hover",
                            on: !1,
                            list: t.$$("span.divider", H)
                        })
                    }
                    H.classList.remove("dragging");
                    b && (b = null)
                };
            return function(g, h) {
                if (!eventjs.metaKey && !eventjs.shiftKey) {
                    var k = "up" === h.state;
                    "down" === h.state && (H.classList.add("dragging"), h.selected = a.classList.contains("selected"), h.offsetTop = a.offsetTop);
                    if (5 >= h.distanceMoved()) {
                        if (k) return h.selected && f.scene.selectByIdx(d, !0), e()
                    } else {
                        eventjs.cancel(g);
                        null === b && (b = a.cloneNode(!0), b.classList.add("moving"), H.appendChild(b));
                        var m = b.style;
                        m.display = "none";
                        var l = eventjs.getPageXY(g),
                            p = eventjs.getBBox(H),
                            l = document.elementFromPoint(l.x - p.pageXOffset, l.y - p.pageYOffset);
                        m.top = h.y + h.offsetTop - H.scrollTop + "px";
                        for (m.display = ""; l;) {
                            if (l === H || l === document) return k && e();
                            if (l.classList.contains("divider")) {
                                c = l;
                                break
                            } else l = l.parentNode
                        }
                        l && t.setClass({
                            target: l,
                            name: "hover",
                            on: !0,
                            list: t.$$("span.divider", l.parentNode)
                        });
                        k && e()
                    }
                }
            }
        }

        function v(a, b) {
            if (b.ctx) {
                var c = b.ctx.canvas,
                    d;
                z.cache257 && C.useCache257[b.type] && (d = [0, 0, b.bbox.width,
                    b.bbox.height
                ]);
                var e = c.thumb = c.thumb || I.thumbnailer({
                    crop: "edge",
                    croparea: d,
                    center: !0,
                    background: "#fff",
                    src: c,
                    width: 18,
                    height: 28
                });
                e.blobURL ? a.src = e.blobURL : e.toBlobURL(function(b) {
                    e.blobURL = b;
                    a.src = b
                })
            } else a.src = B.media.get("clear"), a.style.background = "#04a";
            B.tooltip && B.tooltip.add(a, function() {
                return c ? '<img src="' + I.thumbnailer({
                    crop: "edge",
                    croparea: d,
                    center: !0,
                    background: "#fff",
                    src: c,
                    width: 100,
                    height: 100
                }).toDataURL() + '">' : "out of bounds"
            }, 50)
        }

        function r(a) {
            return parseFloat(a.getAttribute("data-layer"))
        }
        var y = this,
            t = g.dom,
            E = g.lang,
            z = g.feature,
            C = g.detect,
            A = f.history,
            I = g.util,
            B = g.ui,
            D = "#sk-layers .sk-pane-content" === k,
            F = "#sk-history .sk-pane-content" === k,
            G = l,
            H = null;
        y.setData = function(a) {
            G = a
        };
        y.length = -1;
        y.render = function() {
            return function() {
                H = t.$(k);
                if (y.length === G.length && F) d();
                else {
                    t.empty(H);
                    y.shifted = null;
                    y.selected = null;
                    var a = H,
                        b = void 0,
                        e = {},
                        f = 0,
                        g = G.length;
                    if (f || g)
                        for (y.length = g, c(H, 0, "before"); f < g; f++) {
                            var m = G[f],
                                l = String(m.groupId);
                            "undefined" === l ? (b = void 0, a = h(H, m, f)) : e[l] ? (b = l, h(e[b], m, f)) :
                                l !== b && (b = l, -1 === b.indexOf(".") && (a = H), a = e[b] = h(a, m, f, !0))
                        } else t.append(H, '<span style="padding: 15px; display: inline-block;">' + E.translate(D ? "no-layers" : "no-history") + "</span>");
                    F && d()
                }
            }
        }();
        y.select = function(a) {
            a.forEach(function(a) {
                a && e(".file" + a.zIndex, !0)
            })
        };
        y.deselect = function(a) {
            a.forEach(function(a) {
                a && e(".file" + a.zIndex, !1)
            })
        };
        var J = function() {
            var a = {},
                b;
            for (b in f.toolkitConfig) a[b] = b;
            return I.copyInto(a, {
                "reset-clipart-color": "remove",
                "update-clipart-color": "palette",
                "remove-objects": "infinity",
                background: "screen",
                "change-media": "image",
                "Resize Text": "infinity",
                VOBNodeList: "infinity",
                "cut-objects": "clipboard",
                "paste-objects": "clipboard",
                "merge-objects": "merge",
                "merge-paths": "merge",
                "split-path": "scissors",
                "update-style": "palette",
                "crop-draw": "crop",
                crop: "crop",
                "update-text": "text",
                "resize-canvas": "crop",
                "set-background": "crop"
            })
        }();
        y.render()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(f) {
        return function() {
            console.warn(f, arguments)
        }
    }
    k.util = k.util || {};
    k.util.Uploader = function(f) {
        function q(a) {
            var b = {};
            b.name = a.name || a.fileName;
            b.src = a.src;
            b.size = a.size || a.fileSize;
            b.type = a.type;
            a = JSON.stringify(b);
            for (var b = 5381, c = 0, d = a.length; c < d; c++) var e = a.substr(c, 1).charCodeAt(),
                b = (b << 5) + b + e;
            return b
        }

        function l(a, b) {
            var c = Object.prototype.toString.call(a);
            "[object Object]" === c && a.src && (c = "");
            switch (c) {
                case "[object Array]":
                    for (var c = 0, d = a.length; c < d; c++) b(a[c]);
                    break;
                case "[object Object]":
                    for (d in a) b(a[d], d);
                    break;
                default:
                    b(a)
            }
        }

        function d(a) {
            if ("[object Blob]" === String(a.files)) var c = a.files;
            else c = new FormData, l(a.files, function(a, b) {
                if ("undefined" !== typeof a.data) c.append(b || a.name || a.fileName, a.data);
                else if (a.src && "data:" === a.src.substr(0, 5)) {
                    var d = JSON.stringify(a);
                    c.append(b || a.name || a.fileName, d)
                } else c.append(b || a.hash, a)
            });
            var d = new XMLHttpRequest;
            d.upload.onprogress = function(c) {
                if (c.lengthComputable) {
                    var d = c.loaded;
                    a.lengthComputable = !0;
                    a.transferPercent =
                        Math.round(100 * d / c.total);
                    a.transferTotal = w.bytesToSize(d);
                    var e = 2 * (d - a.bytes);
                    0 !== e && (a.bytes = d, a.transferSpeed = w.bytesToSize(e), a.timeRemaining = w.getTimeFormat((c.total - a.bytes) / e * 1E3, !0), a.timeLapse = w.getTimeFormat(Date.now() - c.timeStamp, !0));
                    if (a.onProgress) a.onProgress(a, c);
                    else if (b.onProgress) b.onProgress(a, c)
                } else a.lengthComputable = !1, a.transferSpeed = 0, a.transferTotal = 0, a.transferPercent = 0, a.timeRemaining = 0
            };
            d.onload = function(c) {
                "[object Blob]" !== String(a.files) && l(a.files, function(a, b) {
                    "undefined" ===
                    typeof a.date && (a.isUploaded = !0)
                });
                var d = c.target.responseText;
                if ("json" === a.confirm) try {
                    d = JSON.parse(d)
                } catch (e) {
                    console.log(c.target.responseText)
                }
                if (b.UPLOAD_ERR[d]) {
                    if (b.onError) b.onError(b, d);
                    if (a.onError) a.onError(b, d)
                } else {
                    if (b.onLoad) b.onLoad(a, d);
                    if (a.onUpload) a.onUpload(a, d)
                }
            };
            d.onerror = function(c) {
                if (b.onError) b.onError(b, "UPLOAD_ERR_XHTTP", c);
                if (a.onError) a.onError(b, "UPLOAD_ERR_XHTTP", c)
            };
            d.onabort = function(c) {
                if (b.onAbort) b.onAbort(b, "UPLOAD_ERR_XHTTP", c);
                if (a.onAbort) a.onAbort(b, "UPLOAD_ERR_XHTTP",
                    c)
            };
            d.open("POST", a.action, !0);
            d.send(c)
        }

        function e(c) {
            var d = a.create("form");
            document.body.appendChild(d);
            var e = a.create("iframe");
            e.setAttribute("id", "upload_iframe");
            e.setAttribute("name", "upload_iframe");
            e.setAttribute("width", "0");
            e.setAttribute("height", "0");
            e.setAttribute("border", "0");
            e.setAttribute("style", "width: 0; height: 0; border: none;");
            var f = function() {
                try {
                    var a = e.contentDocument.body
                } catch (f) {
                    try {
                        a = e.contentWindow.document.body
                    } catch (g) {
                        a = e.document.body
                    }
                }
                if (a.innerHTML) {
                    l(c.files,
                        function(a) {
                            "undefined" === typeof a.date && (a.isUploaded = !0)
                        });
                    a = a.innerHTML;
                    if ("json" === c.confirm) try {
                        a = JSON.parse(a)
                    } catch (h) {
                        console.log && console.log(a)
                    }
                    if (b.UPLOAD_ERR[a]) {
                        if (b.onError) b.onError(b, a);
                        if (c.onError) c.onError(b, a)
                    } else {
                        if (b.onLoad) b.onLoad(b, a);
                        if (c.onUpload) c.onUpload(b, a)
                    }
                }
                setTimeout(function() {
                    d.parentNode && d.parentNode.removeChild(d);
                    b.fileInput.parent && b.fileInput.parent.appendChild(b.fileInput)
                }, 250)
            };
            e.addEventListener ? e.addEventListener("load", f, !0) : e.attachEvent && e.attachEvent("onload",
                f);
            d.appendChild(e);
            window.frames.upload_iframe.name = "upload_iframe";
            l(c.files, function(c, e) {
                if ("undefined" !== typeof c.data) {
                    var f = a.create("input");
                    f.type = "hidden";
                    f.value = c.data;
                    f.name = e || c.name || c.fileName
                } else c.src && "data:image/" === c.src.substr(0, 11) ? (f = a.create("input"), f.type = "hidden", f.value = JSON.stringify(c), f.name = e || c.name || c.fileName) : "string" === typeof c ? (f = a.create("input"), f.type = "hidden", f.value = c, f.name = e) : (f = b.fileInput, f.parent = f.parentNode, f.name = e || c.hash);
                d.appendChild(f)
            });
            d.setAttribute("target",
                "upload_iframe");
            d.setAttribute("action", c.action);
            d.setAttribute("method", "post");
            d.setAttribute("enctype", "multipart/form-data");
            d.setAttribute("encoding", "multipart/form-data");
            d.submit()
        }

        function c(a, b) {
            for (var c = a.length; c--;)
                if (a[c] === b) return !0;
            return !1
        }

        function h(a, b, c) {
            c = isFinite(c) ? c : Infinity;
            var d = this;
            this.files = [];
            this.pending = 0;
            this.recurse = function(a, b, c) {
                this.pending++;
                if (!a) return d.runCallback();
                a.isFile ? a.file(function(a) {
                        a.path = b + a.name;
                        d.files.push(a);
                        d.runCallback()
                    }) : a.isDirectory &&
                    a.createReader().readEntries(function(e) {
                        for (var f = 0; f < e.length; f++) d.recurse(e[f], b + a.name + "/", c + 1);
                        d.runCallback()
                    })
            };
            this.runCallback = function() {
                --this.pending || b(this.files)
            };
            for (c = 0; c < a.length; c++)
                if (a[c].webkitGetAsEntry) {
                    var e = a[c].webkitGetAsEntry();
                    this.recurse(e, "", 0)
                }
        }
        var b = this,
            a = k.dom,
            w = k.util;
        f = f || {};
        b.debug = !1;
        b.mode = f.mode || "read";
        b.action = f.action || "./filesystem.php?upload=true";
        b.confirm = f.confirm || "text";
        b.onUpload = f.onupload;
        b.onProgress = f.onprogress;
        b.onLoad = f.onload;
        b.onError =
            f.onerror;
        b.onAbort = f.onabort;
        b.onChange = f.onchange || g("onchange");
        b.onChangeDefault = b.onChange;
        b.directory = f.directory || !1;
        b.maxFiles = f.maxFiles || 1;
        b.maxFileSize = f.maxFileSize || 104857600;
        "object" === typeof f.fakeInput ? (b.fakeInput = f.fakeInput, b.fakeInputParent = f.fakeInputParent || null) : "object" === typeof f.fileInput && (b.fileInput = f.fileInput);
        b.dropAreaContainer = f.dropArea;
        b.dropAreaMessage = f.dropAreaMessage || "Drop File(s) Here";
        b.dropAreaStyle = f.dropAreaStyle || "";
        b.files = {};
        b.filesByName = {};
        b.filesByPath = {};
        b.formats = {};
        var u = (f.formats || "jpg,jpeg,gif,png").split(",");
        for (f = 0; f < u.length; f++) b.formats[u[f].trim().toLowerCase()] = !0;
        b.addFileInput = function(c) {
            c = c || {};
            c.nodeName && (c = {
                target: c
            });
            var d = a.$(c.target),
                e = c.wrapper,
                f = c.onchange || b.onChange;
            if (c = d && d.parentNode) {
                if ("sk-fileWrapper" === c.className) return;
                b.fileInput = null
            }
            if (!d || !d.querySelector(".sk-fileInput")) {
                var g = b.fakeInput = d;
                if (b.fileInput) b.initFileInput(b.fileInput);
                else if (g || e) {
                    var h = b.fileInput = a.create("input");
                    h.style.cssText = "position: absolute; top: 0; z-index: 99999; font-size: 1000px; text-align: right; cursor: pointer; right: 0; filter: alpha(opacity: 0); opacity: 0.01;";
                    h.style.width = "100%";
                    h.style.height = "100%";
                    h.className = "sk-fileInput";
                    var l = function(a, c) {
                        b.onChange = b.onChangeDefault || b.onChange;
                        eventjs.remove(document.body, "focus", l)
                    };
                    eventjs.add(h, "mousedown", function(a) {
                        eventjs.stop(a);
                        b.onChange = f
                    });
                    eventjs.add(h, "click", function(a, b) {
                        eventjs.add(document.body, "focus", l)
                    });
                    u.length && k.agent && k.agent.chooseEntry ? eventjs.add(h, "click", function(a) {
                        eventjs.cancel(a);
                        k.open.chooseEntry({
                            onsuccess: function(a) {
                                b.handleFiles([a])
                            }
                        })
                    }) : (h.setAttribute("type", "file"),
                        h.setAttribute("capture", "camera"));
                    1 < b.maxFiles ? (h.setAttribute("name", "files[]"), h.setAttribute("multiple", "multiple")) : h.setAttribute("name", "file");
                    b.directory && (h.setAttribute("directory", ""), h.setAttribute("mozdirectory", ""), h.setAttribute("webkitdirectory", ""));
                    if (e) e.appendChild(h);
                    else {
                        c = b.fakeInputParent || g.parentNode;
                        e = a.create("span");
                        e.className = "sk-fileWrapper";
                        e.style.cssText = "position: relative; overflow: hidden; z-index: 0;";
                        g.style.cssText && (e.style.cssText += g.style.cssText);
                        x[g.nodeName] &&
                            (e.style.display = "inline-block");
                        var p = !0,
                            d = function() {
                                p && (p = !1, b.fakeInputParent ? b.fakeInputParent.appendChild(e) : g.parentNode && g.parentNode.replaceChild(e, g), e.appendChild(g), e.appendChild(h));
                                var c = a.measure(g),
                                    d = c.width,
                                    c = c.height;
                                !x[g.nodeName] && d && c && (e.style.width = d + "px", e.style.height = c + "px")
                            };
                        c = a.measure(g);
                        var q = c.height;
                        c.width || q ? d() : setTimeout(d, 250)
                    }
                    b.initFileInput(h)
                }
            }
        };
        var x = {
            A: !0,
            SPAN: !0
        };
        b.initFileInput = function(a) {
            a && (a.onchange = function(c) {
                if (a.files && a.files.length) b.handleFiles(c.target.files,
                    function() {
                        a.value = ""
                    }, c);
                else {
                    var d = a.value,
                        e = d.replace(/\\/g, "/").replace(/.*\//, "");
                    b.handleFiles([{
                        src: d,
                        name: e
                    }], null, c)
                }
            })
        };
        var p = a.create('<form class="sk-uploader"></form>');
        b.addDropArea = function(a) {
            function d() {
                p.classList.remove("visible");
                d.timeout = setTimeout(function() {
                    p.style.display = "none"
                }, 250)
            }
            a = a || {};
            a.nodeName && (a = {
                target: a
            });
            var e = e || b.dropAreaContainer;
            a = !a.target;
            p.innerHTML = b.dropAreaMessage;
            b.dropAreaStyle && (p.style.cssText += b.dropAreaStyle);
            p.onclick = function() {
                d()
            };
            p.ondragenter =
                function(a) {
                    eventjs.cancel(a);
                    return !1
                };
            p.ondragover = function(a) {
                eventjs.cancel(a);
                return !1
            };
            p.ondrop = function(a) {
                eventjs.cancel(a);
                d();
                var c = a.dataTransfer;
                c && (c.items ? new h(c.items, function(c) {
                    c.length && b.handleFiles(c, null, a)
                }) : c.files && (c = c.files, c.length && b.handleFiles(c, null, a)))
            };
            p.ondragleave = function(a) {
                var b = eventjs.getPageXY(a);
                if (0 !== b.x || 0 !== b.y)
                    for (b = document.elementFromPoint(b.x, b.y); b !== document && b;) {
                        if (b.classList.contains("sk-uploader")) return;
                        b = b.parentNode
                    }
                eventjs.cancel(a);
                setTimeout(d,
                    100)
            };
            e === window && (e = document.body);
            a && e.appendChild(p);
            e.ondragenter = function(a) {
                (a = a.dataTransfer) && a.types && c(a.types, "Files") && (clearTimeout(d.timeout), p.style.display = "block", setTimeout(function() {
                    p.classList.add("visible");
                    p.style.display = "table"
                }, 10))
            };
            e === document.body && eventjs.add(window, "resize", function(a) {
                window.innerWidth && window.innerHeight && (p.style.width = window.innerWidth + "px", p.style.height = window.innerHeight + "px")
            })
        };
        b.handleFiles = function(a, c, d) {
            function e(a, c) {
                c.src && (c = [c]);
                for (var d in c) {
                    var f =
                        b.files[d],
                        h = c[d];
                    f.src = h.src;
                    f.size = h.size;
                    f.type = h.type;
                    f.name = h.name
                }
                g()
            }

            function f(a) {
                var c = a.hash;
                if (a.type && !l[a.type.substr(6).toLowerCase()]) {
                    var d = new FileReader;
                    d.onload = function(a) {
                        b.files[c].src = a.target.result;
                        b.files[c].isRead = !0;
                        return g()
                    };
                    d.readAsText(a)
                } else try {
                    var h = URL.createObjectURL(a);
                    b.files[c].src = h;
                    b.files[c].isRead = !0;
                    return g()
                } catch (k) {
                    try {
                        d = new FileReader, d.onload = function(a) {
                            b.files[c].src = a.target.result;
                            b.files[c].isRead = !0;
                            return g()
                        }, d.readAsDataURL(a)
                    } catch (m) {
                        a.upload =
                            new b.upload({
                                file: a,
                                onupload: e
                            })
                    }
                }
            }

            function g(a) {
                a ? h() : setTimeout(h, 30)
            }

            function h() {
                if (b.onProgress) b.onProgress({
                    transferPercent: k / a.length * 100 >> 0
                }, d);
                var l = a[k];
                if (++k > b.maxFiles || !l) {
                    if (b.onLoad) b.onLoad();
                    if (1 === b.maxFiles) {
                        if ("undefined" === typeof a[0]) {
                            if (b.onError) b.onError(b, "UPLOAD_ERR_FORMAT");
                            c && c();
                            return
                        }
                        var p = q(a[0]);
                        b.file = b.files[p] || a[0];
                        c && c();
                        return b.onChange(b, d || {})
                    }
                    for (var u in b.files);
                    c && c();
                    return b.files[u] ? b.onChange(b, d || {}) : void 0
                }
                u = l.name || l.fileName || "";
                var w = l.path ||
                    u,
                    p = l.type || "",
                    x;
                p && (x = p.split("/").pop());
                b.formats[x] || (x = u.split(".").pop().toLowerCase());
                var p = q(l),
                    A = b.files[p];
                if (A && (b.changedFiles[p] = A, b.changedFilesByName[u] = A, b.changedFilesByPath[w] = A, "upload" === b.mode && A.isUploaded || "read" === b.mode && A.isRead)) return g(!0);
                if (!b.formats[x]) {
                    if (b.onError) b.onError(b, "UPLOAD_ERR_FORMAT");
                    return g(!0)
                }
                x = l.fileSize || l.size;
                if (0 === x) {
                    if (b.onError) b.onError(b, "UPLOAD_ERR_NO_FILE");
                    return g(!0)
                }
                if (x && x > b.maxFileSize) {
                    if (b.onError) b.onError(b, "UPLOAD_ERR_FORM_SIZE");
                    return g(!0)
                }
                l.hash = p;
                b.files[p] = l;
                b.filesByName[u] = l;
                b.filesByPath[w] = l;
                b.changedFiles[p] = l;
                b.changedFilesByName[u] = l;
                b.changedFilesByPath[w] = l;
                if ("upload" === b.mode) l.upload = new b.upload({
                    file: l,
                    onupload: e
                });
                else if ("read" === b.mode) f(l);
                else return g(!0)
            }
            if (b.onProgress) b.onProgress({
                transferPercent: 0
            }, d);
            var k = 0,
                l = {
                    jpg: !0,
                    jpeg: !0,
                    gif: !0,
                    png: !0
                };
            b.changedFiles = {};
            b.changedFilesByName = {};
            b.changedFilesByPath = {};
            g()
        };
        b.UPLOAD_ERR = {
            UPLOAD_ERR_INI_SIZE: "The uploaded file exceeds the upload_max_filesize directive",
            UPLOAD_ERR_FORM_SIZE: "The uploaded file exceeds the MAX_FILE_SIZE directive",
            UPLOAD_ERR_PARTIAL: "The uploaded file was only partially uploaded",
            UPLOAD_ERR_NO_FILE: "No file was uploaded",
            UPLOAD_ERR_NO_TMP_DIR: "Missing a temporary folder",
            UPLOAD_ERR_CANT_WRITE: "Failed to write file to disk",
            UPLOAD_ERR_EXTENSION: "A PHP extension stopped the file upload",
            UPLOAD_ERR_FORMAT: "The uploaded file was an invalid format",
            UPLOAD_ERR_XHTTP: ""
        };
        b.upload = function(a) {
            this.onAbort = a.onabort;
            this.onUpload = a.onupload;
            this.onProgress = a.onprogress;
            this.onError = a.onerror;
            this.action = a.action || b.action;
            this.confirm = a.confirm || b.confirm;
            this.files = 0 === String(a.file).indexOf("[object") ? [a.file] : a.files;
            this.bytes = this.timeLapse = this.timeRemaining = this.transferPercent = this.transferTotal = this.transferSpeed = 0;
            window.FormData ? d(this, this.onUpload) : e(this, this.onUpload)
        };
        b.dropAreaContainer && b.addDropArea();
        (b.fakeInput || b.fileInput) && b.addFileInput()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module.add(function(g) {
        var f = g.feature,
            k = g.io,
            l = g.util,
            d = ["jpg", "jpeg", "gif", "png", "svg"];
        k.json && d.push("json");
        k.zip && d.push("zip");
        k.json && k.zip && d.push("sketchpad");
        f.io.pdf && d.push("pdf");
        f.io.psd && d.push("psd");
        k.abr && d.push("abr");
        k.gbr && d.push("gbr");
        l.exists("Color.open.GGR") && d.push("ggr");
        l.exists("Color.open.GPL") && d.push("gpl");
        if (f.uploader.DnD) var e = f.uploader.DnDArea || document.body,
            c = f.uploader.DnDMessage || '\t\t\t<div class="sk-uploader-anim"></div>\t\t\t  <div class="sk-uploader-text">Drop files here<br>\t\t\t\t  <div><i>Accepted formats: </i><br>.' +
            d.join(" .") + "</div>\t\t\t  </div>\t\t\t</div>\t\t";
        (g.uploader = new l.Uploader({
            confirm: "json",
            action: g.loc.POST,
            mode: "read",
            maxFiles: g.agent.ios ? 1 : Infinity,
            formats: d.join(","),
            dropArea: e,
            dropAreaMessage: c,
            onchange: function(c, b) {
                var a = g.doc,
                    d = g.doc.scene;
                if (isFinite(b.pageX)) {
                    for (var e = eventjs.elementsFromEvent(b), f = 0; f < e.length; f++) {
                        var k = e[f];
                        if (k.matches(".sk-canvas-dummy")) {
                            g.setDocument(k.getAttribute("data-pid"));
                            a = g.doc;
                            d = g.doc.scene;
                            break
                        }
                    }
                    d = d.pointInSceneFromEvent(b);
                    c.addMedia({
                        self: c,
                        pt: {
                            x: d.x -
                                a.originX,
                            y: d.y - a.originY
                        }
                    })
                } else c.addMedia({
                    self: c
                })
            },
            onprogress: function(c) {
                g.loader && g.loader.create("thread", "Uploading...", c.transferPercent)
            },
            onerror: function(c, b, a) {
                g.loader && g.loader.stop("thread");
                g.ui.log("upload-invalid")
            }
        })).addMedia = function(c) {
            function b() {
                e.x += f.io.translateX;
                e.y += f.io.translateY;
                f.doc.editable ? isFinite(a.selection.idx) && m.push(a.selection.idx) : d.deselectAll();
                setTimeout(q.next, 50)
            }
            var a = g.doc,
                d = g.doc.scene;
            if (!a.addMedia) return console.warn("doc.addMedia undefined");
            var e = c.pt || {},
                k = c.self,
                p = c.openAsNew;
            a.toolkitConfig.reset("image");
            var m = [];
            c = k.changedFilesByName;
            if (c["sketch.json"]) g.open.folder({
                entries: c
            });
            else var q = l.Queue({
                flatten: !1,
                items: k.changedFiles,
                oncomplete: function() {
                    1 === m.length ? g.ui.configurePane && g.ui.configurePane(d.children[m[0]].type, !0) : (d.deselectAll(), d.selectByIdx(m, !1), a.render.dirty = !0, a.render.dirtyControls = !0)
                },
                next: function(c) {
                    q = this;
                    var f = 0 === (c.type || "").indexOf("image/"),
                        h = {
                            openAsNew: p,
                            data: c,
                            x: e.x,
                            y: e.y,
                            onsuccess: b
                        };
                    g.vortex &&
                        f && e.x && e.y ? g.vortex.create({
                            pid: c.src,
                            point: d.pointInWindowFromScene(e),
                            message: c.name || "adding image",
                            callback: function(b) {
                                g.vortex.destroy(b);
                                a.addMedia(h)
                            }
                        }) : a.addMedia(h)
                }
            })
        }
    })
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    var g, f = {
        id: "loader",
        bars: 12,
        radius: 0,
        lineWidth: 14,
        lineHeight: 40,
        timeout: 0,
        display: !0
    };
    k.ui = k.ui || {};
    k.ui.Loader = function(d) {
        var e = this;
        void 0 === g && (g = !!document.createElement("canvas").getContext);
        if (g) {
            var c = k.ui.Loader.threads;
            "string" === typeof d && (d = {
                message: d
            });
            "boolean" === typeof d && (d = {
                display: !1
            });
            "undefined" === typeof d && (d = {});
            d.container = d.container || document.body;
            if (d.container) {
                for (var h in f) "undefined" === typeof d[h] && (d[h] = f[h]);
                var b = function(a) {
                        for (var b in c)
                            if (c[b] ===
                                a) return b
                    },
                    a = document.getElementById(d.id);
                if (a) this.span = a.parentNode.getElementsByTagName("span")[0];
                else {
                    var w = document.createElement("div");
                    h = document.createElement("span");
                    h.className = "message";
                    w.className = f.id;
                    w.style.cssText = q("opacity", 400);
                    this.span = h;
                    this.div = w;
                    a = document.createElement("canvas");
                    a.id = d.id;
                    a.style.cssText = "opacity: 1; position: absolute; z-index: 10000;";
                    w.appendChild(a);
                    w.appendChild(h);
                    var u = document.createElement("div");
                    u.className = "meter";
                    u.style.padding = "10px";
                    h = document.createElement("span");
                    h.style.width = "3%";
                    u.appendChild(h);
                    this.meter = h;
                    this.meterContainer = u;
                    this.span.appendChild(u);
                    d.container.appendChild(w)
                }
                var x = d.bars,
                    p = d.radius,
                    m = 2 * (d.lineHeight + 20) + 2 * d.radius;
                l(d.container);
                var v = window.devicePixelRatio || 1;
                a.width = m * v;
                a.height = m * v;
                var r = 0,
                    y = a.getContext("2d");
                y.globalCompositeOperation = "lighter";
                y.shadowOffsetX = 1;
                y.shadowOffsetY = 1;
                y.shadowBlur = 0;
                y.shadowColor = "rgba(0,0,0,0.5)";
                this.messages = {};
                this.threads = k.ui.Loader.threads;
                this.create = function(a, b, d) {
                    a = c[a] = c[a] || e.add(b);
                    isFinite(a) && b && "string" === typeof(b.message || b) ? e.update(a, b.message || b, b.percent || d) : isFinite(d) && e.update(a, null, d)
                };
                this.update = function(a, b, c) {
                    "object" === typeof a && (c = a.percent, b = a.message, a = a.id);
                    if (!isFinite(a))
                        for (a in e.messages);
                    if (a = e.messages[a]) a.message = b = b || a.message, "number" === typeof c && (a.span.innerHTML = c + "%"), "..." === b.substr(-3) ? (a._message = b.substr(0, b.length - 3), a.messageAnimate = [".&nbsp;&nbsp;", "..&nbsp;", "..."].reverse()) : (a._message = b, a.messageAnimate = !1), a.element.innerHTML =
                        b
                };
                this.add = function(a) {
                    a || (a = {
                        message: ""
                    });
                    "string" === typeof a && (a = {
                        message: a
                    });
                    this.span.style.cssText = "background: " + (d.background ? d.background : "rgba(0,0,0,1)") + ";";
                    this.div.style.cssText = q("opacity", 400);
                    this.stopPropagation ? this.div.style.cssText += "background: rgba(0,0,0,0.25);" : (this.div.style.pointerEvents = "none", this.div.style.height = 0);
                    this.div.style.opacity = 1;
                    this.div.style.display = "block";
                    d.background && (this.div.style.background = d.backgrond);
                    var b = Date.now(),
                        c = Math.abs(b * Math.random() >>
                            0),
                        e = a.message,
                        f = document.createElement("div");
                    f.style.cssText = q("opacity", 500);
                    var g = document.createElement("span");
                    g.style.cssText = "float: right; width: 50px;";
                    var h = document.createElement("span");
                    h.innerHTML = e;
                    f.appendChild(h);
                    f.appendChild(g);
                    f.appendChild(document.createElement("br"));
                    b = this.messages[c] = {
                        seed: c,
                        container: f,
                        element: h,
                        span: g,
                        message: e,
                        timeout: 1E3 * (a.timeout || d.timeout),
                        timestamp: b,
                        getProgress: a.getProgress
                    };
                    this.span.appendChild(f);
                    this.span.style.display = "block";
                    this.update(b.seed,
                        e);
                    a.onstart && setTimeout(a.onstart, 150);
                    this.center();
                    this.interval || a.delay || E();
                    clearInterval(this.interval);
                    this.interval = setInterval(E, 30);
                    return c
                };
                this.remove = function(a) {
                    r += .07;
                    Date.now();
                    "object" === typeof a && (a = a.join(":"));
                    a && (a = ":" + a + ":");
                    for (var d in this.messages) {
                        var e = this.messages[d];
                        if (!a || -1 !== a.indexOf(":" + e.seed + ":")) {
                            var f = b(e.seed);
                            f && delete c[f];
                            delete this.messages[e.seed];
                            e.container.style.color = "#99ff88";
                            t(e);
                            e.getProgress && (e.span.innerHTML = "100%")
                        }
                    }
                };
                this.stop = function(c) {
                    "string" ===
                    typeof c && (c = b(c));
                    if (isFinite(c)) this.update(c, null, 100);
                    else {
                        e.remove();
                        clearInterval(e.interval);
                        delete e.interval;
                        if (d.oncomplete) d.oncomplete();
                        a && a.style && (setTimeout(function() {
                            e.div.style.opacity = 0
                        }, 1), setTimeout(function() {
                            e.interval || (e.stopPropagation = !1, w.style.display = "none", y.clearRect(0, 0, m, m))
                        }, 400))
                    }
                };
                this.center = function() {
                    var b = l(d.container),
                        c = b.width - m,
                        b = (document.documentElement && document.documentElement.scrollTop || document.body.scrollTop) + (b.height - m) / 2 - Math.max(70, e.span.offsetHeight /
                            2) + m;
                    a.style.left = c / 2 + "px";
                    a.style.top = b - m + "px";
                    a.style.width = m + "px";
                    a.style.height = m + "px";
                    e.span.style.top = b + "px"
                };
                h = document.createElement("style");
                document.getElementsByTagName("head")[0].appendChild(h);
                h.styleSheet ? h.styleSheet.cssText = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }" :
                    h.innerHTML = ".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }";
                var t = function(a) {
                        setTimeout(function() {
                            a.container.style.opacity = 0
                        }, 1);
                        setTimeout(function() {
                            a.container.parentNode.removeChild(a.container)
                        }, 250)
                    },
                    E = function() {
                        var a = Date.now();
                        e.center();
                        for (var b in e.messages) {
                            var c = e.messages[b],
                                f = r / .07 >> 0,
                                g = parseInt(c.span.innerHTML);
                            if (isFinite(g) && 100 <= g) e.remove(c.seed);
                            else {
                                if (0 === f % 5 && c.getProgress) {
                                    if (c.timeout && c.timestamp && a - c.timestamp > c.timeout) {
                                        e.remove(c.seed);
                                        continue
                                    }
                                    g = c.getProgress();
                                    if (100 <= g) {
                                        e.remove(c.seed);
                                        continue
                                    }
                                    c.span.innerHTML = (g >>
                                        0) + "%"
                                }
                                0 === f % 10 && c.messageAnimate && (c.element.innerHTML = c._message + c.messageAnimate[f / 10 % c.messageAnimate.length])
                            }
                        }
                        b || e.stop();
                        if (isFinite(e.percent)) e.meterContainer.style.display = "", e.meter.style.width = e.percent + "%";
                        else {
                            e.meterContainer.style.display = "none";
                            y.save();
                            y.clearRect(0, 0, m * v, m * v);
                            y.scale(v, v);
                            y.translate(m / 2, m / 2);
                            a = 360 - 360 / x;
                            for (b = 0; b < x; b++) {
                                c = b / x * 2 * Math.PI + r;
                                y.save();
                                y.translate(p * Math.sin(-c), p * Math.cos(-c));
                                y.rotate(c);
                                var c = -d.lineWidth / 2,
                                    f = d.lineWidth,
                                    g = d.lineHeight,
                                    h = f / 2;
                                y.beginPath();
                                y.moveTo(c + h, 0);
                                y.lineTo(c + f - h, 0);
                                y.quadraticCurveTo(c + f, 0, c + f, 0 + h);
                                y.lineTo(c + f, 0 + g - h);
                                y.quadraticCurveTo(c + f, 0 + g, c + f - h, 0 + g);
                                y.lineTo(c + h, 0 + g);
                                y.quadraticCurveTo(c, 0 + g, c, 0 + g - h);
                                y.lineTo(c, 0 + h);
                                y.quadraticCurveTo(c, 0, c + h, 0);
                                y.fillStyle = "hsla(" + b / (x - 1) * a + ", 100%, 50%, 0.85)";
                                y.fill();
                                y.restore()
                            }
                            y.restore();
                            r += .07
                        }
                    };
                if (!1 === d.display) return this;
                d.message && e.add(d.message);
                return this
            }
        }
    };
    k.ui.Loader.threads = {};
    var q = function(d, e) {
            return "\t\t-webkit-transition-property: " + d + ";\t\t-webkit-transition-duration: " +
                e + "ms;\t\t-moz-transition-property: " + d + ";\t\t-moz-transition-duration: " + e + "ms;\t\t-o-transition-property: " + d + ";\t\t-o-transition-duration: " + e + "ms;\t\t-ms-transition-property: " + d + ";\t\t-ms-transition-duration: " + e + "ms;"
        },
        l = function(d) {
            if (window.innerWidth && window.innerHeight) var e = window.innerWidth,
                c = window.innerHeight;
            else "CSS1Compat" === document.compatMode && document.documentElement && document.documentElement.offsetWidth ? (e = document.documentElement.offsetWidth, c = document.documentElement.offsetHeight) :
                document.body && document.body.offsetWidth && (e = document.body.offsetWidth, c = document.body.offsetHeight);
            d && (e = d.offsetWidth);
            return {
                width: e,
                height: c
            }
        }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(f, g, d) {
        return f < g ? g : f > d ? d : f
    }
    k.color = k.color || {};
    k.color.picker = function(q) {
        function l(a, b) {
            if (!0 === p[b].enable) return a;
            a = "rgba" === a.substr(0, 4) ? w(a, "W3>RGBA") : w(a, "W3>HEX32>RGBA");
            var c = Math.round(.33 * a.R + .33 * a.G + .33 * a.B);
            return "rgba(" + c + "," + c + "," + c + "," + a.A / 255 * .42 + ")"
        }

        function d(a) {
            function b(a, d) {
                a.proxy(function(a, b) {
                    eventjs.prevent(a);
                    d(a, b);
                    b.pointerStart ? (eventjs.stop(a), c.style.cursor = "crosshair") : b.pointerEnd && (c.style.cursor = "default")
                })
            }
            var c = a.element,
                d = a.config,
                e = document.createElement("canvas"),
                f = e.getContext("2d");
            a.canvas = e;
            a.ctx = f;
            c.appendChild(e);
            a.draggable && eventjs.proxy.dragElement(c);
            eventjs.add(e, "drag", function(f, h) {
                eventjs.stop(f);
                var k = h.pointerStart,
                    l = h.pointerEnd;
                k && "function" === typeof a.mouseLayerExit && a.mouseLayerExit();
                var p = a.margin / 2,
                    q = h.y - p,
                    p = g(h.x - p, 0, e.width);
                g(q, 0, e.height);
                if ("cp-input" === h.target.className) k && eventjs.stop(f), c.style.cursor = "text";
                else {
                    if (p <= d.satval.width) return d.satval.enable && h.proxy(function(b, e) {
                        eventjs.prevent(b);
                        var f = g(e.x - a.offset, 0, d.satval.width),
                            h = g(e.y - a.offset, 0, d.satval.height);
                        a.color.S = f / d.satval.width * 100;
                        a.color.V = 100 - h / d.satval.height * 100;
                        a.render(e.state, !0);
                        e.pointerStart ? (eventjs.stop(b), c.style.cursor = "crosshair") : e.pointerEnd && (c.style.cursor = "default")
                    }), !1;
                    if (p > d.satval.width + a.margin && p <= d.satval.width + a.margin + a.offset + d.hue.width) return d.hue.enable && b(h, function(b, c) {
                        var e = d.satval.height,
                            f = g(c.y - a.offset, 0, e);
                        a.color.H = 360 - 360 * Math.min(1, f / e);
                        a.render(c.state, !0)
                    }), !1;
                    if (d.alpha &&
                        p > d.satval.width + d.alpha.width + 2 * a.margin && p <= d.satval.width + 2 * a.margin + a.offset + 2 * d.alpha.width) return d.alpha.enable && b(h, function(b, c) {
                        var e = d.satval.height,
                            f = g(c.y - a.offset, 0, e);
                        a.color.A = 255 * (1 - Math.min(1, f / e));
                        a.render(c.state, !0)
                    }), !1;
                    if (a.draggable) return h.proxy(function(a, b) {
                        eventjs.prevent(a);
                        if (b.pointerStart) {
                            var d = eventjs.getBBox(c);
                            b.env.x = b.x - d.x1;
                            b.env.y = b.y - d.y1
                        }
                        var d = b.x - b.env.x,
                            e = b.y - b.env.y,
                            f = window.innerWidth,
                            g = window.innerHeight,
                            h = c.offsetWidth,
                            k = c.offsetHeight;
                        d + h > f && (d = f -
                            h);
                        e + k > g && (e = g - k);
                        0 > d && (d = 0);
                        0 > e && (e = 0);
                        c.style.left = d + "px";
                        c.style.top = e + "px";
                        b.pointerStart ? c.style.cursor = "move" : b.pointerEnd && (c.style.cursor = "default")
                    }), !1;
                    l && (c.style.cursor = "default")
                }
            })
        }

        function e(b) {
            var d = a.$indicator = document.createElement("div");
            d.className = "cp-indicator";
            a.interlace.data && (d.style.backgroundImage = "url(" + a.interlace.data + ")");
            b.appendChild(d);
            var e = a.hexCode = document.createElement("div");
            d.appendChild(e);
            a.eyeDropper && c(b);
            var f = /[^a-f0-9]/gi,
                g = a.$input = document.createElement("input");
            g.className = "cp-input";
            g.size = 6;
            g.type = "text";
            b.appendChild(g);
            eventjs.add(g, "mousedown", eventjs.stop);
            eventjs.add(g, "keydown keyup change", function(b) {
                var c = b.keyCode;
                eventjs.keyTracker(b);
                setTimeout(function() {
                    var d = g.value.replace(f, "").substr(0, 6),
                        d = w(d, "W3>HEX24");
                    if ("NaN" !== String(d)) {
                        if ("keydown" === b.type || "keyup" === b.type)
                            if (40 === c) d = Math.max(0, d - (b.shiftKey ? 10 : 1)), g.value = w(d, "HEX24>W3").substr(1);
                            else if (38 === c) d = Math.min(16777215, d + (b.shiftKey ? 10 : 1)), g.value = w(d, "HEX24>W3").substr(1);
                        else if (!eventjs.metaKey ||
                            86 !== c) return;
                        16777215 < d && (d = 16777215);
                        0 > d && (d = 0);
                        a.update(w(d, "HEX24>RGB"), "up")
                    }
                }, 50);
                27 === c && a.blur()
            })
        }

        function c(b) {
            var c = "function" === typeof a.eyeDropper ? a.eyeDropper() : a.eyeDropper,
                d = c.target;
            if ((c = c.source) && d) {
                var e = c.ctx || c.getContext("2d"),
                    c = document.createElement("span");
                c.className = "cp-eyedropper icon-eyedropper";
                b.appendChild(c);
                var f, g = {};
                a.mouseLayerExit = function() {
                    eventjs.bulk(g, "remove");
                    f && a.update(f, "up");
                    a.$indicator.classList.remove("active");
                    d.style.cursor = "default";
                    setTimeout(function() {
                        a.state =
                            "colorPicker"
                    }, 50)
                };
                k.ui.tooltip && k.ui.tooltip.add(c, "eyedropper");
                eventjs.add(c, "click", function(b) {
                    if ("eyeDropper" === a.state) return a.mouseLayerExit();
                    f = void 0;
                    a.state = "eyeDropper";
                    a.$indicator.classList.add("active");
                    d.style.cursor = "crosshair";
                    g.drag = eventjs.add(d, "drag", function(b, c) {
                        eventjs.prevent(b);
                        var d = e.getImageData(c.x, c.y, 1, 1);
                        0 !== d.data[3] && (f = w(d.data, "RGBA>HSVA"), a.modules.alpha || (f.A = 255), a.update(f));
                        c.pointerEnd && a.mouseLayerExit()
                    }, {
                        monitor: !0
                    })
                })
            }
        }

        function h(b) {
            var c = document.createElement("div");
            c.className = "cp-close icon-close";
            k.ui.tooltip && k.ui.tooltip.add(c, "Close Color Picker");
            eventjs.add(c, "mousedown", eventjs.cancel);
            eventjs.add(c, "click", a.onclose || function(b) {
                eventjs.cancel(b);
                a.hide()
            });
            b.appendChild(c)
        }

        function b(a) {
            "string" === typeof a ? a = "hsla" === a.substr(0, 4) ? w(a, "W3>HSLA>RGBA>HSVA") : "rgba" === a.substr(0, 4) ? w(a, "W3>RGBA>HSVA") : "rgb" === a.substr(0, 3) ? w(a, "W3>RGB>HSV") : k.color.webcolors[a] ? w(k.color.webcolors[a], "W3>HEX24>RGB>HSV") : w(a, "W3>HEX24>RGB>HSV") : "undefined" !== typeof a.R &&
                (a = w(a, "RGB>HSV"));
            "undefined" === typeof a.A && (a.A = 255);
            return a
        }
        q = q || {};
        var a = this,
            w = k.color.space,
            u = {
                light: {
                    arrow: "000",
                    interlace: {
                        size: 8,
                        color1: "#fff",
                        color2: "#eee"
                    }
                },
                dark: {
                    arrow: "#fff",
                    interlace: {
                        size: 8,
                        color1: "#fff",
                        color2: "#eee"
                    }
                }
            };
        a.init = function() {
            k.ui = k.ui || {};
            a.pixelRatio = 1;
            a.state = "colorPicker";
            a.color = b(q.color || "#000000");
            a.container = f.$(q.container || document.body);
            a.margin = q.margin || 10;
            a.offset = a.margin / 2;
            a.strokeColor = q.strokeColor || "rgba(255,255,255,0.15)";
            a.feature = q.feature || {};
            a.eyeDropper =
                a.feature.eyeDropper || {};
            a.draggable = q.draggable || !1;
            a.format = q.format || "rgba";
            a.theme = u[q.theme || "dark"];
            var c = a.theme.arrow,
                g = document.createElement("canvas"),
                l = g.getContext("2d"),
                p = 16 / 3;
            g.width = 16;
            g.height = 16;
            for (var t = 0; 20 > t; t++) l.beginPath(), l.fillStyle = c, l.moveTo(0, 4), l.lineTo(4, 0), l.lineTo(4, 8), l.fill();
            l.translate(-p, -16);
            a.arrow = g;
            c = document.createElement("canvas");
            c.width = 10;
            c.height = 10;
            g = c.getContext("2d");
            g.lineWidth = 1;
            g.beginPath();
            l = c.width / 2;
            p = c.width / 2;
            g.arc(l, p, 4.5, 0, 2 * Math.PI, !0);
            g.strokeStyle = "#000000";
            g.stroke();
            g.beginPath();
            g.arc(l, p, 3.5, 0, 2 * Math.PI, !0);
            g.strokeStyle = "#FFFFFF";
            g.stroke();
            a.circle = c;
            l = a.theme.interlace;
            c = l.size;
            g = l.color1;
            p = l.color2;
            l = document.createElement("canvas").getContext("2d");
            l.canvas.width = 2 * c;
            l.canvas.height = 2 * c;
            l.fillStyle = g;
            l.fillRect(0, 0, c, c);
            l.fillStyle = p;
            l.fillRect(c, 0, c, c);
            l.fillStyle = p;
            l.fillRect(0, c, c, c);
            l.fillStyle = g;
            l.fillRect(c, c, c, c);
            c = l.createPattern(l.canvas, "repeat");
            try {
                c.data = l.canvas.toDataURL()
            } catch (w) {}
            a.interlace = c;
            a.onchange =
                q.onchange;
            a.onclose = q.onclose;
            c = a.modules = q.modules || {
                hue: !0,
                satval: !0,
                alpha: !0
            };
            g = a.config = {};
            c.hue && (l = c.hue, g.hue = {
                column: 0,
                enable: !q.modules || l.enable || !1,
                width: isFinite(l.width) ? l.width : 30,
                height: isFinite(l.height) ? l.height : 150
            });
            c.satval && (l = c.satval, g.satval = {
                column: 1,
                enable: !q.modules || l.enable || !1,
                width: isFinite(l.width) ? l.width : 150,
                height: isFinite(l.height) ? l.height : 150
            });
            c.alpha && (l = c.alpha, g.alpha = {
                column: 2,
                enable: !q.modules || l.enable || !1,
                width: isFinite(l.width) ? l.width : 30,
                height: isFinite(l.height) ?
                    l.height : 150
            });
            c = a.element = document.createElement("div");
            c.classList.add("sk-colorpicker");
            q.className && (c.className = q.className);
            q.style && (c.style.cssText = q.style);
            a.container.appendChild(c);
            g = document.createElement("div");
            a.feature.hexInput && e(g);
            a.feature.closeButton && h(g);
            c.appendChild(g);
            d(a);
            return a
        };
        a.update = function(c, d) {
            d = void 0 === d ? "update" : d;
            c && (a.color = b(c));
            x.alpha.enable || (a.color.A = 255);
            var e = 0,
                f = 0,
                g = -1,
                h;
            for (h in p) {
                var k = p[h];
                !1 !== k.enable && (e += k.width + a.margin + a.offset - 5, g !== k.row &&
                    (f += k.height + a.margin, g = k.row))
            }
            e *= a.pixelRatio;
            f *= a.pixelRatio;
            g = a.canvas;
            if (g.width !== e || g.height !== f) g.width = e, g.height = f, g.style.marginLeft = -a.offset + "px";
            a.render(d, !!c)
        };
        a.render = function(b, c) {
            var d = p.satval,
                e = p.hue,
                f = p.alpha,
                g = a.canvas,
                h = a.ctx;
            h.clearRect(0, 0, g.width, g.height);
            var g = a.ctx,
                k = w({
                    H: a.color.H,
                    S: 100,
                    V: 100
                }, "HSV>RGB>HEX24>W3");
            w.HEX_RGB("0x" + k);
            var q = a.offset,
                u = p.satval.width,
                x = p.satval.height;
            g.save();
            g.fillStyle = a.interlace;
            g.fillRect(q, a.offset, p.satval.width, p.satval.height);
            g.globalAlpha = a.color.A / 255;
            g.fillStyle = l(k, "satval");
            g.fillRect(q, q, u, x);
            k = g.createLinearGradient(q, q, u + q, 0);
            k.addColorStop(0, l("rgba(255, 255, 255, 1)", "satval"));
            k.addColorStop(1, l("rgba(255, 255, 255, 0)", "satval"));
            g.fillStyle = k;
            g.fillRect(q, q, u, x);
            k = g.createLinearGradient(0, q, 0, x + q);
            k.addColorStop(0, "rgba(0, 0, 0, 0)");
            k.addColorStop(1, "rgba(0, 0, 0, 1)");
            g.fillStyle = k;
            g.fillRect(q, q, u, x);
            g.strokeStyle = l(a.strokeColor, "satval");
            g.strokeRect(q + .5, q + .5, u - 1, x - 1);
            g.restore();
            g = a.ctx;
            q = p.satval.width +
                a.margin + a.offset;
            g.fillStyle = a.interlace;
            g.fillRect(q, a.offset, p.hue.width, p.hue.height);
            u = g.createLinearGradient(0, 0, 0, p.hue.height + a.offset);
            u.addColorStop(0, l("rgba(255, 0, 0, 1)", "hue"));
            u.addColorStop(5 / 6, l("rgba(255, 255, 0, 1)", "hue"));
            u.addColorStop(4 / 6, l("rgba(0, 255, 0, 1)", "hue"));
            u.addColorStop(.5, l("rgba(0, 255, 255, 1)", "hue"));
            u.addColorStop(2 / 6, l("rgba(0, 0, 255, 1)", "hue"));
            u.addColorStop(1 / 6, l("rgba(255, 0, 255, 1)", "hue"));
            u.addColorStop(1, l("rgba(255, 0, 0, 1)", "hue"));
            g.save();
            g.globalAlpha = a.color.A / 255;
            g.fillStyle = u;
            g.fillRect(q, a.offset, p.hue.width, p.hue.height);
            g.strokeStyle = l(a.strokeColor, "hue");
            g.strokeRect(q + .5, a.offset + .5, p.hue.width - 1, p.hue.height - 1);
            g.restore();
            f.enable && (g = a.ctx, q = p.satval.width + 2 * a.margin + p.hue.width + a.offset, g.fillStyle = a.interlace, g.fillRect(q, a.offset, p.alpha.width, p.satval.height), u = w.HSV_RGB({
                H: a.color.H,
                S: a.color.S,
                V: a.color.V
            }), x = g.createLinearGradient(0, 0, 0, p.satval.height), u.A = 255, x.addColorStop(0, l(w.RGBA_W3(u), "alpha")), u.A = 0, x.addColorStop(1,
                l(w.RGBA_W3(u), "alpha")), g.fillStyle = x, g.fillRect(q, a.offset, p.alpha.width, p.satval.height), g.strokeStyle = a.strokeColor, g.strokeRect(q + .5, a.offset + .5, p.alpha.width - 1, p.satval.height - 1));
            g = w(a.color, "HSVA>RGBA");
            q = w(g, "RGB>HEX24>W3");
            a.feature.hexInput && (a.$input.value = q.substr(1), a.hexCode.style.backgroundColor = w(g, "RGBA>W3"));
            h.save();
            f.enable && (h.globalAlpha = f.enable ? 1 : 0, f = d.width + 2 * a.margin + e.width + f.width + a.offset, q = (255 - a.color.A) / 255 * d.height - 2, h.drawImage(a.arrow, f + 2, Math.round(q) + a.offset -
                1));
            e && (h.globalAlpha = e.enable ? 1 : 0, f = d.width + a.margin + a.offset + e.width, q = (360 - a.color.H) / 362 * d.height - 2, q = Math.round(q) + a.offset - 1, h.drawImage(a.arrow, f + 2, q), h.beginPath(), h.moveTo(f - e.width, q + 3.5), h.lineTo(f, q + 3.5), h.strokeStyle = "rgba(255,255,255,0.5)", h.stroke(), h.beginPath(), h.moveTo(f - e.width, q + 4.5), h.lineTo(f, q + 4.5), h.strokeStyle = "rgba(0,0,0,0.5)", h.stroke());
            d && (h.globalAlpha = d.enable ? 1 : 0, f = a.color.S / 100 * d.width, q = (1 - a.color.V / 100) * d.height, f -= a.circle.width / 2, q -= a.circle.height / 2, h.drawImage(a.circle,
                Math.round(f) + a.offset, Math.round(q) + a.offset));
            h.restore();
            if (a.onchange && b && c) a.onchange(a.toString(g), b)
        };
        a.toggle = function(b) {
            return "boolean" === typeof b ? b ? a.show() : a.hide() : a.element.classList.contains("opened") ? a.hide() : a.show()
        };
        a.show = function() {
            var b = a.element;
            b.classList.add("opened");
            b.style.display = "block";
            window.clearTimeout(b.interval)
        };
        a.hide = function() {
            var b = a.element;
            b.classList.remove("opened");
            b.interval = setTimeout(function() {
                b.style.display = "none"
            }, 250)
        };
        a.destroy = function() {
            var b =
                a.element,
                c = b.parentNode;
            c && c.removeChild(b)
        };
        a.toString = function(b) {
            b = b || a.color;
            isFinite(b.H) && (b = w(b, "HSVA>RGBA"));
            return 255 === b.A ? w(b, "RGB>HEX24>W3") : w(b, "RGBA>W3")
        };
        a.init();
        var x = a.modules,
            p = a.config;
        a.update()
    };
    var f = {
        $: function(f, g) {
            return "object" === typeof f ? f : (g || document).querySelector(f)
        }
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    k.module = k.module || {};
    k.module.UIPaletteEditor = function(g, f) {
        function k(a) {
            var b = a.paint,
                d = a.paintMethod,
                e = {
                    useRender: !0
                };
            e.useRecord = a.state || !0;
            e[d] = b;
            c.emit("setStyle", e);
            g.doc.setStyle(e)
        }

        function l(b, c, d, e, f) {
            g.style[b + "Official"][d] && (t.style.display = "block", a.setClass(c, "official", !0));
            f === e && a.setClass(c, "selected", !0)
        }

        function d(a, b) {
            var c = {};
            c[a] = b;
            c.type = a;
            return c
        }

        function e(a, b) {
            v.colorPicker.update ? "none" !== a && v.colorPicker.update(a, b) : c.setSelected({
                type: "color",
                color: a
            })
        }
        var c = this,
            h = g.agent,
            b = g.detect,
            a = g.dom,
            w = g.feature,
            u = g.lang,
            x = g.style,
            p = g.util,
            m = g.windows,
            v = g.ui;
        g.module.Listener(c);
        var r, y, t, E = {};
        c.getColor = function() {
            return E.color
        };
        c.getPaintMethod = function() {
            return E.method
        };
        c.setListener = function(a) {
            k = a || z
        };
        var z = k;
        c.createTrigger = function() {
            function d(b) {
                var c = a.$(".sk-pane-content", b);
                return c ? a.empty(c) : a.append(b, '<div class="sk-pane-content"></div>')
            }

            function f(a, b, d, e) {
                if ("boolean" === typeof e) {
                    var g = b[d],
                        h = e && .01 >= g.opacity ? 1 : g.opacity;
                    b = b[l[d]];
                    k({
                        state: !0,
                        paintMethod: d,
                        paint: {
                            opacity: h,
                            enabled: e
                        }
                    });
                    g.opacity = h;
                    g.enabled = e;
                    c.renderIndicator(a, g);
                    a = g && g.__cache;
                    d = b && b.__cache;
                    a && d && !1 === a.attr.checked && !1 === d.attr.checked && (d.attr.setValue(!0), d.input.classList.add("sk-checked"))
                }
            }

            function g(a, c, d) {
                var e = d[c];
                "stroke" === c && (v.appendRange(a, {
                    label: "lineWidth",
                    param: "lineWidth",
                    title: "lineWidth",
                    value: e.lineWidth,
                    min: .001,
                    max: "text" === d.toolkitId ? 10 : 50,
                    format: "px",
                    onchange: function(a, b) {
                        k({
                            paint: {
                                enabled: !0,
                                lineWidth: b.value
                            },
                            paintMethod: "stroke",
                            state: a.state
                        })
                    }
                }), c = d.type, w.style.lineJoin && b.shape[c] && -1 === ["circle", "ellipse", "ring"].indexOf(c) && v.appendSelect(a, {
                    label: "lineJoin",
                    param: "lineJoin",
                    title: "lineJoin",
                    selected: e.lineJoin,
                    options: ["round", "bevel", "miter"],
                    onchange: function(a, b) {
                        k({
                            paint: {
                                enabled: !0,
                                lineJoin: b
                            },
                            paintMethod: "stroke",
                            state: !0
                        })
                    }
                }))
            }

            function h(a, b, c) {
                v.appendRange(a, {
                    label: "opacity",
                    param: "opacity",
                    title: "opacity",
                    value: c[b].opacity,
                    min: .01,
                    max: 1,
                    format: "%",
                    onchange: function(a, c) {
                        k({
                            paint: {
                                enabled: !0,
                                opacity: c.value
                            },
                            paintMethod: b,
                            state: a.state
                        })
                    }
                })
            }

            function m(a, c, d, e, f) {
                c = e.type;
                e = e[d];
                var g = b.useColorModeCycle[c];
                w.style.colorMode && !g && (b.useColorModeAll[c] ? c = ["cycle", "linear", "radial"] : (c = ["linear", "radial"], "cycle" === e.mode && (e.mode = "linear")), v.appendSelect(a, {
                    label: "colorMode",
                    param: "colorMode",
                    title: "colorMode",
                    selected: e.mode,
                    options: c,
                    onchange: function(a, b) {
                        k({
                            paint: {
                                enabled: !0,
                                mode: b
                            },
                            paintMethod: d,
                            state: !0
                        });
                        f()
                    }
                }), "linear" === e.mode && v.appendRange(a, {
                    label: "angle",
                    param: "angle",
                    title: "angle",
                    value: e.angle,
                    min: 0,
                    max: 360,
                    format: "degree",
                    onchange: function(a, b) {
                        k({
                            paint: {
                                enabled: !0,
                                angle: b.value >> 0
                            },
                            paintMethod: d,
                            state: a.state
                        })
                    }
                }));
                w.style.colorNoise && v.appendCheckbox(a, {
                    label: "colorNoise",
                    param: "colorNoise",
                    title: "colorNoise",
                    checked: !!e.noise,
                    onchange: function(a) {
                        k({
                            paint: {
                                enabled: !0,
                                noise: a
                            },
                            paintMethod: d,
                            state: !0
                        })
                    }
                })
            }
            var l = {
                stroke: "fill",
                fill: "stroke"
            };
            return function(b) {
                function k() {
                    function b(a) {
                        var c = a.color;
                        a = a.type;
                        E.style.display = "gradient" === a ? "block" : "none";
                        "color" === a && e(c, !1)
                    }
                    c.off("setPane");
                    c.on("setPane", b);
                    v.ranges = {};
                    if (u) var r = l,
                        r = d(r);
                    else {
                        var w = v.pages.getPageId(),
                            r = a.empty("#sk-" + w);
                        v.pages.pageId = w + ":" + y;
                        v.appendHeader(r, {
                            title: t,
                            left: {
                                icon: "icon-left",
                                onclick: function() {
                                    v.setPane(w, {
                                        force: !0
                                    })
                                }
                            }
                        });
                        r = d(r);
                        c.append(r, p, q)
                    }
                    c.setPaint(q);
                    c.setListener(x);
                    u || f(z, p, y, !0);
                    h(r, y, p);
                    g(r, y, p);
                    var E = a.append(r, '<div class="sk-gradient-opts"></div>');
                    m(E, r, y, p, k);
                    b(q)
                }
                b = b || {};
                var l = b.container,
                    p = b.configure,
                    q = b.paint,
                    r = b.label,
                    t = b.title,
                    u = !!b.instant,
                    x = b.onchange,
                    y = q.method || q.constructor.method,
                    z = a.create("canvas", {
                        class: y + "-indicator"
                    });
                if (l && !0 !== u) {
                    var E = a.create("div");
                    E.classList.add("sk-style-node");
                    E.appendChild(z);
                    q.enabled && E.classList.add("sk-enabled");
                    p.fill && !p.fill.hidden && p.stroke && !p.stroke.hidden && (b = v.Checkbox({
                        container: E,
                        label: "enable",
                        param: "enable",
                        checked: q.enabled,
                        tooltip: function() {
                            return this.checked ? "enabled" : "disabled"
                        },
                        onchange: function(a) {
                            E.classList.toggle("sk-enabled");
                            f(z, p, y, a)
                        }
                    }), q.__cache = {}, q.__cache.attr = b.attr, q.__cache.input = b.element);
                    if (3 === w.palette.version) v.on("click",
                        z,
                        function(a, b) {
                            c.setPaint(q);
                            c.show({
                                autoclose: !0,
                                at: {
                                    element: b.target,
                                    align: "left top",
                                    offset: {
                                        x: 10,
                                        y: -10
                                    }
                                }
                            })
                        });
                    else v.on("click", z, k);
                    v.tooltip && v.tooltip.add(z, "choose-" + y);
                    r ? v.appendLabel(l, E, r) : l.appendChild(E);
                    c.renderIndicator(z, q)
                } else k();
                c.setListener(x)
            }
        }();
        c.append = function(b, d) {
            d.useBackgroundOverlay || (c.$element ? b.appendChild(c.$element) : (a.append(b, '<div id="sk-palette"></div>'), c.init({
                paint: d.fill
            })))
        };
        (function() {
            function b() {
                var d = a.empty("#sk-palette");
                if (null === d) console.error("#sk-palette does not exist");
                else {
                    var e = a.append(d, '<div class="sk-header"></div>');
                    w.palette.header && (c.$title = a.append(e, '<div class="sk-header-content"></div>'), w.palette.closeButton && eventjs.add({
                        target: a.append(e, '<span class="sk-close icon-remove"></span>'),
                        mousedown: eventjs.cancel,
                        click: function(a, b) {
                            eventjs.cancel(a);
                            requestAnimationFrame(function() {
                                m.hide(d.getAttribute("data-selector"))
                            })
                        }
                    }));
                    var f = a.append(d, '<div class="sk-palette-content"></div>');
                    w.palette.grid && (t = a.append(f, '<div class="sk-scroller sk-scroller-official sk-scroller-palette"></div>'),
                        v.scrollable(t), a.append(f, '<div class="sk-palette-break"></div>'), y = a.append(f, '<div class="sk-scroller sk-scroller-palette"></div>'), v.scrollable(y), a.append(f, '<div class="sk-palette-break"></div>'));
                    r = a.append(f, '<div class="editor"></div>');
                    r.style.display = "none";
                    if (w.style.gradient || w.style.pattern) {
                        var g = a.append(e, '<ol class="tabs"></ol>'),
                            e = function(b) {
                                var d = a.Canvas(1, 1);
                                d.className = b + "-indicator";
                                var e = a.append(g, "span");
                                e.appendChild(d);
                                eventjs.add(e, "click", function(a) {
                                    eventjs.prevent(a);
                                    c.updateAndRecord(b)
                                });
                                a.append(e, "span").textContent = u.translate(b)
                            };
                        w.style.color && e("color");
                        w.style.gradient && e("gradient");
                        w.style.pattern && e("pattern")
                    }
                    c.$element = d
                }
            }

            function d(a) {
                a = a || {};
                var b = a.height || 165;
                v.colorPicker = new g.color.picker({
                    onchange: a.onchange || function(a, b) {
                        "down" !== b && !0 !== b || c.deselect("color");
                        k({
                            paint: {
                                enabled: !0,
                                paintType: "color",
                                dna: a
                            },
                            paintMethod: E.method,
                            state: b
                        })
                    },
                    onclose: a.onclose,
                    theme: a.theme,
                    container: "#sk-palette .editor",
                    feature: {
                        closeButton: !1,
                        hexInput: a.hexInput,
                        eyeDropper: a.eyeDropper ? function() {
                            var a = g.doc.contexts;
                            return {
                                source: a.layer0,
                                target: a.active
                            }
                        } : null
                    },
                    modules: {
                        hue: {
                            column: 2,
                            enable: !0,
                            width: 30,
                            height: b
                        },
                        satval: {
                            column: 1,
                            enable: !0,
                            width: (a.width || 206) - 40,
                            height: b
                        },
                        alpha: {
                            column: 3,
                            enable: !1,
                            width: 30,
                            height: b
                        }
                    }
                })
            }
            c.init = function(a) {
                a = a || {};
                var e = a.colorPicker || w.palette.colorPicker;
                a = a.paint || x.fill;
                b();
                e && (p.exists("sk.color.picker") ? d(e) : console.warn("sk.color.picker is not loaded"));
                c.setPaint(a)
            }
        })();
        c.setPane = function(a, b) {
            c.setPaintType(a, !1, !1, b);
            c.emit("setPane", E)
        };
        c.setPaint = function() {
            return function(b) {
                a: {
                    switch (typeof b) {
                        case "string":
                            b = x.validate(b) ? x.create(b, E.method) : void 0;
                            break a;
                        case "object":
                            break a
                    }
                    b = void 0
                }
                if (b) {
                    var d = b.type,
                        f = E.type !== d;
                    E = b;
                    var h = w.palette.header,
                        k = c.$title;
                    if (k)
                        if (a.empty(k), "function" === typeof h) {
                            var m = g.doc.toolkit.getConfigFallback();
                            a.append(k, h(E, m))
                        } else a.append(k, h);
                    c.setPaintType(d, f);
                    c.setIndicator(b);
                    "color" === d && e(E[d])
                }
            }
        }();
        c.setPaintType = function() {
            function b(c, d) {
                var e = g.doc;
                eventjs.cancel(c);
                var f = d.target;
                "down" === d.state && (d.clone = a.clone(f, "sk-palette-clone"), d.measure = a.measure(f), document.body.appendChild(d.clone));
                var h = d.x - d.start.x,
                    k = d.y - d.start.y;
                10 < Math.max(Math.abs(h), Math.abs(k)) && e.selection.reset();
                "up" === d.state ? (a.remove(d.clone), m(c, d), h = eventjs.getPageXY(c), document.elementFromPoint(h.x, h.y) === e.contexts.active && (f = f.parentNode, h = e.scene.pointInSceneFromEvent(c), h = e.scene.findAtPoint({
                    point: h
                }), (e = e.scene.children[h]) && g.vector.setStyleAt({
                    object: e,
                    paint: f.getAttribute("data-dna"),
                    point: c
                }))) : (f = d.clone.style, f.position = "absolute", f.left = h + d.measure.x1 + "px", f.top = k + d.measure.y1 + "px", f.cursor = "crosshair")
            }

            function m(b, d) {
                eventjs.prevent(b);
                var f = d.target.parentNode,
                    g = f.getAttribute("data-type"),
                    h = f.getAttribute("data-dna");
                c.deselect(g, y);
                c.deselect(g, t);
                a.setClass(f, "selected", !0);
                requestAnimationFrame(function() {
                    "pattern" === g ? x.loadPattern(h, function(a) {
                        k({
                            paint: {
                                enabled: !0,
                                paintType: g,
                                dna: h
                            },
                            paintMethod: E.method,
                            state: !0
                        })
                    }) : "color" === g && v.colorPicker.update ? e(h, !0) : k({
                        paint: {
                            enabled: !0,
                            paintType: g,
                            dna: h
                        },
                        paintMethod: E.method,
                        state: !0
                    });
                    w.debug && console.log("dna", h)
                })
            }
            return function(e, k, q, u) {
                var z = g.perf();
                if (r && ("color" === e ? w.palette.colorPicker && (r.style.display = "block") : r.style.display = "none", e && (k || E.type !== e) && (E.type = e, w.palette.grid))) {
                    c.queue && c.queue.cancel();
                    (k = a.$("." + e + "-indicator")) && a.setClass(k.parentNode, "selected", !0, "span");
                    k = "color" === e;
                    var H = "gradient" === e,
                        J = "pattern" === e,
                        O = e + x.hashDNA(E[e]);
                    t.style.display = "none";
                    a.setClass(t, "color", k);
                    a.setClass(t, "gradient",
                        H);
                    a.setClass(t, "pattern", J);
                    a.setClass(y, "color", k);
                    a.setClass(y, "gradient", H);
                    a.setClass(y, "pattern", J);
                    q && (a.empty(y), a.empty(t));
                    var K = g.style[e];
                    if (K) {
                        var L, M, Q = w.palette.drag && !h.mobile,
                            R = "color" === e && v.tooltip;
                        c.queue = p.Queue({
                            items: K,
                            oncancel: u,
                            oncomplete: function() {
                                w.debug && console.log("build palette", e, z());
                                c.setIndicator(E);
                                u && u()
                            },
                            next: function(c, h, k) {
                                c = K[k];
                                h = x.hashDNA(c);
                                var p = e + h,
                                    r = g.style[e + "Official"][h] ? t : y,
                                    u = document.getElementById(p);
                                if (u && !q) l(e, u, h, O, p), this.next();
                                else {
                                    var z =
                                        a.Canvas(1, 1),
                                        u = document.createElement("li");
                                    u.id = p;
                                    u.className = e;
                                    u.setAttribute("data-type", e);
                                    u.setAttribute("data-dna", c);
                                    u.appendChild(z);
                                    L || M || (r.appendChild(u), M = (L = z.offsetWidth) || z.offsetHeight);
                                    x.renderSwatch(z, d(e, c), L, M, f.pixelRatio);
                                    l(e, u, h, O, p);
                                    r.appendChild(u);
                                    R && v.tooltip.add(z, c.toUpperCase());
                                    Q && eventjs.add(z, "drag", b);
                                    eventjs.add(z, "click", m);
                                    w.palette.buildInstant ? this.next() : 0 !== k % 10 ? this.next() : setTimeout(this.next, 0)
                                }
                            }
                        })
                    }
                }
            }
        }();
        c.rebuild = function(b) {
            b = a.$$("#sk-palette .sk-scroller-palette " +
                (b ? "." + b : "li"));
            a.remove(b);
            c.setPaintType(E.type, !0)
        };
        c.deselect = function(b, c) {
            c = c || y;
            b = b || E.type;
            var d = a.$$("." + b + ".selected", c);
            p.each(d, function(a) {
                a.classList.remove("selected")
            })
        };
        c.updateAndRecord = function(a) {
            c.setPane(a);
            k({
                paint: {
                    enabled: !0,
                    paintType: a,
                    dna: E[a]
                },
                paintMethod: E.method,
                state: !0
            })
        };
        c.setSelected = function(b) {
            b = b || E;
            var c = b.type;
            b = b[c];
            g.color.webcolors[b] && (b = "#" + g.color.webcolors[b]);
            b = x.hashDNA(b);
            (c = a.$("#" + c + b)) && a.setClass({
                target: c,
                list: "li",
                name: "selected",
                on: !0
            })
        };
        c.setIndicator =
            function() {
                function b(d, e, f) {
                    d = a.$$(d);
                    for (var g = 0; g < d.length; g++) c.renderIndicator(d[g], e, f)
                }

                function d(a) {
                    a = a || E;
                    b(".color-indicator", a, "color");
                    b(".gradient-indicator", a, "gradient");
                    b(".pattern-indicator", a, "pattern");
                    var e = g.doc.toolkit.getConfigFallback();
                    b(".fill-indicator", e ? e.fill : x.fill);
                    b(".stroke-indicator", e ? e.stroke : x.stroke);
                    b(".background-indicator", e ? e.background : x.background);
                    c.setSelected(a)
                }
                return function(a) {
                    p.throttle(d, 100)(a)
                }
            }();
        c.renderIndicator = function(a, b, c) {
            b = b || {};
            var e =
                f.pixelRatio,
                g = a.offsetWidth,
                h = g || a.offsetHeight,
                k = v.media.get("transparent");
            "" === a.style.background && (a.style.background = k.css);
            b.enabled ? c && (b = d(c, b[c] || x.fill[c])) : b = d("pattern", k);
            x.renderSwatch(a, b, g, h, e)
        };
        (function() {
            c.show = function(b, d) {
                b = b || {};
                var e = b.at,
                    f = b.paint,
                    h = b.configure || g.doc.toolkit.getConfigFallback(),
                    k = b.autoclose;
                f && c.setPaint(f);
                f = a.$("#sk-palette");
                g.palette.createTrigger({
                    instant: !0,
                    container: f,
                    configure: h,
                    paint: E,
                    label: E.method,
                    title: E.method
                });
                m.show({
                    element: f,
                    autoclose: k,
                    at: e
                }, d)
            };
            c.hide = function() {
                m.hide("#sk-palette")
            };
            c.toggle = function(a) {
                m.isOpen("#sk-palette") ? c.hide() : c.show(a)
            }
        })()
    }
})(sketch);
"undefined" === typeof sketch && (sketch = {});
(function(k) {
    function g(a) {
        a = c.$(a);
        var b = c.measure(a);
        u.element = a;
        u.left = b.x1;
        u.right = b.x2;
        u.top = b.y1;
        u.bottom = b.y2
    }

    function f(b, e) {
        var f = document.body || document.documentElement,
            g = f.scrollTop,
            k = f.scrollLeft,
            l = window.innerWidth,
            q = window.innerHeight;
        if (!1 !== e.draggable) {
            var w = e.element,
                f = c.$(e.handle || w);
            return eventjs.proxy.drag({
                event: b,
                target: f,
                position: "move",
                useCSSTransform: !1,
                listener: function(b, f) {
                    eventjs.cancel(b);
                    var m = c.measure(f.target);
                    f.width = m.width;
                    f.height = m.height;
                    d(f);
                    "fixed" === m.position &&
                        (f.y -= g, f.x -= k);
                    a.emit("drag", f, e);
                    w.style.left = Math.round(f.x + k) + "px";
                    w.style.top = Math.round(f.y + g) + "px";
                    f.pointerStart ? (m = e.zIndexFixed || ++h.zIndexGlobal, w.style.zIndex = m) : (m = {}, m.selector = e.selector, m.index = h.zIndexGlobal, "bottom" === e.vAlign ? m.bottom = (q - f.y - f.height - (q - u.bottom)) / q : m.top = (f.y - u.top) / q, "right" === e.hAlign ? m.right = (l - f.x - f.width - (l - u.right)) / l : m.left = (f.x - u.left) / l, a.record(m), a.restore(m.selector))
                }
            })
        }
    }

    function q(b, d) {
        if (void 0 === d.hasWindowEvent) {
            d.hasWindowEvent = !0;
            var e;
            eventjs.add({
                target: d,
                contextmenu: function(a) {
                    e && e.remove && e.remove()
                },
                mousedown: function(a) {
                    e = f(a, b)
                },
                mouseover: function(a) {
                    eventjs.stop(a);
                    h.tooltip && h.tooltip.update("")
                }
            });
            var g = c.$("span.sk-close", d);
            g && (h.tooltip && h.tooltip.add(g, "Close"), eventjs.add({
                target: g,
                mousedown: eventjs.stop,
                click: function(c, d) {
                    eventjs.cancel(c);
                    requestAnimationFrame(function() {
                        for (var c = d.target; c !== document;)
                            if (c.classList.contains("sk-window")) {
                                a.hide(b.selector);
                                break
                            } else if (c.parentNode) c = c.parentNode;
                        else break
                    })
                }
            }))
        }
    }

    function l(b) {
        var c =
            a.byId(b);
        if (c) {
            var d = c.element,
                c = c.ghost = document.createElement("div");
            0 === b.indexOf("#") ? c.id = b.substr(1) + "-ghost" : c.className = b.substr(1) + "-ghost";
            c.classList.add("sk-window-ghost");
            d.parentNode.insertBefore(c, d);
            eventjs.add(c, "mousemove", function(a) {
                "eyeDropper" === h.colorPicker.state && h.colorPicker.mouseLayerUpdate(a)
            });
            eventjs.add(c, "mousedown", function(c) {
                eventjs.prevent(c);
                "eyeDropper" === h.colorPicker.state ? h.colorPicker.mouseLayerExit(c) : a.hide(b)
            })
        }
    }

    function d(a) {
        var b = u.x || 0,
            c = u.y || 0,
            d =
            u.width || window.innerWidth,
            e = u.height || window.innerHeight;
        a.x + a.width > d && (a.x = d - a.width);
        a.x < b && (a.x = b);
        a.y + a.height > e && (a.y = e - a.height);
        a.y < c && (a.y = c);
        return a
    }

    function e(a) {
        return !0 === a ? "block" : !1 === a ? "none" : a
    }
    var c = k.dom,
        h = k.ui || (k.ui = {}),
        b = k.util,
        a = k.windows = [];
    a.focused = [];
    var w = a.toIndex = {};
    k.module.Listener(a);
    a.add = function() {
        function d(b) {
            b = w[b];
            if (isFinite(b)) return c.contains(document.body, a[b].element)
        }
        return function(f) {
            h.zIndexGlobal = h.zIndexGlobal || 1001;
            if (Array.isArray(f))
                for (var g =
                        0; g < f.length; g++) {
                    var k = f[g];
                    a.add(k);
                    a.restore(k.selector)
                } else if (g = f.selector, k = c.$(g), d(g)) console.error("Element already added.", g);
                else if (k) {
                var l = e(f.display),
                    u = (f.position || "top left").split(" "),
                    t = f.vAlign = u[0] || "top",
                    u = f.hAlign = u[1] || "left";
                if ("px" === f.format) {
                    var E = window.innerWidth,
                        z = window.innerHeight;
                    "top" === t ? f.top = (f.top || 0) / z : f.bottom = (f.bottom || 0) / z;
                    "left" === u ? f.left = (f.left || 0) / E : f.right = (f.right || 0) / E
                }
                f.element = k;
                f.index = f.index || ++h.zIndexGlobal;
                k.setAttribute("data-selector",
                    g);
                f.handle ? q(f, c.$(f.handle)) : q(f, f.element);
                w[g] = a.length;
                a.push(f);
                b.cookie.get(g, function(a) {
                    a && (l && (a.display = l), "NONE" === f.display && (a.display = "none"), "BLOCK" === f.display && (a.display = "block"), b.copyInto(a, f))
                })
            } else console.error("Element does not exist!", g)
        }
    }();
    a.byId = function(b) {
        return a[w[b]] || !1
    };
    a.record = function(c) {
        var d = c.selector,
            f = a.byId(d);
        f && (void 0 !== c.left && (f.left = c.left), void 0 !== c.top && (f.top = c.top), void 0 !== c.right && (f.right = c.right), void 0 !== c.bottom && (f.bottom = c.bottom), void 0 !==
            c.display && (f.display = e(c.display)), void 0 !== c.index && (f.index = c.index), void 0 !== c.className && (f.className = c.className), void 0 !== c.autoclose && (f.autoclose = c.autoclose), c = b.json.stringify(f), b.cookie.set(d, c), a.focusElement(d, f.display))
    };
    a.restore = function(b) {
        var e = a;
        if ("string" === typeof b) {
            var f = a.byId(b);
            f && (e = [f])
        }
        var k = document.body || document.documentElement;
        b = k.scrollTop;
        var k = k.scrollLeft,
            l = window.innerWidth,
            q = window.innerHeight;
        u.element && g(u.element);
        for (var t = [], w = {}, z = 0; z < e.length; z++)
            if (f =
                e[z], "block" === String(f.display).toLowerCase()) {
                var C = c.$(f.selector);
                if (C) {
                    C.style.display = "block";
                    var A = c.measure(C, {
                            sansScale: !0
                        }),
                        C = A.width,
                        I = A.height,
                        B, D = f.vAlign;
                    B = "top" === D ? f.top * q + u.top : q - f.bottom * q - I;
                    var F, G = f.hAlign;
                    F = "left" === G ? f.left * l + u.left : l - f.right * l - C;
                    w._bottom = B + I - q;
                    w._top = Math.min(B, q) - B;
                    w._right = F + C - l;
                    w._left = Math.min(F, l) - F;
                    w[D] = Math.max(w[D] || 0, w["_" + D]);
                    w[G] = Math.max(w[G] || 0, w["_" + G]);
                    t.push({
                        win: f,
                        measure: A,
                        top: Math.max(0, B),
                        left: Math.max(0, F),
                        width: C,
                        height: I
                    })
                }
            }
        e = 1001;
        for (z =
            0; z < t.length; z++) t = t[z], f = t.win, A = t.measure, C = f.element, t = d({
            x: "right" === f.hAlign ? t.left - w.right : t.left + w.left,
            y: "bottom" === f.vAlign ? t.top - w.bottom : t.top + w.top,
            width: t.width,
            height: t.height
        }), "fixed" !== A.position && (t.y += b, t.x += k), f = f.zIndexFixed || f.index || ++e, C.classList.add("opened"), C.style.top = Math.round(t.y) + "px", C.style.left = Math.round(t.x) + "px", C.style.display = "block", C.style.zIndex = f, h.zIndexGlobal = Math.max(h.zIndexGlobal, f)
    };
    a.blink = function(b, d) {
        var e = c.$(b);
        e && (a.isOpen(e) || a.show(b), setTimeout(function() {
            e.blinking = !1
        }, 250), e.blinking ? d && d(!0) : (e.blinking = !0, e.classList.remove("blink"), e.classList.add("blink-stall"), requestAnimationFrame(function() {
            e.classList.remove("blink-stall");
            e.classList.contains("opened") ? e.classList.add("blink") : a.show(b);
            d && d(!0)
        })))
    };
    a.show = function(b, d) {
        if ("object" === typeof b) {
            var e = b,
                f = c.$(e.element);
            if (f) {
                if (b = f.getAttribute("data-selector")) {
                    var g = c.getCoordinateAt(e);
                    g && (f.style.left = g.x + "px", f.style.top = g.y + "px", k.windows.record({
                        selector: b,
                        left: g.x / window.innerWidth,
                        top: g.y /
                            window.innerHeight,
                        autoclose: e.autoclose
                    }));
                    a.show(b, d)
                }
            } else console.warn(arguments)
        } else if (e = a.byId(b)) {
            var q = !!e.autoclose,
                t = e.ghost;
            if (f = e.element) clearTimeout(f.interval), f.classList.contains("sk-window") && (f.classList.add("opened"), g = e.zIndexFixed || ++h.zIndexGlobal, a.record({
                selector: b,
                display: "block",
                index: g
            }), q && (void 0 === t && (l(b), t = e.ghost), t.style.display = "block", t.style.zIndex = g++), f.style.display = "block", f.style.opacity = 1, f.style.zIndex = g, requestAnimationFrame(function() {
                q && t.classList.add("show");
                a.restore(b);
                d && d()
            }))
        }
    };
    a.hide = function(b) {
        var c = a.byId(b);
        if (c) {
            var d = c.element,
                e = c.ghost,
                f = !!c.autoclose && e;
            !1 !== c.closeable && (f && e.classList.remove("show"), d.classList.remove("opened"), d.style.opacity = 0, d.interval = setTimeout(function() {
                f && (e.style.display = "none");
                d.style.opacity = 1;
                d.style.display = "none";
                a.record({
                    selector: b,
                    display: "none"
                })
            }, 250))
        }
    };
    a.focus = function(b) {
        var c = a.byId(b),
            d = c.element;
        d && (c = c.zIndexFixed || ++h.zIndexGlobal, d.style.zIndex = c, a.record({
            selector: b,
            index: c
        }))
    };
    a.clearFocus =
        function() {
            a.focused = []
        };
    a.focusElement = function(b, c) {
        if ("none" !== c) {
            var d = a.focused.slice(-1)[0],
                e = " " + a.focused.join(" ") + " ";
            d !== b && -1 === e.indexOf(b) && a.focused.push(b)
        }
    };
    a.hasFocus = function() {
        return isFinite(w[a.focused.slice(-1)[0]])
    };
    a.hideFocused = function() {
        var b = a.focused.pop();
        a.hide(b)
    };
    a.isOpen = function(a) {
        if (a = c.$(a)) return "none" === a.style.display ? !1 : a.classList.contains("opened")
    };
    a.isClosed = function(b) {
        return !a.isOpen(b)
    };
    a.toggle = function(b, d) {
        var e = c.$(b);
        if (e) {
            if (a.isOpen(e)) {
                a.hide(b);
                var f = !1
            } else a.show(b), a.restore(b), f = !0;
            d && requestAnimationFrame(function() {
                d(f)
            })
        } else console.error("window missing", arguments)
    };
    var u = a.CLAMP = {
        x: 0,
        y: 0,
        left: 0,
        right: 0,
        top: 0,
        bottom: 0,
        vAlign: "top",
        hAlign: "left"
    };
    a.setClamp = function(a) {
        a = a || {};
        var b = a.element || document.body,
            c = a.width,
            d = a.height,
            e = a.y;
        u.x = a.x || null;
        u.y = e || null;
        u.width = c || null;
        u.height = d || null;
        g(b)
    }
})(sketch);
(function(k) {
    function g(f, g, k) {
        function d(d, g) {
            var k = f.doc,
                l = g.target,
                m = e.type,
                q = l.getAttribute("data-src"),
                r = l.getAttribute("data-name"),
                u = q.split("/"),
                v = h.placement.mediaClick;
            e.select(l);
            var w = document.createElement("span");
            w.className = "loader";
            l.appendChild(w);
            setTimeout(function() {
                p(m, u[u.length - 2]);
                if (l.drag) {
                    l.drag.remove();
                    var d = c.$("#sk-draggable");
                    d && d.parentNode.removeChild(d)
                }
                var d = "text" === m,
                    e = "stamp" === m;
                (d = !("select" === k.tool.type && k.selection.length || d || e)) && k.scene.deselectAll();
                k.setMedia({
                    src: q,
                    fontFamily: r,
                    type: m,
                    onerror: function() {
                        f.ui.log(b.translate("loading-error") + " \u201c" + r + "\u201d");
                        l.removeChild(w)
                    },
                    onsuccess: function() {
                        a.dirtyControls = !0;
                        l.removeChild(w)
                    }
                });
                d && v && k.scene.add({
                    type: m,
                    src: q
                })
            }, 250)
        }
        var e = this,
            c = f.dom,
            h = f.feature,
            b = f.lang,
            a = g.render,
            w = g.toolkit,
            u = f.util;
        e.credits = void 0;
        e.folder = k.folder;
        e.media = void 0;
        e.positions = [];
        e.scroller = void 0;
        e.scrollTop = 0;
        e.target = k.target;
        e.type = k.type;
        e.hide = function() {
            e.scroller.style.display = "none"
        };
        e.show = function(a) {
            var b =
                f.lib[e.type];
            if (b && b.paths) {
                var d = e.folder = a.folder,
                    g = e.credits;
                a = e.scroller;
                var h = e.target;
                a.style.display = "none";
                a.scrollTop = e.scrollTop;
                h.appendChild(a);
                h.appendChild(g);
                for (var g = 0, h = b.paths, k = h.length, l = 0; l < k; l++) {
                    var m = h[l],
                        p = m.container;
                    if (m.image && p) {
                        var q = !d || "*" === d,
                            r = m.selected === d;
                        "Your Files" === d && 0 === b.getSrc(m).indexOf("#") || r || q ? (g++, p.style.display = "inline-block") : p.style.display = "none"
                    }
                }(b = c.$(".noItemsAdded")) || (b = c.create('<div class="noItemsAdded"></div>'), b.textContent = "No files have been added.",
                    a.appendChild(b));
                b.style.display = 0 === g ? "block" : "none";
                a.style.display = "block";
                e.scrollTo();
                e.lazyLoad();
                return e
            }
        };
        e.lazyLoad = function() {
            var a = e.scroller,
                b = a.scrollTop,
                c = a.offsetHeight;
            a.style.display = "none";
            for (var d = e.positions, f = e.folder, g = [], h = e.media.paths, k = h.length, l = 0; l < k; l++) {
                var m = h[l],
                    p = !f || "*" === f,
                    q = m.selected === f;
                ("Your Files" === f && "#" === m.filepath[0] || q || p) && g.push(m)
            }
            f = g.length;
            for (h = 0; h < f; h++)
                if (k = d[h]) l = k[0], l >= b - k[1] && l <= b + c && (l = g[h], k = l.image, l = l.container, k && l && (k.src = l.getAttribute("data-thumbnail")));
            a.style.display = "block"
        };
        e.calcMetrics = function(a, b, c) {
            b = a.offsetWidth - r;
            c = c.thumbnail;
            var d = c._height / c._width,
                e = isFinite(c.rows) ? c.rows : 5,
                f = isFinite(c.columns) ? c.columns : 4,
                g = isFinite(c.padding) ? c.padding : 0;
            b /= f;
            b = u.copyInto(c, {
                width: Math.round(b),
                height: Math.round(b * d),
                padding: g,
                columns: f,
                rows: e
            });
            a.style.cssText += "max-height: " + b.height * b.rows + "px;";
            return b
        };
        var x = function(a, b) {
            a.events && eventjs.bulk(a.events, "remove");
            a.events = {};
            a.events.click = eventjs.add(a, "click", d);
            if (b) {
                var c = function(a,
                    b) {
                    h.doc.editable || g.scene.deselectAll();
                    b.drag = g.addMediaFromDrag({
                        target: b,
                        event: a,
                        src: b.getAttribute("data-src")
                    })
                };
                "longpress" === b ? a.events.longpress = eventjs.add(a, "longpress", function(a, b) {
                    eventjs.stop(a);
                    "start" === b.state && c(a, b.target)
                }) : a.events.mousedown = eventjs.add(a, "mousedown", function(a, b) {
                    eventjs.stop(a);
                    c(a, this)
                })
            }
        };
        e.select = function(a) {
            c.setClass({
                name: "selected",
                list: c.$$("." + e.type, e.scroller),
                target: a,
                on: !0
            })
        };
        e.scrollTo = function(a) {
            "undefined" === typeof a ? a = e.scroller.querySelector(".selected") :
                "string" === typeof a && (a = e.scroller.querySelector(".hash" + u.hashFast(a)));
            if (a && a.nodeName) {
                var b = a.offsetTop;
                a.classList.contains("sk-divider") && (b += a.offsetHeight);
                e.scroller.scrollTop = b;
                e.scrollTop = b
            }
        };
        var p = function(a, b) {
                var d = e.credits;
                d.innerHTML = "";
                d.style.display = "none";
                var g = f.lib[a].credits;
                if (g && g[b]) {
                    d.style.display = "block";
                    var g = g[b],
                        h = c.create('<a target="_blank" href="' + g.url + '"></a>'),
                        k = document.createElement("span");
                    k.setAttribute("data-title", g.name);
                    k.textContent = g.name;
                    h.appendChild(k);
                    d.appendChild(document.createTextNode("By: "));
                    d.appendChild(h)
                }
            },
            m = function() {
                console.warn("error", this)
            },
            v = function() {
                var a = "stamp" === e.type || "text" === e.type,
                    b = this.canvas;
                u.thumbnailer({
                    background: "none",
                    src: this,
                    canvas: b,
                    width: b.width,
                    height: b.height,
                    crop: "edge",
                    center: !0,
                    shadow: a && h.ui.scrollerShadow,
                    onsuccess: function(b) {
                        if (a) {
                            var c = b.className || "";
                            c.indexOf("selected");
                            var d = b.getContext("2d");
                            d.save();
                            d.globalCompositeOperation = "source-atop";
                            d.fillStyle = f.feature.ui.scrollerAtopColor;
                            d.fillRect(0,
                                0, b.width, b.height);
                            b.setAttribute("data-className", c);
                            d.restore()
                        }
                    }
                })
            },
            r = function() {
                var a = document.createElement("p");
                a.style.width = "100%";
                a.style.height = "200px";
                var b = document.createElement("div");
                b.style.position = "absolute";
                b.style.top = "0px";
                b.style.left = "0px";
                b.style.visibility = "hidden";
                b.style.width = "200px";
                b.style.height = "150px";
                b.style.overflow = "hidden";
                b.appendChild(a);
                document.body.appendChild(b);
                var c = a.offsetWidth;
                b.style.overflow = "scroll";
                a = a.offsetWidth;
                c === a && (a = b.clientWidth);
                document.body.removeChild(b);
                return c - a + 2
            }();
        (function(a) {
            a = e.type;
            var d = f.lib[a];
            if (d && d.paths) {
                d.thumbnail = d.thumbnail || {};
                var k = c.create('<div class="sk-configure-scroller sk-scroller"></div>'),
                    l = c.create('<div class="sk-configure-credits"></div>'),
                    r = e.target;
                r.appendChild(k);
                r.appendChild(l);
                e.scroller = k;
                e.credits = l;
                e.media = d;
                e.thumbnail = e.calcMetrics(k, a, d);
                e.positions = [];
                p(a, e.folder);
                a: {
                    if (l = g.selection.item || g.toolkitConfig[a]) {
                        var r = f.detect.useSrc,
                            A = l.type,
                            I = f.lib[l.type];
                        if (r[l.type]) {
                            var B = g.tool.type;
                            !l.src && f.lib[A] &&
                                (l.src = I.getSrc(I.paths[0]));
                            r[B] && A !== B && w.setTool(A);
                            l = l.src || "";
                            break a
                        } else if (l.fontFamily) {
                            l = I.getSrc(I.byName[l.fontFamily]) || "";
                            break a
                        }
                    }
                    l = ""
                }
                var r = ("clipart" === a || "image" === a) && h.placement.mediaDrag,
                    A = h.ui.scrollerCategories,
                    D = e.thumbnail,
                    I = D.padding,
                    B = D.width,
                    F = D.height,
                    D = D.columns,
                    G = g.pixelRatio,
                    H = e.positions;
                k.style.display = "none";
                for (var J = "", O = 0, K = 0, L, M = d.paths, Q = M.length, R = 0; R < Q; R++) {
                    var U = M[R],
                        V = d.getSrc(U),
                        P = d.getThumbnail(U);
                    if (U.category !== J && A) {
                        var J = U.category || "Your Files",
                            O =
                            "hash" + u.hashFast(J),
                            X = document.createElement("div");
                        X.className = O + " sk-divider";
                        X.style.height = "35px";
                        X.textContent = b.translate(J);
                        k.appendChild(X);
                        O = 0;
                        K += 35;
                        0 !== R && (K += F)
                    } else ++O === D && (O = 0, K += F);
                    var X = U.canvas,
                        N = B * G,
                        W = F * G;
                    if (X && X.width === N && X.height === W) var T = U.image,
                        N = U.container;
                    else T = U.image = document.createElement("img"), X = U.canvas = c.Canvas(N - 2 * I, W - 2 * I), N = U.container = document.createElement("span"), X.style.padding = I + "px", X.style.width = B + "px", X.style.height = F + "px", X.title = U.filename, N.style.width =
                        B + "px", N.style.height = F + "px", N.setAttribute("data-src", V), N.setAttribute("data-thumbnail", P), N.setAttribute("data-name", U.name), N.setAttribute("data-n", R), N.className = a, N.appendChild(X), T.canvas = X, T.onload = v, T.onerror = m;
                    x(N, r);
                    V && -1 !== l.indexOf(V) && (L = N);
                    H.push([K, F]);
                    k.appendChild(N)
                }
                k.style.display = "block";
                e.select(L)
            }
        })(k);
        e.show(k);
        f.ui.scrollable(e.scroller);
        eventjs.add(e.scroller, "scroll", function() {
            var a = e.scroller;
            e.scrollTop = a.scrollTop;
            clearTimeout(a.timeout);
            a.timeout = setTimeout(function() {
                    e.lazyLoad()
                },
                100)
        })
    }
    k.ui = k.ui || {};
    k.ui.scrollers = {};
    k.ui.InfiniteScroll = function(f, k, l) {
        var d = f.feature,
            e = l.type,
            c = l.target,
            h = f.lib[e];
        if (h && h.paths) {
            var b = f.ui.scrollers,
                a = b[e],
                w = !1;
            a && (w = d.ui.addToLibrary ? a.positions.length === h.paths.length : !0);
            if (w) return a.target = c, a.show(l);
            a = new g(f, k, l);
            return b[e] = a
        }
    }
})(sketch);
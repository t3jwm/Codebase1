!function(a){"use strict";var b={ATTR:"attr",EMPTY:"",V:"V",H:"H",MINUS:"-",PX:"px",SWING:"swing",FORWARD:"forward",BACK:"back",NUMBER:"number",STRING:"string",JSON:"json",UNKNOWN_PROPERTY:"is a known property."},c={WRAP:"wrap",CONTAINER:"container",BEFORE_SWITCH:"beforeSwitch",AFTER_SWITCHED:"afterSwitched",CAROUSEL:"carousel",ITEM:"item",ITEMS_PER_STEP:"itemsPerStep",DEFAULT_PAGE:"defaultPage",PREV_BTN:"prevBtn",NEXT_BTN:"nextBtn",BUTTON_AVAILABLE:"buttonAvailable",PAGINATED:"paginated",PLAY_DIRECTION:"playDirection",PAGE_DIRECTION:"pageDirection",AUTO_PLAY:"autoPlay",CYCLE_PLAY:"cyclePlay",EASING:"easing",ANIMATE_DURATION:"animateDuration",PAGE_SWITCH_DELAY:"pageSwitchDelay",EMPTY_CASE:"emptyCase",AJAX:"ajax",REMOVE_EMPTY:"removeEmpty"},d={HIDE:"hide",CONTAINER:"carousel-container",CAROUSEL:"carousel-list",PREV_BTN:"carousel-prev-btn",NEXT_BTN:"carousel-next-btn",BUTTON_DISABLED:"carousel-button-disabled",PAGINATION:"carousel-pagination",PAGINATION_TAB:"carousel-pagination-tab",PAGINATION_ACTIVE_TAB:"carousel-pagination-active-tab"},e={CONTAINER:"carousel-container-",CAROUSEL:"carousel-list-",PREV_BTN:"carousel-prev-btn-",NEXT_BTN:"carousel-next-btn-",PAGINATION:"carousel-pagination-"},f={ID_SELECTOR:"#",CLS_SELECTOR:".",WRAP:"#carousel",CONTAINER:"#carousel-container",CAROUSEL:"#carousel-list",PREV_BTN:"#carousel-prev-btn",NEXT_BTN:"#carousel-next-btn"},g={PLAY_DIRECTION:b.V,EASING:b.SWING,PAGE_DIRECTION:b.FORWARD,PAGINATION_TAB_WIDTH:30,ANIMATE_DURATION:500,PAGE_SWITCH_DELAY:3e3},h={TOP:"top",VISIBLE:{overflow:"visible"}},i={A:"a",LI:"li",IMG:"img"},j={ID:"id",SRC:"src"},k={CONTAINER:"<div class='"+d.CONTAINER+"'></div>",CAROUSEL:"<ul class='"+d.CAROUSEL+"'></ul>",PREV_BTN:"<a title='Previous Page' class='"+d.PREV_BTN+"' href='#prev'>‹</a>",NEXT_BTN:"<a title='Next Page' class='"+d.NEXT_BTN+"' href='#next'>›</a>",EMPTY_ITEM:"<li></li>",ITEM_INNER_HTML:"<p><a href='{url}'><img width='{imgWidth}' height='{imgHeight}' alt='{title}' src='{src}'></a></p><h3><a target='_blank' href='{url}'>{title}</a></h3>",PAGINATION:"<ul class="+d.PAGINATION+"></ul>",PAGINATION_TAB:"<li class="+d.PAGINATION_TAB+"></li>"},l={ON:"on",TRIGGER:"trigger",BEFORE_SWITCH:"beforeSwitch",AFTER_SWITCHED:"afterSwitched",ITEMS_CHANGE:"itemsChange",ATTRIBUTES_CHANGE:"attributesChange"},m=function(b,c){return a.each(b,function(a,b){var d=new RegExp("{"+a+"}","gi");c=c.replace(d,b)}),c};a.SimpleCarousel=function(b){return this.settings=a({attributes:{},changed:{}}),this.uuid=0,this.timer=null,this.scrolling=!1,this.totalPages=0,this.clipPosition=0,this.currentPage=0,this.wrap=null,this.container=null,this.carousel=null,this.prevBtn=null,this.nextBtn=null,this.items=null,this.pagination=null,this.paginationTabs=null,this.paginationLinks=null,this.activeTab=null,this.lastSelectedTab=null,a.extend(this.settings[0].attributes,a.SimpleCarousel.defaults),a.isPlainObject(b)&&a.extend(this.settings[0].attributes,b),this},a.SimpleCarousel.prototype={version:"0.1.0",constructor:a.SimpleCarousel,keys:[],length:0,initializer:function(){var a,b=this.constructor.prototype;this.isAsync()?this._ajaxInitializer():this._initializer();for(a in b)b.hasOwnProperty(a)&&this.keys.push(a);return this.keys.sort(),this.length=this.keys.length,this},_initializer:function(){return this.isAsync()||(this.wrap=a(this.get(c.WRAP)),this.container=a(this.get(c.CONTAINER)),this.carousel=a(this.get(c.CAROUSEL)),this.prevBtn=a(this.get(c.PREV_BTN)),this.nextBtn=a(this.get(c.NEXT_BTN))),this._removeEmpty()._updateCarouselSize()._enableButtons()._createPaginationUI()._switchToDefaultPage()._stylePagination()._bind(),this},_ajaxInitializer:function(){var d=this,e=this.get(c.AJAX);return this._createMainUI(),this.isAsync()&&(a.extend(e,{dataType:b.JSON,success:function(c){var f=e.removePaginationUI,g=e.add,h=e.remove,i=d.carousel;a.isFunction(f)&&f(),a.trim(i.html())&&i.html(b.EMPTY),i[0]&&(a(c).each(function(a,b){d.add({itemJSON:b,itemInnerHTML:e.itemInnerHTML||k.ITEM_INNER_HTML})}),a.isFunction(g)&&g(),a.isFunction(h)&&h(),d._initializer())}}),a.ajax(e)),this},_reload:function(){return this.isAsync()||this._unbind()._removePaginationUI()._initializer(),this},_ajaxReload:function(){var b=this,d=this.get(c.AJAX);return this.isAsync()&&(a.extend(d,{removePaginationUI:function(){b._unbind()._removePaginationUI()}}),a.ajax(d)),this},_hasId:function(c){return a.trim(a(c).attr(j.ID))===b.EMPTY},_addId:function(b,c){return this._hasId(b)||a(b).attr(j.ID,c+this.guid()),this},_createMainUI:function(){var d=a(this.get(c.WRAP)),f=a(this.get(c.CONTAINER)),g=a(this.get(c.CAROUSEL)),h=a(this.get(c.PREV_BTN)),i=a(this.get(c.NEXT_BTN));return this._addId(f,e.CONTAINER)._addId(g,e.CAROUSEL)._addId(h,e.PREV_BTN)._addId(h,e.NEXT_BTN),this.wrap=d,this.container=f,this.carousel=g,this.prevBtn=h,this.nextBtn=i,a.trim(d.html())&&d.html(b.EMPTY),d.append(h).append(f.append(g)).append(i),this},_createPaginationUI:function(){var l=this,m=this.wrap,n=this.hasPagination(),o=null,p=this.totalPages,q=n.paginationClass,r=n.paginationItems,s=m[0].offsetHeight+10,t=p*g.PAGINATION_TAB_WIDTH,u=this.get(c.DEFAULT_PAGE),v=b.PX;return n&&p>=2&&(o=a(k.PAGINATION).attr(j.ID,e.PAGINATION+this.guid()).css({width:t+v,"margin-left":b.MINUS+t/2+v}),q?o.addClass(q):o.css(h.TOP,s+v),this.pagination=o,a(new Array(p)).each(function(b){var c=b+1,d=a(k.PAGINATION_TAB);a.isArray(r)&&r.length===p&&(c=r[b]),d.html('<a href="#page-'+b+'">'+c+"</a>"),b===u&&(l.currentPage=u),o.append(d)}),m.append(o),this.isPaginationOutSideOfWrap()&&m.css(h.VISIBLE),this.paginationTabs=o.find(f.CLS_SELECTOR+d.PAGINATION_TAB),this.paginationLinks=o.find(i.A)),this},_removePaginationUI:function(){var a=this.pagination;return a&&a[0]&&a.remove(),this},_removeEmpty:function(){var d=this.carousel,e=this.get(c.ITEM),f=this.get(c.REMOVE_EMPTY),g=b.EMPTY;return f&&d.find(e).each(function(b,c){var d=a(c).find(i.IMG).first().attr(j.SRC),e=a(c).html();(a.trim(d)===g||a.trim(e)===g)&&c.remove()}),this.items=d.find(this.get(c.ITEM)),this.totalPages=this.getTotalPages(),this},_updateCarouselSize:function(){var a=this.container,d=this.carousel,e=this.get(c.PLAY_DIRECTION),f=this.items.length;return e===b.H?d.width(this.getItemWidth()*f).height(a.height()):e===b.V&&d.height(this.getItemHeight()*f).width(a.width()),this},_stylePagination:function(){var a=null,b=null,c=d.PAGINATION_ACTIVE_TAB;return this.hasPagination()&&this.totalPages>=2&&(a=this.lastSelectedTab,b=this.paginationTabs.eq(this.currentPage),a&&a.removeClass(c),b.addClass(c),this.activeTab=b,this.lastSelectedTab=this.activeTab),this},_switchToDefaultPage:function(){var a=this.container,d=this.get(c.DEFAULT_PAGE),e=this.get(c.PLAY_DIRECTION),f=0,g=0;return d>0&&(g=this.getItemsPerStep()*d,this.isCyclePlay()?(this.moveTheFirstItemsToTheEnd(g),this.clipPosition=0):this.clipPosition=d),e===b.V?(f=this.getItemHeight()*g,a.scrollTop(f)):e===b.H&&(f=this.getItemWidth()*g,a.scrollLeft(f)),this._enableButtons(),this._timer(),this},_enableButtons:function(){var a=d.HIDE;return this.totalPages<2?(this.prevBtn.addClass(a),this.nextBtn.addClass(a)):this._enableOrDisablePrevBtnNextBtn(),this},_enableOrDisablePrevBtnNextBtn:function(){var a=this.prevBtn,b=this.nextBtn,c=d.BUTTON_DISABLED,e=this.totalPages-1,f=this.clipPosition;return this.isButtonAvailable()&&(a.hasClass(c)&&f>0?a.removeClass(c):0===f&&a.addClass(c),f===e?b.addClass(c):b.hasClass(c)&&e>f&&b.removeClass(c)),this},_timer:function(){var a=this;return this.pause(),this.timer=setTimeout(function(){a.play()},this.get(c.PAGE_SWITCH_DELAY)),this},_bindMainUI:function(){var a=this,b=this.container,d=this.prevBtn,e=this.nextBtn;return this.isAutoPlay()&&(b.hover(function(b){a.pause(),b.preventDefault(),b.stopPropagation()},function(b){a._timer(),b.preventDefault(),b.stopPropagation()}),d[0]&&!this.isPrevBtnAboveContainer()&&d.hover(function(b){a.stop(),b.preventDefault(),b.stopPropagation()},function(b){a.set(c.AUTO_PLAY,!0),a._timer(),b.preventDefault(),b.stopPropagation()}),e[0]&&!this.isNextBtnAboveContainer()&&e.hover(function(b){a.stop(),b.preventDefault(),b.stopPropagation()},function(b){a.set(c.AUTO_PLAY,!0),a._timer(),b.preventDefault(),b.stopPropagation()})),b.on(l.BEFORE_SWITCH,function(){a._onBeforeSwitch()}),b.on(l.AFTER_SWITCHED,function(){a._onAfterSwitched()}),this.carousel.on(l.ITEMS_CHANGE,function(){a.reload()}),d[0]&&d.click(function(b){a.prev(),b.preventDefault(),b.stopPropagation()}),e[0]&&e.click(function(b){a.next(),b.preventDefault(),b.stopPropagation()}),this},_bindPaginationUI:function(){var b=this;return this.hasPagination()&&this.totalPages>1&&(this.paginationTabs&&this.paginationTabs.each(function(c,e){a(e).click(function(e){a(this).hasClass(d.PAGINATION_ACTIVE_TAB)||b.pageTo(c),e.preventDefault(),e.stopPropagation()})}),this.paginationLinks&&this.paginationLinks.each(function(c,e){a(e).focus(function(e){a(this).parent().hasClass(d.PAGINATION_ACTIVE_TAB)||b.pageTo(c),e.preventDefault(),e.stopPropagation()})})),this},_unbindMainUI:function(){var a=this.prevBtn,b=this.nextBtn;return this.container.unbind(),this.carousel.unbind(),a[0]&&a.unbind(),b[0]&&b.unbind(),this},_unbindPaginationUI:function(){return this.hasPagination()&&this.totalPages>1&&(this.paginationTabs&&this.paginationTabs.each(function(b,c){a(c).unbind()}),this.paginationLinks&&this.paginationLinks.each(function(b,c){a(c).unbind()})),this},_bindSettings:function(){var a=this;return this.settings.on(l.ATTRIBUTES_CHANGE,function(){a.reload()}),this},_unbindSettings:function(){return this.settings.unbind(),this},_bind:function(){return this._bindMainUI()._bindPaginationUI()._bindSettings(),this},_unbind:function(){return this._unbindMainUI()._unbindPaginationUI()._unbindSettings(),this},_onTabClick:function(a){var b=this.isCyclePlay(),c=this.currentPage;return this.hasPagination()&&!this.scrolling&&(this.pause(),b?(this.currentPage=a,a>c?(this.clipPosition=a-c,this.playForward()):c>a&&(this.clipPosition=c-a,this.playBack())):b||(this.clipPosition=a,a>c?(this.currentPage=a,this.playForward()):c>a&&(this.currentPage=a,this.playBack()))),this},_onBeforeSwitch:function(){var b=this.get(c.BEFORE_SWITCH);return a.isFunction(b)?b():a.isArray(b)&&(b=b[this.currentPage],a.isFunction(b)&&b()),this},_onAfterSwitched:function(){var b=this.get(c.AFTER_SWITCHED);this.scrolling=!1,this._stylePagination(),this._enableButtons(),a.isFunction(b)?b():a.isArray(b)&&(b=b[this.currentPage],a.isFunction(b)&&b()),this._timer()},reload:function(b){return a.isPlainObject(b)&&this.set(b,!0),this.isAsync()?this._ajaxReload():this._reload(),this},guid:function(){return this.uuid+=1,this.uuid},add:function(d,e){var f=this,g=this.get(c.AJAX),h=b.EMPTY,i=null;return e?a.extend(g,{add:function(){f.add(d)}}):d.itemJSON&&(h=d.itemInnerHTML||k.ITEM_INNER_HTML,i=a(k.EMPTY_ITEM).html(m(d.itemJSON,h)),this.carousel.append(i).trigger(l.ITEMS_CHANGE)),this},remove:function(d,e){var f=this,g=this.get(c.AJAX);return e?a.extend(g,{remove:function(){f.remove(d)}}):(1===d.nodeType&&d.tagName?a(d).remove():typeof d===b.NUMBER?this.items.eq(d).remove():typeof d===b.STRING&&a(d).remove(),this.carousel.trigger(l.ITEMS_CHANGE)),this},moveTheFirstItemsToTheEnd:function(a){var b=this.carousel,d=0;if(a>0)for(;a>d;d+=1)b.append(b.find(this.get(c.ITEM)).first());return this},moveTheLastItemsToTheBeginning:function(a){var b=this.carousel,d=this.get(c.ITEM),e=0;if(a>0)for(;a>e;e+=1)b.find(d).last().insertBefore(b.find(d).first());return this},prev:function(){var a=this.totalPages,b=this.clipPosition,c=this.currentPage;return this.scrolling||this.prevBtn.hasClass(d.BUTTON_DISABLED)||(this.pause(),this.isCyclePlay()?b=1:(b-=1,0>b&&(b=a-1)),this.clipPosition=b,this.hasPagination()&&(c-=1,0>c&&(c=a-1),this.currentPage=c),this.playBack()),this},next:function(){var a=this.totalPages,b=this.clipPosition,c=this.currentPage;return this.scrolling||this.nextBtn.hasClass(d.BUTTON_DISABLED)||(this.pause(),this.isCyclePlay()?b=1:(b+=1,b===a&&(b=0)),this.clipPosition=b,c+=1,c===a&&(c=0),this.currentPage=c,this.playForward()),this},playForward:function(){var a=this,d=this.container,e=this.get(c.PLAY_DIRECTION),f=this.get(c.ANIMATE_DURATION),g=this.get(c.EASING),h=this.isCyclePlay(),i=this.getItemsPerStep()*this.clipPosition,j=0;return this.scrolling||(this.scrolling=!0,d.trigger(l.BEFORE_SWITCH),e===b.H?(j=this.getItemWidth()*i,h?d.animate({scrollLeft:j},f,g,function(){a.moveTheFirstItemsToTheEnd(i),a.clipPosition=0,d.scrollLeft(0).trigger(l.AFTER_SWITCHED)}):h||d.animate({scrollLeft:j},f,g,function(){d.trigger(l.AFTER_SWITCHED)})):e===b.V&&(j=this.getItemHeight()*i,h?d.animate({scrollTop:j},f,g,function(){a.moveTheFirstItemsToTheEnd(i),a.clipPosition=0,d.scrollTop(0).trigger(l.AFTER_SWITCHED)}):h||d.animate({scrollTop:j},f,g,function(){d.trigger(l.AFTER_SWITCHED)}))),this},playBack:function(){var a=this.container,d=this.get(c.PLAY_DIRECTION),e=this.get(c.ANIMATE_DURATION),f=this.get(c.EASING),g=this.isCyclePlay(),h=this.getItemsPerStep()*this.clipPosition,i=0;return this.scrolling||(this.scrolling=!0,a.trigger(l.BEFORE_SWITCH),d===b.H?(i=this.getItemWidth()*h,g?(this.moveTheLastItemsToTheBeginning(h),a.scrollLeft(i).animate({scrollLeft:0},e,f,function(){a.trigger(l.AFTER_SWITCHED)})):g||a.animate({scrollLeft:i},e,f,function(){a.trigger(l.AFTER_SWITCHED)})):d===b.V&&(i=this.getItemHeight()*h,g?(this.moveTheLastItemsToTheBeginning(h),a.scrollTop(i).animate({scrollTop:0},e,f,function(){a.trigger(l.AFTER_SWITCHED)})):g||a.animate({scrollTop:i},e,f,function(){a.trigger(l.AFTER_SWITCHED)}))),this},play:function(){var a=this.get(c.PAGE_DIRECTION);return this.isAutoPlay()&&this.totalPages>2&&(a===b.FORWARD?this.next():a===b.BACK&&this.prev()),this},pause:function(){return this.timer&&clearTimeout(this.timer),this},stop:function(){return this.isAutoPlay()&&(this.pause(),this.set(c.AUTO_PLAY,!1,{silent:!0})),this},pageTo:function(a){return this._onTabClick(a),this},isAutoPlay:function(){return this.get(c.AUTO_PLAY)},isCyclePlay:function(){return this.get(c.CYCLE_PLAY)},hasPagination:function(){return this.get(c.PAGINATED)},isAsync:function(){var b=this.get(c.AJAX).url;return a.trim(b)},isButtonAvailable:function(){return this.get(c.BUTTON_AVAILABLE)},isPrevBtnAboveContainer:function(){var a=!1,b=this.container,c=0,d=0,e=0,f=this.prevBtn,g=0,h=0,i=0;return f[0]&&(c=b.offset(),d=c.left+b.width(),e=c.top+b.height(),g=f.offset(),h=g.left+f.width(),i=g.top+f.height(),d>h&&e>i&&(a=!0)),a},isNextBtnAboveContainer:function(){var a=!1,b=this.container,c=0,d=0,e=0,f=this.nextBtn,g=0,h=0,i=0;return f[0]&&(c=b.offset(),d=c.left+b.width(),e=c.top+b.height(),g=f.offset(),h=g.left+f.width(),i=g.top+f.height(),d>h&&e>i&&(a=!0)),a},isPaginationOutSideOfWrap:function(){var a=!1,b=this.wrap,c=b.offset().top,d=0,e=0,f=b.offset().left,g=this.pagination,h=g.offset().top,i=0,j=0,k=g.offset().left;return g[0]&&(d=f+b.width(),e=c+b.height(),i=k+g.width(),j=h+g.height(),(c>j||i>d||j>e||f>k)&&(a=!0)),a},getItemWidth:function(){var a=0,b=this.items;return b.length>0&&(a=b.first().width()),a},getItemHeight:function(){var a=0,b=this.items;return b.length>0&&(a=b.first().height()),a},getItemsPerPage:function(){var a=this.container,d=0,e=this.get(c.PLAY_DIRECTION);return e===b.H?d=a.width()/this.getItemWidth():e===b.V&&(d=a.height()/this.getItemHeight()),d},getItemsPerStep:function(){var a=this.getItemsPerPage(),b=this.get(c.ITEMS_PER_STEP);return(!b||0>b||b>a)&&(b=a),b},getTotalPages:function(){var a=0,b=this.getItemsPerStep(),c=this.items.length;return a=b>c?1:1+Math.ceil((c-b)/b)},has:function(a){return void 0!==this.get(a)},get:function(a){return this.settings[0].attributes[a]},set:function(c,d,e){var f,g=this,h=this.settings;return c&&(typeof c===b.STRING?(e||(e={}),this.save(c,d)):a.isPlainObject(c)&&(e=d||{},a.each(c,function(a,b){g.save(a,b)})),f=e.silent,this.isAsync()||a.isEmptyObject(h[0].changed)||f||h.trigger(l.ATTRIBUTES_CHANGE)),this},save:function(a,b){var c=this.settings[0];return this.has(a)&&(c.changed={},this.get(a)!==b&&(c.changed[a]=b),c.attributes[a]=b),this}},a.SimpleCarousel.defaults={wrap:f.WRAP,container:f.CONTAINER,carousel:f.CAROUSEL,item:i.LI,prevBtn:f.PREV_BTN,nextBtn:f.NEXT_BTN,playDirection:g.PLAY_DIRECTION,autoPlay:!1,pageSwitchDelay:g.PAGE_SWITCH_DELAY,animateDuration:g.ANIMATE_DURATION,easing:g.EASING,pageDirection:g.PAGE_DIRECTION,cyclePlay:!1,buttonAvailable:!1,defaultPage:0,itemsPerStep:0,beforeSwitch:null,afterSwitched:null,paginated:!1,removeEmpty:!1,ajax:{url:b.EMPTY,itemInnerHTML:k.ITEM_INNER_HTML,beforeSend:null,complete:null,error:null}},a.fn.extend({simpleCarousel:function(b){var c,d={};return a.isPlainObject(b)&&(d=b,d.wrap||(d.wrap=this[0]),c=new a.SimpleCarousel(d),c.initializer()),c}})}(jQuery);
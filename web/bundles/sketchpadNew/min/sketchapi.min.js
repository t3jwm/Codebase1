/*
  ___________           __         .__         .__        
 /   _____/  | __ _____/  |_  ____ |  |__      |__| ____  
 \_____  \|  |/ // __ \   __\/ ___\|  |  \     |  |/  _ \ 
 /        \    <\  ___/|  | \  \___|   Y  \    |  (  <_> )
/_______  /__|_ \\___  >__|  \___  >___|  / /\ |__|\____/ 
		\/     \/    \/          \/     \/  \/            
 
 HTML5 graphics made w/ WebGL, WebRTC & Canvas
 
 -------------------------------------------------------------------
 Sketchpad 3.5 built for "Draw, Create, Share!"
 -------------------------------------------------------------------
 Sketch API v3.6.7.39
 Copyright (c) Sketch.IO, Inc. <https://sketch.io>
 -------------------------------------------------------------------
 
 SketchAPI uses certain modules under license from third parties.
 Sketch.io offers the SketchAPI, pursuant to its license,
 to you on the condition you accept the following modules under
 their respective licenses.
 -------------------------------------------------------------------
    module: i18n.js
       src: https://github.com/gammasoft/browser-i18n
    author: Renato Gama
 copyright: (c) 2013 Gammasoft
   license: MIT

 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the "Software"), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the 'Software'), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
    module: sprintf.js
       src: https://github.com/jakobwesthoff/sprintf.js
    author: Jakob Westhoff
 copyright: (c) 2010 Jakob Westhoff
   license: MIT
 -------------------------------------------------------------------
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the 'Software'), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
 -------------------------------------------------------------------
    module: Base64 shim
       src: http://code.google.com/p/stringencoders/
   authors: Nick Galbreath
 copyright: (c) 2010 Nick Galbreath
   license: MIT
 -------------------------------------------------------------------
    module: ClassList shim
       src: https://github.com/remy/polyfills
   authors: Remy Sharp
 copyright: (c) 2010 Remy Sharp, <http://remysharp.com>
   license: MIT
 -------------------------------------------------------------------
    module: CSSMatrix shim
       src: https://github.com/camupod/CSSMatrix
   authors: Cameron Lakenen & Arian Stolwijk
 copyright: (c) 2013 Cameron Lakenen & Arian Stolwijk
   license: MIT
 -------------------------------------------------------------------
    module: CSSMatrix.decompose
       src: http://www.joelambert.co.uk/morf/
    author: Joe Lambert
 copyright: (c) 2011 Joe Lambert <http://www.joelambert.co.uk>
   license: MIT
 -------------------------------------------------------------------
    module: AnimationFrame shim
       src: https://github.com/kof/animationFrame
    author: Oleg Slobodskoi
 copyright: (c) 2013 Oleg Slobodskoi
   license: MIT
 -------------------------------------------------------------------
    module: Blob.js - Blob shim (2014-07-01)
       src: https://github.com/eligrey/Blob.js
    author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
   license: MIT
 -------------------------------------------------------------------
    module: Canvas.toBlob.js (2013-12-27)
       src: https://github.com/eligrey/canvas-toBlob.js
    author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
   license: MIT
 -------------------------------------------------------------------
    module: FileSaver.js (2014-07-21)
       src: https://github.com/eligrey/FileSaver.js
    author: Eli Grey
 copyright: (c) 2011 Eli Grey <http://eligrey.com>
   license: MIT
 -------------------------------------------------------------------
    module: Parse URI v1.2.2
       src: http://stevenlevithan.com
    author: Steven Levithan
 copyright: (c) 2007 Steven Levithan
   license: MIT
 -------------------------------------------------------------------
    module: arcToBezier - Elliptical Arc to Bezier Curve(s)
       src: http://stevenlevithan.com
    author: Raph Levien <raph@artofcode.com>
 copyright: (c) 2002 USC/Information Sciences Institute
   license: MIT
 -------------------------------------------------------------------
    module: ContextMenu.js
       src: https://github.com/aantthony/contextmenu
    author: Anthony Foster
 copyright: (c) 2012 Anthony Foster
   license: MIT
 -------------------------------------------------------------------
    module: CSS Gradient Parser
       src: http://lea.verou.me/demos/cssgradientsplease/
    author: Evan Wallace
 copyright: (c) 2011 Lea Verou. All rights reserved.
   license: MIT
 -------------------------------------------------------------------
 Permission is hereby granted, free of charge, to any person
 obtaining a copy of this software and associated documentation
 files (the 'Software'), to deal in the Software without
 restriction, including without limitation the rights to use,
 copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the
 Software is furnished to do so, subject to the following
 conditions:

 The above copyright notice and this permission notice shall be
 included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.
*/
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.DOMMisc=function(c){var a=c.util||(c.util={});a.requestKioskMode=function(){c.client.nodewebkit&&require("nw.gui").Window.get().enterKioskMode()};a.sort=function(a,b,r){if(r)var v=a.sort(function(a,f){return b(a[r],f[r])});else v={},Object.keys(a).sort(b).forEach(function(l){v[l]=a[l]});return v};a.sort.natural=function(a,b){var r=/(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,v=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
f=/^0x[0-9a-f]+$/i,h=/^0/,g=a.toString().replace(v,"")||"",y=b.toString().replace(v,"")||"",v=g.replace(r,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),r=y.replace(r,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),g=parseInt(g.match(f))||1!=v.length&&g.match(l)&&Date.parse(g);if(l=parseInt(y.match(f))||g&&y.match(l)&&Date.parse(y)||null){if(g<l)return-1;if(g>l)return 1}l=0;for(f=Math.max(v.length,r.length);l<f;l++){g=!(v[l]||"").match(h)&&parseFloat(v[l])||v[l]||
0;y=!(r[l]||"").match(h)&&parseFloat(r[l])||r[l]||0;if(isNaN(g)!==isNaN(y))return isNaN(g)?1:-1;typeof g!==typeof y&&(g+="",y+="");if(g<y)return-1;if(g>y)return 1}return 0};a.getItems=function(b,d){for(var r=function(h){a.getItem(h,function(a){f[h]=a;--l||d(f)})},v=b.length,l=v,f={},h=0;h<v;h++)r(b[h])};a.getItem=function(b,d){d=d||function(a){console.log(a)};a.exists("chrome.storage.local")?chrome.storage.local.get(b,function(a){d(a[b])}):d(localStorage.getItem(c.feature.prefix+"/"+b)||"")};a.setItem=
function(b,d){if(a.exists("chrome.storage.local")){var r={};r[b]=d;chrome.storage.local.set(r)}else localStorage.setItem(c.feature.prefix+"/"+b,d)};a.Canvas=function(a,b){if("object"!==typeof a)var r={};else r=a,a=r.width,b=r.height;var v;r.id&&(v=document.getElementById(r.id))||(v="undefined"===typeof document?new e:document.createElement("canvas"),"function"===typeof FlashCanvas&&(v.onload=c.client.fn.init));v.ctx=v.getContext("2d");isFinite(a)&&(v.width=a||1);isFinite(b)&&(v.height=b||1);r&&c.dom&&
c.dom.setAttributes(v,r);return v};a.Canvas.blip=function(a,b,r){b&&r?(a.width=b,a.height=r):a.width=a.width};a.Canvas.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)};a.json={};a.json.filterCircular=function(a,b){return"object"===typeof b&&(null===b||b.nodeName||b.tagName)?void 0:b};a.timestamp=function(){var a=window.performance;return a&&a.now?a.now.bind(a):Date.now}();a.perf=function(b,d,r){if(d&&b){for(var v=a.perf(),l=0;l<d;l++)b();console.log(v()+"ms",r||"")}else{var f=a.timestamp();
return function(h,g){var l=a.timestamp(),r=Math.round(l-f);h&&c.feature.debug&&console.log(r+"ms",h);g&&(f=l);return r}}};a.exists=function(a,b){try{for(var r=a.split("."),v=r.length,l=b||window,f=0;f<v;f++){var h=r[f];if(void 0===l[h]||null===l[h])return!1;l=l[h]}return!0}catch(g){return!1}};var b="function"===typeof CanvasPattern;a.clone=function(d){if(!d||"object"!==typeof d)return d;if(!(d.nodeType||b&&d instanceof CanvasPattern)){if(d.clone&&"function"===typeof d.clone)return d.clone();if(d.constructor){var m=
new d.constructor,r;for(r in d){var v=d[r];m[r]=v&&"object"===typeof v?a.clone(v):v}return m}}};a.mixin=function(b,d,r){if(!b||"object"!==typeof b)return d;for(var v in b){var l=b[v],f=typeof l;if(l&&"object"===f){var h=l;h.nodeType||(d[v]=typeof d[v]===f?a.mixin(l,d[v],r):a.mixin(l,new h.constructor,r))}else{if(r)if(h=typeof d[v],r.typematch){if(h!==f)continue}else if(r.type&&h!==r.type)continue;d[v]=l}}return d};a.count=function(a,b,r){if(!a)return 0;if(isFinite(a.length))return a.length;if("object"===
typeof a){var v=0,l=void 0!==b;if(l&&void 0!==r)for(var f in a)a[f]&&a[f][b]===r&&++v;else if(l)for(f in a)void 0!==a[f]&&++v;else for(f in a)++v;return v}};a.clamp=function(a,b,r){return a<b?b:a>r?r:a};a.each=function(a,b){if(!b)return console.warn("missing callback",arguments);if(!a)return console.warn("missing object",arguments);for(var r=0;r<a.length;r++)b(a[r])};a.foreach=function(a,b){if(Array.isArray(a))for(var r=0;r<a.length;r++)b(r);else for(r in a)b(r)};a.equals=function(b,d){var r=a.json.filterCircular;
return JSON.stringify(b,r)===JSON.stringify(d,r)};a.object2invert=function(a){var b={},r;for(r in a)b[a[r]]=r;return b};a.array2object=function(a){for(var b={},r=0,v=a.length;r<v;r++)b[a[r]]=!0;return b};a.array2index=function(a){for(var b={},r=0;r<a.length;r++)b[a[r]]=r;return b};a.addFileInput=function(a,b){c.uploader.addFileInput({target:a,onchange:function(a){a.fileInput.value="";a.addMedia({openAsNew:b,self:c.uploader})}})};a.bytesToSize=function(a){var b=Math.floor(Math.log(a)/Math.log(1024));
return Math.round(a/Math.pow(1024,b),2)+["Bytes","KB","MB","GB","TB"][b]};a.getTimeFormat=function(a){var b=a/3600>>0,r=(a-3600*b)/60>>0;a=a-3600*b-60*r;10>b&&(b="0"+b);10>r&&(r="0"+r);10>a&&(a="0"+a);return b+":"+r+":"+a};a.require=function(a){if(-1!==a.indexOf(".css")){var b=document.createElement("link");b.href=a;b.setAttribute("type","text/css");b.setAttribute("rel","stylesheet")}else b=document.createElement("script"),b.src=a,b.async=!1;document.head.appendChild(b)};a.isEditingText=function(){var a=
document.activeElement;if(!a)return!1;var b=a.nodeName;return"INPUT"===b||"TEXTAREA"===b||"true"===a.contentEditable?a.classList.contains("sk-dummy-canvas")?!1:!0:!1};var k=c.dom=c.dom||{};k.$=function(a,b){return(b||document).querySelector(a)};k.$$=function(a,b){return(b||document).querySelectorAll(a)};var u=function(a,b){"CANVAS"===a.nodeName&&a.getContext("2d").drawImage(b,0,0)},m=function(a,b){u(b,a);for(var r=b.childNodes,v=a.childNodes,l=0;l<r.length;l++){var f=r[l],h=v[l];f&&h&&(u(f,h),f.childNodes.length&&
h.childNodes&&m(h,f))}};k.clone=function(a,b){var r=a.cloneNode(!0);m(a,r);r.id=b;r.style.position="absolute";r.style.opacity=1;r.style.zIndex=1E6;r.style.display="block";return r};k.empty=function(a){"string"===typeof a&&(a=k.$(a));if(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}};k.remove=function(a){a instanceof Node&&(a=[a]);if(a&&(a instanceof NodeList||Array.isArray(a)))for(var b=0,r=a.length;b<r;b++){var v=a[b];v.parentNode&&v.parentNode.removeChild(v)}};k.setCSS=function(a,b,
r){"string"===typeof a&&(a=k.$$(a));for(var v=0,l=a.length;v<l;v++)a[v].style[b]=r};k.measure=function(a){"string"===typeof a&&(a=k.$(a));if(!(a=a||this.selection&&this.selection[0]))return{width:0,height:0};if(a===window||a===document)a=document.body;var b={},r=a.getBoundingClientRect();b.width=r.width;b.height=r.height;b.x1=r.left;b.y1=r.top;b.scaleX=r.width/a.offsetWidth||1;b.scaleY=r.height/a.offsetHeight||1;b.scrollLeft=0;b.scrollTop=0;var r=window.getComputedStyle(a),v=d(r,"border-left-width"),
l=d(r,"border-right-width"),f=d(r,"border-bottom-width"),h=d(r,"border-top-width");b.border=[v,l,h,f];b.x1+=v;b.y1+=h;b.width-=l+v;b.height-=f+h;v=d(r,"margin-left");l=d(r,"margin-right");f=d(r,"margin-bottom");h=d(r,"margin-top");b.margin=[v,l,h,f];b.x1-=v;b.y1-=h;b.width+=l+v;b.height+=f+h;v=d(r,"padding-left");l=d(r,"padding-right");f=d(r,"padding-bottom");h=d(r,"padding-top");b.padding=[v,l,h,f];b.x2=b.x1+b.width;b.y2=b.y1+b.height;r=r.getPropertyValue("position");for(a="fixed"===r?a:a.parentNode;null!==
a&&a!==document.body&&void 0!==a.scrollTop;){r=window.getComputedStyle(a);r=r.getPropertyValue("position");if("absolute"!==r)if("fixed"===r){b.scrollTop-=a.parentNode.scrollTop;b.scrollLeft-=a.parentNode.scrollLeft;break}else b.scrollLeft+=a.scrollLeft,b.scrollTop+=a.scrollTop;a=a.parentNode}b.scrollBodyLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;b.scrollBodyTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||
document.body.parentNode||document.body).scrollTop;b.scrollLeft-=b.scrollBodyLeft;b.scrollTop-=b.scrollBodyTop;return b};var d=function(a,b){var r=parseFloat(a.getPropertyValue(b),10);return isFinite(r)?r:0};k.append=function(a,b,r){var v=a;"string"===typeof v&&(v=k.$(v));"string"===typeof b&&(b=k.create(b,r));if(v&&v.appendChild)return v.appendChild(b),b;console.warn("dom.append",arguments)};k.appendText=function(a,b){k.append(a,document.createTextNode(b))};k.create=function(a,b){if(-1!==a.indexOf("<")){var r=
document.createElement("div");r.innerHTML=a;if(!(a=r.firstChild))return}else a=-1!==a.indexOf(" ")?document.createTextNode(a):document.createElement(a);b&&k.setAttributes(a,b);return a};k.setAttributes=function(a,b){for(var r in b){var v=b[r];"function"===typeof v&&0===r.indexOf("on")?eventjs.add(a,r,v):a.setAttribute(r,v)}};k.setClass=function(a){if(a&&a.target)var b=a.target,r=a.className,v=a.on,l=a.list,f=a.delay,h=a.callback;else b=arguments[0],r=arguments[1],v=arguments[2],l=arguments[3];void 0===
v&&(v=!0);"string"===typeof b&&(b=k.$(b));if(b&&r)if(b.length){for(l=0;l<b.length;l++){var g=b[l].classList;g&&(v?g.add(r):g.remove(r))}x(h,f)}else{if("string"===typeof l)if(b.parentNode)l=k.$$(l,b.parentNode);else{console.warn("setClass",a);return}l&&l.length||(l=[b]);for(var g=b.classList,b="toggle"===v&&g.contains(r),y=0,d=l.length;y<d;y++){var s=l[y].classList;s&&s.remove(r)}if(g){if(!1===v||b)return x(h,f),!1;g.add(r);x(h,f);return!0}}else console.warn("setClass",arguments)};var x=function(a,
b){"function"===typeof a&&(b?setTimeout(a,b):a())}};if("undefined"!==typeof module&&module.exports){var e=require("canvas");module.exports=q.module.DOMMisc}else q.module.DOMMisc(sketch)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.util||(q.util={}),c="crossOrigin"in document.createElement("img"),a={},b={jpeg:!0,jpg:!0,gif:!0,png:!0,webp:!0,svg:!0};e.loadImage=function(k){"string"===typeof k&&(k={src:k});if("undefined"===typeof k.src)return console.warn("image.src not defined");var m=k.image||document.createElement("img"),d=function(){var d=k.src;return e.loadImageBase64({url:d,onprogress:k.onprogress,onerror:function(b){x(3);a[p.host]=3},onload:function(r){if(r){var v=d.split(".").pop();b[v]||(v="png");
k.src="data:image/"+v+";base64,"+r.responseText;x(0);a[p.host]=c?1:0}}})},x=function(a){m.onload=k.onload;m.onerror=k.onerror;m.onprogress=k.onprogress;switch(a){case 0:m.src=k.src;break;case 1:m.crossOrigin="anonymous";m.src=k.src;break;case 2:d();break;case 3:if(!e.loadImage.proxyUrl)break;m.src=e.loadImage.proxyUrl+escape(k.src)}return m},p=document.createElement("a");p.href=k.src;return q.loc.isLocalUrl(k.src,!0)?x(0):function(){if(q.loc.isLocalUrl(k.src,!0))return x(0);var b=a[p.host];if("undefined"!==
typeof b)return x(b);if(c)return x(1);try{var r="withCredentials"in new XMLHttpRequest}catch(v){r=!1}return r?d():x(3)}(c)};var k=function(a){var b="",d,k=Array(4),c=0;for(d=0;c<a.length;){d=Array(3);for(var e=0;e<d.length;e++)d[e]=c<a.length?a.charCodeAt(c++)&255:0;k[0]=d[0]>>2;k[1]=(d[0]&3)<<4|d[1]>>4;k[2]=(d[1]&15)<<2|d[2]>>6;k[3]=d[2]&63;d=c-(a.length-1);switch(d){case 2:k[3]=64;k[2]=64;break;case 1:k[3]=64}for(e=0;e<k.length;e++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k[e])}return b};
e.loadImageBase64=function(a){var b=a.onload;a.asBinaryString=!0;a.onload=function(d){if(d.responseText){d=k(d.responseText);if(a.JS64){d="data:image/png;base64,"+d;var c=document.createElement("canvas"),e=c.getContext("2d"),w=document.createElement("img");w.onload=function(){var a=this.offsetWidth,d=this.offsetHeight;c.width=a;c.height=d;c.style.width=a+"px";c.style.height=d+"px";document.getElementById("output");e.drawImage(this,0,0);for(var a=e.getImageData(0,0,a,d).data,d=[],l=a.length,f=-1,h=
0;h<l;h+=4)0<a[h]&&(d[++f]=String.fromCharCode(a[h]));a=d.join("");b({responseText:a});document.body.removeChild(w)};w.src=d;return!0}b({responseText:d})}};e.request(a)};"undefined"!==typeof module&&module.exports&&(module.exports=q.util.loadImage)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e={},c={};(q.util||(q.util={})).loadScript=function(b){"string"===typeof b&&(b={url:b});a(b);return this};var a=function(a){var k=a.urls;"undefined"===typeof k&&(k=[{url:a.url,verify:a.verify}]);var u=document.getElementsByTagName("head")[0],m=function(a,h){if(!(e[a.url]||h&&"undefined"===typeof window[h])){e[a.url]=!0;if(c[a.url])c[a.url]();delete c[a.url];a.callback&&a.callback();"undefined"!==typeof l&&l()}},d=!1,x=[],p=function(f){"string"===typeof f&&(f={url:f,verify:a.verify});
if(/([\w\d.])$/.test(f.verify)){var h=f.test=f.verify;if("object"===typeof h)for(var g=0;g<h.length;g++)x.push(h[g]);else x.push(h)}e[f.url]||(h=document.createElement("script"),h.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||m(f)},h.onload=function(){m(f)},h.onerror=function(a){d=!0;delete c[f.url];if("object"===typeof f.test)for(var h in f.test)w(f.test[h]);else w(f.test)},h.setAttribute("type","text/javascript"),h.setAttribute("src",f.url),u.appendChild(h),
c[f.url]=function(){})},w=function(a){for(var h=[],g=0;g<x.length;g++)x[g]!==a&&h.push(x[g]);x=h},r=function(f){if(f)m(f,f.test);else for(var h=0;h<k.length;h++)m(k[h],k[h].test);for(var g=!0,h=0;h<x.length;h++){var l=x[h];if(l&&-1!==l.indexOf(".")){var l=l.split("."),v=window[l[0]];"undefined"!==typeof v&&(2===l.length?"undefined"===typeof v[l[1]]&&(g=!1):3===l.length&&"undefined"===typeof v[l[1]][l[2]]&&(g=!1))}else"undefined"===typeof window[l]&&(g=!1)}!a.strictOrder&&g?d?a.error&&a.error():a.callback&&
a.callback():setTimeout(function(){r(f)},10)};if(a.strictOrder){var v=-1,l=function(){v++;if(k[v]){var f=k[v],h=f.url;c[h]?c[h]=function(){f.callback&&f.callback();l()}:e[h]?l():(p(f),r(f))}else d?a.error&&a.error():a.callback&&a.callback()};l()}else for(v=0;v<k.length;v++)p(k[v]),r(k[v])};"undefined"!==typeof module&&module.exports&&(module.exports=q.util.loadScript)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){(q.util||(q.util={})).request=function(c,a,b,k){"string"===typeof c&&(c={url:c});var u=c.body,m=c.url,d=c.headers,x=c.responseType,p=c.withCredentials,w=c.asBinaryString;a=a||c.onload;b=b||c.onerror;k=k||c.onprogress;if("undefined"!==typeof e&&q.loc.isLocalUrl(m))e.readFile(m,"utf8",function(l,f){l?b&&b(l,!1):a&&a({responseText:f})});else{var r=new XMLHttpRequest;r.open(u?"POST":"GET",m,!0);if(d)for(var v in d)r.setRequestHeader(v,d[v]);else u&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded");
w&&r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined");x&&(r.responseType=x);p&&(r.withCredentials="true");b&&"onerror"in r&&(r.onerror=b);k&&r.upload&&"onprogress"in r.upload&&(u?r.upload.onprogress=k:r.onprogress=k);r.onreadystatechange=function(l){4===r.readyState&&(200===r.status||304===r.status||0===r.status&&q.client.cordova?a&&a(r):b&&b(l,!1))};r.send(u);return r}};if("undefined"!==typeof module&&module.exports){var e=require("fs");XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;
module.exports=q.util.request}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.FiniteMath=function(e){var c=e.util||(e.util={});c.ZERO=1E-10;c.RAD_DEG=180/Math.PI;c.DEG_RAD=1/c.RAD_DEG;c.INFINITY=4294967295;c.INFINITY_MINUS_24bit=c.INFINITY-16777215;c.INFINITY_MINUS_16bit=c.INFINITY-65535;c.INFINITY_MINUS_8bit=c.INFINITY-255;c.Random=function(a){this.seed="number"===typeof a?a:c.Random.seed();this.n=Number(this.seed);return this};c.Random.seed=function(){return 2147483648*Math.random()>>0};c.Random.prototype={toInt:function(){return this.n=
16807*this.n%2147483647},toDouble:function(){this.n=16807*this.n%2147483647;return this.n/2147483647},intRange:function(a,b){a-=.4999;this.n=16807*this.n%2147483647;return Math.round(a+this.n/2147483647*(b+.4999-a))},doubleRange:function(a,b){this.n=16807*this.n%2147483647;return a+this.n/2147483647*(b-a)}};c.getScreenMetrics=function(){if("undefined"===typeof document)return{};var a=function(a){try{k.style.fontSize=a}catch(b){k.style.fontSize=""}return k.offsetHeight/1E4},b=document.createElement("div");
b.style.cssText="position: relative; width: 1px; height: 1px; overflow: scroll;";var k=document.createElement("div");k.style.cssText="position: absolute; width: 100em; height: 10000em; overflow: hidden;";b.appendChild(k);document.body.appendChild(b);for(var c="normal xx-small x-small small medium large x-large xx-large".split(" "),m={},d=0;d<c.length;d++)m[c[d]+"_px"]=a(c[d]);m["%>px"]=a("100%")/100;m["px>pt"]=1/a("1pt");m["pt>pc"]=1/12;m["px>in"]=1/a("72pt");m["in>ft"]=1/12;m["ft>yd"]=1/3;m["px>mm"]=
25.4*m["px>in"];m["mm>cm"]=.1;m["cm>m"]=.01;m["px>ex"]=1/a("1ex");m["ex>em"]=1/m["px>ex"]/a("1em");m["px>px"]=1;document.body.removeChild(b);var e=function(a,b,r,d){for(var l in b)"object"===typeof(d=b[l])?e(a,d,l):(r&&(a["px>"+l]=a["px>"+r]*a[r+">"+l],a[r+">"+d]=a[r+">"+l]*a[l+">"+d],a[r+">px"]=1/a["px>"+r],a[d+">"+r]=1/a[l+">"+d]*1/a[r+">"+l],a[l+">"+r]=1/a[r+">"+l]),a["px>"+d]=a["px>"+l]*a[l+">"+d],a[l+">px"]=1/a["px>"+l],a[d+">px"]=1/a["px>"+l]*1/a[l+">"+d],a[d+">"+l]=1/a[l+">"+d])};e(m,{pt:"pc",
mm:{cm:"m"},"in":{ft:"yd"},ex:"em"});return m};c.hash=function(a){if(!a)return 0;for(var b=5381,k=0,c=a.length;k<c;k++)var m=a[k].charCodeAt(),b=(b<<5)+b+m;return b};c.uuid=function(){for(var a=Date.now(),b=0,k="";36>b;b++){var c="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[b];if("-"===c||"4"===c)k+=c;else var m=a*Math.random()*16%16|0,k=k+("x"===c?m:m&3|8).toString(16)}return k}};"undefined"!==typeof module&&module.exports?module.exports=q.module.FiniteMath:q.module.FiniteMath(q)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q=q.util||(q.util={});var e=q.string||(q.string={});q.version=function(c,a){function b(a,b){b=b||4;a=a.split(".").map(function(a){var b=parseInt(a);return(a=a.replace(b,""))?b+a[0].charCodeAt()/255:b});for(var m=0,d=0;d<a.length&&b!==d;++d)m+=a[d]/255*Math.pow(255,b-d+1);return m}this.value=c;this.hash=b(c,a);this.isGreaterThan=function(a,e){return b(c,e)>b(a,e)};this.isLessThan=function(a,e){return b(c,e)<b(a,e)};return this};e.rxSplitByUppercase=/([A-Z]?[^A-Z]*)/g;e.rxAlphaNumeric=
/[^A-Z0-9]+/gi;e.rxNumeric=/^-?\d*[\.]?\d+$/;e.replaceAll=function(c,a,b){if(c){if("object"===typeof a){for(var k=0;k<a.length;k++)c=c.split(a[k]).join(b[k]);return c}return c.split(a).join(b)}};e.ucfirst=function(c){if(c)return c[0].toUpperCase()+c.substr(1)};e.ucwords=function(c){if(c)return c.replace(/^(.)|\s(.)/g,function(a){return a.toUpperCase()})};e.addslashes=function(c){return c.replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")};e.stripslashes=function(c){return c.replace(/\0/g,"0").replace(/\\([\\'"])/g,
"$1")};e.dirpath=function(c){return c.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};e.dirname=function(c){return e.filename(e.dirpath(c))};e.filename=function(c){return c?c.replace(/^.*[\\\/]/,""):""};e.filenameSansExtension=function(c){return e.filename(c).split(".").shift()};e.spaceCamelCase=function(c){return c.match(e.rxSplitByUppercase).slice(0,-1).join(" ")};e.extension=function(c){return c?c.split(".").pop().toLowerCase():""};e.lpad=function(c,a,b){for(;c.length<b;)c=a+c;return c};e.rpad=function(c,
a,b){for(;c.length<b;)c+=a;return c};e.ellipse=function(c,a){return c<=a?c:c.substr(0,a-3)+String.fromCharCode(8230)};e.encode_utf8=function(c){return unescape(encodeURIComponent(c))};e.decode_utf8=function(c){return decodeURIComponent(escape(c))};e.join=function(c,a){return c.join(a)};e.startsWith=function(c,a){return c.substring(0,a.length)===a};"trim"in String.prototype||(String.prototype.trim=function(c){return this.replace(/^\s+|\s+$/g,"")});"undefined"!==typeof module&&module.exports&&(module.exports=
e)})(sketch);
(function(q){"object"===typeof exports?module.exports=q():"function"===typeof define&&define.amd?define(q):(sketch.util=sketch.util||{},sketch.util.MD5=q().hash)})(function(){var q=function(a,b){return a+b&4294967295},e=function(a,b,l,f,h,g){b=q(q(b,a),q(f,g));return q(b<<h|b>>>32-h,l)},c=function(a,b,l,f,h,g,y){return e(b&l|~b&f,a,b,h,g,y)},a=function(a,b,l,f,h,g,y){return e(b&f|l&~f,a,b,h,g,y)},b=function(a,b,l,f,h,g,y){return e(l^(b|~f),a,b,h,g,y)},k=function(r,d){var l=r[0],f=r[1],h=r[2],g=r[3],
l=c(l,f,h,g,d[0],7,-680876936),g=c(g,l,f,h,d[1],12,-389564586),h=c(h,g,l,f,d[2],17,606105819),f=c(f,h,g,l,d[3],22,-1044525330),l=c(l,f,h,g,d[4],7,-176418897),g=c(g,l,f,h,d[5],12,1200080426),h=c(h,g,l,f,d[6],17,-1473231341),f=c(f,h,g,l,d[7],22,-45705983),l=c(l,f,h,g,d[8],7,1770035416),g=c(g,l,f,h,d[9],12,-1958414417),h=c(h,g,l,f,d[10],17,-42063),f=c(f,h,g,l,d[11],22,-1990404162),l=c(l,f,h,g,d[12],7,1804603682),g=c(g,l,f,h,d[13],12,-40341101),h=c(h,g,l,f,d[14],17,-1502002290),f=c(f,h,g,l,d[15],22,1236535329),
l=a(l,f,h,g,d[1],5,-165796510),g=a(g,l,f,h,d[6],9,-1069501632),h=a(h,g,l,f,d[11],14,643717713),f=a(f,h,g,l,d[0],20,-373897302),l=a(l,f,h,g,d[5],5,-701558691),g=a(g,l,f,h,d[10],9,38016083),h=a(h,g,l,f,d[15],14,-660478335),f=a(f,h,g,l,d[4],20,-405537848),l=a(l,f,h,g,d[9],5,568446438),g=a(g,l,f,h,d[14],9,-1019803690),h=a(h,g,l,f,d[3],14,-187363961),f=a(f,h,g,l,d[8],20,1163531501),l=a(l,f,h,g,d[13],5,-1444681467),g=a(g,l,f,h,d[2],9,-51403784),h=a(h,g,l,f,d[7],14,1735328473),f=a(f,h,g,l,d[12],20,-1926607734),
l=e(f^h^g,l,f,d[5],4,-378558),g=e(l^f^h,g,l,d[8],11,-2022574463),h=e(g^l^f,h,g,d[11],16,1839030562),f=e(h^g^l,f,h,d[14],23,-35309556),l=e(f^h^g,l,f,d[1],4,-1530992060),g=e(l^f^h,g,l,d[4],11,1272893353),h=e(g^l^f,h,g,d[7],16,-155497632),f=e(h^g^l,f,h,d[10],23,-1094730640),l=e(f^h^g,l,f,d[13],4,681279174),g=e(l^f^h,g,l,d[0],11,-358537222),h=e(g^l^f,h,g,d[3],16,-722521979),f=e(h^g^l,f,h,d[6],23,76029189),l=e(f^h^g,l,f,d[9],4,-640364487),g=e(l^f^h,g,l,d[12],11,-421815835),h=e(g^l^f,h,g,d[15],16,530742520),
f=e(h^g^l,f,h,d[2],23,-995338651),l=b(l,f,h,g,d[0],6,-198630844),g=b(g,l,f,h,d[7],10,1126891415),h=b(h,g,l,f,d[14],15,-1416354905),f=b(f,h,g,l,d[5],21,-57434055),l=b(l,f,h,g,d[12],6,1700485571),g=b(g,l,f,h,d[3],10,-1894986606),h=b(h,g,l,f,d[10],15,-1051523),f=b(f,h,g,l,d[1],21,-2054922799),l=b(l,f,h,g,d[8],6,1873313359),g=b(g,l,f,h,d[15],10,-30611744),h=b(h,g,l,f,d[6],15,-1560198380),f=b(f,h,g,l,d[13],21,1309151649),l=b(l,f,h,g,d[4],6,-145523070),g=b(g,l,f,h,d[11],10,-1120210379),h=b(h,g,l,f,d[2],
15,718787259),f=b(f,h,g,l,d[9],21,-343485551);r[0]=q(l,r[0]);r[1]=q(f,r[1]);r[2]=q(h,r[2]);r[3]=q(g,r[3])},u=function(a){var b=[],l;for(l=0;64>l;l+=4)b[l>>2]=a.charCodeAt(l)+(a.charCodeAt(l+1)<<8)+(a.charCodeAt(l+2)<<16)+(a.charCodeAt(l+3)<<24);return b},m=function(a){var b=[],l;for(l=0;64>l;l+=4)b[l>>2]=a[l]+(a[l+1]<<8)+(a[l+2]<<16)+(a[l+3]<<24);return b},d=function(a){var b=a.length,l=[1732584193,-271733879,-1732584194,271733878],f,h,g;for(f=64;f<=b;f+=64)k(l,u(a.substring(f-64,f)));a=a.substring(f-
64);h=a.length;g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(f=0;f<h;f+=1)g[f>>2]|=a.charCodeAt(f)<<(f%4<<3);g[f>>2]|=128<<(f%4<<3);if(55<f)for(k(l,g),f=0;16>f;f+=1)g[f]=0;b=(8*b).toString(16).match(/(.*?)(.{0,8})$/);a=parseInt(b[2],16);b=parseInt(b[1],16)||0;g[14]=a;g[15]=b;k(l,g);return l},x="0123456789abcdef".split(""),p=function(a){var b;for(b=0;b<a.length;b+=1){for(var l=a,f=b,h=a[b],g="",y=void 0,y=0;4>y;y+=1)g+=x[h>>8*y+4&15]+x[h>>8*y&15];l[f]=g}return a.join("")},w=function(){this.reset()};"5d41402abc4b2a76b9719d911017c592"!==
p(d("hello"))&&(q=function(a,b){var l=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(l>>16)<<16|l&65535});w.prototype.append=function(a){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));this.appendBinary(a);return this};w.prototype.appendBinary=function(a){this._buff+=a;this._length+=a.length;a=this._buff.length;var b;for(b=64;b<=a;b+=64)k(this._state,u(this._buff.substring(b-64,b)));this._buff=this._buff.substr(b-64);return this};w.prototype.end=function(a){var b=this._buff,l=b.length,
f,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(f=0;f<l;f+=1)h[f>>2]|=b.charCodeAt(f)<<(f%4<<3);this._finish(h,l);a=a?this._state:p(this._state);this.reset();return a};w.prototype._finish=function(a,b){var l=b,f;a[l>>2]|=128<<(l%4<<3);if(55<l)for(k(this._state,a),l=0;16>l;l+=1)a[l]=0;f=8*this._length;f=f.toString(16).match(/(.*?)(.{0,8})$/);l=parseInt(f[2],16);f=parseInt(f[1],16)||0;a[14]=l;a[15]=f;k(this._state,a)};w.prototype.reset=function(){this._buff="";this._length=0;this._state=[1732584193,-271733879,
-1732584194,271733878];return this};w.prototype.destroy=function(){delete this._state;delete this._buff;delete this._length};w.hash=function(a,b){/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a)));var l=d(a);return b?l:p(l)};w.hashBinary=function(a,b){var l=d(a);return b?l:p(l)};w.ArrayBuffer=function(){this.reset()};w.ArrayBuffer.prototype.append=function(a){var b=this._concatArrayBuffer(this._buff,a),l=b.length;this._length+=a.byteLength;for(a=64;a<=l;a+=64)k(this._state,m(b.subarray(a-
64,a)));this._buff=a-64<l?b.subarray(a-64):new Uint8Array(0);return this};w.ArrayBuffer.prototype.end=function(a){var b=this._buff,l=b.length,f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h;for(h=0;h<l;h+=1)f[h>>2]|=b[h]<<(h%4<<3);this._finish(f,l);a=a?this._state:p(this._state);this.reset();return a};w.ArrayBuffer.prototype._finish=w.prototype._finish;w.ArrayBuffer.prototype.reset=function(){this._buff=new Uint8Array(0);this._length=0;this._state=[1732584193,-271733879,-1732584194,271733878];return this};
w.ArrayBuffer.prototype.destroy=w.prototype.destroy;w.ArrayBuffer.prototype._concatArrayBuffer=function(a,b){var l=a.length,f=new Uint8Array(l+b.byteLength);f.set(a);f.set(new Uint8Array(b),l);return f};w.ArrayBuffer.hash=function(a,b){var l=new Uint8Array(a),f=l.length,h=[1732584193,-271733879,-1732584194,271733878],g,y,d;for(g=64;g<=f;g+=64)k(h,m(l.subarray(g-64,g)));l=g-64<f?l.subarray(g-64):new Uint8Array(0);y=l.length;d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(g=0;g<y;g+=1)d[g>>2]|=l[g]<<(g%4<<
3);d[g>>2]|=128<<(g%4<<3);if(55<g)for(k(h,d),g=0;16>g;g+=1)d[g]=0;f=(8*f).toString(16).match(/(.*?)(.{0,8})$/);l=parseInt(f[2],16);f=parseInt(f[1],16)||0;d[14]=l;d[15]=f;k(h,d);return b?h:p(h)};return w});"undefined"===typeof sketch&&(sketch={});
(function(q){q.util=q.util||{};q.util.Queue=function(e){var c=this,a=e.oncomplete||e.callback,b=e.onprogress||e.progress,k=!1===e.flatten?!1:!0;this.cancel=function(){if(!(c.canceled||0>=c.remaining)){if(e.oncancel)e.oncancel();c.canceled=!0}};this.next=function(){if(!c.canceled&&!c.complete){var u=c.queue,m=c.remaining,d=c.length,x=d-m-1,p=c.keys[x];b&&b(d?1-(m+1)/d:1);if(u.length)if(c.remaining--,d=(m="[object Object]"===String(w))&&w.length,k)e.next.call(c,u.shift(),p,x);else{var w=u[0];m&&!d&&
u.shift();m&&d?e.next.call(c,w.shift(),p,x):e.next.call(c,u.shift(),p,x)}else c.complete=!0,a&&a()}};this.reset=function(a){if(e.range){var b=e.range,d=b.from;for(a=[];d<=b.to;d++)a.push(d)}else a=a||e.items;this.length=0;this.remaining=-1;this.queue=[];this.keys=[];this.canceled=this.complete=!1;var x=function(a,b){if(Array.isArray(a))for(var d=0;d<a.length;d++)b(d);else for(d in a)b(d)};x(a,function(b){var d=a[b];if("[object Object]"!==String(d)||k)c.queue.push(d),c.keys.push(b),c.length++,c.remaining++;
else{var r=[];c.queue.push(r);x(d,function(a){r.push(d[a]);c.keys.push(b);c.length++;c.remaining++})}})};this.reset();setTimeout(function(){c.next()},0);return this};"undefined"!==typeof module&&module.exports&&(module.exports=q.util.Queue)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.lang=q.lang||{locales:{en:{}}},c=q.util,a;e.setLocale=function(m,d){a?(a.setLocale(m),d&&d()):(m=e.getLocale(m),a=new b({directory:"./js/lang",locale:m,extension:".json",onerror:function(){e.setLocale("en",d)},onload:function(a){q.feature.lang=m;d&&d()}}));e.translate=a.__.bind?a.__.bind(a):function(){return a.__.apply(a,arguments)}};e.getLocale=function(a){"auto"===a&&(a=q.client.lang);return e.available[a]?a:-1!==a.indexOf("-")?e.getLocale(a.split("-")[0]):"en"};e.getWordCount=
function(){var a=0,b;for(b in e.locales.en)a+=c.count(e.locales.en[b].split(" "));console.log(a)};var b=function(a){for(var b in a)this[b]=a[b];this.setLocale(this.locale)};b.localeCache={};b.prototype={defaultLocale:"en",directory:"/locales",extension:".min.json",getLocale:function(){return this.locale},setLocale:function(a){a||(a=document.querySelector("html").getAttribute("lang"));a||(a=this.defaultLocale);this.locale=a;e.locales[a]?(this.setLocaleData(a,e.locales[a]),this.onload&&this.onload()):
a in b.localeCache||(this.getLocaleFileFromServer(),b.localeCache[a]={})},setLocaleData:function(a,d){b.localeCache[a]=d},getLocaleFileFromServer:function(a){var d=this.onload,k=this.locale;c.request({url:this.directory+"/"+k+this.extension,headers:{"Content-Type":"text/plain;charset=UTF-8"},onerror:this.onerror,onload:function(a){a=JSON.parse(a.responseText);b.localeCache[k]=a;d&&d(a)}})},__:function(){var a=arguments[0],a=b.localeCache[this.locale][a]||a;1<arguments.length&&(a=u(a,Array.prototype.slice.call(arguments,
1)));return a},__n:function(a,d){var k=b.localeCache[this.locale][a];d=parseInt(d,10);k=0===d?k.zero:1<d?k.other:k.one;k=u(k,[d]);2<arguments.length&&(k=u(k,Array.prototype.slice.call(arguments,2)));return k}};var k=c.sprintf=function(a){if("string"!==typeof a)throw"sprintf: The first arguments need to be a valid format string.";for(var b=new RegExp(/%(\+)?([0 ]|'(.))?(-)?([0-9]+)?(\.([0-9]+))?([%bcdfosxX])/g),k,c=[],e=1;k=b.exec(a);){if(e>=arguments.length&&"%"!==k[8])throw"sprintf: At least one argument was missing.";
c[c.length]={begin:k.index,end:k.index+k[0].length,sign:"+"==k[1],negative:0>parseFloat(arguments[e])?!0:!1,padding:void 0==k[2]?" ":"'"==k[2].substring(0,1)?k[3]:k[2],alignLeft:"-"==k[4],width:void 0!=k[5]?k[5]:!1,precision:void 0!=k[7]?k[7]:!1,type:k[8],data:"%"!=k[8]?String(arguments[e++]):!1}}b="";for(e=k=0;e<c.length;++e){b+=a.substring(k,c[e].begin);k=c[e].end;var r="";switch(c[e].type){case "%":r="%";break;case "b":r=Math.abs(parseInt(c[e].data)).toString(2);break;case "c":r=String.fromCharCode(Math.abs(parseInt(c[e].data)));
break;case "d":r=String(Math.abs(parseInt(c[e].data)));break;case "f":r=!1===c[e].precision?String(Math.abs(parseFloat(c[e].data))):Math.abs(parseFloat(c[e].data)).toFixed(c[e].precision);break;case "o":r=Math.abs(parseInt(c[e].data)).toString(8);break;case "s":r=c[e].data.substring(0,c[e].precision?c[e].precision:c[e].data.length);break;case "x":r=Math.abs(parseInt(c[e].data)).toString(16).toLowerCase();break;case "X":r=Math.abs(parseInt(c[e].data)).toString(16).toUpperCase();break;default:throw"sprintf: Unknown type \u201c"+
c[e].type+"\u201d detected. This should never happen. Maybe the regex is wrong.";}if("%"!=c[e].type){if(!1!=c[e].width&&c[e].width>r.length)for(var v=r.length,l=0;l<c[e].width-v;++l)r=!0==c[e].alignLeft?r+c[e].padding:c[e].padding+r;if("b"==c[e].type||"d"==c[e].type||"o"==c[e].type||"f"==c[e].type||"x"==c[e].type||"X"==c[e].type)!0==c[e].negative?r="-"+r:!0==c[e].sign&&(r="+"+r)}b+=r}return b+=a.substring(k,a.length)},u=c.vsprintf=function(a,b,c){c=b.slice(0);c.splice(0,0,a);return k.apply(null,c)}})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.lang=q.lang||{};q.lang.locales=q.lang.locales||{};q.lang.available={de:{en:"German","native":"Deutsch"},en:{en:"English","native":"English"},es:{en:"Spanish","native":"Espa\u00f1ol"},fr:{en:"French","native":"Fran\u00e7ais"},it:{en:"Italian","native":"Italiano"},nl:{en:"Dutch","native":"Nederlands"},pl:{en:"Polish","native":"Polski"},pt:{en:"Portuguese","native":"Portugu\u00eas"},sv:{en:"Swedish","native":"Svenska"},ar:{en:"Arabic","native":"\u0627\u0644\u0639\u0631\u0628\u064a\u0629"},ko:{en:"Korean",
"native":"\ud55c\uad6d\uc5b4"},ja:{en:"Japanese","native":"\u65e5\u672c\u8a9e"},ru:{en:"Russian","native":"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u042f\u0437\u044b\u043a"},zh:{en:"Chinese","native":"\u4e2d\u6587"}};q.util.mixin({en:{"about-version":"[?] SketchAPI %s","clear-confirm":"Changes to the open document will be lost.<br>Do you want to continue?","delete-doc-confirm":"You\u2019re about to delete this document.<br>Do you want to continue?","exit-app-confirm":"You\u2019re about to exit this app.<br>Any unsaved data in current document will be lost. Would you like to save before exiting?",
"new-doc-confirm":"You\u2019re about to create a new document.<br>Any unsaved data in current document will be lost.","open-confirm":"You\u2019re about to open a new document.<br>Any unsaved data in current document will be lost.","select-tool-count":"%s layers selected","select-tool-message":"Use the <span class='icon-select'></span> Select tool to Move, Rotate, Scale, Delete, and reorganize the layers of your design.","useMaxCopies-alert":"You can only include %s %s of this clipart.","welcome-to":"Welcome to %s",
"zoom-tool-message":"Use the <span class='icon-zoom'></span> Zoom tool to fine tune your image.",start:"Start","console-message":"Sketch.io developes HTML5 graphics applications.\nWe specialize in WebGL, WebRTC and Canvas.\n\nVisit https://sketch.io/ for project inquiries.","copy-to-clipboard":"Copy to Clipboard","could-not-authorize":"%s could not authorize","image-ready-to-share":"Your image is ready to be shared!","share-link-copied":"Share link copied!","still-uploading":"Still uploading to %s",
"upload-complete":"%s upload complete","upload-failed":"%s upload failed","uploading-to":"Uploading to %s","changes-saved":"All changes saved!","upload-invalid":"Invalid format uploaded","user-entered":"%s has entered the room.","user-exited":"%s has left the room.",author:"Author",license:"License",project:"File","special-thanks":"Special thanks",background:"Background","change-media":"Change Media","cut-objects":"Cut Selection","merge-objects":"Merge Objects","merge-paths":"Merge Paths","new-doc-created":"New Document Created!",
"new-doc":"New Document","paste-objects":"Paste Selection","resize-doc":"Resize File","remove-objects":"Remove Selection","reset-clipart-color":"Reset Clipart Color","split-path":"Split Path","update-clipart-color":"Change Clipart Color","update-style":"Update Style","update-text":"Update Text",angle:"Angle",antialias:"Antialias",anticlockwise:"Anticlockwise",blend:"Blend",bristles:"Bristles",coils:"Coils",composite:"Composite",constrain:"Constrain",content:"Content",contract:"Contract",cutout:"Cutout",
diameter:"Diameter",distance:"Distance",fill:"Fill",increment:"Increment",innerRadius:"Inner Radius",lineWidth:"Line Width",lookback:"Lookback",opacity:"Opacity",outerRadius:"Outer Radius",palette:"Palette",points:"Points",ratio:"Ratio",reset:"Reset",roundness:"Roundness",imperfection:"Imperfection",sides:"Sides",slope:"Slope",spacing:"Spacing",speed:"Speed",spread:"Spread",stroke:"Stroke",arrow:"Arrow",brush:"Brush",calligraphy:"Calligraphy",chrome:"Chrome",crayon:"Crayon",eraser:"Eraser",fur:"Fur",
paintbrush:"Paintbrush",pen:"Pen",pencil:"Pencil",sketchy:"Sketchy",spirograph:"Spirograph",spraypaint:"Spraypaint",streamer:"Streamer",web:"Web",burst:"Burst",circle:"Circle",ellipse:"Ellipse",gear:"Gear",pie:"Pie",radialBurst:"Radial Burst",rectangle:"Rectangle",regularPolygon:"Regular Polygon",ring:"Ring",shape:"Shape",spiral:"Spiral",square:"Square",star:"Star",triangle:"Triangle",select:"Select","quick-selection":"Quick Selection","add-to-selection":"Add to Selection","subtract-from-selection":"Subtract from Selection",
"select-all":"Select all","select-inverse":"Select inverse",unselect:"Unselect","crop-draw":"Crop Area",crop:"Crop","snapshot-log":"Click & drag to create your screenshot.",snapshot:"Snapshot","take-snapshot":"Take Snapshot",zoom:"Zoom","zoom-in":"Zoom in","zoom-out":"Zoom out","zoom-to-default":"Zoom to actual size",stamp:"Stamp","choose-stamp":"Set stamp category","convert-to-stamp":"Convert to Stamp",clipart:"Clipart","load-your-own-image":"Load your own image","choose-clipart":"Set clipart category",
floodfill:"Floodfill",contiguous:"Contiguous",tolerance:"Tolerance",text:"Text",fontFamily:"Font Family",fontSize:"Font Size",fontStyle:"Font Style",fontVariant:"Font Variant",fontWeight:"Font Weight",textAlign:"Text Align",textDecoration:"Text Decoration",textTransform:"Text Transform",whiteSpace:"White Space","choose-font":"Set font family",brightness:"Brightness",camera:"Camera",contrast:"Contrast",exposure:"Exposure",hue:"Hue",luminosity:"Luminosity",saturation:"Saturation",temperature:"Temperature",
tint:"Tint",blur:"Blur",pixelSize:"Pixel Size",copy:"Copy","copy-all":"Copy all",cut:"Cut","cut-all":"Cut all","delete":"Delete",duplicate:"Duplicate","layer-backwards":"Send Backwards","layer-forwards":"Send Forwards","layer-to-back":"Send to Back","layer-to-front":"Send to Front",paste:"Paste",history:"History",undo:"Undo",redo:"Redo",move:"Move","move-left":"Move Left","move-right":"Move Right","move-up":"Move Up","move-down":"Move Down",rotate:"Rotate",scale:"Scale",transform:"Transform",translate:"Translate",
"click-to-edit":"Click to Edit","click-to-select":"Click to Select","dbltap-to-edit":"Double Click to Edit","drag-to-move":"Drag to Move","drag-to-resize":"Drag to Resize","drag-to-rotate":"Drag to Rotate",black:"Black",blueprint:"Blueprint",graphPaper:"Graph Paper",grid:"Grid",lined:"Lined",looseLeaf:"Loose Leaf",notebook:"Notebook",transparent:"Transparent",white:"White",color:"Color",gradient:"Gradient",pattern:"Pattern",eyedropper:"Eyedropper","choose-blend":"Set blending mode","color-burn":"Color Burn",
"color-dodge":"Color Dodge",darken:"Darken",difference:"Difference",disco:"Disco",erase:"Erase",exclusion:"Exclusion","hard-light":"Hard Light",lighten:"Lighten",multiply:"Multiply",normal:"Normal",overlay:"Overlay",screen:"Screen","soft-light":"Soft Light","source-atop":"Source Atop","destination-over":"Destination Over",cancel:"Cancel","continue":"Continue","delete-doc":"Delete File",ok:"Ok","open-doc":"Open File",quit:"Quit",download:"Download","download-format":"Download %s",save:"Save","save-format":"Save %s",
"keyboard-shortcuts":"Keyboard Shortcuts",shortcuts:"Shortcuts","ask-question":"Ask Question","draw-with-friend":"Draw with a friend","report-bug":"Report Bug","request-feature":"Request Feature",connecting:"Connecting","decoding-format":"Decoding %s",downloading:"Downloading",loading:"Loading","loading-error":"Error loading","opening-format":"Opening %s","reading-files":"Reading files","reading-format":"Reading %s",rendering:"Rendering",syncing:"Syncing","choose-brush":"Choose Brush","choose-shape":"Choose Shape",
"choose-units":"Set units","%":"%",cm:"cm",inches:"inches",mm:"mm",pixels:"pixels","choose-fill":"Set fill style","choose-stroke":"Set stroke style",about:"About",attachment:"Attachment","community-page":"Community",configure:"Configure","export":"Export",file:"File",layers:"Layers",menu:"Sidebar","my-docs":"My Files","new":"New",open:"Open",print:"Print","video-tutorials":"Video Tutorials","choose-preset-size":"Set preset size","sans serif":"Sans Serif",serif:"Serif",display:"Display",bold:"Bold",
handwriting:"Handwriting",plants:"Plants",people:"People",animals:"Animals","water colors":"Water colors",typogrunge:"Typogrunge",tizzape:"Tizzape","simple smudges":"Simple Smudges",retro:"Retro",leafs:"Leafs",footprints:"Footprints",flowers:"Flowers",doodles:"Doodles",butterflies:"Butterflies","aspect-ratio":"Aspect Ratio","choose-aspect-ratio":"Set Aspect Ratio","choose-constrain":"Constrain Proportions","hide-layer":"Hide layer","show-layer":"Show layer","convert-format":"Convert into %s","update-format":"Update %s",
"go-back":"Go back",image:"Image",saving:"Saving",colorNoise:"Gradient Noise",colorMode:"Gradient Style",linear:"Linear Gradient",radial:"Radial Gradient",cycle:"Color Cycle",lineJoin:"Corner",lineCap:"Cap",round:"Round",bevel:"Bevel",miter:"Miter",enable:"Enable",disable:"Disable",projects:"Files",paper:"Paper","import":"Import",quality:"Quality",fileFormat:"Format",sizeTo:"Size To",size:"Size",percent:"Percent",share:"Share",dpi:"DPI",imageSize:"Settings",settings:"Settings",tool:"Tool",width:"Width",
height:"Height",saveAs:"Save As",x:"X",y:"Y","no-layers":"No layers added","layer-order":"Layer Order","choose-utility":"Choose Utility",document:"Document",library:"Library",utilities:"Utilities",brushes:"Brushes",shapes:"Shapes","synchronized":"All changes saved!"}},q.lang.locales)})(sketch);"undefined"===typeof eventjs&&(eventjs={});
(function(q){q.modifyEventListener=!1;q.modifySelectors=!1;q.add=function(a,f,b,g){return c(a,f,b,g,"add")};q.remove=function(a,f,b,g){return c(a,f,b,g,"remove")};q.removeEvents=function(a){for(var f in a){var b=a[f].remove;b&&b()}};q.returnFalse=function(a){return!1};q.stop=function(a){a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,a.cancelBubbleCount=0)};q.prevent=function(a){a&&(a.preventDefault?a.preventDefault():a.preventManipulation?a.preventManipulation():a.returnValue=!1)};q.cancel=
function(a){q.stop(a);q.prevent(a)};q.blur=function(){if(q.isEditingText()){var a=document.activeElement;a.blur&&a.blur()}};q.isEditingText=function(){var a=document.activeElement;if(!a)return!1;var f=a.nodeName;return"INPUT"===f||"TEXTAREA"===f||"true"===a.contentEditable?!0:!1};q.getEventSupport=function(a,f){"string"===typeof a&&(f=a,a=window);f="on"+f;if(f in a)return!0;a.setAttribute||(a=document.createElement("div"));if(a.setAttribute&&a.removeAttribute){a.setAttribute(f,"");var b="function"===
typeof a[f];"undefined"!==typeof a[f]&&(a[f]=null);a.removeAttribute(f);return b}};var e=function(a){if(!a||"object"!==typeof a)return a;var f=new a.constructor,b;for(b in a)f[b]=a[b]&&"object"===typeof a[b]?e(a[b]):a[b];return f},c=function(l,f,h,g,y,z){g=g||{};if("[object Object]"===String(l)){var s=l;l=s.target;delete s.target;if(s.type&&s.listener){f=s.type;delete s.type;h=s.listener;delete s.listener;for(var m in s)g[m]=s[m]}else{for(var u in s){var p=s[u];"function"!==typeof p&&(g[u]=p)}var J=
{};for(m in s){u=m.split(",");var p=s[m],D={},B;for(B in g)D[B]=g[B];if("function"===typeof p)h=p;else if("function"===typeof p.listener)for(B in h=p.listener,p)"function"!==typeof p[B]&&(D[B]=p[B]);else continue;for(p=0;p<u.length;p++)J[m]=q.add(l,u[p],h,D,y)}return J}}if(l&&f&&h){if("string"===typeof l&&"ready"===f)if(window.eventjs_stallOnReady)f="load",l=window;else{a(l,g,h);return}if("string"===typeof l){l=document.querySelectorAll(l);if(0===l.length)return k("Missing target on listener!",arguments);
1===l.length&&(l=l[0])}s={};if(0<l.length&&l!==window){m=0;for(B=l.length;m<B;m++)(u=c(l[m],f,h,e(g),y))&&(s[m]=u);return b(s)}"string"===typeof f&&(f=f.toLowerCase(),-1!==f.indexOf(" ")?f=f.split(" "):-1!==f.indexOf(",")&&(f=f.split(",")));if("string"!==typeof f){if("number"===typeof f.length)for(m=0,B=f.length;m<B;m++)(u=c(l,f[m],h,e(g),y))&&(s[f[m]]=u);else for(m in f)(u="function"===typeof f[m]?c(l,m,f[m],e(g),y):c(l,m,f[m].listener,e(f[m]),y))&&(s[m]=u);return b(s)}0===f.indexOf("on")&&(f=f.substr(2));
if("object"!==typeof l)return k("Target is not defined!",arguments);if("function"!==typeof h)return k("Listener is not a function!",arguments);m=g.useCapture||!1;s=w(l)+"."+w(h)+"."+(m?1:0);if(q.Gesture&&q.Gesture._gestureHandlers[f])if(s=f+s,"remove"===y)x[s]&&(x[s].remove(),delete x[s]);else{if("add"===y){if(x[s])return x[s].add(),x[s];if(g.useCall&&!q.modifyEventListener){var E=h;h=function(a,f){for(var b in f)a[b]=f[b];return E.call(l,a)}}g.gesture=f;g.target=l;g.listener=h;g.fromOverwrite=z;
return x[s]=q.proxy[f](g)}}else{for(var F=d(f,g.strict),C=F.length,p=0;p<C;p++)f=F[p],J=f+"."+s,"remove"===y?x[J]&&(l[v](f,h,m),delete x[J]):"add"!==y||x[J]||(l[r](f,h,m),x[J]={id:J,type:f,target:l,listener:h,add:function(){for(var a=0;a<C;a++)q.add(l,F[a],h,g)},remove:function(){for(var a=0;a<C;a++)q.remove(l,F[a],h,g)}});return x[J]}}},a=function(a,f,b){var g=q.timestamp(),y=f.timeout,d=setInterval(function(){q.timestamp()-g>y&&window.clearInterval(d);document.querySelector(a)&&(window.clearInterval(d),
setTimeout(b,1))},f.interval||1E3/60)},b=function(a){return{remove:function(){for(var f in a)a[f].remove()},add:function(){for(var f in a)a[f].add()}}},k=function(a,f){"undefined"!==typeof console&&"undefined"!==typeof console.error&&console.error(a,f)},u={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},m={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,
mouseup:2};q.supports={};window.navigator.msPointerEnabled&&(q.supports.msPointer=!0);q.getEventSupport("touchstart")&&(q.supports.touch=!0);q.getEventSupport("mousedown")&&(q.supports.mouse=!0);var d=function(){return function(a,f){var b=document.addEventListener?"":"on",g=m[a];if(isFinite(g)&&!f){var y=[],d;for(d in q.supports)y.push(b+u[d][g]);return y}return[b+a]}}(),x={},p=0,w=function(a){if(a===window)return"#window";if(a===document)return"#document";a.eventId||(a.eventId="e"+p++);return a.eventId},
r=document.addEventListener?"addEventListener":"attachEvent",v=document.removeEventListener?"removeEventListener":"detachEvent";q.createPointerEvent=function(a,f,b){var g=f.gesture,y=f.target,d=a.changedTouches||q.getCoords(a);if(d.length){var s=d[0];f.pointers=b?[]:d;f.pageX=s.pageX;f.pageY=s.pageY;f.x=f.pageX;f.y=f.pageY}b=document.createEvent("Event");b.initEvent(g,!0,!0);b.originalEvent=a;for(var r in f)"target"!==r&&(b[r]=f[r]);a=b.type;q.Gesture&&q.Gesture._gestureHandlers[a]&&f.oldListener.call(y,
b,f,!1)};q.modifyEventListener&&window.HTMLElement&&function(){var a=function(a){var b=function(b){var h=b+"EventListener",l=a[h];a[h]=function(a,f,h){if(q.Gesture&&q.Gesture._gestureHandlers[a]){var y=h;"object"===typeof h?y.useCall=!0:y={useCall:!0,useCapture:h};c(this,a,f,y,b,!0)}else for(a=d(a),y=0;y<a.length;y++)l.call(this,a[y],f,h)}};b("add");b("remove")};navigator.userAgent.match(/Firefox/)?(a(HTMLDivElement.prototype),a(HTMLCanvasElement.prototype)):a(HTMLElement.prototype);a(document);a(window)}();
q.modifySelectors&&function(){var a=NodeList.prototype;a.removeEventListener=function(a,b,g){for(var l=0,d=this.length;l<d;l++)this[l].removeEventListener(a,b,g)};a.addEventListener=function(a,b,g){for(var l=0,d=this.length;l<d;l++)this[l].addEventListener(a,b,g)}}();return q})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.pointerSetup=function(a){a.target=a.target||window;a.doc=a.target.ownerDocument||a.target;a.minFingers=a.minFingers||a.fingers||1;a.maxFingers=a.maxFingers||a.fingers||Infinity;a.position=a.position||"relative";delete a.fingers;var b={enabled:!0};b.gesture=a.gesture;b.target=a.target;b.env=a.env;q.modifyEventListener&&a.fromOverwrite&&(a.oldListener=a.listener,a.listener=q.createPointerEvent);var d=0;b.gesture.indexOf("pointer");a.oldListener&&(b.oldListener=
a.oldListener);b.listener=a.listener;b._listener=a.listener;b.proxy=function(d){a.listener=d;d(a.event,b)};b.add=function(){b.enabled||(a._pointerOver&&a._pointerOver.add(),a._pointerOut&&a._pointerOut.add(),a._pointerDown&&a._pointerDown.add(),a._pointerMove&&a._pointerMove.add(),a._pointerUp&&a._pointerUp.add(),b.enabled=!0)};b.remove=function(){b.enabled&&(a._pointerOver&&a._pointerOver.remove(),a._pointerOut&&a._pointerOut.remove(),a._pointerDown&&a._pointerDown.remove(),a._pointerMove&&a._pointerMove.remove(),
a._pointerUp&&a._pointerUp.remove(),b.reset(),b.enabled=!1)};b.pause=function(b){!a._pointerMove||b&&!b.move||a._pointerMove.remove();!a._pointerUp||b&&!b.up||a._pointerUp.remove();d=a.fingers;a.fingers=0};b.resume=function(b){!a._pointerMove||b&&!b.move||a._pointerMove.add();!a._pointerUp||b&&!b.up||a._pointerUp.add();a.fingers=d};b.cancel=function(a){e.animation.stop();b.pause(a)};b.reset=function(){a.tracker={};a.fingers=0};b.hasMoved=function(){return b.start.x!==b.x||b.start.y!==b.y};b.distanceMoved=
function(){var a=b.start.x-b.x,d=b.start.y-b.y;return Math.sqrt(a*a+d*d)};return b};e.animation=new function(){var a=this,b=!1,d=null,k=function(){d();b&&requestAnimationFrame(k)};this.stop=function(){b=!1};this.listener=function(c,e,r){if("down"===e.state){var v=null,l=null;d=function(){if(v!==e.x||l!==e.y||"up"===e.state)r(c,e),v=e.x,l=e.y};b||(b=!0,k())}else"up"===e.state&&a.stop()};return this};var c=q.supports;q.isMouse=!!c.mouse;q.isMSPointer=!!c.touch;q.isTouch=!!c.msPointer;e.defaultSID=1;
e.pointerStart=function(a,b,d){var k=(a.type||"mousedown").toUpperCase();0===k.indexOf("MOUSE")?(q.isMouse=!0,q.isTouch=!1,q.isMSPointer=!1):0===k.indexOf("TOUCH")?(q.isMouse=!1,q.isTouch=!0,q.isMSPointer=!1):0===k.indexOf("MSPOINTER")&&(q.isMouse=!1,q.isTouch=!1,q.isMSPointer=!0);var c=function(a,f){var g=d.bbox,h=w[f]={};switch(d.position){case "absolute":h.offsetX=0;h.offsetY=0;break;case "differenceFromLast":h.offsetX=a.pageX;h.offsetY=a.pageY;break;case "difference":h.offsetX=a.pageX;h.offsetY=
a.pageY;break;case "move":h.offsetX=a.pageX-g.x1;h.offsetY=a.pageY-g.y1;break;default:h.offsetX=g.x1-g.scrollLeft,h.offsetY=g.y1-g.scrollTop}var g=a.pageX-h.offsetX,l=a.pageY-h.offsetY;h.rotation=0;h.scale=1;h.startTime=h.moveTime=b.startTime;h.move={x:g,y:l};h.start={x:g,y:l};d.fingers++};d.event=a;d.listener=b._listener;b.startTime=q.timestamp();var k=!d.fingers,w=d.tracker;a=a.changedTouches||q.getCoords(a);for(var r=a.length,v=0;v<r;v++){var l=a[v],f=l.identifier||e.defaultSID;if(d.fingers){if(d.fingers>=
d.maxFingers){var h=[];for(f in d.tracker)h.push(f);b.identifier=h.join(",");return k}var g=0;for(h in w){if(w[h].up){delete w[h];c(l,f);d.cancel=!0;break}g++}w[f]||c(l,f)}else w=d.tracker={},b.bbox=d.bbox=q.getBoundingBox(d.target),d.fingers=0,d.cancel=!1,c(l,f)}h=[];for(f in d.tracker)h.push(f);b.identifier=h.join(",");q.isTouchStart=!0;q.isTouchEnd=!1;return k};e.pointerEnd=function(a,b,d,k){for(var c=a.touches||[],w=c.length,r={},v=0;v<w;v++){var l=c[v].identifier;r[l||e.defaultSID]=!0}for(l in d.tracker)c=
d.tracker[l],r[l]||c.up||(k&&k(a,"up"),c.up=!0,d.fingers--);if(0<d.fingers)return!1;a=[];d.fingers=0;d.gestureFingers=0;for(l in d.tracker)d.gestureFingers++,a.push(l);b.identifier=a.join(",");q.isTouchEnd=!0;q.isTouchStart=!1;return!0};q.getCoords=function(a){isFinite(a.pageX)?q.getCoords=function(a){return Array({type:"mouse",x:a.pageX,y:a.pageY,pageX:a.pageX,pageY:a.pageY,identifier:a.pointerId||e.defaultSID})}:q.getCoords=function(a){var b=document.documentElement;a=a||window.event;return Array({type:"mouse",
x:a.clientX+b.scrollLeft,y:a.clientY+b.scrollTop,pageX:a.clientX+b.scrollLeft,pageY:a.clientY+b.scrollTop,identifier:e.defaultSID})};return q.getCoords(a)};var a=0,b=0;q.getCoord=function(k){if(k.changedTouches)return(k=k.changedTouches)&&k.length?(k=k[0],{x:a=k.pageX,y:b=k.pageY}):{x:a,y:b};if(isFinite(k.pageX))return{x:k.pageX,y:k.pageY};var m=document.documentElement;k=k||window.event;return{x:k.clientX+m.scrollLeft,y:k.clientY+m.scrollTop}};q.getClientXY=function(k){if(k.changedTouches)return(k=
k.changedTouches)&&k.length?(k=k[0],{x:a=k.clientX,y:b=k.clientY}):{x:a,y:b};k=k||window.event;return{x:k.clientX,y:k.clientY}};var k=function(a,b){var d=parseFloat(a.getPropertyValue(b),10);return isFinite(d)?d:0};q.getDocumentScroll=function(a){a=a||{};a.scrollBodyLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft;a.scrollBodyTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||
document.body).scrollTop;return a};q.getBoundingBox=function(a){if(a===window||a===document)a=document.body;var b={},d=a.getBoundingClientRect();b.width=d.width;b.height=d.height;b.x1=d.left;b.y1=d.top;b.scaleX=d.width/a.offsetWidth||1;b.scaleY=d.height/a.offsetHeight||1;b.scrollLeft=0;b.scrollTop=0;d=window.getComputedStyle(a);if("border-box"===d.getPropertyValue("box-sizing")===!1){var c=k(d,"border-left-width"),e=k(d,"border-right-width"),w=k(d,"border-bottom-width"),r=k(d,"border-top-width");
b.border=[c,e,r,w];b.x1+=c;b.y1+=r;b.width-=e+c;b.height-=w+r}b.x2=b.x1+b.width;b.y2=b.y1+b.height;d=d.getPropertyValue("position");for(a="fixed"===d?a:a.parentNode;null!==a&&a!==document.body&&void 0!==a.scrollTop;){d=window.getComputedStyle(a);d=d.getPropertyValue("position");if("absolute"!==d)if("fixed"===d){b.scrollTop-=a.parentNode.scrollTop;b.scrollLeft-=a.parentNode.scrollLeft;break}else b.scrollLeft+=a.scrollLeft,b.scrollTop+=a.scrollTop;a=a.parentNode}q.getDocumentScroll(b);b.scrollLeft-=
b.scrollBodyLeft;b.scrollTop-=b.scrollBodyTop;return b};q.timestamp=function(){var a=window.performance;return a&&a.now?a.now.bind(a):Date.now}();q.Gesture=q.Gesture||{};q.Gesture._gestureHandlers=q.Gesture._gestureHandlers||{};q.register=function(a){q.Gesture._gestureHandlers[a]=e[a]}})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={}),c=/iPhone|iPad|iPod/i.test(navigator.userAgent);e.click=function(a){a.gesture=a.gesture||"click";a.maxFingers=a.maxFingers||a.fingers||1;a.onPointerDown=function(k){e.pointerStart(k,b,a)&&(a._pointerUp=q.add(a.target,"mouseup",a.onPointerUp))};a.onPointerUp=function(k){if((!c||"mouseup"!==k.type)&&e.pointerEnd(k,b,a)){a._pointerUp.remove();var u=(k.changedTouches||q.getCoords(k))[0],m=a.bbox,d=q.getBoundingBox(a.target),x=u.pageY-d.scrollBodyTop,u=u.pageX-
d.scrollBodyLeft;if(u>m.x1&&x>m.y1&&u<m.x2&&x<m.y2&&m.scrollTop===d.scrollTop){for(var p in a.tracker)break;m=a.tracker[p];b.x=m.start.x;b.y=m.start.y;b.state="click";a.listener(k,b)}}};a._pointerDown=q.add(a.target,"mousedown",a.onPointerDown);var b=e.pointerSetup(a);return b};q.register("click")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.dbltap=e.dblclick=function(c){c.gesture=c.gesture||"dbltap";c.maxFingers=c.maxFingers||c.fingers||1;var a,b,k,u,m;c.onPointerDown=function(x){var p=x.changedTouches||q.getCoords(x);a&&!b?(m=p[0],b=q.timestamp()-a):(u=p[0],a=q.timestamp(),b=0,clearTimeout(k),k=setTimeout(function(){a=0},700));e.pointerStart(x,d,c)&&((c._pointerMove=q.add(c.target,"mousemove",c.onPointerMove)).listener(x),c._pointerUp=q.add(c.target,"mouseup",c.onPointerUp))};c.onPointerMove=
function(d){if(a&&!b)m=(d.changedTouches||q.getCoords(d))[0];else if(!m)return;d=c.bbox;var e=m.pageX-d.x1,w=m.pageY-d.y1;0<e&&e<d.width&&0<w&&w<d.height&&25>=Math.abs(m.pageX-u.pageX)&&25>=Math.abs(m.pageY-u.pageY)||(c._pointerMove.remove(),clearTimeout(k),a=b=0)};c.onPointerUp=function(m){e.pointerEnd(m,d,c)&&(c._pointerMove.remove(),c._pointerUp.remove());if(a&&b){if(700>=b){d.state=c.gesture;for(var p in c.tracker)break;p=c.tracker[p];d.x=p.start.x;d.y=p.start.y;c.listener(m,d)}clearTimeout(k);
a=b=0}};c._pointerDown=q.add(c.target,"mousedown",c.onPointerDown);var d=e.pointerSetup(c);return d};q.register("dbltap");q.register("dblclick")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.dragElement=function(c,a){e.drag({event:a,target:c,position:"move",listener:function(a,k){c.style.left=k.x+"px";c.style.top=k.y+"px";q.prevent(a)}})};e.drag=function(c){c.gesture="drag";c.onPointerDown=function(b){e.pointerStart(b,a,c)&&!c.monitor&&(c._pointerMove=q.add(c.doc,"mousemove",c.onPointerMove),c._pointerUp=q.add(c.doc,"mouseup",c.onPointerUp));c.onPointerMove(b,"down")};c.onPointerMove=function(b,k){if(!c.tracker)return c.onPointerDown(b);for(var u=
b.changedTouches||q.getCoords(b),m=u.length,d=0;d<m;d++){var x=u[d],p=x.identifier||e.defaultSID,w=c.tracker[p];w&&(w.pageX=x.pageX,w.pageY=x.pageY,a.state=k||"move",a.identifier=p,a.start=w.start,a.fingers=c.fingers,"differenceFromLast"===c.position?(a.x=w.pageX-w.offsetX,a.y=w.pageY-w.offsetY,w.offsetX=w.pageX,w.offsetY=w.pageY):(a.x=w.pageX-w.offsetX,a.y=w.pageY-w.offsetY),c.animationFrame?e.animation.listener(b,a,c.listener):c.listener(b,a))}};c.onPointerUp=function(b){e.pointerEnd(b,a,c,c.onPointerMove)&&
!c.monitor&&(c._pointerMove.remove(),c._pointerUp.remove())};var a=e.pointerSetup(c);if(c.event)c.onPointerDown(c.event);else c._pointerDown=q.add(c.target,"mousedown",c.onPointerDown),c.monitor&&(c._pointerMove=q.add(c.target,"mousemove",c.onPointerMove),c._pointerUp=q.add(c.target,"mouseup",c.onPointerUp));return a};q.register("drag")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={}),c=Math.PI/180,a=function(a,k){var c=0,m=0,d=0,e;for(e in k){var p=k[e];p.up||(c+=p.move.x,m+=p.move.y,d++)}a.x=c/d;a.y=m/d;return a};e.gesture=function(b){b.gesture=b.gesture||"gesture";b.minFingers=b.minFingers||b.fingers||2;b.onPointerDown=function(c){var m=b.fingers;e.pointerStart(c,k,b)&&(b._pointerMove=q.add(b.doc,"mousemove",b.onPointerMove),b._pointerUp=q.add(b.doc,"mouseup",b.onPointerUp));if(b.fingers===b.minFingers&&m!==b.fingers){k.fingers=b.minFingers;
k.scale=1;k.rotation=0;k.state="start";var m="",d;for(d in b.tracker)m+=d;k.identifier=parseInt(m);a(k,b.tracker);b.listener(c,k)}};b.onPointerMove=function(u,m){for(var d=b.bbox,x=b.tracker,p=u.changedTouches||q.getCoords(u),w=p.length,r=0;r<w;r++){var v=p[r],l=v.identifier||e.defaultSID,f=x[l];f&&(f.move.x=v.pageX-d.x1,f.move.y=v.pageY-d.y1)}if(!(b.fingers<b.minFingers)){p=[];w=d=0;a(k,x);for(l in x)if(v=x[l],!v.up){r=v.start;if(!r.distance){var f=r.x-k.x,h=r.y-k.y;r.distance=Math.sqrt(f*f+h*h);
r.angle=Math.atan2(f,h)/c}var f=v.move.x-k.x,h=v.move.y-k.y,g=Math.sqrt(f*f+h*h),d=d+g/r.distance,f=Math.atan2(f,h)/c,r=(r.angle-f+360)%360-180;v.DEG2=v.DEG1;v.DEG1=0<r?r:-r;isFinite(v.DEG2)&&(v.rotation=0<r?v.rotation+(v.DEG1-v.DEG2):v.rotation-(v.DEG1-v.DEG2),w+=v.rotation);p.push(v.move)}k.touches=p;k.fingers=b.fingers;k.scale=d/b.fingers;k.rotation=w/b.fingers;k.state="change";b.listener(u,k)}};b.onPointerUp=function(a){var m=b.fingers;e.pointerEnd(a,k,b)&&(b._pointerMove.remove(),b._pointerUp.remove());
m===b.minFingers&&b.fingers<b.minFingers&&(k.fingers=b.fingers,k.state="end",b.listener(a,k))};b._pointerDown=q.add(b.target,"mousedown",b.onPointerDown);var k=e.pointerSetup(b);return k};q.register("gesture")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){(q.proxy||(q.proxy={})).shake=function(e){var c={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:e.target,listener:e.listener,remove:function(){window.removeEventListener("devicemotion",u,!1)}},a=q.timestamp(),b={x:0,y:0,z:0},k={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},u=function(m){var d=m.accelerationIncludingGravity;b.x=.8*b.x+(1-.8)*d.x;b.y=.8*b.y+(1-.8)*d.y;b.z=.8*b.z+(1-.8)*d.z;c.accelerationIncludingGravity=b;c.acceleration.x=d.x-
b.x;c.acceleration.y=d.y-b.y;c.acceleration.z=d.z-b.z;if("devicemotion"===e.gesture)e.listener(m,c);else for(var d=q.timestamp(),u=0;3>u;u++){var p="xyz"[u],w=c.acceleration[p],p=k[p],r=Math.abs(w);!(1E3>d-a)&&4<r&&(w=d*w/r,r=Math.abs(w+p.value),p.value&&200>r?(p.value=w,p.count++,3===p.count&&(e.listener(m,c),a=d,p.value=0,p.count=0)):(p.value=w,p.count=1))}};if(window.addEventListener)return window.addEventListener("devicemotion",u,!1),c};q.register("shake")})(eventjs);
"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={}),c=Math.PI/180;e.swipe=function(a){a.snap=a.snap||90;a.threshold=a.threshold||.75;a.gesture=a.gesture||"swipe";a.onPointerDown=function(k){e.pointerStart(k,b,a)&&((a._pointerMove=q.add(a.doc,"mousemove",a.onPointerMove)).listener(k),a._pointerUp=q.add(a.doc,"mouseup",a.onPointerUp))};a.onPointerMove=function(b){b=b.changedTouches||q.getCoords(b);for(var c=b.length,m=0;m<c;m++){var d=b[m],x=a.tracker[d.identifier||e.defaultSID];x&&(x.move.x=d.pageX,x.move.y=
d.pageY,x.moveTime=q.timestamp())}};a.onPointerUp=function(k){if(e.pointerEnd(k,b,a)){a._pointerMove.remove();a._pointerUp.remove();var u,m,d,x,p={x:0,y:0},w=0,r=0,v=0,l;for(l in a.tracker){var f=a.tracker[l];x=f.move.x-f.start.x;var h=f.move.y-f.start.y,w=w+f.move.x,r=r+f.move.y;p.x+=f.start.x;p.y+=f.start.y;v++;m=Math.sqrt(x*x+h*h);f=f.moveTime-f.startTime;x=Math.atan2(x,h)/c+180;m=f?m/f:0;if("undefined"===typeof d)d=x,u=m;else if(20>=Math.abs(x-d))d=(d+x)/2,u=(u+m)/2;else return}l=a.gestureFingers;
a.minFingers<=l&&a.maxFingers>=l&&u>a.threshold&&(p.x/=v,p.y/=v,b.start=p,b.x=w/v,b.y=r/v,b.angle=-(((d/a.snap+.5>>0)*a.snap||360)-360),b.velocity=u,b.fingers=l,b.state="swipe",a.listener(k,b))}};a._pointerDown=q.add(a.target,"mousedown",a.onPointerDown);var b=e.pointerSetup(a);return b};q.register("swipe")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.longpress=function(c){c.gesture="longpress";return e.tap(c)};e.tap=function(c){c.gesture=c.gesture||"tap";c.delay=c.delay||500;c.driftDeviance=c.driftDeviance||10;c.timeout=c.timeout||250;var a,b;c.onPointerDown=function(u){e.pointerStart(u,k,c)&&(a=q.timestamp(),(c._pointerMove=q.add(c.doc,"mousemove",c.onPointerMove)).listener(u),c._pointerUp=q.add(c.doc,"mouseup",c.onPointerUp),"longpress"===c.gesture&&(b=setTimeout(function(){if(!(u.cancelBubble&&1<++u.cancelBubbleCount)){var a=
0,b;for(b in c.tracker){var e=c.tracker[b];if(!0===e.end||c.cancel)return;a++}c.minFingers<=a&&c.maxFingers>=a&&(k.state="start",k.fingers=a,k.x=e.start.x,k.y=e.start.y,c.listener(u,k))}},c.delay)))};c.onPointerMove=function(a){var b=c.bbox;a=a.changedTouches||q.getCoords(a);for(var d=a.length,k=0;k<d;k++){var p=a[k],w=c.tracker[p.identifier||e.defaultSID];if(w){var r=p.pageX-b.x1,p=p.pageY-b.y1,v=r-w.start.x,w=p-w.start.y,w=Math.sqrt(v*v+w*w);if(!(0<r&&r<b.width&&0<p&&p<b.height&&w<=c.driftDeviance)){c._pointerMove.remove();
c.cancel=!0;break}}}};c.onPointerUp=function(u){if(e.pointerEnd(u,k,c)&&(clearTimeout(b),c._pointerMove.remove(),c._pointerUp.remove(),!(u.cancelBubble&&1<++u.cancelBubbleCount)))if("longpress"===c.gesture)"start"===k.state&&(k.state="end",c.listener(u,k));else if(!(c.cancel||q.timestamp()-a>c.timeout)){var m=c.gestureFingers;c.minFingers<=m&&c.maxFingers>=m&&(k.state="tap",k.fingers=c.gestureFingers,c.listener(u,k))}};c._pointerDown=q.add(c.target,"mousedown",c.onPointerDown);var k=e.pointerSetup(c);
return k};q.register("tap");q.register("longpress")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.hover=function(c){c.gesture=c.gesture||"hover";c.maxFingers=c.maxFingers||c.fingers||1;c.delay=c.delay||150;c.interval=c.interval||30;c.timeout=c.timeout||1E4;var a,b,k=0;c.onPointerOver=function(m){e.pointerStart(m,u,c)&&(c._pointerOut=q.add(c.target,"mouseout",c.onPointerOut),clearTimeout(a),clearInterval(b),a=setTimeout(function(){b=setInterval(function(){var d=q.timestamp()-u.startTime;d>c.timeout?(clearTimeout(a),clearInterval(b)):(u.state="hover",u.iterate=
k++,u.lapse=d,c.listener(m,u))},c.interval)},c.delay))};c.onPointerOut=function(k){e.pointerEnd(k,u,c)&&(c._pointerOut.remove(),clearTimeout(a),clearInterval(b))};c._pointerOver=q.add(c.target,"mouseover",c.onPointerOver);var u=e.pointerSetup(c);return u};q.register("hover")})(eventjs);"undefined"===typeof eventjs&&(eventjs={});
(function(q){var e=q.proxy||(q.proxy={});e.wheelPreventElasticBounce=function(c){c&&("string"===typeof c&&(c=document.querySelector(c)),q.add(c,"wheel",function(a,b){b.preventElasticBounce();q.stop(a)}))};e.wheel=function(c){var a,b=c.timeout||150,k=0,e={gesture:"wheel",state:"start",wheelDelta:0,target:c.target,listener:c.listener,preventElasticBounce:function(a){var b=this.target,d=b.scrollTop;d+b.offsetHeight===b.scrollHeight&&0>=this.wheelDelta?q.cancel(a):0===d&&0<=this.wheelDelta&&q.cancel(a);
q.stop(a)},add:function(){c.target[d](p,m,!1)},remove:function(){c.target[x](p,m,!1)}},m=function(d){d=d||window.event;e.state=k++?"change":"start";e.wheelDelta=d.detail?-20*d.detail:d.wheelDelta;c.listener(d,e);clearTimeout(a);a=setTimeout(function(){k=0;e.state="end";e.wheelDelta=0;c.listener(d,e)},b)},d=document.addEventListener?"addEventListener":"attachEvent",x=document.removeEventListener?"removeEventListener":"detachEvent",p=q.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";c.target[d](p,
m,!1);return e};q.register("wheel")})(eventjs);(function(q){q.elementsFromEvent=function(e,c){var a=q.getClientXY(e);return q.elementsFromPoint(a.x,a.y,c)};q.elementsFromPoint=function(e,c,a){var b=a?a.ownerDocument:document;a=a||b.getElementsByTagName("html")[0];b=b.elementFromPoint(e,c);if(b===a||"HTML"===b.nodeName)return[b];var k=b.style.pointerEvents;b.style.pointerEvents="none";e=[b].concat(q.elementsFromPoint(e,c,a));b.style.pointerEvents=k;return e}})(eventjs);
(function(q){var e=q.proxy;(q.keyTrackerReset=function(){q.fnKey=e.fnKey=!1;q.metaKey=e.metaKey=!1;q.escKey=e.escKey=!1;q.ctrlKey=e.ctrlKey=!1;q.shiftKey=e.shiftKey=!1;q.altKey=e.altKey=!1})();q.keyTracker=function(a){var k="keydown"===a.type;27===a.keyCode&&(q.escKey=e.escKey=k);b[a.keyCode]&&(q.metaKey=e.metaKey=k);q.ctrlKey=e.ctrlKey=a.ctrlKey;q.shiftKey=e.shiftKey=a.shiftKey;q.altKey=e.altKey=a.altKey};q.getKeyID=function(a){return k[a.keyCode]||""};var c=navigator.userAgent.toLowerCase(),a=-1!==
c.indexOf("macintosh"),b;b=a&&-1!==c.indexOf("khtml")?{91:!0,93:!0}:a&&-1!==c.indexOf("firefox")?{224:!0}:{17:!0};var k={8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"PauseBreak",20:"CapsLock",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",
79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"LeftWindow",92:"RightWindow",93:"Select",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"Multiply",107:"Add",109:"Subtract",110:"DecimalPoint",111:"Divide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:"SemiColon",187:"EqualSign",
188:"Comma",189:"Dash",190:"Period",191:"ForwardSlash",192:"GraveAccent",219:"OpenBracket",220:"Backslash",221:"CloseBracket",222:"SingleQuote"}})(eventjs);Array.isArray=Array.isArray||function(q){return q&&"[object Array]"===Object.prototype.toString.call(q)};Array.prototype.every=Array.prototype.every||function(q,e){for(var c=0,a=this.length;c<a&&q.call(e||window,this[c],c,this);++c);return c===a};
Array.prototype.filter=Array.prototype.filter||function(q,e){for(var c=[],a=0,b=this.length,k;a<b;++a)k=this[a],q.call(e||window,k,a,this)&&c.push(k);return c};Array.prototype.forEach=Array.prototype.forEach||function(q,e){for(var c=0,a=this.length;c<a;++c)q.call(e||window,this[c],c,this)};Array.prototype.indexOf=Array.prototype.indexOf||function(q){for(var e=0,c=this.length;e<c;++e)if(this[e]===q)return e;return-1};
Array.prototype.lastIndexOf=Array.prototype.lastIndexOf||function(q){for(var e=this.length-1;-1<e;--e)if(this[e]===q)return e;return-1};Array.prototype.map=Array.prototype.map||function(q,e){for(var c=[],a=0,b=this.length;a<b;++a)c.push(q.call(e||window,this[a],a,this));return c};Array.prototype.reduce=Array.prototype.reduce||function(q,e){for(var c=e||0,a=0,b=this.length;a<b;++a)c=q.call(window,c,this[a],a,this);return c};
Array.prototype.reduceRight=Array.prototype.reduceRight||function(q,e){for(var c=e||0,a=this.length-1;-1<a;--a)c=q.call(window,c,this[a],a,this);return c};Array.prototype.some=Array.prototype.some||function(q,e){for(var c=0,a=this.length;c<a&&!q.call(e||window,this[c],c,this);++c);return c===a};Array.prototype.concat=Array.prototype.concat||function(q){for(var e=0;e<q.length;e++)this.push(q[e]);return this};
if(!window.btoa||!window.atob){var base64={PADCHAR:"=",ALPHA:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",getbyte64:function(q,e){var c=base64.ALPHA.indexOf(q.charAt(e));if(-1==c)throw"Cannot decode base64";return c},decode:function(q){q=""+q;var e=base64.getbyte64,c,a,b,k=q.length;if(0==k)return q;if(0!=k%4)throw"Cannot decode base64";c=0;q.charAt(k-1)==base64.PADCHAR&&(c=1,q.charAt(k-2)==base64.PADCHAR&&(c=2),k-=4);var u=[];for(a=0;a<k;a+=4)b=e(q,a)<<18|e(q,a+1)<<12|e(q,a+
2)<<6|e(q,a+3),u.push(String.fromCharCode(b>>16,b>>8&255,b&255));switch(c){case 1:b=e(q,a)<<18|e(q,a+1)<<12|e(q,a+2)<<6;u.push(String.fromCharCode(b>>16,b>>8&255));break;case 2:b=e(q,a)<<18|e(q,a+1)<<12,u.push(String.fromCharCode(b>>16))}return u.join("")},getbyte:function(q,e){var c=q.charCodeAt(e);if(255<c)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return c},encode:function(q){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var e=base64.PADCHAR,c=base64.ALPHA,a=base64.getbyte,
b,k,u=[];q=""+q;var m=q.length-q.length%3;if(0==q.length)return q;for(b=0;b<m;b+=3)k=a(q,b)<<16|a(q,b+1)<<8|a(q,b+2),u.push(c.charAt(k>>18)),u.push(c.charAt(k>>12&63)),u.push(c.charAt(k>>6&63)),u.push(c.charAt(k&63));switch(q.length-m){case 1:k=a(q,b)<<16;u.push(c.charAt(k>>18)+c.charAt(k>>12&63)+e+e);break;case 2:k=a(q,b)<<16|a(q,b+1)<<8,u.push(c.charAt(k>>18)+c.charAt(k>>12&63)+c.charAt(k>>6&63)+e)}return u.join("")}};window.btoa=base64.encode;window.atob=base64.decode}
(function(){function q(a){this._element=a;if(a.className!=this._classCache&&(this._classCache=a.className)){a=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);var d;for(d=0;d<a.length;d++)b.call(this,a[d])}}function e(a,b,k){Object.defineProperty?Object.defineProperty(a,b,{get:k}):a.__defineGetter__(b,k)}if(!("undefined"===typeof window.Element||"classList"in document.documentElement)){var c=Array.prototype,a=c.slice,b=c.push,k=c.splice,u=c.join;q.prototype={add:function(k){this.contains(k)||
(b.call(this,k),k=a.call(this,0),this._element.className=k.join(" "))},contains:function(a){return-1!==Array.prototype.indexOf.call(this,a)},item:function(a){return this[a]||null},remove:function(b){b=Array.prototype.indexOf.call(this,b);-1!==b&&(k.call(this,b,1),b=a.call(this,0),this._element.className=b.join(" "))},toString:function(){return u.call(this," ")},toggle:function(a){this.contains(a)?this.remove(a):this.add(a);return this.contains(a)}};window.DOMTokenList=q;e(Element.prototype,"classList",
function(){return new q(this)})}})();
window.WebKitCSSMatrix?window.CSSMatrix=WebKitCSSMatrix:function(){function q(){var b=[].slice.call(arguments);if(b.length)for(var k=b.length;k--;)Math.abs(b[k])<a&&(b[k]=0);c(this);if(16==b.length)this.m11=this.a=b[0],this.m12=this.b=b[1],this.m13=b[2],this.m14=b[3],this.m21=this.c=b[4],this.m22=this.d=b[5],this.m23=b[6],this.m24=b[7],this.m31=b[8],this.m32=b[9],this.m33=b[10],this.m34=b[11],this.m41=this.e=b[12],this.m42=this.f=b[13],this.m43=b[14],this.m44=b[15];else if(6==b.length)this.m11=this.a=
b[0],this.m12=this.b=b[1],this.m21=this.c=b[2],this.m22=this.d=b[3],this.m41=this.e=b[4],this.m42=this.f=b[5];else if("string"==typeof b[0])this.setMatrixValue(b[0]);else if(0<b.length)throw new TypeError("Invalid Matrix Value");}function e(a,k){return new q(k.m11*a.m11+k.m12*a.m21+k.m13*a.m31+k.m14*a.m41,k.m11*a.m12+k.m12*a.m22+k.m13*a.m32+k.m14*a.m42,k.m11*a.m13+k.m12*a.m23+k.m13*a.m33+k.m14*a.m43,k.m11*a.m14+k.m12*a.m24+k.m13*a.m34+k.m14*a.m44,k.m21*a.m11+k.m22*a.m21+k.m23*a.m31+k.m24*a.m41,k.m21*
a.m12+k.m22*a.m22+k.m23*a.m32+k.m24*a.m42,k.m21*a.m13+k.m22*a.m23+k.m23*a.m33+k.m24*a.m43,k.m21*a.m14+k.m22*a.m24+k.m23*a.m34+k.m24*a.m44,k.m31*a.m11+k.m32*a.m21+k.m33*a.m31+k.m34*a.m41,k.m31*a.m12+k.m32*a.m22+k.m33*a.m32+k.m34*a.m42,k.m31*a.m13+k.m32*a.m23+k.m33*a.m33+k.m34*a.m43,k.m31*a.m14+k.m32*a.m24+k.m33*a.m34+k.m34*a.m44,k.m41*a.m11+k.m42*a.m21+k.m43*a.m31+k.m44*a.m41,k.m41*a.m12+k.m42*a.m22+k.m43*a.m32+k.m44*a.m42,k.m41*a.m13+k.m42*a.m23+k.m43*a.m33+k.m44*a.m43,k.m41*a.m14+k.m42*a.m24+k.m43*
a.m34+k.m44*a.m44)}function c(a){a.m11=a.a=1;a.m12=a.b=0;a.m13=0;a.m14=0;a.m21=a.c=0;a.m22=a.d=1;a.m23=0;a.m24=0;a.m31=0;a.m32=0;a.m33=1;a.m34=0;a.m41=a.e=0;a.m42=a.f=0;a.m43=0;a.m44=1;return a}var a=1E-6;q.prototype.setMatrixValue=function(a){var k,e=[],m=/^matrix3d\((.*)\)/;a=String(a).trim();c(this);if(/^none$/.test(a))return this;e=a.replace(/^.*\((.*)\)$/g,"$1").split(/\s*,\s*/);for(k=e.length;k--;)e[k]=parseFloat(e[k]);if(/^matrix\((.*)\)/.test(a)&&6===e.length)this.m11=this.a=e[0],this.m12=
this.b=e[2],this.m41=this.e=e[4],this.m21=this.c=e[1],this.m22=this.d=e[3],this.m42=this.f=e[5];else if(m.test(a)&&16===e.length)this.m11=this.a=e[0],this.m12=this.b=e[1],this.m13=e[2],this.m14=e[3],this.m21=this.c=e[4],this.m22=this.d=e[5],this.m23=e[6],this.m24=e[7],this.m31=e[8],this.m32=e[9],this.m33=e[10],this.m34=e[11],this.m41=this.e=e[12],this.m42=this.f=e[13],this.m43=e[14],this.m44=e[15];else throw new TypeError("Invalid Matrix Value");return this};q.prototype.multiply=function(a){return e(this,
a)};q.prototype.inverse=function(){throw Error("the inverse() method is not implemented (yet).");};q.prototype.translate=function(a,k,c){"undefined"==typeof c&&(c=0);var m=new q;m.m41=m.e=a;m.m42=m.f=k;m.m43=c;return e(this,m)};q.prototype.scale=function(a,k,c){"undefined"==typeof k&&(k=a);"undefined"==typeof c&&(c=1);var m=new q;m.m11=m.a=a;m.m22=m.d=k;m.m33=c;return e(this,m)};q.prototype.rotate=function(a,k,c){"undefined"==typeof k&&(k=a);"undefined"==typeof c&&(c=a);var m,d;a*=Math.PI/180;m=Math.PI/
180*k;d=Math.PI/180*c;c=Math.cos(a);a=-Math.sin(a);k=Math.cos(m);m=-Math.sin(m);var x=Math.cos(d);d=-Math.sin(d);var p=new q;p.m11=p.a=k*x;p.m12=p.b=-k*d;p.m13=m;p.m21=p.c=a*m*x+c*d;p.m22=p.d=c*x-a*m*d;p.m23=-a*k;p.m31=a*d-c*m*x;p.m32=a*x+c*m*d;p.m33=c*k;return e(this,p)};q.prototype.rotateAxisAngle=function(a,k,c,m){"undefined"==typeof k&&(k=a);"undefined"==typeof c&&(c=a);var d;d=Math.PI/360*m;m=Math.sin(d);d=Math.cos(d);var x=m*m,p=Math.sqrt(a*a+k*k+c*c);0===p?(k=a=0,c=1):(a/=p,k/=p,c/=p);var p=
a*a,w=k*k,r=c*c,v=new q;v.m11=v.a=1-2*(w+r)*x;v.m12=v.b=2*(a*k*x+c*m*d);v.m13=2*(a*c*x-k*m*d);v.m21=v.c=2*(k*a*x-c*m*d);v.m22=v.d=1-2*(r+p)*x;v.m23=2*(k*c*x+a*m*d);v.m31=2*(c*a*x+k*m*d);v.m32=2*(c*k*x-a*m*d);v.m33=1-2*(p+w)*x;v.m14=v.m24=v.m34=0;v.m41=v.e=v.m42=v.f=v.m43=0;v.m44=1;return e(this,v)};q.prototype.toString=function(){var a,c=function(a){return a.toFixed(6)},e;e=this.m13||this.m14||this.m23||this.m24||this.m31||this.m32||1!==this.m33||this.m34||this.m43||1!==this.m44?!1:!0;e&&(a=!0);return a?
"matrix("+[this.a,this.b,this.c,this.d,this.e,this.f].map(c).join(", ")+")":"matrix3d("+[this.m11,this.m12,this.m13,this.m14,this.m21,this.m22,this.m23,this.m24,this.m31,this.m32,this.m33,this.m34,this.m41,this.m42,this.m43,this.m44].map(c).join(", ")+")"};q.prototype.skewX=function(a){a*=Math.PI/180;var c=new q;c.m21=c.c=Math.tan(a);return e(c,this)};q.prototype.skewY=function(a){a*=Math.PI/180;var c=new q;c.m12=c.b=Math.tan(a);return e(c,this)};"undefined"!==typeof exports?("undefined"!==typeof module&&
module.exports&&(exports=module.exports=q),exports.CSSMatrix=q):window.CSSMatrix=q}();
(function(){var q=function(c,a,b,k){this.x=c?c:0;this.y=a?a:0;this.z=b?b:0;this.w=k?k:0;this.checkValues=function(){this.x=this.x?this.x:0;this.y=this.y?this.y:0;this.z=this.z?this.z:0;this.w=this.w?this.w:0};this.length=function(){this.checkValues();return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};this.normalise=function(){var a=this.length();return new q(this.x/a,this.y/a,this.z/a)};this.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w};this.cross=function(a){return new q(this.y*
a.z-this.z*a.y,this.z*a.x-this.x*a.z,this.x*a.y-this.y*a.x)};this.combine=function(a,b,d){return new q(b*this.x+d*a.x,b*this.y+d*a.y,b*this.z+d*a.z)}},e=function(c){c=c||{};var a={perspective:null,translate:null,skew:null,scale:null,rotate:null},b;for(b in a)this[b]=c[b]?c[b]:new q};CSSMatrix.prototype.transformVector=function(c){return new q(this.m11*c.x+this.m12*c.y+this.m13*c.z,this.m21*c.x+this.m22*c.y+this.m23*c.z,this.m31*c.x+this.m32*c.y+this.m33*c.z)};CSSMatrix.prototype.transpose=function(){for(var c=
new CSSMatrix,a=0,b=0,a=0;2>=a;a++)for(b=a+1;3>=b;b++)c["m"+(a+1)+(b+1)]=this["m"+(b+1)+(a+1)],c["m"+(b+1)+(a+1)]=this["m"+(a+1)+(b+1)];return c};CSSMatrix.prototype.determinant=function(){return this.m14*this.m23*this.m32*this.m41-this.m13*this.m24*this.m32*this.m41-this.m14*this.m22*this.m33*this.m41+this.m12*this.m24*this.m33*this.m41+this.m13*this.m22*this.m34*this.m41-this.m12*this.m23*this.m34*this.m41-this.m14*this.m23*this.m31*this.m42+this.m13*this.m24*this.m31*this.m42+this.m14*this.m21*
this.m33*this.m42-this.m11*this.m24*this.m33*this.m42-this.m13*this.m21*this.m34*this.m42+this.m11*this.m23*this.m34*this.m42+this.m14*this.m22*this.m31*this.m43-this.m12*this.m24*this.m31*this.m43-this.m14*this.m21*this.m32*this.m43+this.m11*this.m24*this.m32*this.m43+this.m12*this.m21*this.m34*this.m43-this.m11*this.m22*this.m34*this.m43-this.m13*this.m22*this.m31*this.m44+this.m12*this.m23*this.m31*this.m44+this.m13*this.m21*this.m32*this.m44-this.m11*this.m23*this.m32*this.m44-this.m12*this.m21*
this.m33*this.m44+this.m11*this.m22*this.m33*this.m44};CSSMatrix.prototype.decompose=function(){var c=new CSSMatrix(this.toString()),a,b,k,u,m;if(0===c.m33)return new e((new CSSMatrix).decompose());for(m=1;4>=m;m++)for(j=1;4>=j;j++)c["m"+m+j]/=c.m44;for(m=1;3>=m;m++)c["m"+m+"4"]=0;c.m44=1;if(0===c.determinant())return new e((new CSSMatrix).decompose());0!=c.m14||0!=c.m24||0!=c.m34?(a=new q(c.m14,c.m24,c.m34,c.m44),b=c.inverse(),b=b.transpose(),a=b.transformVector(a),c.m14=c.m24=c.m34=0,c.m44=1):a=
new q(0,0,0,1);b=new q(c.m41,c.m42,c.m43);c.m41=0;c.m42=0;c.m43=0;k=[new q,new q,new q];for(m=1;3>=m;m++)k[m-1].x=c["m"+m+"1"],k[m-1].y=c["m"+m+"2"],k[m-1].z=c["m"+m+"3"];c=new q;u=new q;c.x=k[0].length();k[0]=k[0].normalise();u.x=k[0].dot(k[1]);k[1]=k[1].combine(k[0],1,-u.x);c.y=k[1].length();k[1]=k[1].normalise();u.x/=c.y;u.y=k[0].dot(k[2]);k[2]=k[2].combine(k[0],1,-u.y);u.z=k[1].dot(k[2]);k[2]=k[2].combine(k[1],1,-u.z);c.z=k[2].length();k[2]=k[2].normalise();u.y/=c.z;u.y/=c.z;m=k[1].cross(k[2]);
if(0>k[0].dot(m))for(m=0;3>m;m++)c.x*=-1,k[m].x*=-1,k[m].y*=-1,k[m].z*=-1;m=new q;m.y=Math.asin(-k[0].z);0!=Math.cos(m.y)?(m.x=Math.atan2(k[1].z,k[2].z),m.z=Math.atan2(k[0].y,k[0].x)):(m.x=Math.atan2(-k[2].x,k[1].y),m.z=0);return new e({perspective:a,translate:b,skew:u,scale:c,rotate:m})}})();
(function(){function q(a,b,c){var u=document.createElement("canvas");e(a,u,b,c);return u.toDataURL("image/jpeg",b.quality||.8)}function e(a,b,c,e){var m=a.naturalWidth,d=a.naturalHeight,x=c.width,p=c.height,w=b.getContext("2d");w.save();c=c.orientation;switch(c){case 5:case 6:case 7:case 8:b.width=p;b.height=x;break;default:b.width=x,b.height=p}switch(c){case 2:w.translate(x,0);w.scale(-1,1);break;case 3:w.translate(x,p);w.rotate(Math.PI);break;case 4:w.translate(0,p);w.scale(1,-1);break;case 5:w.rotate(.5*
Math.PI);w.scale(1,-1);break;case 6:w.rotate(.5*Math.PI);w.translate(0,-p);break;case 7:w.rotate(.5*Math.PI);w.translate(x,-p);w.scale(-1,1);break;case 8:w.rotate(-.5*Math.PI),w.translate(-x,0)}b=a.naturalWidth;1048576<b*a.naturalHeight?(c=document.createElement("canvas"),c.width=c.height=1,c=c.getContext("2d"),c.drawImage(a,-b+1,0),b=0===c.getImageData(0,0,1,1).data[3]):b=!1;b&&(m/=2,d/=2);b=document.createElement("canvas");b.width=b.height=1024;c=b.getContext("2d");if(e){e=d;var r=document.createElement("canvas");
r.width=1;r.height=e;r=r.getContext("2d");r.drawImage(a,0,0);for(var r=r.getImageData(0,0,1,e).data,v=0,l=e,f=e;f>v;)0===r[4*(f-1)+3]?l=f:v=f,f=l+v>>1;e=f/e;e=0===e?1:e}else e=1;x=Math.ceil(1024*x/m);p=Math.ceil(1024*p/d/e);for(r=e=0;e<d;){for(l=v=0;v<m;)c.clearRect(0,0,1024,1024),c.drawImage(a,-v,-e),w.drawImage(b,0,0,1024,1024,l,r,x,p),v+=1024,l+=x;e+=1024;r+=p}w.restore()}function c(a){if(window.Blob&&a instanceof Blob){var b=new Image,c=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&
window.webkitURL.createObjectURL?window.webkitURL:null;if(!c)throw Error("No createObjectURL function found to create blob url");b.src=c.createObjectURL(a);this.blob=a;a=b}if(!a.naturalWidth&&!a.naturalHeight){var e=this;a.onload=function(){var a=e.imageLoadListeners;if(a){e.imageLoadListeners=null;for(var b=0,c=a.length;b<c;b++)a[b]()}};this.imageLoadListeners=[]}this.srcImage=a}c.prototype.render=function(a,b,c){if(this.imageLoadListeners){var u=this;this.imageLoadListeners.push(function(){u.render(a,
b,c)})}else{b=b||{};var m=this.srcImage,d=m.src,x=d.length,p=m.naturalWidth,m=m.naturalHeight,w=b.width,r=b.height,v=b.maxWidth,l=b.maxHeight,d=this.blob&&"image/jpeg"===this.blob.type||0===d.indexOf("data:image/jpeg")||d.indexOf(".jpg")===x-4||d.indexOf(".jpeg")===x-5;w&&!r?r=m*w/p<<0:r&&!w?w=p*r/m<<0:(w=p,r=m);v&&w>v&&(w=v,r=m*w/p<<0);l&&r>l&&(r=l,w=p*r/m<<0);var p={width:w,height:r},f;for(f in b)p[f]=b[f];f=a.tagName.toLowerCase();"img"===f?a.src=q(this.srcImage,p,d):"canvas"===f&&e(this.srcImage,
a,p,d);if("function"===typeof this.onrender)this.onrender(a);c&&c()}};"function"===typeof define&&define.amd?define([],function(){return c}):this.MegaPixImage=c})();
(function(q){function e(a){if(!(this instanceof e))return new e(a);a||(a={});"number"==typeof a&&(a={frameRate:a});null!=a.useNative||(a.useNative=!0);this.options=a;this.frameRate=a.frameRate||e.FRAME_RATE;this._frameLength=1E3/this.frameRate;this._isCustomFrameRate=this.frameRate!==e.FRAME_RATE;this._timeoutId=null;this._callbacks={};this._tickCounter=this._lastTickTime=0}var c,a;(function(){var b,k=["webkit","moz","ms","o"],u;try{q.top.name,u=q.top}catch(m){u=q}c=u.requestAnimationFrame;a=u.cancelAnimationFrame||
u.cancelRequestAnimationFrame;for(b=0;b<k.length&&!c;b++)c=u[k[b]+"RequestAnimationFrame"],a=u[k[b]+"CancelAnimationFrame"]||u[k[b]+"CancelRequestAnimationFrame"];c&&c(function(){e.hasNative=!0})})();e.FRAME_RATE=60;e.shim=function(a){var c=new e(a);q.requestAnimationFrame=function(a){return c.request(a)};q.cancelAnimationFrame=function(a){return c.cancel(a)};return c};e.now=Date.now||function(){return(new Date).getTime()};e.navigationStart=e.now();e.perfNow=function(){return q.performance&&q.performance.now?
q.performance.now():e.now()-e.navigationStart};e.hasNative=!1;e.prototype.request=function(a){var k=this,u;++this._tickCounter;if(e.hasNative&&k.options.useNative&&!this._isCustomFrameRate)return c(a);if(!a)throw new TypeError("Not enough arguments");null==this._timeoutId&&(u=this._frameLength+this._lastTickTime-e.now(),0>u&&(u=0),this._timeoutId=q.setTimeout(function(){var a;k._lastTickTime=e.now();k._timeoutId=null;++k._tickCounter;for(a in k._callbacks)if(k._callbacks[a]){if(e.hasNative&&k.options.useNative)c(k._callbacks[a]);
else k._callbacks[a](e.perfNow());delete k._callbacks[a]}},u));this._callbacks[this._tickCounter]=a;return this._tickCounter};e.prototype.cancel=function(b){e.hasNative&&this.options.useNative&&a(b);delete this._callbacks[b]};"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):q.AnimationFrame=e;q.requestAnimationframe&&q.cancelAnimationFrame||e.shim()})(window);
(function(q){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL||window.oURL;window.Blob=window.Blob||window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder;(function(e){for(var c,a={},b=function(){},k=["memory"],u="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");c=
k.pop();)e[c]=e[c]||a;for(;c=u.pop();)e[c]=e[c]||b})(q.console=q.console||{});q.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(c){c=(this.parentNode||this.document).querySelectorAll(c);for(var a=-1;c[++a]&&c[a]!=this;);return!!c[a]}}(Element.prototype);Date.now||(Date.now=function(){return(new Date).getTime()})})(self);
(function(q){var e=function(a,b){sketch.util.require("./inc/"+(b||"shim")+"/"+a);window.eventjs_stallOnReady=!0};(function(){var a=document.createElement("DIV");a.innerHTML="\x3c!--[if lte IE 9]><I></I><![endif]--\x3e";0<a.getElementsByTagName("I").length&&e("IE8-HTML5.js")})();(function(){var a=document.createElement("canvas");a.getContext&&a.getContext("2d")||e("flashcanvas.js","FlashCanvasPro")})();window.ArrayBuffer||(e("TypedArray.js"),e("downloadify.js","File"));window.Blob||e("Blob.js");window.requestFileSystem||
window.webkitRequestFileSystem||e("requestFileSystem.js");window.atob&&window.btoa||e("Base64.js");window.requestAnimationFrame||e("requestAnimationFrame.js");window.getComputedStyle||e("getComputedStyle.js");window.JSON&&window.JSON.parse||e("JSON.js");document.querySelector||e("querySelector.js");document.documentElement.classList||e("ClassList.js");"undefined"===typeof window.innerHeight&&e("dimensions.js");try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch(c){"undefined"!==
typeof chrome&&"undefined"!==typeof chrome.storage||e("localStorage.js")}})(self);
(function(q){q.URL=q.URL||q.webkitURL;if(q.Blob&&q.URL)try{new Blob;return}catch(e){}var c=q.BlobBuilder||q.WebKitBlobBuilder||q.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},e=function(a,f,b){this.data=a;this.size=a.length;this.type=f;this.encoding=b},m=c.prototype,d=e.prototype,x=a.FileReaderSync,p=function(a){this.code=this[this.name=a]},w="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
r=w.length,v=a.URL||a.webkitURL||a,l=v.createObjectURL,f=v.revokeObjectURL,h=v,g=a.btoa,y=a.atob,z=a.ArrayBuffer,s=a.Uint8Array;for(e.fake=d.fake=!0;r--;)p.prototype[w[r]]=r+1;v.createObjectURL||(h=a.URL={});h.createObjectURL=function(a){var f=a.type;null===f&&(f="application/octet-stream");if(a instanceof e)return f="data:"+f,"base64"===a.encoding?f+";base64,"+a.data:"URI"===a.encoding?f+","+decodeURIComponent(a.data):g?f+";base64,"+g(a.data):f+","+encodeURIComponent(a.data);if(l)return l.call(v,
a)};h.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&f&&f.call(v,a)};m.append=function(a){var f=this.data;if(s&&(a instanceof z||a instanceof s)){var g="";a=new s(a);for(var h=0,l=a.length;h<l;h++)g+=String.fromCharCode(a[h]);f.push(g)}else if("Blob"===b(a)||"File"===b(a))if(x)g=new x,f.push(g.readAsBinaryString(a));else throw new p("NOT_READABLE_ERR");else a instanceof e?"base64"===a.encoding&&y?f.push(y(a.data)):"URI"===a.encoding?f.push(decodeURIComponent(a.data)):"raw"===a.encoding&&
f.push(a.data):("string"!==typeof a&&(a+=""),f.push(unescape(encodeURIComponent(a))))};m.getBlob=function(a){arguments.length||(a=null);return new e(this.data.join(""),a,"raw")};m.toString=function(){return"[object BlobBuilder]"};d.slice=function(a,f,b){var g=arguments.length;3>g&&(b=null);return new e(this.data.slice(a,1<g?f:this.data.length),b,this.encoding)};d.toString=function(){return"[object Blob]"};d.close=function(){this.size=0;delete this.data};return c}(q);q.Blob=function(a,b){var e=b?b.type||
"":"",u=new c;if(a)for(var m=0,d=a.length;m<d;m++)u.append(a[m]);return u.getBlob(e)}})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);
(function(q){var e=q.Uint8Array,c=(q=q.HTMLCanvasElement)&&q.prototype,a=/\s*;\s*base64\s*(?:;|$)/i,b="toDataURL",k;e&&(k=new e([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]));q&&!c.toBlob&&(c.toBlob=function(c,m){m||(m="image/png");if(this.mozGetAsFile)c(this.mozGetAsFile("canvas",m));else if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(m))c(this.msToBlob());
else{var d=Array.prototype.slice.call(arguments,1),x=this[b].apply(this,d),p=x.indexOf(","),d=x.substring(p+1),x=a.test(x.substring(0,p)),w;if(Blob.fake)w=new Blob,w.encoding=x?"base64":"URI",w.data=d,w.size=d.length;else if(e)if(x){w=Blob;for(var x=d.length,p=new e(x/4*3|0),r=0,v=0,l=[0,0],f=0,h=0,g,y;x--;)y=d.charCodeAt(r++),g=k[y-43],255!==g&&void 0!==g&&(l[1]=l[0],l[0]=y,h=h<<6|g,f++,4===f&&(p[v++]=h>>>16,61!==l[1]&&(p[v++]=h>>>8),61!==l[0]&&(p[v++]=h),f=0));w=new w([p],{type:m})}else w=new Blob([decodeURIComponent(d)],
{type:m});c(w)}},c.toBlobHD=c.toDataURLHD?function(){b="toDataURLHD";var a=this.toBlob();b="toDataURL";return a}:c.toBlob);q&&!c.toBlobURL&&(c.toBlobURL=function(a){a=a||function(a){console.log("no callback",a)};this.toBlob(function(b){a(URL.createObjectURL(b))})})})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);document.createElementNS||(document.createElementNS=function(q,e){return document.createElement(e)});
if(!window.chrome||!window.chrome.fileSystem){var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(q){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=q.document,c=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a=!q.externalHost&&"download"in c,b=function(a){var b=e.createEvent("MouseEvents");b.initMouseEvent("click",!0,!1,q,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(b)},k=q.webkitRequestFileSystem,
u=q.requestFileSystem||k||q.mozRequestFileSystem,m=function(a){(q.setImmediate||q.setTimeout)(function(){throw a;},0)},d=0,x=function(a){setTimeout(function(){"string"===typeof a?(q.URL||q.webkitURL||q).revokeObjectURL(a):a.remove()},10)},p=function(a,b,f){b=[].concat(b);for(var h=b.length;h--;){var g=a["on"+b[h]];if("function"===typeof g)try{g.call(a,f||a)}catch(d){m(d)}}},w=function(r,l){var f=this,h=r.type,g=!1,y,z,s=function(){p(f,["writestart","progress","write","writeend"])},e=function(){if(g||
!y)y=(q.URL||q.webkitURL||q).createObjectURL(r);z?z.location.href=y:void 0==q.open(y,"_blank")&&"undefined"!==typeof safari&&(q.location.href=y);f.readyState=f.DONE;s();x(y)},m=function(a){return function(){if(f.readyState!==f.DONE)return a.apply(this,arguments)}},w={create:!0,exclusive:!1},J;f.readyState=f.INIT;l||(l="download");if(a)y=(q.URL||q.webkitURL||q).createObjectURL(r),c.href=y,c.download=l,b(c),f.readyState=f.DONE,s(),x(y);else{q.chrome&&h&&"application/octet-stream"!==h&&(J=r.slice||r.webkitSlice,
r=J.call(r,0,r.size,"application/octet-stream"),g=!0);k&&"download"!==l&&(l+=".download");if("application/octet-stream"===h||k)z=q;u?(d+=r.size,u(q.TEMPORARY,d,m(function(a){a.root.getDirectory("saved",w,m(function(a){var b=function(){a.getFile(l,w,m(function(a){a.createWriter(m(function(b){b.onwriteend=function(b){z.location.href=a.toURL();f.readyState=f.DONE;p(f,"writeend",b);x(a)};b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&e()};["writestart","progress","write","abort"].forEach(function(a){b["on"+
a]=f["on"+a]});b.write(r);f.abort=function(){b.abort();f.readyState=f.DONE};f.readyState=f.WRITING}),e)}),e)};a.getFile(l,{create:!1},m(function(a){a.remove();b()}),m(function(a){a.code===a.NOT_FOUND_ERR?b():e()}))}),e)}),e)):e()}},r=w.prototype;r.abort=function(){this.readyState=this.DONE;p(this,"abort")};r.readyState=r.INIT=0;r.WRITING=1;r.DONE=2;r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null;return function(a,b){return new w(a,b)}}}("undefined"!==typeof self&&
self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&null!==module?module.exports=saveAs:"undefined"!==typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs})}"undefined"===typeof sketch&&(sketch={});"undefined"===typeof sk&&(sk=sketch);
(function(q){q.module=q.module||{};q.module.Namespace=function(e){var c=e.util;sk=e;e.__modified=!1;e.__modifiedFS=!1;e.__modifiedOnline=!1;e.__version="3.6.7";"{{"==e.__version.substr(0,2)&&(e.__version="3.6.3dev");e.doc=e.doc||{};e.docs=e.docs||{};e.api=e.api||{};e.dom=e.dom||{};e.module=e.module||{};e.events=e.events||{};e.fs=e.fs||{};e.gen=e.gen||{};e.io=e.io||{};e.lang=e.lang||{};e.lib=e.lib||{};e.loc=e.loc||{};e.net=e.net||{};e.sidebar=e.sidebar||{};e.server=e.server||{};e.setup=e.setup||{};
e.client=e.client||{io:{}};e.ui=e.ui||{};e.ui.colorPicker=e.ui.colorPicker||{};e.ui.icons=e.ui.icons||{};e.client=e.client||{};e.vector=e.vector||{};(function(){var a=e.feature={};a.debug=!1;a.debugCache=!1;a.debugMouse=!1;a.debugRender=!1;a.kiosk=!1;a.log=!1;a.defaultSketch="new";a.lang="auto";a.prefix="sketch";a.theme="light";a.bruteForce=!0;a.cache257=!1;a.cache2D=!0;a.cacheSVG=!0;a.highRes=!1;a.doc={};a.doc.bounds={};a.doc.center=!0;a.doc.clip={};a.doc.description="made with https://sketch.io/";
a.doc.format="json";a.doc.title="Drawing";a.doc.units="%";a.doc.width=100;a.doc.height=100;a.doc.x=0;a.doc.y=0;a.tools={};a.tools.controls={};a.tools.controls.anchor=void 0;a.tools.controls.spinner=void 0;a.tools.controls.n=void 0;a.tools.controls.s=void 0;a.tools.controls.e=void 0;a.tools.controls.w=void 0;a.tools.controls.ne=void 0;a.tools.controls.se=void 0;a.tools.controls.sw=void 0;a.tools.controls.nw=void 0;a.tools.controls.mouse={};a.tools.controls.mouse.width=14;a.tools.controls.mouse.height=
14;a.tools.controls.mouse.padding=0;a.tools.controls.touch={};a.tools.controls.touch.width=24;a.tools.controls.touch.height=24;a.tools.controls.touch.padding=0;a.tools.controls.useFlip=!0;a.tools.defaultTool="pen";a.tools.defaultHeight=100;a.tools.defaultWidth=100;a.tools.drawBoundingBox=!0;a.tools.drawCenterPoint=!0;a.tools.maxHeight=16384;a.tools.maxWidth=16384;a.tools.minHeight=1;a.tools.minWidth=1;a.tools.movable=!0;a.tools.units="objectBoundingBox";a.tools.usePointInBoundingBox=!0;a.tools.usePointInImageData=
!1;a.tools.usePointInPath=!1;a.tools.usePointNearest=!0;a.tools.select={};a.tools.select.useConfigure=!0;a.tools.text={};a.tools.text.clickToPlace=!1;a.tools.text.dragToPlace=!0;a.tools.text.useSearch="text";a.tools.text.useCanvasRender=!1;a.tools.media={};a.tools.media.useSearch="media";a.tools.shape={};a.tools.brush={};a.canvas={};a.canvas.clip=!0;a.canvas.containerScale=!1;a.canvas.filter=!1;a.canvas.renderWithBackground=!1;a.canvas.saveWithBackground=!0;a.canvas.useGroupBoundingBox=!1;a.canvas.usePixelRatio=
!1;a.canvas.usePixelRatioDesktop=!1;a.zoom={};a.zoom.defaultValue=1;a.zoom.fromCenter=!0;a.zoom.increment=.1;a.zoom.max=100;a.zoom.min=.25;a.zoom.value=1;a.vector={};a.vector.edit=!0;a.vector.record=!0;a.social={};a.social.autoLogout=!1;a.social.autoLogoutTimeout=!1;a.social.setCookie=!0;a.beforeUnloadPrompt=!1;a.cursorCSS=!1;a.preventScroll=!1;a.preventTouch=!1;a.requireAuth=!1;a.windows=!0;a.ui={};a.ui.addToLibrary=!0;a.ui.customRangeBar=!1;a.ui.quickSelect=!1;a.ui.sourceAtopColor="#fff";a.ui.tooltips=
!1;a.sidebar={};a.sidebar.subtool="button";a.io={};a.io.exportDrop=!1;a.io.filePickerIO=!1;a.io.fs=!1;a.io.openDefaultProject=!1;a.io.translateX=0;a.io.translateY=0;a.palette={};a.palette.hexInput=!1;a.palette.closeButton=!1;a.palette.colorPicker=!1;a.palette.eyeDropper=!1;a.palette.grid=!1;a.palette.header="";a.style={};a.style.globalStyle=!1;a.style.globalComposite=!1;a.style.blend=!1;a.style.composite=!1;a.style.color=!0;a.style.gradient=!1;a.style.pattern=!1;a.style.colorMode=!1;a.style.colorNoise=
!1;a.style.lineJoin=!1;a.placement={};a.placement.click=!0;a.placement.drag=!0;a.placement.constrainToCanvas=!1;a.placement.mediaClick=!1;a.placement.mediaDblClick=!1;a.placement.mediaDrag=!1;a.history={};a.history.autoSelect=!1;a.history.bitmap=!1;a.history.limit=!1;a.history.vector=!1;a.sync={};a.sync.image=!1;a.sync.json=!1;a.sync.svg=!1;a.sync.thumb=!1;a.sync.zip=!1;a.sync.hash=!1;a.sync.localRefs=!0;a.sync.maxAssetSize=0;a.sync.maxFileSize=0;a.sync.useDefaultFormat=!1;a.stream={};a.stream.audio=
!1;a.stream.maxFileSize=0;a.stream.sketch=!1;a.stream.sketchLive=!1;a.stream.spectrumAnalysis=!1;a.stream.tech="RTCDataChannel";a.stream.text=!1;a.stream.video=!1;a.stream.videoAtop=!1;a.session={};a.session.path="";a.session.sessionid="";a.session.userid="";a.session.username=""})();(function(){var a=e.attrs={},b=function(a){for(var b={},d=0,c;d<a.length;d++)if(c=a[d]){var e=c[0].toLowerCase()+c.substr(1);b[e]=c}return b},k=function(a,c){c=b(c);(e.attrs[a]=function(b){var e=this;(this.setValue=function(b){if("undefined"!==
typeof b){if("string"===typeof b){var d=c,r=document.createElement("span").style;r[a]=b;for(var v in d)b=r[a+d[v]],""!==b&&"initial"!==b&&(e[v]=b)}else for(d in c)"undefined"!==typeof b[d]&&(e[d]=b[d]);return e}})(b)}).type=a};k("background","Color Image Repeat Attachment Position Clip Origin Size".split(" "));k("border","Width Style Color Radius ImageSource ImageSlice ImageWidth ImageOutset ImageRepeat".split(" "));k("padding",["Top","Left","Bottom","Right"]);k("margin",["Top","Left","Bottom","Right"]);
a.create=function(b,c){if(a[b])return new a[b](c);switch(b){case "boolean":return!1;case "string":return"";case "number":return 0}};a.update=function(b,c,d){return d&&d.setValue?d.setValue(c):a.create(b,c)};a.__basicObject={bbox:"object",composite:"string",groupId:"string",opacity:"number",seed:"number",type:"string",visible:"boolean"};a.__styledObject=c.mixin(a.__basicObject,{filter:"filter",fill:"style",stroke:"style",border:"border",background:"background",margin:"margin",padding:"padding"});a.__rules=
{movable:"boolean",rotatable:"boolean",scalable:"boolean",selectable:"boolean",useAlignX:"string",useAlignY:"string",useBackgroundOverlay:"boolean",useConstrain:"boolean",useConstrainX:"boolean",useConstrainY:"boolean",useControlNE:"boolean",useControlNW:"boolean",useControlSE:"boolean",useControlSW:"boolean",useHighRes:"boolean",useMaxCopies:"number",useMaxHeight:"number",useMaxWidth:"number",useMinHeight:"number",useMinWidth:"number",usePixelData:"boolean",useStickToBack:"boolean",useStickToFront:"boolean",
useStretchToEdge:"boolean",useStretchToFit:"boolean"}})()};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Namespace)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Document=function(e){e=e||sketch;var c="undefined"===typeof window?{}:window,a=this,b=e.dom,k=e.feature,u=e.style,m=e.ui,d=e.util;a.idx=e.module.Document.idx++;a.__editing=!1;a.__interacting=!1;a.__rendering=!1;a.__preloading=!1;a.on={};a.tool={};e.docs[a.idx]=a;var x=a.canvas2d={x:0,y:0,width:0,height:0,orientX:0,orientY:0},p=a.contexts={layer0:"z-index: 0;",draw:"z-index: 1;",active:"z-index: 2;",cache:"display: none;"};a.container=c.document;a.dpi=72;
a.pixelRatio=c.devicePixelRatio||1;a.zoom=1;a.units="%";a.x=0;a.y=0;a.width=100;a.height=100;a.scrollLeft=0;a.scrollTop=0;a.pages={};a.pages.data=[];a.pages.current=0;a.pages.length=0;a.format="json";a.title=k.doc.title;a.description=k.doc.description;a.uuid=d.uuid();a.clip={};a.bounds={width:0,height:0,style:{globalCompositeOperation:"",fillStyle:"",strokeStyle:"",lineWidth:0}};a.viewport={width:0,height:0,clip:{}};a.getBounds=function(b){b=b||{};b.dpi=b.dpi||72;b.scale=b.scale||1;var d=a.getViewport(),
l=a.bounds;"%"===a.units?(l.width=(a.width||100)/100*d.width,l.height=(a.height||100)/100*d.height):(l.width=a.width,l.height=a.height);b=b.dpi/72*b.scale;l.width=Math.ceil(l.width*b);l.height=Math.ceil(l.height*b);return l};a.getViewport=function(){var d=b.measure(a.scrollElement);a.viewport.width=d.width/d.scaleX;a.viewport.height=d.height/d.scaleY;return a.viewport};a.setMetrics=function(b){a.x=isFinite(b.x)?b.x:a.x||0;a.y=isFinite(b.y)?b.y:a.y||0;a.orient.reset();a.setSize(b.width||a.width,b.height||
a.height,b.units||a.units,b.dpi||a.dpi);a.setScroll(b.scrollLeft||a.scrollLeft,b.scrollTop||a.scrollTop);a.orient.reset();a.orient.setZoom(b.zoom||1)};a.getMetrics=function(){var b={};b.units=a.units;b.x=a.x;b.y=a.y;b.width=a.width;b.height=a.height;b.scrollLeft=a.scrollLeft;b.scrollTop=a.scrollTop;b.zoom=a.zoom;return b};a.mixinDefs=function(a,b){var l={uuid:"string",title:"string",description:"string",background:"string",format:"string",units:"string",dpi:"number",x:"number",y:"number",width:"number",
height:"number",pages:"object",clip:"object"},f;for(f in l)void 0!==a[f]&&(b[f]=a[f]);return b};u&&(a.setFont=u.setFont,a.setFill=u.setFill,a.setStroke=u.setStroke);a.setPixelRatio=function(b){a.pixelRatio=b;a.scene.setDirtyCache(a.scene.children);a.setCanvasSize();a.orient.reset();a.orient.render("root.setPixelRatio")};a.setZoom=function(b){a.orient.setZoom(b)};a.setClip=function(b,d){b.path?a.setClipPath(b,d):a.setClipRect(b,d)};a.setClipRect=function(b,d){a.clip=b};a.setClipPath=function(b,d){var l=
new e.vector.Transform;l.scale(d,d);l.flatten(b.path);a.clip={};a.clip.path=b.path;a.clip.style=b.style};a.setSize=function(b,d,l,f){b||d?"%"===l?(a.dpi=f||72,a.width=b,a.height=d,a.units="%"):(a.dpi=f||72,a.width=b,a.height=d,a.units="px"):(a.dpi=72,a.width=100,a.height=100,a.units="%");a.setCanvasSize()};a.setCanvasSize=function(b,v){a.render.clipped=!1;var l=a.pixelRatio,f=a.container,h=f.parentNode;h.style.overflow="auto";k.canvas.usePixelRatioDesktop&&!1===e.client.mobile?a.pixelRatio=c.devicePixelRatio:
k.canvas.usePixelRatio&&(a.pixelRatio=c.devicePixelRatio);"%"===a.units&&(f.style.width=h.style.width=f.style.height=h.style.height="100%",h.scrollTop=0);var g=a.getViewport(),f=g.width,g=g.height,y=a.setBounds(b,v);"%"===a.units?h.style.overflow="hidden":(h.style.overflowX=y.targetWidth<=f?"hidden":"auto",h.style.overflowY=y.targetHeight<=g?"hidden":"auto",y.targetWidth<=f&&y.targetHeight<=g&&a.scrollReset());k.canvas.containerScale&&!a.render.forOutput?(b=Math.min(y.targetWidth,f),v=Math.min(y.targetHeight,
g)):(b=y.targetWidth,v=y.targetHeight,h.scrollTop=0);x.width=b;x.height=v;if(g=!k.vector.edit&&p.cache)p.cache.width=b,p.cache.height=v,p.cache.ctx.drawImage(p.layer0,0,0);var f=a.container,z;for(z in p)y="cache"===z,g&&y||(h=p[z],"string"===typeof h&&(h=d.Canvas(1,1),h.style.cssText=p[z]),h.width=b*l,h.height=v*l,h.className="layer-"+z,p[z]=h,y||(h.style.width=x.width+"px",h.style.height=x.height+"px",f.appendChild(h)));g&&(l=p.layer0,h=l.ctx,d.Canvas.blip(l,b,v),h.drawImage(p.cache,0,0),l=p.cache,
d.Canvas.blip(l,b,v));if(l=a.scene&&a.scene.children){h=a.selection.items;for(z in h)if(h=l[z])h.dirtyControl=!0;a.scene.setDirtyBounds(a.scene.children);e.windows&&e.windows.restore()}};a.setPage=function(b,d){var l=a.pages,f=Math.min(l.length-1,Math.max(0,d?l.current+b:b));l.current=f;for(var h=0,g=0;g<f;g++)h+=l.data[g].height;a.scrollElement.scrollTop=h};a.setScroll=function(b,d){var l=a.scrollElement;l.scrollLeft=isFinite(b)?b:0;l.scrollTop=isFinite(d)?d:0};a.scrollReset=function(){var b=a.scrollElement;
b.scrollTop=0;b.scrollLeft=0;a.scrollTop=0;a.scrollLeft=0};a.scrollElementCSS=function(){var b=a.pixelRatio,d=a.scrollLeft,l=a.scrollTop,f=a.orient.scale,h=a.orient.getValues(),g=a.setBounds(),y=a.styleElement.style;y.width=f*g.width+"px";y.height=f*g.height+"px";y.left=(h.x+d*(1-f))/b+"px";y.top=(h.y+l*(1-f))/b+"px";w()};a.setBounds=function(d,c){var l=a.zoom,f=a.container,h=a.getBounds();d=d||h.width;c=c||h.height;d&&c||(h=b.measure(f),d=h.width,c=h.height);var l=Math.max(1,l),h=a.getViewport(),
g=Math.max(h.width,d),y=Math.max(h.height,c),g=g*l,l=y*l;"%"!==a.units&&(k.canvas.containerScale?(y=Math.min(g,h.width),h=Math.min(l,h.height)):(y=g,h=l),f.style.width=y+"px",f.style.height=h+"px");return{targetWidth:g,targetHeight:l,width:d,height:c}};a.setContainer=function(d){var c="string"===typeof d?d:d.container||document.body;"string"===typeof c&&(c=document.querySelector(c));var l=c.classList.contains("sk-canvas-content"),f=c.classList.contains("sk-canvas");c.querySelector(".sk-canvas")||
l||f||(l=c,f=b.create('<div class="sk-viewport"></div>'),c=b.create('<div class="sk-canvas"></div>'),f.appendChild(c),l.appendChild(f));eventjs.add(c,"mouseup",function(b){e.setDocument(a.idx)});l=c.querySelector(".sk-dummy-canvas");l||(l=document.createElement("div"),l.className="sk-dummy-canvas",l.setAttribute("data-pid",a.idx),e.client.mobile||(l.contentEditable=!0),c.appendChild(l));a.focusElement=d.focusElement||l;a.styleElement=l;a.scrollElement=d.scrollElement||c.parentNode||c;return a.container=
c};a.setCursor=function(a){var b=p.active;b&&(b.style.cursor=a||"")};a.setBackground=function(b,c,l){"string"===typeof b&&(b={src:b});if(!b.src)return console.warn("setBackground invalid params");var f=b.src,h=b.raw,g=b.crop,y=b.width,z=b.height,s=b.center;c=c||b.onload;l=l||b.onerror;var m=function(b,f){k.theme=f;a.background=b;a.backgroundRaw=b;q(b);c&&c()},p=function(b,f,g){var l=function(b){a.backgroundRaw=b;q(b.css);c&&c()};k.theme=g;a.background=f;h?l(h):b(f,l)},x=function(b,f){-1===b.indexOf("gradient")&&
(b=u.getCSSGradientStops(b,"to right"));var g=u.parseCSSGradient(b),g=g.stops;if(!g)return l&&l();g=u.createGradient("linear",0,0,B.width,B.height,g);a.background=b;a.backgroundRaw=g;q(b);c&&c()},J=function(b,f){var g=b.match(/url\(([^<]+)\)/),g=(g&&g[1]?g[1]:b).replace(/['']/g,"");e.convert.fileToPattern(g,function(h){a.background=f||b;a.backgroundRaw=h;q("url("+g+")");w();c&&c()},l)},q=function(b){var f=a.styleElement.style;f.background!==b&&(k.canvas.renderWithBackground?a.render.clean("doc.setBackground"):
f.background=b)},B=a.bounds;switch(f){case "none":break;case "blank":return m("white","light");case "white":return m("white","light");case "black":return m("black","dark");case "grid":return p(e.gen.grid,"grid","light");case "graphPaper":return p(e.gen.grid,"graphPaper","light");case "blueprint":return p(e.gen.grid,"blueprint","light");case "notebook":return p(e.gen.paper,"notebook","light");case "looseLeaf":return p(e.gen.paper,"looseLeaf","light");case "lined":return p(e.gen.paper,"lined","dark");
case "transparent":return p(e.gen.interlace,"transparent","light");case "transparentDark":return p(e.gen.interlace,"transparentDark","dark");default:if(g)return d.thumbnailer({src:f,width:y||B.width,height:z||B.height,center:s||!1,crop:g||"fit",onload:function(a){J(a.toDataURL(),b)}});g=u.validate(f);"color"===g?m(f,"light"):"pattern"===g||0===f.indexOf("url(")?J(f):x(f,g)}};var w=function(){var b=a.backgroundRaw;if(b&&b.canvas){var d=a.orient.scale,b=b.canvas;a.styleElement.style.backgroundSize=
b.width*d+"px "+b.height*d+"px"}};a.setTool=function(b,c,l){"string"===typeof b&&(b={type:b});var f=b.type;c=b.onload||c;l=b.onerror||l;if(a.tool.type===f)return c&&c();b=a.scene;"select"===f?k.vector.edit&&(b.setDirtyControl(),a.toolkit.area.inGenesis&&(a.toolkit.area.hide(),a.render.scene())):b.selection.length&&(b.deselectAll(),a.render.sceneGCO("doc.setTool"));if(b=a.toolkit.getConfig(f)){m.setToolMenu&&m.setToolMenu(f);k.style.globalStyle&&u.cloneToObject(b);k.style.globalComposite&&u.setComposite(u.composite,
b.type);var h=b.composite,h=h&&h.selected||h;u.isComposite(h)?(u.composite=h,a.render.setGCO(h,b.type)):(u.composite="source-over",a.render.setGCO("source-over",b.type));m.configureBuild&&m.configureBuild(f);a.toolkit.setTool({type:f,onerror:l,onload:function(){a.saveSettings();c&&c()}});d.setItem("tool.type",f)}};a.reset=function(){a.scrollReset();a.orient&&a.orient.reset();a.scene&&a.scene.reset();a.history&&a.history.reset()};a.destroy=function(){delete e.docs[a.idx];a.keyboard&&a.keyboard.disable();
a.tool&&a.tool.disable();m.scrollers&&(m.scrollers={});eventjs.removeEvents(e.events)};a.saveSettings=function(){d.setItem("tool.config",a.scene.stringify(a.config[a.tool.type]))};a.restoreSettings=function(b){var c=a.toolkit;d.getItems(["tool.config"],function(a){try{var f=JSON.parse(a["tool.config"]),h=f.type,g=c.getConfig(h);c.setConfigureValues(f,g);u.cloneToGlobal(f)}catch(d){h=k.tools.defaultTool,g=c.getConfig(h)}e.exec(h,function(){b&&b()},function(a){console.warn(h,a)})})};a.setCurrent=function(){e.doc=
a;a.focusElement.focus()}};q.module.Document.idx=0;"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Document)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Exec=function(e){var c,a,b,k,u=e.dom,m=e.lang,d=e.util,x=e.vector;e.exec=function(m,r,v){c=e.doc;a=c.scene;b=c.toolkit;k=c.render;if(!m)return console.warn("missing trigger",arguments);if(-1!==m.indexOf(">"))new d.Queue({items:m.split(">"),flatten:!0,next:function(a){e.exec(a);this.next()}});else{var l="root.exec("+Array.prototype.slice.call(arguments).join(",")+")";if(e.exec.cmds[m])return e.exec.cmds[m](m,r,v,l);c.setTool({type:m,onload:r,onerror:v})}};
e.exec.register=function(a,b){a.indexOf&&(-1!==a.indexOf(" ")?a=a.split(" "):-1!==a.indexOf(",")&&(a=a.split(",")));if("object"===typeof a)for(var d=0;d<a.length;d++)e.exec.cmds[a[d]]=b;else e.exec.cmds[a]=b};e.exec.unregister=function(a){delete e.exec.cmds[a]};var p=function(b,d,e){eventjs.shiftKey&&(b*=10,d*=10);e?0!==c.selection.length&&a.copy().paste().selection.move(b,d):(c.keyboard&&(c.keyboard.pressed[37]||c.selection.move(0,0,{method:"cache"})),c.selection.move(b,d,{method:"move"}))};e.exec.cmds=
{"layer-download":function(b,d,k,l){b=!1;if(1===c.selection.length)for(var f in c.selection.items)(d=a.children[f])&&d.src&&"image"===d.type&&(b=!0,e.assets.getBlob(d.src,function(a,b){var f=b.replace("#asset-","")+".png";e.download.blob(a,f)}));b||e.download.image({filename:c.title+"-layerExport",useSelection:!0})},"layer-move-left":function(a,b,d,l){p(-(b||1),0)},"layer-move-up":function(a,b,d,l){p(0,-(b||1))},"layer-move-right":function(a,b,d,l){p(b||1,0)},"layer-move-down":function(a,b,d,l){p(0,
b||1)},"layer-clone-left":function(a,b,d,l){p(-(b||1),0,!0)},"layer-clone-up":function(a,b,d,l){p(0,-(b||1),!0)},"layer-clone-right":function(a,b,d,l){p(b||1,0,!0)},"layer-clone-down":function(a,b,d,l){p(0,b||1,!0)},"debug-action":function(b,d,e,l){b=d||c.selection.items;for(var f in b)b=a.children[f],void 0!==b&&(console.log("id:",b.id,"idx:",b.zIndex,"type:",b.type),console.log("layer:",b),console.log("bbox:",b.bbox))},render:function(){k.clean()},"zoom-in":function(b,d,e,l){k.dirtyControls=!0;
c.orient.controllerZoomIn();a.setDirtyBounds(a.children)},"zoom-out":function(b,d,e,l){k.dirtyControls=!0;c.orient.controllerZoomOut();a.setDirtyBounds(a.children)},"zoom-reset":function(b,d,e,l){k.dirtyControls=!0;c.orient.controllerReset();a.setDirtyBounds(a.children)},"layer-to-stamp":function(a,b,d,l){e.assets.addStampFromSelection()},"layer-merge":function(a,b,d,l){e.assets.addCloneFromSelection()},"layer-group":function(b,d,e,l){b="group"+Math.round(999999*Math.random());for(var f in c.selection.items)if(d=
a.children[f])d.groupId=b},"path-merge":function(b,d,e,l){x.mergeLayers();b=a.getSelection();a.removeSelection();if(b=x.mergeLayers(b))b.dirtyCheck=!0,c.history.store({cmd:"add",icon:"merge",name:"merge-objects",data:[b]}),a.push(b),a.sort(),a.reindex(),k.clean("pathMerge")},"layer-forwards":function(b,d,e,l){a.sendForwards&&c.selection.length&&(a.sendForwards({record:!0}),k.clean(l))},"layer-to-front":function(b,d,e,l){a.sendForwards&&c.selection.length&&(a.sendForwards({record:!0,toFront:!0}),k.clean(l))},
"layer-backwards":function(b,d,e,l){a.sendBackwards&&c.selection.length&&(a.sendBackwards({record:!0}),k.clean(l))},"layer-to-back":function(b,d,e,l){a.sendBackwards&&c.selection.length&&(a.sendBackwards({record:!0,toBack:!0}),k.clean(l))},"layer-delete":function(b,d,e,l){c.selection.length&&(a.removeSelection(),k.clean(l))},"layer-copy":function(b,d,e,l){a.copy&&c.selection.length&&(a.copy(),a.setDirtyControl(),k.clean(l))},"layer-cut":function(b,d,e,l){a.cut&&c.selection.length&&(a.cut(),k.clean(l))},
"layer-paste":function(b,d,e,l){a.paste&&a.paste(function(){c.setTool("select")})},"layer-duplicate":function(b,d,c,l){a.duplicate&&(a.duplicate(),k.clean(l))},"select-all":function(b,d,c,l){e.exec("select",function(){a.selectAll().render("exec.select-all")})},"select-inverse":function(b,d,c,l){e.exec("select",function(){a.selectInverse().render("exec.select-inverse")})},"deselect-all":function(b,d,c,l){a.deselectAll();k.clean(l)},undo:function(a,b,d,l){c.history&&(k.dirtyControls=!0,c.history.undo())},
redo:function(a,b,d,l){c.history&&(k.dirtyControls=!0,c.history.redo())},print:function(a,b,d,l){e.print()},save:function(a,b,d,l){e.download.image()},"save-server":function(a,b,d,l){e.server.save()},"save-image":function(a,b,d,l){e.download.image()},"save-gif":function(a,b,d,l){e.download.image("gif")},"save-jpeg":function(a,b,d,l){e.download.image("jpeg",b,d)},"save-png":function(a,b,d,l){e.download.image("png",b,d)},"save-webp":function(a,b,d,l){e.download.image("webp",b,d)},"save-json":function(a,
b,d,l){e.download.json()},"save-pdf":function(a,b,d,l){e.download.pdf()},"save-zip":function(a,b,d,l){e.download.zip()},camera:function(a,b,d,l){e.exec("take-snapshot")},"take-snapshot":function(a,b,k,l){a=d.camera;a.capture&&!a.capturing&&(k=e.rtc.getDefaultID(),e.rtc.videos[k]?a.capture(null,null,k,null,function(){"function"===typeof b&&b();e.exec("select")}):e.module.RTC(e,c,function(){e.exec("take-snapshot",function(){e.rtc.pause()})}))},clear:function(b,d,c,l){a.clear()},reset:function(a,b,e,
l){d.Canvas.blip(c.contexts.layer0);k.clipped=!1;c.reset()},"new":function(a,b,k,l){e.exec("reset");c.uuid=d.uuid()},"new-confirm":function(a,b,d,l){return e.ui.confirm({skip:!e.__modifiedFS,message:"new-doc-confirm",callback:function(a){a?(e.exec("new"),b&&b(),e.ui.log(m.translate("new-doc-created"))):d&&d()},labels:{ok:"continue",cancel:"cancel"}})},"new-fs-confirm":function(a,b,d,l){e.exec("new-confirm",function(){e.client.fs&&e.fs.createProject();b&&b()})},configure:function(a,b,d,l){a=e.sidebar[e.feature.sidebar.configure];
b=a.pane;a.setPane("configure");"configure"!==b&&!1!==a.opened||a.toggle()},layers:function(a,b,d,l){a=e.sidebar[e.feature.sidebar.configure];b=a.pane;a.setPane("layers");"layers"!==b&&!1!==a.opened||a.toggle()},history:function(a,b,d,l){a=e.sidebar[e.feature.sidebar.configure];b=a.pane;a.setPane("history");"history"!==b&&!1!==a.opened||a.toggle()},menu:function(a,b,d,l){e.sidebar.left.toggle()},"menu-export":function(a,b,d,l){a=u.$("#tool-menu-export");contextmenu.show(e.ui.menuMainExport,a.offsetLeft,
45,!0)},"menu-download":function(a,b,d,l){a=u.$("#tool-menu-download");contextmenu.show(e.ui.menuMainDownload,a.offsetLeft,45,!0)},"menu-about":function(a,b,d,l){a=u.$("#tool-menu-about");contextmenu.show(e.ui.menuMainAbout,a.offsetLeft,45,!0)},palette:function(a,b,d,l){e.windows.toggle("#sk-palette")},"color-picker":function(a,b,d,l){e.windows.toggle("#sk-palette")},colorPalette:function(a,b,d,l){e.colorPalette.enabled?e.colorPalette.disable():e.colorPalette.enable()},snapshot:function(d,c,k,l){a.deselectAll();
b.setTool("snapshot");e.ui.log(m.translate("snapshot-log"))}}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.module,c=q.util;q.doc=void 0;q.docs={};q.setDocument=function(a){if(a=q.docs[a]){a.focusElement.focus();if(a.idx===q.doc.idx)return a;var b=a.scene.clipboard;b&&b.loadCopies();return q.doc=a}return console.warn("document does not exist")};q.construct=function(d){if(!d)return console.warn("root.construct requires params");var m=d.onready||d.onReady,p=d.onsupport||d.onSupport;if(!q.__constructed&&(q.__constructed=!0,e.Namespace(q),q.client=new e.Supports(q),window.glfx&&glfx.loadFilters&&
!glfx.presets.length))return glfx.loadFilters(function(){q.construct(d)});c.mixin(d.icons||{},q.ui.icons);c.mixin(d.feature||{},q.feature);q.loc.setHost(d.hosts);q.style=new e.Style(q);var u=new e.Document(q);u.toolkit=new e.Toolkit(q,u);u.render=new e.SceneRender(q,u);u.config=new e.Configure(q,u);c.mixin(d.feature.doc||{},u);q.loc.search.debug&&(u.contexts.debug="");new e.GenerateMedia(q,u);new e.Library(q,u);new e.UI(q,u);u.on.sketchReady=function(a){"ready"!==a.__state&&(a.__state="ready",a.setCurrent(),
r.history.bitmap&&a.history.storeBitmap(),m&&setTimeout(function(){m(a);a.restoreSettings()},1))};c.each(["text","clipart","image","template","stamp"],q.lib.init);u.setContainer({container:d.container,focusElement:d.focusElement,scrollElement:d.scrollElement});e.Scene&&(u.scene=new e.Scene(q,u),u.hovered=u.scene.hovered,u.selection=u.scene.selection,e.AddMedia&&new e.AddMedia(q,u),e.AddObject&&(new e.AddObject(q,u),u.scene.add=u.addObject),e.SceneReplicate&&(e.SceneReplicate(q,u),u.scene.clipboard.enable()),
e.SceneOrganize&&e.SceneOrganize(q,u),e.ScenePlacement&&e.ScenePlacement(q,u,e.Scene.prototype));e.History&&(u.history=new e.History(q,u));e.Controls&&new e.Controls(q,u);if(e.Theme){u.theme=new e.Theme(q,u);var r=q.feature,v=r.tools,l=u.config,f=c.clone(v),h;for(h in l)c.exists("root.module.toolkit."+l[h].toolkit)&&(r[h]=c.mixin(v[h]||r[h]||f,f))}a(q.feature,u);q.lang.setLocale(q.feature.lang||"auto",function(){q.client.fn.init(function(){q.loc.search.pixelRatio||(u.pixelRatio=q.client.pixelRatio);
p&&p(u);setTimeout(function(){var a=q.feature,f=u.toolkit;u.units=a.doc.units;u.setCanvasSize();window.EnableContextMenu&&!q.ui.contextMenu&&(q.ui.contextMenu=EnableContextMenu(document,window));b(q,u);q.setup.run(q,u);f.setup();a.debug&&(document.body.style.overflow="auto");k(q,u);q.setupHistory.run(q,u);c.getItem("sync",function(b){u.setBackground(a.doc.background||"none");u.render.start();q.feature.session.path=b;u.on.sketchReady(u)})},0)})})};var a=function(a,b){var c=q.loc.getSearch();c.zoom&&
(b.zoom=parseFloat(c.zoom),delete c.zoom);c.pixelRatio&&(a.canvas.usePixelRatio=!1,a.canvas.usePixelRatioDesktop=!1,b.pixelRatio=parseFloat(c.pixelRatio),delete c.pixelRatio);for(var e in c){var r=c[e],k=typeof a[e];"undefined"!==k&&("string"===k?a[e]=r:"boolean"===k?a[e]="true"===r||!0===r:"number"===k&&isFinite(r=parseFloat(r))&&(a[e]=r))}},b=function(a,b){var k=a.feature,m=a.vector;e.ZIP&&!a.io.zip&&(a.io.zip=new e.ZIP(a));e.SVG&&!a.io.svg&&(a.io.svg=new e.SVG(a));e.JSON&&!a.io.json&&(a.io.json=
new e.JSON(a));e.GBR&&!a.io.blobToGBR&&new e.GBR(a);e.ABR&&!a.io.blobToABR&&new e.ABR(a);e.Server&&(a.server=new e.Server(a,b));!e.FileSystem||a.fs instanceof e.FileSystem||(a.fs=new e.FileSystem(a));!e.Convert||a.convert instanceof e.Convert||(a.convert=new e.Convert(a));!e.Open||a.open instanceof e.Open||(a.open=new e.Open(a));!e.Save||a.save instanceof e.Save||(a.save=new e.Save(a));!e.Download||a.download instanceof e.Download||(a.download=new e.Download(a));e.Print&&!a.print&&(a.print=new e.Print(a));
!e.UIPalette||a.palette instanceof e.UIPalette||(a.palette=new e.UIPalette(a,b));!e.UISidebar||a.sidebar instanceof e.UISidebar||(a.sidebar.left=new e.UISidebar(a,"left"));!e.UITooltip||a.ui.tooltip instanceof e.UITooltip||(a.ui.tooltip=new e.UITooltip(a));!e.UIVortex||a.vortex instanceof e.UIVortex||(a.vortex=new e.UIVortex(document.body));e.UIStartWindow&&new e.UIStartWindow(a,b);e.Keyboard&&!a.client.mobile&&(b.keyboard=new e.Keyboard(a,b),b.keyboard.enable());e.ShareFest&&new e.ShareFest(a,b);
e.Peer&&new e.Peer(a,b);a.net.Swarm&&a.net.Users&&(a.net.swarm=new a.net.Swarm,a.net.users=new a.net.Users);c.getScreenMetrics&&!c.metrics&&(c.metrics=c.getScreenMetrics());c.perf&&(a.perf=c.perf,a.p=a.perf());m.shape&&(m.VOBPath=m.shape.VOBPath);e.Document&&(a.Document=e.Document);e.Exec&&new e.Exec(a);e.GeneratePreview&&new e.GeneratePreview(a);e.GenerateMedia&&new e.GenerateMedia(a,b);e.PathFinder&&new e.PathFinder(a,b);e.Assets&&(a.assets=new e.Assets(a,b));e.Camera&&(c.camera=new e.Camera(a,
b));e.Orientation&&e.Orientation.createController(a,b);e.RTCManager&&(a.rtc=new e.RTCManager(a,b));c.loadImage&&a.loc.PROXY&&(c.loadImage.proxyUrl=a.loc.PROXY);e.Thumbnailer&&!c.thumbnailer&&(c.thumbnailer=e.Thumbnailer);a.ui.Loader&&!a.loader&&(a.loader=new a.ui.Loader);k.kiosk&&c.requestKioskMode()},k=function(a,b){var e=a.feature,k=b.toolkit,r,v=b.container,l=b.contexts.active;a.events.onResize=eventjs.add(window,"resize",function(f){clearTimeout(r);r=setTimeout(function(){a.on.beforeResize&&a.on.beforeResize();
b.setCanvasSize();b.orient.reset(!0);b.render.sceneGCO("onResize");a.on.resize&&a.on.resize();c.eventOverride("onResize",f)||"text"===b.tool.type&&k.text.updateCSS()},100)});eventjs.add(v.parentNode,"scroll",function(a){var h=b.container.parentNode,g=h.scrollTop,l=h.scrollLeft;b.scrollTop=g;b.scrollLeft=l;b.scrollElementCSS();b.render.clipped=!1;var d=b.contexts,s;for(s in d)h=d[s],h.style.left=l+"px",h.style.top=g+"px";if(b.scene){g=0;for(s=b.scene.children.length;g<s;g++)h=b.scene.children[g],h.dirtyTransform=
!0,h.inbounds=void 0;k.text&&(h=b.selection.item)&&"text"===h.type&&k.text.updateCSSTransform();b.render.clean("container.onscroll");c.eventOverrideCall("onScroll",a)}});(function(){var f=function(){a.net.dataChannel?(a.server.open(),a.net.dataChannel.send(["session.change",h])):a.server.open()},h=a.loc.getFileID();a.events.hashChange=eventjs.add(window,"hashchange",function(g){a.on.hashChange&&a.on.hashChange(a.loc.getHash());g=a.loc.getFileID();if(h!==g){var l=h;h=g;b.scene.children.length?a.ui.confirm({skip:!a.__modifiedFS,
message:"open-confirm",callback:function(b){b?f():a.loc.setHash("sketch",l)},labels:{ok:"open-doc",cancel:"cancel"}}):f()}})})();a.ui.TSEvents.add();a.ui.setupStartWindow&&a.ui.setupStartWindow();a.windows&&(a.events.onScroll=eventjs.add(window,"scroll",a.windows.restore));e.preventScroll&&!e.debugCache&&(eventjs.proxy.wheelPreventElasticBounce(".open-doc-listing"),a.events.onWheel=eventjs.add(window,"wheel",eventjs.cancel),eventjs.add(v,"wheel",eventjs.stop));a.events.onBeforeUnload=eventjs.add(window,
"beforeunload",m);e.preventTouch&&a.client.mobile&&(a.events.onTouch=eventjs.add(document,"touchstart",eventjs.prevent,{strict:!0}));eventjs.add(l,"contextmenu",eventjs.prevent);a.windows&&eventjs.add(l,"mouseup",a.windows.clearFocus);eventjs.add(l,"mouseup",function(){document.activeElement!==document.body&&document.activeElement&&document.activeElement.blur()});a.events.onFocus=eventjs.add(window,"focus",u);a.events.onBlur=eventjs.add(window,"load,blur",eventjs.keyTrackerReset)},u=function(a){eventjs.keyTrackerReset(a);
(a=q.doc.clipboard)&&a.loadCopies()},m=function(a){var b=q.feature.beforeUnloadPrompt;"function"===typeof b&&(b=b());if(b)return(a||window.event).returnValue=b};q.log=function(a){if("CANVAS"===a.nodeName){var b=a.toDataURL(),c=a.width;a=a.height;console.log("%c+","font-size: 1px; padding: "+Math.floor(a/2)+"px "+Math.floor(c/2)+"px; line-height: "+a+"px;background: url("+b+"); background-size: "+c+"px "+a+"px; color: transparent;")}else console.log(a)};e.QueuePending=function(a){var b=[];this.add=
function(a){b.push(a)};this.run=function(c,e){b.forEach(function(b){a(c,e,b)});b=[]}};q.setup=new e.QueuePending(function(a,b,c){c(a,b)});q.setupHistory=new e.QueuePending(function(a,b,c){b.history.registerFunction(c)});e.Listener=function(a){var b=0,c={},e=function(c,l){if(!l)return a.feature.debug&&console.warn(c,"listener does not exist");var f=l.sketchId||(l.sketchId=b++);return c+"."+f},r=function(a){var b=c[a]||(c[a]={}),f=function(){for(var a in b)b[a].apply(window,arguments)};f.add=function(f,
g){f=e(a,g);void 0===b[f]&&g&&(b[f]=g)};f.remove=function(f){f=e(a,fn);b[f]&&fn&&delete b[f]};return f};a.on=a.addListener=function(b,l){(a.on[b]||(a.on[b]=new r(b))).add(b,l)};a.removeListener=function(b,l){(a.on[b]||(a.on[b]=new r(b))).remove(b,l)};a.removeListeners=function(b){delete c[b];delete a.on[b]}};e.Listener(q)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.loc=q.loc||{},c=q.util;e.getHash=function(a){var b="?"+window.location.hash.substr(1),b=e.parseUri(b).queryKey;e.hash=b;return a?b[a]:b};e.getSearch=function(){var a=e.getQuery(window.location.search,"sk");return e.search=a};e.update=function(){e.getSearch();e.getHash()};e.parseQuery=function(a){a=a.split(";");for(var b={},c=0;c<a.length;c++)if(a[c]){var e=a[c].split(":");b[e[0]]=e[1]||!0}return b};e.getQuery=function(a,b){var c=e.parseUri(a).queryKey;return c=c[b]?e.parseQuery(c[b]):
{}};e.setHost=function(a){var b=q.feature.io.fs&&q.fs.dbpath?q.fs.dbpath()||"":"",k=function(a){return"string"===typeof a?(a=a&&-1===a.indexOf("://")?w+a:a,u(a)):""},u=function(a){var b=a[a.length-1];return"="===b||"?"===b||"/"===b?a:a+"/"},m=function(){var a=u(p.host+c.string.dirpath(p.pathname));e.host=a;e.protocol=p.protocol;e.HOST=k(a);e.MEDIA=e.HOST+"media/";e.PROXY=e.HOST+"proxy/?url=";e.GET=b;e.POST=b},d=function(a,h,g){for(var l in a)a[l].replace&&(a[l]=a[l].replace(h,g));(h=a.feature)&&c.mixin(h,
q.feature);h=u(a.pathWeb||a.HOST||"");e.host=h;e.protocol=p.protocol;e.IO=a.IO||"";e.RTC=a.RTC||"";e.HOST=k(h);e.MEDIA=k(a.MEDIA||e.HOST+"media/");e.PROXY=k(a.PROXY||e.HOST+"proxy/?url=");e.GET=k(a.pathGet||a.GET||b);e.POST=k(a.pathPost||a.POST||b)},x=function(a){var h=a.feature;h&&c.mixin(h,q.feature);h=u(a.pathWeb||a.HOST||"");e.host=h;e.protocol=p.protocol;e.IO=a.IO;e.RTC=a.RTC;e.HOST=k(h);e.MEDIA=k(a.MEDIA||e.HOST+"media/");e.PROXY=k(a.PROXY||e.HOST+"proxy/?url=");e.GET=k(a.pathGet||a.GET||b);
e.POST=k(a.pathPost||a.POST||b)};a=a||e.hosts||{};e.hosts=a;e.update();var p=window.location,w=p.protocol+"//",r=p.host;if(a[r])return x(a[r]);if(a[w+r])return x(a[w+r]);for(var v in a){var l=a[v];if(l.alias&&-1!==l.alias.indexOf(r))return d(c.clone(l),v,r)}return a["default"]?x(a["default"]):m()};e.setHash=function(a,b){if("string"===typeof a){var k=e.getHash();k[a]=b;return e.setHash(k)}if("boolean"===typeof b)return k=c.mixin(a,e.getHash()),e.setHash(k);k=[];a=a||e.getHash();for(var u in a){var m=
a[u];void 0!==m&&(m?k.push(u+"="+m):k.push(u))}k="#"+k.join("&");u=window.location;u.hash!==k&&(u.hash=k)};e.getFileID=function(){if(q.server.enabled&&q.server.enabled())return e.getHash("sketch")||""};e.getRandomID=function(a){a=a||8;for(var b=["a","e","i","o","u"],c="bcdfghjklmnpqrstvwxyz".split(""),e="",m=0;m<a;m++)e=0==m%2?e+b[4*Math.random()>>0]:e+c[20*Math.random()>>0];return e};e.isLocalUrl=function(){var a=/^([!#$&-;=?-\[\]_a-z~ ]|%[0-9a-fA-F]{2}|)+$/,b=/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?/,
c={"http:":/:(80)?$/,"https:":/:(443)?$/},e={"data:":!0,"blob:":!0,filesystem:!0};return function(m,d){var x=m.match(b);return d&&e[x[1]]?!0:x[1]&&x[1].toLowerCase()!==location.protocol||x[2]&&x[2].replace(c[location.protocol],"")!==location.host||x[1]&&!x[2]?!1:a.test(m)}}();e.isRemoteUrl=function(a){var b=c.string.startsWith;return b(a,"http:")||b(a,"https:")?!e.isLocalUrl(a):!1};e.isBlobUrl=function(a){return c.string.startsWith(a,"blob:")};e.isDataUrl=function(a){return c.string.startsWith(a,
"data:")};e.isFileUrl=function(a){return c.string.startsWith(a,"filesystem:")};e.isValidXhrUrl=function(a){return e.isLocalUrl(a)||e.isBlobUrl(a)||e.isFileUrl(a)||e.isRemoteUrl(a)};e.getMediaUrl=function(a){if(e.isBlobUrl(a)||e.isDataUrl(a)||e.isFileUrl(a))return a;var b=c.string.startsWith;return b(a,"http")||b(a,"./")||b(a,"/")?a:e.MEDIA+a};e.parseUri=function(a){a||(a=window.location);var b=e.parseUri.options;a=b.parser[b.strictMode?"strict":"loose"].exec(a);for(var c={},u=14;u--;)c[b.key[u]]=
a[u]||"";c[b.q.name]={};c[b.key[12]].replace(b.q.parser,function(a,d,e){d&&(c[b.q.name][d]=e)});return c};e.parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
"undefined"!==typeof module&&module.exports&&(module.exports=q.loc)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Supports=function(e,c){var a=this,b=e.feature,k=e.util;k.getAuthDirection=function(){if(a.android){if(a.chrome)return"center bottom";if(!a.firefox&&a.opera)return"center center"}else if(!a.opera){if(a.chrome)return"right top";if(a.firefox)return"left top"}return"center top"};var u=navigator.userAgent||navigator.vendor||window.opera;a.userAgent=u;a.ie=!!document.documentMode;a.firefox="undefined"!==typeof InstallTrigger;a.opera=!!window.opera||/Opera|OPR/i.test(u);
a.chrome=!!window.chrome&&!a.opera;a.safari=/Safari/i.test(u)&&!a.opera&&!a.chrome;if(a.ios=/iPhone|iPad|iPod/i.test(u)){var m=(""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_","")||!1;m&&(a.iOSVersion=new k.version(m))}a.android=/Android/i.test(u);a.blackberry=/Blackberry/i.test(u);a.mac=!a.ios&&/Mac/.test(u);a.windows=/Windows/.test(u);a.linux=/Linux/.test(u);a.mobile=/Opera Mini|IEMobile|Symbian|WebOS/i.test(u)||
a.ios||a.android||a.blackberry;a.cordova=window.device&&window.device.cordova||!1;a.nodewebkit=!(!k.exists("process.versions")||!process.versions["node-webkit"]);a.flash=function(){var a=navigator,b=parseFloat,d=a.plugins,a=a.mimeTypes,c,l;if(d&&"object"==typeof d["Shockwave Flash"]){if((c=d["Shockwave Flash"].description)&&(!a||!a["application/x-shockwave-flash"]||a["application/x-shockwave-flash"].enabledPlugin))return b(c.replace(/^.*\s+(\S+)\s+\S+$/,"$1"))}else if(window.ActiveXObject)try{if(l=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))if(c=l.GetVariable("$version"))return b(c.replace(/^\S+\s+(\d+),(\d+).*$/i,"$1.$2"))}catch(f){}return!1}();a.lang=(navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage||"en").toLowerCase();"function"===typeof detectPrivateMode&&detectPrivateMode(function(b){a.incognito=b});a.fn={};a.fn.init=function(b){var d=k.Canvas(1,1);a.fn.detectExport(d,function(){a.fileReader=!!window.FileReader;a.canvas=!!d.ctx;a.fn.detectWebGL();
a.fn.detectFS();a.fn.detectCanvas2dFeatures(d);a.fn.detectPixelRatioSupport(d);a.fn.detectFeature();b&&b()})};a.fn.detectWebGL=function(){var b=document.createElement("canvas");b.width=1;b.height=1;for(var d,c=["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=0;e<c.length;++e)try{if(d=b.getContext(c[e]))break}catch(l){}a.webgl=!!d};a.fn.getUserMedia=function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)};a.fn.peerConnection=
function(){return!!(window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.RTCPeerConnection)};a.fn.detectFS=function(){a.chooseEntry=k.exists("chrome.fileSystem.chooseEntry")||k.exists("navigator.camera.getPicture");a.fs=!a.nodewebkit&&!!x(window,"requestFileSystem")};a.fn.detectPixelRatio=function(b){b=x(b,"backingStorePixelRatio")||1;return a.pixelRatio=(window.devicePixelRatio||1)/b};a.fn.detectPixelRatioSupport=function(d){if(b){if(b.canvas.usePixelRatio||
b.canvas.usePixelRatioDesktop&&!a.mobile){if(a.ios&&a.iOSVersion.isLessThan("8.0"))return a.pixelRatio=1;var c=d.ctx,e=a.fn.detectPixelRatio(c);if(1===e)return e;var m=k.timestamp();d.width=window.innerWidth*e;d.height=window.innerHeight*e;c.drawImage(d,0,0);36<k.timestamp()-m&&(a.pixelRatio=1);d.width=d.height=1;return a.pixelRatio}return a.pixelRatio=1}};var d={blendModes:"normal multiply screen overlay darken lighten color-dodge color-burn hard-light soft-light difference exclusion hue saturation color luminosity".split(" "),
compositeModes:"source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor".split(" ")};a.fn.detectCanvas2dFeatures=function(b){var c=b.ctx;b=function(b,e){for(var l=!1,f=d[e],h=1;h<f.length;h++){var g=f[h];c.globalCompositeOperation=g;var y=c.globalCompositeOperation===g;(a.gco[g]=y)&&(l=!0)}a.gco["__"+b]=l};a.gco={};b("composite","compositeModes");b("blend","blendModes");a.imageSmoothing="boolean"===typeof c.imageSmoothingEnabled};
a.fn.detectExport=function(b,d){var c=0,k=function(){!--c&&d&&d()},l=function(f,h){++c;var g=b.toDataURL(h).split(";")[0].substr(5);a.io[f]=g===h;setTimeout(k,1)};a.io={};a.io.__enabled=!0;l("jpeg","image/jpeg");l("png","image/png");l("webp","image/webp");l("bmp","image/bmp");(function(f,h){try{++c,b.toBlob(function(b){var f=new Image;f.onload=function(){var b=!(0===this.width&&0===this.height);a.io.blob=b;a.io.zip=!(!b||!e.module.ZIP);k()};f.onerror=function(){a.io.blob=!1;a.io.zip=!1;k()};f.src=
URL.createObjectURL(b)})}catch(g){a.io.blob=!1,a.io.zip=!1,setTimeout(k,1)}})()};a.fn.detectFeature=function(){b&&(b.vector.record||(b.vector.edit=!1),b.vector.edit||(b.history.vector=!1),b.style.composite=b.style.composite&&!1!==a.gco.__composite,b.style.blend=b.style.blend&&!1!==a.gco.__blend)};var x=function(a,b){if(a[b])return a[b];b=b[0].toUpperCase()+b.substr(1);return a["webkit"+b]||a["moz"+b]||a["ms"+b]||a["o"+b]};c&&a.fn.init(c);return a}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Style=function(e){var c=this,a=e.feature,b=e.util;(c.Fill=function(a){a=a||c.defaultFill;k(a,this,!1);return this}).type="fill";(c.Stroke=function(a){a=a||c.defaultStroke;k(a,this,!0);return this}).type="stroke";var k=function(a,b,h){if("string"===typeof a){if(a=c.parseStyle(a))var g=a.type,d=a.dna;else g="color",d="#000000";a={};a.type=g;a[g]=d}b.mode=a.mode||"linear";b.noise=a.noise||!1;b.opacity=a.opacity||1;b.type=a.type||"color";b.color=a.color||c.defaultColor;
b.gradient=a.gradient||c.defaultGradient;b.pattern=a.pattern||c.defaultPattern;h?(b.method="stroke",b.dashArray=Array.isArray(a.dashArray)?a.dashArray:u.dashArray,b.dashOffset=isFinite(a.dashOffset)?a.dashOffset:u.dashOffset,b.lineCap=a.lineCap||u.lineCap,b.lineJoin=a.lineJoin||u.lineJoin,b.lineWidth=isFinite(a.lineWidth)?a.lineWidth:u.lineWidth,b.miterLimit=isFinite(a.miterLimit)?a.miterLimit:u.miterLimit,b.enabled=isFinite(a.enabled)?a.enabled:isFinite(a.lineWidth)):(b.method="fill",b.enabled=isFinite(a.enabled)?
a.enabled:!0)};c.create=function(a,b){if("stroke"===a)return new c.Stroke(b);if("fill"===a)return new c.Fill(b)};c.clone=function(a,b){return c.cloneInto(a,{},b)};c.cloneInto=function(a,b,h){if(!h||!1!==a.enabled&&0!==a.lineWidth){var g=a.type,y;for(y in a){var c=d[y];if(c){if(h)if("method"===y)continue;else if(m[y]&&y!==g)continue;else if(u[y]===a[y])continue;b[y]="array"===c?a[y].slice():a[y]}}return b}};c.equals=function(a,b){for(var h in a){var g=d[h];if(g)if("array"===g){if(String(a[h])!==String(b[h]))return!1}else if(a[h]!==
b[h])return!1}return!0};var u={dashArray:"none",dashOffset:0,lineCap:"butt",lineJoin:"miter",lineWidth:1,miterLimit:4,mode:"linear",noise:!1,opacity:1},m={color:"string",gradient:"string",pattern:"string"},d={color:"string",gradient:"string",pattern:"string",dashArray:"array",dashOffset:"float",lineCap:"string",lineJoin:"string",lineWidth:"float",miterLimit:"float",mode:"string",noise:"boolean",opacity:"float",type:"string",method:"string",enabled:"boolean"};c.cloneToObject=function(a){c.cloneFillStroke(c,
a)};c.cloneToGlobal=function(a){c.cloneFillStroke(a,c);e.palette&&(a=a[e.palette.paintMethod])&&(e.palette.setIndicator(),e.palette.update(a.type))};c.cloneFillStroke=function(a,b){a.fill&&b.fill&&c.cloneInto(a.fill,b.fill);a.stroke&&b.stroke&&c.cloneInto(a.stroke,b.stroke);return b};c.setFont=function(a){var b=e.doc;if(a){var h=b.selection.parse(a.selection||b.selection.items),g=b.toolkit,d=g.text;e.vector.text.supports[a.fontFamily]||d.loadFont(a.fontFamily);a=b.scene.copyProperties(d,a,{});g.setParam({tool:"text",
params:a,selection:h})}};c.setFill=function(a){a=a||{};"string"===typeof a&&(a={dna:a});a.useColorPicker=!1!==a.useColorPicker;a.paintMethod="fill";a.useRender=!0;c.apply(a)};c.setStroke=function(a,b,h,g,d,e,s){a=a||{};"string"===typeof a&&(a={dna:a},a.lineWidth=isFinite(b)?b:0,a.lineCap=h||"butt",a.lineJoin=g||"miter",a.miterLimit=isFinite(d)?d:4,a.dashArray=e||"none",a.dashOffset=isFinite(s)?s:0);a.useColorPicker=!1!==a.useColorPicker;a.paintMethod="stroke";a.useRender=!0;c.apply(a)};c.apply=function(b){var f=
e.doc,h=b.dna||b.color||b.gradient||b.pattern,g=b.paintMethod||b.method||"fill",d=b.paintType||b.type;if(!d&&h){var z=c.parseStyle(h);if(!z)return;d=z.type;h=z.dna}d&&(b.type=d,b[d]=h,delete b.dna,delete b.paintType);var z=b.useRender||!1,s=b.useRecord||!1,d=b.useColorPicker&&"color"===d&&e.ui.colorPicker.update||!1,r=e.net.dataChannel&&a.stream.sketchLive,k=!0===s||"up"===s||"end"===s||"update"===s,s=!0===s||"down"===s||"start"===s,m=!1,p=f.config[f.tool.type];if(p=p&&p[g])c.cloneInto(b,p),c.cloneInto(b,
c[g]);var u=[],x=[],w=f.scene.children,p=f.selection.parse(b.selection||f.selection.items),q;for(q in p){var C=w[q];if(C){p=C[g];if(void 0===p){p=f.config[C.type];if(!p||!p[g])continue;p=C[g]=c.create(g)}if(!1!==p)if(c.equals(b,p.__cache||p))C.dirtyControl=!0,k&&delete p.__cache;else if("clipart"===C.type)m=!0;else{k&&(f.scene.setDirtyPixelData(C),m={id:C.id},m[g]=p.__cache||p,u.push(m));s&&(p.__cache=c.clone(p));k&&delete p.__cache;c.cloneInto(b,p);m={id:C.id};m[g]=p;x.push(m);m=!0;C.dirtyCache=
!0;C.dirtyControl=!0;var G=v(g,C);C.brush&&(p=C.brush[g],c.cloneInto(b,p),p.__colors=G)}}}f.toolkit.text&&f.toolkit.text.updateCSSStyle(h);m&&(k&&f.history&&f.history.store({cmd:"update",icon:"palette",name:"update-style",data:{from:u,to:x}}),r&&e.net.dataChannel.send(["scene.update",x]));d&&"none"!==h&&e.ui.colorPicker.update(h);if(q=f.tool.device)q.brush?(p=q.brush[g],c.cloneInto(b,p),v(g,q.brush)):q[g]&&(p=q[g],c.cloneInto(b,p),v(g,q));z&&m&&f.render.scene("style.apply");e.palette&&e.palette.setIndicator();
f.tool.interval=0};c.renderSwatch=function(a,b,h,g,d){var z=e.doc.pixelRatio||1;g=(g||24)*z;d=(d||24)*z;a.width=g;a.height=d;if("CANVAS"===a.nodeName){var s=a.ctx||a.getContext("2d");switch(b){case "color":s.fillStyle=h;s.fillRect(0,0,g,d);break;case "gradient":a=c.getGradientStops(h,!0);s.fillStyle=c.createGradient("linear",0,0,g,d,a);s.fillRect(0,0,g,d);break;case "pattern":h instanceof CanvasPattern?(s.fillStyle=h,s.fillRect(0,0,g,d)):c.loadPattern(h,function(a){s.fillStyle=a;s.fillRect(0,0,g,
d)})}}else switch(b){case "color":a.style.background=h;break;case "gradient":a.style.cssText=c.getGradientCSS(h,"left top")}};var x=b.Canvas(1,1).ctx;(function(){c.loadPattern=function(b,f,h){b=b||c.fill.pattern;var g=c.patternCtx[b];if(g)f&&f(g);else{var d=new Image;d.onerror=function(){h&&h();a.debug&&console.warn("missing pattern",b)};d.onload=function(){var a=x.createPattern(d,"repeat");a.width=d.width;a.height=d.height;c.patternCtx[b]=a;f&&f(a)};d.src=e.loc.getMediaUrl(b)}}})();c.hexFromColor=
function(a){"string"===typeof a?"hsla"===a.substr(0,4)?a=e.color.space(a,"W3>HSLA>RGBA>HEX24>W3"):"rgba"===a.substr(0,4)?a=e.color.space(a,"W3>RGBA>HEX24>W3"):"rgb"===a.substr(0,3)?a=e.color.space(a,"W3>RGB>HEX24>W3"):e.color.webcolors[a]&&(a=e.color.webcolors[a]):isFinite(a.R)?a=e.color.space(a,"RGB>HEX24>W3"):isFinite(a.H)&&(a=e.color.space(a,"HSLA>RGBA>HEX24>W3"));return a};var p={color:function(a){if(0===a.indexOf("#")||0===a.indexOf("hsl")||0===a.indexOf("hsla")||0===a.indexOf("rgb")||0===a.indexOf("rgba")||
e.color.webcolors[a])return!0},pattern:function(a){if(0===a.indexOf("#asset")||0===a.indexOf("data:")||0===a.indexOf("blob:")||0===a.indexOf("./")||0===a.indexOf("http"))return!0},gradient:function(a){if(-1!==a.indexOf(",")&&isFinite(parseInt(a[0]))||-1!==a.indexOf("linear-gradient(")||-1!==a.indexOf("radial-gradient("))return!0}};c.validate=function(a,b){if("string"!==typeof a)return!1;var h=a.toLowerCase();return b?p[b](h)||!1:p.color(h)?"color":p.pattern(h)?"pattern":p.gradient(h)?"gradient":!1};
c.parseStyle=function(a){if("none"===a)return{dna:"none",type:"gradient"};if(p.color(a))return{dna:a,type:"color"};if(p.pattern(a))return{dna:a,type:"pattern"};if(p.gradient(a))if(-1!==a.indexOf("linear-gradient")){if(a=c.parseCSSGradient(a,!0))return{dna:a,type:"gradient"}}else return{dna:a,type:"gradient"}};c.parseCSSGradient=function(a,b){if(!a)return"";if(!e.color.CSSLinearGradient)return console.warn("requires color.CSSLinearGradient");var h=e.color.spacex,g=e.color.CSSLinearGradient.parse(a);
if(g){for(var d=g.stops,c=d.length-1,s=[],r=0;r<=c;r++){var k=d[r],m=k.position;m?(-1!==m.indexOf("%")&&(m=parseFloat(m.replace("%",""))/100),s.push(isFinite(m)?m:r/c)):s.push(r/c);b?s.push((new h(k.color)).toHEX32String().substr(1)):s.push(k.color)}if(b)return s.join(",");g.stops=s;return g}return""};c.parseCSSTextShadow=function(a){};c.load=function(a,b){var h=0,g=function(a){--h||b&&b()};a.fill&&h++;a.stroke&&h++;a.fill&&w(a,"fill",g);a.stroke&&w(a,"stroke",g)};var w=function(a,b,h){var g=r(a,
b);"pattern"===g.type&&g.pattern?c.loadPattern(g.pattern,function(g){v(b,a);h()},function(){h("404")}):(v(b,a),h())},r=function(a,b){var h=e.doc;if(a[b])h="string"===typeof a[b]?a[b]=new c.create(b,a):a[b];else{h=h.config[a.type];if(!h[b])return"";h=h[b]}var g=h.type;"string"!==typeof h[g]&&(h[g]=c[b][g]);return h},v=function(b,f){var h=e.doc,g=r(f,b),d=g.noise,z=g.type,s=g[z];if(s){if(f.useBackgroundOverlay)return"brush"===f.toolkit?g.__colors=[0,g.color||"#000"]:g.__colors=[0,h.backgroundRaw];if("none"===
s)return g.__colors=[0,"rgba(0,0,0,0)"];switch(z){case "color":if(d){var k=parseInt("0xFF"+s),k=[0,k,1,k];break}else return g.__colors=[0,s];case "gradient":k=c.getGradientStops(s,!0,!0);if(0===k.length)return g.__colors=[0,g.color||"#000"];break;case "pattern":return s?(c.loadPattern(s),g.__colors=[0,c.patternCtx[s]]):g.__colors=[0,g.color||"#000"]}if(!d&&!e.detect.useColorCycle[f.type]){g.__colors=[];for(d=0;d<k.length;d+=2)g.__colors.push(k[d]),g.__colors.push(e.color.space(k[d+1],"HEX32>RGBA>W3"));
return g.__colors}var h=d?10:0,z=d?20:0,m=d?10:0;if(e.color.gradient){d=c.hashDNA(s+d);if(c.gradientCtx[d])return g.__colors=c.gradientCtx[d];g.__colors=e.color.gradient.getColors({seed:f.seed,dna:k,length:500,resolution:1,blend:"Luminosity",H:h,S:z,L:m});return c.gradientCtx[d]=g.__colors}a.debug&&console.warn("missing gradient.js");return g.__colors=[0,g.color]}};c.createGradient=function(a,b,h,g,d,c){if(isFinite(b+g+h+d)){if("radial"===a){a=(b+g)/2;var s=(h+d)/2;b=Math.sqrt(Math.pow(g-b,2)+Math.pow(d-
h,2))/3;b=x.createRadialGradient(a,s,0,a,s,b)}else b=x.createLinearGradient(b,h,g,d);for(h=0;h<c.length;h+=2)g=c[h],(d=c[h+1])&&isFinite(g)&&b.addColorStop(g,d);return b}return"#000"};c.getStyle=function(a,b,h,g,d,z,s){var k=s[a];if(k){var r=k.type;b=k.mode;var m=k[r];if("destination-out"===s.composite)return e.doc.backgroundRaw||"#000";if("none"===m)return"stamp"===s.type?"rgba(0,0,0,0)":"rgba(0,0,0,1)";if("color"===r)return"cycle"===b?(h=k.__colors,h[(2*(s.time||0)+1)%h.length]):m;if("pattern"===
r)return c.patternCtx[m];if("gradient"===r)return s=k.__colors||(k.__colors=v(a,s)),c.createGradient(b,h,g,d,z,s)}};new e.module.StylePalette(e,c);new e.module.StyleGCO(e,c);b=function(b,f){var h=a.style[b];return c.validate(h,b)?h:f};c.defaultColor=b("color","#000000");c.defaultGradient=b("gradient","0.169429711,fff91d8a,0.583,ff7c0ebd,1,ff0000f0");c.defaultPattern=b("pattern","data:image/gif;base64,R0lGODlhDgAOAID/ANDu/FOdvCwAAAAADgAOAAACHYwDh5fazqKcj05rar5q+w961diVi9g9jaaGkFEAADs=");c.defaultFill=
a.style.gradient?c.defaultGradient:c.defaultColor;c.defaultStroke=c.defaultColor;c.composite="normal";c.stroke=new c.Stroke;c.fill=new c.Fill;c.loadDefault&&c.loadDefault();return c};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Style)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.StylePalette=function(e,c){var a=e.util;c.setGradientCSS=function(a,b,c){if(b){if("none"===b)return a.background="none";c=c||"left top";b=a.getCSSGradientStops(b);a.background="linear-gradient("+c+","+b+");";a.background="-webkit-linear-gradient("+c+","+b+");";a.background="-ms-linear-gradient("+c+","+b+");";a.background="-moz-linear-gradient("+c+","+b+");";a.background="-o-linear-gradient("+c+","+b+");"}};c.getGradientCSS=function(a,b){if(a){if("none"===
a)return"background: none";b=b||"left top";var e=c.getCSSGradientStops(a);return"\t\t\tbackground: linear-gradient("+b+","+e+");\t\t\tbackground: -webkit-linear-gradient("+b+","+e+");\t\t\tbackground: -ms-linear-gradient("+b+","+e+");\t\t\tbackground: -moz-linear-gradient("+b+","+e+");\t\t\tbackground: -o-linear-gradient("+b+","+e+");"}};c.getCSSGradientStops=function(a,b){for(var c=[],d=a.split(","),e=d.length,p=0;p<e;p+=2){var w=100*d[p],r=d[p+1];if(r){var v=parseInt(r.substr(2,2),16),l=parseInt(r.substr(4,
2),16),f=parseInt(r.substr(6,2),16),r=parseInt(r.substr(0,2),16)/255;c.push("rgba("+v+","+l+","+f+","+r+") "+w+"%")}}c.join(", ");return b?"linear-gradient("+b+","+c+")":c};c.getGradientStops=function(a,b,c){var d=[];a=a.split(",");var e=a.length;if(2>e)return d;for(var p=0;p<e;p+=2){var w=parseFloat(a[p]),r=a[p+1],v=r.length;8!==v&&(3===v?r="ff"+r[0]+r[0]+r[1]+r[1]+r[2]+r[2]:6===v&&(r="ff"+r));if(c)r=parseInt("0x"+r,16);else{var l=r.substr(0,2);if("ff"===l)r="#"+r.substr(2);else var v=parseInt(r.substr(2,
2),16),f=parseInt(r.substr(4,2),16),r=parseInt(r.substr(6,2),16),l=parseInt(l,16)/255,r="rgba("+v+","+f+","+r+","+l+")"}b?(d.push(w),d.push(r)):d.push({offset:w,color:r})}return d};c.add=function(a,b,e){"string"===typeof a&&(a=[a]);var d=c[b+"Hash"],x=c[b+"Official"];b=c[b];if(a&&a.length)for(var p=0;p<a.length;p++){var w=a[p];if(w){var r=w.dna||w,v=c.hashDNA(r);d[v]||(w.dna&&(x[v]=!0),d[v]=!0,e?b.unshift(r):b.push(r))}}};c.addFromBlob=function(a,b){e.convert.blobToText(a,function(m){0===m.indexOf("GIMP Gradient")?
c.add(Color.open.GGR(m).join(","),"gradient",!0):0===m.indexOf("GIMP Palette")?c.add(Color.open.GPL(m),"color",!0):e.feature.debug&&console.log("un-handled method",a);b&&b()})};var b=function(a,b,m){c[b]=e.lib&&e.lib[b]?e.lib[b]():[c[m]];!c[a]&&c[b]&&(c.reset(a),c.add(c[b],a))};c.loadDefault=function(){b("color","defaultColors","defaultColor");b("gradient","defaultGradients","defaultGradient");b("pattern","defaultPatterns","defaultPattern")};c.reset=function(a){a?(c[a+"Ctx"]={},c[a+"Official"]={},
c[a+"Hash"]={},c[a]=[]):(c.gradientCtx={},c.gradientOfficial={},c.gradientHash={},c.gradient=[],c.colorCtx={},c.colorOfficial={},c.colorHash={},c.color=[],c.patternCtx={},c.patternOfficial={},c.patternHash={},c.pattern=[])};c.hashDNA=function(b){if(b&&b.toLowerCase)return b=b.toLowerCase().split("#").join(""),b=Math.abs(e.util.hash(b)).toString(16).substr(0,6),a.string.rpad(b,"0",6)};c.generateColorBlock=function(){var a={Cyan:[12,6,9.7],Azure:[33,6.9,9.2],Indigo:[62,9,8.6],Purple:[92,6,9],Pink:[150,
8,9],Red:[180,10,9],Orange:[196,7.7,9.7],Orange3:[224,6.2,10],Yellow:[234,4.7,11],Green:[261,11,9.5]},b=0,c;for(c in a)b++;for(var d=0,x,p=[],w=1;8>=w;w++)for(c in a){if(1===w)x=e.color.space.HSL_RGB({H:0,S:0,L:100-d/(b-1)*100}),d++;else{n=w-1;x=a[c];var r=Math.min(1,n/x[1]),v=Math.min(1,1-n/x[2]);x=e.color.space.HSI_RGB({H:(x[0]+180)%360,S:150*r,I:250*v})}p.push(e.color.space(x,"RGB>HEX24>W3"))}return p};return c};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.StylePalette)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.StyleGCO=function(e,c){var a=e.util;c.setComposite=function(b,d,r){b=k(b);var m=e.doc,l=m.toolkit;d=d||m.tool.type;var f=l.getDeviceFromType(d);if(f){d=m.config[d];if("eraser"===d.type)return;var h=d.composite;h&&h.setValue?h.setValue(b):d.composite=b;f.composite=b;r&&m.selection.length&&l.setParam({tool:"*",param:"composite",value:b,selection:m.selection.items})}c.composite!==b&&(c.composite=b,a.Canvas.blip(m.contexts.draw),m.render.setGCO(b))};c.getComposite=
function(a,d){a=m(a);return d&&b[a]?"source-over":a};var b=a.array2object("source-in source-out source-atop destination-over destination-in destination-out destination-atop copy xor".split(" ")),k=c.getCompositeReadable=function(a){a=a||c.composite;return u[a]||a},u={"source-over":"normal","destination-out":"erase"},m=c.getCompositeNative=function(a){a=a||c.composite;return d[a]||a},d={normal:"source-over",disco:"lighter",erase:"destination-out"};c.getBlendOptions=function(){return"normal ~br~ darken multiply color-burn ~br~ lighten screen color-dodge ~br~ overlay soft-light hard-light ~br~ difference exclusion disco ~br~ hue saturation color luminosity ~br~ erase source-atop destination-over".split(" ")};
c.isSourceOver=a.array2object(["normal","source-over"]);c.isComposite=function(a){return a&&(a=a.selected||a)?x[a]:!1};var x=a.array2object("normal darken multiply color-burn lighten screen color-dodge overlay soft-light hard-light difference exclusion hue saturation color luminosity erase disco".split(" ").concat("source-over source-in source-out source-atop destination-over destination-in destination-out destination-atop lighter darker copy xor".split(" ")))};"undefined"!==typeof module&&module.exports&&
(module.exports=q.module.StyleGCO)})(sketch);"undefined"===typeof sketch&&(sketch={});sketch.color=sketch.color||{};sketch.color.gradient=sketch.color.gradient||{};
(function(q){q.color.gradient.getColors=function(e){var c=q.color.space,a=q.util?new q.util.Random(e.seed||1):Math.random,b=e.reflect||!1,k=e.dna,u=e.resolution||1,m=e.length||1,d=!1,x=e.blend||"Normal",p;q.color.blend?(d=q.color.blend.isAlphaRequired[x],p=q.color.blend[x]):p=function(a,b){return a*b/255};var w=e.H||0,r=e.S||0;e=e.L||0;if(k){"string"===typeof k&&(k=k.split(","));for(var v=[],l=0;l<k.length;l+=2)v.push({hex:k[l+1],stop:parseFloat(k[l],10)/(b?2:1)});if(b)for(b=k.slice(0).reverse(),
l=0;l<b.length;l+=2)v.push({hex:b[l],stop:.5-parseFloat(b[l+1],10)/2+.5});var b=0,l=v[b].hex,k="string"===typeof l?"W3>HEX32>RGBA":"HEX32>RGBA",l=c(l,k),f=v[b].stop,h=v[b+1];if(!h)return v;for(var g=c(h.hex,k),h=v[b+1].stop,y=[],z=0;z<=m;z+=u){var s;s=z/m;s>h&&(b++,v[b]&&(l=g,f=h,v[b+1]&&(g=c(v[b+1].hex,k),h=v[b+1].stop)));s=(s-f)/(h-f);Infinity===s&&(s=0);if("Normal"===x&&0===w&&0===r&&0===e)s=c.RGB_W3({R:l.R*(1-s)+g.R*s,G:l.G*(1-s)+g.G*s,B:l.B*(1-s)+g.B*s});else{var A=c.RGB_HSL({R:l.R*(1-s)+g.R*
s,G:l.G*(1-s)+g.G*s,B:l.B*(1-s)+g.B*s});s=c.HSLA_RGBA({H:(A.H+a.toDouble()*w+360)%360,S:Math.min(100,Math.max(0,A.S-a.toDouble()*r)),L:Math.min(100,Math.max(0,A.L-a.toDouble()*e)),A:255});A=c.HSLA_RGBA({H:(A.H+a.toDouble()*w+360)%360,S:Math.min(100,Math.max(0,A.S+a.toDouble()*r)),L:Math.min(100,Math.max(0,A.L+a.toDouble()*e)),A:255});d?(s=p(s,A),s=c(s,"HEX32>RGBA>W3")):s=c.RGBA_W3({R:p(s.R,A.R),G:p(s.G,A.G),B:p(s.B,A.B),A:p(s.A,A.A)})}y.push(z/m);y.push(s)}return y}}})(sketch);
RegExp.create=function(q,e,c){for(var a in e){var b=e[a],k=RegExp("{{"+a+"}}","gi");b.source&&(b=b.source.replace(/^\^|\$$/g,""));q=q.replace(RegExp("\\("+k.source+"\\)","gi"),"("+b+")");q=q.replace(k,"(?:"+b+")")}return RegExp(q,c)};
(function(q){q.color=q.color||{};var e=q.color.CSSLinearGradient=function(c){this.direction=c.direction;this.stops=c.stops;this.fromString=c.fromString};e.parse=function(c){if("string"!==typeof c)return null;c=c.replace(/-(moz|ms|o|webkit)-/,"");var a=c.match(e.regex.css);if(!a)return null;var b=a[1]||"top",a=a[2].match(e.regex.colorStop),k=parseFloat(b);if(!isNaN(k))switch((k%360+360)%360){case 0:b="left";break;case 90:b="bottom";break;case 180:b="right";break;case 240:b="top"}for(k=0;k<a.length;k++){var u=
a[k],m=u.match(e.regex.color)[0],u=(u=u.substr(m.length).match(e.regex.length))&&u[0];a[k]={color:m,position:u}}return new e({direction:b.replace("to ",""),stops:a,fromString:c})};e.regex={};e.regex.number=/^-?[0-9]*\.?[0-9]+$/;e.regex.keyword=/^(?:to\s|)(?:top\s+|bottom\s+)?(?:right|left)|(?:to\s|)(?:right\s+|left\s+)?(?:top|bottom)$/;e.regex.direction=RegExp.create("^(?:{{keyword}}|{{number}}deg|0)$",{keyword:e.regex.keyword,number:e.regex.number});e.regex.color=RegExp.create("(?:{{keyword}}|{{func}}|{{hex}})",
{keyword:/^(?:red|tan|grey|gray|lime|navy|blue|teal|aqua|cyan|gold|peru|pink|plum|snow|[a-z]{5,20})$/,func:RegExp.create("^(?:rgb|hsl)a?\\((?:\\s*{{number}}%?\\s*,?\\s*){3,4}\\)$",{number:e.regex.number}),hex:/^#(?:[0-9a-f]{1,2}){3}$/i},"i");e.regex.percentage=RegExp.create("^(?:{{number}}%|0)$",{number:e.regex.number});e.regex.length=RegExp.create("{{number}}{{unit}}|0",{number:e.regex.number,unit:/%|px|mm|cm|in|em|rem|en|ex|ch|vm|vw|vh/});e.regex.colorStop=RegExp.create("{{color}}\\s*{{length}}?",
{color:e.regex.color,length:e.regex.length},"gi");e.regex.css=RegExp.create("^linear-gradient\\(\\s*(?:({{direction}})\\s*,)?\\s*({{colorstop}}\\s*(?:,\\s*{{colorstop}}\\s*)+)\\)$",{direction:e.regex.direction,colorStop:e.regex.colorStop},"i")})(sketch);"undefined"===typeof sketch&&(sketch={});sketch.color=sketch.color||{};sketch.color.space=sketch.color.space||{};sketch.color.spacex=sketch.color.spacex||{};
(function(){var q={},e={"HEX24>HSL":"HEX24>RGB>HSL","HEX32>HSLA":"HEX32>RGBA>HSLA","HEX24>CMYK":"HEX24>RGB>CMY>CMYK","RGB>CMYK":"RGB>CMY>CMYK"},c=sketch.color.space=function(a,k){e[k]&&(k=e[k]);var u=k.split(">");if("object"===typeof a&&0<=a[0]){for(var m=u[0],d={},x=0;x<m.length;x++){var p=m.substr(x,1);d[p]=a[x]}a=d}if(q[k])return q[k](a);m=1;for(d=u[0];m<u.length;m++)1<m&&(d=d.substr(d.indexOf("_")+1)),d+=(0===m?"":"_")+u[m],a=c[d](a);return a},a=sketch.color.spacex=function(a,e){a=(a||"").replace(/ /g,
"");a=a.toLowerCase();var u={"#":function(a,b){a.hex=c.W3_HEX24(b);a.type="hex";var e=c.HEX24_RGB(a.hex);a.R=e.R;a.G=e.G;a.B=e.B;a.A=e.A},rgba:function(a,b){var e=c.W3_RGBA(b);a.R=e.R;a.G=e.G;a.B=e.B;a.A=e.A;a.type="rgba"},rgb:function(a,b){var e=c.W3_RGB(b);a.R=e.R;a.G=e.G;a.B=e.B;a.A=255;a.type="rgb"},hsla:function(a,b){var e=c.W3_HSLA(b);a.H=e.H;a.S=e.S;a.L=e.L;a.A=e.A;a.type="hsla"},hsl:function(a,b){var e=c.W3_HSL(b);a.H=e.H;a.S=e.S;a.L=e.L;a.A=255;a.type="hsl"}},m;for(m in u)if(0===a.indexOf(m))return u[m](this,
a),this;if(sketch.color.webcolors[a])u["#"](this,sketch.color.webcolors[a]);return this};a.prototype.toRGBA=function(){switch(this.type){case "hex":var a=c.HEX_RGB(this.hex);this.R=a.R;this.G=a.G;this.B=a.B;this.A=1;return this;case "rgb":return this.A=1,this;case "rgba":return this;case "hsl":this.A=1}};a.prototype.toRGB=function(){switch(this.type){case "hex":var a=c.HEX_RGB(this.hex);this.R=a.R;this.G=a.G;this.B=a.B;return this;case "rgb":return this;case "rgba":return this}};a.prototype.toHSLA=
function(){};a.prototype.toHSL=function(){switch(this.type){case "hex":return c.RGB_HSL(c.HEX24_RGB(this.hex));case "rgb":return c.RGB_HSL(this);case "rgba":return c.RGBA_HSLA(this)}};a.prototype.toHEX24=function(){switch(this.type){case "hex":return this.hex;case "rgb":case "rgba":return c.RGB_HEX24(this);case "hsl":case "hsla":return c.RGB_HEX24(c.HSL_RGB(this))}};a.prototype.toHEX32=function(){switch(this.type){case "hex":return this.hex+4278190080;case "rgb":case "rgba":return c.RGBA_HEX32(this);
case "hsl":case "hsla":return c.RGBA_HEX32(c.HSLA_RGBA(this))}};a.prototype.toHEX24String=function(){return c.HEX32_W3(this.toHEX24())};a.prototype.toHEX32String=function(){return c.HEX32_W3(this.toHEX32())};a.prototype.isW3Contrast=function(b,c,e){c=c||125;e=e||500;b=b?(new a(b)).toRGB():{r:0,g:0,b:0};c=this.isW3Brightness(b)<=c;e=this.isW3Difference(b)<=e;return!(c&&e)};a.prototype.isW3Brightness=function(a){return Math.abs((299*this.R+587*this.G+114*this.B)/1E3-(299*a.R+587*a.G+114*a.B)/1E3)};
a.prototype.isW3Difference=function(a){var c=Math.max(this.R,a.R)-Math.min(this.R,a.R),e=Math.max(this.G,a.G)-Math.min(this.G,a.G);a=Math.max(this.B,a.B)-Math.min(this.B,a.B);return c+e+a};c.W3Brightness=function(a,c){return Math.abs((299*a.R+587*a.G+114*a.B)/1E3-(299*c.R+587*c.G+114*c.B)/1E3)};c.W3Difference=function(a,c){var e=Math.max(a.R,c.R)-Math.min(a.R,c.R),m=Math.max(a.G,c.G)-Math.min(a.G,c.G);c=Math.max(a.B,c.B)-Math.min(a.B,c.B);return e+m+c};c.isW3Contrast=function(a,e){e=e||{R:255,G:255,
B:255};var u=125>=c.W3Brightness(a,e),m=500>=c.W3Difference(a,e);return!(u&&m)};c.RGB_W3=function(a){return"rgb("+(a.R>>0)+","+(a.G>>0)+","+(a.B>>0)+")"};c.RGBA_W3=function(a){return"rgba("+(a.R>>0)+","+(a.G>>0)+","+(a.B>>0)+","+("number"===typeof a.A?a.A/255:1)+")"};c.W3_RGB=function(a){a=a.substr(4,a.length-5).split(",");return{R:parseInt(a[0],10),G:parseInt(a[1],10),B:parseInt(a[2],10)}};c.W3_RGBA=function(a){a=a.substr(5,a.length-6).split(",");return{R:parseInt(a[0],10),G:parseInt(a[1],10),B:parseInt(a[2],
10),A:255*parseFloat(a[3]||1)}};c.HSL_W3=function(a){return"hsl("+(a.H+.5>>0)+","+(a.S+.5>>0)+"%,"+(a.L+.5>>0)+"%)"};c.HSLA_W3=function(a){return"hsla("+(a.H+.5>>0)+","+(a.S+.5>>0)+"%,"+(a.L+.5>>0)+"%,"+("number"===typeof a.A?a.A/255:1)+")"};c.W3_HSL=function(a){var c=a.indexOf("(")+1,e=a.indexOf(")");a=a.substr(c,e-c).split(",");return{H:parseInt(a[0],10),S:parseInt(a[1],10),L:parseInt(a[2],10)}};c.W3_HSLA=function(a){var c=a.indexOf("(")+1,e=a.indexOf(")");a=a.substr(c,e-c).split(",");return{H:parseInt(a[0],
10),S:parseInt(a[1],10),L:parseInt(a[2],10),A:255*parseFloat(a[3],10)}};c.W3_HEX=c.W3_HEX24=function(a){"#"===a.substr(0,1)&&(a=a.substr(1));3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return parseInt("0x"+a,16)};c.W3_HEX32=function(a){"#"===a.substr(0,1)&&(a=a.substr(1));3===a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return 6===a.length?parseInt("0xFF"+a,16):parseInt("0x"+a,16)};c.HEX_W3=c.HEX24_W3=function(a,c){c||(c=6);a||(a=0);var e,m=a.toString(16);for(e=m.length;e<c;)m="0"+m,e++;for(e=
m.length;e>c;)m=m.substr(1),e--;return"#"+m};c.HEX32_W3=function(a){return c.HEX_W3(a,8)};c.HEX_RGB=c.HEX24_RGB=function(a){return{R:a>>16,G:a>>8&255,B:a&255}};c.HEX_RGB=c.HEX24_RGBA=function(a){return{R:a>>16,G:a>>8&255,B:a&255,A:255}};c.HEX32_RGBA=function(a){return{R:a>>>16&255,G:a>>>8&255,B:a&255,A:a>>>24}};c.RGBA_HEX32=function(a){return(a.A<<24|a.R<<16|a.G<<8|a.B)>>>0};c.RGB_HEX24=c.RGB_HEX=function(a){0>a.R&&(a.R=0);0>a.G&&(a.G=0);0>a.B&&(a.B=0);255<a.R&&(a.R=255);255<a.G&&(a.G=255);255<a.B&&
(a.B=255);return a.R<<16|a.G<<8|a.B};c.RGB_CMY=function(a){return{C:1-a.R/255,M:1-a.G/255,Y:1-a.B/255}};c.RGBA_HSLA=c.RGB_HSL=function(a){var c=a.R/255,e=a.G/255,m=a.B/255,d=Math.min(c,e,m),x=Math.max(c,e,m),p=x-d,w,r=(x+d)/2;if(0===p)d=w=0;else{var d=.5>r?p/(x+d):p/(2-x-d),v=((x-c)/6+p/2)/p,l=((x-e)/6+p/2)/p,p=((x-m)/6+p/2)/p;c===x?w=p-l:e===x?w=1/3+v-p:m===x&&(w=2/3+l-v);0>w&&(w+=1);1<w&&(w-=1)}return{H:360*w,S:100*d,L:100*r,A:a.A}};c.RGBA_HSVA=c.RGB_HSV=function(a){var c=a.R/255,e=a.G/255,m=a.B/
255,d=Math.min(c,e,m),x=Math.max(c,e,m),p=x-d,w;if(0===p)d=w=0;else{var d=p/x,r=((x-c)/6+p/2)/p,v=((x-e)/6+p/2)/p,p=((x-m)/6+p/2)/p;c===x?w=p-v:e===x?w=1/3+r-p:m===x&&(w=2/3+v-r);0>w&&(w+=1);1<w&&(w-=1)}return{H:360*w,S:100*d,V:100*x,A:a.A}};c.CMY_RGB=function(a){return{R:Math.max(0,255*(1-a.C)),G:Math.max(0,255*(1-a.M)),B:Math.max(0,255*(1-a.Y))}};c.CMY_CMYK=function(a){var c=a.C,e=a.M;a=a.Y;var m=Math.min(a,Math.min(e,Math.min(c,1))),c=Math.round((c-m)/(1-m)*100),e=Math.round((e-m)/(1-m)*100);a=
Math.round((a-m)/(1-m)*100);m=Math.round(100*m);return{C:c,M:e,Y:a,K:m}};c.CMYK_CMY=function(a){return{C:a.C*(1-a.K)+a.K,M:a.M*(1-a.K)+a.K,Y:a.Y*(1-a.K)+a.K}};c.HSLA_RGBA=c.HSL_RGB=function(a){var c=a.H/360,e=a.S/100,m=a.L/100,d,x,p;0===e?m=e=c=m:(x=.5>m?m*(1+e):m+e-e*m,d=2*m-x,p=c+1/3,0>p&&(p+=1),1<p&&(p-=1),m=1>6*p?d+6*(x-d)*p:1>2*p?x:2>3*p?d+(x-d)*(2/3-p)*6:d,p=c,0>p&&(p+=1),1<p&&(p-=1),e=1>6*p?d+6*(x-d)*p:1>2*p?x:2>3*p?d+(x-d)*(2/3-p)*6:d,p=c-1/3,0>p&&(p+=1),1<p&&(p-=1),c=1>6*p?d+6*(x-d)*p:1>
2*p?x:2>3*p?d+(x-d)*(2/3-p)*6:d);return{R:255*m,G:255*e,B:255*c,A:a.A}};c.HSVA_RGBA=c.HSV_RGB=function(a){var c=a.H/360,e=a.S/100,m=a.V/100,d,x,p,w,r;if(0===e)d=x=p=Math.round(255*m);else switch(1<=c&&(c=0),c*=6,w=c-Math.floor(c),r=Math.round(255*m*(1-e)),p=Math.round(255*m*(1-e*w)),e=Math.round(255*m*(1-e*(1-w))),m=Math.round(255*m),Math.floor(c)){case 0:d=m;x=e;p=r;break;case 1:d=p;x=m;p=r;break;case 2:d=r;x=m;p=e;break;case 3:d=r;x=p;p=m;break;case 4:d=e;x=r;p=m;break;case 5:d=m,x=r}return{R:d,
G:x,B:p,A:a.A}};sketch.color.webcolors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",
darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",fuscia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",
gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}})();"undefined"!==typeof module&&module.exports&&(module.exports=sketch.color);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Library=function(e,c){var a=e.dom,b=c.toolkit,k=e.util;(function(){for(var a="template brush shape stamp text clipart image color gradient texture".split(" "),b=0;b<a.length;b++){var d=a[b];(e.lib[d]=e.lib[d]||{}).meta={}}})();e.lib.setData=function(a,b){if(b.data||b.official){var d=e.lib[a],x={};b.reset&&(d.tree=b.data?{}:d.defaultTree||{});new k.Queue({items:b,flatten:!0,oncomplete:function(){for(var b in d.tree)x[b]||(x[b]=d.tree[b]);d.tree=x;e.lib.init(a);
e.ui.configureBuild(null,!0)},next:function(a,b,e){if("reset"===b)return this.next();if("defaultValue"===b)return d.defaultItem=a,this.next();e=a;e.data&&(e=e.data);for(var m=0;m<e.length;m++){var l=e[m];"string"===typeof l&&(l={filepath:l,name:k.string.filename(l),category:a.category||"Unknown"});void 0===l.name&&(l.name=k.string.filename(l.filepath));void 0===l.id&&(l.id=l.name.replace(this.rxAlphaNumeric,"")+Date.now());var f=l.category||a.category||"Unknown";(x[f]||(x[f]=[])).push(l)}e=c.scene.copyRules(a,
{});d.meta[a.category||b]=e;this.next()}})}};e.lib.setClipartDefaultValue=function(a){var m=e.lib.clipart;if(a=a||m.defaultItem)a=0===a.indexOf("./")?a:m.path+"/"+a,delete b.media.style.render,b.media.style.src=a,c.config.clipart.src=a};e.lib.setClipartData=function(a){a&&(e.lib.setData("clipart",a),e.lib.setClipartDefaultValue(a.defaultValue))};e.lib.setStampDefaultValue=function(a){var b=e.lib.clipart;a=a||b.defaultItem;c.config.stamp.src=a};e.lib.setStampData=function(a){a&&(e.lib.setData("stamp",
a),e.lib.setStampDefaultValue(a.defaultValue))};e.lib.setTextData=function(a){a&&(e.lib.setData("text",a),a.defaultValue&&(c.config.text.fontFamily=a.defaultValue))};e.lib.setPaletteData=function(b){var c=function(d){var c=b[d];if(c){var m=c.official,k=c.data;!1===c.enabled?(e.feature.palette[d]=!1,a.setCSS("."+d+"-indicator","display","none")):(e.feature.palette[d]=!0,a.setCSS("."+d+"-indicator","display",""));if(m||k){if(m){for(var r=[],v=0;v<m.length;v++)r.push({dna:m[v],status:"official"});m=
r.concat(k)}else m=k;!0!==c.reset&&(m=m.concat(e.style[d]));if(!m.length)return;e.style.reset(d);e.style.add(m,d)}c.defaultValue&&(e.style.fill[d]=c.defaultValue)}};c("color");c("gradient");c("pattern");e.palette.rebuild()};e.lib.init=function(a){if(!e.loc.MEDIA)return console.log("loc not setup");var b=e.lib[a];b.meta=b.meta||{};b.path=e.loc.MEDIA+b.dir+"/";b.type=a;b.defaultTree=b.defaultTree||k.clone(b.tree);b.byId={};b.byName={};b.byPath={};b.paths=[];b.getSrc=function(a,d){if(a){var c=b.dir+
"/";d||(c=e.loc.MEDIA+c);var l=a.filepath||"";return 0===l.indexOf("#")?e.assets.getURL(l):0===l.indexOf("http")?l:c+l}};b.getThumbnail=function(d){if(d){var c=e.loc.MEDIA+"thumb/"+b.dir+"/",k=d.filepath||"";return 0===k.indexOf("http")?k:0===k.indexOf("#")?d.thumbnail:0===k.indexOf(".")?k.replace("/media/","/media/thumb/").replace(".svg",".png"):"text"===a?c+d.name+".png":c+k.replace(".svg",".png")}};b.getEntry=function(a){var d=b.byPath[a];if(d)return d;a=e.assets.getItem(a);return b.byPath[a.src]};
var d=function(d,c){for(var e=b.tree[c],l=0;l<e.length;l++){var f=e[l];f.type=a;f.category=c;f.filepath=f.filepath||"";f.filename=k.string.filename(f.filepath);f.folder=c;f.id&&(b.byId[f.id]=f);b.byName[f.name]=f;b.byPath[f.filepath]=f;b.paths.push(f)}},c=function(a,d,c){switch(c){default:return b.tree[d].sort(function(a,b){return a.name.localeCompare(b.name)})}},p;for(p in b.tree)c(a,p),d(a,p)};e.lib.setTemplateData=function(a){a&&e.lib.setData("template",k.clone(a))};e.lib.template.open=function(u,
m,d){var x=e.lib.template;e.lib.getTemplateData&&e.lib.getTemplateData();u=u||x.defaultItem;d="boolean"===typeof d?d:!0;var p=x.byId[u]||x.byName[u];if(!p)return console.log("missing template");d&&c.reset();var w=1,r=function(){p.alert&&(e.feature.alert=p.alert);var d=0;if(p.clip){var f=new e.vector.BBox(v.path),h=f.x2-f.x1,f=f.y2-f.y1,g=a.measure(a.$(".icon-powernib")),d=g.height-(g.padding[1]+g.padding[3])/2,g=c.getViewport();w=Math.min(g.width/h,(g.height-d)/f)-.05;c.setClip(p.clip,w)}c.setSize(h*
w,f*w);p.background&&c.setBackground(p.background);var y=c.tool.type,h=k.clone(p.data);c.scene.add({data:h,scale:w,onload:function(){c.scene.deselectAll();b.setTool(y);c.orient.reset().render();c.orient.setPan(0,d/2);e.lib.setClipartDefaultValue();m&&m(w)}})};if(p.clip){var v=p.clip;"string"===typeof v.path?(v.path=e.vector.SVGPath.toVOBPath(path),r()):"string"===typeof v.src?new e.vector.SVG({src:v.src,onload:function(a){v.path=a.vob.childNodes[0].data;r()}}):v.path&&r()}else r()}}})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Scene=function(e,c){var a=this,b=e.assets,k=e.detect,u=e.feature,m=e.lang,d=c.contexts,x=e.net,p=c.render,w=e.style,r=c.toolkit,v=e.ui,l=e.util,f=e.vector;p&&p.clean&&(a.render=p.clean);a.push=function(b,g){g&&a.decompress(b);a.children.push(b);a.childrenById[b.id]=b};a.pushAt=function(b,g,h){h&&a.decompress(b);a.children.splice(g,0,b);a.childrenById[b.id]=b};a.shiftAt=function(b){var g=a.children[b].id;a.children.splice(b,1);delete a.childrenById[g]};a.setData=
function(b,g){a.children=[];a.childrenById={};for(var h=0;h<b.length;h++)a.push(b[h],g)};a.addObject=function(g,h,f){h=h||{};if(!1===a.ensureMaxCopies(g))a.deselectAll();else{g=l.mixin(g,{id:a.createId(h.id,f,"id"),zIndex:a.children.length,bbox:{x:0,y:0,width:0,height:0,rotate:0,scale:{x:1,y:1}}});f=g.bbox;void 0===f.viewBox&&(f.viewBox=[0,0,f.width,f.height]);a.copyRules(h,g);a.ensureStickyIndex(g);a.push(g);a.sort();a.reindex();f=a.getById(g.id).zIndex;var d=a.selection;!1===g.selectable?d.deselect(f):
d.select(f,!0);a.updateSelectionInfo();r.ensureToolkit(g);h.src&&h.src!==g.src?(g.src=h.src,b.add({type:g.type,src:h.src,onload:function(a){g.src=a;r.loadResource(g,A,A);e.peer&&e.peer.sendFile&&b.getBlob(a,function(b){e.peer.sendFile(b,a)})}})):r.loadResource(g,A,A);return g}};a.removeById=function(b,g){var h=a.getById(b);h&&a.removeByIndex(h.zIndex,g);return a};a.remove=a.removeByIndex=function(b,g){g=!1!==g;switch(typeof b){case "undefined":return a;case "number":var h={};h[b]=!0;b=h;break;default:b=
l.clone(b)}for(var h={},f=[],d=[],s=a.selection.items,y=a.children.length,z=0;z<y;z++){var r=a.children[z];b[z]?(g&&d.push(a.clone(r)),p.cache.clean(r.hash),c.scene.setDirtyPixelData(r)):(f.push(r),h[r.id]=r);s[r.zIndex]&&a.selection.deselect(r.zIndex)}g&&(e.on.layerRemove&&(s=a.selection.toLayers(b),e.on.layerRemove(s)),c.history&&c.history.store({cmd:"remove",icon:"infinity",name:"remove-objects",data:d}));a.children=f;a.childrenById=h;a.reindex();a.updateSelectionInfo();return a};a.removeByName=
function(b,g){var h=a.getByName(b);h.length&&(h=a.selection.fromLayers(h),a.removeByIndex(h,g));return a};a.removeSelection=function(b,g){b=b||a.selection.items;a.removeByIndex(b,g);a.deselectAll();return a};a.removeAll=function(b){var g=a.selection.fromLayers(a.children);a.removeByIndex(g,b);a.deselectAll();return a};a.clear=function(b){b=!1!==b;l.Canvas.blip(d.active);l.Canvas.clear(d.layer0);a.removeAll(b);return a};a.reset=function(b){a.deselectAll();a.children=[];a.childrenById={};c.history&&
c.history.resetActionHistory();p.scene&&p.scene("doc.scene.reset");if(b||e.fromServer)return a;x.dataChannel&&u.stream.sketch&&!b&&x.dataChannel.send(["scene.reset"]);return a};a.deselectById=function(b){return(b=a.getById(b))?a.deselectByIdx(b.zIndex):a};a.deselect=a.deselectByIdx=function(b,g){var f=[],d=a.selection;if("object"===typeof b)if(d=b,Array.isArray(d))for(var s=0;s<d.length;s++)b=d[s],h(b,!1)&&f.push(b);else for(b in d)h(b,!1)&&f.push(b);else h(b)&&f.push(b),b===d.idx&&1<d.length&&(d.resetFocus(),
a.controls=[]);I(f);return a};var h=function(b){var g=a.selection;return g.items[b]?(g.deselect(b),!0):!1};a.deselectByName=function(b){b=a.getByName(b);b.length&&(b=a.selection.fromLayers(b),a.deselectByIdx(b));return a};a.deselectAll=function(){var b=Object.keys(a.selection.items);r.area.hide&&r.area.hide();a.selection.reset();a.hovered.reset();a.controls=[];I(b);return a};a.selectById=function(b,g){var h=a.getById(b);h&&a.selectByIdx(h.zIndex,g);return a};a.select=a.selectByIdx=function(b,h){if(!u.vector.edit)return a;
var f=[];if("object"===typeof b){h&&a.deselectAll();var d=b;if(Array.isArray(d))for(var s=0;s<d.length;s++)b=d[s],g(b,!1)&&f.push(b);else for(b in d)g(b,!1)&&f.push(b)}else if(a.children[b])g(b,h)&&f.push(b);else return a;H(f);return a};var g=function(b,g){var h=a.children[b];if(!1===h.selectable)return!1;h.dirtyControl=!0;var f=a.selection;if(!1!==g){c.tool.type!==h.type&&(a.toolkit&&(a.toolkit.disable(),delete a.toolkit),"text"===h.type&&h.toolkit&&(a.toolkit=h.toolkit,a.toolkit.enable()));if(1===
f.length&&f.items[b])return!1;a.deselectAll();f.select(b);w.cloneToGlobal(h);v.setToolMenu&&v.setToolMenu(h.type,!0)}else{if(f.items[b])return!1;f.select(b);1<f.length&&(f.resetFocus(),a.controls=[])}return!0};a.selectByName=function(b,g){var h=a.getByName(b);h.length?(h=a.selection.fromLayers(h),a.selectByIdx(h,g)):g&&a.deselectAll();return a};a.selectAll=function(){y();return a};a.selectInverse=function(){y(!0);return a};var y=function(b){if(u.vector.edit){var g=a.selection.items,h=a.children,f=
h.length;a.selection.resetFocus();a.controls=[];for(var d=[],s=[],c=0;c<f;c++)!1!==h[c].selectable&&(b&&g[c]?(a.selection.deselect(c),s.push(c)):(a.selection.select(c),d.push(c)));a.handleSelection();H(d);I(s)}};a.getById=function(b){return a.childrenById[b]};a.getByIndex=function(b){return a.children[b]};var z=function(b){return function(g){for(var h=[],f=a.children,d=0;d<f.length;d++){var s=f[d];void 0!==s[b]&&s[b]===g&&h.push(s)}return h}};a.getByGroup=new z("groupId");a.getByName=new z("name");
a.getBySrc=new z("src");a.getLast=function(){return a.children[a.children.length-1]};a.getFocused=function(){return a.selection.item||a.hovered.item};a.getOneSelected=function(){if(a.selection.item)return a.selection.item;for(var b in a.selection.items)return a.children[b]};a.getHovered=function(){return a.hovered.item};a.getSelected=function(){return a.selection.item};a.getSelection=function(b,g){return a.selection.toLayers(b,g)};a.getCollisions=function(b,g){g=g||{};var h=[],d=f.Path.SAT,s=b.trx2D;
if(!s)return h;for(var c=[s.nw,s.ne,s.se,s.sw],y=g.objects||a.children,l=y.length,e=isFinite(g.idx)?g.idx:l-1;e<l;e++){var z=y[e];z.id!==b.id&&z.trx2D&&(s=z.trx2D,d(c,[s.nw,s.ne,s.se,s.sw])&&(g.fn?g.fn(z):h.push(z)))}return h};a.setDirtyPixelData=function(b,g){b&&u.canvas.filter&&(b.usePixelData&&(b.dirtyCache=!0),a.getCollisions(b,{idx:isFinite(g)?g:b.zIndex,fn:function(a){a.usePixelData&&(a.dirtyCache=!0)}}))};a.getObjectFromPoint=function(b,g,h){var f;if(isFinite(b))f=b,b=g,g=h||{};else if(isFinite(b.x))f=
b.x,b=b.y,g=g||{};else return;return a.children[r.select.findSingleAction({x:f||0,y:b||0,layers:g.layers||c.scene.children,pointerUp:g.pointerUp||!1,searchParam:g.searchParam||null})]};a.find=function(b,g){g=g||{};var h=a.children,f=g.selection||a.selection.items,d=[],s;for(s in f)if(f=h[s]){var c=!0,y;for(y in b)f[y]!==b[y]&&(c=!1);c&&d.push(f)}return d};var s=function(b,g){return function(h){h=h||a.selection.items;for(var f in h)if(h=a.children[f])h[b]=g;return a}};a.traverse=function(b,g,h){var f=
a.children;"function"===typeof b?l.each(f,b):(new s(b,g))(h||a.selection.items)};a.setDirtyCache=new s("dirtyCache",!0);a.setDirtyControl=new s("dirtyControl",!0);a.setDirtyTransform=new s("dirtyTransform",!0);a.setDirtyBounds=new s("inbounds",void 0);var A=function(a){e.on.layerAdd&&e.on.layerAdd(a)},H=function(b){b.length&&(a.updateSelectionInfo(),e.on.select&&(b=c.selection.toLayers(b),b.length&&e.on.select(b)))},I=function(b){b.length&&(a.updateSelectionInfo(),e.on.deselect&&(b=c.selection.toLayers(b),
b.length&&e.on.deselect(b)))};a.updateSelectionInfo=function(){if("undefined"===typeof document)return a;var b=document.querySelector(".sk-selection-count");if(b){var g=a.selection;if(g.length){var h=m.translate("select-tool-count",g.length)+":",f={};g.traverse(function(a){a=a.type;f[a]||(f[a]=0);f[a]++});var h=h+'<div style="margin: 5px 0 0 25px;">',d;for(d in f)var g=f[d],s=1<g?"s":"",c=m.translate(d),h=h+(g+" "+c+" layer"+s+"<br>");h+="</div>"}else h=m.translate("select-tool-message");b.innerHTML=
h}return a};a.handleSelection=function(){if(!u.vector.edit)return a;var b=u.tools.select.useConfigure,g=a.selection,h=g.length;if(0===h)b&&v.configureBuild();else if(1===h)(h=g.item)?(b&&v.configureBuild(h.type),"text"===h.type&&r.text.textarea&&(r.text.textarea.innerHTML=h.content,r.text.textarea.style.color=h.fillStyle,h.toolkit.updateObjectSize())):u.debug&&console.warn(g.idx,g.items);else if(g.resetFocus(),a.controls=[],b){var f,b=!0,d;for(d in g.items)if(h=a.children[d])if(f=f||h.type,f!==h.type){b=
!1;break}v.configureBuild(b?f:void 0)}return a};var J=/[^a-zA-Z]/g,q=/[^0-9]/g,B=function(a,b){return a.zIndex>b.zIndex?1:-1},E=function(a,b){return a.id>b.id?1:-1},F=function(a,b){var g=a.name||"",h=b.name||"",f=g.replace(J,""),d=h.replace(J,"");return f===d?(f=parseInt(g.replace(q,""),10),d=parseInt(h.replace(q,""),10),f===d?0:f>d?1:-1):f>d?1:-1};a.sort=function(b){switch(b){case "name":a.children.sort(F);break;case "id":a.children.sort(E);break;default:a.children.sort(B)}};a.reindex=function(){for(var b=
a.children,g=a.selection.items,h=[],f=0,d=b.length,s;f<d;f++)if(s=b[f]){var c=s.zIndex;g[c]&&(delete g[c],h.push(f));s.zIndex=f}a.hovered.reset();a.selection.reset();f=0;for(d=h.length;f<d;f++)c=h[f],a.selection.select(c);a.updateSelectionInfo()};a.createId=function(b,g,h){h=h||"id";var f=a.children;if(g){b=l.INFINITY_MINUS_8bit;for(g=0;g<f.length;g++){var d=f[g],s=d[h];s>b&&(b=d[h])}return b+1}if(b&&(g=typeof b,("string"===g||"number"===g)&&!a.getById(b)))return b;for(g=b=0;g<f.length;g++)d=f[g],
s=d[h],s>l.INFINITY_MINUS_8bit||s>b&&(b=d[h]);return b+1};a.createGroupId=function(b,g){return a.createId(b,g,"groupId")};a.createHash=function(a,b){b=b||{};for(var g="",h=[a],f=k.useLocalAlpha;a=h.shift();)for(var d in a){var s=a[d];if(null!==s&&void 0!==s&&!L[d]&&!G[d]&&!b[d])if("fill"===d){if(g+=s.noise,g+=s.mode,g+=s.enabled,s=s[s.type])g+=s.substr(0,256)}else if("stroke"===d&&s.lineWidth){if(g+=s.noise,g+=s.mode,g+=s.lineWidth,g+=s.lineCap,g+=s.lineJoin,g+=s.enabled,s=s[s.type])g+=s.substr(0,
256)}else if("opacity"===d)f[a.type]&&(g+=d+":"+s);else if("scale"!==d||a.type)if("src"===d)g+=s.substr(0,256);else if("bbox"===d)s=a.bbox,g+="width:"+s.width,g+="height:"+s.height,g+="padding:"+s.padding,s.scale&&(s=s.scale,g+="scale:"+s.x+","+s.y);else{var c=typeof s;"string"===c?g+=d+":"+s.substr(0,256):"number"===c?g+=d+":"+s:"object"!==c?g+=d+":"+s:s.childNodes||s.getImageData||s&&h.push(s)}}h=5381;f=0;for(d=g.length;f<d;f++)h=(h<<5)+h+g.charCodeAt(f);return h};a.compress=function(b,g){return a.clone(b,
!0)};a.clone=function(b,g){if(!b||!b.constructor||"object"!==typeof b)return b;if(!b.childNodes&&!b.getImageData){var h=new b.constructor,f;for(f in b)if(!L[f]){var d=b[f],s=typeof d;"number"===s||"string"===s||"boolean"===s?h[f]=d:"object"===s&&("fill"===f||"stroke"===f?(d=w.clone(d,g))&&(h[f]=d):h[f]=g&&d&&d.getValue?d.getValue():a.clone(d,g))}return h}};a.roundData=function(a,b){b=b||1E3;for(var g in a)if(a[g]){var h=a[g].data;if(h&&h.length)for(var f=0;f<h.length;f++){var d=h[f];d.x=Math.round(d.x*
b)/b;d.y=Math.round(d.y*b)/b}h=a[g].bbox;h.width=Math.round(h.width*b)/b;h.height=Math.round(h.height*b)/b;h.x=Math.round(h.x*b)/b;h.y=Math.round(h.y*b)/b}return a};a.decompress=function(a){if("string"===typeof a.filter){var b=/\(([^)]+)\)/.exec(a.filter),b=[[{cmd:"shader",id:a.filter.replace(b[0],""),data:b[1].split(",").map(function(a){return parseFloat(a)})}]],b=new v.vars.FilterStack({filter:b});a.filter=b}void 0!==a.fill&&(a.fill=new w.Fill(a.fill));void 0!==a.stroke&&(a.stroke=new w.Stroke(a.stroke));
return a};a.toString=a.stringify=function(b){b=b||a.children;return JSON.stringify(a.clone(b,!0))};a.copyAttributes=function(a,b,g){if(b&&g){for(var h in a){var f=a[h],d=b[h],s=g[h];if("undefined"!==typeof d)if(d.getValue)g[h]=d.getValue();else if("filter"===f)g[h]=d.data||d;else if("style"===f){if(s&&s.color===d.color&&s.gradient===d.gradient&&s.pattern===d.pattern&&s.type===d.type)if(s instanceof w.Stroke){if(s.lineWidth===d.lineWidth)continue}else continue;g[h]="fill"===h?new w.Fill(d):new w.Stroke(d)}else"object"===
f?s&&s.min===d.min&&s.max===d.max||(g[h]=l.clone(d)):s!==d&&(void 0===d.value?isFinite(d.min)||isFinite(d.max)?g[h]={min:d.min,max:d.max}:g[h]=d:g[h]=d.value)}return g}u.debug&&console.log("doc.scene.copyAttributes",arguments)};a.copyRules=function(b,g){a.copyAttributes(e.attrs.__rules,b,g);return g};a.copyProperties=function(b,g,h){a.copyAttributes(e.attrs.__rules,g,h);a.copyAttributes(b.attributes,g,h);return h};a.ensureStickyIndex=function(b){b.useStickToBack&&(b.zIndex=-1);b=l.INFINITY_MINUS_8bit;
for(var g=0;g<a.children.length;g++){var h=a.children[g];h.useStickToFront&&(h.zIndex=b++)}};var C=function(a){alertify.log_visible()||(a=a.useMaxCopies,a=m.translate("useMaxCopies-alert",a,1<a?"copies":"copy"),e.ui.log(a))};a.ensureMaxCopies=function(g){if("string"!==typeof g.src)return!0;var h=a.children,f={},d=g.src,s=e.lib[g.type],c=s&&s.getEntry(d);if(c){var y=c.folder;if((c=s.meta[y])&&c.useMaxCopies){for(var l=s.tree[y],y=0;y<l.length;y++)for(var z=s.getSrc(l[y]),r=0;r<h.length;r++){var m=
h[r];if(void 0!==m.src&&m.id!==g.id){d=m.src;if(0===d.indexOf("#")){d=b.getItem(m.src,m.type);if(!d)continue;d=d.src}var m=d,k=z,m=m===k?!0:m.length<k.length?k.indexOf(m)+m.length===k.length:m.indexOf(k)+k.length===m.length;if(m&&(f[d]||(f[d]=0),d=++f[d],d>=c.useMaxCopies))return g.useMaxCopies=c.useMaxCopies,C(g),!1}}return!0}}z=d;for(y=0;y<h.length;y++)if(m=h[y],void 0!==m.src&&m.id!==g.id&&(g.useMaxCopies||m.useMaxCopies)&&(d=(c=e.lib[m.type].getEntry(m.src))&&c.src||m.src,b.isEqual(d,z)&&(f[d]||
(f[d]=0),d=++f[d],d>=m.useMaxCopies)))return C(g),!1;return!0};var G=l.array2object("id zIndex clamp data visible tid".split(" ")),L=l.array2object("filePicker resource palette subtool reset callback hash render renderCache scaleCache breaks brush dirtyCheck dirtyCache dirtyCache dirtyTransform dirtyControl dirtyResource selected hovered inbounds error ctx trx trx2D trxInverse svg toolkit __cache __colors __textMetrics __offset".split(" "));a.children=[];a.childrenById={};a.copies=[];a.controls=[];
a.selection=new e.module.SceneSelection(e,c,a);a.hovered=new e.module.SceneSelection(e,c,a);return a};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Scene)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.AddMedia=function(e,c){var a=c.canvas2d,b=e.dom,k=e.feature,u=e.lang,m=c.render,d=c.scene,x=c.toolkit,p=e.util;c.addMedia=function(a,b,y,z){"string"===typeof a&&(a={src:a});var s=a.blob||a.element||a,m=s.slice&&"string"===typeof s.type,k=!!a.openAsNew;b=b||a.onload;z=z||a.onprogress;y=y||a.onerror;var v=a.thumb,u={};isFinite(a.x+a.y)?u={x:a.x,y:a.y}:a.event&&(u=d.getPointInCanvas(a.event));var q,B;m?s.lastModifiedDate?(q=q||s.src||s,B=p.string.extension(s.name)):
(q=URL.createObjectURL(s),B=(s.type||"image/png").split("/").pop()):s.src?(q=s.src,B=p.string.extension(q)):q=s;q.indexOf&&(0===q.indexOf("<svg")&&(q='<?xml version="1.0" encoding="UTF-8"?>'+q),0===q.indexOf("<?xml")&&(q="data:image/svg+xml;base64,"+btoa(q),B="svg"));if(v)return v.width=v.width||a.width,v.height=v.height||a.height,!v.croparea||isFinite(v.width)&&isFinite(v.height)||(v.width=v.croparea[2]-v.croparea[0],v.height=v.croparea[3]-v.croparea[1]),v.src=q,v.onload=function(f){delete a.thumb;
delete a.element;delete a.blob;delete a.src;a.element=f;c.addMedia(a,b,y,z)},p.thumbnailer(v);if(s.toDataURL)return s.toBlob(function(f){delete a.element;delete a.blob;delete a.src;a.blob=f;c.addMedia(a,b,y,z)});var v=function(){c.config.clipart.opacity.value=100;e.ui.refresh&&e.ui.refresh("clipart");c.setTool("select")},E={data:{},add:function(a){E.data[a]=!0},run:function(a){e.loader&&e.loader.stop();var b=E.data;b.clipart&&b.stamp&&delete b.clipart;for(var g in E.data)E.callbacks[g]();E.callbacks.callback(a)},
callbacks:{callback:function(f){if(b!==a.onload)a.onload();b&&b(f)},text:function(){e.ui.refresh&&e.ui.refresh("text");x.setTool("text")},stamp:function(){e.ui.refresh&&e.ui.refresh("stamp");x.setTool("stamp")},clipart:v,image:v,color:function(){e.palette.update("color",!0);e.windows.open("#sk-palette")},gradient:function(){e.palette.update("gradient",!0);e.windows.open("#sk-palette")},pattern:function(){e.palette.update("pattern",!0);e.windows.open("#sk-palette")}}};if(m)switch(B){case "zip":return r(s,
E);case "json":return e.open.json(s,function(){c.on.sketchReady(c)},function(){c.on.sketchReady(c)});case "sketchpad":case "sketch":return e.open.sketch(s,function(){c.on.sketchReady(c)});case "woff":return console.log("woff",s),E.run();case "pat":return console.log("pat",s),E.run();case "abr":return E.add("stamp"),w("ABR",s,E.run);case "gbr":return E.add("stamp"),w("GBR",s,E.run);case "ggr":return E.add("gradient"),e.style.addFromBlob(s,E.run);case "gpl":return E.add("color"),e.style.addFromBlob(s,
E.run);case "pdf":return l(s,u,E.run,!0,k);case "psd":return f(s,u,E.run,!0,k)}if("string"!==typeof q)return console.log("unrecognized",s);"{"===q.substr(0,1)?e.open.json(q,function(){c.on.sketchReady(c)},function(){c.on.sketchReady(c)}):(s=!!e.module.toolkit.media,m=function(b){k?e.exec("new-confirm",function(){e.open[B]({src:b,openAsNew:k,callback:function(){E.run()}})}):d.add({type:B,src:b,width:a.width,height:a.height,x:u.x,y:u.y},function(a){E.run(a)})},"svg"===B?s?(E.add("clipart"),B="clipart",
e.assets.addClipart(q,m,y,z)):e.open.svg(q):s?(E.add("image"),B="image",e.assets.addImage(q,m,y,z)):e.open.image(q))};var w=function(a,b,f){var d=e.io["blobTo"+a];if(d){var s=u.translate("decoding-format","."+a);e.loader&&(e.loader.create("decode",s),e.loader.create("files","..."));d(b,function(a,b,g,h){e.loader&&(e.loader.create("decode",s,Math.max(0,g-1)>>0),e.loader.create("files",b.name||"untitled"));e.assets.addStamp(a,function(a,b){100===g?(e.loader&&e.loader.create("decode",s,99),f&&f()):h&&
h()})})}else k.debug&&console.log("missing .abr support"),f&&f()},r=function(a,b){e.io.zip.getEntries(a,function(f){f.some(function(a,b,g){return"sketch.json"===a.filename})?e.io.zip.open(a):(e.loader&&(e.loader.create("decoding",u.translate("opening-format",".ZIP")+"..."),e.loader.create("decodingFiles","...")),e.io.zip.decode({entries:f,oncomplete:function(){e.loader&&(e.loader.stop("decoding"),e.loader.stop("decodingFiles"));b.run()},onchange:function(f){var d=f.blob,c=f.filename,y=f.next,l=p.string.extension(c),
l="undefined"===d.type?l:d.type;e.loader&&(e.loader.create("decoding",u.translate("opening-format",".ZIP")+"...",f.percent),e.loader.create("decodingFiles",p.string.filename(c)));switch(l){case "application/json":"sketch.json"===c?(e.loader&&(e.loader.stop("decoding"),e.loader.stop("decodingFiles")),e.io.zip.open(a)):y();break;case "image/jpeg":case "image/gif":case "image/png":case "jpeg":case "png":case "gif":b.add("clipart");e.assets.addImage(d,y);break;case "image/svg+xml":case "svg":b.add("clipart");
e.assets.addClipart(d,y);break;case "abr":b.add("stamp");w("ABR",d,y);break;case "gbr":b.add("stamp");w("GBR",d,y);break;case "ggr":b.add("gradient");e.style.addFromBlob(d,y);break;case "gpl":b.add("color");e.style.addFromBlob(d,y);break;default:y()}},onprogress:function(a,b,g){e.loader&&(e.loader.create("decoding",u.translate("opening-format",".ZIP")+"...",a),e.loader.create("decodingFiles",p.string.filename(g)))}}))})},v=function(a,b,f,d,s){e.ui.confirm({skip:!e.__modifiedFS,message:"clear-confirm",
callback:function(c){c&&a(b,f,d,!1,s)},labels:{ok:"open-doc",cancel:"cancel"}})},l=function(a,b,f,z,s){if(z&&s)return v(l,a,b,f,s);e.loader&&e.loader.create("decoding",u.translate("opening-format",".PDF")+"...");PDFJS.getDocument(URL.createObjectURL(a)).then(function(a){var h=[],l=0,z=0;new p.Queue({oncomplete:function(){e.loader&&e.loader.create("decoding",null,100);if(s){e.exec("new");c.setSize(z,l);c.pages={};c.pages.data=[];c.pages.current=0;c.pages.length=h.length;var a=0;new p.Queue({items:h,
flatten:!0,oncomplete:function(){c.setTool("select");e.exec("zoom-reset");d.selectByIdx(v,!1)},next:function(b,g,f){b=h[f];c.pages.data[f]={src:b.src,width:b.width,height:b.height};d.add({type:"image",src:b.src,width:b.width,height:b.height,x:b.width/2,y:a+b.height/2},this.next);a+=b.height}})}else{var r=e.feature,k=r.io.translateX,A=r.io.translateY,r=h.length-1;b=b||x.getCenterPoint();b.x-=r/2*k;b.y-=r/2*A;var v={};new p.Queue({items:h,flatten:!0,callback:function(){c.setTool("select");d.selectByIdx(v,
!1);m.scene("scene.addPDF");f&&f()},next:function(a,f,h){var s=this;d.add({type:"image",src:a.src,x:b.x+h*k,y:b.y+h*A},function(a){v[a.zIndex]=!0;s.next()})}})}},next:function(b){var g=this;a.getPage(b).then(function(f){var d=f.getViewport(1.5),s=p.Canvas(d.width,d.height);f.render({canvasContext:s.ctx,viewport:d}).then(function(){z=Math.max(s.width,z);l+=s.height;s.toBlobURL(function(f){if(e.loader){var d=Math.round(b/a.numPages*100);e.loader.create("decoding",null,d)}h.push({src:f,width:s.width,
height:s.height});g.next()})})})},range:{from:1,to:a.numPages}})})},f=function(a,b,f,d,s){f=new FileReader;f.onload=function(a){a=new Uint8Array(a.target.result);a=new PSD.Parser(a);a.parse();c.addMedia({element:a.imageData.createCanvas(a.header,a.colorModeData),x:b.x,y:b.y})};f.readAsArrayBuffer(a)};c.addBackground=function(b,g,f,l){"string"===typeof b&&(b={src:b});g=g||b.onload;f=f||b.onerror;l=l||b.onprogress;var s=function(a){a.name="background";a.selectable=!1;a.useStickToBack=!0;d.removeByName("background");
d.copyRules(b,a);a=d.addObject(a);d.updateConstrain(a);c.history&&c.history.store({cmd:"add",icon:"screen",name:"background",data:[a]});m.scene("doc.addBackground");g&&g(a)},r=e.style.validate(b.src);"color"===r||"gradient"===r?(f=c.container,s({type:"rectangle",fill:new e.style.Fill(b.src),stroke:new e.style.Stroke,width:f.offsetWidth,height:f.offsetHeight,useConstrain:!0,useStretchToEdge:!0})):e.assets.add({src:b.src,onprogress:l,onerror:f,onload:function(b,g){var f=g.width||g.vob.width,h=g.height||
g.vob.height,d={type:g.type||"image",src:b,bbox:{}},c=d.bbox,l=a.width,e=a.height;f/h<l/e?(d.useConstrainX=!0,d.useAlignY="top",c.width=l,c.height=h/f*l):(d.useConstrainY=!0,d.useAlignX="left",c.width=f/h*e,c.height=e);c.owidth=c.width;c.oheight=c.height;s(d)}})};c.addFromDrag=function(f){-1!==String(f).indexOf("Event")&&(f={target:this,src:this.src});var g=f.target,l=f.event,z=f.src||g.getAttribute("data-src")||g.src,s=f.type||g.getAttribute("data-type")||"clipart";e.assets.add(z);var r=b.clone(g,
"sk-dragable"),k=b.measure(g),v=k.padding,p=v[2]+v[3],u=k.border,w=v[0]+u[0],E=v[2]+u[2],q=k.width,C=k.height;r.style.width=q-(v[0]+v[1])+"px";r.style.height=C-p+"px";return eventjs.proxy.drag({position:"move",target:g,event:l,listener:function(b,g){if(!x.media)return console.log("missing toolkit");var l=eventjs.getCoord(b);if("down"===g.state){var l=eventjs.getCoord(b),y=eventjs.getBoundingBox(g.target);g.offset={};g.offset.x=y.width/2-(l.x-g.x);g.offset.y=y.height/2-(l.y-g.y);eventjs.prevent(b)}var k=
g.bbox.scrollBodyTop,v=g.bbox.scrollBodyLeft;r.style.left=g.x+v+w-1+"px";r.style.top=g.y+k+E-1+"px";if(!r.addedToDOM){var y=Math.abs(g.x-g.start.x),p=Math.abs(g.y-g.start.y);if(y>q/2||p>C/2)r.addedToDOM=!0,document.body.appendChild(r)}if("up"===g.state){y=l.x-v;p=l.y-k;r.style.display="none";var u=document.elementFromPoint(y,p);if(u&&u.classList.contains("layer-active")){d.deselectAll();m.scene("doc.addFromDrag");y=x.media;y.style.useMinWidth=1;y.style.useMaxWidth=2E3;var y=eventjs.getBoundingBox(c.container),
p=c.zoom,u=l.y-y.y1-y.scrollBodyTop-a.orientY,y=(l.x-y.x1-y.scrollBodyLeft-a.orientX)/p+g.offset.x+v,p=u/p+g.offset.y+k,H=c.tool.type;d.add({type:s,src:z,x:y,y:p,callback:function(a){c.tool.type!==H&&x.setTool(H);f.ondrop&&f.ondrop(a);e.on.select&&e.on.select([a])}})}else c.exportDrop(z,y,p);r.addedToDOM&&document.body.removeChild(r)}}})};c.exportDrop=function(a,b,f){!k.io.exportDrop||0<b&&0<f&&b<window.innerWidth&&f<window.innerHeight||(b=c.selection.item,e.assets.add({src:a,type:b?b.type:c.tool.type,
onload:function(b){var g=(p.string.filename(a)||"").split(".").shift();this.vob?e.download.blob(new Blob([this.stringify()],{type:"image/svg+xml"}),g+".svg"):e.assets.getBlob(b,function(a){e.download.blob(a,g+".png")})}}))};c.changeMedia=function(a){var b=a.type,f=a.src,l=a.onload,s=a.onprogress,r=a.onerror;k.vector.edit||"text"===c.tool.type||d.deselectAll();var v=c.selection.items,u="select"===c.tool.type,w=c.selection.item,w=c.config,q=[],B=[];switch(b){case "clipart":case "image":case "stamp":a=
f;"stamp"===b?(a=a.replace("thumb","live"),w[b].src=a):(w[b].src=a,w=x.media,w.style.src=a,w.style.render=void 0);for(var E in v)if(w=d.children[E],"image"===w.type&&"clipart"===b?w.type="clipart":"clipart"===w.type&&"image"===b&&(w.type="image"),w&&w.type===b)if(v=w.src,w.src=a,d.ensureMaxCopies(w)){var v={id:w.id,src:v},f={id:w.id,src:a},F=e.lib[w.type].getEntry(w.src);if(F)for(var C in e.attrs.__rules)void 0===F[C]?void 0!==w[C]&&(v[C]=w[C],f[C]="",delete w[C]):(v[C]=w[C],f[C]=F[C],w[C]=F[C]);
q.push(v);B.push(f);w.dirtyResource=!0;w.dirtyCheck=!0}else w.src=v;break;case "text":for(E in C=a.fontFamily||a.name,x.text.style.fontFamily=C,w[b].fontFamily=C,v)(w=d.children[E])&&"text"===w.type&&(q.push({id:w.id,fontFamily:w.fontFamily}),B.push({id:w.id,fontFamily:C}),w.fontFamily=C,w.dirtyResource=!0)}q.length&&B.length?(c.selection.length&&p.Canvas.blip(c.contexts.active),c.history&&c.history.store({cmd:"update",icon:"image",name:"change-media",data:{from:q,to:B}}),m.preload({onerror:r,onprogress:s,
onload:l})):x.setTool({type:b,onerror:r,onload:function(){u?x.setTool("select"):e.ui.setToolMenu&&e.ui.setToolMenu(c.tool.type);l&&l()}});c.saveSettings()}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.AddMedia)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.AddObject=function(e,c){c.addObject=function(a,b,k,u){var m=e.feature,d=c.render,x=c.scene,p=c.toolkit,w=e.util,r=e.vector,v=c.pixelRatio,l=c.zoom;a=a||{};b=b||a.onload||function(){};k=k||a.onerror||function(){};var f=a.type;if(Array.isArray(a)||a.data&&!f){f=a.data||a;if(isFinite(a.scale))for(var d=a.scale,h=0;h<f.length;h++)if(v=f[h],void 0!==v&&!v.useStretchToEdge&&!v.useStretchToFit){var g=v.bbox=v.bbox||{x:0,y:0};g.x*=d;g.y*=d;"text"===v.type?v.fontSize*=
d:(g.scale=g.scale||{x:1,y:1},g.scale.x*=d,g.scale.y*=d)}new w.Queue({items:f,flatten:!0,oncomplete:b,next:function(a){var b=this;c.addObject(a,function(a){b.next()},function(a){b.next()},u)}})}else{if(!p.exists(f))return m.debug&&console.warn(f+" toolkit not found."),k();d.dirtyControls=!0;var y=c.config[f];if(!0!==u){if("media"===y.toolkit&&a.src)return e.assets.add({type:f,targetId:a.targetId,src:a.src,onload:function(g,f){var h=p.media.style;h.bbox.viewBox="clipart"===f.type?f.viewBox:[0,0,f.width,
f.height];h.src=y.src=a.src;h.render=void 0;c.addObject(a,b,k,!0)}});if("text"===y.toolkit&&a.fontFamily&&(!r.text.supports[y.fontFamily]||y.fontFamily!==a.fontFamily))return p.text.loadFont({fontFamily:a.fontFamily,onerror:k,onload:function(){y.fontFamily=a.fontFamily;c.addObject(a,b,k,!0)}})}if(f&&f!==c.tool.type)return p.setTool({type:f,tid:a.fromSocket?"tool-socket":"tool",onerror:k,onload:function(){c.addObject(a,b,k,u)}});x.decompress(a);var g=a.bbox=a.bbox||{},z=a.x||g.x,s=a.y||g.y,A=function(b,
f){var h=typeof f;return typeof g[b]===h?g[b]:typeof a[b]===h?a[b]:f},H=function(a,b){return g[a]=A(a,b)},h=a.width,I=a.height,q=p.getCenterPoint(),d=A("scale",1);isFinite(d)&&(d={x:d,y:d});H("scale",d);H("rotate",0);H("x",q.x);H("y",q.y);isFinite(A("width",0))&&(h=H("width",0));isFinite(A("height",0))&&(I=H("height",0));H("padding",0);H("units",m.tools.units||"objectBoundingBox");isFinite(g.x)&&(g.x+=c.x*v);isFinite(g.y)&&(g.y+=c.y*v);a.points||a.data?(d=a.points||a.data,"string"===typeof d&&(d=
"M"===d[0]?r.SVGPath.toVOBPath(d):r.SVGPath.toVOBPolygon(d))):d=[{x:g.x,y:g.y}];H=d[0];H.cmd="M";v=p.getToolkit(f);if(1===d.length)if(h&&I)d.push({cmd:"L",x:H.x+h*l/2,y:H.y+I*l/2});else if(e.detect.useMediaKit[f])r=v.style.bbox.viewBox,h=r[2]-r[0],I=r[3]-r[1],z=c.bounds,r=Math.min(m.tools.maxWidth,z.width),z=Math.min(m.tools.maxHeight,z.height),w=w.fitSize(h,I,{width:g.width||"auto",height:g.height||"auto",maxWidth:r,maxHeight:z}),h=w.width,I=w.height,w=h/2,r=I/2,g.width=h,g.height=I,H.x-=w,H.y-=
r,d.push({cmd:"L",x:H.x+w,y:H.y+r});else if("text"===f){I=x.clone(c.config.text,!0);w.mixin(a,I);for(var l=r.text.getFontStyle(I),q=r.text.textTransform(a.content,I.textTransform).split("\n"),D=h||0,B=0,h=0;h<q.length;h++){var E=r.text.format(q[h],I),E=r.text.measureText(E,l);E.width>D&&(D=E.width);B+=E.height}isFinite(z)||(g.x=H.x-D/2);isFinite(s)||(g.y=H.y-B);g.width=g.width||D;g.height=g.height||B;w=w.clone(H);H.x-=D/2+5;H.y-=B/2;w.x+=D/2+5;w.y+=B/2;w.cmd="L";d.push(w)}else if("floodfill"===f)d.push(H);
else if("group"===f)d.push(H);else return b&&b(),console.warn("missing viewbox");2===d.length&&d.push({cmd:"z",x:d[1].x,y:d[1].y});(e.detect.brush[f]||v.createObject)&&v.getDevice&&(w=v.getDevice(f),x.copyProperties(v,a,w),v.deviceProxy.place=w);var w=function(){F()},F=function(a){if(a=p.area.exitGenesis()||x.getOneSelected())x.updateConstrain(a),"text"===a.type&&x.deselectAll();e.net.dataChannel&&m.stream.sketch&&a&&"image"===a.type&&e.net.dataChannel.send(["scene.update",[{id:a.id,bbox:a.bbox}]]);
c.render.scene("doc.addObject");b&&b(a)},H=e.detect.shape[f]?new v.record:v.record;if(v.createObject)return v.createObject({layer:a,bbox:g,points:d,device:v.deviceProxy.place},F);for(h=0;h<d.length;h++)switch(f=d[h],v=f.cmd||f.state,void 0===v&&(v=0===h?"M":h===d.length-1?"z":"L"),f={identifier:"place",x:f.x,y:f.y,layer:a,bbox:g,start:d[0]},v){case "down":case "M":f.state="down";H(null,f,w);break;case "move":case "L":f.state="move";H(null,f);break;case "up":case "z":f.state="up",H(null,f,F)}}}};"undefined"!==
typeof module&&module.exports&&(module.exports=q.module.AddObject)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Assets=function(e,c){var a=this,b=e.convert,k=e.feature,u=e.gen,m=e.lib,d=e.loc,x=c.toolkit,p=e.client,w=e.util,r=e.vector;this.reset=function(){a.data={};a.missing={};a.URLtoID={};a.IDtoURL={};return a};this.remove=function(b){delete a.data[b];delete a.missing[b];return a};this.isEqual=function(b,f){if(b===f)return!0;var h=a.getItem(b);return h&&h.src===f?!0:(h=a.getItem(f))&&h.src===b?!0:!1};this.getBlob=function(b,f,h,d){var c=a.getById(b);c.blob?f(c.blob,
b):c.srcXML?(c.blob=new Blob([c.srcXML],{type:"image/svg+xml"}),c.blob.lastModified=c.lastModified,f(c.blob,b)):v(c).toBlob(function(a){c.blob=a;c.blob.lastModified=c.lastModified;f(a,b)},h,d)};this.getBlobURL=function(b,f,h,d){a.getBlob(b,function(a){f(URL.createObjectURL(a))},h,d)};this.getDataURL=function(b,f,h){return v(a.getById(b)).toDataURL(f,h)};this.getURL=function(b){return a.getById(b).src||b};this.getId=function(b){return a.URLtoID[b]?a.URLtoID[b]:a.data[b]?b:""};this.getById=function(b,
f){var h=a.data[b];return h?h:a.createDefault(b,f)};this.getItem=function(b){return a.data[a.getId(b)]||""};this.getRaw=function(a){return v(a)};var v=function(a){return"IMG"===a.nodeName?b.imageToCanvas(a):a},l=w.array2object(["[object Blob]","[object File]"]),f=w.array2object(["[object HTMLCanvasElement]","[object HTMLImageElement]"]),h=w.array2object(["[object File]"]);this.addList=function(b,f){if(w.count(b)){var h=0,d=function(){--h||f()},c;for(c in b){h++;var l=b[c];"string"===typeof l&&(l=
{src:l,targetId:c});a.add(l,d,d)}}else return f()};this.add=function(g,d,z,s){"string"===typeof g?g={src:g}:l[String(g)]&&(g={blob:g});var r=g.src||g.blob||g.data||"",m;if(!(m=g.type))a:{if("string"===typeof r)switch(w.string.filename(r).toLowerCase().split(".").pop()){case "jpeg":case "jpg":case "png":case "gif":case "webp":m="image";break a;case "svg":m="clipart";break a}m=void 0}var v=g.targetId||null,p=g.lastModified||Date.now();d=g.onload||d;z=g.onerror||z;s=g.onprogress||s;var u,x=String(r);
if(!r)return console.warn("assets.js",g),z&&z();if(f[x])return a.createId(r,function(b){a.createResource(b,"image",r);d&&d.call(r,b,r)},v);if(l[x]){p=r.lastModified||p;if("image/svg+xml"===r.type)return b.blobToText(r,function(b){g.src=b;g.type="clipart";g.lastModified=p;a.add(g,d,z,s)});h[x]||(u=r);r=URL.createObjectURL(r)}if(0===r.indexOf("#asset-")){x=r;r=a.getById(r,g);if(void 0===a.data[x]){if(e.io.json.folder)return u="clipart"===g.type?".svg":".png",g.src=e.io.json.folder+x.substr(1)+u,a.add(g,
d,z,s);a.createDefault(x,g)}d&&d.call(r,x,r)}else{if(a.URLtoID[r]){var x=a.URLtoID[r],q=a.getById(x,g);if("clipart"!==q.type||!q.clone||k.cacheSVG){d&&d.call(q,x,q);return}}var F={type:m,src:r,blob:u,lastModified:p,onload:d,onerror:z,onprogress:s,targetId:v};u=a.detectFormat(r);if("clipart"===u)a.loadSVG(F);else if("image"===u)a.loadImage(F);else if("video"===u){var C=document.createElement("video");C.src=r;C.play();eventjs.add(C,"playing",function(){var b=w.Canvas(C.videoWidth,C.videoHeight);b.ctx.drawImage(C,
0,0);b.toBlobURL(function(b){c.addObject({type:"image",src:b});F.src=b;a.loadImage(F)})})}}};this.addClipart=function(b,f,h,d,c){a.add({type:"clipart",data:b,onload:function(a,b){var g=m.clipart;if(!g||!g.tree)return f(a,b);var h=g.tree["Your Files"];if(h)if(h[a])f&&f(a,b);else if(h[a]="loading",u.preview)u.preview({type:"clipart",resource:b,width:52,height:52,oncomplete:function(d){g.paths.splice(0,0,h[a]={type:"clipart",filename:a,filepath:a,thumbnail:d.canvas.toDataURL(),category:"Your Files"});
f&&f(a,b)}});else return f(a,b);else return f&&f(a,b)},onprogress:d,onerror:h,targetId:c})};this.addImage=function(b,f,h,d,c){a.add({type:"image",data:b,onload:function(a,b){var g=m.clipart;if(!g||!g.tree)return f(a,b);var h=g.tree["Your Files"];if(h)h[a]?f&&f(a,b):(h[a]="loading",w.thumbnailer({src:b,width:52,height:52,crop:"edge",onload:function(d){g.paths.splice(0,0,h[a]={type:"image",filename:a,filepath:a,thumbnail:d.toDataURL(),category:"Your Files"});f&&f(a,b)}}));else return f&&f(a,b)},onprogress:d,
onerror:h,targetId:c})};this.addFromActions=function(b){for(var f=0;f<b.length;f++){var h=b[f],d=h.src;if(d&&"#"===d[0])switch(h.type){case "clipart":a.addClipart(d);break;case "image":a.addImage(d);break;case "stamp":a.addStamp(d)}}};this.addCloneFromSelection=function(){e.save.toBlobURL({background:"none",useSelection:!0,callback:function(a){c.scene.add({type:"image",src:a})}})};this.addStampFromSelection=function(){e.save.canvas({background:"none",useSelection:!0,onsuccess:function(b){c.scene.deselectAll();
a.addStamp(b,function(){e.ui.refresh("stamp");x.setTool({type:"stamp",onload:function(){var a=c.tool.device.brush,b=a.fill;b[b.type]="none";delete a.fill.__colors}})})}})};this.addStamp=function(b,f,h,d,l){a.add({type:"image",data:b,onload:function(b,g){w.removeColorFromCanvas&&(g=a.getRaw(g),w.removeColorFromCanvas(g),a.data[b]=g);var h=m.stamp;if(!h)return f(b,g);var d=h.tree["Your Files"];if(!d)return f(b,g);d[b]?f&&f():(d[b]="loading",w.thumbnailer({src:g,width:52,height:52,crop:"edge",onload:function(a){c.config.stamp.src=
b;h.paths.splice(0,0,d[b]={type:"stamp",filename:b,filepath:b,thumbnail:a.toDataURL(),category:"Your Files"});f&&f(b,g)}}))},onprogress:d,onerror:h,targetId:l})};this.addPattern=function(a,b){};this.addFont=function(a,b){};this.detectFormat=function(a){var b=a.slice(-4).toLowerCase();return".png"===b||".jpeg"===b||".jpg"===b||".gif"===b?"image":".mp4"===b?"video":".svg"===b||r.SVG.detect(a)?"clipart":"image"};this.loadSVG=function(b){var f=b.src,h=b.targetId,s=b.lastModified,l=b.onload,e=b.onerror,
m=b.onprogress;0===f.indexOf("<svg")&&(f='<?xml version="1.0" encoding="UTF-8"?>'+f);0===f.indexOf("<?xml")&&(f="data:image/svg+xml;base64,"+btoa(w.string.encode_utf8(f)));return 0===f.indexOf("data:image/svg")?a.createId(f,function(b){var g=a.data[b];k.cacheSVG&&g&&"sk-default"!==g.className?l&&l.call(g,b,g):new r.SVG({src:f,ctx:c.contexts.cache.ctx,useCache:k.cacheSVG,onprogress:m,onerror:function(a){k.debug&&console.log(a);e&&e(a)},onload:function(f){f.lastModified=s;a.createResource(b,"clipart",
f);l&&l.call(f,b,f)}})},h):w.request({url:d.getMediaUrl(f),onerror:e,onload:function(b){a.add({targetId:h,data:b.responseText,onprogress:m,onerror:function(a){k.debug&&console.log(a);e&&e(a)},onload:function(b,g){a.URLtoID[f]=b;a.IDtoURL[b]=f;l&&l.call(g,b,g)}})}})};this.loadImage=function(f){var h=f.src,c=f.targetId,s=f.lastModified,l=f.onload,e=f.onerror,r=f.onprogress;w.loadImage({src:d.getMediaUrl(h),onprogress:r,onerror:e,onload:function(){var d=this;p.ios&&w.exists("MegaPixImage")&&(d=b.imageToCanvas(this));
a.createId(d,function(b){d.assetID=d.title=b;d.image={src:h};d.lastModified=s;d.setAttribute("data-src",h);a.URLtoID[h]=b;a.IDtoURL[b]=h;a.createResource(b,"image",d);if(f.blob)d.blob=f.blob;else if(k.stream.maxFileSize)return that.getBlob(b,function(a){l&&l.call(d,b,d)});l&&l.call(d,b,d)},c)}})};this.createId=function(b,f,h){if(h)return f(h);"string"===typeof b?25E4<b.length?f("#asset-"+w.MD5(b.substr(0,25E4))):f("#asset-"+w.MD5(b)):b.assetID?f(b.assetID):f(a.createIdFromImage(b))};this.createIdFromImage=
function(b){var f=b.width,h=b.height;if(64>f&&64>h&&b.toDataURL)return b.assetID="#asset-"+w.MD5(b.toDataURL()),b.assetID;var d=a.thumbnail||w.Canvas();d.ctx=d.ctx||d.getContext("2d");var c=Math.min(f,64),l=Math.min(h,64);d.width=c;d.height=l;d.ctx.drawImage(b,0,0,f,h,0,0,c,l);a.thumbnail=d;b.assetID="#asset-"+w.MD5(d.toDataURL());return b.assetID};this.createDefault=function(b,f,h){f=f||{};if(a.data[b]){h=a.data[b];var d=h.width;f=h.height}else h=w.Canvas(),d=f&&f.width||1,f=f&&f.height||1;h.width=
d;h.height=f;h.className="sk-default";var c=h.getContext("2d");c.fillStyle="rgba(127,127,127,0.5)";c.fillRect(0,0,d,f);a.data[b]=h;a.missing[b]=!0;return h};this.createResource=function(b,f,h){var d=a.data[b]||"",l="sk-default"===d.className;a.data[b]=h;a.data[b].type=f;(!d||l)&&(e.peerjs||e.peer&&e.peer.sendFile)&&a.getBlob(b,function(a){e.peerjs?e.peerjs.handle.file.send(a):e.sfclient&&!e.sfclient.files[b]&&e.peer.sendFile(a,b)});if(a.missing[b]||l)delete a.missing[b],c.scene.traverse(function(a){a.src===
b&&(a.dirtyCache=!0,x.media.loadResource({layer:a}))})};return this.reset()};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Assets)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Controls=function(e,c){var a=c.canvas2d,b=e.feature,k=c.contexts,u=c.render,m=c.scene,d=c.toolkit,x=e.util,p=d.area=d.area||{};d.contextEvent=function(a){eventjs.prevent(a);p.hideArea();u.scene("area.contextMenu");var b=eventjs.getCoord(a);a=eventjs.getBoundingBox(a.target);contextmenu.show(e.ui.menuSelect,b.x-a.scrollBodyLeft+5,b.y-a.scrollBodyTop+5,!0)};d.deleteEvent=function(a){var b=a.target,f=function(){eventjs.remove(b,"mouseup",f);if((m.controls[1]||
{}).hovered){p.hide();c.selection.remove();var a=0,h=setInterval(function(){var b=k.active,f=b.ctx;f.save();f.globalAlpha=.25;f.globalCompositeOperation="destination-out";f.fillRect(0,0,b.width,b.width);f.restore();10<++a&&(clearInterval(h),u.scene("root.deleteAction"))},25)}};eventjs.prevent(a);eventjs.add(b,"mouseup",f)};d.moveEvent=function(a){var b=c.zoom,f=m.getFocused()||m.getOneSelected();if(f){var h=f.trx2D;if(h){var g,l,y;return eventjs.proxy.drag({event:a,target:k.active,position:"absolute",
listener:function(a,r){eventjs.cancel(a);y=r.state;g=r.hasMoved();l="up"===y;window.contextmenu&&contextmenu.visible&&(y="up",r.pause());l?(p.hoverControl="",p.activeControl=""):g&&(p.activeControl="anchor");if(1===c.selection.length&&f.brush&&f.brush.move)f.brush.move(r);else{d.select.__moving=!l;switch(y){case "down":c.selection.move(0,0,{method:"cache"});break;case "move":c.selection.move((r.x-(r.px||0)+(c.scrollLeft-(r.scrollLeft||0)))/b,(r.y-(r.py||0)+(c.scrollTop-(r.scrollTop||0)))/b,{method:"move"});
break;case "up":c.selection.move(0,0,{method:"record"})}r.px=r.x;r.py=r.y;r.scrollLeft=c.scrollLeft;r.scrollTop=c.scrollTop;eventjs.isTouch&&l?(u.dirtyCenterPoint=!1,e.ui.tooltip&&e.ui.tooltip.update("")):u.dirtyCenterPoint={pt:{x:r.x,y:r.y},trx:h,origin:h.cp,bbox:f.bbox,useMove:g,useScale:!g}}},maxFingers:1})}}};var w=function(h,g,y){p.hideArea();u.scene("root.resizeEvent");var w=m.getFocused();if(w){var q=w.trx2D;if(q){var J=function(a,b,f){b+=E.rotate;var h=e.vector.Path,g=T;b=h.pointAtAngle(g,
b*x.DEG_RAD,1);b=h.pointOnLine(g,b,a);a=h.lineDistance(g,b)||C;h=0>h.pointDifference(g,b);void 0===G[f]&&(G[f]=h);return U&&$||"xy"===f?a:a*(G[f]===h?1:-1)},D=eventjs.getBoundingBox(h.target),B=c.zoom,E=w.bbox,F=x.clone(E),C=1E-10,G={},L,K,R={},N={},V={},P=p.hoverControl,Q=l[P],O=f[P],T=(eventjs.altKey||b.canvas.useGroupBoundingBox)&&1<m.selection.length?m.getBoundingOrigin({useSelection:!0}):"objectBoundingBox"===E.units?{x:q.cp.x+c.scrollLeft,y:q.cp.y+c.scrollTop}:q[v[P]]||q.cp,S,X,ba,W,Y,U,$;return eventjs.proxy.drag({position:"relative",
event:h,target:k.active,listener:function(f,h){eventjs.cancel(f);S=h.state;X="down"===S;ba="up"===S;h.hasMoved();W=!eventjs.shiftKey;Y=eventjs.shiftKey;U=!(!1===g||!1===w.rotatable||O||Q);$=!(!1===y||!1===w.scalable);window.contextmenu&&contextmenu.visible&&(S="up",h.pause());X?(p.hoverControl="",p.activeControl=P):ba&&(p.activeControl="");$&&1!==c.selection.length&&(X&&(!W||Q||O)?(c.selection.reset(),c.selection.select(c.hovered.idx),b.tools.select.useConfigure&&e.ui.configureBuild()):W=!0);d.select.__moving=
!ba;if(!c.__rendering||ba){var l={x:h.x,y:h.y};l.x/=B;l.y/=B;l.x-=1*a.x/B;l.y-=1*a.y/B;if(U){var z=T.x-l.x||C,m=T.y-l.y||C,z=-Math.atan2(z,m)*x.RAD_DEG+180,k=0;Y&&(z-=z%5,k=w.bbox.rotate%5);isFinite(L)||(L=z);K=z-L-k;L=z}else E.rotate=F.rotate;var G=E.scale,k=G.x,G=G.y;if($){if(O)z=C,m=J(l,90,"y");else if(Q)z=J(l,0,"x"),m=C;else if(z=J(l,0,"x"),m=J(l,90,"y"),W){if(b.tools.controls.useFlip)var ua=0>z?-1:1,ya=0>m?-1:1;else ya=ua=1;1<c.selection.length?(z=r[P],0>k!==0>G&&(z+=90),m=J(l,z,"xy")):m=Math.max(Math.abs(z),
Math.abs(m));z=m*ua;m*=ya}isFinite(R.x)||(R.x=z);isFinite(R.y)||(R.y=m);ua=F.scale;z=z/R.x*ua.x||(O?1:C);m=m/R.y*ua.y||(Q?1:C);V.x=z/(N.x||z);V.y=m/(N.y||m);N.x=z;N.y=m}else N.x=k,N.y=G;c.selection.transform({origin:T,method:S,control:v[P],rotate:K,scale:V});"spinner"===P&&(ya=0>G?-1:1,m=-Math.abs(J(l,90,"y")),l=(m+E.height*G/2*ya)*ya,q.spinner=q.spinnerDrag=q.point2d(E.width/2*k,l),q.spinnerDistance=l);q[P]&&(eventjs.isTouch&&ba?(u.dirtyCenterPoint=!1,e.ui.tooltip&&e.ui.tooltip.update("")):(l=q[P],
u.dirtyCenterPoint={pt:{x:l.x*B+D.x1+a.x,y:l.y*B+D.y1+a.y},origin:q.cp,bbox:w.bbox,useRotate:g,useScale:y}))}},maxFingers:1})}}};d.scaleEvent=function(a){w(a,!1,!0)};d.rotateEvent=function(a){w(a,!0,!1)};d.rotateScaleEvent=function(a){w(a,!0,!0)};var r={n:270,e:0,s:90,w:180,ne:315,se:45,sw:135,nw:225},v={n:"s",e:"w",s:"n",w:"e",ne:"sw",se:"nw",sw:"ne",nw:"se"},l={e:!0,w:!0},f={n:!0,s:!0};p.drawCenterPoint=function(b){var f=b.origin,h=b.trx,g=b.bbox,d=g.rotate,l=g.scale,y=b.useRotate,r=b.useMove;b.useScale?
(h=Math.abs(Math.round(g.width*l.x*100)/100),g=Math.abs(Math.round(g.height*l.y*100)/100),e.ui.tooltip&&e.ui.tooltip.update("W: "+h+" px<br>"+("H: "+g+" px"),b.pt)):r?(g=h.nw,l=h.ne,y=h.se,r=h.sw,h=Math.round(100*Math.min(g.x,l.x,y.x,r.x))/100,g=Math.round(100*Math.min(g.y,l.y,y.y,r.y))/100,e.ui.tooltip&&e.ui.tooltip.update("X: "+h+" px<br>"+("Y: "+g+" px"),b.pt)):y&&(h=Math.round((d+360)%360)+String.fromCharCode(176),e.ui.tooltip&&e.ui.tooltip.update(h,b.pt));h=c.pixelRatio;g=h*c.zoom;b=f.x*g+a.x;
f=f.y*g+a.y;h*=5;g=k.active.ctx;g.save();g.beginPath();g.shadowOffsetX=1;g.shadowOffsetY=1;g.shadowColor="rgba(255,255,255,0.5)";g.shadowBlur=0;g.beginPath();g.translate(b,f);g.rotate((d+45)*x.DEG_RAD);g.moveTo(0,-h);g.lineTo(0,h);g.moveTo(-h,0);g.lineTo(h,0);g.shadowColor="rgba(0,0,0,0.5)";g.strokeStyle="#dd167a";g.stroke();g.restore()};p.renderControls=function(a,b,f){if(isFinite(a)){var h={};h[a]=!0;a=h}else a={};var h=c.selection.items,g=1===c.selection.length,d=b||h!==JSON.stringify(h),l=k.active.ctx;
(b||f&&d)&&u.prepareGCO(c.tool.device.composite);m.controls=[];h=m.children;for(b=0;b<h.length;b++){f=m.children[b];d&&(f.dirtyControl=!0);isFinite(c.selection.idx);var e=c.selection.idx===b;c.hovered.items[b]&&!g||g&&e?p.drawControls(l,f):(a[b]||e)&&p.drawControls(l,f,!0)}};p.drawControls=function(f,g,d){var l=g.trx2D;if(l&&l.apply&&g&&!1!==g.visible&&g.dirtyControl){delete g.dirtyControl;var e=p.activeControl;if("anchor"!==e){var y="spinner"===e,r=!!v[e],k=c.selection.idx===g.zIndex;if((e=g.brush)&&
e.drawControl){var u=e.drawControl(g);k&&(m.controls=u)}else{var e=g.bbox,x=c.pixelRatio,w=c.zoom,q=w*x,L=1*x/q,K=e.scale,R=K.x,N=K.y,V=e.width,P=e.height,K=V*R,Q=P*N,O=b[g.type]||b.tools,u=O.controls,u=u.anchor||{};O.drawBoundingBox&&!y&&(f.save(),f.translate(a.x,a.y),f.scale(q,q),l.apply(f,!0),f.beginPath(),f.rect(0,0,K,Q),f.restore(),k=k?u.focus||{}:u.normal||{},f.save(),f.lineWidth=(k.lineWidth||2)*x,f.shadowOffsetX=k.shadowOffsetX||1,f.shadowOffsetY=k.shadowOffsetY||1,f.shadowBlur=k.shadowBlur||
0,"light"===b.theme?(f.shadowColor=k.shadowColor||"#fff",f.strokeStyle=k.strokeStyle||"#000"):(f.shadowColor=k.strokeStyle||"#000",f.strokeStyle=k.shadowColor||"#fff"),f.stroke(),f.restore());if(!d){m.controls=[];d=c.theme.getControls();k=d.padding;if(d.anchor){var x=d.anchor,O=x.padding,u=O*L,T="";c.selection.items[g.zIndex]&&(T=x["title."+g.type+":selected"]||x["title:selected"]);""===T&&(T=x["title."+g.type]||x.title||"");var S=l.point2d(0>R?R*V:0,0>N?N*P:0);m.controls.push({id:"anchor",layerId:g.id,
layerIdx:g.zIndex,type:"button",cursor:x.cursor,title:T,event:x.command,padding:O,bbox:{units:e.units,x:S.x,y:S.y,left:1.5*-O,top:1.5*-O,width:Math.abs(R*V+u),height:Math.abs(N*P+u),scale:{x:1,y:1},rotate:e.rotate}})}if(!r&&d.spinner&&!1!==g.useControlSpinner){f.save();f.translate(a.x,a.y);f.scale(q,q);f.lineWidth=1/w;f.beginPath();if(y){k=d["spinner-focus"];f.strokeStyle=k.fillStyle;f.moveTo(l.cp.x,l.cp.y);f.lineTo(l.spinnerDrag.x,l.spinnerDrag.y);f.stroke();f.restore();h(f,l,e,{id:"spinner",x:K/
2,y:l.spinnerDistance});return}f.moveTo(l.n.x,l.n.y);f.lineTo(l.spinner.x,l.spinner.y);f.stroke();f.restore();h(f,l,e,{id:"spinner",x:K/2,y:(d.width+k)/w*(0<N?-1:1)})}y=d.nw&&!1!==g.useControlNW;r=d.ne&&!1!==g.useControlNE;w=d.se&&!1!==g.useControlSE;q=d.sw&&!1!==g.useControlSW;R=d.n&&!1!==g.useControlN;N=d.e&&!1!==g.useControlE;V=d.s&&!1!==g.useControlS;g=d.w&&!1!==g.useControlW;P=y+R+r;x=y+g+q;O=k;u=(d.nw.width+O)*(P-1)*L;L*=(d.nw.height+k)*(x-1);d=Math.abs(K)-u;L=Math.abs(Q)-L;0>d&&(O=Math.max(0,
O+d/P));0>L&&(k=Math.max(0,k+L/x));y&&h(f,l,e,{id:"nw",x:0,y:0});r&&h(f,l,e,{id:"ne",x:K,y:0});w&&h(f,l,e,{id:"se",x:K,y:Q});q&&h(f,l,e,{id:"sw",x:0,y:Q});R&&h(f,l,e,{id:"n",x:K/2,y:0,xPad:O,yPad:k});N&&h(f,l,e,{id:"e",x:K,y:Q/2,xPad:O,yPad:k});V&&h(f,l,e,{id:"s",x:K/2,y:Q,xPad:O,yPad:k});g&&h(f,l,e,{id:"w",x:0,y:Q/2,xPad:O,yPad:k})}}}}};var h=function(f,g,h,d){var l=d.id,y;y=p.activeControl===l?"focus":p.hoverControl===l?"hover":"normal";var r=c.theme.getControls(),k=r[l+"-"+y]||r[l];if(k){var v=
c.pixelRatio,u=c.zoom*v,v=1*v/u,w=r.padding,r=isFinite(d.xPad)?d.xPad:w*v,w=isFinite(d.yPad)?d.yPad:w*v,q=k.width*v,v=k.height*v;g=g.point2d(d.x-q/2,d.y-v/2);h={units:h.units,x:g.x,y:g.y,left:-r+.5,top:-w+.5,width:q+2*r,height:v+2*w,scale:{x:1,y:1},rotate:h.rotate};m.controls.push({id:l,title:k.title,type:"button",cursor:"pointer",hovered:"hover"===y,event:k.command||{},bbox:h});f.save();f.beginPath();f.translate(a.x,a.y);f.scale(u,u);g=e.vector.Transform.__default;g.reset();g.translate(h.x,h.y);
g.rotate(h.rotate*x.DEG_RAD);g.translate(d.left||0,d.top||0);g.apply(f,!0);b.debugMouse&&(f.fillStyle="rgba(255,255,0,1)",f.fillRect(h.left||0,h.top||0,h.width,h.height));d=k.width/k.viewBox[2];k.render({ctx:f,matrix:{a:d,b:0,c:0,d:d,x:0,y:0}});f.restore()}},g={},y=String.fromCharCode(65279);p.exitGenesis=function(){if(p.inGenesis){p.inGenesis=void 0;var a=c.selection.item;if(a){if("text"!==a.type||a.content){var b=a.svg,f=m.clone(a);f.id=m.createId();f.dirtyCheck=!0;f.render=a.render;m.removeByIndex(a.zIndex,
!1);if(a=m.addObject(f))b&&(a.svg=b),u.scene("area.hide"),c.history&&!p.inGenesisChannel&&c.history.store({cmd:"add",icon:a.type,name:a.type,data:m.clone([a])});p.inGenesisChannel=!1;return a}b=d.text;f=b.cleanText(b.textarea.textContent);f!==y&&(a.content=f,b.updateObjectSize(a));m.removeByIndex(c.selection.idx,!1);m.deselectAll();g={}}}};p.hide=function(){var a=c.selection.item;c.__editing=!1;var b=d.text;if(b&&a&&"text"===a.type){b.textarea||b.createTextarea();var f=b.cleanText(b.textarea.textContent);
p.hideArea();f!==y&&(a.content=f,b.updateObjectSize(a));if(a.content.trim())a.dirtyCheck=!0;else if(p.inGenesis){m.removeByIndex(c.selection.idx,!1);m.deselectAll();p.inGenesis=void 0;g={};return}}else p.hideArea();if(p.inGenesis){if(p.inGenesis=void 0,a){b=m.clone(a);b.id=m.createId();b.dirtyCheck=!0;b.render=a.render;var h;a.svg&&(h=a.svg);m.removeByIndex(a.zIndex,!1);m.addObject(b);h&&(a.svg=h);m.deselectAll();u.scene("area.hide");c.history&&!p.inGenesisChannel&&c.history.store({cmd:"add",icon:b.type,
name:b.type,data:m.clone([b])});p.inGenesisChannel=!1}}else void 0!==g.id&&"text"===g.type&&b&&((a=m.getById(g.id))&&g.content!==a.content&&c.history&&c.history.store({cmd:"update",icon:"text",name:"update-text",data:{from:[{id:a.id,content:g.content}],to:[{id:a.id,content:a.content}]}}),b.createTextarea(),g={})};p.show=function(a){a=a||m.getOneSelected();if(void 0!==a){g=m.clone(a);var b=d.text;"text"===a.type&&b?(c.__editing=!0,b.textarea||b.createTextarea(),b.textarea.textContent=a.content?a.content:
y,b.container.style.opacity=1,b.container.style.display="block",a.dirtyControl=!0,u.scene("area.show")):p.hideArea()}};p.hideArea=function(){c.__editing=!1;var a=d.text;a&&(a.textarea&&(a.textarea.textContent=y,a.textarea.blur()),a.container&&(a.container.style.opacity=0,a.container.style.display="none"))}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Controls)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.History=function(e,c){var a=this,b=e.feature,k=c.contexts,u=e.lang,m=c.render||{},d=c.scene,x=c.toolkit,p=e.util;a.reset=function(f,g){e.__modifiedFS=e.__modifiedOnline=!1;var d=b.history;d.vector&&a.resetActionHistory(g);d.bitmap&&a.resetBitmapHistory(g);return a};a.store=function(h,g){e.__modified=e.__modifiedFS=e.__modifiedOnline=Date.now();var d=b.history;d.vector&&a.storeAction(h,g);d.bitmap&&a.storeBitmap(g);e.on.historyAdd&&e.on.historyAdd(h);f(!0);
return a};a.redo=function(b,g,d){w("redo",b,g,function(){e.on.redo&&e.on.redo(b);d&&d()});f(!0);return a};a.undo=function(b,g,d){w("undo",b,g,function(){e.on.undo&&e.on.undo(b);d&&d()});f(!0);return a};var w=function(f,g,d,c){--g;var l=b.history;if(l.vector)a[f+"Action"](g,d);if(l.bitmap)a[f+"Bitmap"](g,d);g?w(f,g,d,c):c&&c()};a.history={};a.bitmap={max:b.history.limit,current:-1,data:[]};a.resetBitmapHistory=function(b){var f=a.bitmap;f.current=0;f.data=f.data.splice(0,1);c.setCanvasSize();a.storeBitmap(b);
return a};a.storeBitmap=function(f){f=b.debugHistory;var g=a.bitmap,d=g.data.length-1,c=d-g.current;if(c){if(f)for(var l=0;l<c;l++){var e=g.data[d-l];document.body.removeChild(e)}g.data=g.data.splice(0,d-c+1)}g.data.length===g.max?g.data.push(g.data.shift()):g.data.push(p.Canvas());g.current=g.data.length-1;e=k.layer0;g=g.data[g.current].ctx;g.canvas.width=g.canvas.width;g.drawImage(e,0,0);f&&document.body.appendChild(g.canvas);return a};a.undoBitmap=function(b,f){var d=k.layer0.ctx,l=a.bitmap;l.current=
Math.max(0,--l.current);d.canvas.width=d.canvas.width;d.drawImage(l.data[l.current],0,0);"eraser"===c.tool.type&&(d=k.active.ctx,d.canvas.width=d.canvas.width,d.drawImage(l.data[l.current],0,0));return a};a.redoBitmap=function(b,f){var d=k.layer0.ctx,l=a.bitmap;l.current=Math.min(l.data.length-1,++l.current);d.canvas.width=d.canvas.width;d.drawImage(l.data[l.current],0,0);"eraser"===c.tool.type&&(d=k.active.ctx,d.canvas.width=d.canvas.width,d.drawImage(l.data[l.current],0,0));return a};a.vector={max:b.history.limit,
current:-1,data:[]};a.resetActionHistory=function(b){a.vector.data=[];a.vector.current=-1;return a};a.popAction=function(){a.vector.data.pop();return a};a.getLastAction=function(){var b=a.vector.data;return b[b.length-1]};a.storeAction=function(f,g){if(f.cmd&&f.data){var c=a.vector,m=c.data.length-1,s=m-c.current;s&&(c.data=c.data.splice(0,m-s+1));c.data.length===c.max&&c.data.shift();!f.uid&&e.net.socket&&(f.uid=e.net.socket.user.id);m=d.clone(f,!0);c.data.push(m);c.current=c.data.length-1;r=c.current;
g||e.fromServer?(c=a.vector,c.data[c.current]&&(r=void 0,"transform"===f.from.cmd&&b.stream.sketchLive||l(f,!1,g))):e.net.dataChannel&&b.stream.sketch&&!g&&e.net.dataChannel.sendPriority(["history.store",d.clone(f,!0)])}return a};a.undoAction=function(f,g){k.active&&k.active.ctx&&(p.Canvas.blip(k.active),p.Canvas.blip(k.draw));var d=a.vector;if(-1===d.current)return!1;d.current=Math.max(-1,--d.current);d=d.data[d.current+1];if(!d)return!1;l(d,!0,g,f);e.net.dataChannel&&b.stream.sketch&&!g&&(e.net.dataChannel.sendPriority(["history.undo",
{steps:f},!0]),e.net.dataChannel.send(["history.undo",{steps:f}]));return a};a.redoAction=function(f,g){var d=a.vector;if(d.current===d.data.length-1)return!1;d.current=Math.min(d.data.length-1,++d.current);d=d.data[d.current];if(!d)return!1;l(d,!1,g,f);e.net.dataChannel&&b.stream.sketch&&!g&&(e.net.dataChannel.sendPriority(["history.redo",{steps:f},!0]),e.net.dataChannel.send(["history.redo",{steps:f}]));return a};var r=0;a.cmds={};a.registerFunction=function(b){var f=b.fn;a.cmds[b.type]=function(a,
b,h,d){f(a,b,h,d);v(b,d)}};var v=function(a,f){if(!f&&b.history.autoSelect&&"select"===c.tool.type)for(var l=0;l<a.length;l++){var e=a[l];isFinite(e)?d.selectById(e,!1):d.selectById(e.id,!1)}};a.registerFunction({type:"VOBNodeList",fn:function(a,b,f,c){for(a=0;a<b.length;a++){var l=b[a];if(c=d.getById(l.id)){var r=e.assets.getItem(c.src);if(r){r.__colors=void 0;var m={},k;for(k in l)"id"!==k&&"uida"!==k&&(m[k]=l[k]);for(var l=l.uida,v=0;v<l.length;v++){var p=l[v],u=r.getLayerBy("uid",p.uid);if(u)if(f)for(k in p)"uid"!==
k&&(u.style[k]=p[k]);else for(k in m)u.style[k]=m[k]}c.dirtyCache=!0;c.dirtyRender=!0}}}}});a.registerFunction({type:"add",fn:function(a,b,f,l,s){for(a=0;a<b.length;a++)f=b[a],d.getById(f.id)||(s=d.clone(f),d.decompress(s),e.fromServer||x.ensureToolkit(s),d.pushAt(s,f.zIndex),d.updateTransform&&(d.updateTransform(s),d.setDirtyPixelData(s)),l&&x.area.inGenesis&&(d.deselect(c.selection.idx),c.selection.idx=d.getById(p.INFINITY).zIndex+1))}});a.registerFunction({type:"remove",fn:function(a,b,f,l,s){a=
d.children;for(f=0;f<b.length;f++){s=b[f].id;var r=d.getById(s);if(r)for(l&&r.zIndex===c.selection.idx&&(d.deselectAll(),e.ui.log(l+" removed the layer you had selected.")),r=0;r<a.length;r++)if(a[r].id===s){m.cache&&m.cache.clean(a[r].hash);d.setDirtyPixelData(a[r]);d.shiftAt(r);break}}}});a.registerFunction({type:"replace",fn:function(a,b,f,d){f?(a=b[1],b=b[0]):(a=b[0],b=b[1]);r=void 0;l({cmd:"remove",data:a},!1,d,1);r=void 0;l({cmd:"add",data:b},!1,d,0)}});a.registerFunction({type:"zoom",fn:function(a,
b,f,d,c){console.log("zoom",a,b,f)}});var l=function(b,f,l,k){l=l||!1;var s=b.cmd,A=b.data;if(r!==a.vector.current){r=a.vector.current;"remove"===s?f&&(s="add"):"add"===s&&f&&(s="remove");var u=a.cmds[s];if(u)u(s,A,f,l,k,b.uid),e.fromServer||k||m.preload({fromSocket:!0});else{b=f?A.from:A.to;if(Array.isArray(b)){f=0;for(s=b.length;f<s;f++)if(A=b[f],u=d.getById(A.id))A.labels&&(u.labels=[]),p.mixin(A,u),d.decompress(u),A.fill&&delete u.fill.__colors,A.stroke&&delete u.stroke.__colors,delete u.__offset,
d.setDirtyPixelData(u),A.content?(delete u.__textMetrics,u.dirtyCheck=!0):A.color||A.fillStyle||A.bbox&&A.bbox.scale?(u.dirtyCheck=!0,u.dirtyTransform=!0,delete u.inbounds):(u.dirtyCheck=!0,u.dirtyResource=!0);v(b,l)}else p.mixin(b,c);e.fromServer||k||(m.preload({fromSocket:!0}),e.ui.configureBuild())}}},f=function(){var a=0,b=function(){sk.p=sk.perf();e.fs.saveProject({onprogress:function(){},onsuccess:function(){e.ui.log(u.translate("synchronized"),750);sk.p("AutoSave")}})};return function(d){e.fs.autosave&&
e.fs.fs&&(clearTimeout(a),a=setTimeout(function(){if(c.__interacting)return f(!1);b()},1E3))}}();return a};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.History)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SceneOrganize=function(e,c){var a=e.util,b=c.scene;e.setupHistory&&e.setupHistory.add({type:"organize",fn:function(a,e,d,x){a=b.selection;x=b.children;var p=d?e.from:e.to;d=d?e.to:e.from;e="select"===c.tool.type;a.reset();d=k(x,d);var w=d.length;if(w){for(var r=0;r<w;r++){var v=d[r];x.splice(p[r],0,v.layer);b.setDirtyPixelData(v.layer);e&&a.select(v.idx)}b.reindex()}}});var k=function(a,b){for(var d=[],c=0;c<b.length;c++){var e=b[c],k=a[e-c];k.useStickToFront||
k.useStickToBack||!k||(a.splice(e-c,1),d.push({layer:k,idx:e}))}return d};b.sendTo=function(e){e=e||{};var m=e.idx,d=(e.record||!1)&&c.history,x=b.selection.asArray(e.selection),p=e.onsuccess,w=b.children,r;a:{r=0;for(var v=b.children,l=v.length,f=0;f<l;f++)if(v[f].useStickToBack)r++;else break a;r=void 0}a:{v=0;l=b.children;for(f=l.length;f--;)if(l[f].useStickToFront)v++;else break a;v=void 0}r=a.clamp(m,0+r,w.length-v);x=k(w,x);if(v=x.length){for(f=l=0;f<v;f++){var h=x[f];if(h.idx<r)l++;else break}for(var g=
[],y=[],f=0;f<v;f++){var h=x[f],z=h.layer,m=r-l+f;b.setDirtyPixelData(z);w.splice(m,0,z);h.idx!==m&&(g.push(h.idx),y.push(m))}d&&g.length&&c.history.store({cmd:e.cmd||"organize",icon:e.icon||"infinity",name:e.name||"layer-order",data:{from:g,to:y}});b.reindex();p&&p()}return b};b.sendForwards=function(a){a=a||{};var c=a.distance||1,d=a.toFront||!1,k=a.record||!1;a=b.selection.asArray(a.selection);d?(c=b.children.length,d="layer-to-front"):(c=a[a.length-1]+c+1,d="layer-forwards");return b.sendTo({idx:c,
cmd:"organize",name:d,record:k,onsuccess:function(){e.on.sendForwards&&e.on.sendForwards()}})};b.sendBackwards=function(a){a=a||{};var c=a.distance||1,d=a.toBack||!1,k=a.record||!1;a=b.selection.asArray(a.selection);d?(c=0,d="layer-to-back"):(c=a[0]-c,d="layer-backwards");return b.sendTo({idx:c,cmd:"organize",name:d,record:k,onsuccess:function(){e.on.sendBackwards&&e.on.sendBackwards()}})}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.SceneOrganize)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Orientation=function(e,c,a){var b=this,k=c.canvas2d,u=e.feature.zoom||{},m=e.feature,d=c.render,x=c.scene,p=c.toolkit,w=e.vector;this.mirrorY=this.mirrorX=1;this.zoom={clampFormat:"px",fromCenter:!0,value:1,min:20,max:100};this.rotate={clampFormat:"degree",value:0,min:0,max:0};this.mouse={x:0,y:0};this.origin={x:0,y:0};this.offset={x:0,y:0};for(var r in a)this[r]=a[r];this.ctx=this.canvas.getContext("2d");this.trx={};this.trx.scale=new w.Transform;this.trx.rotate=
new w.Transform;this.trx.mirror=new w.Transform;this.render=function(){this.on.update();d.clipped=!1;c.setBounds();d.scene("orient.render");return this};this.getTransform=function(){var a=new w.Transform,d=b.offset;a.combine(b.trx.mirror);a.combine(b.trx.scale);a.combine(b.trx.rotate);a.translate(d.x,d.y);return a};this.on={};this.on.update=function(){var a=c.pixelRatio,d=b.getTransform(),f=new CSSMatrix,d=d.matrix;f.a=d.a;f.b=d.b;f.c=d.c;f.d=d.d;f.e=d.x;f.f=d.y;f=f.decompose().translate;d=b.zoom.value;
c.zoom=d;k.orientX=Math.round(f.x);k.orientY=Math.round(f.y);k.x=Math.round(f.x-c.x*d*a);k.y=Math.round(f.y-c.y*d*a);c.scrollElementCSS()};this.reset=function(a){this.media=c.bounds;a||(this.zoom.value=u.value||1,this.rotate.value=0,this.mirrorY=this.mirrorX=1,this.offset.x=0,this.offset.y=0);m.doc.center&&this.setCenter();this.scale=1;this.mouse.x=0;this.mouse.y=0;this.origin.x=0;this.origin.y=0;this.setZoomAtCenter();this.mirrorTo(this.mirrorX,this.mirrorY);this.rotateTo(this.rotate.value);this.zoomTo(this.zoom.value,
!0);this.on.update();return this};this.setCenter=function(){var a=c.pixelRatio,b=parseFloat(this.canvas.style.width)||this.canvas.width,f=parseFloat(this.canvas.style.height)||this.canvas.height;this.offset.x=Math.max(0,b/2-this.media.width/2)*a;this.offset.y=Math.max(0,f/2-this.media.height/2)*a;this.mouse.x=0;this.mouse.y=0;this.origin.x=0;this.origin.y=0;return this};this.setPan=function(a,b){this.offset.x+=isFinite(a)?a:0;this.offset.y+=isFinite(b)?b:0;this.setZoomAtCenter();this.render();return this};
this.setRotate=function(a){this.rotate.value=360===a?360:(a+360)%360;this.rotateTo(this.rotate.value);this.render();return this};this.setZoom=function(a,b){var f=this.zoom.value,d=Math.max(this.media.width,this.media.width);if("px"===this.zoom.clampFormat)var g=this.zoom.min/d,d=this.zoom.max/d;else g=this.zoom.min,d=this.zoom.max;g=Math.min(d,Math.max(g,a));this.zoom.value=g;(f=1+(g-f)/f)&&this.zoomTo(f);if(!b)return this.render(),p.text&&p.text.updateCSSTransform(),this};this.mirrorTo=function(a,
b){var f=this.media,d=-1===a?f.width:0,f=-1===b?f.height:0;this.trx.mirror.reset();this.trx.mirror.translate(d,f);this.trx.mirror.scale(a,b);return this};this.rotateTo=function(a){var b=this.trx.rotate,f=this.media,d=f.width/2+this.offset.x,f=f.height/2+this.offset.y;b.reset();b.translate(d,f);b.rotate(a*Math.PI/180);b.translate(-d,-f);return this};this.zoomTo=function(a,b){if(!this.origin)return console.log("not initialized");var f=this.trx.scale;b&&(f.reset(),this.origin.x=0,this.origin.y=0,this.scale=
1);f.translate(this.origin.x,this.origin.y);f.scale(a,a);this.zoom.fromCenter&&(this.origin.x=this.mouse.x/this.scale+this.origin.x-this.mouse.x/(this.scale*a),this.origin.y=this.mouse.y/this.scale+this.origin.y-this.mouse.y/(this.scale*a),f.translate(-this.origin.x,-this.origin.y));this.scale*=a;return this};this.events={};this.enabled=!1;this.enable=function(){if(!b.enabled)return b.enabled=!0,b.events.mousedown=eventjs.add(a.mouseLayer,"mousedown",b.mousedown),b.events.wheel=eventjs.add(a.mouseLayer,
"wheel",b.mousewheel),b.events.key=eventjs.add(window,"keyup keydown",eventjs.keyTracker),b.events.keydown=eventjs.add(window,"keydown",b.keydown),b};this.disable=function(){if(b.enabled)return b.enabled=!1,eventjs.removeEvents(b.events),b};this.ly=this.lx=0;this.drag=function(a,d){eventjs.prevent(a);var f=b.zoom.value,h=d.x-d.start.x,g=d.y-d.start.y;"up"===d.state&&(b.zoom.fromCenter?b.setZoomAtCenter():b.setZoomAtPoint(a),x.setDirtyBounds(x.children));var e=c.pixelRatio;b.offset.x+=(h-b.lx)/f*b.mirrorX*
e;b.offset.y+=(g-b.ly)/f*b.mirrorY*e;b.lx=h;b.ly=g;b.render();b.runCallback();return this};this.mousedown=function(a){eventjs.getBoundingBox(b.canvas);b.lx=0;b.ly=0;b.events.drag=eventjs.proxy.drag({fingers:1,event:a,target:b.canvas,listener:b.drag});return this};this.mousewheel=function(a,d){eventjs.cancel(a);"end"===d.state&&x.setDirtyBounds(x.children);b.setZoomAtPoint(a);var f=b.zoom.value;b.setZoom(f*(1+d.wheelDelta/120/2),!0);b.controllerSetZoom&&f!==b.zoom.value&&b.controllerSetZoom(b.zoom.value);
b.runCallback();return this};this.keydown=function(a){var d=b.zoomMin,d=b.zoom.value/(b.zoomMax-d+d),f=a.shiftKey?10:1;switch(a.keyCode){case 37:eventjs.metaKey?(eventjs.cancel(a),b.setRotate(b.rotate.value+1*f)):b.setPan(-1*f,0);b.runCallback();break;case 39:eventjs.metaKey?(eventjs.cancel(a),b.setRotate(b.rotate.value-1*f)):b.setPan(1*f,0);b.runCallback();break;case 38:eventjs.metaKey?(eventjs.cancel(a),b.setZoom(d-.01*f)):b.setPan(0,-1*f);b.runCallback();break;case 40:eventjs.metaKey?(eventjs.cancel(a),
b.setZoom(d+.01*f)):b.setPan(0,1*f),b.runCallback()}return this};this.toString=function(){return JSON.stringify(this.getValues())};this.setZoomAtPoint=function(a){a=eventjs.getCoord(a);var b=eventjs.getBoundingBox(this.canvas),f=c.pixelRatio;this.mouse.x=(a.x-b.x1)*f;this.mouse.y=(a.y-b.y1)*f;return this};this.setZoomAtCenter=function(){var a=c.pixelRatio,d=c.viewport,f=this.media,h=b.getTransform(),g=h.point2d(0,0),e=h.point2d(f.width,f.height),f=Math.max(0,g.x),g=Math.max(0,g.y),h=Math.min(d.height,
e.y),d=Math.min(d.width,e.x),d=Math.max(0,d-f),h=Math.max(0,h-g);this.mouse.x=(f+d/2)*a;this.mouse.y=(g+h/2)*a;return this};this.getValues=function(){var a=this.zoom.value,d=this.trx.scale.matrix;return{x:d.x+this.offset.x*a,y:d.y+this.offset.y*a,zoom:a,rotate:this.rotate.value,mirror:{x:b.mirrorX,y:b.mirrorY}}};this.setMedia=function(a){var b=this;"string"===typeof a?(this.media=new Image,this.media.onload=function(){b.reset(!0)},this.media.src=a):(this.media=a,this.reset(!0));return this};this.runCallback=
function(a){this.callback&&this.callback({rotate:b.rotate.value,zoom:b.zoom.value,mirrorX:b.mirrorX,mirrorY:b.mirrorY});return this};return this};q.module.Orientation.createController=function(e,c){var a=e.feature.zoom||{},b=e.dom,k=c.contexts,u=c.scene,m=c.orient=new e.module.Orientation(e,c,{src:c.bounds,canvas:k.layer0,mouseLayer:k.active,rotate:{clampFormat:"degree",value:0,min:0,max:0},zoom:{clampFormat:"%",fromCenter:a.fromCenter,value:a.value,min:a.min,max:a.max,increment:a.increment}});m.setMedia(m.src);
m.controllerReset=function(){m.reset().render();var b=m.getKnobOffset(a.defaultValue);m.setController(b)};m.controllerSetZoom=function(a){a=m.getKnobOffset(a||1);m.setController(a)};m.getKnobOffset=function(a){var b=m.zoom.max;a=a||c.zoom;var f=d.offsetHeight||150;a=2+Math.log(a)/Math.log(2);b=2+Math.log(b)/Math.log(2);return(1-a/b)*f};m.controllerZoomOut=function(){var a=Math.max(m.zoom.min,c.zoom-m.zoom.increment),a=m.getKnobOffset(a);m.setController(a)};m.controllerZoomIn=function(){var a=Math.max(m.zoom.min,
c.zoom+m.zoom.increment),a=m.getKnobOffset(a);m.setController(a)};m.setControllerCSS=function(a){if(p){var b=p.offsetHeight;p.style.top=Math.min((d.offsetHeight||150)-b,Math.max(0,a-b/2))+"px"}};m.setController=function(a,b){m.setControllerCSS(a);var f=d.offsetHeight||150,h=m.zoom.max,g=2+Math.log(h)/Math.log(2),f=Math.min(h,Math.pow(2,(1-a/f)*g-2));b&&(f*=100,f=(f-f%b)/100);m.setZoom(f);d.title=Math.round(100*f)+"%"};var d={offsetHeight:150},x=b.$("#sk-orientation"),p=b.$("#sk-orientation #controller");
if(!p&&x){var w=function(a,b){eventjs.cancel(a);e.ui.tooltip&&e.ui.tooltip.update(r());!1!==b&&u.setDirtyBounds(u.children)},r=function(){return Math.round(100*m.zoom.value)+"%"},b=function(a,b,f){a=e.dom.create('<div class="'+a+'"></div>');e.ui.tooltip&&e.ui.tooltip.add(a,b);x.appendChild(a);eventjs.add(a,"mousedown",function(a,b){e.doc.orient[f]();w(a)})};eventjs.add(x,"mousedown,dblclick",eventjs.stop);b("icon-plus","zoom-in","controllerZoomIn");k=e.dom.create('<div class="controller"><div><span id="controller" style="top: 0px"></span></div></div>');
e.ui.tooltip&&e.ui.tooltip.add(k,r);x.appendChild(k);eventjs.add(k,"drag",function(a,b){e.doc.orient.setController(b.y,5);w(a,"up"===b.state)});p=k.firstChild.firstChild;p.style.top=m.getKnobOffset()+"px";b("icon-minus","zoom-out","controllerZoomOut");b("icon-refresh","reset","controllerReset")}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Orientation)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.ScenePlacement=function(e,c){var a=c.canvas2d,b=e.feature,k=c.contexts,u=c.scene,m=c.toolkit,d=e.util,x=e.vector;u.updateTransform=function(a,b){a.data&&!a.dataHash&&(a.dataHash=u.createHash(a.data));if(a.dirtyTransform||a.dirtyCheck||!a.trx2D){a.dirtyTransform=!1;var e=a.bbox,l=a.useStretchToEdge,f=a.useStretchToFit;if(l||f){var h=c.bounds,f=h.width,h=h.height;if(e.width!==f||e.height!==h){if(l)e.width=f,e.height=h,e.x=0,e.y=0;else{var l=e.owidth/f,g=e.oheight/
h;l>g?(e.width=f*l,e.height=h,e.x=-(e.width-f)/2,e.y=0):(e.width=f,e.height=h*g,e.x=0,e.y=-(e.height-h)/2)}a.dirtyCache=!0}}var l=c.zoom,g=e.rotate*d.DEG_RAD,f=e.scale,y=f.x,k=f.y,f=e.width*y,h=e.height*k,s=f/2,m=h/2,H=a.trx2D||(a.trx2D=new x.Transform),q=e.x-c.scrollLeft,e=e.y-c.scrollTop;H.reset();H.translate(q,e);g&&(H.translate(s,m),H.rotate(g),H.translate(-s,-m));if(!b){var J=c.theme.getControls(),J=J.width+J.padding;H.nw=H.point2d(0,0);H.ne=H.point2d(f,0);H.se=H.point2d(f,h);H.sw=H.point2d(0,
h);H.cp=H.point2d(s,m);H.spinner=H.point2d(s,J/l*(0<k?-1:1));H.n=H.point2d(s,0);H.e=H.point2d(f,m);H.s=H.point2d(s,h);H.w=H.point2d(0,m);a.dirtyControl=!0;H=a.trx||(a.trx=new x.Transform);H.reset();H.translate(q,e);g&&(H.translate(s,m),H.rotate(g),H.translate(-s,-m));H.scale(y,k);H=a.trxInverse||(a.trxInverse=new x.Transform);f=a.trx2D.nw;H.tlx=f.x;H.tly=f.y;H.reset();p(a)}}};var p=function(a){var b=a.trxInverse||new x.Transform,c=a.bbox;a=isFinite(b.tlx)?b.tlx:c.x;var e=isFinite(b.tly)?b.tly:c.y,
f=c.rotate*d.DEG_RAD,h=c.scale,c=h.x,h=h.y;b.translate(a,e);f&&b.rotate(-f);b.scale(1/c,1/h);b.translate(-a,-e);b.tlx=a;b.tly=e;return b};u.updateBBox=function(a){if(a=a||u.selection.item)u.updateConstrain(a),"text"===a.type?m.text&&m.text.updateCSSTransform(a):a.brush&&(a.brush.bbox=a.bbox)};u.updateConstrain=function(a){var b=c.bounds,d=b.width,b=b.height,e=a.bbox,f=a.trx;if(f&&(a.useConstrain||a.useConstrainX||a.useConstrainY)){var h=e.width,g=e.height;if("objectBoundingBox"===a.bbox.units)var y=
f.point2d(0,0),k=f.point2d(h,0),s=f.point2d(h,g),m=f.point2d(0,g),g=Math.min(y.x,k.x,s.x,m.x),f=Math.min(y.y,k.y,s.y,m.y),h=Math.max(y.x,k.x,s.x,m.x),k=Math.max(y.y,k.y,s.y,m.y);else y=e,h=y.x,k=y.y,g=y.x,f=y.y;var y=e.x,s=e.y,m=y-g,p=s-f,g=d-Math.max(0,h-g)+m,f=b-Math.max(0,k-f)+p;a.useConstrain?(e.x=Math.max(m,Math.min(g,y)),e.y=Math.max(p,Math.min(f,s)),a.dirtyTransform=!0):a.useConstrainX?(e.x=Math.max(m,Math.min(g,y)),e.y=s,a.dirtyTransform=!0):a.useConstrainY&&(e.x=y,e.y=Math.max(p,Math.min(f,
s)),a.dirtyTransform=!0)}a.useAlignX&&(a.dirtyTransform=!0,f=e.width*e.scale.x,e.x="right"===a.useAlignX?d-f:"left"===a.useAlignX?0:(d-f)/2);a.useAlignY&&(a.dirtyTransform=!0,d=e.height*e.scale.y,"bottom"===a.useAlignY?e.y=b-d:"top"===a.useAlignY?e.y=0:(d=e.height*e.scale.y,e.y=(b-d)/2));a.dirtyTransform&&u.updateTransform(a)};u.getBoundingBox=function(a){a=a||{};var b=a.useVisibleRegion||!1,d=!!a.selection||a.useSelection||!1,c=!!a.hovered||a.useHovered||!1,f=a.asInteger||!1,h=Infinity,g=-Infinity,
e=Infinity,m=-Infinity,s=a.selection||u.selection.items;a=a.hovered||u.hovered.items;d||c||(d=!0,s=u.children);for(var A=0,p=u.children.length;A<p;A++){var x=u.children[A],q=x.trx;if(q){var D=x.zIndex,B=a[D];if(s[D]&&d||B&&c){var x=x.bbox,B=x.width,E=x.height,x=q.point2d(0,0),D=q.point2d(B,0),B=q.point2d(B,E),F=q.point2d(0,E),q=Math.min(x.x,D.x,B.x,F.x)-1,E=Math.min(x.y,D.y,B.y,F.y)-1,C=Math.max(x.x,D.x,B.x,F.x)+2,x=Math.max(x.y,D.y,B.y,F.y)+2;q<h&&(h=q);E<e&&(e=E);C>g&&(g=C);x>m&&(m=x)}}}b?(h=Math.max(0,
h),e=Math.max(0,e),b=k.layer0,B=Math.min(b.width-h,g-h),E=Math.min(b.height-e,m-e)):(B=g-h,E=m-e);h=isFinite(h)?h:0;e=isFinite(e)?e:0;B=isFinite(B)?B:0;E=isFinite(E)?E:0;return{x:f?Math.floor(h):h,y:f?Math.floor(e):e,width:f?Math.ceil(B):B,height:f?Math.ceil(E):E,units:"objectBoundingBox",scale:{x:1,y:1}}};u.getBoundingOrigin=function(a){a=a.units?a:u.getBoundingBox(a);return"objectBoundingBox"===a.units?{x:a.x+a.width/2*a.scale.x,y:a.y+a.height/2*a.scale.y}:{x:a.x,y:a.y}};u.getPointInCanvas=function(b){if(isFinite(b.pageX)){var d=
eventjs.getBoundingBox(c.container);b=eventjs.getClientXY(b);b.x-=d.x1;b.y-=d.y1}var d=c.zoom,e=d*c.pixelRatio;return{x:(b.x+0)/d-1*a.x/e,y:(b.y+0)/d-1*a.y/e}};u.getPointInObject=function(a,b){var d=a.trxInverse||p(a),c=a.bbox,f=c.width,h=c.height,g=d.point2d(b.x,b.y);g.x-=c.left||0;g.y-=c.top||0;g.bbox_x=d.tlx;g.bbox_y=d.tly;g.bbox_width=f;g.bbox_height=h;return g};u.getOffset=function(a){var b=a.bbox.scale.x,d=a.stroke;d&&d.enabled||(d={lineWidth:0,miterLimit:0});var c=d.lineWidth*d.miterLimit/
2,f=a.border||{width:0},d=Math.ceil(Math.abs((f.width+0)*b/2))+c,b=Math.ceil(Math.abs((f.width+0)*b/2))+c;return a.__offset={x:d,y:b}};u.isInBounds=function(d){d.dirtyTransform&&u.updateTransform(d);var e=d.trx2D;if(!e||!e.point2d)return!0;var k=c.zoom,l=c.pixelRatio,f=k*l,h=a.x,g=a.y,y=e.nw,m=e.ne,s=e.se,A=e.sw,e=Math.min(y.x,m.x,s.x,A.x)*f+h,p=Math.min(y.y,m.y,s.y,A.y)*f+g,x=Math.max(y.x,m.x,s.x,A.x)*f+h,f=Math.max(y.y,m.y,s.y,A.y)*f+g,y=a.width,m=a.height,s=c.bounds;b.canvas.clip?(y=Math.min(s.width*
k,y)*l,m=Math.min(s.height*k,m)*l,h=c.x*l*k+h,k=c.y*l*k+g):(y*=l,m*=l,k=h=0);l=Math.max(0,h);g=Math.max(0,k);d.inbounds=e<y+h-(0>h?h:0)&&x>l&&p<m+k-(0>k?k:0)&&f>g;return d.inbounds};u.getActionDataAsAbsolute=function(a,b){var c=new x.Transform,e=a.bbox,f=e.scale.x,h=e.scale.y,g=e.rotate*d.DEG_RAD,y=e.width/2*f,k=e.height/2*h,s=-((a.diameter||0)/2)*(f-1);c.translate(e.x,e.y);c.translate(y,k);g&&c.rotate(g);c.translate(-y-s,-k-s);c.scale(f,h);e=[[]];f=0;if(h=a.data)for(g=h.length,y=0;y<g;y++)h=a.data[y],
k=c.point2d(h.x,h.y),e[f]||(e[f]=[]),e[f].push({x:k.x,y:k.y}),"z"===h.cmd&&++f;return b?JSON.stringify(e):e};u.getSVGNodesFromPoint=function(a,b){var c=u.getPointInObject(a,b),e=a.bbox,f=e.width/e.viewBox[2],h=a.trx2D.clone();h.rotate(-e.rotate*d.DEG_RAD);h.scale(f,f);return a.svg.render({matrix:h.matrix,point:c})}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.ScenePlacement)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SceneRender=function(e,c){var a=this,b=c.canvas2d,k=c.contexts,u=e.detect,m=e.dom,d=e.feature,x=e.lang,p=e.vector.shape,w=e.style,r=c.toolkit,v=e.util,l=e.vector;a.sceneGCO=function(b,f){a.scene(b,function(){var a=e.style,b=a.composite;!0!==a.isSourceOver[b]&&c.render.prepareGCO(b);f&&f()})};a.scene=function(b,f){f&&g.push(f);a.dirty=!0;a.from=b;return a};a.clipped=!1;a.chunkBatch=!0;a.forOutput=!1;a.from="";a.selected=!1;a.speed=0;a.dirty=!1;a.dirtyCenterPoint=
!1;a.dirtyControls=!1;a.clean=function(b,f){a.dirtyControls=!0;a.scene(b,f);return a};a.output=function(b){b&&g.push(b);a.forOutput=!0;z();a.forOutput=!1;return a};var f=!1,h=function(){a.dirty&&z();!1!==f&&requestAnimationFrame(h)};a.start=function(){f||(f=!0,h())};a.stop=function(){f=!1};var g={callbacks:[],push:function(a){"function"===typeof a&&g.callbacks.push(a)},run:function(){a.dirtyControls&&(a.dirtyControls=!1,u.useAreaKit[c.tool.type]?r.area.renderControls(null,!0):v.eventOverrideCall("onRenderControls"));
if(a.dirtyCenterPoint){var b=a.dirtyCenterPoint;a.dirtyCenterPoint=!1;!1!==d.tools.drawCenterPoint&&(u.useAreaKit[c.tool.type]?r.area.drawCenterPoint(b):v.eventOverrideCall("onRenderCenterPoint"))}for(c.__rendering=!1;g.callbacks.length;)g.callbacks.shift()()}},y={perf:null,gco:"source-over"},z=function(){if(!c.__preloading)if(c.__rendering=!0,a.dirty=!1,y.perf=y.perf||e.perf(),d.vector.edit||a.chunkBatch){var b=k.layer0,f=b.ctx,h=b.width,s=b.height;d.canvas.clip?(a.clipped||(b.width=h,a.drawClipArea(f),
f.clip()),f.clearRect(0,0,h,s),f.beginPath(),f.rect(0,0,h,s),f.clip()):f.clearRect(0,0,h,s);f.save();J()}else{f=a.from;b=c.scene.children;if(b.length){f=(isFinite(c.selection.idx)&&"area.hide"!==f?k.active:k.layer0).ctx;for(h=0;h<b.length;h++)s=b[h],!s.dirtyCheck&&!s.dirtyTransform||s.error||(c.scene.updateTransform(s),a.layer(f,s),a.dirtyControls=!0);a.prepareGCO(c.tool.device.composite)}g.run()}},s=function(a,b){b&&(b.lineWidth||b.strokeStyle)&&(b.globalCompositeOperation&&(a.globalCompositeOperation=
b.globalCompositeOperation),a.lineWidth=(b.lineWidth||1)/c.zoom*c.pixelRatio,a.strokeStyle=b.strokeStyle||"#000",a.stroke())},A=function(a,b){b&&b.fillStyle&&(b.globalCompositeOperation&&(a.globalCompositeOperation=b.globalCompositeOperation),a.fillStyle=b.fillStyle||"#000",a.fill())},H=-1,q=0,J=function(){for(var f=c.scene.children,h=f.length,l=a.chunkBatch,m=l||a.forOutput?150:500,z=h-(H-q),v=Date.now(),p=0;p<z;p++){var u=++H-q,w=Date.now()-v>m,B=u>h-1,w=0!==H&&w;if(l&&(w||B)&&e.loader){var Q=h&&
!B?u/h:1;(100!==100*Q>>0||e.loader.threads.thread)&&e.loader.create("thread",x.translate("rendering")+"...",100*Q>>0)}if(w){++q;setTimeout(J,0);break}if(B){q=0;H=-1;c.__rendering=!1;a.chunkBatch=!1;f=k.layer0.ctx;D.id&&D.canvas&&(D.render(f),D.id=null);f.restore();!d.canvas.renderWithBackground||a.highRes||a.forOutput||(h=c.zoom,l=h*c.pixelRatio,m=c.bounds,z=m.width,v=m.height,p=c.scrollLeft,u=c.scrollTop,f.save(),f.beginPath(),f.translate(b.orientX>>0,b.orientY>>0),f.scale(l,l),f.globalAlpha=1,f.globalCompositeOperation=
"destination-over",f.translate(-p,-u),f.rect(-.5,-.5,z*Math.max(1,h)+1,v*Math.max(1,h)+1),m.style.fillStyle=c.backgroundRaw,A(f,m.style),s(f,m.style),f.restore());g.run();y.perf&&(a.speed=y.perf());y.perf=null;d.debug&&console.log("render",a.speed+"ms",a.from);break}B=f[u];w=B.type;if(!B.error){Q=B.toolkit;if(!Q){d.debug&&console.log("toolkit was not loaded",w,u);if(!r.getToolkit(w))continue;q=0;H=-1;c.__rendering=!1;setTimeout(a.preload,0);break}c.scene.updateTransform(B);if(!1!==B.visible){if("group"!==
w&&!a.forOutput){if(!1===B.inbounds)continue;if(!isFinite(B.inbounds)&&!c.scene.isInBounds(B))continue}a.selected&&void 0===a.selected[u]||c.__editing&&B.id===c.selection.id&&"text"===B.type||a.layer(Q.ctx,B)}}}},D={id:null,canvas:null,composite:null,opacity:null,render:function(a){a.globalCompositeOperation=D.composite;a.globalAlpha=D.opacity/100;a.drawImage(D.canvas,0,0)}};a.layer=function(f,g,h){if(f&&g){var s=c.pixelRatio,l=c.zoom*s,r=c.selection,y=g.zIndex-q;g.hovered=c.hovered.items[y]||!1;
g.selected=r.items[y]||!1;if(g.groupId){if(D.id!==g.groupId){D.id&&D.canvas&&D.render(f);var k=f.canvas;D.id=g.groupId;D.canvas=D.canvas||v.Canvas(k.width,k.height);D.canvas.width=k.width;D.canvas.height=k.height;D.composite=g.composite;D.opacity=g.opacity}D.id&&(f=D.canvas.ctx)}else D.id&&D.canvas&&(D.render(f),D.id=null);var m=g.type,z=a.cache,p=g.usePixelData&&g.isRecording,k=g.useHighRes||a.highRes||d.highRes;if(!k||u.useCacheLayer[m]||p)if(k=!1,!g.ctx||g.dirtyCheck||g.dirtyCache)if(g.dirtyControl=
!0,z.add(g),!g.ctx){h&&h();return}var A=g.bbox,x=A.width,p=A.height,H=A.scaleCache||{x:1,y:1},B=H.x,J=H.y,W=A.scale.x,Y=A.scale.y;if(g.__offset){var U=g.__offset.x,$=g.__offset.y;0>B&&(U*=-1);0>J&&($*=-1)}else $=c.scene.getOffset(g),U=$.x,$=$.y;r=(d[m]||d.tools).drawBoundingBox&&r.items[y]&&!isFinite(r.idx)&&!a.forOutput;y=u.useLocalAlpha[m];f.save();f.translate(b.x,b.y);f.scale(l,l);f.globalCompositeOperation=w.getComposite(g.composite);f.globalAlpha=isFinite(g.opacity)&&!y?g.opacity/100:1;y=g.trx2D;
l=z.padding;if(k)H=A.padding||0,U=-l,$=-l,m=x+2*l,s=p+2*l,f.beginPath(),y.apply(f,!0),u.shape[g.type]?(g.render(f,y,!0),f.scale(W,Y),f.translate(H,H)):(f.scale(W,Y),f.translate(H,H),g.render(f,y,!0)),r&&f.scale(1/W,1/Y);else if(y.apply(f,!0),k=g.ctx.canvas,m=k.width,y=k.height,m&&y){var z=0>B,A=0>J,ha=(B-1)*l,ia=(J-1)*l;z&&(ha-=B*l*2);A&&(ia-=J*l*2);U=-l/s-ha/s-U*B;$=-l/s-ia/s-$*J;0>W&&(U+=x*W);0>Y&&($+=p*Y);m=m*Math.abs(B)/s;s=y*Math.abs(J)/s;z||A?(f.save(),z&&(U-=x*B*H.px),A&&($-=p*J*H.py),f.scale(z?
-1:1,A?-1:1),f.drawImage(k,U,$,m,s),f.restore()):f.drawImage(k,U,$,m,s)}r&&(x*=W,p*=Y,f.beginPath(),f.globalAlpha=1,f.globalCompositeOperation="source-over",f.lineWidth=1,f.shadowOffsetX=1,f.shadowOffsetY=1,f.rect(0,0,x,p),"dark"===e.feature.theme?(f.shadowColor="#000",f.strokeStyle="#fff"):(f.shadowColor="#fff",f.strokeStyle="#000"),f.stroke());f.restore();h&&h()}else d.debug&&console.log("missing argument",arguments)};a.drawClipArea=function(f){a.clipped=!0;var d=c.clip,g=c.zoom,h=c.pixelRatio,
e=g*h,l=c.scrollLeft-c.x*h,r=c.scrollTop-c.y*h;f.beginPath();d.path?(l=b.x-l*g,g=b.y-r*g,f.save(),f.translate(l,g),f.scale(e,e),p.VOBPath(f,d.path),f.restore()):(a.forOutput?(g=l=0,r=f.canvas.width,e=f.canvas.height):(h=c.bounds,l=(d.x||0)*e+b.x-l*g,g=(d.y||0)*e+b.y-r*g,r=Math.min(h.width,d.width||Infinity)*e,e*=Math.min(h.height,d.height||Infinity)),f.rect(l,g,r,e));d.style&&(A(f,d.style),s(f,d.style))};a.applyFilter=function(b,f){if(e.gl&&b.ctx){var d=b.ctx,g=window.glfx&&e.client.webgl,h=e.gl.ColorMatrix&&
"image"===b.type,s=h&&g,l=b.filter;if(l)s&&l[0]&&(h=l[0],s=h.length-1,"colorMatrix"===h[s].id?h[s]=B(b):h.push(B(b)));else{if(!h||0===b.tint&&0===b.temperature&&0===b.brightness&&0===b.contrast&&1===b.exposure&&1===b.saturation&&0===b.hue)return;if(s)l=b.filter=[[{cmd:"input",id:"source0",name:"colorMatrix",enabled:!0},B(b)]];else if(h){e.gl.ColorMatrix.setFilter(b).apply(d);return}}var s=c.pixelRatio,r=c.zoom,y=a.cache.padding,m=2*y,h=b.ctx.canvas,z=b.bbox,p=z.rotate*v.DEG_RAD,A=z.scale.x,u=z.scale.y,
x=z.height,w=Math.abs(z.width*A)*s||1,H=Math.abs(x*u)*s||1,x=w+m*s>>0,m=H+m*s>>0,q=w/2,I=H/2,A=0>A,u=0>u;if(b.useBackgroundOverlay){var J=z.x*s,z=z.y*s;A&&(J-=w);u&&(z-=H);d.save();d.globalCompositeOperation="source-atop";d.fillStyle=c.backgroundRaw;d.fillRect(0,0,x,m);d.translate(y,y);p&&(d.translate(q,I),d.rotate(-p),d.translate(-q,-I));d.translate(-J,-z);d.scale(1/r,1/r);d.drawImage(k.layer0,0,0);d.restore()}if(g&&Array.isArray(l)){var D,g=function(){D?D():f&&f(b)},r=a.getGLFX(h);r.source=h;r.pixelRatio=
s;r.viewport(0,0,x,m);r.setFilter(l);r.render(g,g);(l=r.getComposite())?(d.clearRect(0,0,h.width,h.height),d.drawImage(l,0,0)):D=function(){b.dirtyCache=!0;a.scene()}}}};a.getGLFX=function(b){b=b||v.Canvas();return a.glfx=a.glfx||glfx.applyShader(b)};var B=function(a){return{cmd:"shader",id:"colorMatrix",enabled:!0,data:[void 0,a.tint,a.temperature,a.brightness,a.contrast,a.exposure,void 0,void 0,a.saturation,void 0,a.hue]}};a.prepareGCO=function(a,b){b=b||k.active;var f=b.ctx;f.clearRect(0,0,b.width,
b.height);a&&!0!==w.isSourceOver[a]&&f.drawImage(k.layer0,0,0)};a.setGCO=function(a,b){if(b=b||c.tool.type){if(!a){var f=c.tool.device;if(f&&f.brush&&f.brush.composite)a=f.brush.composite;else if(f&&f.composite)a=f.composite;else{var d=c.config[b];if(!d)return;b=d.type}}switch(b){case "select":case "crop":case "zoom":case "snapshot":case "text":a="source-over";break;case "eraser":a="destination-out";break;default:if(a)break;a=w.getComposite();d.composite&&d.composite.setValue?d.composite.setValue(a):
d.composite=a}y.gco=a;var f=k.layer0,d=k.draw,g=k.active;!a||w.isSourceOver[a]?(f.style.display="block",d.style.background="",v.Canvas.clear(g),v.Canvas.clear(d)):(f.style.display="none",d.style.background=f.style.background,v.Canvas.clear(g),g.ctx.drawImage(f,0,0))}};a.preload=function(b){void 0===b&&(b={});var f=b.onprogress,g=b.onload,h=b.chunkBatch||!1;if(c.__preloading)g&&g();else{var s=c.scene.children;if(0===s.length)g&&g();else{var l=function(b,s){b.dirtyResource=!1;b.error?d.debug&&console.log("layer did not load properly",
b):s||!1===b?(console.warn(s),y.push(s||"Action missing."),b.error=!0):b.toolkit&&b.toolkit.updateObjectSize&&(d.vector.edit||"text"===b.toolkit.type)&&b.toolkit.updateObjectSize(b);f&&f(1-(m-1)/k);--m||(sk.p("json.preload"),c.__rendering=!1,c.__preloading=!1,h?(a.chunkBatch=!0,a.sceneGCO("render.preload",g)):a.sceneGCO("render.load",g),y.length&&e.ui.log(y[0]))},y=[],k=s.length,m=k;c.__rendering=!0;c.__preloading=!0;c.scene.sort();for(var z=0;z<k;z++){var v=s[z];v.error?l(v):v.render&&!v.dirtyResource?
l(v):r.ensureToolkit(v)?v.toolkit.loadResource({layer:v,useLoader:!b.fromSocket,onerror:function(a,b){l(a,b||"Resource missing.")},onload:function(a,b){l(a,b)},onprogress:function(a){console.log(a)}}):l(v,"Missing \u201c"+v.type+"\u201d toolkit")}}}};a.cache=new function(b){var f=this;f.data={};f.padding=2;f.enabled=d.cache2D;f.clean=function(a){var b=f.data[a];b&&b.canvas&&!--b.copies&&(delete f.data[a],d.debugCache&&(m.$(d.debugCache)||document.body).removeChild(b.canvas))};f.getContext=function(a){var b=
f.data[a];if(b)return b.copies++,b;var d=v.Canvas(),b=d.ctx;d.className="cache"+a;b.copies=1;return f.data[a]=b};f.add=function(g){if(g&&g.render){var h=c.scene.createHash(g);if(!g.dirtyCache&&f.data[h])g.dirtyCheck=!1,g.dirtyCache=!1,g.hash!==h&&(f.clean(g.hash),g.ctx=f.getContext(h),g.hash=h);else{g.hash=h;g.ctx=f.getContext(h);var h=f.padding,e=c.scene.getOffset(g),s=e.x+h,r=e.y+h,y=g.bbox,h=y.width,e=y.height,k=y.scale.x,z=y.scale.y,A=c.pixelRatio,x=Math.abs(h*k>>0)*A,w=Math.abs(e*z>>0)*A,H=x+
2*s*A,q=w+2*r*A;d.cache257&&u.useColorCycle[g.type]&&(H=Math.max(257,H),q=Math.max(257,q));var I=g.ctx,B=I.canvas;B.width=Math.min(8192,H||1)>>0;B.height=Math.min(8192,q||1)>>0;d.debugCache&&((m.$(d.debugCache)||document.body).appendChild(B),B.title="idx: "+g.zIndex,B.onclick=function(a){return function(){b.log(B);var f=c.selection.fromLayers([a]);b.exec("debug-layer",f)}}(g));d.debugCache&&(I.lineWidth=2,I.strokeStyle="#f00",I.strokeRect(s,r,x,w),I.strokeStyle="#00f",I.strokeRect(0,0,x+2*s,w+2*r));
x=y.padding||0;s+=x*k*A;r+=x*k*A;I.save();x=new l.Transform;x.scale(k,z);I.translate(s,r);I.scale(A,A);g.render(I,x,!1);s=g.background;r=g.border;if(s||r)A=(0>k?-h:0)-padding.left,y=(0>z?-e:0)-padding.right,x=h+y+paddingWidth,w=e+A+paddingHeight,I.globalCompositeOperation="destination-over",I.scale(k,z),I.beginPath(),r?(p.roundRect(I,A,y,x,w,r.radius),I.lineWidth=r.width||v.ZERO,I.strokeStyle=r.color,I.stroke()):p.rect(I,A,y,x,w),s&&(I.fillStyle=s.color,I.fill());I.restore();a.applyFilter(g);g.dirtyCheck=
!1;g.dirtyCache=!1}}else d.debug&&g&&"group"!==g.type&&console.log("missing",arguments)};return f}(e);return a};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.SceneRender)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SceneReplicate=function(e,c){var a=c.scene,b=c.toolkit,k=e.util,u=0,m={},d=a.clipboard={loadCopies:function(){k.getItem("copies",function(b){b&&(a.copies=JSON.parse(b))});k.getItem("copies-paths",function(a){try{m=JSON.parse(a)}catch(b){}})},enable:function(){d.loadCopies()},disable:function(){}};a.cut=function(b){k.setItem("useNativePaste",!1);b=b||a.selection.items;for(var d=a.children,l=[],f=d.length;f--;)if(b[f]){var h=d[f];l.push(h);a.shiftAt(f);a.setDirtyPixelData(h);
c.render.cache.clean(h.hash)}l.length&&(a.reindex(),a.copies=a.clone(l),w(),a.deselectAll(),b=a.clone(l).reverse(),c.history&&c.history.store({cmd:"remove",icon:"clipboard",name:"cut-objects",data:b}));e.on.cut&&e.on.cut(a.copies);return a};a.copy=function(b){k.setItem("useNativePaste",!1);x(b)&&e.on.copy&&e.on.copy(a.copies);return a};var x=function(b){b=b||a.selection.items;for(var d=a.children,c=[],f=d.length;f--;)b[f]&&c.push(d[f]);if(c.length)return a.copies=a.clone(c),w(),!0};a.paste=function(b){p(a.copies,
function(){b&&b(a.copies);e.on.paste&&e.on.paste(a.copies)});return a};var p=function(d,k){if(d.length){var l=function(){if(!--y){a.select(s);a.reindex();a.handleSelection();var b=e.feature.io.translateX,f=e.feature.io.translateY;b||f?(a.selection.move(b,f),a.copy()):a.render();k&&k()}},f=function(a){var b=e.assets.data[a.src];b&&b.clone&&"clipart"===a.type&&!1===e.feature.cacheSVG?b.clone(function(b){e.assets.add(b.toDataURL(),function(b){a.src=b;h(a)})},!0):h(a)},h=function(f){s.push(g.length);
a.push(f);b.ensureToolkit(f);f.toolkit.loadResource({layer:f,onerror:l,onload:l,useLoader:!1})};a.deselectAll();for(var g=a.children,y=d.length,z=y,s=[];z--;){var A=a.clone(d[z]);a.getById(A.id)&&(d[z].id=A.id=a.createId(),d[z].zIndex=A.zIndex=a.children.length);var p=A.src;"string"===typeof p&&0===p.indexOf("#")&&!e.assets.data[p]&&m[p]?e.assets.add({type:A.type,data:m[p],onerror:l,onload:function(a,b){A.src=a;f(A)}}):f(A)}c.history&&(z=a.clone(d),c.history.store({cmd:"add",icon:"clipboard",name:"paste-objects",
data:z}))}};a.onCutNative=function(b){eventjs.cancel(b);e.exec("layer-cut");var d=a.stringify(a.copies);b.clipboardData?(b.clipboardData.clearData(),b.clipboardData.setData("application/json",d)):window.clipboardData&&(window.clipboardData.clearData(),window.clipboardData.setData("text",d))};a.onCopyNative=function(b){eventjs.cancel(b);e.exec("layer-copy");var d=a.stringify(a.copies);b.clipboardData?(b.clipboardData.clearData(),b.clipboardData.setData("application/json",d)):window.clipboardData&&
(window.clipboardData.clearData(),window.clipboardData.setData("text",d))};a.onPasteNative=function(b){if(!c.__rendering&&!e.util.isEditingText()){eventjs.cancel(b);b=b.clipboardData.items;var d=[],l=0,f=0;if(void 0===b)e.client.clipboard=!1,a.paste();else for(var h=function(){--f||(l!==u&&(k.setItem("useNativePaste",!0),u=l),k.getItem("useNativePaste",function(b){if("true"===b){if(l){a.deselectAll();for(b=0;b<d.length;b++)c.addMedia(d[b],null,function(){c.setTool("select")});e.on.paste&&e.on.paste(a.copies)}}else e.exec("layer-paste")}))},
g=0;g<b.length;g++){++f;var y=b[g];switch(y.type){case "application/json":y.getAsString(function(b){try{b=JSON.parse(b),a.copies=b,e.exec("layer-paste")}catch(f){console.warn(f)}});break;case "text/html":y.getAsString(function(a){e.feature.debug&&console.warn(a);0===a.indexOf("blob:")?setTimeout(h,1):-1!==a.indexOf("blob:http%3A//")?setTimeout(h,1):e.convert.htmlToCanvas({html:a,onerror:h,onload:function(b){l+=a.length;d.push(b);h()}})});break;default:if(-1===y.type.indexOf("image")){setTimeout(h,
1);break}y=y.getAsFile();d.push(y);l+=y.size;setTimeout(h,1)}}}};a.duplicate=function(b){b=b||a.selection.items;k.count(b)&&(x(b),p(a.copies),e.on.duplicate&&e.on.duplicate(b));return a};var w=function(){var b=a.copies;m={};k.setItem("copies",JSON.stringify(b));k.setItem("copies-paths",JSON.stringify({}));e.save.assets({layers:b,toBlobURL:!0,onsuccess:function(a){k.setItem("copies-paths",JSON.stringify(a))}})}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.SceneReplicate)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SceneSelection=function(e,c,a){var b=this,k=c.render,u=e.util;e.module.SceneTransform&&e.module.SceneTransform(e,c,b);k&&k.clean&&(b.render=k.clean);b.remove=function(c){a.removeSelection(b.items,c);return b};b.id=void 0;b.idx=void 0;b.item=void 0;b.length=0;b.items={};b.select=function(c,d){var e=a.children[c];e&&(b.items[c]||(b.items[c]=!0,b.length++),1===b.length||d?(b.id=e.id,b.idx=e.zIndex,b.item=e):b.resetFocus());return b};b.setData=function(a){a.reset();
for(var b in a)a.select(b);return a};b.deselect=function(a){b.items[a]&&(delete b.items[a],b.length--);0===b.length&&b.resetFocus();return b};b.resetFocus=function(){b.id=void 0;b.idx=void 0;b.item=void 0};b.reset=function(){b.resetFocus();b.items={};b.length=0;return b};b.toLayers=function(c,d){c=c||b.items;var e=[];if(Array.isArray(c))for(var k=0;k<c.length;k++){var u=c[k];e.push(a.children[u])}else for(u in c)e.push(a.children[u]);return d?a.clone(e):e};b.fromLayers=function(a){for(var b={},c=
0,e=a.length;c<e;c++)b[a[c].zIndex]=!0;return b};b.asArray=function(a){if(Array.isArray(a))return a;a=a||b.items;return Object.keys(a).map(function(a){return parseInt(a)})};b.traverse=function(c){for(var d in b.items){var e=a.children[d];e&&c(e)}};b.parse=function(a){if(a&&0!==a.length)return Array.isArray(a)?isFinite(a[0].zIndex)?b.fromLayers(a):u.array2object(a):"number"===typeof a?u.array2object([a]):a};b.rotate=function(a,d){d=d||{};return b.transform({origin:d.origin,method:d.method,rotate:a})};
b.flipX=function(a){return b.flip(!0,!1,a)};b.flipY=function(a){return b.flip(!1,!0,a)};b.flip=function(a,d,c){c=c||{};return b.transform({origin:c.origin,method:c.method,scale:{x:a?-1:1,y:d?-1:1}})};b.scaleX=function(a,d){return b.scale(a,1,d)};b.scaleY=function(a,d){return b.scale(1,a,d)};b.scale=function(a,d,c){c=c||{};return b.transform({origin:c.origin,method:c.method,scale:{x:a,y:d}})};b.move=b.translate=function(a,d,c){c=c||{};return b.transform({origin:c.origin,method:c.method,translate:{x:a,
y:d}})};return b};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.SceneSelection)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Theme=function(e,c){var a=this,b=c.toolkit,k=e.util;a.controls={};a.getControls=function(){var b=a.controls;return eventjs.isTouch?b.touch:b.mouse};var u=function(b,d){var f=a.controls[b],h;for(h in d){var g=d[h],c=h.split("-"),e=c.shift(),c=c.shift();f[h]=m(e,c,g,g.width||f.width,g.height||f.height)}},m=function(a,b,f,d,g){var e={};if("svg"===f.type){e.command=f.command;for(var r in f)"title"===r.substr(0,5)&&(e[r]=f[r])}else k.mixin(f,e,{type:"undefined"});
e.width=d;e.height=g;e.viewBox=[0,0,d,g];e.type=a;e.render=function(a){var b=a.ctx,l=c.zoom;b.save();"svg"===f.type?(b.scale(d/f.vob.width,g/f.vob.height),f.render(a)):void 0!==e.image?b.drawImage(e.image,0,0):(b.beginPath(),"circle"===e.shape?(a=g/2/l,b.arc(d/2/l,a,a,0,2*Math.PI)):b.rect(.5,.5,1*d/l,1*g/l),e.lineWidth&&(b.lineWidth=e.lineWidth/l),e.shadowColor&&(b.shadowColor=e.shadowColor),e.shadowOffsetX&&(b.shadowOffsetX=e.shadowOffsetX),e.shadowOffsetY&&(b.ret.shadowOffsetY=e.ret.shadowOffsetY),
e.shadowBlur&&(b.shadowBlur=e.shadowBlur),e.fillStyle&&(b.fillStyle=e.fillStyle,b.fill()),e.strokeStyle&&(b.strokeStyle=e.strokeStyle,b.stroke()));b.restore()};return e},d={anchor:!0,spinner:!0,n:!0,ne:!0,e:!0,se:!0,s:!0,sw:!0,w:!0,nw:!0},x={normal:!0,hover:!0,focus:!0},p=function(a){a=a||{};a.padding=isFinite(a.padding)?a.padding:10;a.width=isFinite(a.width)?a.width:16;a.height=isFinite(a.height)?a.height:16;return a},w=function(c){var l=k.clone(e.feature.tools),f={},h=f.controls={};f.mouse=p(l.controls.mouse);
f.touch=p(l.controls.touch);var g=function(f,d,g){var c=g[d]||g.hover||g.normal||{},e;for(e in g)x[e]||void 0===c[e]&&(c[e]=g[e]);if(0===k.count(c))return{};g=c.command;!0===g?c.command=a.rotateScaleEvent:"string"===typeof g&&(c.command=b[g+"Event"]);"normal"===d?h[f]=c:h[f+"-"+d]=c},y=function(a,b){h[a]={command:b};h[a+"-hover"]={command:b}},m=k.clone(r),s;for(s in x){var A=l.controls[s]||(l.controls[s]={});for(c in d){var u=m[c]||(m[c]={}),u=u[s]||(u[s]=m[s]);k.mixin(A,u)}}for(c in d)s=l.controls[c],
!1!==s&&void 0!==s&&(s.hover&&!s.focus&&(s.focus=s.hover),s.normal&&!s.hover&&(s.hover=s.normal),s.normal&&!s.focus&&(s.focus=s.normal),k.mixin(m[c],s,{type:"undefined"}),"string"===typeof s?y(c,b[s]):"boolean"===typeof s?y(c,b.rotateScaleEvent):(g(c,"normal",s),g(c,"hover",s),g(c,"focus",s)));return f},r={hover:{lineWidth:1,strokeStyle:"rgba(255,255,255,1)",fillStyle:"#0080C2"},focus:{lineWidth:1,strokeStyle:"rgba(255,255,255,1)",fillStyle:"#0080C2"},normal:{lineWidth:1,strokeStyle:"rgba(255,255,255,1)",
fillStyle:"rgba(30,30,30,1)"},anchor:{command:"move",cursor:"pointer",padding:5,normal:{lineWidth:1,shadowColor:"rgba(255,255,255,0.5)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0,strokeStyle:"rgba(0,0,0,0.75)"},hover:{lineWidth:1,shadowColor:"rgba(255,255,255,0.5)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0,strokeStyle:"rgba(0,0,0,0.75)"},focus:{lineWidth:1,shadowColor:"rgba(0,0,0,0.5)",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:0,strokeStyle:"#0080C2"}}};a.construct=function(){var b=w(),d=b.controls;
new k.Queue({items:d,flatten:!0,oncomplete:function(){a.controls.mouse=b.mouse;a.controls.touch=b.touch;u("mouse",d);u("touch",d)},next:function(a,b,g){if(!a.src)return this.next();var c=this;if("svg"!==(e.vector.SVG.detect(a.src)?"svg":a.type)&&a.src)return k.loadImage({src:a.src,onload:function(){d[b]=a;d[b].image=this;c.next()},onerror:this.next});new e.vector.SVG({skipRender:!0,src:a.src,onload:function(g){g=d[b]=g;k.mixin(a,g,{type:"undefined"});c.next()}})}})};a.construct();return a};"undefined"!==
typeof module&&module.exports&&(module.exports=q.module.Theme)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SceneTransform=function(e,c,a){var b=e.util;e.setupHistory&&e.setupHistory.add({type:"transform",fn:function(a,d,c,f){a=e.doc;f=d.layers;var h=d.origin,g=d.rotate,k=d.translate;d=d.scale;var m,s;"number"===typeof d?s=m=d:d&&(m=d.x,s=d.y);var p,u;k&&(p=k.x,u=k.y);c&&(g&&(g=360-g),d&&(m=1/m,s=1/s),k&&(p=-p,u=-u));for(c=0;c<f.length;c++){var x=a.scene.getById(f[c]);if(x){var w=x.bbox;if(g){var q=h.x-w.width/2*w.scale.x,B=h.y-w.height/2*w.scale.y,E=w.x-q,F=
w.y-B,C=g*b.DEG_RAD;w.x=Math.cos(C)*E-Math.sin(C)*F+q;w.y=Math.sin(C)*E+Math.cos(C)*F+B;w.rotate+=g;x.dirtyTransform=!0}d&&(q=(h.x-w.x)*m,B=(h.y-w.y)*s,w.x=h.x-q,w.y=h.y-B,w.scale.x*=m,w.scale.y*=s,x.dirtyCheck=!0,x.dirtyTransform=!0);k&&(w.x+=p,w.y+=u,x.dirtyTransform=!0);x.inbounds=void 0}}}});var k,u,m,d,x,p,w;a.transform=function(a,v){var l=a.method,f=a.rotate,h;if(h=a.scale)(h=a.scale,isFinite(h)&&(h={x:h,y:h}),isFinite(h.y)||isFinite(h.x))?isFinite(h.y)?isFinite(h.x)||(h.x=h.y):h.y=h.x:(h.x=
1,h.y=1);var g=h,y=a.translate;h=isFinite(f)&&0!==f;var z=void 0!==g&&(1!==g.x||1!==g.y),s=void 0!==y&&(0!==y.x||0!==y.y),A=c.scene,H=A.children,q=a.abs||a.absolute,J=!l||"cache"===l||"down"===l||l.cache,D=!l||"move"===l||l.move,B=!l||"record"===l||"up"===l||l.record;J&&(w=p=x=d=m=u=k=void 0,k=0,u=a.origin||A.getBoundingOrigin({useSelection:!0,useHovered:!0}),m=0,x=d=1,w=p=0);if(D){if(!h&&!z&&!s)return this;h&&(m+=f);z&&(d*=g.x,x*=g.y);s&&(p+=y.x,w+=y.y)}var E=0;if(Array.isArray(a.items)){for(var F=
{},C=0,E=a.items.length;C<E;C++){var G=A.getById(a.items[C]);G&&(F[G.zIndex]=!0,E++)}a.items=F}else E=a.items?b.count(a.items):this.length;var F=[],C=u,G=a.items||this.items,L;for(L in G)if(G=H[L]){var K=G.bbox,R=e.feature[G.type]||e.feature.tools;A.setDirtyPixelData(G);if(f&&h&&D)if(!1===G.rotatable||!1===R.rotatable)G.dirtyControl=!0;else{if(q)K.rotate=f;else{var N=K.width/2*K.scale.x,V=K.height/2*K.scale.y,N=C.x-N,P=C.y-V,V=K.x-N,Q=K.y-P,O=f*b.DEG_RAD;K.x=Math.cos(O)*V-Math.sin(O)*Q+N;K.y=Math.sin(O)*
V+Math.cos(O)*Q+P;K.rotate+=f}G.dirtyTransform=!0;G.dirtyControl=!0;G.inbounds=void 0;k=!0}!g||!J&&K.scaleCache||(K.scaleCache={x:1,y:1,px:K.scale.x,py:K.scale.y,mx:K.x,my:K.y});if(g){if(D&&z)if(!1===G.scalable||!1===R.scalable)G.dirtyControl=!0;else{if(q)K.scale.x=g.x,K.scale.y=g.y;else if(1<E||"objectBoundingBox"===K.units){O=(C.x-K.x)*g.x;P=(C.y-K.y)*g.y;if(1===g.y||1===g.x)N=K.width/2*K.scale.x,V=K.height/2*K.scale.y,O-=(C.x-(K.x+N))*(1-g.y),P-=(C.y-(K.y+V))*(1-g.x);K.x=C.x-O;K.y=C.y-P;K.scale.x*=
g.x;K.scale.y*=g.y;K.scaleCache.x*=g.x;K.scaleCache.y*=g.y}else{V=K.scale.x*=g.x;O=K.scale.y*=g.y;K.scaleCache.x*=g.x;K.scaleCache.y*=g.y;var N=K.width/2*V,V=K.height/2*O,O=b.DEG_RAD*K.rotate,T;var P=a.control,S=K.scale,Q=K.width;T=K.height;var X=new e.vector.Transform;X.translate(K.x,K.y);X.scale(S.x,S.y);S={};S.cp=X.point2d(Q/2,T/2);S.nw=X.point2d(0,0);S.ne=X.point2d(Q,0);S.se=X.point2d(Q,T);S.sw=X.point2d(0,T);S.n=X.point2d(Q/2,0);S.e=X.point2d(Q,T/2);S.s=X.point2d(Q/2,T);S.w=X.point2d(0,T/2);
T=S[P]||S.cp;N=K.x+N;P=K.y+V;Q=T.x-N;T=T.y-P;X=Math.cos(O);O=Math.sin(O);V=Q*X-T*O+N;Q=Q*O+T*X+P;K.x-=V-C.x;K.y-=Q-C.y}G.dirtyTransform=!0;G.dirtyControl=!0;G.inbounds=void 0;A.updateConstrain(G);k=!0}if(B||G.usePixelData)G.dirtyCheck=!0,K.scaleCache=void 0}y&&s&&D&&(!1===G.movable||!1===R.movable?G.dirtyControl=!0:(q?(K.x=y.x,K.y=y.y):(K.x+=y.x,K.y+=y.y),G.dirtyTransform=!0,G.dirtyControl=!0,G.inbounds=void 0,A.updateConstrain(G),k=!0));k&&(B&&(g&&(G.dirtyCheck=!0),G.dirtyControl=!0),G.id!==c.toolkit.area.inGenesis&&
F.push(G.id))}if(!1===k)return this;f=e.net.dataChannel&&e.feature.stream.sketchLive&&!v;if(c.history&&B&&F.length){L={};B="";g=0!==m;y=1!==d||1!==x;H=0!==p||0!==w;L.layers=F;L.origin=C;g&&(B="rotate",L.rotate=m);y&&(B=B?"transform":"scale",L.scale={x:d,y:x});H&&(B=B?"transform":"move",L.translate={x:p,y:w});if(g||y||H)c.history.store({cmd:"transform",icon:"infinity",name:B,data:L},v),e.on.transform&&e.on.transform(L,F);e.on.rotate&&g&&e.on.rotate(L,F);e.on.scale&&y&&e.on.scale(L,F);e.on.move&&H&&
e.on.move(L,F)}f&&(C={},C.method=l,C.origin=a.origin||u,C.items=F,h&&(C.rotate=a.rotate),z&&(C.scale=a.scale),s&&(C.translate=a.translate),e.net.dataChannel.send(["scene.transform",C]));A.updateBBox();this.render("scene.transform");return this}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.SceneTransform)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.GenerateMedia=function(e,c){var a=e.gen,b=e.client,k=e.util,u=k.Canvas(),m=u.ctx,d=function(a){var d=a.callback,c=a.ctx,e=c.canvas,k=c.createPattern(e,"repeat");b.io&&b.io.blob?e.toBlob(function(b){b=URL.createObjectURL(b);k.css='url("'+b+'")';k.data=b;k.id=a.id;d&&d(k)}):(c=e.toDataURL(),k.css='url("'+c+'")',k.data=c,k.id=a.id,d&&d(k));return k};a.paper=function(b,c){var e=(k.metrics||k.getScreenMetrics())["in>px"],e={notebook:{id:"notebook",lineStartTop:.85*
e,lineHeight:30,lineColor:"#8CA6BD",marginLeft:.85*e,marginColor:"#FF7088",fillColor:"#F8F9B3"},looseLeaf:{id:"looseLeaf",lineStartTop:.85*e,lineHeight:30,lineColor:"#CAEAFB",marginLeft:.85*e,marginColor:"#FF7088",fillColor:"#FAFAFA"},lined:{id:"lined",lineStartTop:-.5,gutter:.25*e,lineHeight:30,lineColor:"#8CA6BD",fillColor:"#FAFAFA"}};b=e[b]||b||e.notebook;b.callback=c;var r=b.grid||0,m=b.gutter||0,l=b.lineStartTop||0,f=b.lineStartLeft||0,e=b.lineHeight||1,h=b.lineColor||"#8CA6BD",g=b.marginLeft||
0,y=b.marginColor||"#C37F9B",z=k.Canvas(1024,1024).ctx;z.fillStyle=b.fillColor||"#fff";z.fillRect(0,0,1024,1024);r&&(z.save(),z.translate(m,m),r=a.grid({size:r,strokeColor:h,fillColor:"none"}),z.fillStyle=r,z.fillRect(0,0,1024,1024),z.restore());r=1024/e;z.save();z.translate(f,l);for(l=0;l<r;l++)z.beginPath(),z.moveTo(0,l*e),z.lineTo(1024,l*e),z.lineWidth=1,z.strokeStyle=h,z.stroke();z.restore();g&&(z.save(),z.beginPath(),z.moveTo(g,0),z.lineTo(g,1024),z.lineWidth=1,z.strokeStyle=y,z.stroke(),z.restore());
b.ctx=z;return d(b)};a.grid=function(a,b){var c={grid:{id:"grid",size:20,strokeColor:"#ddd",fillColor:"#fff"},graphPaper:{id:"graphPaper",size:20,strokeColor:"#BEE0BD",fillColor:"#F0FCE1"},blueprint:{id:"blueprint",size:20,strokeColor:"#2893e0",fillColor:"#0078CF"}};a=c[a]||a||c.grid;var c=a.size||12,e=a.strokeColor||"#000",m=a.fillColor||"#1f1f1f",l=k.Canvas(c,c).ctx;a.callback=b||a.callback;a.ctx=l;l.fillStyle=m;l.fillRect(0,0,c,c);l.moveTo(0,0);l.lineTo(0,c);l.moveTo(0,0);l.lineTo(c,0);l.lineWidth=
1;l.strokeStyle=e;l.stroke();return d(a)};a.interlace=function(a,b){a=a||{};var c={transparent:{id:"transparent",size:12,innerColor:"#fff",outerColor:"#d9d9d9"},transparentDark:{id:"transparentDark",size:12,innerColor:"#000",outerColor:"#1f1f1f"}},e=c.transparent,c=c[a]||c[a.id]||a,k=c.size||e.size,l=c.innerColor||e.innerColor,e=c.outerColor||e.outerColor;u.width=2*k;u.height=2*k;m.fillStyle=l;m.fillRect(0,0,k,k);m.fillStyle=e;m.fillRect(k,0,k,k);m.fillStyle=e;m.fillRect(0,k,k,k);m.fillStyle=l;m.fillRect(k,
k,k,k);if(a.toDataURL)return u.toDataURL();c.callback=b||c.callback;c.ctx=m;return d(c)};a.rangeBar=function(a){a=a||{};a.dash=a.dash||{};e.ui.rangeStyle?k.mixin(e.ui.rangeStyle,a):a.top=8;u||initCanvas();var b=c.pixelRatio,d=(a.top||0)*b,r=(a.left||0)*b,v=(a.barWidth||233)*b,l=(a.barHeight||6)*b,f=a.fillStyle||"#555",h=a.gradient,g=d+l;a=a.dash;a.height=a.height||4;a.heightSmall=a.heightSmall||3;a.strokeStyle=a.strokeStyle||"#666";a.lineWidth=a.lineWidth||1;a.globalAlpha=a.globalAlpha||1;a.position=
a.position||"top";u.width=v+1;u.height=l+a.height+d;u.style.width=u.width/b+"px";u.style.height=u.height/b+"px";m.clearRect(r,d,v,30);var b=0,y=v-9;m.save();m.beginPath();m.lineWidth=a.lineWidth;m.globalAlpha=a.globalAlpha;var z;z="bottom"===a.position?g-5:d-1;for(var s=a.height,A=a.heightSmall,g=0;g<=y+1;g+=y/10){var H=Math.round(g)+r+4.5,q=b%5?A:s;m.moveTo(H,z);"bottom"===a.position?m.lineTo(H,z+q):m.lineTo(H,z-q);m.strokeStyle=a.strokeStyle;m.stroke();m.beginPath();b++}m.restore();if(h)for(f=m.createLinearGradient(0,
0,v,0),g=0,a=h.length;g<a;g++)f.addColorStop(g/(a-1||1),h[g]);m.fillStyle=f;H=r+.5;m.lineWidth=.25;m.strokeStyle="#000";e.vector.shape?e.vector.shape.roundRect(m,H,d,H+v,l,l/2):m.rect(H,d,H+v,l);m.fill();m.stroke();return u}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.GenerateMedia)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.GeneratePreview=function(e){var c=e.util,a=e.gen;a.preview=function(a,k){a=a||{};var u=a.pixelRatio||1,m=a.type||"stamp",d=(a.width||52)*u,x=(a.height||52)*u,p=a.oncomplete?[]:{},w=a.oncomplete||function(a){console.log(a)},r=a.background||"none",v=a.download||!1,u=a.debug||!1;a.src?k=[{filepath:a.src}]:a.resource?k=[{resource:a.resource}]:!k&&e.lib&&(k=e.lib[m].paths);var l=a.canvas||c.Canvas(),f=l.getContext("2d");u&&document.body.appendChild(l);var h=
function(a,b,f){c.thumbnailer({src:a,crop:"edge",width:d,height:x,background:r,croparea:!1,onload:function(a){v?a.toBlob(function(a){f.push({filename:b,blob:a});g.next()}):(f.push({filename:b,canvas:a}),g.next())}})},g=new c.Queue({items:k,flatten:!0,onprogress:function(a){1<k.length&&console.log("load",a)},oncomplete:function(){v?e.io.zip.encode(p,function(a){e.download.blob(a,m+"-preview.zip")},function(a){console.log("zip",a)}):a.src||a.resource?w(p[0]):w(p)},next:function(c){g=this;if(c.filepath&&
"#"===c.filepath[0])return this.next();var k=c.filepath?c.filepath:e.lib[m].getSrc(c),s="",r=[];if(a.src||a.resource)p=r;else{var v=k.replace(e.loc.host,"").substr(1).split("/");if(1<v.length){for(var u=[p],s=v.pop();v.length;){var w=v.shift();if(w){var q=u[u.length-1];q[w]||(q[w]=[]);u.push(q[w])}}r=q[w]}else p.length||(p=[]),s=v[0],r=p}s=s.replace("svg","png");v=function(a){l.width=d;l.height=x;a.render&&a.render({ctx:f,placement:"crop",width:d,height:x});h(l,s,r)};switch(m){case "clipart":c.resource?
v(c.resource):new e.vector.SVG({ctx:f,src:k,useCache:isFinite(a.useCache)?a.useCache:!0,onerror:function(a){console.log(a,"error loading svg",c);g.next()},onload:v});break;case "stamp":h(k,s,r)}}})};a.preview.stamp=function(b,c,e){b=b||{};b.type="stamp";a.preview(b,c,e)};a.preview.clipart=function(b,c,e){b=b||{};b.type="clipart";a.preview(b,c,e)};a.preview.font=a.preview.text=function(b){var k=a.canvas||(a.canvas=c.Canvas(1,1)),u=k.getContext("2d"),m=[],d=[],x=[],p=e.lib.text;if(b){for(var w in p.byName)break;
d.push(p.byName[w]);x.push(w)}else for(w in p.byName)b=c.clone(p.byName[w]),b.filepath=p.getSrc(b),x.push(w),d.push(b);var r=function(a){k.width=236;k.height=60;k.style.width="300px";k.style.height="50px";u.textAlign="center";u.textBaseline="middle";u.font="60px '"+a.name+"', Arial, Helvetica";var b=u.measureText(a.name).width,d=e.vector.text.measureTextHeight(a.name,u.font),b=Math.min(k.width/(b+40),k.height/(d+20));1>b&&(u.font=60*b+"px '"+a.name+"', Arial, Helvetica");u.fillStyle="#fff";u.fillText(a.name,
k.width/2,k.height/2);k.toBlob(function(b){m.push({filename:a.name+".png",blob:b});v.next()})},v=new c.Queue({items:d,flatten:!0,oncomplete:function(){e.io.zip.encode(m,function(a){e.download.blob(a,"font-preview.zip")})},onprogress:function(a){console.log(a)},next:function(a){v=this;if(e.vector.text.detectFont(a.name))r(a);else{var b=c.clone(a);b.timeout=1E3;b.callback=function(b){b&&console.log("missing: "+a.name);r(a)};e.vector.text.attach(b)}}})};return a};"undefined"!==typeof module&&module.exports&&
(module.exports=q.module.GeneratePreview)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.vector||(q.vector={});e.BBox=function(a,b,c){sketch=e.BBox.__self||sketch;if(!a)return{};this.unset();if(4===a.length&&isFinite(a[0])){var u=new sketch.vector.Transform(b);b=u.point2d(a[0],a[1]);c=u.point2d(a[0],a[3]);var m=u.point2d(a[2],a[3]),d=u.point2d(a[2],a[1]);a=Math.min(b.x,c.x,m.x,d.x);var u=Math.max(b.x,c.x,m.x,d.x),x=Math.min(b.y,c.y,m.y,d.y);b=Math.max(b.y,c.y,m.y,d.y);return{x1:a,y1:x,x2:u,y2:b}}return this.path(a,b,c)};e.BBox.prototype={path:function(a,b,c){var e,
m=!0;b&&(e=new sketch.vector.Transform(b),m=sketch.vector.Transform.isIdentity(b));var d;b=this.x;var x=this.y,p,w,r;if(m)for(r=0,m=a.length;r<m;r++)switch((d=a[r]).cmd){case "M":d.x<b.min&&(b.min=d.x);d.x>b.max&&(b.max=d.x);d.y<x.min&&(x.min=d.y);d.y>x.max&&(x.max=d.y);p=d.x;w=d.y;break;case "L":d.x<b.min&&(b.min=d.x);d.x>b.max&&(b.max=d.x);d.y<x.min&&(x.min=d.y);d.y>x.max&&(x.max=d.y);p=d.x;w=d.y;break;case "C":this.cubic(p,w,d.x1,d.y1,d.x2,d.y2,d.x,d.y);p=d.x;w=d.y;break;case "Q":var v=p+2/3*(d.x1-
p),l=w+2/3*(d.y1-w),f=v+(d.x-p)/3,h=l+(d.y-w)/3;this.cubic(p,w,v,l,f,h,d.x,d.y);p=d.x;w=d.y}else for(r=0,m=a.length;r<m;r++)switch((d=a[r]).cmd){case "M":var g=e.point2d(d.x,d.y);g.x<b.min&&(b.min=g.x);g.x>b.max&&(b.max=g.x);g.y<x.min&&(x.min=g.y);g.y>x.max&&(x.max=g.y);p=g.x;w=g.y;break;case "L":g=e.point2d(d.x,d.y);g.x<b.min&&(b.min=g.x);g.x>b.max&&(b.max=g.x);g.y<x.min&&(x.min=g.y);g.y>x.max&&(x.max=g.y);p=g.x;w=g.y;break;case "C":g=e.point2d(d.x,d.y);v=e.point2d(d.x1,d.y1);d=e.point2d(d.x2,d.y2);
this.cubic(p,w,v.x,v.y,d.x,d.y,g.x,g.y);p=g.x;w=g.y;break;case "Q":g=e.point2d(d.x,d.y),e.point2d(d.x1,d.y1),v=p+2/3*(g.x1-p),l=w+2/3*(g.y1-w),f=v+(g.x-p)/3,h=l+(g.y-w)/3,this.cubic(p,w,v,l,f,h,g.x,g.y),p=g.x,w=g.y}c&&(b.expand(c),x.expand(c));return{x1:b.min,x2:b.max,y1:x.min,y2:x.max}},cubic:function(a,b,c,e,m,d,x,p){var w=this.x,r=this.y;x<w.min&&(w.min=x);x>w.max&&(w.max=x);p<r.min&&(r.min=p);p>r.max&&(r.max=p);var v=r.min<=e&&e<=r.max&&r.min<=d&&d<=r.max;if(!(w.min<=c&&c<=w.max&&w.min<=m&&m<=
w.max)){var l=3*a-9*c+9*m-3*x,f=6*c-12*m+6*x,h=3*m-3*x;if(1E-10>=Math.abs(l))1E-10<=Math.abs(f)&&(h=-h/f,1E-10<h&&1>h&&w.extendToCubic(h,1-h,a,x,c,m));else if(h=f*f-4*l*h,1E-10<=h){var g=Math.sqrt(h),h=(-f+g)/(2*l);1E-10<h&&1>h&&w.extendToCubic(h,1-h,a,x,c,m);h=(-f-g)/(2*l);1E-10<h&&1>h&&w.extendToCubic(h,1-h,a,x,c,m)}}v||(l=3*b-9*e+9*d-3*p,f=6*e-12*d+6*p,h=3*d-3*p,1E-10>=Math.abs(l)?1E-10<=Math.abs(f)&&(h=-h/f,1E-10<h&&1>h&&r.extendToCubic(h,1-h,b,p,e,d)):(h=f*f-4*l*h,1E-10<=h&&(g=Math.sqrt(h),h=
(-f+g)/(2*l),1E-10<h&&1>h&&r.extendToCubic(h,1-h,b,p,e,d),h=(-f-g)/(2*l),1E-10<h&&1>h&&r.extendToCubic(h,1-h,b,p,e,d))))},unset:function(){this.x=new c({min:Infinity,max:-Infinity});this.y=new c({min:Infinity,max:-Infinity})}};var c=function(a){this.min=a.min;this.max=a.max};c.prototype={extendToCubic:function(a,b,c,e,m,d){a=a*a*a*c+3*a*a*b*m+3*a*b*b*d+b*b*b*e;a<this.min&&(this.min=a);a>this.max&&(this.max=a)},extendTo:function(a){a<this.min&&(this.min=a);a>this.max&&(this.max=a)},contains:function(a){return this.min<=
a&&a<=this.max},expand:function(a){this.min-=a;this.max+=a}};"undefined"!==typeof module&&module.exports&&(module.exports=e.BBox)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.vector=q.vector||{};var e=function(a){this.ctx=a;this.data=[];this.start={x:0,y:0};this.current={x:0,y:0};this.dashIdx=0;this.dashArray=[4,4];this.dashCurve=!1;this.dashRemainder=this.dashOffset=0;this.dashStyle=["#f00","#00f"];this.dashStyleIdx=0;this.reset=function(){this.distance=this.dashRemainder=this.dashIdx=0;this.data=[]};this.moveTo=function(a,c){var e=this.ctx;this.start.x=a;this.start.y=c;this.current.x=a;this.current.y=c;e&&e.moveTo(a,c)};this.lineTo=function(a,c){for(var e=
this.ctx,m=this.getData||!1,d=this.current||{x:0,y:0},x=this.dashArray,p=x.length,w=this.dashIdx,r=d.x,v=d.y,l=a-d.x,f=c-d.y,h=Math.sqrt(l*l+f*f),g=Math.abs(l)>Math.abs(f),y=g?f/l:l/f,z;.1<h;){this.dashRemainder?(z=this.dashRemainder,this.dashRemainder=0):z=x[++w%p];if(e&&0>(h-=z)){0===w%2?e.lineTo(a,c):e.moveTo(a,c);break}z=Math.sqrt(z*z/(1+y*y));g?(0>l&&(z=-z),d.x+=z,d.y+=y*z):(0>f&&(z=-z),d.x+=y*z,d.y+=z);e&&w%2&&e&&(e.moveTo(r,v),e.strokeStyle=this.dashStyle[this.dashStyleIdx++%2],e.lineTo(d.x,
d.y));m&&(0===this.data.length&&this.data.push({cmd:"M",x:r,y:v}),this.data.push({cmd:"L",x:d.x,y:d.y}));r=d.x;v=d.y}this.dashIdx=w;this.dashRemainder=Math.abs(h);this.current.x=a;this.current.y=c;if(m)return this.data};this.quadraticCurveTo=function(a,c,e,m){var d=this.current;a=d.x+2/3*(a-d.x);c=d.y+2/3*(c-d.y);this.bezierCurveTo(a,c,a+(e-d.x)/3,c+(m-d.y)/3,e,m)};this.bezierCurveTo=function(a,c,e,m,d,x){var p=this.ctx,w=this.getData||!1,r=this.current||{x:0,y:0},v=this.dashCurve||!1,l=this.dashArray,
f=l.length,h=this.dashIdx,g=!0;a=[r.x,r.y,a,c,e,m,d,x];c=r.x;e=r.y;m=r.x;for(var y,z,r=r.y,s,A=0,H,q,J,D,B,E=0;1>A;){this.dashRemainder?(g=!1,B=this.dashRemainder,this.dashRemainder=0):(g=!0,B=l[++h%f]);D=A=0;y=m;for(s=r;1>A;A+=1E-4){z=c-y;s=e-s;D+=Math.sqrt(z*z+s*s);if(D>=B)break;s=1-A;z=s*s*s;H=3*A*s*s;q=3*A*A*s;J=A*A*A;y=c;s=e;c=z*a[0]+H*a[2]+q*a[4]+J*d;e=z*a[1]+H*a[3]+q*a[5]+J*x}E+=D;s=this.bezierKnotSplit(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],A);a=s.curve2;s=s.curve1;g&&(p&&p.moveTo(m,r),w&&
0===this.data.length&&this.data.push({cmd:"M",distance:0,x:m,y:r}));p&&h%2&&(p.moveTo(m,r),p.strokeStyle=this.dashStyle[this.dashStyleIdx++%2],v?p.bezierCurveTo(s[2],s[3],s[4],s[5],s[6],s[7]):p.lineTo(s[6],s[7]));w&&(v?this.data.push({cmd:"C",distance:E,x1:s[2],y1:s[3],x2:s[4],y2:s[5],x:s[6],y:s[7]}):this.data.push({cmd:"L",distance:E,x:s[6],y:s[7]}));m=c;r=e}this.dashIdx=h;this.dashRemainder=B-D;this.distance+=E;this.current.x=c;this.current.y=e;if(w)return this.data};this.closePath=function(){var a=
this.getData||!1;this.lineTo(this.start.x,this.start.y);a&&this.data.push({cmd:"Z"})};this.lineAngle=e.lineAngle;this.lineDistance=e.lineDistance;this.pointToLineDistance=e.pointToLineDistance;this.quadraticDistance=e.quadraticDistance;this.bezierDistance=e.bezierDistance;this.bezierPointAtTime=e.bezierPointAtTime;this.bezierKnotSplit=e.bezierKnotSplit};e.dotProduct=function(a,b,c,e){return a*c+b*e};e.lineAngle=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)};e.lineDistance=function(a,b){var c=a.x-
b.x,e=a.y-b.y;return Math.sqrt(c*c+e*e)};e.pointDifference=function(a,b){return a.x-b.x+(a.y-b.y)};e.pointOnLine=function(a,b,c){var e=b.x-a.x;b=b.y-a.y;a=b*(c.x-a.x)-e*(c.y-a.y)/(e*e+b*b);return{x:c.x-a*b,y:c.y+a*e}};e.pointAtAngle=function(a,b,c){return{x:Math.cos(b)*c+a.x,y:Math.sin(b)*c+a.y}};e.pointAtTimeAngle=function(a,b,c,e,m,d){var x=a-c,p=b-e;m*=Math.sqrt(x*x+p*p);a=Math.atan2(e-b,c-a);d&&(a+=d);return{x:Math.cos(a)*m,y:Math.sin(a)*m}};e.pointAtTimeRadius=function(a,b,c,e){var m=b.x-a.x,
d=b.y-a.y;b=a.x+m*c;a=a.y+d*c;m=Math.atan2(d,m)-1.57079632;return{x:b+Math.cos(m)*e,y:a+Math.sin(m)*e}};e.pointAtTime=function(a,b,c){return{x:a.x+(b.x-a.x)*c,y:a.y+(b.y-a.y)*c}};e.pointToLineDistance=function(a,b,c,e,m,d){var x=c-m,p=e-d,x=x*x+p*p;if(0===x)return this.lineDistance(a,b,c,e);x=((a-c)*(m-c)+(b-e)*(d-e))/x;return 0>x?this.lineDistance(a,b,c,e):1<x?this.lineDistance(a,b,m,d):this.lineDistance(a,b,c+x*(m-c),e+x*(d-e))};e.quadraticDistance=function(a,b,c){var e,m;e=a.x-2*b.x+c.x;m=a.y-
2*b.y+c.y;c=2*b.x-2*a.x;b=2*b.y-2*a.y;a=4*(e*e+m*m);e=4*(e*c+m*b);c=c*c+b*b;m=2*Math.sqrt(a+e+c);b=Math.sqrt(a);var d=2*a*b,x=2*Math.sqrt(c),p=e/b;return(d*m+b*e*(m-x)+(4*c*a-e*e)*Math.log((2*b+p+m)/(p+x)))/(4*d)};e.bezierDistance=function(a,b,c,e,m,d,x,p){for(var w=0,r=a,v=b,l=0;1>l;l+=.001)var f=1-l,h=f*f*f,g=3*l*f*f,y=3*l*l*f,z=l*l*l,f=h*a+g*c+y*m+z*x,h=h*b+g*e+y*d+z*p,r=f-r,v=h-v,w=w+Math.sqrt(r*r+v*v),r=f,v=h;return w};e.bezierPointAtTime=function(a,b,c,e,m,d,x,p,w){var r=1-w,v=r*r*r,l=3*w*r*
r,r=3*w*w*r;w*=w*w;return{x:v*a+l*c+r*m+w*x,y:v*b+l*e+r*d+w*p}};e.bezierKnotSplit=function(a,b,c,e,m,d,x,p,w){var r=a+(c-a)*w,v=b+(e-b)*w;c+=(m-c)*w;e+=(d-e)*w;m+=(x-m)*w;d+=(p-d)*w;var l=r+(c-r)*w,f=v+(e-v)*w;c+=(m-c)*w;e+=(d-e)*w;var h={};h.x=l+(c-l)*w;h.y=f+(e-f)*w;h.curve1=[a,b,r,v,l,f,h.x,h.y];h.curve2=[h.x,h.y,c,e,m,d,x,p];return h};e.SAT=function(){var a=function(a,c,e,d){e=b(a,c,e);a=b(a,c,d);return e.max<a.min||a.max<e.min?!1:!0},b=function(a,b,c){for(var d=Infinity,e=-Infinity,p=0,w=c.length;p<
w;p++)var r=c[p],r=r.x*a+r.y*b,d=r<d?r:d,e=r>e?r:e;return{min:d,max:e}};return function(b,c){var e=b[0],d=b[1],x=b[2],p=c[0],w=c[1],r=c[3];return a(d.x-e.x,d.y-e.y,b,c)&&a(d.x-x.x,d.y-x.y,b,c)&&a(p.x-r.x,p.y-r.y,b,c)&&a(p.x-w.x,p.y-w.y,b,c)?!0:!1}}();e.catmullRomSplineData=function(a,b){a=q.util.clone(a);b=1-(b||0);var c=a.length;a.splice(0,0,a[0]);a.push(a[c-1]);a.push(a[c-1]);if(2>=c)return a;for(var e=[],c=c-2,m=0;m<c;m++){var d=a[m],x=a[m+1],p=a[m+2]||x,w=a[m+3]||p||x;0===m&&e.push({beginPath:!0,
cmd:"M",interval:x.interval||0,x:x.x,y:x.y});e.push({cmd:"C",interval:p.interval||0,x1:x.x+(b*p.x-b*d.x)/6,y1:x.y+(b*p.y-b*d.y)/6,x2:p.x+(b*x.x-b*w.x)/6,y2:p.y+(b*x.y-b*w.y)/6,x:p.x,y:p.y})}return e};e.catmullRomSpline=function(a,b,c){b=q.util.clone(b);c=1-(c||0);b.pop();var e=b.length;b.splice(0,0,b[e-2]);b.push(b[2]);if(2>=e){var e=b[0],m=b[1];a.moveTo(e.x,e.y);a.lineTo(m.x+.1,m.y+.1)}else for(var d=e-1,x=0;x<d;x++){var m=b[x+1],e=b[x-0]||m,p=b[x+2]||m,w=b[x+3]||p||m;0===x&&(a.beginPath(),a.moveTo(m.x,
m.y));a.bezierCurveTo(m.x+(c*p.x-c*e.x)/6,m.y+(c*p.y-c*e.y)/6,p.x+(c*m.x-c*w.x)/6,p.y+(c*m.y-c*w.y)/6,p.x,p.y)}};var c=function(a,b,c){a.fillStyle=c;a.fillRect(b.x-5,b.y-5,10,10)};e.lineIntersection=function(a,b,c,e){var m=(e.x-c.x)*(a.y-c.y)-(e.y-c.y)*(a.x-c.x),d=(b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x);c=(e.y-c.y)*(b.x-a.x)-(e.x-c.x)*(b.y-a.y);if(0!==c)return{x:a.x+m/c*(b.x-a.x),y:a.y+d/c*(b.y-a.y)}};e.arcSpline=function(a,b,k){for(var u=b.length-1,m=0;m<u;m++){var d=b[(m+0)%u],x=b[(m+1)%u],p=b[(m+
2)%u],w=e.pointAtTime(d,x,.5),r=e.pointAtTime(x,p,.5),v=e.pointAtAngle(w,e.lineAngle(d,x)+90*sketch.util.DEG_RAD,1E4),l=e.pointAtAngle(r,e.lineAngle(x,p)+90*sketch.util.DEG_RAD,1E4),d=e.lineDistance(d,x)/2,d=e.lineDistance(w,r)/2;if(v=e.lineIntersection(w,v,r,l))a.fillStyle="#f00",a.fillRect(v.x-10,v.y-10,20,20);0===m&&a.moveTo(w.x,w.y);c(a,x,"#f0f");c(a,w,"#fff");c(a,r,"#ff0");a.arcTo(x.x,x.y,p.x,p.y,k>d?d:k)}a.closePath()};q.vector.Path=e;"undefined"!==typeof module&&module.exports&&(module.exports=
q.vector.Path)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.vector||{};q={a:1,b:0,x:0,c:0,d:1,y:0};var c=function(a){var c=e.Transform.identity;return a.a===c.a&&a.b===c.b&&a.c===c.c&&a.d===c.d&&a.x===c.x&&a.y===c.y},a=function(){return{a:1,b:0,x:0,c:0,d:1,y:0}};e.Transform=function(a,c){this.matrix=void 0===a?{a:1,b:0,x:0,c:0,d:1,y:0}:void 0===a[0]?a:this.cloneMatrix(a);return this};e.Transform.identity=q;e.Transform.isIdentity=c;e.Transform.getIdentity=a;e.Transform.prototype={identity:q,isIdentity:c,getIdentity:a,point2d:function(a,
c){var e=this.matrix;return{x:e.a*a+e.c*c+e.x,y:e.b*a+e.d*c+e.y}},point2dx:function(a,c,e){var m=this.matrix,d=a[c],x=a[e];a[c]=m.a*d+m.c*x+m.x;a[e]=m.b*d+m.d*x+m.y},flatten:function(a,c,e){if(a&&a.length){c&&(a=JSON.parse(JSON.stringify(a)));c=0;for(var m=a.length,d;c<m;c++)if(d=a[c])switch(d.cmd){case "M":this.point2dx(d,"x","y");break;case "L":this.point2dx(d,"x","y");break;case "C":this.point2dx(d,"x","y");this.point2dx(d,"x1","y1");this.point2dx(d,"x2","y2");break;case "Q":this.point2dx(d,"x",
"y");this.point2dx(d,"x1","y1");break;case "Z":case "z":isFinite(d.x)&&isFinite(d.y)&&this.point2dx(d,"x","y")}e&&(this.matrix=this.getIdentity());return a}},invert:function(a){a=a||this.matrix;void 0===a.a&&(M=this.cloneMatrix(M));var c=a.a*a.d-a.b*a.c;delete this.matrix;this.combine({a:a.d/c,b:-a.b/c,x:(a.b*a.y-a.d*a.x)/c,c:-a.c/c,d:a.a/c,y:(a.c*a.x-a.a*a.y)/c});return this},transform:function(a,c,e,m,d,x){var p=this.matrix;this.matrix={a:p.a*a+p.c*c,b:p.b*a+p.d*c,c:p.a*e+p.c*m,d:p.b*e+p.d*m,x:p.a*
d+p.c*x+p.x,y:p.b*d+p.d*x+p.y};return this},setTransform:function(a,c,e,m,d,x){this.matrix={a:a,b:c,c:e,d:m,x:d,y:x};return this},rotate:function(a){var c=this.matrix,e=Math.cos(a);a=Math.sin(a);this.matrix={a:c.a*e+c.b*-a,b:c.a*a+c.b*e,c:c.c*e+c.d*-a,d:c.c*a+c.d*e,x:c.x,y:c.y};return this},scale:function(a,c){void 0===c&&(c=a);var e=this.matrix;this.matrix={a:e.a*a,b:e.b*c,c:e.c*a,d:e.d*c,x:e.x,y:e.y};return this},skew:function(a,c){var e=this.matrix,m=e.a,d=e.b,x=e.c,p=e.d,w=Math.tan(a),r=Math.tan(c);
e.a=m+x*r;e.b=d+p*r;e.c=m*w+x;e.d=d*w+p;return this},translate:function(a,c){void 0===c&&(c=0);var e=this.matrix;e.x=e.a*a+e.c*c+e.x;e.y=e.b*a+e.d*c+e.y;return this},combine:function(a){var c=[];if(void 0!==a.matrix)for(var e=0;e<arguments.length;e++)c[e]=arguments[e].matrix;else if("number"===typeof a.a)for(e=0;e<arguments.length;e++)c[e]=arguments[e];else c=a;for(var e=this.matrix,m=[],d=0;d<c.length;d++)void 0===e?e=c[d]:(m=c[d],e={a:e.a*m.a+e.b*m.c,b:e.a*m.b+e.b*m.d,c:e.c*m.a+e.d*m.c,d:e.c*m.b+
e.d*m.d,x:e.a*m.x+e.c*m.y+e.x,y:e.b*m.x+e.d*m.y+e.y});this.matrix=e;return this},clone:function(){return new e.Transform(this.cloneMatrix())},cloneMatrix:function(a){a=a||this.matrix;return void 0===a.a?{a:a[0],b:a[1],c:a[2],d:a[3],x:a[4],y:a[5]}:{a:a.a,b:a.b,c:a.c,d:a.d,x:a.x,y:a.y}},reset:function(){this.matrix=a();return this},toString:function(){var a=this.matrix;return""+a.a+","+a.b+","+a.c+","+a.d+","+a.x+","+a.y},toArray:function(){var a=this.matrix;return[a.a,a.b,a.c,a.d,a.x,a.y]},apply:function(a,
c){var e=this.matrix;c?a.transform(e.a,e.b,e.c,e.d,e.x,e.y):a.setTransform(e.a,e.b,e.c,e.d,e.x,e.y);return this}};e.Transform.__default=new e.Transform;e.Transform.cloneMatrix=function(a){return{a:a.a,b:a.b,c:a.c,d:a.d,x:a.x,y:a.y}};"undefined"!==typeof module&&module.exports&&(module.exports=e.Transform)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Detect=function(){var e=this;e.addClone=function(c,a){for(var b in e)"object"===typeof e[b]&&e[b][c]&&(e[b][a]=!0)};e.add=function(c,a){var b=e[c]||(e[c]={});if("string"===typeof a)b[a]=!0;else for(;a.length;)b[a.pop()]=!0};e.add("brush",[]);e.add("shape",[]);e.add("media",[]);e.add("utility",["select","crop","zoom"]);e.add("useCacheLayer",["eraser","paintbrush","image"]);e.add("useAreaKit","select svg clipart media image text".split(" "));e.add("useMediaKit",
["clipart","image","symbol"]);e.add("useNonUniform",["ellipse","rectangle","speechbubble"]);e.add("useNoConfigure",["move","select","zoom","vectorfill"]);e.add("useBezierSmooth",["crayon","calligraphy"]);e.add("useCatmullRomSpline",["eraser","paintbrush","pencil"]);e.add("useLocalAlpha","oil pastel stamp crayon chrome fur hair shader sketchy web spirograph spraypaint".split(" "));e.add("useColorCycle","spraypaint calligraphy crayon streamer pen chrome fur hair shader sketchy web spirograph".split(" "));
e.add("useTrackGradient",["paintbrush","eraser"]);e.add("useAutoClear",["arrow","eraser","paintbrush","pencil"]);e.add("useCleanVector",["polygon","polyline","path"]);e.add("useSafeComposite",["spirograph","crayon","stamp","spraypaint"]);e.add("useStampResource",["crayon","stamp","spraypaint"]);e.add("useSrc",["stamp","spraypaint","image","clipart"])};"undefined"!==typeof module&&module.exports?module.exports=new q.module.Detect:q.detect=new q.module.Detect})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.registerToolkit=function(e,c){if("object"===typeof e&&e.length)for(;e.length;)q.registerToolkit(e.shift(),c);else{var a=q.module;a.toolkit=a.toolkit||{};a.toolkit[e]=c}};q.module=q.module||{};q.module.Toolkit=function(e,c){var a=this,b=e.detect,k=e.feature,u=e.lang,m=e.util;a.area={};a.init=function(a){a.rendering=!1;a.device={};a.deviceProxy={};a.deviceLastRecord=null;a.deviceLastRecordId=null;a.gestures=0;a.interval=0;a.timeSent=null;return a};a.clone=function(a,d){c.config.addClone(d,
a);b.addClone(d,a);var l;b.brush[d]&&(l="brush.");b.shape[d]&&(l="shape.");l&&e.registerToolkit(l+a,e.module.toolkit[l+d])};a.setTool=function(b){void 0===b&&(b=c.tool.type);"string"===typeof b&&(b={type:b});var m=b.type,l=b.tid,f=b.onload;b=b.onerror;var h=a.getConfig(m);if(h){var g=a.getToolkit(h.toolkit);g&&(c.tool.reset&&c.tool.reset(),c.tool.disable&&c.tool.disable(),h=c.tool.type,g.type=m,g.typePrevious=h||m,c[l||"tool"]=g,d(m,function(){g.enable();k.cursorCSS&&e.ui.setCursor();e.on.setTool&&
e.on.setTool(m);f&&f()},b))}};var d=function(b,d,c){if(b=a.getConfig(b)){var f=a[b.toolkit];f.changeDevice?f.changeDevice(b,d,c):f.style?(b.src&&(f.style.src=b.src),f.style.type=b.type,f.loadResource({layer:f.style,onerror:c,onload:d})):d&&d()}};a.getMouseId=function(a,b){var d="",f="";a&&(d=e.net.peerIdx||0,f=e.net.socketId||0,d=(isFinite(d)?d:f||0)+":");f=b.identifier;f=Infinity===f?"A":f;return d+("Infinity"===f?"A":f)};a.setDefaultConfigure=function(b){var d=a.getConfig(c.tool.type),e;for(e in b){var f=
b[e],h=d[e];void 0!==h&&("number"===typeof f?void 0!==h.max?(h.min=f,h.max=f):h.value=f:(h.min=f.min,h.max=f.max))}};a.setConfigureValues=function(b,d){for(var c in b)a.setConfigure(d,c,b[c])};a.setConfigure=function(b,d,c){var f=b.type;if(-1===f.indexOf("gl_")&&(f=a.getToolkit(f),!f||!f.attributes||!f.attributes[d])){k.debug&&console.warn("setConfigure:",arguments);return}f=b[d];if(void 0===f){if("string"===typeof b.toolkit){k.debug&&console.warn("setConfigure:",arguments);return}return b[d]=e.attrs.create(d,
c)}if(f.setValue)f.setValue(c);else if(isFinite(f))isFinite(c)?b[d]=c:isFinite(c.value)&&(b[d]=c.value);else if("string"===typeof f)"string"===typeof c&&(b[d]=c);else if(e.style&&f instanceof e.style.Fill){if(c instanceof e.style.Fill||e.style.validate(c))b[d]=new e.style.Fill(c)}else if(e.style&&f instanceof e.style.Stroke){if(c instanceof e.style.Stroke||e.style.validate(c))b[d]=new e.style.Stroke(c)}else if(isFinite(f.min)&&isFinite(f.max))if(Array.isArray(c)){var h=isFinite(c[0])?c[0]:0,g=isFinite(c[1])?
c[1]:0;1===c.length?f.min=f.max=x(f.format,h):2===c.length&&(f.min=x(f.format,h),f.max=x(f.format,g))}else f.min=x(f.format,c.min),f.max=x(f.format,c.max);else isFinite(f.value)?Array.isArray(c)?(c=isFinite(c[0])?c[0]:0,f.value=x(f.format,c)):isFinite(c.value)?f.value=x(f.format,c.value):isFinite(c)&&(f.value=x(f.format,c)):b[d]=e.attrs.update(d,c,f);return f};var x=function(a,b){switch(a){case "int":return Math.round(b);default:return b}},p=function(a,b,d){a=glfx.filters[a];var f=c.render.glfx;if(f&&
f.activeFilter){b=a.paramIndex[b];d=d.value;switch(a.param[b].format.replace(")","").split("(")[0]){case "int":d=Math.round(d)}f.activeFilter.data[b]!==d&&(f.activeFilter.data[b]=d,glfx.animationId||glfx.render());e.histogram&&e.histogram.enabled&&e.histogram.createAnalyze();c.render.glfx.activeItem&&(c.render.glfx.activeItem.dirtyCache=!0,c.render.scene())}},w=function(a,b){var d={};d[a]=b;return d};c.setParam=c.setParams=a.setParam=a.setParams=function(e,v,l){if("string"===typeof e)e={},e.tool=
c.tool.type,e.params=w(e,v),e.selection=l;else if("object"===typeof e)"string"===typeof e.param?e.params=w(e.param,e.value):"object"!==typeof e.params&&(e={params:e});else return console.warn("invalid params");var f=c.scene,h=e.param;v=e.params;var g=e.selection||f&&f.selection.items;l=e.cacheObject||{};e=e.tool||"*";var y="*"===e,z=y||b.useLocalAlpha[e],s=0===e.indexOf("gl_")&&e.substr(3),A=!l.state||"start"===l.state||"change"===l.state,x=!l.state||"end"===l.state||"change"===l.state;if(!y){var u=
a.getConfig(e),q;for(q in v){var D=v[q];u&&a.setConfigure(u,q,D);s&&p(s,q,D)}}if(!s&&!1!==k.vector.edit){var u=[],B=[],s=0;for(q in g){var E=f.children[q];if(E){if(x)var F={id:E.id},C={id:E.id},G=0;for(q in v)D=v[q],g="data"+E.id+q,A&&(l[g]=m.clone(E[q])),a.setConfigure(E,q,D),E.toolkit&&(E.dirtyCheck=!0,E.toolkit.updateObjectSize(E)),x&&l[g]!==E[q]&&(f.setDirtyPixelData(E),F[q]=l[g],C[q]=E[q],G++);x&&G&&(u.push(F),B.push(C),s++)}}u.length&&B.length&&c.history&&(q=h?a.getParamProperName(h):"Object",
c.history.store({cmd:"update",icon:"infinity",name:"Update "+q,data:{from:u,to:B}}));x&&!E&&(!1===y&&(E=a.getDeviceFromType(e))&&E.type&&a.setConfigureValues(v,E),c.tool.type&&d(c.tool.type));k.bruteForce?c.render.clean("toolkit.setParam.realtime"):(1<s&&(z=!0),window.clearTimeout(l.interval),l.interval=setTimeout(function(){(!z||z&&x)&&c.render.clean("toolkit.setParam.end")},75))}};(function(){var b={visible:"visibility"};a.getParamProperName=function(a){return m.string.ucwords(b[a]||a)}})();a.setType=
function(d,p){p=p||c.selection.items;if(!k.vector.edit)return e.exec(d);var l=m.count(p);if(0===l)return c.setTool({type:d.replace(" ","_"),onload:function(){e.ui.refresh(d)}});var f=[],h=[],g=a.getToolkit(d),y=c.scene,z=a.getConfig(d),z=y.copyAttributes(g._attributes,z,{}),s=function(a,b){a.dirtyCheck=!0;g.updateObjectSize(a);--l||(c.history&&c.history.store({cmd:"update",icon:d,name:u.translate("convert-format",u.translate(d)),data:{from:f,to:h}}),c.render.clean("toolkit.setType"),e.ui.refresh(d))},
A;for(A in p){var x=y.children[A];if(x){if(b.shape[x.type]){if(!b.shape[d]){l--;continue}}else if(b.brush[x.type]){if(!b.brush[d]){l--;continue}}else{l--;continue}(g=x.toolkit)?(f.push(y.copyAttributes(g._attributes,x,{id:x.id,type:x.type})),h.push(y.copyAttributes(g._attributes,z,{id:x.id,type:d})),x.type=d,void 0===z.spacing&&delete x.spacing,delete x.diameter,delete z.fill,delete z.stroke,y.copyAttributes(g.attributes,z,x),g.loadResource({layer:x,onerror:s,onload:s})):l--}else l--}};a.getDimensionConstraint=
function(a,b,d){a=a||c.scene.getOneSelected()||{};var f=k[a.type]||k.tools[a.type]||k.tools,e=a.useMinWidth||f.minWidth,g=a.useMinHeight||f.minHeight,y=a.useMaxWidth||f.maxWidth,m=a.useMaxHeight||f.maxHeight;f.constrainToCanvas&&(f=c.contexts.layer0,f=Math.min(f.height,f.width)/c.pixelRatio,m=Math.min(f,m),y=Math.min(f,y));a=a.bbox;var f=a.width,s=a.height,p=!1;if(b)return b.x*a.width<e&&(p=!0,b.x=e/a.width,b.y=b.x),b.y*a.height<g&&(p=!0,b.y=g/a.height,b.x=b.y),b.x*a.width>y&&(p=!0,b.x=y/a.width,
b.y=b.x),b.y*a.height>m&&(p=!0,b.y=m/a.height,b.x=b.y),{constrained:p,x:b.x,y:b.y};s<g&&(s=g);s>m&&(s=m);s!==a.height&&d&&(p=!0,f=s/a.height*a.width);f<e&&(f=e);f>y&&(f=y);f!==a.width&&d&&(p=!0,s=f/a.width*a.height);return{constrained:p,width:f,height:s}};a.setup=function(){var d=c.contexts,p=e.module,l=c.config,f={},h;for(h in l){var g=l[h].toolkit,y=!m.exists("sketch.module.toolkit."+g);p.toolkit[g+"."+h]?b.add(g,h):e.vector.shape[h]?b.add(g,h):-1===h.indexOf(".")&&"media"===g&&a.media&&(0===h.indexOf("gl_")?
window.glfx&&b.add(g,h):b.add(g,h));if(!y&&!f[g]){f[g]=!0;b.add(g,h);y=new p.toolkit[g](e,c);y.type=g;y.draw=d.draw.ctx;y.cache=d.cache.ctx;y.active=d.active.ctx;y.ctx=d.layer0.ctx;y.updateObjectSize=y.updateObjectSize||function(a,b){b&&b(a)};if(b.useAreaKit[g]){var z=k[g]||k.tools[g]||k.tools;y.minWidth=z.minWidth||y.minWidth;y.minHeight=z.minHeight||y.minHeight;y.maxWidth=z.maxWidth||y.maxWidth;y.maxHeight=z.maxHeight||y.maxHeight;y.defaultWidth=z.defaultWidth||y.defaultWidth;y.defaultHeight=z.defaultHeight||
y.defaultHeight}a[g]=y}}};a.loadResource=function(b,d,c){var f=b.toolkit||a.ensureToolkit(b.type);f&&f.loadResource({layer:b,onerror:c,onload:d})};a.getConfig=function(a){var b=c.config[a];if(b)return b;k.debug&&console.warn("missing configure",a)};a.getToolkit=function(d){if(b.shape[d])return a.shape;if(b.brush[d])return a.brush;if(b.media[d])return a.media;if(a[d])return a[d];k.debug&&console.warn("missing toolkit",d)};a.ensureToolkit=function(b){if(b.toolkit)return b.toolkit;var d=a.getToolkit(b.type);
if(d)return b.toolkit=d};a.getDevice=function(a){if(a&&a.device)return a.device.brush?a.device.brush:a.device};a.getDeviceFromType=function(b){b=a.getToolkit(b);return a.getDevice(b)};a.exists=function(b){return(b=c.config[b])&&a[b.toolkit]};a.getCenterPoint=function(){var a=c.bounds;return{x:a.width/2+c.scrollLeft,y:a.height/2+c.scrollTop}};"undefined"===typeof e.vector&&(e.vector={});e.vector.catmullRomSplineData=function(a){var b=m.clone(a.path),d=1-(a.tension||0),f=b.length-2;b.splice(0,0,b[0]);
b.push(b[b.length-1]);b.push(b[b.length-1]);if(0>=f)return a.path;a=[];for(var c=0;c<f;c++){var g=b[c],e=b[c+1],k=b[c+2],s=b[c+3];0===c&&a.push({beginPath:!0,interval:e.interval,cmd:"M",x:e.x,y:e.y});a.push({cmd:"C",x1:e.x+(d*k.x-d*g.x)/6,y1:e.y+(d*k.y-d*g.y)/6,x2:k.x+(d*e.x-d*s.x)/6,y2:k.y+(d*e.y-d*s.y)/6,x:k.x,y:k.y})}return a};e.vector.catmullRomSpline=function(a){var b=m.clone(a.path),d=1-(a.tension||0);a=a.ctx;var f=b.length-2;b.splice(0,0,b[0]);b.push(b[b.length-1]);b.push(b[b.length-1]);if(0>=
f){var c=b[0],g=b[1];a.moveTo(c.x,c.y);a.lineTo(g.x+.1,g.y+.1)}else for(var e=0;e<f;e++){var c=b[e],g=b[e+1],k=b[e+2],s=b[e+3];0===e&&(a.beginPath(),a.moveTo(g.x,g.y));a.bezierCurveTo(g.x+(d*k.x-d*c.x)/6,g.y+(d*k.y-d*c.y)/6,k.x+(d*g.x-d*s.x)/6,k.y+(d*g.y-d*s.y)/6,k.x,k.y)}};a.applyStyle=function(b,d,l,f,h,g){b.save();var m=c.render.highRes||!0,k=a.getBBox(d),s=k.x1,p=k.x2,x=k.y1,u=k.y2;if(k=d.bbox){var w=-k.x,q=-k.y;b.translate(w,q)}else w=d.offset||0,q=(d.diameter||0)/2,b.translate(w/2+q,w/2+q);
g&&d.fill.__colors&&d.diameter&&(m?b.strokeStyle=e.style.getStyle("fill",b,s,x,p,u,d):(g=d.fill.__colors,w=g.length,q=2*d.interval+1,b.strokeStyle=g[Math.abs(q%(2*w)-w)]),b.stroke());h&&d.fill.__colors&&(m?b.fillStyle=e.style.getStyle("fill",b,s,x,p,u,d):(g=d.fill.__colors,w=g.length,q=2*d.interval+1,b.fillStyle=g[Math.abs(q%(2*w)-w)]),b.fill());b.restore();m||"gradient"===d.fill.type&&"cycle"!==d.fill.mode&&a.trackGradient(b,d,l,f,k)};a.getBBox=function(a){var d=((a.diameter||0)+(a.blur||0))/2,e=
a.bbox,f=-d,h=-d;e&&(f=e.x,h=e.y);var g;if(a.lineRecord){e=a.path;if(!e[0]||!e[1])return;a=e[0].x+f;g=e[0].y+h;var m=e[1].x+f,e=e[1].y+h,h=Math.atan2(e-g,m-a),f=d*Math.cos(h),h=d*Math.sin(h);g={x1:a-f,y1:g-h,x2:m+f,y2:e+h}}else e?(f-=d,h-=d,g=!c.render.highRes&&b.useTrackGradient[a.type]?{x1:-e.padding||0,y1:-e.padding||0,x2:e.width,y2:e.height}:{x1:f,y1:h,x2:f+e.width,y2:h+e.height}):a.isRecording&&!g&&(e=a.path,f=e.length,g=1>=f||a.isGhost?{x1:Infinity,y1:Infinity,x2:-Infinity,y2:-Infinity}:a._bbox,
f=e.length,f=e[f-1],f.x<g.x1+2*d&&(g.x1=f.x-2*d),f.y<g.y1+2*d&&(g.y1=f.y-2*d),f.x>g.x2&&(g.x2=f.x),f.y>g.y2&&(g.y2=f.y),a._bbox=g);return g};a.trackGradient=function(d,m,l,f,h){if(b.useTrackGradient[m.type]&&!c.render.highRes){var g=m.diameter||0,y=g/2,k=m.blur||0,s=k/2,p=(g+k)/2;h=h||a.getBBox(m);d.save();d.beginPath();d.shadowBlur=0;d.globalAlpha=1;d.globalCompositeOperation="source-atop";d.translate(l,f);l=h.x1;f=h.x2;var x=h.y1;h=h.y2;m.isRecording?(l+=y,x+=y,f+=y+k,h+=y+k,d.fillStyle=e.style.getStyle("fill",
d,l,x,f,h,m),d.fillRect(l,x,f-l,h-x)):(p=(g+k)/2,g=l+p-(y+s),y=x+p-(y+s),k=f-(p+s),s=h-(p+s),d.fillStyle=e.style.getStyle("fill",d,g,y,k,s,m),d.fillRect(l,x,f,h));d.restore()}};a.drawFromCache=function(a,b){var d=a.active;d.save();a.useBlendMode?a.useReset||(d.globalAlpha=1,d.globalCompositeOperation="copy",d.drawImage(a.ctx.canvas,0,0)):m.Canvas.blip(d.canvas);"up"!==a.state&&(d.globalCompositeOperation=a.isEraser&&a.isRecording?"source-over":e.style.getComposite(a.composite),a.useAutoClear&&(b=
1),d.globalAlpha=b||a.opacity/100,d.drawImage(a.cache.canvas,0,0));d.restore()};a.prepareBrush=function(){var a,d=c.contexts,l=this.type,f=this.isRecording||this.isGhost;this.isEraser="destination-out"===this.composite||"eraser"===l;this.useAutoClear=b.useAutoClear[l]||this.isGhost;this.useBlendMode=!e.style.isSourceOver[this.composite];this.useGlobalAlpha=!b.useLocalAlpha[l];this.useTrackGradient=b.useTrackGradient[l]&&"color"!==this.fill.type;this.useReset=this.isGhost||"down"===this.state;if(f){this.useReset&&
(m.Canvas.clear(d.active),m.Canvas.clear((a=this.active).canvas));if(this.useTrackGradient)this.useReset&&a.drawImage(d.layer0,0,0),this.useCache=!0,a=this.cache;else if(this.useBlendMode){if(b.useSafeComposite[l])return a=this.active,(this.isGhost||"down"===this.state)&&c.render.prepareGCO(this.composite,a.canvas),this.renderTo=a;this.useReset&&a.drawImage(d.layer0,0,0);this.useCache=!0;a=this.cache}else this.useCache=!1,a=this.active;this.useAutoClear&&"up"!==this.state&&m.Canvas.blip(a.canvas)}else this.useCache=
!1,a=this.ctx;return this.renderTo=a};a.getToolCategory=function(a){if(a){a=a.replace("_"," ");var b=e.ui.icons,d;for(d in b){var f=b[d];if(f.children&&(f.children.length&&(f.children=m.array2object(f.children)),f.children[a]))return d}}};a.getToolIcon=function(b){b=a.getToolCategory(b)||b;var d=e.ui.icons,c;for(c in d)if(b===c)return b=d[c],b.src||b};m.eventOverrideCall=function(a,b){if(c.tool&&c.tool[a])return c.tool[a](b),!0;var d=c.tool&&c.tool.device,d=d&&d.brush;if(!(d&&d.event&&d.self&&d[a]))return!1;
d[a](b);return!0};m.eventOverride=function(a,b){if(a&&c.keyboard){var d=b.keyCode,f=c.keyboard.pressed;if(-1===a.indexOf("on")){var e=a;a="on"+a+"Key";b.name=e[0].toLowerCase()+e.substr(1);b.state="keyup"===b.type?"up":f[d]?"press":"down"}if(m.eventOverrideCall(a,b))return f[d]=!0}}}})(sketch);
(function(q){q.registerToolkit("group",function(e,c){var a=this,b=c.toolkit,k=e.util;this.type="group";this._attributes={opened:!1};var u=k.clone(this._attributes);this.attributes=k.mixin(e.attrs.__basicObject,u);this.enable=function(){};this.disable=function(){};this.loadResource=function(a){var b=a.onload;b&&b(a.layer)};this.createObject=function(b,d){var e=b.layer,k=c.scene.addObject({type:a.type,composite:e.composite,opacity:e.opacity,groupId:e.groupId,bbox:b.bbox});if(e.children){var u=function(){var a=
r[v++];a?("group"!==a.type&&(a.groupId=e.groupId,e.x&&(a.x=(a.x||0)+e.x),e.y&&(a.y=(a.y||0)+e.y)),c.addObject(a,u,u)):d&&d(k)},r=e.children,v=0;u()}else d&&d(k)};return b.init(this)})})(sketch);
(function(q){q.registerToolkit("select",function(e,c){var a=this,b=c.toolkit.area,k=c.canvas2d,u=e.feature,m=c.contexts,d=c.render,x=c.scene,p=c.toolkit,w=e.util;a.type="select";a.id="select";a.rect={};a.points={};a.copied={};a.enabled=!1;a.events={};a.usePreventSelection=!1;a.attributes={composite:"string",opacity:"number"};a.enable=function(b){if(!0!==a.enabled){b=b||{};a.usePreventSelection=b.cancelSelection||!1;a.searchParam=b.searchParam;void 0===b.mouse&&(b.mouse=!0);void 0===b.key&&(b.key=
!0);void 0===b.cursor&&(b.cursor=!0);if(b.mouse){var f=a.active.canvas,d=a.events;d.drag=eventjs.add(f,"drag",a.dragEvent,{maxFingers:1});d.context=eventjs.add(f,"contextmenu",a.contextEvent);d.mouseout=eventjs.add(f,"mouseout",function(){e.ui.tooltip&&e.ui.tooltip.update("")});b.cursor&&(d.mousemove=eventjs.add(f,"mousemove",a.cursorEvent))}b.key&&c.keyboard&&(eventjs.add(c.focusElement,"keydown",c.keyboard.keydown),eventjs.add(c.focusElement,"keyup",c.keyboard.keyup));a.enabled=!0;return a}};a.disable=
function(b){if(!1!==a.enabled)return b=b||{},void 0===b.mouse&&(b.mouse=!0),void 0===b.key&&(b.key=!0),void 0===b.cursor&&(b.cursor=!0),b.mouse&&eventjs.removeEvents(a.events),b.key&&c.keyboard&&(eventjs.remove(c.focusElement,"keydown",c.keyboard.keydown),eventjs.remove(c.focusElement,"keyup",c.keyboard.keyup)),e.ui.tooltip&&e.ui.tooltip.update(""),a.enabled=!1,a};a.findInRect=function(a,b,f,g,e,h){g=c.pixelRatio;var l=c.zoom,p=l/g,v=c.container,w=m.active.ctx,q=m.draw.ctx,C=(c.scrollLeft+v.scrollLeft)/
p,p=(c.scrollTop+v.scrollTop)/p,C=C+1*k.x/l,p=p+1*k.y/l,G=Math.min(a.x1,a.x2),L=Math.min(a.y1,a.y2),v=Math.max(a.x1,a.x2),K=Math.max(a.y1,a.y2);a={x:(G-C)/g,y:(L-p)/g};C={x:(v-C)/g,y:(K-p)/g};p={x:C.x,y:a.y};v={x:a.x,y:C.y};G=(C.x-a.x)/g;L=(C.y-a.y)/g;w.fillStyle="rgba(0,0,255,1)";d.prepareGCO(c.tool.device.composite);c.hovered.reset();q.rect(a.x+.5,a.y+.5,G,L);G=0;b=b||x.children;for(var L={},K=c.selection.length,R=b.length;R--;){var N=b[R];if(!1!==N.selectable&&!1!==N.visible){var V=N.trx2D;if(V&&
V.point2d){var P=V.nw,Q=V.ne,O=V.se,T=V.sw;if(P.x>a.x&&P.x<C.x&&P.y>a.y&&P.y<C.y||Q.x>a.x&&Q.x<C.x&&Q.y>a.y&&Q.y<C.y||O.x>a.x&&O.x<C.x&&O.y>a.y&&O.y<C.y||T.x>a.x&&T.x<C.x&&T.y>a.y&&T.y<C.y||r(P,Q,a,C)||r(O,T,a,C)||r(Q,O,a,C)||r(P,T,a,C)||r(P,Q,p,v)||r(O,T,p,v)||r(Q,O,p,v)||r(P,T,p,v))if((u[N.type]||u.tools).usePointInPath&&!h)for(P=N.data,Q=0;Q<P.length;Q++){if(O=V.point2d(P[Q].x,P[Q].y),q.isPointInPath(O.x,O.y)){if(f&&K){if(!c.selection.items[R])continue;G++;L[R]=!1}else G++,L[R]=!0;d.layer(N.ctx,
N);break}}else{if(f&&K){if(!c.selection.items[R])continue;P="rgba(0,0,0,0.20)";Q="rgba(255,255,255,0.20)";G++;L[R]=!1}else P="rgba(255,255,255,0.20)",Q="rgba(0,0,0,0.20)",G++,L[R]=!0,N.dirtyControl=!0;e&&(O=N.bbox,T=O.scale,N=O.width*T.x,O=O.height*T.y,w.save(),w.beginPath(),w.translate(k.x,k.y),w.scale(l*g,l*g),V.apply(w,!0),w.rect(0,0,N,O),w.fillStyle=P,w.lineWidth=1/l,w.strokeStyle=Q,w.stroke(),w.fill(),w.restore())}}}}if(G)return L};var r=function(a,b,f,d){return(d.y-a.y)*(f.x-a.x)>(f.y-a.y)*
(d.x-a.x)!==(d.y-b.y)*(f.x-b.x)>(f.y-b.y)*(d.x-b.x)&&(f.y-a.y)*(b.x-a.x)>(b.y-a.y)*(f.x-a.x)!==(d.y-a.y)*(b.x-a.x)>(b.y-a.y)*(d.x-a.x)},v=function(a,b){var f=b.trx2D;if(!f){var d=x.getPointInObject(b,a),f=d.bbox_x,c=d.bbox_y,g=d.bbox_width,e=d.bbox_height;return d.x>f&&d.y>c&&d.x<f+g&&d.y<c+e}var e=f.nw,d=f.ne,h=f.se,f=d.x-e.x,c=d.y-e.y,g=h.x-d.x,h=h.y-d.y,e=f*(a.x-e.x)+c*(a.y-e.y),d=g*(a.x-d.x)+h*(a.y-d.y);return 0<e&&e<f*f+c*c&&0<d&&d<g*g+h*h},l={selectable:!0};a.findSingleAction=function(b){var f=
b.layers||x.children,g=b.pointerUp||!1,e=b.searchParam||a.searchParam||l,h="select"===c.tool.id,k=u.vector.edit,r=eventjs.metaKey,p=c.pixelRatio;b=x.getPointInCanvas(b);var w=d.cache.padding,q=c.selection.items,F=1<c.selection.length,C=!1,G,L,K=f.length,R=m.draw.ctx;for(R.canvas.width=R.canvas.width;K--;){var N=f[K];if(!1!==N.visible&&(R=N.bbox)){var V="button"===N.type;if(V){if(r&&"anchor"===N.id)continue}else{if(!1===k)continue;var P=!1;e.toolkit&&N.toolkit&&N.toolkit.id!==e.toolkit&&(P=!0);e.type&&
N.type!==e.type&&(P=!0);e.excludeType&&N.type===e.excludeType&&(P=!0);e.selectable&&!1===N.selectable&&(P=!0);if(P&&!0!==e.throwInvalid)continue;if(!C&&!r&&F){if((C=c.hovered.item)&&v(b,C))return P?void 0:C.zIndex;C=!0}}if(v(b,N)){var Q=u[N.type]||u.tools,O=R.scale,T=O.x,O=O.y;if(V)if(!1===g&&"anchor"===N.id&&h)continue;else return K;else{if(g&&q[N.zIndex])return P?void 0:K;if((!F||r)&&(Q.usePointInPath||Q.usePointInImageData)&&N.ctx){var V=N.ctx,S=x.getPointInObject(N,b),N=N.__offset||x.getOffset(N),
X=Math.abs(T),ba=Math.abs(O),W=S.x-S.bbox_x,Y=S.y-S.bbox_y;0>T&&(W=-W+S.bbox_width);0>O&&(Y=-Y+S.bbox_height);W=W*X*p+w;Y=Y*ba*p+w;W+=N.x||0;Y+=N.y||0;W=Math.round(W);Y=Math.round(Y);if(Q.usePointInPath&&V.isPointInPath(W,Y)||Q.usePointInImageData&&8<V.getImageData(W,Y,1,1).data[3])return P?void 0:K}else if(Q.usePointNearest&&!r)return P?void 0:K}Q.usePointInBoundingBox&&!r&&(R=R.width*T*R.height*O,void 0===L||L>=R)&&(G=P?void 0:K,L=R)}}}return G};a.findMultipleActions=function(f,h){if(!1!==u.vector.edit){if(!1===
h.hasMoved())if("up"===h.state)a.__selecting=!1;else return;f||(f=a.tmp.event);h||(h=a.tmp.self);a.tmp.event=f;a.tmp.self=h;var s="down"===h.state,l="up"===h.state,k=c.zoom,r=k/c.pixelRatio,p=a.rect;s||!a.__selecting?(a.__selecting=!l,eventjs.cancel(f),p.x1=p.x2=h.x/r,p.y1=p.y2=h.y/r):(eventjs.prevent(f),l?a.__selecting=!1:(p.x2=h.x/r,p.y2=h.y/r));isFinite(c.selection.idx)&&(b.hide(),d.scene("select.findMultipleActions"));var v=c.container,w=m.active.ctx,q=(c.scrollLeft+v.scrollLeft)/r,F=(c.scrollTop+
v.scrollTop)/r,v=Math.min(p.x1,p.x2)-q,C=Math.min(p.y1,p.y2)-F,q=Math.max(p.x1,p.x2)-q,F=Math.max(p.y1,p.y2)-F,q=q-v,F=F-C;s&&e.ui.tooltip&&e.ui.tooltip.update("");var s=eventjs.metaKey,G=eventjs.shiftKey,s=a.findInRect(p,x.children,s,G,!0,!1);if(l){c.selection.idx=void 0;c.hovered.reset();e.on.hover&&e.on.hover();var l=[],k=[],L;for(L in s)s[L]?l.push(L):k.push(L);l.length&&x.selectByIdx(l,!1);k.length&&x.deselect(k);p.x1===h.x/r&&p.y1===h.y/r&&(s=eventjs.metaKey,G=eventjs.shiftKey,r=a.getCoord(f),
r=a.findSingleAction(r),g(r,s,G));x.handleSelection();d.clean("select.findMultipleActions")}else c.selection.idx=void 0,e.on.hover&&e.on.hover(),w.save(),w.globalCompositeOperation="destination-over",eventjs.metaKey&&c.selection.length?(w.fillStyle="rgba(255,50,100,0.20)",w.strokeStyle="rgba(255,50,100,1)"):(w.fillStyle="rgba(0,240,100,0.20)",w.strokeStyle="rgba(0,240,100,1)"),w.beginPath(),w.scale(k,k),w.rect(v+.5,C+.5,q,F),w.lineWidth=1/k,w.stroke(),w.fill(),w.restore()}};a.tmp={};a.cursorEvent=
function(f){if(!a.__moving&&!a.__selecting&&"eyeDropper"!==e.ui.colorPicker.state){var d=a.getCoord(f),g=0;a.usePreventSelection?f=w.clone(x.controls):(f=x.children.concat(x.controls),g=x.children.length);f=a.findSingleAction({x:d.x,y:d.y,layers:f});var h=x.children[f],l=0>f-g,g=Math.max(0,f-g),g=x.controls[g]||{};c.tool.coord=d;var m=d="",k=u.vector.edit,r=c.selection,p=1===r.length,v=c.hovered,r=p?r.idx:v.idx,q=void 0!==f||isFinite(r);q||p?l?(d=g.title,m=g.cursor,b.hoverControl="",r=h.zIndex,q=
!!v.items[r],k&&(q||(v.reset(),v.select(r),e.on.hover&&e.on.hover(h)),b.renderControls(f,!1,!0))):(d=g.title||g.id,m=g.cursor||"",b.hoverControl=g.id,q=!!v.items[r],k&&(!q&&isFinite(r)&&(v.reset(),v.select(r),e.on.hover&&e.on.hover(x.children[r])),b.renderControls(null,!1,!0))):(b.hoverControl="",k&&v.length&&(v.reset(),e.on.hover&&e.on.hover(),b.renderControls(null,!1,!0)));e.ui.tooltip&&(d?e.ui.tooltip.update(d,m):e.ui.tooltip.update("",m));e.ui.setCursor(m)}};a.contextEvent=function(b){if(window.contextmenu){eventjs.cancel(b);
var f,d=c.selection.length;e.ui.menuSelectMultiple&&1<d?f="menuSelectMultiple":e.ui.menuSelect&&d?f="menuSelect":e.ui.menuSelectDefault&&(f="menuSelectDefault");f&&(a.events.drag&&a.events.drag.cancel(),a.events.gesture&&a.events.gesture.cancel(),b=eventjs.getCoord(b),contextmenu.show(e.ui[f],b.x+5,b.y+5,!0))}};a.__selecting=!1;a.__modified=!1;a.__moving=!1;a.dragEvent=function(l,m,s){eventjs.prevent(l);if(2!==m.fingers&&"eyeDropper"!==e.ui.colorPicker.state){var k=c.selection.length,r="down"===m.state,
v="up"===m.state,q=eventjs.metaKey,D=eventjs.shiftKey;r?c.__interacting=!0:v&&(c.__interacting=!1);if(r||v){r&&(a.__modified=!1);if(a.usePreventSelection)var B=w.clone(x.controls),E=0;else B=x.children.concat(x.controls),E=x.children.length;var F=a.getCoord(l),B=a.findSingleAction({x:F.x,y:F.y,layers:B,pointerUp:v})}var C=void 0!==B,G=m.hasMoved();if(x.controls[B-E]){var L=x.controls[B-E];b.hoverControl=L.id;if("anchor"===L.id&&c.selection.length)if(v){a.__moving=!1;B=a.findSingleAction(F);F=x.children[B];
if(c.selection.idx===B){if(a.__modified)return;!1===c.__editing&&"text"===F.type?(b.show(F),p.text.updateBBox(),p.text.updateCSS(),p.text.focus(),p.text.selectAll()):(x.deselectAll(),e.ui.configureBuild(),d.clean("select.moveEvent"));return}if(!D&&!q&&F){x.selectByIdx(B);x.handleSelection();d.clean("select.moveEvent");return}}else a.__moving=!0;else{if(v)return;if(L.event){B=c.hovered.idx;(!1===isFinite(B)||B!==c.selection.idx)&&(F=c.hovered.item)&&c.selection.select(F.zIndex);a.__moving=!1;L.event(l);
m.pause();return}}}else if(b.hoverControl="",v&&(F=x.children[B])&&(u[F.type]||u.tools).usePointInPath){a.__moving=!1;d.scene("select.dragEvent.usePointInPath.pointUp");return}if(s)c.hovered.select(B);else if(!v||!a.__moving||G||a.__modified||D||q){s=p.text&&p.text.dragging;!r||C||!k||D||q||s||(x.deselectAll(),d.clean("select.dragEvent.cancelSelection.b"));if(r&&c.selection.items[B]&&!q||a.__moving)return h(l,m);if(!C||D||q){if("select"===c.tool.id&&r)return m.proxy(function(b,d){a.findMultipleActions(b,
d);f(b,d)});if(c.tool.record)return x.deselectAll(),m.proxy(function(a,b){c.tool.record(a,b);f(a,b)})}if(0>B-E)if((D||q)&&u.vector.edit)g(B,q,D),x.handleSelection(),d.clean("select.moveActions");else return x.selectByIdx(B),x.handleSelection(),a.__modified=!0,h(l,m)}else eventjs.cancel(l),a.__moving=!1,x.selectByIdx(B),x.handleSelection()}};var f=function(b,f){(a.__moving="up"!==f.state)||a.dragEvent(b,f,!0)},h=function(a,b){p.moveEvent(a);b.proxy(function(a,b){f(a,b)})},g=function(a,b,f){void 0!==
a&&(b&&c.selection.items[a]?x.deselect(a):x.selectByIdx(a,!1))};a.gestureEvent=function(b,f){"start"===f.state?a.events.drag.pause():"end"===f.state&&a.events.drag.resume();var g=f.scale,e=f.rotation,h=c.selection.item;h&&(!1!==h.scalable&&(h.bbox.scale.x=g,h.bbox.scale.y=g),!1!==h.rotatable&&(h.bbox.rotate=e),h.dirtyCheck=!0,d.scene("gesture"))};a.getCoord=function(b){var f=eventjs.getClientXY(b),d=eventjs.getBoundingBox(a.active.canvas);f.x-=d.x1;f.y-=d.y1;f.state=b.type;return f};return p.init(this)})})(sketch);
(function(q){q.registerToolkit("zoom",function(e,c){var a=this,b=e.dom,k=c.orient,u=c.toolkit;this.type="zoom";this.enable=function(){c.render.setGCO();var e=b.$("#sk-orientation");e&&e.classList.add("sk-opened");c.orient.enable();a.onGesture=eventjs.add({fingers:2,target:window,type:"gesture",listener:this.gesture});u.select.enable({key:!0,mouse:!1,cursor:!1})};this.disable=function(){var e=b.$("#sk-orientation");e&&e.classList.remove("sk-opened");c.orient.disable();a.onGesture&&a.onGesture.remove();
u.select.disable()};this.gesture=function(a,b){var e=c.orient.events;"start"===b.state?(e.drag&&e.drag.enabled&&e.drag.remove(),b.startScale=c.zoom,b.__x=b.x,b.__y=b.y):"end"===b.state&&e.drag&&e.drag.add();var e=eventjs.getBoundingBox(k.canvas),p=c.pixelRatio,w=c.zoom;k.mouse.x=b.x*p-e.x1;k.mouse.y=b.y*p-e.y1;k.offset.x+=(b.x-b.__x)/w;k.offset.y+=(b.y-b.__y)/w;c.orient.setZoom(b.startScale*b.scale);b.__x=b.x;b.__y=b.y};return u.init(this)})})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.vector=q.vector||{},c=e.shape=e.shape||{},a=Math.PI,b=2*a;c.VOBNode=function(a,b){switch(b.type){case "image":a.drawImage(b.image,b.x,b.y,b.width,b.height);break;case "line":a.moveTo(b.x1,b.y1);a.lineTo(b.x2,b.y2);break;case "polyline":case "polygon":case "path":m(a,b.data);break;case "ellipse":k(a,b.cx,b.cy,b.rx,b.ry);break;case "circle":k(a,b.cx,b.cy,b.r,b.r);break;case "rect":isFinite(b.rx)?p(a,b.x,b.y,b.width,b.height,b.rx,b.ry):d(a,b.x,b.y,b.width,b.height)}};c.record=function(){var a;
this.data=[];this.save=function(){};this.restore=function(){};this.translate=function(){};this.rotate=function(){};this.scale=function(){};this.beginPath=function(){this.data=[]};this.moveTo=function(b,d){this.data.push(a={cmd:"M",x:b,y:d})};this.lineTo=function(a,b){this.data.push({cmd:"L",x:a,y:b})};this.bezierCurveTo=function(a,b,f,d,c,e){this.data.push({cmd:"C",x1:a,y1:b,x2:f,y2:d,x:c,y:e})};this.quadraticCurveTo=function(a,b,f,d){this.data.push({cmd:"Q",x1:a,y1:b,x:f,y:d})};this.arcTo=function(a,
b,f,d,c){this.data.push({cmd:"A",x1:a,y1:b,x2:f,y2:d,radius:c})};this.closePath=function(){this.data.push({cmd:"Z",x:a.x,y:a.y})};this.stringify=function(){return u.fromVOBPath(this.data)}};c.line=function(a,b,d,c,e){a.moveTo(b,d);a.lineTo(c,e)};c.circle=function(a,b,d,c,e){return k(a,b,d,c,c,e)};var k=c.ellipse=function(a,b,d,c,e,s){var l=.5522847498307936*c,m=.5522847498307936*e,k=b-c,r=d-e;c=b+c;e=d+e;a.moveTo(b,r);s?(a.bezierCurveTo(b-l,r,k,d-m,k,d),a.bezierCurveTo(k,d+m,b-l,e,b,e),a.bezierCurveTo(b+
l,e,c,d+m,c,d),a.bezierCurveTo(c,d-m,b+l,r,b,r)):(a.bezierCurveTo(b+l,r,c,d-m,c,d),a.bezierCurveTo(c,d+m,b+l,e,b,e),a.bezierCurveTo(b-l,e,k,d+m,k,d),a.bezierCurveTo(k,d-m,b-l,r,b,r));a.closePath()},u=c.SVGPath=function(a,b){return m(a,e.SVG.toVOBPath(b))},m=c.VOBPath=function(a,b){for(var d=b&&b.length,c=0,e;c<d;c++)if(e=b[c])switch(e.cmd){case "M":a.moveTo(e.x,e.y);break;case "L":a.lineTo(e.x,e.y);break;case "Q":a.quadraticCurveTo(e.x1,e.y1,e.x,e.y);break;case "C":a.bezierCurveTo(e.x1,e.y1,e.x2,
e.y2,e.x,e.y);break;case "A":a.arcTo(e.x1,e.y1,e.x2,e.y2,e.radius);break;case "Z":case "z":a.closePath()}};c.VOBPathDebug=function(a,b){for(var d="",c=b.length,e=0,s;e<c;e++)if(s=b[i])switch(s.cmd){case "M":d+="ctx.moveTo("+s.x+","+s.y+");\n";break;case "L":d+="ctx.lineTo("+s.x+","+s.y+");\n";break;case "Q":d+="ctx.quadraticCurveTo("+s.x1+","+s.y1+","+s.x+","+s.y+");\n";break;case "C":d+="ctx.bezierCurveTo("+s.x1+","+s.y1+","+s.x2+","+s.y2+","+s.x+","+s.y+");\n";break;case "A":d+="ctx.arcTo("+s.x1+
","+s.y1+","+s.x2+","+s.y2+","+s.radius+");\n";break;case "Z":case "z":d+="ctx.closePath();\n"}console.log(d);return d};c.square=function(a,b,d,c,e){x(a,b-c,d-c,b+c,d+c,e)};var d=c.rect=function(a,b,d,c,e,s){x(a,b,d,b+c,d+e,s)},x=c.rectangle=function(a,b,d,c,e,s){a.moveTo(b,d);s?(a.lineTo(b,e),a.lineTo(c,e),a.lineTo(c,d)):(a.lineTo(c,d),a.lineTo(c,e),a.lineTo(b,e));a.closePath()};c.roundRectangle=function(a,b,d,c,e,s,l,m){p(a,b,d,c-b,e-d,s,l,m)};var p=c.roundRect=function(b,d,c,e,l,s,m,k){0>e&&(d-=
e=Math.abs(e));0>l&&(c-=l=Math.abs(l));var r,p,v,x,w,u;"number"===typeof s?(isFinite(m)||(m=s),r=e/2,p=l/2,s>r&&(s=r),m>p&&(m=p),r=p=v=x=s,m=w=u=s=m):(Array.isArray(s)?4===s.length&&(s=[s[0],s[0],s[1],s[1],s[2],s[2],s[3],s[3]]):s=[10,10,10,10,10,10,10,10],r=s[0],p=s[2],v=s[4],x=s[6],m=s[1],w=s[3],u=s[5],s=s[7]);var q=a/4,G=q/2,L=Math.cos(G),K=-a/2,R=K+1*q,N=K+2*q,V=K+3*q,P=K+4*q,Q=K+5*q,O=K+6*q,T=K+7*q;b.moveTo(d+r,c);k?(q*=-1,G*=-1,b.quadraticCurveTo(d+r+Math.cos(K+G)*r/L,c+m+Math.sin(K+G)*m/L,d+
r+Math.cos(K+q)*r,c+m+Math.sin(K+q)*m),b.quadraticCurveTo(d+r+Math.cos(T+G)*r/L,c+m+Math.sin(T+G)*m/L,d+r+Math.cos(T+q)*r,c+m+Math.sin(T+q)*m),b.lineTo(d,c+l-m),b.quadraticCurveTo(d+x+Math.cos(O+G)*x/L,c+l-s+Math.sin(O+G)*s/L,d+x+Math.cos(O+q)*x,c+l-s+Math.sin(O+q)*s),b.quadraticCurveTo(d+x+Math.cos(Q+G)*x/L,c+l-s+Math.sin(Q+G)*s/L,d+x+Math.cos(Q+q)*x,c+l-s+Math.sin(Q+q)*s),b.lineTo(d+e-x,c+l),b.quadraticCurveTo(d+e-v+Math.cos(P+G)*v/L,c+l-u+Math.sin(P+G)*u/L,d+e-v+Math.cos(P+q)*v,c+l-u+Math.sin(P+
q)*u),b.quadraticCurveTo(d+e-v+Math.cos(V+G)*v/L,c+l-u+Math.sin(V+G)*u/L,d+e-v+Math.cos(V+q)*v,c+l-u+Math.sin(V+q)*u),b.lineTo(d+e,c+u),b.quadraticCurveTo(d+e-p+Math.cos(N+G)*p/L,c+w+Math.sin(N+G)*w/L,d+e-p+Math.cos(N+q)*p,c+w+Math.sin(N+q)*w),b.quadraticCurveTo(d+e-p+Math.cos(R+G)*p/L,c+w+Math.sin(R+G)*w/L,d+e-p+Math.cos(R+q)*p,c+w+Math.sin(R+q)*w),b.lineTo(d+p,c)):(b.lineTo(d+e-p,c),b.quadraticCurveTo(d+e-p+Math.cos(K+G)*p/L,c+w+Math.sin(K+G)*w/L,d+e-p+Math.cos(K+q)*p,c+w+Math.sin(K+q)*w),b.quadraticCurveTo(d+
e-p+Math.cos(R+G)*p/L,c+w+Math.sin(R+G)*w/L,d+e-p+Math.cos(R+q)*p,c+w+Math.sin(R+q)*w),b.lineTo(d+e,c+l-u),b.quadraticCurveTo(d+e-v+Math.cos(N+G)*v/L,c+l-u+Math.sin(N+G)*u/L,d+e-v+Math.cos(N+q)*v,c+l-u+Math.sin(N+q)*u),b.quadraticCurveTo(d+e-v+Math.cos(V+G)*v/L,c+l-u+Math.sin(V+G)*u/L,d+e-v+Math.cos(V+q)*v,c+l-u+Math.sin(V+q)*u),b.lineTo(d+x,c+l),b.quadraticCurveTo(d+x+Math.cos(P+G)*x/L,c+l-s+Math.sin(P+G)*s/L,d+x+Math.cos(P+q)*x,c+l-s+Math.sin(P+q)*s),b.quadraticCurveTo(d+x+Math.cos(Q+G)*x/L,c+l-
s+Math.sin(Q+G)*s/L,d+x+Math.cos(Q+q)*x,c+l-s+Math.sin(Q+q)*s),b.lineTo(d,c+m),b.quadraticCurveTo(d+r+Math.cos(O+G)*r/L,c+m+Math.sin(O+G)*m/L,d+r+Math.cos(O+q)*r,c+m+Math.sin(O+q)*m),b.quadraticCurveTo(d+r+Math.cos(T+G)*r/L,c+m+Math.sin(T+G)*m/L,d+r+Math.cos(T+q)*r,c+m+Math.sin(T+q)*m));b.closePath()};c.roundRect2=function(a,b,d,c,e,s,l){c<2*s&&(s=c/2);e<2*s&&(s=e/2);l?(a.moveTo(b+c-s,d),a.arcTo(b,d,b,d+s,s),a.arcTo(b,d+e,b+s,d+e,s),a.arcTo(b+c,d+e,b+c,d+e-s,s),a.arcTo(b+c,d,b+c-s,d,s)):(a.moveTo(b+
s,d),a.arcTo(b+c,d,b+c,d+e,s),a.arcTo(b+c,d+e,b,d+e,s),a.arcTo(b,d+e,b,d,s),a.arcTo(b,d,b+c,d,s));a.closePath()};c.ring=function(b,d,c,e,l,s,m,k){var p=-a/2;s+=p;m+=p;b.arc?(b.arc(d,c,l,s,m,k),p=m,w(s,p)&&(l=d+e*Math.cos(p),p=c+e*Math.sin(p),b.moveTo(l,p)),b.arc(d,c,e,m,s,!k)):(r(b,l,l,l,s,m,k),p=m,w(s,p)&&(d+=e*Math.cos(p),c+=e*Math.sin(p),b.moveTo(d,c)),r(b,l,l,e,m,s,!k));b.closePath()};c.pie=function(b,d,c,e,l,s,m){var k=-a/2;l+=k;s+=k;!1===w(l,s)&&b.moveTo(d,c);b.arc?b.arc(d,c,e,l,s,m):r(b,d,
c,e,l,s,m);b.closePath()};var w=function(a,d){var c=Math.abs((a+b)%b),e=Math.abs((d+b)%b);return c===e},r=function(b,d,c,e,l,s,k){if(k)var r=Math.max(l,s),p=Math.min(l,s)-1E-10;else r=Math.min(l,s)-1E-10,p=Math.max(l,s);var v=(r-p)/a/2;1<Math.abs(v)&&(d-=2*e);l=d+e*Math.cos(r);r=c+e*Math.sin(r);s=d+e*Math.cos(p);p=c+e*Math.sin(p);v=.5<=Math.abs(v)?1:0;k=k?0:1;b.moveTo(d,c);b.lineTo(l,r);m(b,u.arcToBezier(l,r,e,e,0,v,k,s,p));b.closePath()};c.triangle=function(a,b,d,c,e){v(a,b,d,c,3,e)};var v=c.regularPolygon=
function(a,d,c,e,l,s){for(var m=b/l,k=0;k<l;k++){var r=m*(s?l-k:k)+0,p=Math.sin(r)*e+d,r=-Math.cos(r)*e+c;0===k?a.moveTo(p,r):a.lineTo(p,r)}a.closePath()};c.gear=function(d,c,e,l,m,s,k){1>s&&(l*=s);var r=b/m,p=r/4*(k?-1:1);s=l/s;var v=(r-a)/2+r/8;k&&(v+=p);for(var x=0;x<m;x++){var w=r*(k?m-x:x)+v,u=w-3*p,q=w-2*p,C=w-1*p,G=Math.cos(u)*s+c,u=Math.sin(u)*s+e;0===x?d.moveTo(G,u):d.lineTo(G,u);d.lineTo(Math.cos(q)*s+c,Math.sin(q)*s+e);d.lineTo(Math.cos(C)*l+c,Math.sin(C)*l+e);d.lineTo(Math.cos(w)*l+c,
Math.sin(w)*l+e)}d.closePath()};c.star=function(d,c,e,l,m,s,k){1>s&&(l*=s);var r=b/m,p=r/2*(k?-1:1);s=l/s;for(var v=(r-a)/2,x=0;x<m;x++){var w=r*(k?m-x:x)+v,u=Math.cos(w-p)*s+c,q=Math.sin(w-p)*s+e;0===x?d.moveTo(u,q):d.lineTo(u,q);d.lineTo(Math.cos(w)*l+c,Math.sin(w)*l+e)}d.closePath()};c.burst=function(d,c,e,l,m,s,k){var r=k?-1:1,p=b/m,v=p/2*r,x=p/4*r,w=3*x,u=Math.cos(p/4);1>s&&(l*=s);var q=l/s,u=q/u,C=(p-a)/2;1<s&&(C+=a);s=-p*r+C;d.moveTo(Math.cos(s)*l+c,Math.sin(s)*l+e);for(r=0;r<m;r++)s=p*(k?
m-r:r)+C,d.quadraticCurveTo(Math.cos(s-w)*u+c,Math.sin(s-w)*u+e,Math.cos(s-v)*q+c,Math.sin(s-v)*q+e),d.quadraticCurveTo(Math.cos(s-x)*u+c,Math.sin(s-x)*u+e,Math.cos(s)*l+c,Math.sin(s)*l+e);d.closePath()};c.radialBurst=function(d,c,e,l,m,s,k,r){var p=b/s,v=4*k,x=p/4*v,v=p/8*v;k=-a/2+p*k/2;for(var w=0;w<s;w++){var u=p*w+k,q=u-x,C=u-v,G=Math.cos(C)*l+c,C=Math.sin(C)*l+e,L=Math.cos(q)*m+c,q=Math.sin(q)*m+e,K=Math.cos(u)*m+c,u=Math.sin(u)*m+e;d.moveTo(G,C);r?(d.lineTo(G,C),d.lineTo(K,u),d.lineTo(L,q)):
(d.lineTo(L,q),d.lineTo(K,u),d.lineTo(G,C))}d.closePath()};var l=c.spiral=function(d,c,e,l,m,s,k,r){var p=-a/2;s=s/m*b;for(var v=0;v<=m;v++){var x=k?m-v:v,u=Math.pow(l,x/m),w=x*s+p,x=Math.cos(w)*u+c,u=Math.sin(w)*u+e;0!==v||r?d.lineTo(x,u):d.moveTo(x,u)}};c.spirals=function(a,d,c,e,m,s,k,r){for(var p=m;p--;){a.save();a.translate(d,c);a.rotate(p*b/m);a.translate(-d,-c);var v=100*s;l(a,d,c,e*k,v,s,!!r);l(a,d,c,e,v,s,!r,!0);a.closePath();a.restore()}};c.supershape=function(a,d,c,e,l,s,m,k,r,p){s=s||
.001;m=m||-.001;k=k||.001;r=r||.001;for(var v=0;v<=l;v++){var x=(p?l-v:v)*b/l,u=Math.pow(Math.abs(Math.cos(s*x/4)/1),k),w=Math.pow(Math.abs(Math.sin(s*x/4)/1),r),w=Math.pow(u+w,1/m);0===w?x=u=0:(u=1/w*Math.cos(x)*e,x=1/w*Math.sin(x)*e);0===v?a.moveTo(u+d,x+c):a.lineTo(u+d,x+c)}a.closePath()};c.clearPath=function(a,b,d,e,l,s,m,k,r){var p=a.globalCompositeOperation;a.beginPath();a.globalCompositeOperation="destination-out";c[b](a,b,d,e,l,s,m,k,r);a.fill();a.globalCompositeOperation=p;a.beginPath()};
c.clipPath=function(a,b,d,e,l,s,m,k,r){a.beginPath();c[b](a,b,d,e,l,s,m,k,r);a.clip()};"undefined"!==typeof module&&module.exports&&(module.exports=c)})(sketch);
(function(q){var e=q.util;q.registerToolkit("shape",function(a,c){var u=this,m=c.canvas2d,d=a.detect,x=a.feature,p=a.module,w=c.render,r=c.scene,v=a.style,l=c.toolkit;u.id="shape";u.units=x.tools.shape.units||x.tools.units;u.deviceProxy={};u.batches={};u.time=0;u._attributes={angle:"number",anticlockwise:"number",coils:"number",cutout:"number",imperfection:"number",m:"number",n1:"number",n2:"number",n3:"number",points:"number",roundness:"number",sides:"number",slope:"number",spread:"number"};var f=
e.clone(u._attributes);u.attributes=e.mixin(a.attrs.__styledObject,f);u.enabled=!1;u.events={};u.enable=function(){!0!==u.enabled&&(u.enabled=!0,u.events.drag=eventjs.add(u.active.canvas,"drag",new u.record),c.tool!==l.select&&l.select.enable({mouse:!1}))};u.disable=function(){!1!==u.enabled&&(u.enabled=!1,eventjs.removeEvents(u.events),c.tool!==l.select&&l.select.disable({mouse:!1}))};u.loadResource=function(a){var b=a.layer,d=a.onerror,f=a.onload;a=b.type;c.config[a]?v.load(b,function(){b.dirtyCheck=
!0;b.render=g;b.seed=b.seed||e.Random.seed();f&&f(b)}):d&&d(b,a+" unavailable")};u.changeDevice=function(a,b,d){u.device=r.copyProperties(u,a,{});u.loadResource({layer:u.device,onerror:d,onload:b})};u.getDevice=function(a,b,d){var f=a;"string"===typeof f&&(f=e.clone(c.config[a]));u.loadResource({layer:f,onerror:d,onload:b});return f};u.createObject=function(a,b){var d=a.layer,c=a.device,d={type:c.type,composite:c.composite,opacity:c.opacity,bbox:d.bbox};if(a.points){var f=d.bbox,e=f.scale,g=e.x,e=
e.y,h=f.width,l=f.height,m=h/l;f.width/=m;f.scale.x=m*g;"objectBoundingBox"===f.units&&(f.x-=h/2*g,f.y-=l/2*e)}r.copyProperties(u,c,d);d=r.addObject(d);b&&b(d)};u.record=function(f){return function(s,p,y){var v=p.state,q="down"===v||"start"===v,D="up"===v||"end"===v,B=!s,E=!!s;q?c.__interacting=!0:D&&(c.__interacting=!1);var F=f||l.getMouseId(s,p);if(u.deviceProxy[F]||B){if(B=u.deviceProxy[F],!B)return}else B=u.deviceProxy[F]={},r.copyProperties(u,u.device,B),u.loadResource({layer:B});u.deviceLastRecordId=
F;u.deviceLastRecord=B;q?(B.tmp={},B.tmp.start={x:p.x,y:p.y},B.seed=e.Random.seed(),B.layer={type:B.type,render:g},r.copyProperties(u,B,B.layer)):E&&eventjs.cancel(s);s=p.start||B.tmp.start;var C=B.shiftKey=isFinite(p.shiftKey)?p.shiftKey:eventjs.shiftKey,G=B.metaKey=isFinite(p.metaKey)?p.metaKey:eventjs.metaKey;if(E&&a.net.dataChannel&&x.stream.sketchLive){var L=a.net.dataChannel,v=v+","+p.x+","+p.y+","+F;q?(q=r.compress(r.copyProperties(u,B,{})),L.send(["shape",B.type,v,G,C,q])):L.send(["shape",
B.type,v,G,C])}q=u.batches[F];q||(q=u.batches[F]=[],q.time=u.time);var v=c.zoom,L=c.pixelRatio,K=(v-1)/v,R=c.scrollLeft*K,N=c.scrollTop*K,K=s.x/v+R,V=s.y/v+N,P=!!d.useNonUniform[B.type],Q="objectBoundingBox"===u.units||!1===P,O=p.x/v+R-K,T=p.y/v+N-V,N=Math.abs(O),S=Math.abs(T),R=P?Math.max(N,S):Math.sqrt(O*O+T*T),G=!!G,C=!!C;!1===P?(G=!C,C=!0):G&&(C=!0);G=G?-Math.atan2(O,T)*e.RAD_DEG:0;P=0>O?-1:1;O=0>T?-1:1;!1===C&&(N>S?O*=S/N||0:P*=N/S||0);Q&&(P=Math.abs(P),O=Math.abs(O),K-=R*P,V-=R*O,R*=2);C=B.layer;
C.isRecording=!0;C.usePixelData&&(C.dirtyCache=!0);C.dirtyTransform=!0;C.useHighRes=!0;C.bbox={x:K-m.x/v/L,y:V-m.y/v/L,width:R,height:R,viewBox:[0,0,R,R],rotate:G,units:u.units,scale:{x:P,y:O}};q[0]=C;if(D&&(delete u.batches[F],delete u.deviceProxy[F],E||a.peer.isStableStream())){if(!1===(s.x!==p.x||s.y!==p.y))return;delete u.dirtyCheck;delete C.isRecording;delete C.useHighRes;return u.createObject({device:B,layer:C},function(a){r.deselectAll();e.count(u.deviceProxy);w.scene("root.shape.record");
c.history&&c.history.store({cmd:"add",icon:a.type,name:a.type,data:r.clone([a])});y&&y()})}u.dirtyCheck=!0;u.rendering||requestAnimationFrame(h)}};var h=function(){if(u.dirtyCheck){a.perf();var d=u.deviceLastRecord;d.ctx=u.ctx;d.active=u.active;d.cache=u.cache;w.prepareGCO(d.composite);var c=!1,f;for(f in u.batches)for(var d=u.batches[f],e=0;e<d.length;e++)c=d[0],r.updateTransform(c,!0),w.layer(u.active,c),c=!0;delete u.dirtyCheck;void 0!==f&&c&&requestAnimationFrame(h);delete u.rendering}else requestAnimationFrame(h),
u.rendering=!0},g=function(a,b,d){b=this.bbox;var c=b.width,f=b.height,e=b.scale;b=e.x;var e=e.y,g=c/2*(0>b?-1:1),h=f/2*(0>e?-1:1),l=Math.max(c,f)/2,m=p.toolkit["shape."+this.type];d&&(g+=0>b?c:0,h+=0>e?f:0);a.save();a.beginPath();a.scale(b,e);m(a,g,h,l,this);a.restore();a.globalCompositeOperation=v.getComposite(this.composite,!this.isRecording);(c=this.fill)&&c.enabled&&c.opacity&&y(a,"fill",b,e,d,this);(c=this.stroke)&&c.enabled&&c.lineWidth&&c.opacity&&(a.lineWidth=c.lineWidth,a.lineJoin=c.lineJoin,
a.lineCap=c.lineCap,a.miterLimit=c.miterLimit,y(a,"stroke",b,e,d,this))},y=function(a,b,d,c,f,e){d=e[b];var g=d.type,h=b+"Style";if("erase"===e.composite)a[h]="#000",a[b]();else if("color"===g)a[h]=d.color,a[b]();else if("cycle"===d.mode)f=d.__colors||[],e=(2*e.time++ +1)%f.length,a[h]=f[e],a[b]();else{var l=e.bbox;c=l.scale;d=c.x;c=c.y;var m=l.width,l=l.height,k=m,r=l,p=0,y=0;"gradient"!==g||f||(0>d&&(k-=m,p-=m),0>c&&(r-=l,y-=l));"pattern"===g&&"fill"===b?(a.save(),a.scale(d,c),a[h]=v.getStyle(b,
a,k,r,p,y,e),a[b](),a.restore()):(a[h]=v.getStyle(b,a,k*d,r*c,p*d,y*c,e),a[b]())}};return l.init(this)});var c=function(a,c,e){e.cutout?(a.apply(a,c.concat(!1)),c[3]*=e.cutout,a.apply(a,c.concat(!0))):a.apply(a,c)},a=q.vector.shape;q.registerToolkit("shape.ring",function(b,c,u,m,d){var x=e.DEG_RAD,p=d.angle;a.ring(b,c,u,m*(d.cutout||0),m,p.min*x,p.max*x,d.anticlockwise)});q.registerToolkit("shape.pie",function(b,c,u,m,d){var x=e.DEG_RAD,p=d.angle;a.pie(b,c,u,m,p.min*x,p.max*x,d.anticlockwise)});q.registerToolkit(["shape.circle",
"shape.ellipse"],function(b,c,e,m,d){var x=d.imperfection;x?(x/=2,a.imperfectCircle(b,c,e,m-x,m+x,42,d.seed)):a.ellipse(b,c,e,m,m)});q.registerToolkit(["shape.rectangle","shape.square"],function(b,c,e,m,d){var x=d.roundness,p=d.imperfection;if(x){var p=x*Math.max(m,m),x=x*Math.max(m,m),w=d.bbox.scale;d=Math.abs(w.x);w=Math.abs(w.y);d>w?x*=d/w:p*=w/d;a.roundRect(b,c-m,e-m,2*m,2*m,p,x)}else p?a.imperfectRect(b,c-m,e-m,2*m,2*m,p,d.seed):a.rect(b,c-m,e-m,2*m,2*m)});q.registerToolkit("shape.triangle",
function(b,e,u,m,d){c(a.regularPolygon,[b,e,u,m,3],d)});q.registerToolkit("shape.regularPolygon",function(b,e,u,m,d){c(a.regularPolygon,[b,e,u,m,Math.round(d.sides)],d)});q.registerToolkit("shape.gear",function(b,e,u,m,d){c(a.gear,[b,e,u,m,Math.round(d.sides),d.slope],d)});q.registerToolkit("shape.star",function(b,e,u,m,d){c(a.star,[b,e,u,m,Math.round(d.sides),d.slope],d)});q.registerToolkit("shape.burst",function(b,e,u,m,d){c(a.burst,[b,e,u,m,Math.round(d.sides),d.slope],d)});q.registerToolkit("shape.radialBurst",
function(b,c,e,m,d){a.radialBurst(b,c,e,0,m,Math.round(d.sides),d.spread)});q.registerToolkit("shape.spiral",function(b,c,e,m,d){a.spirals(b,c,e,m,Math.round(d.sides),d.coils,1-d.spread/100)});q.registerToolkit("shape.supershape",function(b,e,u,m,d){c(a.supershape,[b,e,u,m,d.points,Math.round(d.m),d.n1,d.n2,d.n3],d)})})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Thumbnailer=function(k){"string"===typeof k&&(k={src:k});var u,m=k.src,d=k.canvas||e(),x=d.ctx||d.getContext("2d"),p=k.onload,w=k.background||"none";"none"===w&&(w="");var r=k.shadow||!1,v=k.resample||"bicubic",l=k.center||!1,f=function(){var a=u.width,c=u.height;if(!a&&!c)return p&&p(d,u),console.error("missing image");var c=q.util.fitSize(a,c,k),f=c.width,e=c.height,a=c.ratio,g=c.crop,h=c.croparea;d.width=f;d.height=e;w&&(x.save(),x.rect(0,0,f,e),x.fillStyle=
w,x.fill(),x.restore());r&&(x.shadowBlur=r.blur||0,x.shadowOffsetX=r.offsetX||0,x.shadowOffsetY=r.offsetY||0,x.shadowColor=r.color||"transparent");var c=h.x1,m=h.y1,D=h.x2,h=h.y2,B=D-c,E=h-m;if("stretch"===g)x.drawImage(u,c,m,B,E,0,0,f,e);else{var g=Math.round(B*a)||1,F=Math.round(E*a)||1,f=Math.round(l?(f-g)/2:0),e=Math.round(l?(e-F)/2:0);if("lanczos"===v&&"undefined"!==typeof b){var C=u.width/g,G=u.height/F,a=Math.max(C,G)>>0;u=b(u,g,F,a);Math.round(D/C);Math.round(h/G)}x.drawImage(u,c,m,B,E,f,
e,g,F)}p&&p(d,u)},h=String(m),g="function"===typeof FlashCanvas;c[h]||g&&"[object]"===h?(u=m,f()):(d.setAttribute("data-src",m),u="undefined"===typeof document?new a.Image:new Image,g?(u.src=m,x.loadImage(u,f)):q.util.loadImage({src:m,image:u,onload:f}));return d};q.util.fitSize=function(a,b,c){c=c||{};var d=c.crop||"none",e=isFinite(c.width)?c.width:"auto",p=isFinite(c.height)?c.height:"auto",w=c.maxWidth||Infinity,r=c.maxHeight||Infinity,v=c.minWidth||0,l=c.minHeight||0;if(!e&&!w||!p&&!r)return console.error("invalid dimensions");
c=c.croparea;c=Array.isArray(c)?{x1:c[0],y1:c[1],x2:c[2]||a,y2:c[3]||b}:c||{x1:0,y1:0,x2:a,y2:b};a="fit"===d;b=c.x2-c.x1||0;var f=c.y2-c.y1||0,h=b/f;if(0===b||0===f)console.log("invalid dimensions");else{var g=e,y=p;"auto"===e&&"auto"===p?(g=b,y=f):"auto"===e?g=h*y:"auto"===p&&(y=1/h*g);g>w&&(g=w,"auto"===p&&(y=1/h*g));y>r&&(y=r,"auto"===e&&(g=h*y));g<v&&(g=v,"auto"===p&&(y=1/h*g));y<l&&(y=l,"auto"===e&&(g=h*y));"none"===d?h=1:(e=g/y<h,h=a&&e||!a&&!e?y/f:g/b);return{crop:d,croparea:c,width:g,height:y,
ratio:h}}};var e=function(){var b;b="undefined"===typeof document?new a:document.createElement("canvas");b.ctx=b.getContext("2d");return b},c={"[object HTMLImageElement]":!0,"[object HTMLCanvasElement]":!0,"[object Canvas]":!0};if("undefined"!==typeof module&&module.exports){var a=require("canvas"),b=require("./ResampleLanczos.js");module.exports=q.module.Thumbnailer}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.ui=q.ui||{};var e=q.util,c=q.ui.vars={};c.Range=function(b){a(this,b=b||{});var k=b.value;"object"===typeof k?(this.min=isFinite(k.min)?k.min:k[0],this.max=isFinite(k.max)?k.max:k[1],this.getValue=function(){return{min:this.min,max:this.max}},this.getArray=function(){return[this.min,this.max]}):(this.value=k,this.getValue=function(){return this.value},this.getArray=function(){return[this.value]});this.type="clamp";this.format=b.format||"float";this.canCross=b.canCross;this.canPush=
b.canPush;this.gradient=b.gradient;this.clamp={};this.clamp.min=b.min;this.clamp.max=b.max;this.onchange=b.onchange;this.clone=function(a){var m=e.clone(b);a&&(m.value=a);return new c.Range(m)}};c.Button=function(b){a(this,b=b||{});this.type="button";this.onclick=b.callback||b.onclick};c.Checkbox=function(b){a(this,b=b||{});this.type="checkbox";this.checked=b.checked;this.onchange=b.onchange;this.setValue=function(a){"boolean"===typeof a&&this.checked!==a&&(this.checked=a,this.onchange&&this.onchange.call(this,
a))};this.getValue=function(){return this.checked};this.clone=function(a){var u=e.clone(b);a&&(u.checked=a);return new c.Checkbox(u)}};c.Input=function(b){a(this,b=b||{});this.type=b.type||"input";this.value=b.value;"number"===this.type&&(this.max=b.max||e.INFINITY,this.min=b.min||-e.INFINITY,this.step=b.step||"any");this.onchange=b.onchange;this.setValue=function(a){if("number"===this.type&&(a=parseFloat(a),this.max<a||this.min>a))return!1;this.value!==a&&(this.value=a,this.onchange&&this.onchange.call(this,
a))};this.getValue=function(){return this.value};this.clone=function(a){var u=e.clone(b);a&&(u.value=a);return new c.Input(u)}};c.Select=function(b){a(this,b=b||{});b.onchange||console.warn("Select requires onchange",b);this.type="select";this.labelIcon=b.labelIcon||"";this.options=b.options;this.selected=b.selected;this.onchange=b.onchange;this.onclose=b.onclose;this.onopen=b.onopen;this.setValue=function(a){"string"===typeof a&&(this.selected=a)};this.getValue=function(){return this.selected};this.getOptions=
function(){var a=this.options;if("function"===typeof a)return a();if(Array.isArray(a)){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d]=d}return b}return a};this.clone=function(a){var u=e.clone(b);a&&(u.selected=a);return new c.Select(u)}};c.ColorPicker=function(b){a(this,b=b||{});this.type="color";this.color=b.color;this.setValue=function(a){"string"===typeof a&&(this.color=a)};this.getValue=function(){return this.color};this.clone=function(a){var u=e.clone(b);a&&(u.color=a);return new c.ColorPicker(u)}};
c.Textarea=function(b){a(this,b=b||{});this.type="textarea";this.value=b.value;this.setValue=function(a){"string"===typeof a&&(this.value=a)};this.getValue=function(){return this.value};this.clone=function(a){var u=e.clone(b);a&&(u.value=a);return new c.Textarea(u)}};c.FilePicker=function(b){a(this,b=b||{});this.type="filePicker";this.formats=b.formats;this.onchange=b.onchange};c.SubTool=function(b){a(this,b||{});this.type="subtool"};c.Palette=function(b){a(this,b||{});this.type="palette"};c.Resource=
function(b){a(this,b=b||{});this.type="resource";this.format=b.format;this.clone=function(a){a=e.clone(b);return new c.Resource(a)}};c.FilterStack=function(b){a(this,b=b||{});this.type="filter";this.value=b.filter;this.setValue=function(a){this.value=a};this.getValue=function(){return this.value}};var a=function(a,c){a.className=c.className;a.param=c.param;a.title=c.title;a.label=c.label;a.hidden=c.hidden}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.UI=function(e,c){var a=e.dom,b=e.feature,k=e.lang,u=c.render,m=e.style,d=e.client,x=c.toolkit,p=e.ui,w=e.util,r=e.ui.vars;p.media={};p.media.clear="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=";p.media.transparent=e.gen.interlace({id:"transparent"});p.refresh=function(a){p.setToolMenu(a,!0);p.configureRebuild(a)};p.configureBuild=function(d,f){f=!!f;var g=a.$("#sk-configure");if(g&&0!==
g.offsetWidth){var h=b.sidebar.configure;if(!e.sidebar[h]||!1!==e.sidebar[h].opened)if(setTimeout(e.windows.restore,1),h=l(d),d=d||h.type){h=isFinite(h.id)?c.scene.createHash(h,{seed:!0,bbox:!0}):h.type;if(String(h)===g.getAttribute("sk-hash")){if(!1===f){var s;a:{g=d;if(c.scene&&c.scene.children){var m=(h=c.selection.item)?h.toolkit:{};for(s in p.ranges){var k=p.ranges[s];if(!k){b.debug&&console.warn("disabled",s);s=void 0;break a}var r=void 0;h&&(r=h[s]);void 0===r&&m.device&&(r=m.device.brush?
m.device.brush[s]:m.device[s]);void 0===r&&(r=c.scene.clone(c.config[g][s],!0));if(void 0!==r){var r=void 0!==r.max?[r.min,r.max]:void 0!==r.value?r.value:r,y=k.thumbs;if(2===y.length){if(y[0].value!==r[0]||y[1].value!==r[1])y[0].value=r[0],y[1].value=r[1],k.update(0,"load"),k.update(1,"load")}else 1===y.length&&(r=r[0]||r,y[0].value!==r&&(y[0].value=r,k.update(0,"load")))}}}s=void 0}return s}}else g.setAttribute("sk-hash",h);s=a.$("#sk-configure .sk-configure-header");"image"!==d||b.canvas.filter||
(d="clipart");p.configureRebuild(d);c.scene&&c.scene.children||!s||(g=w.string.ucwords(d.replace("gl_","").replace(/([A-Z])/g," $1")),s.innerHTML="<span>"+g+"</span>")}}};p.ranges={};p.configureRebuild=function(b){var d=a.empty("#sk-configure");p.addHeader(d,{title:"settings"});a.append(d,'<div class="sk-pane-content"></div>');if(d=f()){a.empty(d);p.ranges={};if(c.selection&&c.selection.item){var g;g=c.selection.item;var h=c.config[g.type],l=x.getToolkit(g.type);if(l)if(l=l.attributes){var s={};h.filePicker&&
(s.filePicker=h.filePicker);h.subtool&&(s.subtool=h.subtool);h.resource&&(s.resource=h.resource);h.palette&&(s.palette=h.palette);h.toolkit&&(s.toolkit=h.toolkit);for(var y in h)switch(l[y]){case "string":h[y]instanceof r.Select?(s[y]=h[y],s[y].setValue(g[y])):s[y]=g[y];break;case "style":s[y]="fill"===y?new m.Fill(g[y]):new m.Stroke(g[y]);break;case "object":case "number":if(!h[y]||!h[y].clone)continue;s[y]=h[y].clone(g[y])}g.filter&&(s.filter=new r.FilterStack({filter:g.filter}),delete s.palette);
h.reset&&(s.reset=h.reset);g=s}else g=h;else g=console.warn(g);v(b,g)}else v(b,c.config[b]);e.detect.useNoConfigure[b]&&("zoom"===b?(p.appendLineBreak(d),a.append(d,'<div class="sk-content-info">\t\t\t\t\t\t'+k.translate("zoom-tool-message")+"\t\t\t\t\t\t</div>")):"select"===b&&(p.appendLineBreak(d),a.append(d,'<div class="sk-content-info">\t\t\t\t\t\t\t<span class="sk-selection-count"></span>\t\t\t\t\t\t</div>'),c.scene&&c.scene.updateSelectionInfo()))}};var v=function(a,b){var d=f(),c;for(c in b){var h=
b[c];if(h&&h.type&&!h.hidden)switch(h.constructor.type||h.type){case "filter":p.appendFilterStack(d,h);break;case "clamp":h.onchange=g(b,h);p.appendRange(d,h);break;case "button":p.appendLineBreak(d);p.appendButton(d,h);break;case "filePicker":p.appendFilePicker(d,h);break;case "palette":"v2"===e.feature.sidebar.palette?(b.fill&&p.createStyle(d,b,b.fill,"fill","fill"),b.stroke&&p.createStyle(d,b,b.stroke,"stroke","stroke")):p.createPalette(d,b,h);break;case "resource":p.appendResource(d,h);break;
case "subtool":p.createSubtool(d,b,h);break;case "select":"blend"===h.label?e.feature.style.blend&&p.appendSelect(d,h):p.appendSelect(d,h);break;case "checkbox":p.appendTag("Checkbox",d,h);break;case "input":case "number":p.appendTag("Input",d,h);break;case "textarea":p.appendTag("Input",d,h)}}},l=function(a){a=a||c.tool.type;return c.selection&&c.selection.item||c.config[a]||{}},f=function(){return a.$("#sk-configure .sk-pane-content")};p.appendFilePicker=function(b,d){var c=a.create("div");c.className=
"sk-file-picker";c.textContent=k.translate("load-your-own-image");b.appendChild(c);e.uploader.addFileInput({target:c,onchange:function(a,b){if(d.onchange)d.onchange(a,b);else e.uploader.onChangeDefault(a,b)}})};p.appendButton=function(b,d){var c=a.create("div");c.innerHTML=k.translate(d.title);c.className="button";p.addClick(c,d.onclick);D(c,d);b.appendChild(c)};p.createSubtool=function(d,c,f){c=c.type;var e=a.create("div");d.appendChild(e);var g=x.getToolCategory(c);if(g=p.icons[g])if("menu"===b.sidebar.subtool){var e=
{},h;for(h in g.children)e[h]='<span class="'+g.children[h]+'" style="width:18px;display:inline-block;text-align:center"></span> '+k.translate(h);h=new p.SelectMenu({id:"subtool",className:"selectmenu-holder",container:d,selected:c,options:e,onchange:function(a){x.setType(a)}});p.appendLabel(d,h.container,f.title)}else for(h in d=0,g.children)f=a.create('<div class="sk-subtool"></div>'),a.setClass(f,g.children[h]),h===c&&a.setClass(f,"selected"),e.appendChild(f),0===++d%6&&(f.style.borderRight="none"),
function(a,b){p.tooltip&&p.tooltip.add(a,b);p.addClick(a,function(){x.setType(b)})}(f,h)};p.appendTag=function(a,b,d){var c=d.label;a=p[a](d);p.appendLabel(b,a,c)};p.appendLabel=function(b,d,c){p.appendLineBreak(b);var f=a.create("label"),e=a.create("span");e.className="sk-title";e.innerHTML=k.translate(c);f.appendChild(e);f.appendChild(d);f.className="sk-label";b.appendChild(f);return f};var h=function(a,b){return a instanceof b?a:new b(a)};p.appendSelect=function(a,b){b=h(b,r.Select);var d=new p.SelectMenu({id:b.param,
className:"selectmenu-holder",container:a,labelIcon:b.labelIcon,options:b.getOptions(),selected:m.getCompositeReadable(b.selected),tooltip:b.title,onopen:b.onopen,onclose:b.onclose,onchange:function(a){b.onchange(b.param,a);c.saveSettings()}});p.appendLabel(a,d.container,b.label);return d};p.appendResource=function(a,b){var d=b.format;p.appendLineBreak(a);J(a,b,d)};p.appendLineBreak=function(b){a.append(b,'<div class="sk-break"></div>')};p.appendRange=function(b,d){var c=d.getArray(),f=d.param;"spacing"===
f&&(c=[c[0]]);p.appendLineBreak(b);var e=a.create("div");e.className="sk-slider";b.appendChild(e);var g=a.create("span");g.className="sk-title";e.appendChild(g);eventjs.add([e,g,b],"touchdown",eventjs.cancel,{strict:!0});g.setAttribute("data-cmd",f);g.innerHTML=k.translate(f);g=a.create("span");g.className="values";e.appendChild(g);for(var h=0;h<c.length;h++){var l=p.Input({type:"number",className:"value"+h,min:d.clamp.min,max:d.clamp.max,value:c[h],onchange:function(a){var b=parseInt(this.className.substr(5)),
d=s.thumbs[b];d.value!==a&&(d.value=a,s.update(b))}});g.appendChild(l);c[h+1]&&(l=a.create("small"),l.innerHTML="/",g.appendChild(l))}var s=new p.Range({parent:e,className:"sk-range",value:c.toString(),min:d.clamp.min,max:d.clamp.max,format:d.format,gradient:d.gradient,canCross:d.canCross,canPush:d.canPush,onchange:function(b,c){x.area.inGenesis&&x.area.exitGenesis();a.$(".value"+c.index,b.element.parentNode).value=10<d.clamp.max?Math.round(c.value):Math.round(10*c.value)/10;if(d.onchange)return d.onchange(b,
c)}});return p.ranges[f]=s};var g=function(a,b){return function(d,f){var e="end"===d.state||"change"===d.state;if("load"!==d.state){var g=c.selection;if(!g||0!==g.length||!1!==e){var h=b.param,l=x.setConfigure(a,h,d.values);l&&(x.setParam({selection:g&&g.items,cacheObject:d,param:h,value:l}),e&&c.saveSettings())}}}};p.setToolMenu=function(b,d){var c,f=x.getToolCategory(b);"brushes"===f?c=a.$(".sk-brush-menu"):"shapes"===f?c=a.$(".sk-shape-menu"):"utilities"===f&&(c=a.$(".sk-utility-menu"));if((c=
c||a.$("#tool-"+b)||a.$("."+f))&&c.parentNode){if((f=p.icons[f])&&f.children&&(f=f.children[b.replace("_"," ")],!0!==f))if(c.id="tool-"+b,c.setAttribute("data-title",k.translate(b)),0===f.indexOf("icon-")){var e=a.$("img",c);e&&(e.src=p.media.clear);if(e=a.$(".sk-icon",c)||c){for(var g="",h=e.className.split(" "),l=0;l<h.length;l++)0!==h[l].indexOf("icon-")&&(g+=" "+h[l]);e.className=g+" "+f}}else a.$("img",c).src=src;d||p.domSelectTool(c)}};p.setCursor=function(a){if(!b.debug){var d=b.cursorCSS,
f=c.tool;c.contexts.active.style.cursor=a?a:d&&d[f.type]?d[f.type]:""}};p.addClick=function(a,b){eventjs.add(a,"mousedown",function(a){var b=document.activeElement;b&&b.blur&&b.blur();eventjs.cancel(a)});eventjs.add(a,"click",b)};p.on_click_setup_tool=function(a,b){eventjs.prevent(a);var c=b.target,f=y(c),g=f.type;f.type&&f.shortcut&&(x.getConfig(f.type)||x.clone(f.type,f.shortcut));if(x.exists(f.type)){if(f.type&&(f.fill||f.stroke)){var h=x.getConfig(f.type);e.style.cloneFillStroke(f,h)}p.setFilterStack(f);
e.exec(g,function(){if(f.composite)for(var a=f.composite.split(","),b=0;b<a.length;b++){var g=a[b];if(d.gco[g]){e.style.setComposite(g);break}}p.domSelectTool(c);e.sidebar.left&&e.sidebar.left.setPane("configure")},function(){console.warn(g,"error or cancel")})}else e.exec(g,function(){})};p.domSelectTool=function(b){a.setClass({className:"selected",list:a.$$(".sk-toolset .selected"),target:b,on:!0})};var y=function(a){var b=a.getAttribute("data-tool");if(b)return a=e.loc.parseQuery(b),c.scene.decompress(a);
a=a.id;return{type:a&&0===a.indexOf("tool")&&a.substr(5)}};p.TSEvents={};p.TSEvents.add=function(a){z("add",a)};p.TSEvents.remove=function(a){z("remove",a)};var z=function(b,d){d=d||".sk-toolset";w.each(a.$$(d+" img"),function(a){eventjs[b](a,"mousedown",eventjs.returnFalse)});w.each(a.$$(d+" .sk-tool"),function(d){var c=y(d).type;if(c&&(w.each(a.$$(".sk-arrow",d),function(a){var f,g;e.detect.brush[c]?(f="menuBrushTools",g=k.translate("choose-brush")):e.detect.shape[c]?(f="menuShapeTools",g=k.translate("choose-shape")):
e.detect.utility[c]&&(f="menuUtilityTools",g=k.translate("choose-utility"));eventjs[b](a,"mousedown",function(a){eventjs.cancel(a);p.on_click_setup_tool(a,{target:d});a=eventjs.getCoord(a);contextmenu.show(p[f],a.x-15,45,!0)});p.tooltip&&p.tooltip[b](a,g)}),eventjs[b](d,"click",p.on_click_setup_tool),eventjs[b](d,"contextmenu",eventjs.cancel),p.tooltip))p.tooltip[b](d,function(){return d.title||d.getAttribute("data-title")})})},s=function(){return"undefined"===typeof alertify?console.warn("alertify undefined"):
!0},A=function(a,b){if(!0===b.skip)return b.callback(!0);"string"===typeof b&&(b={message:b});if(s()){var d=k.translate(b.message),c=b.labels||{ok:"ok",cancel:"cancel"};c.ok=k.translate(c.ok||"ok");c.cancel=k.translate(c.cancel||"cancel");alertify.set({labels:c});alertify[a]('<h3 class="confirm-message">'+d+"</h3>",b.callback)}};p.alert=function(a){A("alert",a)};p.confirm=function(a){A("confirm",a)};p.error=function(a,b){s()&&alertify.error(a,b)};p.log=function(a,b){s()&&alertify.log(a,b)};p.appendFilterStack=
function(a,b){var d=b.value[0][0],f="gl_"+d.id,e=window.glfx.config[f];if(e){var g=c.selection.item,h=g&&g.filter&&g.filter[0][0];h&&(d=h);h=u.getGLFX();h.activeFilter=d;h.activeItem=g;v(f,e)}};p.setFilterStackFromQuery=function(a){a=c.scene.decompress(e.loc.parseQuery(a));p.setFilterStack(a);e.exec(a.type)};p.setFilterStack=function(a){var b=c.config[a.type];if(b)if(a.filter){var d=x.getToolkit(b.toolkit);c.scene.copyProperties(d,a,b);b.filter=a.filter;a.fill&&(m.cloneFillStroke(b,m),m.fill.type=
"color",e.palette.setPaintMethod("fill"))}else b.filter&&(delete b.filter,delete b.usePixelData,delete b.useBackgroundOverlay)};var q=function(a){var b=l(a),d=e.lib[a],c=d.tree,f=b.src||"",g=0,h;for(h in c)++g;d=b.fontFamily?(a=e.lib.text.byName[b.fontFamily])&&a.category||d.defaultCategory||h:(a=d.byPath[f.replace(a+"/","")])&&a.folder||d.defaultCategory||h;return d},I={text:"fonts",stamp:"stamps",clipart:"clipart"},J=function(b,d,f){b=a.append(b,'<div class="sk-resources"></div>');var g=q(f),h=
e.lib[f].tree,l={};d=d.title||I[f];for(var s in h)"Your Files"!==s&&(l[s]=s);new p.SelectMenu({id:f+"_categories",className:"categories",tooltip:d,container:b,selected:g,options:l,onchange:function(a){p.scrollers[f].scrollTo(a)}});new p.InfiniteScroll(e,c,{type:f,target:b,folder:"*"})};p.PANE={configure:function(a,b){e.ui.configureBuild(b)}};p.enableSidebarTabs=function(){var d=function(b,d,c,f){f=a.append(h[b],'<span class="sk-'+d+" icon-"+(f||d)+'"></span>');p.tooltip.add(f,c||d);p.addClick(f,function(){e.sidebar[b].setPane(d)})},
f=b.sidebar.configure,g=b.sidebar.projects,h={};h[f]=a.$(".sk-sidebar-"+f+" .tabs");h[g]=a.$(".sk-sidebar-"+g+" .tabs");h[f]&&(d(f,"configure","settings"),d(f,"layers"),d(f,"history"));h[g]&&(d(g,"document","file"),d(g,"save","export","export"));d=e.module.TreeMenu;e.ui.treeLayers=new d(e,c,"#sk-layers .sk-pane-content",c.scene.children);e.ui.treeHistory=new d(e,c,"#sk-history .sk-pane-content",c.history.vector.data);g?(p.PANE[g]=function(a,b){var d=e.sidebar[g].pane;if("configure"!==d||1===a){if(p.PANE[d])p.PANE[d](a,
b);e.ui.setPage(d)}},e.on("deselect",function(a){"layers"===e.sidebar[g].pane&&e.ui.treeLayers.deselect(a)}),e.on("select",function(a){"layers"===e.sidebar[g].pane&&e.ui.treeLayers.select(a)})):p.PANE[f]=function(b,d){var c=e.sidebar[f].pane;if("configure"!==c||1===b)p.PANE[c]?(p.PANE[c](b,d),a.setClass({target:"#sk-"+c,list:".sk-pane",className:"selected"})):console.warn(dir)};p.PANE.layers=function(a){"layers"===e.sidebar[g||f].pane&&(clearTimeout(p.PANE.timeout),p.PANE.timeout=setTimeout(function(){var a=
e.perf();e.ui.treeLayers.setData(c.scene.children);e.ui.treeLayers.render();e.feature.debug&&console.warn("rebuildLayers",a())},a||100))};p.PANE.history=function(a){"history"===e.sidebar[g||f].pane&&(clearTimeout(p.PANE.timeout),p.PANE.timeout=setTimeout(function(){var a=e.perf();e.ui.treeHistory.setData(c.history.vector.data);e.ui.treeHistory.render();e.feature.debug&&console.warn("rebuildHistory",a())},a||100))};e.on("transform",p.PANE.history);e.on("open",p.PANE[g]);e.on("undo",p.PANE[g]);e.on("redo",
p.PANE[g]);e.on("cut",p.PANE[g]);e.on("paste",p.PANE[g]);e.on("sendForwards",p.PANE[g]);e.on("sendBackwards",p.PANE[g]);e.on("layerRemove",p.PANE[g]);e.on("layerAdd",p.PANE[g]);g&&w.getItem("pane-"+g,function(a){e.sidebar[g].setPane(a||"configure");console.log(2);e.ui.setPage(a||"configure")});f&&w.getItem("pane-"+f,function(a){e.sidebar[f].setPane(a||"configure")})};p.scrollable=function(a,d){eventjs.proxy.wheelPreventElasticBounce(a);b.preventScroll&&e.client.mobile&&eventjs.add(a,"drag",function(b,
c){d||eventjs.stop(b);var f=a.scrollTop,e=c.ly-c.y;c.lx=c.x;c.ly=c.y;"touchmove"===b.type&&(0>=e&&0>=f?eventjs.prevent(b):0<=e&&f+a.offsetHeight>=a.scrollHeight&&eventjs.prevent(b))},{strict:!0})};p.addHeader=function(b,d){var c=d.onclick,f=d.title,e=d.icon,g=a.append(b,'<div class="sk-row-head"></div>');a.appendText(g,f);c&&(f=a.append(g,'<span class="icon-left"></span>'),eventjs.add(f,"click",c));d.icon&&a.append(g,'<span class="'+e+' icon"></span>')};p.addFooter=function(b,d){var c=a.append(b,
'<div class="sk-footer"></div>');d.className&&c.classList.add(d.className);d.cancel&&p.addButton(c,d.cancel);d.ok&&p.addButton(c,d.ok)};p.addButton=function(a,b){p.appendButton(a,new r.Button(b))};p.Checkbox=function(b){var d=b.param,f=b.checked,e=b.onchange,g=a.create("div"),h=a.create("div"),l=a.create("div");h.appendChild(l);g.appendChild(h);var s=g.classList;g.className="sk-checkbox";f&&s.add("sk-checked");p.addClick(g,function(a){p.tooltip&&p.tooltip.update("");(a=b.checked=!s.contains("sk-checked"))?
s.add("sk-checked"):s.remove("sk-checked");e?e.call(b,a):x.setParam({param:d,value:a});c.saveSettings()});return D(g,b)};p.Input=function(b){b=h(b,r.Input);var d=a.create("input");d.type=b.type;d.value=b.value;eventjs.add(d,"mousedown",eventjs.stop);"number"===d.type?(d.step=b.step,d.min=b.min,d.max=b.max,eventjs.add(d,"keydown,keyup,change",function(a){eventjs.stop(a);setTimeout(function(){var c=a.keyCode;if(8!==c&&38!==c&&40!==c){var c=parseFloat(d.min),f=parseFloat(d.max),e=parseFloat(d.value.replace(/[^0-9]/g,
"")),c=Math.max(c,Math.min(f,e));!1===b.setValue(c)&&(d.value=b.value)}},1)})):eventjs.add(d,"change",function(){!1===b.setValue(this.value)&&(d.value=b.value)});return D(d,b)};var D=function(a,b){b.className&&w.each(b.className.split(" "),function(b){a.classList.add(b)});b.title&&p.tooltip&&p.tooltip.add(a,b.title);return a};p.createStyle=function(d,c,f,g,h,l){var s=c.type,k=f.constructor.type,y=e.util.Canvas(),v=function(a){var b={stroke:"fill",fill:"stroke"}[k],d=c[k]&&c[k].__cache,b=c[b]&&c[b].__cache;
m.apply({useRecord:!0,useRender:!0,method:k,enabled:a});z(a);d&&b&&!1===d.vars.checked&&!1===b.vars.checked&&(b.vars.setValue(!0),b.input.classList.add("sk-checked"))},z=function(){A&&A.checked?m.renderSwatch(y,f.type,f[f.type],44,28):m.renderSwatch(y,"pattern",p.media.transparent,44,28)};p.addClick(y,function(){var d=function(a){y.style.display="gradient"===a?"block":"none"};e.palette.removeListeners("setPane");e.palette.on("setPane",d);var g=e.ui.DOC&&e.ui.DOC.page?a.empty("#sk-"+e.ui.DOC.page):
a.empty("#sk-configure");p.addHeader(g,{title:h,onclick:function(){e.ui.DOC&&e.ui.DOC.page&&"configure"!==e.ui.DOC.page?e.ui.setPage(e.ui.DOC.page):p.configureBuild(null,!0)}});v(!0);g=a.append(g,'<div class="sk-pane-content"></div>');p.createPalette(g,c,f);"stroke"===k&&(p.appendRange(g,new r.Range({value:f.lineWidth,min:.001,max:50,format:"px",label:"lineWidth",param:"lineWidth",title:"lineWidth",onchange:function(a,b){m.setStroke({useRecord:a.state,method:k,lineWidth:b.value})}})),b.style.lineJoin&&
e.detect.shape[s]&&p.appendSelect(g,{label:"lineJoin",param:"lineJoin",title:"lineJoin",selected:f.lineJoin,options:["round","bevel","miter"],onchange:function(a,b){m.setStroke({useRecord:!0,method:k,lineJoin:b})}}));var y=a.append(g,'<div class="sk-gradient-opts"></div>');b.style.colorMode&&!e.detect.useColorCycle[s]&&p.appendSelect(y,{label:"colorMode",param:"colorMode",title:"colorMode",selected:f.mode,options:["linear","radial"],onchange:function(a,b){m.apply({useRecord:!0,useRender:!0,method:k,
mode:b})}});b.style.colorNoise&&p.appendTag("Checkbox",y,new r.Checkbox({label:"colorNoise",param:"colorNoise",title:"colorNoise",checked:!!f.noise,onchange:function(a){m.apply({useRecord:!0,useRender:!0,method:k,noise:a})}}));d(f.type);e.palette.setPaintMethod(k);e.palette.setDNA=l||e.palette.__setDNA});p.tooltip&&p.tooltip.add(y,"choose-"+k);var x=a.create("div");x.className="sk-style";x.appendChild(y);var A={checked:!0};if(c.fill&&c.stroke){var A=new r.Checkbox({label:"enable",param:"enable",title:function(){return A.checked?
"disable":"enable"},checked:f.enabled,onchange:function(a){v(a)}}),w=p.Checkbox(A);c[k].__cache={};c[k].__cache.vars=A;c[k].__cache.input=w;x.appendChild(w)}z();g?p.appendLabel(d,x,g):d.appendChild(x)};p.createPalette=function(b,d,c){d.useBackgroundOverlay||(e.palette.container?b.appendChild(e.palette.container):(a.append(b,'<div id="sk-palette"></div>'),b=d.fill,d={},d.paintMethod=b.method,d.paintType=b.type,e.palette.init(d)))}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.ui=q.ui||{};q.ui.Button=function(e){var c=q.lang;this.data={};this.add=function(a){if(a&&a.id&&!this.data[a.id]){var b=a.parent,e=a.src;delete a.parent;delete a.src;var u=document.createElement("span");u.className="sk-tool";var m=document.createElement("span");m.className="sk-tool-title";m.innerHTML=c.translate(a.title||"");u.appendChild(m);a.symbol&&(m=document.createElement("span"),m.className="sk-icon "+a.symbol,u.appendChild(m));u.events={};for(var d in a)switch(d){case "id":case "className":u[d]=
a[d];break;case "onclick":u.events[d]=eventjs.add(u,d.substr(2),a[d]);break;case "title":u.setAttribute("data-title",a[d]);break;case "style":case "symbol":case "image":break;default:u.setAttribute(d,a[d])}b.appendChild(u);e&&(b=new Image,b.src=e,b.width=26,u.appendChild(b));return this.data[a.id]=u}};this.remove=function(a){if(a=this.data[a])delete this.data[e.id],a.parentNode&&a.parentNode.removeChild(a)};this.disable=function(a){if(a=this.data[a])a.classList.add("disabled"),a.events.onclick.remove()};
this.enable=function(a){if(a=this.data[a])a.classList.remove("disabled"),a.events.onclick.add()};return e?this.add(e):this}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Keyboard=function(e,c){var a=this,b=e.dom,k=e.feature,u=e.client,m=c.toolkit,d=e.client,x=e.ui,p=e.util;a.pressed={};a.keydown=function(a){eventjs.keyTracker(a);var h=p.isEditingText(),g=eventjs.altKey,y=a.keyCode,z=eventjs.metaKey,s=eventjs.shiftKey;switch(y){case 75:if(z&&s&&d.nodewebkit){var A=require("nw.gui").Window.get();A.isKioskMode?require("nw.gui").App.quit():A.enterKioskMode()}break;case 219:if(z)return g?e.exec("layer-to-back"):e.exec("layer-backwards"),
w(a);break;case 221:if(z)return g?e.exec("layer-to-front"):e.exec("layer-forwards"),w(a);break;case 80:if(z)return e.print(),w(a);break;case 83:if(z)return g?e.download.image():s&&m.snapshot?e.exec("snapshot"):e.save.fromQuery(),w(a);break;case 27:if(p.eventOverride("onEscapeKey",a))return;sk.windows.hasFocus()?sk.windows.closeFocused():c.scene.deselectAll();v("escapeKey",a);return w(a)}if(!h&&"eyeDropper"!==x.colorPicker.state&&!p.eventOverride(eventjs.getKeyID(a),a)){switch(y){case 48:if(s&&k.zoom){if(h&&
!z)break;e.exec("zoom-reset");return w(a)}break;case 173:case 189:if(s&&k.zoom){if(h&&!z)break;e.exec("zoom-out");return w(a)}break;case 61:case 187:if(s&&k.zoom){if(h&&!z)break;e.exec("zoom-in");return w(a)}break;case 188:if(l("configure"))return w(a);break;case 68:if(l("download"))return w(a);break;case 78:if(l("document-new"))return w(a);break;case 79:if(z&&u.chooseEntry)return e.open.chooseEntry(function(a){c.addMedia({openAsNew:!0,blob:a})}),w(a);if(l("document-open"))return w(a);break;case 80:if(l("print"))return w(a);
break;case 83:if(l("share"))return w(a);break;case 32:c.orient?(a.preventDefault(),"zoom"!==c.tool.type&&(e.ptool=c.tool.type,e.exec("zoom"))):p.toggleVideo&&p.toggleVideo();return;case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(!k.hotkeys)return;a=k.hotkeys[y-49];switch(a){case "brush":case "shape":if((h=b.$(".sketch-select-"+a))&&h.id)return e.exec(h.id.replace("tool-",""));default:return e.exec(a)}case 191:if(s)return e.exec("help");return;case 46:case 8:eventjs.cancel(a);
e.exec("layer-delete");v("deleteKey",a);return;case 13:document.activeElement===document.body&&eventjs.cancel(a);b.$("#alertify-ok")&&b.$("#alertify-ok").click();v("enterKey",a);return;case 18:if(k.ui.quickSelect&&m.select){if(z)break;if(!k.vector.edit||c.tool===m.select)return;e.ptool=c.tool.type;e.exec("select")}return;case 65:z&&(eventjs.cancel(a),s?e.exec("select-inverse"):e.exec("select-all"));return;case 67:s?e.exec("color-picker"):z&&(eventjs.cancel(a),e.exec("layer-copy"));return;case 73:e.exec("debug-action");
return;case 86:if(z&&!r()){if(c.__rendering)return;c.tool.reset&&c.tool.reset();eventjs.cancel(a);e.exec("layer-paste","select"!==c.tool.type)}return;case 88:z&&(eventjs.cancel(a),e.exec("layer-cut"));return;case 90:if(z){eventjs.cancel(a);if(c.__rendering)return;if(s){if(p.eventOverride("onRedo",a))break;e.exec("redo")}else{if(p.eventOverride("onUndo",a))break;e.exec("undo")}}return;case 37:if(e.on.leftKey)e.on.leftKey(a);else if(c.selection.length){eventjs.altKey?e.exec("layer-clone-left",1):e.exec("layer-move-left",
1);eventjs.cancel(a);break}else if(p.changeVideoFilter&&e.rtc.videos.you){p.changeVideoFilter(-1);break}else{if(c.tool.device&&c.tool.device.brush&&c.tool.device.brush.isGhost){a=c.tool.device.brush;a.seed++;c.tool.ghost(a.event);return}s&&e.sidebar.left&&e.sidebar.left.close&&e.sidebar.left.close()}break;case 39:if(e.on.rightKey)e.on.rightKey(a);else if(c.selection.length){eventjs.altKey?e.exec("layer-clone-right",1):e.exec("layer-move-right",1);eventjs.cancel(a);break}else if(p.changeVideoFilter&&
e.rtc.videos.you){p.changeVideoFilter(1);break}else{if(c.tool.device&&c.tool.device.brush&&c.tool.device.brush.isGhost){a=c.tool.device.brush;a.seed--;c.tool.ghost(a.event);return}s&&e.sidebar.left&&e.sidebar.left.open&&e.sidebar.left.open()}break;case 38:e.on.upKey?e.on.upKey(a):g&&c.pages&&c.pages.length?(c.setPage(-1,"useRelative"),eventjs.cancel(a)):c.selection.length&&(eventjs.altKey?e.exec("layer-clone-up",1):e.exec("layer-move-up",1),eventjs.cancel(a));break;case 40:e.on.downKey?e.on.downKey(a):
g&&c.pages&&c.pages.length?(c.setPage(1,"useRelative"),eventjs.cancel(a)):c.selection.length&&(eventjs.altKey?e.exec("layer-clone-down",1):e.exec("layer-move-down",1),eventjs.cancel(a));break;default:return}w(a,!1)}};a.keyup=function(b){eventjs.keyTracker(b);var d=eventjs.metaKey,g=b.keyCode;if(!e.util.isEditingText()&&(a.pressed[g]=!1,d&&e.ptool&&(c.scene.deselectAll(),e.exec(e.ptool),delete e.ptool),!p.eventOverride(eventjs.getKeyID(b),b)))switch(g){case 18:if(k.ui.quickSelect&&m.select){if(!e.ptool||
!k.vector.edit)break;e.exec(e.ptool);delete e.ptool}break;case 32:c.orient&&e.exec(e.ptool);break;case 37:case 38:case 39:case 40:c.selection.move(0,0,{method:"record"})}};var w=function(b,d){c.scene.setDirtyControl();a.pressed[b.keyCode]=!0;!1!==d&&eventjs.cancel(b)},r=function(){return!1===u.clipboard||d.safari||!eventjs.getEventSupport(c.focusElement,"paste")?!1:!!(c.scene&&c.scene.paste&&c.addMedia)};(function(){var b={};a.enable=function(){if(u.clipboard=r())b.onPaste=eventjs.add(c.focusElement,
"paste",c.scene.onPasteNative)};a.disable=function(){eventjs.removeEvents(b)}})();var v=function(a,b){if(e.on[a])e.on[a](b)},l=function(a){if(eventjs.shiftKey&&k.io.fs&&x.setPage)return x.setPage(a),!0}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.ui=q.ui||{};q.ui.Range=function(a){var b=this,k=a.css,u=a.onchange;b.target=a.target;b.setValue=function(a,d){1===b.thumbs.length&&"undefined"===typeof d&&(d=a,a=0);b.thumbs[a].value=d;b.update(a,"set")};b.target&&(b.target.onchange&&(u=b.target.onchange),b.target.setValue=b.setValue,a.value=b.target.value,a.min=b.target.getAttribute("min"),a.max=b.target.getAttribute("max"),a.step=b.target.getAttribute("step"));b.values=e(a.value,0);b.min=c(a.min,0);b.max=c(a.max,100);b.step=c(a.step,
1);b.thumbs=[];b.format=a.format;!0===a.canCross?(b.canCross=!0,b.canPush=!1):!1===a.canPush?(b.canCross=!1,b.canPush=!1):(b.canCross=!1,b.canPush=!0);var m=document.createElement("div"),d=document.createElement("span");d.className="sk-track";m.appendChild(d);for(var x=0,p=b.values.length,d=0;d<p;d++){var w=document.createElement("div");m.appendChild(w);b.thumbs.push({index:d,element:w,left:0,value:b.values[d]})}if(2===p){var r=document.createElement("div");r.className="sk-range-span";m.appendChild(r);
var v=document.createElement("div");v.className="sk-range-span";v.style.display="none";m.appendChild(v)}b.element=m;b.setup=function(){a.parent&&a.parent.appendChild(m);if(!k&&(a.css=k={},a.className?(k.slider="",k.thumb=""):(k.slider="background: #000 -webkit-radial-gradient(45px 45px, cover, rgb(0, 0, 0) 0%, rgb(255, 255, 255) 100%); border: 1px solid #000; border-radius: 25px; width: 500px; height: 40px; top: 0; position: relative; z-index: 100",k.thumb="background: #fff -webkit-radial-gradient(45px 45px, cover, rgb(0, 100, 255) 0%, rgb(255, 255, 255) 100%); border: 2px solid rgba(0,100,255,1); top: -2px; border-radius: 25px; width: 40px; height: 40px; position: absolute;"),
q.gen&&q.gen.rangeBar&&!q.feature.ui.customRangeBar)){var d=q.gen.rangeBar({gradient:a.gradient,barWidth:m.offsetWidth});k.slider+="\t\t\t\t\tbackground-image: url("+d.toDataURL()+");\t\t\t\t\tbackground-size:"+d.style.width+" "+d.style.height+";"}m.className=a.className;m.style.cssText=k.slider;for(d=0;d<p;d++)b.thumbs[d].element.style.cssText=k.thumb};b.setAnimate=function(a,d){var c=b.thumbs[a].element,e=c.style.left;c.style.cssText=k.thumb;c.style.left=e};b.update=function(a,d){var c=a||0,e=b.thumbs[c],
y=b.values,z=e.element,s=m.offsetWidth||236,x=z.offsetWidth||10,w=x/2;b.state=d||"change";x=s-x;x*=Math.max(0,Math.min(1,(e.value-b.min)/(b.max-b.min)));if(b.canPush){var q=x+w;if(q<e.left)for(var J=e.index-1;-1<J;J--){var D=b.thumbs[J];D.left>q&&(D.element.style.cssText=k.thumb,D.element.style.left=x+"px",D.left=q,D.value=e.value,y[J]=e.value,u(b,D))}else for(J=e.index+1;J<p;J++)D=b.thumbs[J],D.left<q&&(D.element.style.cssText=k.thumb,D.element.style.left=x+"px",D.left=q,D.value=e.value,y[J]=e.value,
u(b,D));e.left=q}else if(b.canCross)e.left=x+w;else{q=x+w;if(q<e.left)for(J=e.index-1;-1<J;J--){if(D=b.thumbs[J],D.left>q){x=D.left-w;q=D.left;D.value=e.value;y[J]=e.value;u(b,D);break}}else for(J=e.index+1;J<p;J++)if(D=b.thumbs[J],D.left<q){x=D.left-w;q=D.left;D.value=e.value;y[J]=e.value;u(b,D);break}e.left=q}y[c]=e.value;z.style.left=Math.round(x)+"px";u(b,e);2===p&&(c=b.thumbs[0].left,e=b.thumbs[1].left,c<=e?(r.style.left=Math.min(c,e)+"px",r.style.width=Math.abs(c-e)+"px",v.style.display="none"):
(r.style.left="0px",r.style.width=e+"px",v.style.left=c+"px",v.style.width=s-c+"px",v.style.display="block"))};b.wheel=function(a,d){var c=b.thumbs[0],e=(c.value-b.min)/(b.max-b.min),e=Math.min(1,Math.max(0,e-d.wheelDelta/5E3));c.value=e*(b.max-b.min)+b.min;b.update(0,d.state)};b.mousedown=function(a,d){for(var c=eventjs.getCoord(a),e=eventjs.getBoundingBox(m),k=Infinity,r,c=c.x-e.x1,e=0;e<p;e++){var s=b.thumbs[e],v=s.left-c,w=Math.abs(v);if(0>v&&w<=k||-1<v&&w<k)k=w,r=s}if(r){var u=r.element,q=r.index;
u.style.zIndex=++x;eventjs.proxy.drag({event:a,target:m,position:"relative",animationFrame:!0,listener:function(a,c){var e=m.offsetWidth;b.setAnimate(q,"move"!==c.state);var g=u.offsetWidth,e=Math.max(0,Math.min(e-g,c.x-g/2))/(e-g);"down"===c.state?(eventjs.blur(),eventjs.cancel(a),g="start"):"up"===c.state?(eventjs.cancel(a),g="end"):(eventjs.cancel(a),g="change");r.value=e*(b.max-b.min)+b.min;b.update(q,g);d&&d(c)}})}};eventjs.add(m,"mousedown",b.mousedown);b.target&&b.target.parentNode&&(b.target.parentNode.insertBefore(m,
b.target),b.target.style.display="none");b.setup();for(d=p-1;-1<d;d--)b.update(d,"load"),b.state="load";return b};var e=function(a){var b=[];if(!a)return[];for("number"===typeof a?a=[a]:"string"===typeof a&&(a=-1!==a.indexOf(",")?a.split(","):a.split(" "));a.length;){var c=parseFloat(a.shift());b.push(c)}return b},c=function(a,b){return"number"===typeof a?a:"NaN"===String(parseFloat(a))?b:parseFloat(a)}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e={};q.ui=q.ui||{};q.ui.SelectMenu=function(c){if(c){var a=this,b=q.dom,k=q.lang,u=q.client,m=q.util,d=q.ui,x=c.id,p=c.container,w=c.options,r=c.selected,v=c.icon,l=c.title,f=c.className,h=k.translate(c.tooltip),g=c.style||"",y=!1!==c.useBackdrop,z=c.onchange,s=c.onopen,A=c.onclose,H=document.createElement("div");H.className="sk-selectmenu-container";x&&(H.id=x);f&&H.classList.add(f);l&&(H.title=k.translate(l));g&&(H.style.cssText=g);p.appendChild(H);var I=u.mobile,J=document.createElement(I?
"a":"input");J.href="#";J.className="sk-focus-element";H.appendChild(J);var D=document.createElement("div");D.className="sk-selectmenu-header";var B=document.createElement("span");B.className="data-header";D.appendChild(B);h&&d.tooltip&&d.tooltip.add(D,h);v?0===v.indexOf("http")||0===v.indexOf(".")?(c=document.createElement("img"),c.src=v,D.appendChild(c)):(u=document.createElement("span"),u.className=v,D.appendChild(u)):(u=document.createElement("span"),u.className=c.labelIcon||"icon-caret-down",
D.appendChild(u),B.innerHTML=k.translate(r));H.appendChild(D);var E=document.createElement("ul");E.className="sk-selectmenu";var F=document.createElement("div");F.className="icon-caret-down arrow-down arrow";var C=document.createElement("div");C.className="icon-caret-up arrow-up arrow";var G=document.createElement("div");G.className="sk-selectmenu-backdrop";G.appendChild(E);G.appendChild(F);G.appendChild(C);c=function(d,c){m.foreach(d,function(e){var f=d[e],g=f.name||f,f=c?g:e,h=document.createElement("li");
if("~br~"===g)h.className="sk-selectmenu-break";else{var l=document.createElement("span"),s=k.translate(g);O.push(f);Q[f]={id:f,idx:e,name:g,translation:s,target:l};e=function(b,d){eventjs.cancel(b);var c=l.querySelector(".sk-selectmenu-option").getAttribute("data-id");250>m.timestamp()-a.openTimestamp||(a.setValue(c),a.close())};I?(eventjs.add(l,"mousedown",eventjs.stop),eventjs.add(l,"click",e)):(eventjs.add(l,"mousedown",eventjs.cancel),eventjs.add(l,"mouseup",e),eventjs.add(l,"mouseover",function(a){b.setClass({target:this,
list:E.querySelectorAll(".sk-selectmenu-item"),className:"sk-hovered"})}));e=document.createElement("span");e.className="sk-selectmenu-option";e.innerHTML=s;e.setAttribute("data-id",f);l.className="sk-selectmenu-item";l.appendChild(e);h.appendChild(l)}E.appendChild(h)})};var L=function(a,b){var d=a.width,c=b.width,e=b.x1,f=window.innerWidth-b.x2,g=Math.max(e,f);E.style.minWidth=d+"px";f>=c?E.style.left=a.x1+a.margin[0]+"px":e>=c?E.style.left=a.x2-c-a.margin[0]+"px":(E.style.width=g+"px",E.style.left=
e>f?"0px":a.x1+"px");f=window.innerHeight;d=b.height;e=a.y1;f-=a.y2;g=Math.max(e,f);f>=d?E.style.top=a.y2+"px":e>=d?E.style.top=a.y1-d+"px":(E.style.height=g+"px",E.style.top=e>f?"0px":a.y2+"px")},K=function(){if(a.selectedElement){var b=eventjs.getBoundingBox(a.selectedElement),d=eventjs.getBoundingBox(E),c=d.height-b.height,b=b.y1-d.y1;0>b?E.scrollTop+=b-12:b>c&&(E.scrollTop+=b-c+12)}};this.isOpen=function(){return E.classList.contains("open")};this.open=function(){if(!a.isOpen()){clearTimeout(a.close.timeout);
E.style.display="block";var d=E.querySelector(".sk-hovered");d&&d.classList.remove("sk-hovered");y?(document.body.appendChild(G),G.style.zIndex=999999):(document.body.appendChild(E),E.style.zIndex=999999);d=b.measure(D);E.style.top=d.y1+d.height+"px";"left"!==q.feature.sidebar.projects&&(E.style.left=d.x1+d.margin[3]+"px");E.style.height="";E.style.width="";setTimeout(function(){y?G.classList.add("open"):E.classList.add("open")},1);var c=b.measure(E);L(d,c);I||(c=b.measure(E),R(C,c,c.y1+2,"paddingTop"),
R(F,c,c.y2-12,"paddingBottom"));K();V();s&&s()}};var R=function(a,b,d,c){E.offsetHeight<E.scrollHeight?(a.style.display="block",a.style.height="12px",a.style.width=b.width+"px",a.style.top=d+"px",a.style.left=b.x1+"px",E.style[c]="12px"):(a.style.display="none",E.style[c]="")};this.close=function(b,d){var c=e[b||a.id];d||c.input.blur();setTimeout(function(){y?G.classList.remove("open"):E.classList.remove("open");a.close.timeout=setTimeout(function(){E.style.position="";E.style.left="";E.style.top=
"";E.style.display="none";y?G.parentNode&&G.parentNode.removeChild(G):E.parentNode&&E.parentNode.removeChild(E)},250)},100);A&&A()};this.setValue=function(d,c){d=String(d);if(a.selected!==d){var e=Q[d];if(e){var f=e.target;a.selectedElement=f;a.selected=d;K();v||(e=String(e.name||""),B.innerHTML=k.translate(e.toLowerCase())||e);b.setClass({target:f,list:E.querySelectorAll(".sk-selectmenu-item"),className:"sk-selected"});z&&!1!==c&&z(d)}}};var u=function(b){a.openTimestamp=null;a.close(null,!0)},N=
function(b){var d=m.timestamp();50>d-a.openTimestamp||(a.openTimestamp=d,eventjs.cancel(b),a.isOpen()?a.close():(J.focus(),a.open()))},p=function(b){var d=b.keyCode;if(27===d||13===d)eventjs.stop(b),J.blur(),a.close();else if(b=0,40===d&&b++,38===d&&b--,b){var d=b,c=a.selected;b=O.length-1;c=O.indexOf(c);c=m.clamp(c+d,0,b);c=O[c];a.setValue(c)}else P(d)},V=function(){0===E.scrollTop?C.classList.remove("active"):C.classList.add("active");E.scrollTop+E.offsetHeight===E.scrollHeight?F.classList.remove("active"):
F.classList.add("active")},P=function(b){if(8===b)J.value="";else{var d,c=0;setTimeout(function(){var b=J.value.toLowerCase();if(b[0]){clearTimeout(J.timeout);J.timeout=setTimeout(function(){J.value=""},1E3);var e=function(a,b){for(var d=0;d<a.length&&b[d]===a[d];d++);return d},f;for(f in Q){var g=Q[f],h=g.translation.toLowerCase();(h=e(h,b))&&h>c&&(d=g.id,c=h)}d&&a.setValue(d)}},0)}};d.scrollable(E);eventjs.add(J,"blur",u);eventjs.add(G,"mousedown",eventjs.cancel);eventjs.add(G,"click",u);I?eventjs.add(D,
"click",N):(eventjs.add(J,"keydown,keypress",p),eventjs.add(C,"hover",function(a,b){E.scrollTop+=-25}),eventjs.add(F,"hover",function(a,b){E.scrollTop+=25}),eventjs.add(E,"scroll",V),eventjs.add(D,"drag",function(b,d){"down"===d.state?N(b):"up"===d.state&&15<d.distanceMoved()&&a.close()}));var Q={},O=[];if(Array.isArray(w))c(w,!0);else{var T,S;for(S in w)"string"!==typeof w[S]&&(T=document.createElement("span"),T.innerHTML=k.translate(S),T.className="optgroup",E.appendChild(T),c(w[S]));T||c(w)}e[x]=
this;this.setValue(r,!1);this.container=H;this.ul=E;this.input=J;this.id=x||null;this.options=w;return this}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Convert=function(a){var b=this,k=a.dom,u=a.util||(a.util={});a.io||(a.io={});b.fileToImage=function(b,d,k){if(!b)return console.warn("fileToImage",arguments);var p=b.src||b;d=d||b.onload||e;k=k||b.onerror||c;var w=a.util.loadImage({src:p,onerror:k,onload:function(){d(w)}})};b.fileToCanvas=function(a,d,k){if(!a)return console.warn("fileToCanvas",arguments);var p=a.src||a,w=a.canvas;d=d||a.onload||e;k=k||a.onerror||c;b.fileToImage(p,function(a){d(b.imageToCanvas(a,
w))},k)};b.fileToPattern=function(a,d,k){if(!a)return console.warn("fileToPattern",arguments);var p=a.src||a;d=d||a.onload||e;k=k||a.onerror||c;b.fileToCanvas(p,function(a){var c=b.imageToPattern(a);c.canvas=a;d(c)},k)};b.htmlToCanvas=function(a,b,x){if(!a)return console.warn("htmlToCanvas",arguments);if("undefined"===typeof html2canvas)return console.warn("html2canvas undefined");var p=a.html||a;b=b||a.onload||e;x=x||a.onerror||c;var w=k.$("#sk-htmlToCanvas")||k.append(document.body,'<div id="sk-htmlToCanvas" style="position:fixed;top:0;left:0;display:none"></div>');
w.style.display="block";w.innerHTML=p;html2canvas(w,{onerror:x,onrendered:function(a){b(a);w.style.display="none"}})};b.imageToCanvas=function(b,d){if(!b)return console.warn("imageToCanvas",arguments);d?(d.ctx=d.ctx||d.getContext("2d"),d.width=b.width,d.height=b.height):d=u.Canvas(b.width,b.height);a.client.ios&&window.MegaPixImage?(new MegaPixImage(b)).render(d,{maxWidth:1E3,maxHeight:1E3}):d.ctx.drawImage(b,0,0);return d};b.imageToPattern=function(a,d){if(!a)return console.warn("imageToPattern",
arguments);d=b.imageToCanvas(a,d);return d.ctx.createPattern(a,"repeat")};b.blobToText=function(a,b,k){if(!a)return console.warn("blobToText",arguments);var p=a.blob||a;b=b||a.onload||e;k=k||a.onerror||c;var w=new FileReader;w.onerror=k;w.onload=function(a){b(a.target.result)};w.readAsText(p)};b.blobToArrayBuffer=function(a,b){var c=a.slice(0,a.size),e=new FileReader;e.onload=function(a){b(new function(a,b){var d=0;this.buffer=a;this.dataView=b=b||new DataView(a);this.readInt8=function(){if(!(d+1>
a.byteLength))return b.getUint8(d++-1,!1)};this.readInt16=function(){if(!(d+2>a.byteLength))return b.getUint16((d+=2)-2,!1)};this.readInt32=function(){if(!(d+4>a.byteLength))return b.getUint32((d+=4)-4,!1)};this.readString32=function(a){a=this.readInt32();for(var c=0,e="";c<a;c++)e+=String.fromCharCode(b.getUint16(d,!1)),d+=2;return e};this.seekString=function(c){for(var e="",g=a.byteLength,m=0;e!==c&&d<g;){++m;var k=String.fromCharCode(b.getUint8(d,!1));d++;if(c[e.length]===k){if(e+=k,e===c)return m}else e=
""}}}(e.result))};e.readAsArrayBuffer(c)};return b};var e=function(){console.log("onload",arguments)},c=function(){console.warn("onerror",arguments)};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Convert)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Download=function(e){var c=this,a=e.dom,b=e.util,k=e.lang;c.blob=function(a,b){var c=e.doc;a=a||new Blob(["hello world"]);b=b||c.title+".txt";c=e.client.io.blob;e.client.chooseEntry?chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:b},function(b){b.createWriter(function(b){b.write(a)},function(a){console.log(a)})}):c?(c=URL.createObjectURL(a),saveAs(a,b)):(c=URL.createObjectURL(a),d.download(c,b))};c.text=function(a,b,m){var k=e.doc;b=b||k.title+
".txt";m=m||"text/plain";e.client.io.blob?c.blob(new Blob([a],{type:m}),b):(a="data:"+m+";base64,"+btoa(a),d.download(a,b))};c.canvas=function(a,m,k,r){d.isReady()&&(a=a||b.Canvas(),k=k||"image/png",r=r||1,m=u(m,k),b.exists("canvas2ImagePlugin.saveImageDataToLibrary")?canvas2ImagePlugin.saveImageDataToLibrary(function(a){alertify.alert("Image successfully saved to your Photo Gallery.")},function(a){alertify.alert("There was an error saving your image.")},a):e.client.io.blob?a.toBlob(function(a){c.blob(a,
m)},k,r):(a=a.toDataURL(k,r),d.download(a,m)))};var u=function(a,b){var d=e.doc,c=b.split("/").pop(),d=a||d.title||"sketch";return-1===d.indexOf(c)?d+"."+c:d};c.sketch=c.zip=function(a){var b=e.doc;d.isReady()&&e.save.zip(function(d){var e=a||b.title;a=-1===e.indexOf(".sketchpad")?e+".sketchpad":e;c.blob(d,a)})};c.svg=function(a,b){var m=e.doc;d.isReady()&&e.save.svg({assets:b,callback:function(b,d){var e=a||m.title;a=-1===e.indexOf(".svg")?e+".svg":e;c.text(b,a,"image/svg+xml")}})};c.json=function(a,
m){var k=e.doc;d.isReady()&&e.save.json({assets:m,callback:function(d){var e=a||k.title;d=JSON.stringify(d,b.json.filterCircular);a=-1===e.indexOf(".json")?e+".json":e;c.text(d,a,"application/json")}})};c.image=function(a,b,k,r,v,l,f,h){d.onReady(function(d){var y=m(a,b,k,r,v,l,f,h);e.save.canvas(y,function(a){72===y.dpi?c.canvas(a,y.filename,y.mime,y.quality):c.canvasDPI(a,y.filename,y.mime,y.quality)})})};(function(){c.canvasDPI=function(b,d,f,h,g){f=f||"image/png";h=h||1;d=u(d,f);b.toBlob(function(b){e.convert.blobToArrayBuffer(b,
function(e){e=a[f](b,e,g);c.blob(e,d)})},f,h)};var a={"image/jpeg":function(a,b,d){b=b.dataView;b.setUint8(13,1);b.setUint16(14,d);b.setUint16(16,d);return new Blob([b])},"image/png":function(a,d,c){c=b(c/72*2834.6472);c=[112,72,89,115].concat(c).concat(c).concat(1);c=b(c.length-4).concat(c).concat(m(c));var e=d.seekString("IDATx")-5-4;d=a.slice(0,e);a=a.slice(e,a.size);return new Blob([d,new Uint8Array(c),a],{type:"image/png"})}},b=function(a){return[a>>24&255,a>>16&255,a>>8&255,a&255]},d=[0,1996959894,
3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,
1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,
1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,
2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,
752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918E3,2847714899,
3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],m=function(a,c){c=(c|0)^4294967295;for(var e=0,h=a.length;e<h;e++)c=c>>>8^d[(c^a[e])&255];return b(c^4294967295)}})();c.pdf=function(a,p,u,r,v,l,f,h){var g=e.doc;e.loader&&e.loader.create("thread",k.translate("reading-files")+"...");d.onReady(function(d){var k=m(a,p,u,r,v,l,f,h),s=k.dpi,A=k.quality,
q=g.pages.data,I=e.util.count(q)||1,J=0,D=0;0===q.length?(J=g.bounds.width,D=g.bounds.height):e.util.foreach(q,function(a){a=q[a];J=Math.max(J,a.width);D=Math.max(D,a.height)});d=b.metrics["px>mm"];var B=new jsPDF(J>D?"landscape":"portrait","mm",[J*d,D*d]),E=B.internal.pageSize.width,F=B.internal.pageSize.height,C=0;new b.Queue({range:{from:0,to:I-1},oncomplete:function(){var a=k.filename||g.title;c.blob(B.output("blob"),a+".pdf");e.loader&&e.loader.create("thread",null,100)},next:function(a,b,d){var c=
this;0!==d&&B.addPage();var f=q[d]||g.bounds;Array.isArray(q)?(k.x=0,k.y=C):(e.doc=f,k.x=0,k.y=0);k.width=f.width;k.height=f.height;e.save.canvas(k,function(a){var b=a.ctx;b.globalCompositeOperation="destination-atop";b.fillStyle="#fff";b.fillRect(0,0,a.width,a.height);var b=a.toDataURL("image/jpeg",A),g=72/s;a=Math.max(a.width*g/E,a.height*g/F);B.addImage(b,"JPEG",0,0,f.width/a,f.height/a);C+=f.height;e.loader&&e.loader.create("thread",null,d/I*100);setTimeout(c.next,1)})}})})};var m=function(a,
b,d,c,m,l,f,h){var g=e.doc,k=typeof a,z="object"===k?a:{},s=function(a,b,d){typeof z[a]!==b&&(z[a]=d)},A=function(a,b,d){if("function"===typeof d)if(z.callback){var c=z.callback;z.callback=function(){c();d()}}else z.callback=d;if(typeof d===b)return z[a]=d,!0};"number"===k||"undefined"===k?(A("x","number",a),A("y","number",b),A("width","number",d),A("height","number",c),A("mime","string",m),A("quality","number",l),A("dpi","number",f),A("callback","function",h)):"string"===k?(A("mime","string",a),
A("quality","number",b),A("callback","function",d)):"function"===k&&A("callback","function",a);a=g.pixelRatio;b=g.getBounds();b.width&&s("width","number",b.width*a);b.height&&s("height","number",b.height*a);s("mime","string","image/png");s("quality","number",1);s("dpi","number",g.dpi);0!==z.mime.indexOf("image/")&&(z.mime="image/"+z.mime);return z},d=new function(){var c="undefined"===typeof document?!1:"download"in document.createElement("a");this.lapse=1E3;this.getElement=function(){var d=this.element||
a.$("#sk-download-element");if(d)return d;this.element=document.createElement("a");this.element.id="download";this.element.target="_blank";this.element.style.display="none";this.element.timestamp=b.timestamp()-this.lapse;document.body.appendChild(this.element);return this.element};this.isReady=function(a){var d=this.getElement(),c=b.timestamp();if(c-d.timestamp>=this.lapse)return a?!0:d.timestamp=c};this.onReady=function(a){var b=this.getElement();if(this.isReady(!0))return a(b),b};this.download=
function(a,b){if(c){var e=d.getElement();e.download=b;e.href=a;e.click()}else window.open().document.write("<title>"+b+'</title><img src="'+a+'"/>')}};return c};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Download)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Open=function(e){var c=this,a=e.convert,b=e.io,k=e.lang,u=e.util.string,m=e.util;c.folder=function(b){var x=b.entries,p=b.onerror,w=b.onsuccess,r=b.onprogress;e.loader&&e.loader.create("thread",k.translate("reading-files")+"...");var v,l=new m.Queue({items:x,flatten:!0,oncomplete:function(){v?c.json(v,w,r):(e.loader&&e.loader.create("thread",null,100),p&&p())},next:function(b,d,c){d=(c+1)/x.length*100>>0;e.loader&&e.loader.create("thread",null,Math.max(0,
d-1));if(b.name)switch(b.name){case "README.txt":l.next();break;case "sketch.json":a.blobToText(b,function(a){v=a;l.next()});break;default:e.assets.add({blob:b,onerror:l.next,onload:l.next,targetId:"#"+u.filenameSansExtension(b.name)})}else return l.next()}})};c.chooseEntry=function(b,c){if(m.exists("navigator.camera.getPicture"))navigator.camera.getPicture(function(c){a.fileToCanvas(c,function(a){a.toBlob(function(a){a.path=c;a.name=u.filename(c);b(a);navigator.camera.cleanup()})})},c,{destinationType:Camera.DestinationType.NATIVE_URI,
sourceType:Camera.PictureSourceType.PHOTOLIBRARY,allowEdit:!1,targetWidth:640,targetHeight:480,saveToPhotoAlbum:!1});else return m.exists("chrome.fileSystem.chooseEntry")?(chrome.fileSystem.chooseEntry({type:"openFile",accepts:[{extensions:e.uploader.formats}]},function(a){a&&a.file(function(a){b(a)})}),!0):!1};c.svg=c.clipart=c.image=function(a){var b=e.doc;"string"===typeof a&&(a={src:a});var c=a.callback||a.onload,k=a.onprogress,r=a.onerror,v=a.src||"",l=function(f){if(a.openAsNew){e.exec("reset");
var g=f.width;f=f.height;b.setSize(g,f);b.scene.add({type:"image",src:v,width:g,height:f,x:g/2,y:f/2},function(){b.setTool("select");b.scene.deselectAll();b.orient.reset();b.orient.render();c&&c()},onerror)}else b.addMedia(a)};if(a.blob)e.assets.add(a.blob,function(a,b){l(b)},r,k);else if(-1!==v.indexOf("filesystem:")){var f=new Image;f.src=v;f.onprogress=k;f.onerror=r;f.onload=function(){var a=m.Canvas(this.width,this.height);a.ctx.drawImage(this,0,0);l(a)}}else e.assets.add(v,function(a,b){l(b)},
r,k)};c.fromQuery=function(a,m,k){var u=e.doc,r=e.feature;"string"===typeof a&&(a=e.loc.getQuery(a,"sk"));a.file&&e.lib.template.byId[a.file]?e.lib.template.open(a.file,m,k):a.file&&"new"===a.file?(u.orient.reset(),m()):a.folder?(b.json.folder=a.folder,c.json({src:a.folder+"sketch.json",onload:m,onerror:k})):a.image?c.image({src:a.image,openAsNew:!0,onload:m,onerror:k}):a.json?c.json({src:a.json,onload:m,onerror:k}):r.stream.sketch?e.peer.openDefaultResource(m,k):r.io.fs?e.fs.openDefaultProject(m,
k):e.server.open?e.server.open(m,k):m&&m()};e.server&&(c.remote=e.server.open);b.zip&&(c.sketch=b.zip.open);b.svg&&(c.svg=b.svg.open);b.json&&(c.json=b.json.open);return c};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Open)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Print=function(e){var c=e.dom;return function(a){a=a||{};var b=function(b){var e=72/(a.dpi||72),m=e*b.width+"px",e=e*b.height+"px";b.style.width=m;b.style.height=e;var d;(d=c.$("#sk-printable"))||(d=c.append(document.body,'<div id="sk-printable"></div>'));d.style.width=m;d.style.height=e;d.innerHTML="";d.appendChild(b);window.print()};"CANVAS"===a.nodeName?b(a):e.save.canvas(a,b)}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Print)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Save=function(k){var u=this,m=k.feature,d=k.io,x=k.util;u.console=function(a){u.canvas(a,k.log)};u.toDataURL=function(d,c){var e=b(arguments);d=e.params;c=e.onsuccess;var f=a(d),h=d.quality||1;u.canvas(d,function(a){c(a.toDataURL(f,h))})};u.toBlob=function(){var d=b(arguments),c=d.params,e=d.onsuccess,f=a(c),h=c.quality||1;u.canvas(c,function(a){a.toBlob(function(a){e(a)},f,h)})};u.toBlobURL=function(){var a=b(arguments),d=a.onsuccess;u.toBlob(a.params,
function(a){d(URL.createObjectURL(a))})};u.canvas=function(){var a=k.doc,d=a.canvas2d,c=a.render,e=b(arguments),h=e.params,g=e.onsuccess;u.perf=k.perf();var y=a.getBounds();if(h.crop)var z=y.width,s=y.height,A=0,w=0,q=function(a){x.thumbnailer({src:a,width:h.width||y.width,height:h.height||y.height,background:h.background,center:h.center,croparea:h.croparea,crop:h.crop,onload:g})};else z=isFinite(h.width)?h.width:y.width,s=isFinite(h.height)?h.height:y.height,A=isFinite(h.x)?h.x:0,w=isFinite(h.y)?
h.y:0,q=function(a){g&&g(a)};var J=a.pixelRatio,e=72*J,D=isFinite(h.dpi)?h.dpi:e,B=D/72,E=h.scale||1;1!==E&&(D*=E,B=D/72);var e=isFinite(h.highRes)?h.highRes:c.highRes||D!==e,D=h.useVisibleRegion||!1,F=(E=h.useSelection||!1)||h.useBoundingBox||!isFinite(A+w+z+s),C=h.background||void 0;"transparent"!==a.background&&("default"===C?C=a.backgroundRaw:m.canvas.saveWithBackground&&!C&&(C=a.backgroundRaw));F&&a.scene?(F=a.scene.getBoundingBox(h),A=(F.x>>0)*B,w=(F.y>>0)*B,z=(F.width>>0)*B,s=(F.height>>0)*
B):(A-=a.scrollLeft,w-=a.scrollTop,z*=B,s*=B);z=Math.ceil(z);s=Math.ceil(s);D&&(z=Math.min(z,d.width),s=Math.min(s,d.height),A=Math.max(A,0),w=Math.max(w,0));if(k.getSnapshot)return k.getSnapshot(q,z,s);if(a.scene){var G=d.width,L=d.height,K=d.x,R=d.y,N=a.zoom,V=c.highRes,P=a.contexts.layer0,Q=P.width,O=P.height;z!==P.width&&(P.width=z);s!==P.height&&(P.height=s);a.pixelRatio=B;a.zoom=1;d.width=z;d.height=s;d.x=-A-a.x;d.y=-w-a.y;c.clipped=!1;c.selected=E&&a.selection.items;c.highRes=e;c.output(function(){c.clipped=
!1;c.selected=!1;c.highRes=V;d.width=G;d.height=L;d.x=K;d.y=R;a.zoom=N;a.pixelRatio=J;var b=p(A,w,z,s,B,C);Q!==P.width&&(P.width=Q);O!==P.height&&(P.height=O);c.scene("save.canvas");q(b)})}else q(p(A,w,z,s,B,C))};var p=function(a,b,d,c,e,g){var m=k.doc,p=x.Canvas(d,c),s=p.ctx;g&&"none"!==g&&"transparent"!==g&&(s.save(),s.scale(e,e),s.fillStyle=g,s.translate(-Math.abs(a%d),-Math.abs(b%c)),s.fillRect(0,0,2*d,2*c),s.restore());a=m.contexts;for(var A in a)w[A]||s.drawImage(a[A],0,0,d,c);return p},w={cache:!0,
active:!0,draw:!0};d&&d.json?(u.json=d.json.save,u.assets=d.json.assets):u.json=u.assets=function(){console.warn("IO.JSON support not included.")};u.toServer=k.server&&k.server.save?k.server.save:function(){console.warn("IO.Server support not included.")};u.toFS=k.fs.saveProject?k.fs.saveProject:function(){console.warn("IO.FileSystem support not included.")};u.svg=d&&d.svg?d.svg.save:function(){console.warn("IO.SVG support not included.")};u.zip=function(a,b){a=a||e;u.folder(function(c){d.zip.encode(c,
function(b){a(b)},b)})};u.folder=function(a){a=a||e;u.json({assets:"get",callback:function(b,d){var e=[],h;for(h in d){var g=c[d[h].type];e.push({filename:h.substr(1)+"."+g,blob:d[h]})}e.push({filename:"sketch.json",blob:new Blob([b],{type:"application/json"})});a(e)}})};u.sync=function(a){a=a||{};var b=a.onprogress,d=a.onsuccess||e;a=a.sync||{};if(!x.count(a))return d();var c=0,h;for(h in a)a[h]&&(!0===a[h]&&(a[h]={}),c++);var g=c,m=function(a){b&&b((g-(c-1))/g*100);--c||d&&d(s)},p,s={};for(h in a)if(p=
a[h])switch(h){case "metadata":x.mixin(p,s);m("metadata");break;case "folder":u.folder(function(a){s.folder=a;m("folder")},!0);break;case "zip":u.zip(function(a){s.sketch=a;m("zip")});break;case "svg":u.svg(function(a,b){s.svg=b;m("svg")});break;case "json":u.json({toServer:!0,toBlob:p.toBlob,assets:p.assets,callback:function(a){s.json=a;m("json")}});break;case "thumb":p.background=k.doc.backgroundRaw,p.suffix=p.suffix||"thumb";case "image":var A=p.format||"png";p.idx=p.suffix?p.suffix+"."+A:A;(function(a){a.toBlob?
u.toBlob(a,function(b){s[a.idx]=b;m("image")}):u.toDataURL(a,function(b){s[a.idx]=b;m("image")})})(p);break;default:m()}};u.fromQuery=function(a,b,d,c){k.server.enabled&&k.server.enabled()?m.io.fs&&k.fs.supported?k.fs.saveProject({onsuccess:b,onerror:d,onprogress:c}):k.server.save({onsave:b,onerror:d,onprogress:c}):k.download.image()};return u};var e=function(a,b){console.warn("callback",a,b)},c={"image/png":"png","image/gif":"gif","image/jpeg":"jpeg","image/svg+xml":"svg"},a=function(a){return a.mime?
a.mime:a.format?"image/"+a.format:"image/png"},b=function(a){var b=a[0]||{};return"function"===typeof b?{params:{},onsuccess:b,onerror:a[1]}:{params:b,onsuccess:a[1]||b.onsuccess||b.callback||e,onerror:a[2]||b.onerror||e}};"undefined"!==typeof module&&module.exports&&(module.exports=q.module.Save)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.JSON=function(a){var b=this,k=a.convert,u=a.feature,m=a.lang,d=a.loc,x=a.util,p=x.array2object(["[object Blob]","[object File]"]),w=function(b,l,f){if(void 0===b)return console.warn("missing params");"object"!==typeof b&&(b={json:b});l=l||b.onload||e;f=f||b.onerror||c;var h=b.json||b.blob||b.hash&&b||b.src||b;if(p[String(h)])return k.blobToText(h,function(a){w(a,l,f)});if("string"===typeof h){if("<"===h[0]){a.loader&&a.loader.stop("thread");return}if(d.isValidXhrUrl(h))return x.request({url:h,
onload:function(a){b.json=a.responseText;w(b,l,f)}});try{var g=JSON.parse(h)}catch(m){return f(m,h)}}return g?l(g,h):f()},r=function(a,b,d){if(d||b)a=JSON.stringify(a);d&&(a=new Blob([a],{type:"application/json"}));return a};this.open=function(d,c,e){var h=a.doc,g=d.mergeIntoScene||!1;c=d.onload||c;e=d.onerror||e;var k=function(d,s){sk.p("json.read");if(g)return b.merge(d,c,e);a.loader&&a.loader.create("thread",m.translate("opening-format",".JSON")+"...");"sketch"===d.title&&(d.title=h.title=u.doc.title);
"..."===d.description&&(d.description=h.description=u.doc.description);d.actions&&h.scene.setData(d.actions,!0);d=b.upgrade(d,s);h.history&&u.history.vector&&d.history&&d.history.vector&&(h.history.vector=d.history.vector);var k=d.metadata||{};h.mixinDefs(k,h);k.background&&h.setBackground(k.background);h.setSize(k.width,k.height,k.units,k.dpi);h.setScroll(k.scrollLeft,k.scrollTop);h.orient.reset();h.scene.reindex();sk.p("json.open");h.render.preload({chunkBatch:!0,onprogress:function(b){a.loader&&
a.loader.create("thread",m.translate("opening-format",".JSON")+"...",99*b>>0)},onload:function(){sk.p("json.render");a.loader&&a.loader.stop("thread");a.assets&&a.assets.addFromActions(h.scene.children);a.on.open&&a.on.open();c&&c()}})};sk.p=sk.perf();w(d,function(b,d){b.assets?a.assets.addList(b.assets,function(){k(b,d)}):k(b,d)},e)};this.merge=function(b,d,c){var e=a.doc;if(b){b=b.actions?b.actions:b;for(c=0;c<b.length;c++){var g=b[c];void 0===e.scene.getById(g.id)&&e.scene.push(g)}e.scene.reindex();
e.render.preload({chunkBatch:!0,onload:function(){a.assets&&a.assets.addFromActions(e.scene.children);d&&d()}})}else c&&c()};this.save=function(d){var c=a.doc;"function"===typeof d&&(d={onsave:d});"object"!==typeof d&&(d={});var f=d.toServer||!1,h=d.toBlob||!1,g=d.assets||null,m=d.quality||1,k=!1!==d.stringify,s=d.onsave||d.callback||e,p=c.scene.children,x={};if(d=c.history)f?(f=u.sync.json)&&f.history&&(x.history={},x.history.vector=d.vector):u.history.vector&&(x.history={},x.history.vector=d.vector);
x.metadata=c.mixinDefs(c,{});x.version=a.__version;x.title=c.title;x.description=c.description;"sketch"===x.title&&(x.title=c.title=u.doc.title);"..."===x.description&&(x.description=c.description=u.doc.description);if(g){var w="encode"===g;b.assets({quality:m,toDataURL:w,onsuccess:function(a){sk.p(["json.assets",a]);x.actions=c.scene.compress(p);sk.p(["json.compress",a]);c.scene.roundData(x.actions);w&&(x.assets=a);sk.p(["json.round",a]);var b=r(x,k,h);sk.p(["json.stringify",a]);s(b,a)}})}else x.actions=
c.scene.compress(p),c.scene.roundData(x.actions),g=r(x,k,h),s(g)};this.assets=function(b){b=b||{};var d=a.doc,d=b.layers||d.scene.children,c=b.onsuccess||e,h=b.toBlobURL||!1,g=b.toDataURL||!1,m=b.mime||"image/png",k=b.quality||1;1!==k&&(m="image/jpeg");var s=function(){!--w&&q>=x-1&&c(p)};b=function(b){++w;var d=a.assets.getId(b.src);if(p[d]||!r)s();else{if(d){b.src=d;var c=a.assets.data[d];b=b.type;if("clipart"===b){if("function"!==typeof c.stringify)return u.debug&&console.warn("cannot stringify svg",
c),s();if(g)return p[d]=c.srcXML?c.srcXML:c.stringify(),s()}else if(a.detect.useStampResource[b]&&"image/jpeg"===m&&(b=c.getContext("2d"),b.save(),b.globalCompositeOperation="destination-atop",b.fillStyle="#fff",b.fillRect(0,0,c.width,c.height),b.restore()),g)return p[d]=a.assets.getDataURL(d,m,k),s();return h?a.assets.getBlobURL(d,function(a){p[d]=a;s()},m,k):a.assets.getBlob(d,function(a){p[d]=a;s()},m,k)}return s()}};var r=u.sync.localRefs,p={},x=d.length;if(0===x||a.fromServer)return c(p);for(var w=
0,q=0;q<x;q++){var B=d[q];B.src?b(B):s(++w)}};this.upgrade=function(b,d){b.version=b.version||"2.0a";b.version=b.version.replace("dev","");for(var c=new x.version(b.version||"2.0"),e={"2.0a":c.isLessThan("2.0a"),"3.3":c.isLessThan("3.3"),"3.4":c.isLessThan("3.4"),"3.4.6":c.isLessThan("3.4.6"),"3.4.6.1":c.isLessThan("3.4.6.1"),"3.5.9.2":c.isLessThan("3.5.9.2"),"3.6.3":c.isLessThan("3.6.3")},g=b.actions||[],m=0,k=g.length;m<k;m++){var s=g[m];if(e["3.6.3"]){if(e["3.5.9.2"]){if(e["3.4.6"]){if(e["3.3"]){if(e["2.0a"]){var p=
s;p.color_mode&&(p.fill.mode=p.color_mode);p.color_noise&&(p.fill.noise=p.color_noise);p.flow&&(p.spacing=p.flow)}p=s;"string"===typeof p.src&&(p.src=p.src.replace("/brush/","/stamp/"),p.src=p.src.replace("/animal/","/animals/"));"polygon"===p.type&&(p.type="regularPolygon");"radialBurst"===p.type&&(p.spread=p.slope,delete p.slope);"0,00000000"===p.fill.gradient&&(p.fill.gradient="none")}p=s;p.content&&(p.content=p.content.split("\uf7c2\uf7a0").join(" "));q.detect.brush[p.type]&&p.bbox.padding&&(p.bbox.x-=
2*p.bbox.padding,p.bbox.y-=2*p.bbox.padding);"paint"===p.composite&&(p.composite="source-over");"light"===p.composite&&(p.composite="lighter");isFinite(p.saturation)&&(p.type="image");"image"===p.type&&(delete p.hue,delete p.saturation,delete p.temperature,delete p.tint,delete p.exposure,delete p.brightness,delete p.contrast,delete p.filters)}p=s;"floodfill"===p.type&&(p.usePixelData=!0);p.roundness&&(p.roundness/=200);p.filters&&(p.filter=p.filters,delete p.filters)}s.fill&&(s.fill.enabled=!0)}}g=
b.metadata=b.metadata||{};e["3.6.3"]&&(e["3.4.6.1"]&&(e["3.4.6"]&&(e["3.4"]&&(e=b.metadata,b.title&&(e.title=b.title),b.description&&(e.description=b.description),isFinite(b.width)&&(e.width=b.width),isFinite(b.height)&&(e.height=b.height)),e=b.metadata,"string"!==typeof e.units&&(e.units=!1===e.autoResize||!1===e.infiniteCanvas?"px":"%")),e=b.metadata,isFinite(e.x)&&isFinite(e.y)&&(e.x=-e.x,e.y=-e.y)),e=b.metadata,b.history&&b.history.vector&&(b.history.vector={max:4294967295,current:0,data:[]}),
"bluePrint"===e.background&&(e.background="blueprint"),"%"===e.units&&(e.width*=100,e.height*=100));g.uuid=g.uuid||x.uuid();g.background=g.background||"transparent";g.units=g.units||"%";g.width=g.width||1;g.height=g.height||1;g.x=g.x||0;g.y=g.y||0;g.pages=g.pages||{data:[],current:0,length:0};u.debug&&c.isLessThan(a.__version.replace("dev",""))&&console.warn("upgraded from:",c);return b}};var e=function(){console.log("success",arguments)},c=function(){console.warn("error",arguments)};"undefined"!==
typeof module&&module.exports&&(module.exports=q.module.JSON)})(sketch);
(function(q){q.registerToolkit("brush",function(e,c){var a=this,b=c.canvas2d,k=e.detect,u=e.feature,m=c.contexts,d=c.render,x=c.scene,p=e.style,w=c.toolkit,r=e.util,v=e.vector,l=v.Path;this.id="brush";this.units=u.tools.brush.units||u.tools.units;this.batches={};this.position={};this.intervals={};this._attributes={blur:"number",mode:"number",diameter:"number",distance:"number",increment:"number",innerRadius:"number",lineWidth:"number",outerRadius:"number",radius:"number",speed:"number",spacing:"object",
spread:"number",src:"string",tolerance:"number",contiguous:"boolean",rotate:"object",scale:"object",translate:"object"};var f=r.clone(this._attributes);this.attributes=r.mixin(e.attrs.__styledObject,f);this.enabled=!1;this.enable=function(){var a=this.device&&this.device.brush;a&&a.enable&&a.enable();if(!0!==this.enabled){this.enabled=!0;this.enableGhost();var b=this.active.canvas;this.onDrag=a&&a.useEventMonitor?eventjs.add(b,"drag",this.record,{monitor:!0}):eventjs.add(b,"drag",this.record);w.select&&
c.tool!==w.select&&w.select.enable({mouse:!1})}};this.disable=function(){var a=this.device&&this.device.brush;a&&a.disable&&a.disable();!1!==this.enabled&&(this.enabled=!1,this.disableGhost(),this.onDrag.remove(),w.select&&c.tool!==w.select&&w.select.disable({mouse:!1}))};this.ghostEnabled=!1;this.enableGhost=function(){if(!a.ghostEnabled&&eventjs.isMouse){a.ghostEnabled=!0;var b=a.active.canvas;eventjs.add(b,"mouseout",a.ghost);eventjs.add(b,"mousemove",a.ghost)}};this.disableGhost=function(){if(a.ghostEnabled){a.ghostEnabled=
!1;var b=a.active.canvas;eventjs.remove(b,"mouseout",a.ghost);eventjs.remove(b,"mousemove",a.ghost)}};this.loadResource=function(b){var d=b.layer,f=b.onerror,h=b.onload,l=d.type;(b=e.module.toolkit["brush."+l])?new b(e,c,d,function(b,c){if(c)f&&f(d,"&ldquo;"+name+"&rdquo; "+b.type+" unavailable.");else{b.type=l;x.copyProperties(a,d,b);var e=a.batches[d.finger]||{};b.toolkit="brush";b.layer=d;b.prepare=b.prepare||w.prepareBrush;b.seed=e.seed||b.seed||r.Random.seed();b.padding=a.getPadding(b);p.load(b,
function(){d.dirtyCheck=!0;d.render=g;d.brush=b;h&&h(d)})}}):f&&f(d,l+" unavailable.")};this.changeDevice=function(b,d,c){this.device=x.copyProperties(a,b,{});this.loadResource({layer:this.device,onerror:c,onload:d})};this.getDevice=function(a,b,d){var e=a;"string"===typeof e&&(e=r.clone(c.config[a]));this.loadResource({layer:e,onerror:d,onload:b});return e};this.getPadding=function(a,b){var d=c.config[a.type],e=0;d.diameter&&a.diameter&&(isFinite(a.diameter)?e=a.diameter||0:isFinite(a.diameter.value)?
e=a.diameter.value:isFinite(a.diameter.min)&&(e=a.diameter.max));if("spirograph"===a.type)var f=a.distance||0,e=e+2*(Math.abs((a.outerRadius||0)-(a.innerRadius||0))+f);var f=d.scale&&a.scale&&a.scale.max||1,g=d.translate&&a.translate&&a.translate.max||0,g=2*Math.sqrt(g*g+g*g);return((2*(d.blur&&a.blur||0)+e+(d.lineWidth&&a.lineWidth||0))*f+g)/2};this.updateObjectSize=function(b,d){var c=b.brush;if(c&&b.type===c.type){var e=b.bbox,f=e&&e.scale.x||1,g=a.getPadding(b,e);if("floodfill"===b.type)var c=
m.layer0,g=0,h={x1:0,y1:0,x2:c.width,y2:c.height};else h=k.useCatmullRomSpline[b.type]?new v.BBox(v.catmullRomSplineData({path:b.data,tension:0})):new v.BBox(b.data);if(e)var l=e.units||"objectBoundingBox",p=(e.padding||0)-g,c=e.x+p*f,r=e.y+p*f,p=0;else l=a.units,p=g,c=h.x1,r=h.y1;var y=h.x2-h.x1+2*g,x=h.y2-h.y1+2*g,l={x:c-p*f,y:r-p*f,width:y,height:x,padding:g,units:l,viewBox:[0,0,y,x]};if(b.firstRecord&&!e){delete b.firstRecord;c=h.x1+g*f-g;r=h.y1+g*f-g;e=b.data;for(f=0;f<e.length;f++)g=e[f],g.x-=
c,g.y-=r;d&&(l.rotate=d);return l}l.scale=e.scale;l.rotate=e.rotate;return b.bbox=l}a.loadResource({layer:b,onerror:a.updateObjectSize,onload:a.updateObjectSize})};this.ghost=function(b){if(b&&a.device&&a.device.brush&&"eyeDropper"!==e.ui.colorPicker.state){var d=a.device.brush;if("mouseout"===b.type)delete d.ghostX,delete d.ghostY,delete d.event;else{d.event=b;var f=eventjs.getCoord(b),g=eventjs.getBoundingBox(c.container),h=c.zoom;b=c.pixelRatio;var l=h*b,l=(f.x-g.x1-g.scrollLeft)/h,f=(f.y-g.y1-
g.scrollBodyTop-c.scrollTop)/h;if(d.ghostDistance&&isFinite(d.ghostX)){var h=d.ghostX-l,m=d.ghostY-f,k=Math.sqrt(h*h+m*m),g=d.ghostDistance;k>g&&(h=Math.atan2(m,h),d.x=l,d.y=f,d.ghostX=l+Math.cos(h)*g,d.ghostY=f+Math.sin(h)*g)}else d.x=l,d.y=f,d.ghostX=l,d.ghostY=f;d.finger=d.finger||"0:A";d.interval=d.interval||0;d.seed=d.seed||1234567;d.ctx=a.ctx;d.active=a.draw;d.cache=a.cache;d.isGhost=!0;d.isRecording=!0;d.path=[{cmd:"M",x:d.ghostX,y:d.ghostY},{cmd:"L",x:d.x,y:d.y}];h=c.zoom;l=h*b;b=d.prepare();
b.save();b.scale(l,l);d.render?d.render():(b.globalAlpha=d.opacity/100,b.globalCompositeOperation=p.getComposite(d.composite,!d.isRecording),d.drawStart&&d.drawStart(),d.draw&&d.draw(null),d.drawEnd&&d.drawEnd());b.restore()}}};this.multiRecord=function(b,d,c){d.x-=20;d.y-=20;for(b=d.interval=0;2>b;b++){if("down"===d.state){var e=w.brush,f=x.copyAttributes(e.attributes,e.device.brush,{});f.type=a.type;e.deviceProxy[b]=f;a.loadResource({layer:f,onerror:function(a,b){console.log(a,b)},onload:function(a){console.log(a.brush)}})}d.x+=
20;d.y+=20;d.interval+=20;d.identifier=b;d.isFromBrowser=!0;a.record(null,d,c)}};this.record=function(f,s,y){if("eyeDropper"!==e.ui.colorPicker.state){var q=w.getMouseId(f,s),I=f?a.device:a.deviceProxy[q];if(I&&I.brush){a.deviceLastRecordId=q;a.deviceLastRecord=I;var J=I.type,D=I.brush,B=a.batches[q],E=D.state=s.state,F="down"===E,C="up"===E,G="move"===E,E=s.isFromBrowser||!!f,L=eventjs.shiftKey,K=eventjs.metaKey;F?c.__interacting=!0:C&&(c.__interacting=!1);var R=c.zoom,N=R*c.pixelRatio,V=c.scrollLeft,
P=c.scrollTop,Q=(s.x-V)/R,R=(s.y-P)/R;if(C)delete D.px,delete D.py;else if(D.spacing){if(isFinite(D.px)&&isFinite(D.py)){var O=D.px-Q,T=D.py-R,O=Math.sqrt(O*O+T*T);if(O<=D.spacing.min)return}D.px=Q;D.py=R}if(L&&s.hasMoved())if(s.lockY)Q=s.start.x;else if(s.lockX)R=s.start.y;else{var S=Math.abs(s.start.x-s.x),O=Math.abs(s.start.y-s.y);S>O?(Q=s.start.x,s.lockX=!0):(R=s.start.y,s.lockY=!0)}C&&(delete s.lockX,delete s.lockY);eventjs.supports.touch?(D.ghostX=Q,D.ghostY=R):D.ghostX-=V;if(!(F&&D.onPointerDown&&
D.onPointerDown(s))){if(F||C){if(D.onDoubleTap&&C&&!D.cancelListener&&B){if(2<B.length&&D.current&&(S=l.lineDistance(B[B.length-1],D.current),500>Date.now()-D.timestamp&&25>S))return D.onDoubleTap();D.timestamp=Date.now();D.current=B[B.length-1]}if(D.addLineSegment&&(B||(D.clickCount=0),F&&D.clickCount++,B)){var O=Math.abs(Q-B[0].x),T=Math.abs(R-B[0].y),S=new v.BBox(B),X=S.x2-S.x1,S=S.y2-S.y1,S=Math.sqrt(X*X+S*S),O=Math.sqrt(O*O+T*T);10<S&&1<B.length&&(F=!1,G=!0);if(10<O||10>S&&1===D.clickCount)F=
!1,C=D.cancelListener||!1,G=!0}}!B||F?(B=a.batches[q]=[],B.path=[],D.interval=B.interval=isFinite(s.interval)?s.interval:a.interval||0,D.seed=s.seed||D.seed,D.event=f,D.self=s,f&&eventjs.prevent(f)):f&&eventjs.cancel(f);F?(a.disableGhost(),a.dragging=!0,p.load(D),1===s.fingers&&(X=m.layer0.width,S=m.layer0.height,r.Canvas.blip(m.cache,X,S),r.Canvas.blip(m.active,X,S)),E&&isFinite(D.ghostX)&&isFinite(D.ghostY)?(f={cmd:"M",beginPath:!0,interval:B.interval,x:D.ghostX+V,y:D.ghostY},delete D.ghostX,delete D.ghostY):
f={cmd:"M",beginPath:!0,interval:B.interval,x:Q,y:R},E&&e.net.dataChannel&&u.stream.sketchLive&&(G=s.state+","+f.x+","+f.y+","+q,S=a.interval||0,O=x.copyAttributes(a.attributes,D,{}),O=x.clone(O,!0),e.net.dataChannel.send(["brush",J,G,K,L,O,S])),!0===D.click?B[0]=f:(B.push(f),B.path.push(f)),D.ghostDistance&&(f={},f.x=Q,f.y=R,f.cmd="L",B.push(f),B.path.push(f),E&&e.net.dataChannel&&u.stream.sketchLive&&(G="move,"+f.x+","+f.y+","+q,e.net.dataChannel.send(["brush",J,G,K,L])))):(f=G?{cmd:"L",x:Q,y:R}:
{cmd:"z",x:Q,y:R},E&&e.net.dataChannel&&u.stream.sketchLive&&(G=s.state+","+f.x+","+f.y+","+q,e.net.dataChannel.send(["brush",J,G,K,L])),D.lineRecord?C?(L=Math.min(B.length,2),B[L]=f,B.path[L]=f,D.lineRecordRotate&&(K=B[0],Q=B[1],L=l.lineAngle(K,Q),K=l.pointAtTime(K,Q,.5),Q=new v.Transform,Q.translate(K.x,K.y),Q.rotate(-L/2),Q.translate(-K.x,-K.y),Q.flatten(B),Q.flatten(B.path),B.rotate=-L*r.RAD_DEG)):(B[1]=f,B.path[1]=f):!0===D.click?"z"!==f.cmd&&(B[0]=f):(B.push(f),B.path.push(f)));D.dirtyCheck=
!0;D.isGhost=!1;D.isRecording=!0;D.isFromBrowser=E;if(C){F=u.vector.edit;C=u.vector.record;L=s.layer&&s.layer.bbox;if(D.cancelPointerUp||D.onPointerUp&&D.onPointerUp())return a.reset(q);var B=0,ba;for(ba in a.batches)B++;1===B&&(a.dragging=!1);E&&(a.gestures--,a.interval=D.interval||0,1===s.fingers&&a.enableGhost());ba=E||e.peer&&e.peer.isStableStream();if(E||ba||y){var B=a.batches[q],W=!p.isSourceOver[I.composite]||D.usePixelData,I=x.clone(c.config[J]);x.copyAttributes(a.attributes,D,I);I.data=v.clean&&
k.useCleanVector[D.type]?v.clean(new v.Polygon,B.path):r.clone(B.path);I.brush=D;I.firstRecord=!0;L&&r.mixin(s.layer.bbox,I.bbox={});S=a.updateObjectSize(I,-B.rotate);S.x+=V-1*b.x/N;S.y+=P-1*b.y/N;B.rotate=0;var Y;C&&(f=I.data,J=x.copyAttributes(a.attributes,D,{finger:q,type:J,data:f,interval:f[0].interval,bbox:S}),s.layer?x.copyProperties(a,s.layer,J):x.copyRules(D,J),Y=x.addObject(J),F||W||(Y.render=g,Y.dirtyCheck=!1))}F&&a.reset(q);if(E||ba||y)if(q=function(){1===s.fingers&&r.Canvas.blip(a.draw.canvas);
c.history&&Y&&c.history.store({cmd:"add",icon:Y.type,name:Y.type,data:x.clone([Y])});y&&y()},F)x.deselectAll(),x.updateTransform(Y),s.layer?q():p.isSourceOver[Y.composite]?d.layer(a.ctx,Y,q):d.sceneGCO("toolkit.brush",q);else{if(W||"place"===s.identifier)D.cmd="z",D.render(D);W=m.layer0.ctx;W.globalAlpha=1;W.globalCompositeOperation="source-over";W.drawImage(m.draw,0,0);x.deselectAll();q()}else r.Canvas.blip(a.draw.canvas);E&&(D.seed=r.Random.seed())}else!1===a.rendering&&F&&(a.rendering=!0,h())}}}};
this.reset=function(b){var d=a.deviceLastRecord,c=a.deviceLastRecordId;(b=b||c)&&d&&(d=d.brush,delete a.batches[b],delete a.intervals[b],delete a.position[b+"x"],delete a.position[b+"y"],delete d.cancelListener,delete d.cancelPointerUp,delete d.timestamp,delete d.current,delete d.event,delete d.self)};var h=function(){if(-1===a.dragging)a.rendering=!1;else{!1===a.dragging&&(a.dragging=-1);var b=a.deviceLastRecord,d=b&&b.brush;if(d)if(d&&(d.dirtyCheck||d.speed)){d.ctx=a.ctx;d.active=a.draw;d.cache=
a.cache;var f,g=a.batches;f=c.zoom*c.pixelRatio;var l=d.prepare();l.save();l.scale(f,f);y(l,g);l.restore();d.postprocess&&d.postprocess();a.rendering=!0;requestAnimationFrame(h);if(d.speed&&d.isFromBrowser)for(var m in a.intervals)if(f=g[m])if(l=a.intervals[m],!(0<f.length)){b.brush.state="move";var k={cmd:"L",x:l.x,y:l.y};e.net.dataChannel&&e.net.dataChannel.send(["brush",d.type,"move,"+l.x+","+l.y+","+m,eventjs.metaKey,eventjs.shiftKey]);f.push(k);f.path.push(k)}}else requestAnimationFrame(h);else requestAnimationFrame(h),
console.log("brush missing:",a.device,a.device.brush)}},g=function(b,d,c){var e=this.brush;if(e){this.dirtyCheck&&x.copyAttributes(a.attributes,this,e);var f=e.interval||this.interval;e.ctx=b;e.active=a.draw;e.cache=a.cache;e.isGhost=!1;e.isRecording=!1;e.interval=f;e.bbox=this.bbox;e.state=e.state||"up";var g={};g[this.finger]=this.data;g[this.finger].interval=f;if(!c){c=this.bbox;var h=c.scale,l=h.x,h=h.y;d.matrix.x=0;d.matrix.y=0;0>l&&(d.matrix.x-=c.width*l);0>h&&(d.matrix.y-=c.height*h);d.matrix.y+=
c.padding*(1-l);d.matrix.y-=c.padding*(1-h);d.apply(b,!0)}b=e.prepare();y(b,g,e,this);e.interval=f;e.postprocess&&e.postprocess()}else console.log("brush missing:",e,this)},y=function(b,d,c,e){var f=l.bezierPointAtTime,g=a.position,h=a.intervals,m=a.deviceProxy,r,y,x;for(x in d){e||(b=m[x]||a.device,c=b.brush);r=c.opacity/100;var v=c.type;y=c.isEraser;var u="disco"===c.composite,w=c.isRecording,q=c.isGhost,N=p.getComposite(c.composite,!k.useSafeComposite[v]||!w),V=!!c.draw;c.dirtyCheck=!1;var P=d[x],
Q=P.length;if(0!==Q&&(P.interval=P.interval||0,c.path=P.path||P,c.finger=x,b=c.renderTo||c.ctx)){b.save();k.useLocalAlpha[v]&&(b.globalAlpha=r);b.globalCompositeOperation=y&&!w?"source-over":N;if(c.render)v=P[Q-1],c.cmd=v&&v.cmd,c.render(e||c),c.interval=P.interval;else for(N=0;N<Q;N++){var O=w||q?P.shift():P[N],T=c.x=O.x,S=c.y=O.y,X=c.cmd=O.cmd;if("M"===X)r=g[x+"x"]=T,y=g[x+"y"]=S,P.increment=0,c.px=r,c.py=y,w&&++a.gestures,c.drawStart&&(c.interval=++P.interval,c.drawStart());else{if("z"===X){c.drawEnd&&
(c.interval=++P.interval,c.drawEnd());break}r=g[x+"x"];y=g[x+"y"];c.px=r;c.py=y}c.speed&&(h[x]=O);if(V){var ba=c.spacing,W=ba.min,Y=ba.max,U=T-r,$=S-y,ba=Math.sqrt(U*U+$*$)+1;if(!(ba<W&&"M"!==X)){X=U/ba||0;W=$/ba||0;$=Y||1;Y=Y<ba-1?Y:ba-1;if(U=k.useBezierSmooth[v]&&!w){var ha=1,ia=P[N+1],ma=O,sa={x:r,y:y},ta=P[N-2];if(!(ia&&ma&&sa&&ta))continue}for(var O=r,ja=y;Y<ba;Y+=$)U?(S=f(r,y,sa.x+(ha*ma.x-ha*ta.x)/6,sa.y+(ha*ma.y-ha*ta.y)/6,ma.x+(ha*sa.x-ha*ia.x)/6,ma.y+(ha*sa.y-ha*ia.y)/6,ma.x,ma.y,Y/ba),
T=S.x,S=S.y):(T=r+X*Y,S=y+W*Y),u&&(b.globalCompositeOperation=0===P.interval%2?"lighter":"source-over"),c.x=T,c.y=S,c.px=O,c.py=ja,c.interval=++P.interval,c.draw(P.increment),O=T,ja=S;g[x+"x"]=T;g[x+"y"]=S;P.increment++}}}b.restore()}}};return w.init(this)})})(sketch);
(function(q){q.registerToolkit("brush.arrow",function(e,c,a,b){var k=c.toolkit,u=e.util,m=e.vector.Path;this.construct=function(a,b){this.diameter=isFinite(a.diameter)?a.diameter:30;this.ghostDistance=isFinite(a.ghostDistance)?a.ghostDistance:10;this.lineRecordRotate=this.lineRecord=!0;this.mode=a.mode;b(this)};this.prepare=k.prepareBrush;this.postprocess=function(){"up"!==this.state&&this.state||u.Canvas.clear(this.active.canvas)};this.render=function(){var a=this.path.length,b=this.renderTo,c=this.fill.__colors,
c=c[1%c.length],e=this.diameter;b.save();b.beginPath();this.isRecording&&(b.globalAlpha=this.opacity/100);b.lineCap="miter";b.miterLimit=20;b.lineWidth=e/4;b.strokeStyle=c;b.fillStyle=c;c=this.path[0];a=this.path[a-1];if(c&&a){b.beginPath();var v=this.mode||1,e=e/2,l=e/m.lineDistance(c,a),f=Math.min(1.5,e/4*.25),h=.5*e;if(1===v)var g=m.pointAtTimeRadius(c,a,1,h),y=m.pointAtTimeRadius(c,a,1,-h),u=m.pointAtTimeRadius(c,a,-l,-f),s=m.pointAtTimeRadius(c,a,-l,f);else 2===v?(s=m.pointAtTimeRadius(c,a,0,
h),u=m.pointAtTimeRadius(c,a,0,-h),y=m.pointAtTimeRadius(c,a,1+l,-f),g=m.pointAtTimeRadius(c,a,1+l,f)):(g=m.pointAtTimeRadius(c,a,1,h),y=m.pointAtTimeRadius(c,a,1,-h),u=m.pointAtTimeRadius(c,a,0,-h),s=m.pointAtTimeRadius(c,a,0,h));f=y;b.moveTo(g.x,g.y);b.lineTo(f.x,f.y);b.lineTo(u.x,u.y);b.lineTo(s.x,s.y);b.closePath();if(1===v||3===v)g=m.pointAtTimeRadius(c,a,1-l,e),s=m.pointAtTimeRadius(c,a,1-l,-e),u=m.pointAtTimeRadius(c,a,1+l,0),d(b,g,u,s);if(2===v||3===v)g=m.pointAtTimeRadius(c,a,l,e),s=m.pointAtTimeRadius(c,
a,l,-e),u=m.pointAtTimeRadius(c,a,-l,0),d(b,s,u,g);k.applyStyle(b,this,0,0,!0,!1);this.useCache&&k.drawFromCache(this);b.restore()}};var d=function(a,b,d,c){a.moveTo(b.x,b.y);a.lineTo(d.x,d.y);a.lineTo(c.x,c.y);d=m.lineDistance(b,c);b=m.pointAtTimeRadius(b,c,.5,.25*d);a.lineTo(b.x,b.y);a.closePath()};this.construct(a,b)})})(sketch);
(function(q){q.registerToolkit("brush.calligraphy",function(e,c,a,b){var k=c.toolkit;this.prepare=k.prepareBrush;this.construct=function(a,b){this.diameter=isFinite(a.diameter)?a.diameter:30;this.spacing=a.spacing||[0,0];b(this)};this.draw=function(){var a=this.diameter,b=this.useCache,d=this.renderTo;d.save();d.globalCompositeOperation="source-over";d.beginPath();d.lineJoin="round";d.lineCap="round";d.translate(-a/2,0);d.moveTo(this.px,this.py);d.lineTo(this.px+a,this.py-a/2);d.lineTo(this.x+a,this.y-
a/2);d.lineTo(this.x,this.y);d.closePath();var a=this.fill.__colors||[],c=a.length,a=a[Math.abs((2*this.interval+1)%(2*c)-c)];d.fillStyle=a;d.fill();d.strokeStyle=a;d.stroke();b&&k.drawFromCache(this);d.restore()};this.construct(a,b)})})(sketch);
(function(q){q.registerToolkit(["brush.eraser","brush.paintbrush"],function(e,c,a,b){var k=c.toolkit,u=c.render;this.bitmap={};this.prepare=k.prepareBrush;this.construct=function(a,b){this.diameter=isFinite(a.diameter)?a.diameter:30;this.blur=isFinite(a.blur)?a.blur:10;this.spacing=a.spacing||[0,0];this.useSmooth=!0;b(this)};this.render=function(a){var b=this.isRecording,x="eraser"===this.type,p=this.path.length,w=this.useTrackGradient,r=this.useCache,v=this.renderTo,l=c.pixelRatio,f=this.diameter,
h=this.blur*l,g=f+h,y=0,q=0,s=k.getBBox(this);if(h)if(a&&a.bbox)var g=u.cache.padding,A=a.bbox.scale.x,q=(a.bbox.width-h)*l,q=q+g/Math.abs(A);else{A=c.zoom;y=c.viewport;q=y.height;a=y.width;var H=this.x*A,I=this.y*A,J=a/A+f/2,y=q/A+f/2;y>J?(y=0,a-H>a/2&&(J*=-1),J*=l):(J=0,q-I>q/2?(y-=Math.min(0,s.y1+g),y*=-1):y-=Math.min(0,y-(s.y2+g)),y*=l);q=J}v.save();v.beginPath();b&&(v.globalAlpha=this.opacity/100);if(b&&!this.useSmooth)for(b=0;b<p;b++)g=this.path[b],"M"===g.cmd?(v.moveTo(g.x,g.y),v.lineTo(g.x+
.1,g.y+.1)):v.lineTo(g.x,g.y);else h&&v.translate(-q/l,-y/l),e.vector.catmullRomSpline({path:this.path,tension:0,ctx:v});x?x=c.backgroundRaw:(x=this.fill.__colors||[0,"#000"],x=x[1%x.length]);h?(v.strokeStyle="#000",v.shadowOffsetX=q*A,v.shadowOffsetY=y*A,v.shadowBlur=Math.abs(h*A),v.shadowColor=x&&x.indexOf?x:"#000"):v.strokeStyle=x;v.lineCap="round";v.lineJoin="round";v.lineWidth=f;v.stroke();w&&k.trackGradient(v,this,q/l,y/l,s);r&&k.drawFromCache(this);v.restore()};this.construct(a,b)})})(sketch);
(function(q){q.registerToolkit("brush.pencil",function(e,c,a,b){var k=c.toolkit;this.construct=function(a,b){this.diameter=isFinite(a.diameter)?a.diameter:30;this.spacing=a.spacing||[0,0];this.useSmooth=!0;b(this)};this.prepare=k.prepareBrush;this.render=function(a){a=this.path.length;var b=this.diameter,d=this.useCache,c=this.renderTo;c.save();c.beginPath();this.isRecording&&(c.globalAlpha=this.opacity/100);if(this.isRecording&&!this.useSmooth)for(var p=0;p<a;p++){var q=this.path[p];"M"===q.cmd?
(c.moveTo(q.x,q.y),c.lineTo(q.x+.1,q.y+.1)):c.lineTo(q.x,q.y)}else e.vector.catmullRomSpline({path:this.path,tension:0,ctx:c});c.lineCap="round";c.lineJoin="round";c.lineWidth=b;k.applyStyle(c,this,0,0,!1,!0);d&&k.drawFromCache(this);c.restore()};this.construct(a,b)})})(sketch);
(function(q){q.registerToolkit(["brush.streamer","brush.pen"],function(e,c,a,b){var k=c.render,q=c.toolkit,m={},d=function(a,b,d,c,e){if(b=m[b]){e=.75*b.thickness;var l=b.cos,f=b.sin,h=b.color;a.beginPath();a.fillStyle=h;a.strokeStyle=h;a.arc(d,c,e,0,2*Math.PI,!0);a.moveTo(b.x+l,b.y+f);a.lineTo(d+.75*l,c+.75*f);a.lineTo(d-.75*l,c-.75*f);a.lineTo(b.x-l,b.y-f);a.lineTo(b.x+l,b.y+f);a.fill();a.stroke()}};this.construct=function(a,b){this.spacing=a.spacing||[0,0];this.diameter=a.diameter||10;b(this)};
this.prepare=function(){this.useTrackGradient="color"!==this.fill.type;this.useBlendMode=!e.style.isSourceOver[this.composite];if(this.isRecording){if(this.useBlendMode||100!==this.opacity){var a=this.renderTo=this.active;"down"===this.state&&this.useBlendMode&&k.prepareGCO(this.composite,a.canvas);this.useCache=!0;a=this.cache}else this.useCache=!1,a=this.active;return this.renderTo=a}this.useCache=!1;return this.renderTo=this.ctx};this.drawStart=function(){var a=this.finger,b=this.renderTo;b.lineCap=
"round";b.lineJoin="round";this.fill.mode="cycle";a=m[a]={};a.x=this.x;a.y=this.y;a.px=this.x;a.py=this.y;a.vectorx=0;a.vectory=0;a.cos=0;a.sin=0;a.thickness=0;a.rotation=Math.PI/2;a.color="#000"};this.draw=function(){var a=this.finger,b=this.fill.__colors||[],c=m[a];if(c&&b){var e=this.useCache,k=b.length,b=b[Math.abs((2*this.interval+1)%(2*k)-k)],k=this.renderTo,l=this.x-c.px,f=this.y-c.py;if(5<Math.abs(l)||5<Math.abs(f)){c.color=b;0>l*c.vectorx+f*c.vectory&&(d(k,a,this.px,this.py,this),c.x=c.px=
this.px,c.y=c.py=this.py,c.rotation+=Math.PI,c.thickness*=.75);c.x+=.5*(this.x-c.x);c.y+=.5*(this.y-c.y);var a=c.x-c.px,h=c.y-c.py,g=Math.sqrt(a*a+h*h),y=this.diameter,z=Math.max(y.min,Math.min(y.max,g)),a=0!==g?Math.PI/2+Math.atan2(h,a):0,y="pen"===this.type?(.001+Math.max(0,y.max-z)+y.min)/2:(.001+z)/2,y=c.thickness+.42*(y-c.thickness),s=Math.sin(c.rotation),A=Math.cos(c.rotation),H=Math.sin(a),I=Math.cos(a),z=c.thickness*s,h=c.thickness*A,H=y*H,I=y*I,s=.33*g*s,J=-.33*g*A,g=c.px+h+s,A=c.py+z+J,
s=c.px-h+s,J=c.py-z+J;k.beginPath();k.fillStyle=b;k.strokeStyle=b;k.moveTo(c.px+h,c.py+z);k.quadraticCurveTo(g,A,c.x+I,c.y+H);k.lineTo(c.x-I,c.y-H);k.quadraticCurveTo(s,J,c.px-h,c.py-z);k.lineTo(c.px+h,c.py+z);k.fill();k.stroke();c.px=c.x;c.py=c.y;c.rotation=a;c.thickness=y;c.vectorx=l;c.vectory=f;c.cos=I;c.sin=H;e&&q.drawFromCache(this)}}};this.drawEnd=function(){var a=this.finger;"undefined"!==typeof m[a]&&(d(this.ctx,a,this.x,this.y,this),delete m[a])};this.construct(a,b)})})(sketch);
(function(q){q.registerToolkit(["brush.crayon","brush.stamp"],function(e,c,a,b){var k=this,q=c.toolkit,m=e.util;k.bitmap={};k.getStampResource=function(a,b,d){e.assets.getItem(a)?b(e.assets.getItem(a)):e.assets.add({type:"image",src:a,onerror:d,onload:function(a,d){b(d)}})};k.prepare=q.prepareBrush;k.construct=function(a,b){k.rand=new m.Random(k.seed||1);k.diameter=a.diameter||20;k.speed=a.speed||void 0;k.rotate=a.rotate||{min:0,max:0};k.scale=a.scale||{min:1,max:1};k.translate=a.translate||{min:0,
max:0};k.spacing=a.spacing||d(k.diameter);k.pollock=a.pollock||!1;k.src=a.src||void 0;k.resource=new Image;k.src?k.getStampResource(k.src,function(a){k.resource=a;k.resource.loaded=!0;k.resource.error=!1;b(k)},function(){k.resource.loaded=!0;k.resource.error=!0;b(k,"404")}):b(k)};k.drawStart=function(){k.scaleX=k.bbox&&k.bbox.scale.x||1;"crayon"===k.type&&(k.fill.mode="cycle",k.spacing=d(k.diameter),k.src=void 0,k.rotate={min:1,max:360});var a=k.finger,b=k.rand=new m.Random(k.seed||1);k.rr=b.toDouble();
k.sr=b.toDouble();k.bitmap[a]=k.create();k.isRecording&&k.useGlobalAlpha&&(a=k.cache,a.canvas.width=k.ctx.canvas.width,a.canvas.height=k.ctx.canvas.height)};k.draw=function(){var a=k.renderTo,b=k.ratio,d=k.finger;if(k.bitmap[d]){var d=k.bitmap[d],c=d.canvas.width,e=d.canvas.height,l=c/2,f=e/2;if(l&&f){var h=k.translate.min||1E-5,g=k.translate.max||1E-5;if(0===h&&0===g)var y=0,h=0;else y=(g-h)*k.rand.toDouble()+h,h=(g-h)*k.rand.toDouble()+h;var g=k.scale.min,q=k.scale.max,b=1===g&&1===q?b||1E-5:((q-
g)*k.rand.toDouble()+g)*b||1E-5,g=0,s=k.rotate.min,q=k.rotate.max;0!==s&&0!==q&&(s<=q?g=(q-s)*k.rand.toDouble()+s:(g=s-q,s=(360-g)*k.rand.toDouble(),g=s>q?s+g:s));k.pollock||a.save();"cycle"===k.fill.mode&&(q=k.fill.__colors||[],s=q.length,q=q[Math.abs((2*k.interval+1)%(2*s)-s)],q!==d.fillStyle&&(d.fillStyle=q,d.fillRect(0,0,c,e)));a.translate(k.x-l*b,k.y-f*b);1!==b&&a.scale(b,b);0!==g&&(a.translate(l,f),a.rotate(g*m.DEG_RAD),a.translate(-l,-f));a.translate(1*y/b,1*h/b);a.drawImage(d.canvas,0,0);
k.decorate&&(a.beginPath(),a.fillStyle=d.fillStyle,sketch.vector.shape.star(a,0,0,10,5,2),a.fill());k.pollock||a.restore();k.isRecording&&k.useGlobalAlpha&&(k.active.save(),k.active.globalAlpha=k.opacity/100,k.active.globalCompositeOperation="copy",k.active.drawImage(a.canvas,0,0),k.active.restore())}}};k.drawEnd=function(){delete k.bitmap[k.finger]};k.create=function(){var a=k.finger,b=k.diameter*c.pixelRatio,d=Math.round(k.scale.max*b);if(!a||!d)return console.warn("stamp error",a,d);if(k.bitmap[a])var m=
k.bitmap[a],v=m.canvas;else v=e.util.Canvas(),m=v.ctx;if(k.src){b=k.resource;if(b.error)return m;if("clipart"===b.type)var l=b.viewBox,f=l[2],h=f-l[0],l=l[3]-l[1];else h=b.width,l=b.height;h>d&&(l*=d/h,h=d);l>d&&(h*=d/l,l=d);var g=Math.sqrt(h*h+l*l);g>d&&(d/=g,h*=d,l*=d);v.width=h;v.height=l;"clipart"===b.type?(d=h/f,v=(new e.vector.Transform).scale(d),b.render({ctx:m,matrix:v.matrix})):m.drawImage(b,0,0,h,l)}else{h=v.width=d;l=v.height=d;v=m.getImageData(0,0,h,l);f=v.data;d=25*b;b/=2;for(g=0;g<d;g++){var y=
k.rand.toDouble()*b,q=1.5-y/b,s=2*k.rand.toDouble()*Math.PI,u=Math.sin(s)*y+b+.5>>0,y=Math.cos(s)*y+b+.5>>0;u>=h||0>=u||y>=l||0>=y||(f[4*(y*h+u)+3]=255*q)}m.putImageData(v,0,0)}m.globalCompositeOperation="none"===k.fill[k.fill.type]?"source-atop":"source-in";m.fillStyle=e.style.getStyle("fill",m,0,0,h,l,k);m.fillRect(0,0,h,l);g=Math.sqrt(h*h+l*l);k.ratio=1/(g/k.diameter);return k.bitmap[a]=m};var d=function(a){a=Math.sqrt(a);return{min:a,max:a}};k.construct(a,b)})})(sketch);
(function(q){var e=String.fromCharCode(65279);q.registerToolkit("text",function(c,a){var b=this,k=a.toolkit.area,q=a.canvas2d,m=c.feature,d=a.render,x=a.scene,p=a.toolkit,w=c.util,r=c.vector;b.container=document.createElement("div");b.container.className="sk-textarea-wrap";b.id="text";b.units=m.tools.text.units||m.tools.units;b.defaultWidth=300;b.defaultHeight=100;b.minWidth=15;b.minHeight=15;b._attributes={content:"string",fontFamily:"string",fontSize:"number",fontStyle:"string",fontVariant:"string",
fontWeight:"string",letterSpacing:"number",lineHeight:"number",textAlign:"string",textDecoration:"string",textShadow:"string",textTransform:"string",whiteSpace:"string"};var v=w.clone(b._attributes);b.attributes=w.mixin(c.attrs.__styledObject,v);b.show=k.show;b.hide=k.hide;b.enable=function(){var b=p.select;a.tool!==b&&b&&b.enable({cursor:!0,searchParam:{toolkit:m.tools.text.useSearch,throwInvalid:!0}})};b.disable=function(){b.blur();var d=p.select;a.tool!==d&&d&&d.disable({cursor:!0})};b.loadResource=
function(a){var d=a.layer,c=a.onerror,e=a.onload;b.loadFont({fontFamily:d.fontFamily||"Arial",onerror:function(a){c&&c(d,a)},onload:function(){d.dirtyCheck=!0;d.render=l;var a=d.bbox;a.owidth||(a.owidth=a.width);a.oheight||(a.oheight=a.height);e&&e(d)}})};var l=function(d,c,e){if(!a.__editing||this.id!==a.selection.id){c=x.copyAttributes(b._attributes,this,{ctx:d,composite:this.composite,opacity:this.opacity,textMetrics:this.__textMetrics,useHighRes:e});this.fill&&this.fill.enabled&&(c.fill=this.fill);
this.stroke&&this.stroke.enabled&&(c.stroke=this.stroke);var f=c.bbox=w.clone(this.bbox),g=f.width,h=f.height,l=f.scale,m=l.x,l=l.y;f.rotate=0;f.x=0;f.y=0;e||(e=0>m?-g*m:0,h=0>l?-h*l:0,(e||h)&&d.translate(e,h));this.__textMetrics=r.text.drawLineBreaks(c)}};b.loadFont=function(a){"string"===typeof a&&(a={fontFamily:a});var b=a.onload,d=a.onerror,e=a.fontFamily;a=function(a){a?(a="&ldquo;"+e+"&rdquo; font-family unavailable.",d&&d(a)):b&&b()};if(r.text.detectFont(e))b&&b();else if(c.lib.text.byName[e]){var f=
w.clone(c.lib.text.byName[e]);f.filepath=c.lib.text.getSrc(f);f.useLoader=!0;r.text.attach(f,a)}else r.text.attachFromGoogleAPI(e,a)};var f=function(b,c){if(c=c||a.selection.item)c.dirtyControl=!0,d.clean("toolkit.text."+b)},h=function(){var b=a.selection.item;b&&(x.updateTransform(b),k.renderControls(b.zIndex,!0))};b.keydown=function(d){d=d.keyCode;if(eventjs.metaKey){var c=a.selection.item;86===d||88===d||90===d?setTimeout(function(){b.updateObjectSize();h()},25):c&&(85===d?g(c,"textDecoration",
"underline","none"):73===d?g(c,"fontStyle","italic","normal"):66===d&&g(c,"fontWeight","bold","normal"))}};var g=function(a,b,d,c){a[b]=a[b]===c?d:c};b.keyup=function(a){if(27===a.keyCode)x.deselectAll(),h();else if(eventjs.metaKey&&(88===a.keyCode||86===a.keyCode))b.updateObjectSize(),h();else if(8===a.keyCode){a=b.textarea;var d=b.cleanText(b.textarea.textContent),c=r.text.getRange();if(c){var e=d.substr(0,c.startOffset),d=d.substr(c.endOffset);b.textarea.textContent=e+d;(e=e.length)&&r.text.setRange(a,
e,e);b.updateObjectSize();h()}}};b.keypress=function(d){var c=a.selection.item;if(void 0!==c&&0!==d.which&&8!==d.keyCode&&!eventjs.metaKey){eventjs.prevent(d);var e=b.textarea,f=b.cleanText(b.textarea.textContent);d=b.cleanText(String.fromCharCode(d.charCode||d.keyCode));if("pre-nowrap"!==c.whiteSpace||10!==d.charCodeAt()){var g=r.text.getRange(b.textarea);g&&(c=f.substr(0,g.startOffset),f=f.substr(g.endOffset),f=b.cleanText(c+d+f),b.textarea.textContent=f,(f=b.cleanText(c+d).length)&&r.text.setRange(e,
f,f),b.updateObjectSize(),h())}}};b.record=function(g,h,l){c.client.mobile&&eventjs.prevent(g);if("eyeDropper"!==c.ui.colorPicker.state){var r=b.style;if(void 0===r.render)h.pause(),b.loadResource({layer:b.style,onload:function(){h.resume();b.record(g,h)}});else{var y=!!h.layer,v="down"===h.state,z="up"===h.state;v?a.__interacting=!0:z&&(a.__interacting=!1);!0===y?void 0===b.textarea&&b.createTextarea():v&&b.blur();var E=a.zoom*a.pixelRatio,F=a.zoom,C=(F-1)/F,G=a.scrollLeft*C,L=a.scrollTop*C,C=h.start.x/
F+G,K=h.start.y/F+L;h.y=h.y/F+L;h.x=h.x/F+G;F=r.bbox;F.x=Math.min(C,h.x)-1*q.x/E;F.y=Math.min(K,h.y)-1*q.y/E;F.width=Math.abs(C-h.x)||1;F.height=Math.abs(K-h.y)||1;F.units=b.units;if(v)l=h.layer||{},z=x.clone(a.config.text,!0),F={type:"text",fill:new c.style.Fill(z.fill),stroke:new c.style.Stroke(z.stroke),opacity:z.opacity||100,composite:z.composite,render:b.style.render,content:l.content||"",bbox:w.clone(F)},x.copyAttributes(b.attributes,z,F),x.copyAttributes(b.attributes,l,F),h.layer&&x.copyRules(h.layer,
F),r=x.addObject(F,r,h.layer?!1:!0),b.textarea.textContent=r.content||e,!1===y&&(y=a.contexts.active,l=y.ctx,w.Canvas.blip(y),x.updateTransform(r),d.layer(l,r),k.renderControls(a.selection.idx));else if(r=a.selection.item){b.dragging=!0;v=r.bbox;v.x=F.x;v.y=F.y;v.width=F.width;v.height=F.height;r.dirtyCheck=!0;r.dirtyTransform=!0;E=p.getDimensionConstraint(r,null,!1);v.x=F.x-(h.x<h.start.x?E.width-v.width:0);v.y=F.y-(h.y<h.start.y?E.height-v.height:0);v.width=v.owidth=E.width;v.height=v.oheight=E.height;
v.viewBox=[0,0,v.width,v.height];h.layer&&w.mixin(h.layer,r);if(z){b.dragging=!1;if(F.width<b.minWidth||F.height<b.minHeight)if(m.placement.click||m.tools.text.clickToPlace)F=a.bounds.width/3/a.zoom,E=2*r.fontSize/a.zoom,r.fontSize/=a.zoom,F=v.width=Math.max(b.defaultWidth,F),E=v.height=Math.max(b.defaultHeight,E),v.viewBox=[0,0,F,E];else{y=a.selection.id;x.deselectAll();x.removeById(y);f("record",r);return}!1===y&&(k.inGenesis=a.selection.id,k.show(b.style),b.focus());v.owidth=v.width;v.oheight=
v.height;b.updateObjectSize()}!1===y&&f("sk.text.record");z&&l&&l()}}}};b.focus=function(){b.textarea.focus()};b.blur=function(){b.textarea.blur()};b.selectAll=function(a){a=a||b.textarea;r.text.range.selectAll(a.firstChild)};b.updateBBox=function(){var d=a.selection.item;void 0!==d&&(d.content&&(b.textarea.textContent=b.cleanText(d.content)),b.updateCSSTransform(d),f("updateBBox",d))};b.updateObjectSize=function(d){var c=d?a.__editing&&d.id===a.selection.item?b.cleanText(b.textarea.textContent):
d.content:b.cleanText(b.textarea.textContent);d=d||a.selection.item;if(void 0!==d){var e=r.text.getFontStyle(d),f=c?r.text.format(c,d):" ",g=d.scale?d.scale.max:1,h=((d.diameter||0)+(d.lineWidth||0))*g,l=d.bbox,g=l.scale;if("pre-nowrap"===d.whiteSpace){var p=l.owidth,e=1.1*r.text.measureTextWidth(f,e);l.viewBox[2]=l.owidth=l.width=e;l.x+=(p-e)/2*g.x;d.dirtyCheck=!0}g=x.copyAttributes(b._attributes,d,{fillStyle:d.fillStyle,strokeStyle:d.strokeStyle,lineHeight:d.lineHeight,lineWidth:d.lineWidth,letterSpacing:d.letterSpacing,
bbox:l});g.content=f;f=r.text.drawLineBreaks(g);m.tools.text.useCanvasRender&&d.content!==c&&(d.dirtyCheck=!0);d.content=c;d.__textMetrics=f;c=l.owidth+h/2;h=f.height+h/2;l.height!==h&&(d.dirtyCheck=!0,d.dirtyControl=!0,l.height<h&&k.inGenesis||!k.inGenesis)&&(l.width=c,l.height=h,l.viewBox=[0,0,c,h],b.container.style.height=h+"px");b.updateCSS(d)}};var y=String.fromCharCode(32),z=String.fromCharCode(160);b.cleanText=function(a){return a.split(e).join("").split(z).join(y).split("&nbsp;").join(y).split("<br>").join("\n").split("<div>").join("\n").split("\r").join("\n").replace(/&lt;/g,
"<").replace(/&gt;/g,">").replace(/&quot;/g,"'").replace(/&amp;/g,"&").replace(/(<([a-z/]+)>)/ig,"")||e};b.createTextarea=function(){if(b.textarea){var a=b.textarea.style.cssText,d=b.textarea.textContent;b.textarea.parentNode.removeChild(b.textarea);b.styleCode.parentNode.removeChild(b.styleCode)}else c.ui.tooltip&&c.ui.tooltip.add(b.container,""),d=a="";var e=b.styleCode=document.createElement("style");e.type="text/css";b.container.appendChild(e);e=b.textarea=document.createElement("div");e.className=
"textarea";e.setAttribute("contentEditable","true");e.style.cssText=a+";"+r.text.CSSWhiteSpace.preWrap;e.textContent=d;b.container.appendChild(e);eventjs.add(e,"drag",eventjs.stop);eventjs.add(e,"mouseup",eventjs.stop);eventjs.add(e,"keydown",b.keydown);eventjs.add(e,"keypress",b.keypress);eventjs.add(e,"keyup",b.keyup);return e};b.updateCSS=function(a){b.updateCSSStyle(a);b.updateCSSTransform(a)};b.updateCSSTransform=function(c){if(void 0===c&&(c=a.selection.item,void 0===c))return;if(!c.bbox)return console.log("meh");
if(c.id>w.INFINITY_MINUS_8bit||a.selection.items[c.zIndex]){var e=a.pixelRatio,f=a.zoom,g=a.scrollLeft*(f-1),h=a.scrollTop*(f-1),l=c.bbox,m=isFinite(c.opacity)?c.opacity:100,k=d.cache.padding/2,p=l.width,y=l.height,v=l.rotate,x=l.scale.x+1E-7,z=l.scale.y+1E-7,R=l.x-(p-p*x)/2,N=l.y-(y-y*z)/2,l=Math.max(0,p-0)*f,k=Math.max(0,y-k-0)*f,g=R*f+q.x/e-g,e=N*f+q.y/e-h,m=m/100,y=a.viewport,f=b.container.style,p=Math.min(l,y.width-g),y=Math.min(k,y.height-e);f.padding="0px";f.opacity=m;f.left=g+"px";f.top=e+
"px";f.width=p+"px";f.height=y+"px";b.textarea.style.width=l+"px";b.textarea.style.height=k+"px";r.text.setFontStyle(c,b.container,a.zoom);f.transform=f.msTransform=f.OTransform=f.MozTransform=f.WebkitTransform="rotate("+v+"deg) scale("+x+","+z+")";f.transformOrigin=f.msTransformOrigin=f.OTransformOrigin=f.MozTransformOrigin=f.WebkitTransformOrigin="50% 50%"}};b.updateCSSStyle=function(){var d=a.selection.item;if(void 0!==d&&void 0!==d.fill){var e=b.textarea||b.createTextarea(),f=d.fill.type,g="webkitFilter"in
e.style,h="textShadow"in e.style;if("webkitBackgroundClip"in e.style&&g){switch(f){case "color":var l="background: "+d.fill.color;break;case "gradient":l=c.style.getGradientCSS(d.fill.gradient,"left");break;case "pattern":l="background: url("+c.loc.getMediaUrl(d.fill.pattern)+")"}b.styleCode.innerHTML="\t\t\t\tdiv.sk-textarea-wrap div.textarea { "+l+" }\t\t\t";e.setAttribute("data-content",e.innerHTML);b.container.style.background=d.background&&d.background.color||"transparent";e.style.textShadow=
"none";e.style.backgroundClip="text";e.style.webkitBackgroundClip="text";e.style.textFillColor="transparent";e.style.webkitTextFillColor="transparent";d=c.style.getComposite();e.style.backgroundBlendMode=d;e.style.webkitBackgroundBlendMode=d}else{switch(f){case "color":l=d.fill.color;break;case "gradient":case "pattern":l="#000"}h?(e.style.color=l,e.style.textShadow="none"):e.style.color=l}}};b.style={bbox:{x:200,y:18,width:400,height:470,rotate:0,scale:{x:1,y:1}}};b.createTextarea();b.container.appendChild(b.textarea);
a.container.appendChild(b.container);return p.init(b)})})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){function e(){if(document.createRange){c();var a=document.createElement("span");document.body.appendChild(a);p.spaceOffset=1;var d=p;var e=q.client;e?a=e.safari||e.chrome?0:1:(e=document.createRange(),a.textContent="d\u2014d",a.className="wrap",a.style.cssText="display: block; width: 1.6em; "+p.CSSWhiteSpace.preWrap+" font: bold 22px arial;",e.setStart(a.firstChild,0),e.setEnd(a.firstChild,a.textContent.length),e=e.getClientRects(),document.body.removeChild(a),a=2<e.length?1:0);d.useWrapSpace=
a;p.mOffset=p.useWrapSpace?0:1;return p.getLineBreaks=b}return document.body.createTextRange?(c(),p.getLineBreaks=k):p.getLineBreaks=u}function c(){p.container||v();var a=document.createElement("span");a.style.cssText=p.CSSWhiteSpace.preWrap;a.className="lineBreakData";p.container.appendChild(a);p.elementContent=a}function a(a){p.elementContent||c();var b=p.elementContent;b.style.display="block";b.style.width=a.width+"px";b.style.font=a.font;b.style.letterSpacing=(a.letterSpacing||0)+"px";b.style.textAlign=
a.textAlign||"left";b.style.textDecoration=a.textDecoration||"none";b.style.textTransform=a.textTransform||"none";return b}function b(b){var d=a(b);d.innerHTML=b.content;b=d.firstChild||d;var c=document.createRange();c.setStart(b,0);c.setEnd(b,0);var e=1,f=b.textContent,g=f.length,h=[],l=0,m=c.getClientRects();if(0===m.length)return{data:h,lines:h.length,height:1,width:1};for(var k=m[m.length-1].top,r=p.spaceOffset,y=p.mOffset,v=d.offsetHeight,q=d.offsetWidth,u=[],x=[],z=function(a){h.push(a);x.push({data:u,
width:S.width});u=[]};f;){if(e>g){z(f);break}c.setStart(b,l);c.setEnd(b,e);e++;var m=c.getClientRects(),w=m.length,O=m[w-1],T=k!==O.top,S=T?m[Math.max(0,w-3)]||m[Math.max(0,w-2)]:O,m=e-1-l-r+y,m=f.substr(0,m).substr(-1),w=m.charCodeAt();m&&65279!==w&&u.push({character:m,width:S.width,height:S.height,left:S.left,top:S.top});T&&(e--,m=e-l-r+y,z(f.substr(0,m)),f=f.substr(m),l=e-r+y,k=O.top)}f&&10===f[f.length-1].charCodeAt()&&z("");d.style.display="none";return{data:h,lineMetrics:x,lines:h.length,height:v,
width:q}}function k(b){var d=a(b);d.innerHTML=b.content;b=document.body.createTextRange();for(var c=1,e=target.innerText,f=e.length,g=[],h=0,l=d.offsetHeight,m=d.offsetWidth;e;){if(c>f){g.push(e);break}b.moveToElementText(target);b.collapse(!0);b.moveEnd("character",c);b.moveStart("character",h);b.select();c++;1<b.getClientRects().length&&(c--,g.push(e.substr(0,c-h-1)),e=e.substr(c-h-1),h=c-1)}d.style.display="none";return{data:g,lines:g.length,height:l,width:m}}function u(a){function b(d){e.push(d);
d=p.measureText(d,a.font);k+=d.height;m=Math.max(d.width,m)}function d(){if(!(p.measureTextWidth(f,a.font)<=a.width)){for(var c=f.length,e=0,g=0,l=0;l<c;l++){var m=f.substr(e,++g).replace(y,"");p.measureTextWidth(m,a.font)>a.width&&(m=m.substr(0,m.length-1).replace(y,""),m.match(h)?(e=m.split(h),m=m[e[0].length],l-=e[1].length,b(e[0]+m)):m.match(" ")?(e=m.split(" "),l-=e.pop().length,b(e.join(" "))):b(m),e=l,g=1)}return f.substr(e,g+1)}}for(var c=a.content.split("\n"),e=[],f="",l,m=0,k=0,r=0;r<=c.length;r++){if(f){b(f);
if(r===c.length)break;f=""}for(var v=c[r],q=v.split(g),u=0,x=0;x<q.length+2;x++){var z=0>u-1?"":v.substr(u-1,1),w=q[x]||"";if(p.measureTextWidth(f+z+w,a.font)<=a.width)f+=z+w;else if(l=d())f=l+z+w;else{l=z.match(h)?z:"";if(f||z)p.measureTextWidth(f+l,a.font)>a.width?"\u2013"===l?w=f+l+w:(b(f),w=l+w):b(f+l);f=w}u+=w.length+1}}return{data:e,lines:e.length,height:k,width:m}}var m=q.util,d=q.lang,x=q.vector=q.vector||{},p=x.text=x.text||{};p.entities=function(a){return a.split(String.fromCharCode(160)).join(String.fromCharCode(32)).replace(/&/g,
"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")};p.format=function(a,b){if(b.textTransform)switch(b.textTransform){case "uppercase":a=a.toUpperCase();break;case "lowercase":a=a.toLowerCase();break;case "capitalize":a=a.replace(/^(.)|\s(.)/g,function(a){return a.toUpperCase()})}if(b.whiteSpace)switch(b.whiteSpace){case "normal":case "pre":case "pre-wrap":a=a.split(" ").join(String.fromCharCode(160));break;case "pre-nowrap":a=a.split("\n").join(" ").split(" ").join(String.fromCharCode(160));
break;case "pre-line":case "nowrap":a=a.replace(/\s{2,}/g," ")}return a};p.textTransform=function(a,b){switch(b){case "uppercase":return a.toUpperCase();case "lowercase":return a.toLowerCase();case "capitalize":return a.replace(/^(.)|\s(.)/g,function(a){return a.toUpperCase()});default:return a}};p.getMetrics=function(a,b){var d="ltr";window.getComputedStyle&&(d=window.getComputedStyle(document.body,"").direction);var c=p.measureTextHeight(a,b),e=p.measureTextWidth(a,b);return v({marginReset:!0,text:a,
callback:function(a){a.style.cssText="font: "+b+"; white-space: nowrap; display: block;";var f=p.image,g=f.offsetTop+1,h=g-c;a.style.cssText="font: "+b+"; white-space: nowrap; line-height: 0; display: block;";var l=f.offsetTop+1;a.style.verticalAlign="sub";var m=g-(f.offsetTop-c);a.style.verticalAlign="super";return{font:b,direction:d,ascent:g,descent:-h,height:c,width:e,textBaseline:{alphabetic:0,top:g,hanging:8*g/10,middle:l,ideographic:h,bottom:h,subScript:m,superScript:g-(f.offsetTop-c)},textAlign:{left:0,
start:-("ltr"===d)?0:e,end:-("ltr"===d)?e:0,right:-e,center:-e/2}}}})};p.measureText=function(a,b){return{width:p.measureTextWidth(a,b),height:p.measureTextHeight(a,b)}};p.measureTextWidth=function(a,b){return v({text:a+a+a,callback:function(a){a.style.cssText="font: "+b+"; white-space: nowrap; display: inline;";return a.offsetWidth/3}})};p.measureTextHeight=function(a,b){return v({text:"1<br>2<br>3<br>4<br>5<br>6<br>7",callback:function(a){a.style.cssText="font: "+b+"; white-space: nowrap; display: inline;";
return a.offsetHeight/7+.5>>0}})};p.textAlign=function(a,b){var d=window.getComputedStyle(document.body,"").direction,c=p.measureTextWidth(a,b);return v({text:a,callback:function(a){return{left:0,start:-("ltr"===d)?0:c,end:-("ltr"===d)?c:0,right:-c,center:-c/2}}})};p.textBaseline=function(a,b){var d=p.measureTextHeight(a,b);return v({marginReset:!0,text:a,callback:function(a){a.style.cssText="font: "+b+"; white-space: nowrap; display: block;";var c=p.image.offsetTop+1,e=c-d;a.style.cssText="font: "+
b+"; white-space: nowrap; line-height: 0; display: block;";return{alphabetic:0,top:c,hanging:8*c/10,middle:p.image.offsetTop+1,ideographic:e,bottom:e}}})};p.textBaselineTop=function(a,b){return v({text:a,callback:function(a){a.style.cssText="font: "+b+"; white-space: nowrap; display: block;";return 1.315*p.image.offsetTop}})};var w,r,v=function(a){var b=document.body;p.element||(p.parent=document.createElement("span"),p.text=document.createElement("span"),p.parent.appendChild(p.text),p.image=document.createElement("img"),
p.image.style.cssText="vertical-align: baseline; background: #000; width: 10px; height: 1px; display: inline;",p.image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",p.parent.appendChild(p.image),p.element=document.createElement("div"),p.element.className="metrics",p.element.appendChild(p.parent),p.container=document.createElement("div"),p.container.id="sketchapi-text-metrics",p.container.appendChild(p.element),b.insertBefore(p.container,
b.firstChild));if(a)if(p.text.innerHTML=a.text,p.element.style.cssText="display: block;",a.marginReset){a.setup&&1!==a.setup||(w=b.style.padding,r=b.style.margin,b.style.padding=0,b.style.margin=0);if(!a.setup)var d=a.callback(p.parent);a.setup&&2!==a.setup||(b.style.padding=w,b.style.margin=r,p.element.style.display="none");if(!a.setup)return d}else return d=a.callback(p.parent),p.element.style.display="none",d},l=p.getFontStyle=function(a){var b="";a.fontStyle&&(b+=a.fontStyle+" ");a.fontVariant&&
(b+=a.fontVariant+" ");a.fontWeight&&(b+=a.fontWeight+" ");a.fontSize&&(b+=a.fontSize+"px ");a.fontFamily&&(b+='"'+a.fontFamily+'"');return b};p.setFontStyle=function(a,b,d){d=d||1;var c=(a.fontSize||30)*d,e=a.textMetrics||a.__textMetrics;d=e?e.lineHeight*d+"px":Math.ceil((a.lineHeight||1)*c)+"em";b=b.style;b.fontStyle=a.fontStyle||"normal";b.fontVariant=a.fontVariant||"normal";b.fontWeight=a.fontWeight||"normal";b.fontSize=c+"px";b.fontFamily=a.fontFamily||"Arial";b.letterSpacing=(a.letterSpacing||
0)+"px";b.lineHeight=d;b.textAlign=a.textAlign||"center";b.textDecoration=a.textDecoration||"none";b.textTransform=a.textTransform||"none"};var f=1/(180/Math.PI);p.drawLineBreaks=function(b){var d=b.content;if(d){var c=l(b),e=b.ctx,g=b.bbox,h=b.textMetrics,m=b.fontSize||0,k=b.textAlign||"left",r=b.textDecoration||"none",y=b.textTransform||"none",v=b.letterSpacing||0,u=b.lineHeight||0,x=b.useShrinkToFit,z=b.useGrowToFit,w=b.useHighRes,V=!!b.stroke&&!!b.stroke.lineWidth,P=!!b.fill,d=p.format(d,b);if(!h||
!h.data){h={font:c,content:d,textTransform:y,textDecoration:r,lineHeight:u,letterSpacing:v,width:g.width};q.perf();if(x||z){c=a(h);c.innerHTML=d;d=a(h).offsetHeight;if(x&&d>g.height){for(;d>g.height&&!(1>m);)m-=5,c.style.font=l(b),d=c.offsetHeight;for(;d<g.height&&!(500<m);)m++,c.style.font=l(b),d=c.offsetHeight;m--}else if(z&&d<g.height){for(;d<g.height&&!(500<m);)m+=5,c.style.font=l(b),d=c.offsetHeight;for(;d>g.height&&!(1>m);)m--,c.style.font=l(b),d=c.offsetHeight}c.style.display="none"}c=h.font=
l(b);h=p.getLineBreaks(h);h.baseline=p.textBaseline("test",c);h.lineHeight=h.height/h.lines}x={data:h.data,lines:h.lines,lineMetrics:h.lineMetrics,baseline:h.baseline,lineHeight:h.lineHeight,height:h.height,width:h.width,x:g.x,y:g.y};if(!e)return x;e.save();e.font=c;w?z=w=1:(z=g.scale||{x:1,y:1},w=z.x,z=z.y);d=g.rotate*f;e.translate(g.x,g.y);d&&e.rotate(d);e.translate(-g.x*w,-g.y*z);1===w&&1===z||e.scale(w,z);V&&(e.lineWidth=b.stroke.lineWidth,e.strokeStyle=q.style.getStyle("stroke",e,0,0,g.width,
g.height,b));P&&(e.fillStyle=q.style.getStyle("fill",e,0,0,g.width,g.height,b));b.clip&&(e.rect(g.x,g.y,g.width,g.height),e.clip());b.shadowBlur?(w=g.y,z=g.x,e.shadowOffsetX=b.shadowOffsetX||0,e.shadowOffsetY=b.shadowOffsetY||0,e.shadowBlur=b.shadowBlur||0,e.shadowColor=b.shadowColor||"#000"):(b=(b.blur||0)/2)?(w=g.y+b,z=g.x-h.width-m,e.shadowOffsetX=h.width+m,e.shadowOffsetY=0,e.shadowBlur=b,e.shadowColor="#000"):(w=g.y,z=g.x);b=0;switch(k){case "right":b=g.width;break;case "center":b=g.width/2}for(var d=
h.baseline,c=d.top,y=h.data,m=Math.max(.5,m/30),h=h.lineMetrics,u=0,Q=y.length;u<Q;u++){var O=y[u].replace("\n",""),T=u*x.lineHeight+w+c;if(0!==v&&h)for(var S=z,X=h[u],ba=g.width-X.width,W=0;W<O.length;W++){var Y=X.data[W];P&&e.fillText(O[W],S+ba/2,T);V&&e.strokeText(O[W],S+ba/2,T);S=Y.width}else{var S=z+b;e.textAlign=k;P&&e.fillText(O,S,T);V&&e.strokeText(O,S,T)}if(r&&"none"!==r&&h)switch(X=h[u],r){case "underline":e.fillRect(0,T+m+d.top-c,X.width,m);break;case "overline":e.fillRect(0,T+m+d.alphabetic-
c,X.width,m);break;case "line-through":e.fillRect(0,T+m+2*d.middle-c,X.width,m)}}e.restore();return x}};var h=/[\u2014\u2013-]/,g=/[ \u2014\u2013-]/,y=/^\s+|\s+$/g;p.CSSWhiteSpace={};p.CSSWhiteSpace.preWrap="white-space: pre-wrap;white-space: -moz-pre-wrap !important;white-space: -pre-wrap;white-space: -o-pre-wrap;word-wrap: break-word;";p.getLineBreaks=function(a){return e()(a)};p.range={};p.range.selectAll=function(a){p.setRange(a,0,a.textContent.length)};p.getRange=function(a){var b=window.getSelection();
if(null===b)return b=p.getCursorPos(a),{startOffset:b,endOffset:b};if(a=b.focusNode)return 3===a.nodeType?b.getRangeAt(0):a.firstChild?(b=a.firstChild,{startOffset:0,endOffset:b.data&&b.data.length||0}):{startOffset:0,endOffset:0}};p.setRange=function(a,b,d){var c=document.createRange();a=a.firstChild||a;c.setStart(a,b);c.setEnd(a,d);a=window.getSelection();a.removeAllRanges();a.addRange(c)};p.getCursorPos=function(a){var b=0;if(window.getSelection){var d=window.getSelection();d.rangeCount&&(d=d.getRangeAt(0),
d.commonAncestorContainer.parentNode===a&&(b=d.endOffset))}else document.selection&&document.selection.createRange&&(d=document.selection.createRange(),d.parentElement()===editableDiv&&(a=document.createElement("span"),editableDiv.insertBefore(a,editableDiv.firstChild),b=d.duplicate(),b.moveToElementText(a),b.setEndPoint("EndToEnd",d),b=b.text.length));return b};p.attach=function(a,b){a.callback=b||a.callback;a.family=a.family||a.name;var d=new z(a);if(!d.detectFont(a)){var c=a.family,e=a.filepath,
f=document.createElement("style");f.type="text/css";document.getElementsByTagName("head")[0].appendChild(f);c='@font-face {\t\tfont-family: "'+c+'";\t\tsrc: url("'+e+'.eot");\t\tsrc: url("'+e+'.eot?#iefix") format("embedded-opentype"),\t\t\turl("'+e+'.woff") format("woff"),\t\t\turl("'+e+'.ttf") format("truetype"),\t\t\turl("'+e+".svg#"+c+'") format("svg");\t\tfont-weight: normal;\t\tfont-style: normal;\t}';f.styleSheet?f.styleSheet.cssText=c:f.innerHTML=c;a.callback&&d.waitForFont(a)}};p.attachFromCSS=
function(a,b){a.callback=b||a.callback;var d=new z(a);if(!d.detectFont(a)){var c=a.href.replace(/[^a-zA-Z 0-9]+/g,""),e=document.getElementById(c);if(e)return d=e.getAttribute("data-error"),a.callback?a.callback(d):d;a.link=e=document.createElement("link");e.href=a.href;e.id=c;e.setAttribute("rel","stylesheet");e.setAttribute("type","text/css");e.onerror=function(){a.callback&&a.callback("404");e.setAttribute("data-error","404")};document.body.appendChild(e);d.waitForFont(a)}};p.attachFromGoogleAPI=
function(a,b){p.attachFromCSS({family:a,href:window.location.protocol+"//fonts.googleapis.com/css?family="+a+":regular",callback:function(d){d&&(d="&ldquo;"+a+"&rdquo; font-family unavailable.");b&&b(d)}})};var z=function(a){a=a||{};var b=this;this.metrics=void 0;this.test=a.test||"Thequickbrownfox";this.font=this.missing=this.arial=this.ctx=this.canvas=void 0;this.createHash=function(a){b.canvas.width=b.canvas.width;b.ctx.font=b.font;b.ctx.fillText(a,0,b.metrics.textBaseline.top);return b.ctx.canvas.toDataURL()};
this.getHash=function(a){b.metrics||(b.metrics=p.getMetrics(b.test,"16px Arial, Helvetica"),b.canvas=m.Canvas(b.metrics.width,b.metrics.height),b.font="16px Arial, Helvetica",b.ctx=b.canvas.ctx,b.ctx.font="16px Arial, Helvetica",b.arial=b.createHash(b.test),b.missing=b.createHash(""));b.font='16px "'+a+'", Arial, Helvetica';return b.createHash(b.test)};this.detectFont=function(a){"string"===typeof a&&(a={family:a});if(!a)return console.log("missing conf");if(!a.family)return console.log("missing family",
a);var d=a.family,c=a.callback,e=p.supports[d];if("boolean"===typeof e)return c&&c(),e;if("arial"===d.toLowerCase())return p.supports[a.family]=!0,c&&c(),!0;d=b.getHash(d);return d!==b.missing&&d!==b.arial?(p.supports[a.family]=!0,c&&c(),!0):!1};this.waitForFont=function(a){if(!b.detectFont(a)){var c=m.timestamp(),e=a.timeout||2E4,f=function(b){p.supports[a.family]=!1;a.link&&a.link.setAttribute("data-error","timeout");clearInterval(l);a.callback("timeout");g()},g=function(){q&&q.loader&&q.loader.stop(a.family)},
h=null,l=setInterval(function(){var d=b.getHash(a.family),k=m.timestamp()-c;d!==b.missing&&d!==b.arial?(p.supports[a.family]=!0,clearInterval(l),a.callback(),g()):k>e?f():a.filepath&&2E3<k&&!h&&(h=m.request({url:a.filepath,onerror:f}))},10);q&&q.loader&&a.useLoader&&q.loader.create(a.family,d.translate("loading")+" &ldquo;"+a.family+"&rdquo;")}}},x=new z;p.supports={};p.detectFont=x.detectFont;p.waitForFont=x.waitForFont;"undefined"!==typeof module&&module.exports&&(module.exports=q.vector.text)})(sketch);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.Server=function(e,c){var a=this,b=e.util,k=e.lang,q;a.servers=[];a.addHost=function(a){b.mixin([a],a.servers)};a.getHost=function(b){for(var c=a.servers,e=0,m=b.length,k=c.length;m--;)e+=b[m].charCodeAt();return c[e%k]};a.auth=function(a){e.feature.requireAuth?b.request({url:e.loc.host+"check-login.html",onload:function(b){a("true"===b.responseText)}}):a(!0)};a.getResource=function(){return e.loc.GET?e.loc.getFileID()||e.loc.getRandomID():"new"};a.open=
function(d,m){var p=e.loc.GET,q=a.getResource(),r=e.feature;if(!q)return(p=r.session.path)?e.loc.setHash("sketch",p):(p=r.defaultSketch)?(p=p.replace("sketch=",""),e.loc.setHash("sketch",p)):e.loc.setHash("sketch","new");if("new"===q)return c.scene&&c.scene.reset(!0),c.history&&c.history.reset(),delete r.session.path,c.on.sketchReady(c);if(!e.client.nodewebkit){var v=k.translate("downloading")+"...";e.loader&&e.loader.create("thread",v);r.session.path=q;var l=function(){d&&d();c.on.sketchReady(c);
e.loader&&e.loader.stop("thread")},q=q+"&format="+c.format+"&timestamp="+Date.now();b.request({url:p+q,onerror:function(a){e.loader&&e.loader.create("thread",v,100);r.debug?console.log("server connection error",a):(e.loc.setHash("sketch","new"),m&&m())},onload:function(a){a=a.responseText;if("<?xml"===a.substr(0,5)||"<svg"===a.substr(0,4))e.loader&&e.loader.create("thread",v,99),e.open.svg(a,l,l);else if("<"===a[0])e.loader&&e.loader.create("thread",v,100),r.debug?console.log("invalid data from server",
a):e.loc.setHash("sketch","new");else if("{"===a[0])e.loader&&e.loader.create("thread",v,99),e.open.json(a,l,l);else if(e.open.sketch){for(var b=new Uint8Array(a.length),d=0;d<a.length;d++)b[d]=a.charCodeAt(d)&255;e.loader&&e.loader.create("thread",v,99);e.open.sketch(new Blob([b.buffer],{type:"application/zip"}),function(){c.on.sketchReady(c)})}else e.loader&&e.loader.create("thread",v,100),l()},onprogress:function(a){var b=a.total||parseInt(this.getResponseHeader("Content-xlength"));isNaN(b)||(a=
a.loaded/b*100>>0,e.loader&&e.loader.create("thread",v,Math.max(0,a-1)))}})}};a.enabled=function(){if(e.client.nodewebkit||e.client.incognito)return!1;var a=c.format,b=e.feature.sync;if(!b[a]&&b.useDefaultFormat)return b[a]=!0;for(var m in b)switch(m){case "zip":case "svg":case "json":case "thumb":case "image":if(b[m])return!0}return!1};a.save=function(d){d=d||{};var c=d.url,k=d.sync||e.feature.sync,w=d.metadata||k.metadata||{},r=d.onabort,v=d.onerror,l=d.onprogress||k.onprogress,f=d.onsave||k.onsave;
250>b.timestamp()-q||(q=b.timestamp(),a.auth(function(a){a?e.save.sync({sync:k,onprogress:function(a){l&&l(0,"prepare")},onsuccess:function(a){for(var b in a)if("folder"===b)for(var d=a.folder,e=0;e<d.length;e++){var h=d[e];w[h.filename]=h.blob}else w[b]=a[b];m({url:c,metadata:w,onabort:r,onerror:v,onprogress:function(a,b){l&&l(a,b)},onsave:f})}}):e.exec("login")}))};a.saveData=function(b){b=b||{};(function(){a.auth(function(a){a?m(b):e.exec("login")})})()};var m=function(a){var m=e.feature,k=a.url||
e.loc.POST,q=a.metadata,r=a.onabort,v=a.onerror,l=a.onprogress,f=a.onsave;if(!a||!b.count(q))return console.warn("server sync is not setup");a={action:k,confirm:"text",files:[]};var h=a.files,k=function(a,b){h.push({name:a,data:b})};if(m.sync.hash){var g=e.feature.session.path;g&&k("sync",g)}for(var y in q)k(y,q[y]);"string"!==typeof q.fileName&&k("fileName",c.title);a.onprogress=function(a,b){l&&l(a.transferPercent,"sync")};a.onabort=function(a,b){r&&r(b)};a.onerror=function(a,b){v&&v(b)};a.onupload=
function(a,d){m.debug&&console.log(a.transferTotal,d,a);"false"===d||"<"===d[0]?(console.warn("invalid server response",d),v&&v(d)):((m.sync.json||m.sync.zip||m.sync.svg)&&m.sync.hash&&(e.loc.setHash("sketch",d),b.setItem("sync",d)),e.on.save&&e.on.save(d,h),f&&f(d,h))};new e.uploader.upload(a)}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.vector||(q.vector={}),c=q.util,a={},b={},k=1/(180/Math.PI),u=["g","switch","a"],m=function(a){q=m.__self||q;c=q.util;a=a||{};this.convertMetrics=c.getScreenMetrics?this.convertMetrics||c.getScreenMetrics():{normal_px:16,"xx-small_px":9,"x-small_px":10,small_px:13,medium_px:16,large_px:18,"x-large_px":24,"xx-large_px":32,"%>px":.16,"px>pt":.7500187504687618,"pt>pc":.08333333333333333,"px>in":.010416666666666666,"in>ft":.08333333333333333,"ft>yd":.3333333333333333,"px>mm":.2645833333333333,
"mm>cm":.1,"cm>m":.01,"px>ex":.11951429390955158,"ex>em":.52295,"px>px":1,"px>pc":.06250156253906347,"pt>px":1.3333,"pc>px":15.9996,"pc>pt":12,"px>cm":.02645833333333333,"mm>m":.001,"mm>px":3.779527559055119,"m>mm":1E3,"cm>mm":10,"px>m":2.645833333333333E-4,"cm>px":37.795275590551185,"m>px":3779.527559055118,"m>cm":100,"px>ft":8.680555555555555E-4,"in>yd":.027777777777777776,"in>px":96,"yd>in":36,"ft>in":12,"px>yd":2.8935185185185184E-4,"ft>px":1152,"yd>px":3456,"yd>ft":3,"px>em":.0625,"ex>px":8.3672,
"em>px":16,"em>ex":1.9122287025528253};this.type="svg";this.cors=a.cors||!1;this.debug=a.debug||!1;this.debugSVG=a.debugSVG||!1;this.debugBBox=a.debugBBox||!1;this.placement=a.placement||"bbox";this.defaultStroke=this.defaultFill="#000000";this.state={fillStyle:"#000000"};this.defs={};this.vob={type:"svg"};this.batch=0;this.skipRender=a.skipRender||!1;this.useCache=a.useCache||!1;this.uid=0;a.src&&(this.src=a.src);a.srcs&&(this.srcs=a.srcs);a.data&&(this.data=a.data);a.cache&&(this.cache=a.cache);
a.ctx&&(this.ctx=a.ctx);a.onerror&&(this.onerror=a.onerror);a.onload&&(this.onload=a.onload);a.document&&(this.document=a.document);return a.src||a.document?this.load():this};m.prototype.load=function(){if(!this.src&&!this.data&&!this.document)return this;var d=this,c=q.util;if(this.src||this.data){var e=this.src||this.data;if("string"!==typeof e){if(this.onerror)this.onerror("not string");return this}this.__id=q.util.hash(e);if(m.detect(e))return this.fromString(e),this;!1!==this.useCache&&"undefined"!==
typeof document&&(this.document=document.getElementById(this.__id))}else if(this.document)return this.__id="#",this.onParseReady(),this;if(b[e]){if(this.onerror)this.onerror("404")}else if(this.document)if(a[this.__id]&&a[this.__id].loaded||this.srcs&&this.srcs[e])this.onParseReady();else d.onParseReady();else this.srcs&&this.srcs[e]?this.fromString(this.srcs[e]):c.request({url:e,onerror:function(){b[e]=!0;if(d.onerror)d.onerror("404")},onload:function(a){d.fromString(a.responseText)}});return this};
m.decodeDataURL=function(a){return atob(q.util.string.decode_utf8(a.split(",").pop()))};m.prototype.fromString=function(a,b){var d;d=new DOMParser;0===a.indexOf("data:image/svg")&&(a=m.decodeDataURL(a));this.srcXML=a;a=a.replace(/\<(\?xml|(\!DOCTYPE[^\>\[]+(\[[^\]]+)?))+[^>]+\>/g,"");a=a.replace(/(xmlns(:.*|)='&.*;')/g,"");this.document=d=d.parseFromString("<object>"+a+"</object>","text/xml").documentElement;this.svg=d.querySelector?d.querySelector("svg"):d;this.document.id=this.__id;"undefined"===
typeof module&&this.debugSVG&&document.body.appendChild(this.document);this.onParseReady(b);if(this.debugSVG)return this;this.document.style&&(this.document.style.visibility="hidden",this.document.style.opacity=0,this.document.style.zIndex=-1,this.document.style.width="1px",this.document.style.height="1px");return this};m.prototype.onParseReady=function(b){if(a[this.__id]){if(this.onload)this.onload(a[this.__id]);return this}var d=this,e=c.timestamp(),f=this.document.contentDocument||this.document;
this.loaded=!0;this.element=f;this.parse({document:f,skipRender:this.skipRender,node:{childNodes:[]},onload:function(f){if(f){d.vob=f[0];d.viewBox=d.getBoundingBox(null);d.viewBoxStroke=d.getBoundingBox(null,!0);d.debug&&console.log("parseTime",c.timestamp()-e);d.useCache&&(a[d.__id]=d);b&&b(d);if(d.onload)d.onload(d);if(!d.debug)try{document.body.removeChild(d.document)}catch(g){}}}})};m.prototype.rxSplitByUppercase=/([A-Z]?[^A-Z]*)/g;m.prototype.rxAlphaNumeric=/[^A-Z0-9]+/gi;m.prototype.rxNumeric=
/[+-]?\d*\.?(e[+-]?\d+)*/g;m.prototype.rxTransform=/(\w+\(([+-]?\d*\.?(e[+-]?\d+)*[, ]?)+\))+/gi;m.prototype.parse=function(a){if(a.node){if(a.document&&a.document.childNodes&&a.document.childNodes.length)var b=a.document.childNodes;else if(a.document){var c=a.document.nodeName.toLowerCase();if(w[c])b=[a.document];else{if(a.onload)a.onload([]);return this}}else{if(a.onload)a.onload([]);return this}a.defs&&(this.defs=a.defs);for(var f=this,h=e.shape,g=a.node.childNodes,m=a.svg||f.svg,k=a.skipRender||
!1,s=a.ctx||this.ctx,p=[],q=0,x=b.length;q<x;q++){var J=b[q],c=J.nodeName.toLowerCase();"#"!==c[0]&&(0===c.indexOf("svg:")&&(c=c.substr(4)),0===c.indexOf("scalable_vector_graphics:")&&(c=c.substr(25)),0===c.indexOf("sketchjs:")&&(c=c.substr(9)),J.type=c,p.push(J))}var D=p.length,B=-1,E=function(){if(0===++f.batch%250)setTimeout(E,0);else if(++B===D){if(a.onload)a.onload(g)}else{var b=p[B],c=b.type,l="";s&&s.save();if("none"===d(b).display)return E();switch(c){case "svg":f.currentNode=l=f.getAttributes(b,
"id,x,y,width,height,viewBox,version,source,author,license,keywords,metadata,brush");l.matrix=e.Transform.getIdentity();l.type="svg";if(void 0!==e.SVGFont){c=f.element.getElementsByTagName("font");c.length&&(f.vob.type||(f.vob=l),s&&(f.debug&&(s.canvas.style.border="1px solid rgba(0,0,0,0.1)",f.document.style.left=l.width+"px"),s.canvas.width=l.width||1,s.canvas.height=l.height||1),f.typeface=new e.SVGFont(s),f.document.width=l.width||1,f.document.height=l.height||1,m=l);for(var v=0;v<c.length;v++)f.typeface.load(c[v].cloneNode(!0),
function(a){})}if(l.viewBox){var v=l.viewBox,q=v[2]-v[0],x=v[3]-v[1],c=l.width||q,w=l.height||x;s&&(s.canvas.width=c,s.canvas.height=w);q=Math.min(c/q,w/x);x=new e.Transform;x.translate(-v[0],-v[1]);x.translate(c/2,w/2);x.scale(q,q);x.translate(-c/2*1/q,-w/2*1/q);s&&x.apply(s);l.matrix=x.matrix;l.transform=x.matrix;l.transform.type="transform"}else s&&(s.canvas.width=l.width,s.canvas.height=l.height);g.push(l);l.childNodes=[];f.parse({skipRender:a.skipRender,document:b,node:l,svg:m,onload:function(a){l.childNodes=
a;s&&s.restore();E()}});return;case "title":if(!m)break;m.title=b.textContent;break;case "desc":if(!m)break;m.desc=b.textContent;break;case "a":case "g":case "switch":if(f.currentNode=l=f.getAttributes(b,"id,labels"),l.parentNode=a.node,l.type="g",s&&s.beginPath(),f.parseTransform(b,"transform"),f.parseClipPath(b,!0),l.style=f.parseStyle(s,b,!k),b.hasChildNodes){g.push(l);l.childNodes=[];f.parse({skipRender:a.skipRender,document:b,node:l,svg:m,onload:function(a){l.childNodes=a;s&&s.restore();E()}});
return}case "use":if(c=f.parseHref(b))if(f.currentNode=l=f.getAttributes(b,"id,xlink:href,labels"),l.parentNode=a.node,l.type="use",c=c.substr(1),!f.defs[c]){s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);b=f.getElementById(c);-1!==u.indexOf(b.nodeName)&&(f.parseTransform(b,"transform",!1),f.parseClipPath(b,!0));l.childNodes=[];f.parse({skipRender:a.skipRender,document:b,node:l,svg:m,onload:function(a){s&&s.restore();g.push(l);E()}});return}break;case "fegaussianblur":f.currentNode=
l=f.getAttributes(b,"id,stdDeviation");l.parentNode=a.node;l.type="GaussianBlur";g.push(l);break;case "image":if(c=f.parseHref(b)){if(!m.cors&&"http"===c.substr(0,4))break;f.currentNode=l=f.getAttributes(b,"id,x,y,width,height,preserveAspectRatio,labels",!0);l.parentNode=a.node;l.type="image";l.x=l.x||0;l.y=l.y||0;s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);f.svg.data?(b=f.svg.data.split("/"),b.pop(),(b=b.join("/"))&&(b+="/")):b="";l.image=new Image;l.image.node=l;l.image.onload=
function(){var a=this.width,b=this.height,d=this.node.matrix;s&&s.setTransform(d.a,d.b,d.c,d.d,d.x,d.y);if(this.node.preserveAspectRatio&&"none"!==this.node.preserveAspectRatio){var c=this.node.preserveAspectRatio.split(" ")[0],d=c.substr(1,3),c=c.substr(5,3);a>this.node.width&&(b*=this.node.width/a,a=this.node.width);b>this.node.height&&(a*=this.node.height/b,b=this.node.height);switch(d){case "Min":d=0;break;case "Mid":d=(this.node.width-a)/2;break;case "Max":d=this.node.width-a}switch(c){case "Min":c=
0;break;case "Mid":c=(this.node.height-b)/2;break;case "Max":c=this.node.height-b}s&&s.drawImage(this,d,c,a,b);l.x=d;l.y=c;l.width=a;l.height=b}else s&&s.drawImage(this,this.node.x,this.node.y,this.node.width,this.node.height);l.bbox=new e.BBox([l.x,l.y,l.x+l.width,l.y+l.height],l.matrix);s&&s.restore();g.push(l);E()};l.image.onerror=function(){s&&s.restore();E()};-1!==c.indexOf("base64")||"http"===c.substr(0,4)?(l.href=c,l.image.src=c):(l.href=b+c,l.image.src=b+c);return}case "text":if(!e.text){console.log("missing text module");
break}f.currentNode=l=f.getAttributes(b,"id,x,y,dx,dy,labels",!0);l.parentNode=a.node;l.type="text";l.childNodes=[];s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);l.style=f.parseStyle(s,b,!k);for(var q=w=Infinity,H=x=-Infinity,I=l.dx||0+(l.x||0),J=l.dy||0+(l.y||0),b=b.childNodes,v=c=0,O=b.length;v<O;v++){var T=b[v];if("[object Text]"===String(T)){var S={},X=document.createElement("tspan");X.textContent=T.textContent;T=X}else S=f.getAttributes(T,"id,x,y,dx,dy",!0);void 0!==
S.x&&(I=0);void 0!==S.y&&(J=0);I=0!==(S.dy||0)?S.dx||0:I+(S.dx||0);J+=S.dy||0;S.x=I+(S.x||0);S.y=J+(S.y||0);S.parentNode=l;S.type="tspan";S.content=T.textContent.trim();f.currentNode=S;S.style=f.parseStyle(s,T,!k);l.childNodes.push(S);X=f.fontStyleToString(s,S.style);T=e.text.measureText(T.textContent,X);w>S.x&&(w=S.x);q>S.y&&(q=S.y-S.style.fontSize);H<S.y+T.height&&(H=S.y+T.height-S.style.fontSize);x<S.x+T.width&&(x=S.x+T.width);I+=T.width;c+=T.width}switch(l.style.textAnchor){case "middle":w-=c/
2;x-=c/2;break;case "end":w-=c,x-=c}c=[w,q,x,H];l.bbox=new e.BBox(c,l.matrix);g.push(l);break;case "rect":f.currentNode=l=f.getAttributes(b,"id,x,y,rx,ry,width,height,labels");l.parentNode=a.node;l.type="rect";l.x||(l.x=0);l.y||(l.y=0);if(!l.width||!l.height)break;s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);c=[l.x,l.y,l.x+l.width,l.y+l.height];l.bbox=new e.BBox(c,l.matrix);void 0===l.rx&&void 0!==l.ry&&(l.rx=l.ry);void 0===l.ry&&void 0!==l.rx&&(l.ry=l.rx);s&&h&&(void 0===
l.rx?h.rect(s,l.x,l.y,l.width,l.height):h.roundRect(s,l.x,l.y,l.width,l.height,l.rx,l.ry));l.style=f.parseStyle(s,b,!k);g.push(l);break;case "circle":f.currentNode=l=f.getAttributes(b,"id,cx,cy,r,labels");l.parentNode=a.node;l.type="circle";s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);c=[l.cx-l.r,l.cy-l.r,l.cx+l.r,l.cy+l.r];l.bbox=new e.BBox(c,l.matrix);l.cx=l.cx||0;l.cy=l.cy||0;s&&h.ellipse(s,l.cx,l.cy,l.r,l.r);l.style=f.parseStyle(s,b,!k);g.push(l);break;case "ellipse":f.currentNode=
l=f.getAttributes(b,"id,cx,cy,rx,ry,labels");l.parentNode=a.node;l.type="ellipse";s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);l.cx=l.cx||0;l.cy=l.cy||0;c=[l.cx-l.rx,l.cy-l.ry,l.cx+l.rx,l.cy+l.ry];l.bbox=new e.BBox(c,l.matrix);s&&h&&h.ellipse(s,l.cx,l.cy,l.rx,l.ry);l.style=f.parseStyle(s,b,!k);g.push(l);break;case "line":f.currentNode=l=f.getAttributes(b,"id,x1,y1,x2,y2,labels");l.parentNode=a.node;l.type="line";l.x1=l.x1||0;l.y1=l.y1||0;l.x2=l.x2||0;l.y2=l.y2||0;s&&s.beginPath();
f.parseTransform(b,"transform");f.parseClipPath(b,!0);c=[l.x1,l.y1,l.x2,l.y2];l.bbox=new e.BBox(c,l.matrix);s&&h&&(s.moveTo(l.x1,l.y1),s.lineTo(l.x2,l.y2));l.style=f.parseStyle(s,b,!k);g.push(l);break;case "pencil":case "polyline":case "polygon":v=f.parsePoints(b,c);w=v.points;f.currentNode=l=f.getAttributes(b,"id,labels");l.parentNode=a.node;l.type=c.toLowerCase();l.points=w;s&&s.beginPath();f.parseTransform(b,"transform");f.parseClipPath(b,!0);l.data=v.data;l.bbox=new e.BBox(l.data,l.matrix);s&&
h&&h.VOBPath(s,l.data);l.style=f.parseStyle(s,b,!k);g.push(l);break;case "path":f.currentNode=l=f.getAttributes(b,"id,d,labels"),l.parentNode=a.node,l.type="path",s&&s.beginPath(),f.parseTransform(b,"transform"),f.parseClipPath(b,!0),l.data=e.SVGPath.toVOBPath(l.d),l.bbox=new e.BBox(l.data,l.matrix),l.element=b,s&&h&&h.VOBPath(s,l.data),l.style=f.parseStyle(s,b,!k),g.push(l)}s&&s.restore();E()}};E();return g}};m.prototype.parseAttribute=function(a,b,d){void 0===a&&(a=d);"inherit"===a&&(a=this.currentNode,
a=a.parentNode&&a.parentNode.style&&a.parentNode.style[b]?a.parentNode.style[b]:d);return a};m.prototype.parseStyleAttribute=function(a,b,d){a=b[d]||a.getAttribute(d);b="color"===d?"color":d+"Style";if(a){if(q.color.webcolors[a])a="#"+q.color.webcolors[a];else if("none"===a)a="transparent";else if("currentColor"===a)a=this.state.color;else if("url"===a.substr(0,3)){a=a.substr(5,a.indexOf(")")-5);var c=this.ctx,e=this.parseDefs(c,a,d);e?c&&this.setStyle(c,e,b):a=""}"inherit"===a&&(c=this.currentNode,
c.parentNode&&c.parentNode.style&&c.parentNode.style[b]?a=c.parentNode.style[b]:"stroke"!==d&&(a="#000000"));return a}};m.prototype.parseStyle=function(a,b,c){var f=q.util,h=this.currentNode,g=this.state=f.clone(h.parentNode.style||this.state),m=d(b);h.uid=this.uid++;a&&a.save();var k=this.getAttributes(b,"opacity,fill-rule,fill-opacity,stroke-width,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-dasharray,stroke-dashoffset,stroke-opacity,font-size,font-family,font-weight,font-style,line-height,text-anchor",
!0);void 0!==k.opacity?(g.opacity=k.opacity,a&&(a.globalAlpha=g.opacity)):h.parentNode.style?(g.opacity=h.parentNode.style.opacity,a&&(a.globalAlpha=g.opacity)):(g.opacity=1,a&&(a.globalAlpha=1));var s=b.attributes;if(s){var p=s.length;p&&void 0===h.attributes&&(h.attributes={});for(var u=0;u<p;u++){var x=s[u];if("data-"===x.name.substr(0,5)){var w=x.name.substr(5).split("-");w[1]&&(w[1]=w[1][0].toUpperCase()+w[1].substr(1));w=w.join("");h.attributes[w]=x.value}}(s=m.filter||b.getAttribute("filter"))?
(p=s.substr(5,s.length-6),!this.defs[p]&&(s=this.getElementById(p))&&(this.defs[p]=this.getAttributes(s,"id,x,y,width,height"),this.defs[p].type="filter",this.defs[p].filter=this.parse({document:s,node:{childNodes:[]}})),g.filter=p):delete g.filter;k.fontSize&&(g.fontSize=k.fontSize);if(k.fontFamily)for(g.fontFamily=k.fontFamily,s=k.fontFamily.split(",");;){p=s.shift();if(!p)break;if(this.typeface&&this.typeface.packages[p]){g.fontRenderer="SVG";break}if(e.text&&e.text.detectFont(p)){g.fontRenderer=
"native";break}}k.fontWeight&&(g.fontWeight=k.fontWeight);k.fontStyle&&(g.fontStyle=k.fontStyle);k.lineHeight&&(g.lineHeight=k.lineHeight);k.textAnchor&&(g.textAnchor=k.textAnchor);a&&(a.font=this.fontStyleToString(a,g));if(s=this.parseStyleAttribute(b,m,"color"))g.color=s;if(s=this.parseStyleAttribute(b,m,"fill"))k.fillStyle=s;else if(s=h.parentNode,s.style){s=f.clone(s.style);for(w in k)s[w]=k[w];k=s}else k.fillStyle="default";g.fillStyle=this.parseAttribute(k.fillStyle,"fillStyle","#000000");g.fillRule=
this.parseAttribute(k.fillRule,"fillRule","nonzero");g.fillOpacity=Math.max(0,this.parseAttribute(k.fillOpacity,"fillOpacity",1));c&&g&&a&&("default"===g.fillStyle?a.fillStyle=this.defaultFill:g.fillStyle&&(a.fillStyle=g.fillStyle),a.save(),a.globalAlpha*=g.fillOpacity,h.content?"SVG"===g.fontRenderer?(this.typeface.setFont(a.font),this.typeface.fillText(h.content,h.x,h.y)):a.fillText(h.content,h.x,h.y):a.fill(),a.restore());if(s=this.parseStyleAttribute(b,m,"stroke"))k.strokeStyle=s;else if(s=h.parentNode,
s.style){s=f.clone(s.style);for(w in k)s[w]=k[w];k=s}g.strokeWidth=this.parseAttribute(k.strokeWidth,"strokeWidth",1);g.strokeStyle=this.parseAttribute(k.strokeStyle,"strokeStyle","none");g.strokeLinecap=this.parseAttribute(k.strokeLinecap,"strokeLinecap","butt");g.strokeLinejoin=this.parseAttribute(k.strokeLinejoin,"strokeLinejoin","miter");g.strokeMiterlimit=Math.max(1,this.parseAttribute(k.strokeMiterlimit,"strokeMiterlimit",4));g.strokeDasharray=this.parseAttribute(k.strokeDasharray,"strokeDasharray",
"none");g.strokeDashoffset=this.parseAttribute(k.strokeDashoffset,"strokeDashoffset",0);g.strokeOpacity=Math.max(0,this.parseAttribute(k.strokeOpacity,"strokeOpacity",1));c&&g&&a&&(a.lineWidth=0===g.strokeWidth?1E-10:g.strokeWidth||1,a.lineCap=g.strokeLinecap||"butt",a.lineJoin=g.strokeLinejoin||"miter",a.miterLimit=g.strokeMiterlimit||a.lineWidth,g.strokeStyle&&"none"!==g.strokeStyle&&(a.strokeStyle=g.strokeStyle,a.save(),a.globalAlpha*=g.strokeOpacity,h.content?"SVG"===g.fontRenderer?(this.typeface.setFont(a.font),
this.typeface.strokeText(h.content,h.x,h.y)):a.strokeText(h.content,h.x,h.y):a.stroke(),a.restore()));a&&a.restore();return g}};m.prototype.parseDefs=function(a,b,d){if(this.defs[b])return this.defs[b];var c=this.getElementById(b);if(!c)return{};d=c.nodeName.toLowerCase();switch(d){case "pattern":return this.defs[b]=this.parsePattern(a,c);case "lineargradient":case "radialgradient":return this.defs[b]=this.parseGradient(a,c,d)}};m.prototype.addDef=function(a){this.defs[a.id]=a};m.prototype.Gradient=
function(a){a=a||{};return{gradientUnits:a.gradientUnits||"objectBoundingBox",id:a.id||"MyGradient",type:a.type||"linearGradient",stops:a.stops||[{color:"#FFF",offset:0},{color:"#000",offset:1}],x1:isFinite(a.x1)?a.x1:0,x2:isFinite(a.x2)?a.x2:1,y1:isFinite(a.y1)?a.h1:0,y2:isFinite(a.y2)?a.y2:0}};m.prototype.Pattern=function(a){return{id:a.id||"HelloPattern",pattern:a.pattern||CanvasPattern,patternUnits:a.patternUnits||"userSpaceOnUse",type:a.type||"pattern",width:a.width||100,height:a.height||100}};
m.prototype.parseGradient=function(a,b,c){if("lineargradient"===c){var e=this.getAttributes(b,"id,x1,y1,x2,y2,spreadMethod,gradientUnits,gradientTransform");e.type="linearGradient"}else e=this.getAttributes(b,"id,cx,cy,r,fx,fy,spreadMethod,gradientUnits,gradientTransform"),e.type="radialGradient",void 0===e.fx&&(e.fx=e.cx,e.fy=e.cy);void 0===e.gradientUnits&&(e.gradientUnits="objectBoundingBox");var h=[],g=b.childNodes,m=this.parseHref(b);if(m)return h=this.parseDefs(a,m.substr(1),c),e.stops=h.stops,
e;var k=d(b);b=k.color||b.getAttribute("color")||this.state.color;a=0;for(var s in g)if(m=g[s],m.nodeName&&(c=m.nodeName.toLowerCase(),"stop"===c&&(k=d(m),c=k["stop-color"]||m.getAttribute("stop-color"))))q.color.webcolors[c]?c="#"+q.color.webcolors[c]:"none"===c?c="transparent":"currentColor"===c?c=b||"#000000":"inherit"===c&&(c=b||"#000000"),(k=k["stop-opacity"]||m.getAttribute("stop-opacity"))&&"1"!==k&&("inherit"===k&&(k=1),"#"===c.substr(0,1)?(c=q.color.space(c.substr(1),"W3>HEX24>RGB"),c.A=
255*parseFloat(k)):"rgba"===c.substr(0,4)?(c=q.color.space(c,"W3>RGBA"),c.A*=parseFloat(k)):"rgb"===c.substr(0,3)&&(c=q.color.space(c,"W3>RGB"),c.A=255*parseFloat(k)),c=q.color.space.RGBA_W3(c)),m=m.getAttribute("offset")||"0",k=-1!==m.indexOf("%")?100:1,m=parseFloat(m)/k,m<a&&(m=a),h.push({offset:m,color:c}),a=m;e.stops=h;return e};m.prototype.parsePattern=function(a,b){var d=this,c=this.getAttributes(b,"patternUnits,patternContentUnits,patternTransform,x,y,width,height,preserveAspectRatio,href"),
e=this.parseHref(b);e&&(c.href=e);c.type="pattern";c.id=b.id;var g=new m;g.element=b;g.parse({skipRender:!0,document:b,node:{childNodes:[]},onload:function(b){c.childNodes=b;if(b.length){b=d.createCanvas().ctx;var e=d.getBoundingBox(c.childNodes,!1,.5);b.canvas.width=e[2]-e[0];b.canvas.height=e[3]-e[1];g.render({ctx:b,childNodes:c.childNodes,viewBox:e,placement:"crop"});a&&b.canvas.width&&b.canvas.height&&(c.pattern=a.createPattern(b.canvas,"repeat"))}c.href&&d.parseDefs(a,c.href.substr(1),"pattern")}});
return c};m.prototype.parseHref=function(a){return a.getAttribute("xlink:href")||a.getAttribute("href")};m.prototype.parseTransform=function(a,b,d){var c=this.ctx,h=this.currentNode;if(a){a=a.getAttribute(b);d=!1!==d;var g=(b="transform"===b)?h.matrix?h.matrix:h.parentNode.matrix?h.matrix=e.Transform.cloneMatrix(h.parentNode.matrix):h.matrix=e.Transform.getIdentity():e.Transform.getIdentity();if(a){var g=new e.Transform(g),m=new e.Transform;if(a=a.match(this.rxTransform))for(var p=0,s=a.length;p<
s;p++){var q=a[p].replace(/^\s+|\s+$/,"").split("("),u=q[0].replace(/^\s+|\s+$/,""),q=x(q[1]);switch(u){case "matrix":b&&(c&&c.transform(q[0],q[1],q[2],q[3],q[4],q[5]),m.transform(q[0],q[1],q[2],q[3],q[4],q[5]));g.transform(q[0],q[1],q[2],q[3],q[4],q[5]);break;case "translate":2===q.length?(b&&(c&&c.translate(q[0],q[1]),m.translate(q[0],q[1])),g.translate(q[0],q[1])):(b&&(c&&c.translate(q[0],0),m.translate(q[0],0)),g.translate(q[0]));break;case "scale":2===q.length?(b&&(c&&c.scale(q[0],q[1]),m.scale(q[0],
q[1])),g.scale(q[0],q[1])):(b&&(c&&c.scale(q[0],q),m.scale(q[0],q[0])),g.scale(q[0],q[0]));break;case "rotate":u=q[0]*k;3===q.length?(b&&(c&&(c.translate(q[1],q[2]),c.rotate(u),c.translate(-q[1],-q[2])),m.translate(q[1],q[2]),m.rotate(u),m.translate(-q[1],-q[2])),g.translate(q[1],q[2]),g.rotate(u),g.translate(-q[1],-q[2])):(b&&(c&&c.rotate(u),m.rotate(u)),g.rotate(u));break;case "skewX":u=q[0]*k;b&&(c&&c.transform(1,0,Math.tan(u),1,0,0),m.skew(u,0));g.skew(u,0);break;case "skewY":u=q[0]*k,b&&(c&&
c.transform(1,Math.tan(u),0,1,0,0),m.skew(0,u)),g.skew(0,u)}}d&&(h.transform=m.matrix,h.transform.type="transform",h.matrix=g.matrix);return{matrix:g.matrix,transform:m.matrix}}}};m.prototype.parseClipPath=function(a,b){var d=this.ctx,c=this.currentNode;if(a){var e=a.getAttribute("clip-path");if(e){e=e.substr(5,e.length-6);if(this.defs[e])return b&&(c.clipPath=this.defs[e].d),d&&(this.renderChildNodes(d,{},c.clipPath,!0),d.clip(),d.beginPath()),this.defs[e];var g=this.getElementById(e);if(g)return this.defs[e]=
this.getAttributes(g,"id,x,y,width,height,clipPathUnits"),this.defs[e].type="clipPath",g=this.parse({document:g,matrix:this.vob.matrix,node:{childNodes:[]},skipRender:!0}),d&&(d.clip(),d.beginPath()),g.id=e,this.defs[e].d=g,b&&(c.clipPath=g),this.defs[e]}}};m.prototype.parsePoints=function(a,b){var d=a.getAttribute("points");if(d){var c=d.replace(/[\s,]+/g," ").trim().split(/[, ]/);if(!(2>c.length)){for(var e=[],d=[],g=0,m=c.length;g<m;g+=2){var k=c[g],s=c[g+1];e.push({cmd:d.length?"L":"M",x:parseFloat(k),
y:parseFloat(s)});d.push([k,s])}c=d.length-1;g=d[c];isFinite(g[1])||(e[c].y=g[1]=d[0][1]);"Polygon"===b?(d=""+d.join(" ")+"",e.push({cmd:"Z",x:e[0].x,y:e[0].y})):d=""+d.join(" ");return{points:d,data:e}}}};m.prototype.getAttributes=function(a,b,c){var e={};if(!a||!a.getAttribute)return{};var h=d(a),g=0;b=b.split(",");for(var m=b.length;g<m;g++){var k=b[g],s=this.__attributes[k],p=!1;if(!s)if(s=this.__attributesNS[k])k=this.__namepace+":"+k,p=!0;else if(k=k.match(this.rxSplitByUppercase).slice(0,-1).join("-").toLowerCase(),
s=this.__attributes[k],!s){console.log(k);continue}s=s.format;if(c){var q=h[k]||a.getAttribute(k);-1!==k.indexOf("-")&&(k=k.split("-"),k[1]&&(k[1]=k[1][0].toUpperCase()+k[1].substr(1)),k=k.join(""))}else q=a.getAttribute(k)||h[k],"id"!==k||q||(q=a.getAttribute("xml:id"));if(q)if("inherit"===q)p=this.currentNode,p.parentNode&&p.parentNode.style&&p.parentNode.style[k]&&(e[k]=p.parentNode.style[k]);else if("none"===q)e[k]=q;else switch(p&&(k=k.replace(this.__namepace+":","")),s){case "numarray":e[k]=
x(q);break;case "coordinate":e[k]=parseFloat(q);(s=q.replace(this.rxNumeric,""))&&"%"!==s&&"px"!==s&&(e[k]*=this.convertMetrics[s+">px"]);Infinity===e[k]&&(e[k]=4294967295);-Infinity===e[k]&&(e[k]=-4294967295);break;case "float":e[k]=parseFloat(q);Infinity===e[k]&&(e[k]=4294967295);-Infinity===e[k]&&(e[k]=-4294967295);break;case "gradientTransform":case "patternTransform":case "transform":p=this.parseTransform(a,s,!1);e[k]=p.matrix;break;case "string":e[k]=q}}return e};m.prototype.getBoundingBox=
function(a,b,d){var c=function(a){for(var d=0,l=a.length;d<l;d++){var m=a[d];if(m){if(m.bbox){if(b&&m.style&&m.style.strokeStyle)var k=m.style.strokeWidth||0,p=m.bbox.x1-k,r=m.bbox.x2+k,q=m.bbox.y1-k,k=m.bbox.y2+k;else p=m.bbox.x1,r=m.bbox.x2,q=m.bbox.y1,k=m.bbox.y2;p<e.x1&&(e.x1=p);q<e.y1&&(e.y1=q);r>e.x2&&(e.x2=r);k>e.y2&&(e.y2=k)}m.childNodes&&c(m.childNodes)}}},e={x1:Infinity,y1:Infinity,x2:-Infinity,y2:-Infinity};c(a||[this.vob]);d&&(e.x1-=d,e.y1-=d,e.x2+=d,e.y2+=d);return[e.x1,e.y1,e.x2,e.y2]};
m.prototype.getElementById=function(a){if(this.element.ownerDocument){var b=this.element.ownerDocument.getElementById(a);b||(b=p(this.element.ownerDocument,a))}else(b=this.element.getElementById(a))||(b=p(this.element,a));return b};m.prototype.getLayerById=function(a){var b=function(d){for(var c=0;c<d.length;c++){var e=d[c];if(e.id===a||e.childNodes&&(e=b(e.childNodes)))return e}};return b(this.vob.childNodes)};m.prototype.getLayerBy=function(a,b){var d=function(c){for(var e=0;e<c.length;e++){var g=
c[e];if(g[a]===b||g.childNodes&&(g=d(g.childNodes)))return g}};return d(this.vob.childNodes)};m.prototype.fontStyleToString=function(a,b){if(a&&b){var d=b.textAnchor||"left";"middle"===d&&(d="center");a.textAlign=d;return(b.fontStyle||"normal")+" "+(b.fontWeight||"normal")+" "+(b.fontSize||"normal")+"px "+(b.fontFamily||"sans-serif")}};m.prototype.createCanvas=function(){var a="undefined"===typeof document?new Canvas:document.createElement("canvas");a.ctx=a.getContext("2d");return a};m.prototype.walk=
function(a,b,d){var c=void 0!==d,e=function(g){for(var m=0;m<g.length;m++){var k=g[m];if(b){if(c&&k[b]===d)return a(k);k[b]&&a(k)}else a(k);if(k.childNodes&&(k=e(k.childNodes)))return k}};if(this.vob)return e(this.vob.childNodes)};var d=function(a){if(a.__style)return a.__style;if(!a.getAttribute)return a.__style={};var b=a.getAttribute("style");if(!b)return a.__style={};for(var b=b.split(";"),d={},c=0,e=b.length;c<e;c++){var g=b[c].split(":");g[0]&&g[1]&&(d[g[0].trim()]=g[1].trim())}return a.__style=
d},x=function(a){var b=[];if(!a)return[];for("string"===typeof a&&(a=-1!==a.indexOf(",")?a.split(","):a.split(" "));a.length;){var d=parseFloat(a.shift());b.push(d)}return b},p=function(a,b){return"undefined"!==typeof XPathResult?a.evaluate('//*[@xml:id="'+b+'"]',a,function(){return"http://www.w3.org/XML/1998/namespace"},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue:a.getElementById?a.getElementById(b):null},w={text:!0,rect:!0,circle:!0,ellipse:!0,line:!0,polyline:!0,polygon:!0,path:!0};
e.SVG=m;e.SVG.storage=a;e.SVG.detect=function(a){return 0===a.indexOf("data:image/svg")||0===a.indexOf("<?xml")||0===a.indexOf("<svg")}})(sketch);if("undefined"!==typeof module&&module.exports){var Canvas=require("canvas"),Image=Canvas.Image,DOMParser=require("xmldom").DOMParser;module.exports=sketch.vector.SVG}"undefined"===typeof sketch&&(sketch={});sketch.vector=sketch.vector||{};
(function(){var q=function(e){e.prototype.__dtd="https://sketch.io/dtd/";e.prototype.__namepace="sketchjs";e.prototype.__version="3.0";e.prototype.__attributesNS={labels:{param:"labels",format:"string",value:""},keywords:{param:"labels",format:"string",value:""},license:{param:"license",format:"string",value:""},author:{param:"author",format:"string",value:""},source:{param:"source",format:"string",value:""},version:{param:"version",format:"string",value:""},metadata:{param:"metadata",format:"string",
value:""},brush:{param:"brush",format:"string",value:""},uid:{param:"uid",format:"int",value:""}};e.prototype.__attributes={id:{param:"id",format:"string",value:""},src:{param:"src",format:"string",value:""},href:{param:"href",format:"string",value:""},"xlink:href":{param:"xlink:href",format:"string",value:""},display:{param:"display",format:"string",valid:"inline | block | list-item | run-in | compact | marker | table | inline-table | table-row-group | table-header-group | table-footer-group | table-row | table-column-group | table-column | table-cell | table-caption | none | inherit",
value:"inline"},visibility:{param:"visibility",format:"string",valid:"visible | hidden | collapse | inherit",value:"visible"},viewBox:{param:"viewBox",format:"numarray",value:0},preserveAspectRatio:{param:"preserveAspectRatio",format:"string",valid:"[defer] <align> [<meetOrSlice>]",value:"xMidYMid meet"},x:{param:"x",format:"coordinate",value:""},y:{param:"y",format:"coordinate",value:""},width:{param:"width",format:"coordinate",value:""},height:{param:"height",format:"coordinate",value:""},transform:{param:"transform",
format:"transform",value:"matrix(1,0,0,1,0,0)"},dx:{param:"dx",format:"coordinate",value:""},dy:{param:"dy",format:"coordinate",value:""},cx:{param:"cx",format:"coordinate",value:""},cy:{param:"cy",format:"coordinate",value:""},rx:{param:"rx",format:"float",value:""},ry:{param:"ry",format:"float",value:""},r:{param:"r",format:"coordinate",value:""},x1:{param:"x1",format:"float",value:""},y1:{param:"y1",format:"float",value:""},x2:{param:"x2",format:"float",value:""},y2:{param:"y2",format:"float",
value:""},d:{param:"d",format:"string",value:""},points:{param:"points",format:"string",value:""},"font-size":{param:"font-size",format:"float",valid:"<absolute-size> | <relative-size> | <length> | <percentage> | inherit",value:"medium"},"font-style":{param:"font-style",format:"string",valid:"normal | italic | oblique | inherit",value:"normal"},"font-family":{param:"font-family",format:"string",valid:"[[ <family-name> | <generic-family> ],]* [<family-name> | <generic-family>] | inherit",value:"sans-serif"},
"font-weight":{param:"font-weight",format:"string",valid:"normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 | inherit",value:"normal"},"line-height":{param:"line-height",format:"float",valid:"normal | <number> | <length> | <percentage> | inherit",value:"normal"},"text-decoration":{param:"text-decoration",format:"string",valid:"none | [ underline || overline || line-through || blink ] | inherit",value:"none"},"text-anchor":{param:"text-anchor",format:"string",valid:"start | middle | end | inherit",
value:"start"},kerning:{param:"kerning",format:"float",valid:"auto | <length> | inherit",value:"auto"},"letter-spacing":{param:"letter-spacing",format:"float",valid:"normal | <length> | inherit",value:"normal"},"word-spacing":{param:"word-spacing",format:"float",valid:"normal | <length> | inherit",value:"normal"},"clip-path":{param:"clip-path",format:"string",value:""},clipPathUnits:{param:"clipPathUnits",format:"string",value:"userSpaceOnUse"},opacity:{param:"opacity",format:"float",value:1},fill:{param:"fill",
format:"string",value:"black"},"fill-rule":{param:"fill-rule",format:"string",valid:"nonzero | evenodd | inherit",value:"nonzero"},"fill-opacity":{param:"fill-opacity",format:"float",valid:"<opacity-value> | inherit",value:1},stroke:{param:"stroke",format:"string",value:"black"},"stroke-width":{param:"stroke-width",format:"coordinate",valid:"<percentage> | <length> | inherit",value:1},"stroke-linecap":{param:"stroke-linecap",format:"string",valid:"butt | round | square | inherit",value:"butt"},"stroke-linejoin":{param:"stroke-linejoin",
format:"string",valid:"miter | round | bevel | inherit",value:"miter"},"stroke-miterlimit":{param:"stroke-miterlimit",format:"float",valid:"<miterlimit> | inherit",value:4},"stroke-dasharray":{param:"stroke-dasharray",format:"numarray",valid:"none | <dasharray> | inherit",value:"none"},"stroke-dashoffset":{param:"stroke-dashoffset",format:"coordinate",valid:"<percentage> | <length> | inherit",value:0},"stroke-opacity":{param:"stroke-opacity",format:"float",valid:"<opacity-value> | inherit",value:1},
stops:{param:"stops",format:"string",value:""},gradientUnits:{param:"gradientUnits",format:"string",valid:"userSpace | userSpaceOnUse | objectBoundingBox",value:"userSpace"},gradientTransform:{param:"gradientTransform",format:"gradientTransform",value:"matrix(1,0,0,1,0,0)"},spreadMethod:{param:"spreadMethod",format:"string",valid:"pad | reflect | repeat",value:"pad"},fx:{param:"fx",format:"coordinate",value:""},fy:{param:"fy",format:"coordinate",value:""},patternUnits:{param:"patternUnits",format:"string",
value:""},patternContentUnits:{param:"patternContentUnits",format:"string",value:""},patternTransform:{param:"patternTransform",format:"patternTransform",value:"matrix(1,0,0,1,0,0)"},stdDeviation:{param:"stdDeviation",format:"float",value:0},filter:{param:"filter",format:"string",value:""},color:{param:"color",format:"string",value:""},"color-interpolation-filters":{param:"color-interpolation-filters",format:"string",valid:"auto | sRGB | linearRGB | inherit",value:"sRGB"}}};"undefined"!==typeof module&&
module.exports?module.exports=q:q(sketch.vector.SVG)})();"undefined"===typeof sketch&&(sketch={});sketch.vector=sketch.vector||{};
(function(){var q=function(e){e.prototype.clone=function(a,b){(new e).fromString(this.toDataURL(),function(c){b&&(c.vob.id="clone"+Math.round(16777215*Math.random()));a&&a(c)})};e.prototype.toImage=function(){var a=new Image;a.src=this.toDataURL();a.width=this.vob.width;a.height=this.vob.height;return a};e.prototype.toBlob=function(a){var b=new Blob([this.stringify()],{type:"image/svg+xml"});if(a)a(b);else return b};e.prototype.toDataURL=function(){return"data:image/svg+xml;base64,"+this.btoa()};
e.prototype.btoa=function(){return btoa(this.stringify())};e.prototype.toString=e.prototype.stringify=function(){var c=this,e=function(a,b){if(a&&a.length)for(var f=0,l=a.length;f<l;f++){var p=a[f];if(p){var r=p.type;switch(r){case "circle":case "ellipse":case "image":case "line":case "path":case "polyline":case "polygon":case "rect":h+=b+"<"+r;h=m(h,p);h+="></"+r+">\n";break;case "stamp":case "eraser":case "pencil":r=c.__namepace+":"+r;h+=b+"<"+r;h=m(h,p);h+="></"+r+">\n";break;case "text":h+=b+
"<text";h=m(h,p);h+=">";if(p.content)h+=p.content;else if(p=p.childNodes)for(var r=0,q=p.length;r<q;r++)h+="<tspan",h=m(h,p[r]),h+=">"+p[r].content+"</tspan>";h+="</text>\n";break;case "a":case "g":case "switch":h+=b+"<"+r;h=m(h,p);h+=">\n";e(p.childNodes,b+"\t");h+=b+"</"+r+">\n";break;case "svg":h+='<?xml version="1.0" encoding="utf-8"?>\n';h+="\x3c!-- Generator: sketch.js "+c.__version+" <https://sketch.io/api/> --\x3e\n";h+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"';h+=' xmlns:xlink="http://www.w3.org/1999/xlink"';
h+=" xmlns:"+c.__namepace+'="'+c.__dtd+'"';p.version=p.version||c.__version;h=m(h,p);h+=">\n";d&&(h+="<defs>"+d+"</defs>");e(p.childNodes,b+"\t");h+="</svg>";break;case "use":h+=b+"<use";h=m(h,p);h+=">\n";h+=b+"</use>\n";break;default:e(p.childNodes,b+"\t")}}}},m=function(d,e){for(var f in e)if(void 0!==e[f])switch(f){case "href":var h=a("xlink:href",e[f],c);h&&(d+=h);break;case "clipPath":(h=a("clip-path","url(#"+e[f].id+")",c))&&(d+=h);break;case "viewBox":(h=a(f,e[f].join(" "),c))&&(d+=h);break;
case "transform":case "gradientTransform":case "patternTransform":h=e[f];if(!h)break;(h=a(f,"matrix("+h.a+","+h.b+","+h.c+","+h.d+","+h.x+","+h.y+")",c))&&(d+=h);break;case "fill":case "fillStyle":(h=b("fill",e[f],c))&&(d+=h);break;case "stroke":case "strokeStyle":(h=b("stroke",e[f],c))&&(d+=h);break;case "style":d+=m("",e.style);break;case "attributes":case "element":break;default:(h=a(f,e[f],c))&&(d+=h)}return d},d="",q;for(q in this.defs){var p=this.defs[q];switch(p.type){case "linearGradient":case "radialGradient":for(var d=
d+("<"+p.type),d=m(d,p),d=d+">\n",w=p.stops,r=0;r<w.length;r++){var v=w[r],l=v.color;if("rgba"===l.substr(0,4))var l=sketch.color.space(l,"W3>RGBA"),f=l.A/255,l=sketch.color.space(l,"RGB>W3"),d=d+('\t<stop offset="'+v.offset+'" style="stop-color:'+l+";stop-opacity:"+f+';"/>\n');else d+='\t<stop offset="'+v.offset+'" style="stop-color:'+v.color+';"/>\n'}d+="</"+p.type+">\n";break;case "pattern":var d=d+"<pattern",d=m(d,p),d=d+">\n",p=p.childNodes,h="";p.length&&(e(p,"\t"),d+=h);d+="</pattern>\n";break;
case "filter":d+="<filter";d=m(d,p);d+=">\n";p=p.filter;for(r=0;r<p.length;r++)w=p[r],d+="\t<fe"+w.type,d=m(d,w),d+="/>\n";d+="</filter>\n";break;case "clipPath":d+="<clipPath";d=m(d,p);d+=">\n";p=p.d;for(r=0;r<p.length;r++)w=p[r],d+="\t<"+w.type,d=m(d,w),d+="/>\n";d+="</clipPath>\n"}}h="";e([this.vob],"");return h};var c={type:!0,childNodes:!0,parentNode:!0,matrix:!0,data:!0,bbox:!0},a=function(a,b,e){if(!c[a]){var d=e.__attributes[a];if(!d)if(d=e.__attributesNS[a])a=e.__namepace+":"+a;else if(a=
a.match(e.rxSplitByUppercase).slice(0,-1).join("-").toLowerCase(),d=e.__attributes[a],!d){sketch.feature.debug&&console.log(a,b);return}if(d.value!==b)switch(d.format){case "string":case "gradientTransform":case "patternTransform":case "transform":if("string"!==typeof b)break;return" "+a+'="'+b+'"';case "coordinate":case "float":case "int":if(!isFinite(b))break;return" "+a+'="'+b+'"';case "numarray":return" "+a+'="'+b+'"';default:console.log("unhandled",d)}}},b=function(a,b,c){var d=c.__attributes[a];
if(d&&d.value!==b){"default"===b&&(b="fill"===a?c.defaultFill:c.defaultStroke);if(c.defs[b])return" "+a+'="url(#'+b+')"';if(b)return" "+a+'="'+b+'"'}}};"undefined"!==typeof module&&module.exports?module.exports=q:q(sketch.vector.SVG)})();"undefined"===typeof sketch&&(sketch={});
(function(q){q.vector=q.vector||{};q.vector.SVGFont=function(k){q=q.vector.BBox.__self||q;var u=q.util,m=q.vector;m.fonts=m.fonts||{};var d={direction:"ltr",font:"",fontFamily:"sans-serif",fontSize:"40px",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"alphabetic",textDecoration:"none",textTransform:"none",lineHeight:"1em",letterSpacing:0,whiteSpace:"normal",ctx:k,scaleFactor:1,pkg:{},pkgs:{},load:function(a,d){var c=function(a){var c,f;if(b)f=require("domino").createWindow(a).document;
else{var h=document.createElement("div");"string"===typeof a?h.innerHTML=a:h.appendChild(a);f=h}var h=null,g=f.getElementsByTagName("font")[0],k=f.getElementsByTagName("font-face")[0];a=k.getAttribute("font-family")||a.id;var p=(h=k.getElementsByTagName("font-face-name")[0])?h.getAttribute("name"):a,s=k.getAttribute("font-style")||"all",r=k.getAttribute("font-variant")||"normal",q=k.getAttribute("font-weight")||"all",u=k.getAttribute("font-stretch")||"normal",J=k.getAttribute("unicode-range")||"U+0-10FFFF",
D=k.getAttribute("panose-1")||"0 0 0 0 0 0 0 0 0 0",B=k.getAttribute("cap-height")||0,E=k.getAttribute("x-height")||0,F=parseFloat(k.getAttribute("units-per-em")||1E3,10),h=f.getElementsByTagName("missing-glyph")[0],C={x:parseFloat(g.getAttribute("horiz-adv-x"),10),y:parseFloat(g.getAttribute("vert-adv-y")||0,10)||F};parseFloat(h?h.getAttribute("horiz-adv-x"):C.x,10);var g={horiz:{x:parseFloat(g.getAttribute("horiz-origin-x")||0,10),y:parseFloat(g.getAttribute("horiz-origin-y")||0,10)},vert:{x:parseFloat(g.getAttribute("vert-origin-x")||
0,10),y:parseFloat(g.getAttribute("vert-origin-y")||0,10)}},G=parseFloat(k.getAttribute("ascent")||F-g.vert.y,10),L=parseFloat(k.getAttribute("descent")||g.vert.y,10),K={},R=["alphabetic","ideographic","mathematical","hanging"];for(c in R)(h=k.getAttribute(c=R[c]))&&(K[c]=parseFloat(h,10));k={};f=f.getElementsByTagName("glyph");var N;for(c in f)if((h=f[c]).getAttribute){R=h.getAttribute("unicode");if(R.match(e)){N=R;if(N.match(e)){for(var V={amp:"&",apos:"'",quot:'"',lt:"<",gt:">"},P=void 0,Q="";null!==
(P=e.exec(N));)Q="x"===P[1].charAt(1)?Q+String.fromCharCode(P[1].slice(2),16):isNaN(parseInt(P[1].slice(1),10))?Q+V(P[1]):Q+String.fromCharCode(P[1].slice(1));N=Q}N=N.charCodeAt()}else N=R.charCodeAt();var V=parseFloat(h.getAttribute("horiz-adv-x")||C.x,10),P=h.getAttribute("d"),Q=m.SVGPath.toVOBPath(P)||[],O=new m.BBox(Q);k[N]={unicode:R,name:h.getAttribute("glyph-name"),xadv:V,width:O.x2-O.x1,height:O.y2-O.y1,path:P,data:Q}}c={family:a,name:p,style:s,variant:r,weight:q,stretch:u,range:J,panose:D.split(" ").map(parseFloat),
capHeight:B,unitsPerEm:F,origin:g,advance:C,ascent:G,descent:L,xheight:E,baseline:K,glyphs:k};c=x(c);d&&d(c)};"string"===typeof a&&-1===a.indexOf("<font")&&-1===a.indexOf("<?xml")?u.request({url:a,onload:function(a){c(a.responseText)},onerror:function(a){},onprogress:function(a){}}):c(a)}},x=function(a){if("string"===typeof a){var b=a;a=m.fonts[b]}else b=a.family||"unknown",m.fonts[b]=a;d.pkg.family!==b&&(a?d.pkg=d.pkgs[b]=a:b in d.pkgs&&(d.pkg=d.pkgs[b]));return a};d.measureText=function(a){if(a){a=
""+a;for(var b=d.pkg.glyphs,c=a.length,e=0,l=d.pkg.advance.y,f=0,h=0;h<c;h++){var g=b[a.charCodeAt(h)];g&&(e+=g.xadv,f+=g.width)}return{width:e*d.scaleFactor,height:l*d.scaleFactor,actualWidth:f*d.scaleFactor,actualHeight:0*d.scaleFactor}}};d.strokeText=function(a,b,c,e){if(a&&isFinite(b)&&isFinite(c))return a=this.drawText(a,b,c,e),b=d.ctx,b.stroke(),b.beginPath(),a};d.fillText=function(a,b,c,e){if(a&&isFinite(b)&&isFinite(c))return a=this.drawText(a,b,c,e),b=d.ctx,b.fill(),b.beginPath(),a};d.getTextBaseline=
function(a){switch(a||this.textBaseline){case "alphabetic":return 0;case "top":return d.pkg.ascent*d.scaleFactor;case "hanging":return 8*d.pkg.ascent/10*d.scaleFactor;case "middle":case "absmiddle":return((d.pkg.ascent-d.pkg.descent)/2+d.pkg.descent)*d.scaleFactor;case "ideographic":return d.pkg.descent*d.scaleFactor;case "bottom":return d.pkg.descent*d.scaleFactor;default:return 0}};d.getTextAlign=function(a,b){switch(a){case "left":return 0;case "start":return"ltr"===d.direction?0:d.measureText(b).width;
case "end":return"ltr"===d.direction?d.measureText(b).width:0;case "right":return d.measureText(b).width;case "center":return d.measureText(b).width/2}};d.getScaleFactor=function(){var a=d.fontSize;if("number"===typeof a)var b="px";else b=a.toLowerCase(),a=a=parseFloat(b),b=b.replace(a,"");2<b.length?a=ScreenMetrics[t+"_px"]:"px"!==b&&(a=ScreenMetrics[b+"_px"]*(isNaN(a)?1:a));isNaN(a)||(d.scaleFactor=a/d.pkg.unitsPerEm);return d.scaleFactor};d.drawText=function(a,b,e,k){if(a.length){for(var l=0;l<
c.length;l++)a=a.split(c[l]).join(" ");d.getScaleFactor();var f,l=e||0;f=(b||0)-this.getTextAlign(this.textAlign,a);var l=l+this.getTextBaseline(this.textBaseline),h,g,y,q,s;"object"===typeof k&&(h=k,g=h.minWidth,k=h.maxWidth,y=h.maxHeight,s=h.targetWidth,q=h.targetHeight,h=h.getData);b=d.ctx;b.save();b.beginPath();e=this.measureText(a);var u=e.width,x=e.height;e=h?new m.Transform:b;isFinite(s)?(e.scale(s/u,1),f=f*u/s):(isFinite(k)&&u>k&&(e.scale(k/u,1),f=f*u/k),isFinite(g)&&u<g&&(e.scale(g/u,1),
f=f*u/g));isFinite(q)?(e.scale(1,q/x),l=l*x/q):isFinite(y)&&x>y&&(e.scale(1,y/x),l=l*x/y);(f||l)&&e.translate(f,l);e.scale(d.scaleFactor,-d.scaleFactor);k=d.pkg.glyphs;y=[];"number"===typeof a&&(a=String(a));q=0;for(s=a.length;q<s;q++)g=k[l=a.charCodeAt(q)],10!==l&&13!==l&&(g||(g=k["?".charCodeAt()]),g&&(g.data||(g.data=m.SVGPath.toVOBPath(g.path)||[]),g.data&&(l=g.data,h?y.push({d:g.path,data:e.flatten(g.data,!0,!1)}):(b.beginPath(),m.shape.VOBPath(b,l),b.fill()),e.translate(g.xadv,0))));b.restore();
if(h)return{childNodes:y}}};d.toSVG=function(a,b){new m.SVG({ctx:d.ctx,src:a,onload:function(a){a=a.typeface.pkg.glyphs;var d={},c;for(c in a){var e=a[c];if(e.path){var h=m.SVGPath.toVOBPath(e.path),g=new m.BBox(h),h=(new m.Transform).translate(0,g.y2).scale(1,-1).flatten(h,!0),h=m.SVGPath.fromVOBPath(h),k=g.x2-g.x1,p=g.y2-g.y1,g=g.x1;d[e.unicode.charCodeAt()+".svg"]='<?xml version="1.0" encoding="UTF-8"?><svg version="1.1" width="'+k+'" height="'+p+'" viewBox="'+g+" 0 "+k+" "+p+'" xmlns="http://www.w3.org/2000/svg"><path d="'+
h+'"/></svg>'}}b(d)}})};d.setFont=function(b){if(d.font!==b){for(var c=b.trim().split(" "),e=c.length,m=0,l=0,f=Math.min(3,e);m<f;){var h=c[m];if(0===(l&1)&&-1!==" normal italic oblique ".indexOf(" "+h+" "))d.fontStyle=c[m++],l|=1;else if(0===(l&2)&&-1!==" normal small-caps ".indexOf(" "+h+" "))d.fontVariant=c[m++],l|=2;else if(0===(l&4)&&(-1!==" normal bold bolder lighter ".indexOf(" "+h+" ")||3===h.length&&"1"<=h.charAt(0)&&"9">=h.charAt(0)&&"0"===h.charAt(1)&&"0"===h.charAt(2)))d.fontWeight=a[c[m++]],
l|=4;else break}m<e&&(l=c[m],f=l.indexOf("/"),-1===f?m++:(l=l.substring(0,f),c[m]=c[m].substring(f)),d.fontSize=l);m<e&&"/"===c[m].substr(0,1)&&("/"!==c[m]?d.lineHeight=c[m++].substring(1):++m<e&&(d.lineHeight=c[m++]));if(m<e){for(l=c[m++];m<e;)l+=" "+c[m++];d.fontFamily=l;x(l)}d.font=b}};m.font&&(x(m.font),d.fontFamily=m.font.name);return d};var e=/&(quot|apos|lt|gt|amp|#x[^;]+|#\d+);/g,c=["\t","\n","\x0B","\f","\r"],a={normal:400,bold:700,lighter:300,bolder:500},b="undefined"!==typeof module&&module.exports;
b&&(module.exports=q.vector.SVGFont)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q=q.vector=q.vector||{};var e=q.SVGPath=q.SVGPath||{},c={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0};e.fromVOBPath=function(a){for(var b="",c={},e=0,m=a.length;e<m;e++)if(c=a[e])switch(c.cmd){case "M":b+="M"+c.x+" "+c.y+" ";break;case "L":b+="L"+c.x+" "+c.y+" ";break;case "C":b+="C"+c.x1+" "+c.y1+", "+c.x2+" "+c.y2+", "+c.x+" "+c.y+" ";break;case "Q":b+="Q"+c.x1+" "+c.y1+", "+c.x+" "+c.y+" ";break;case "Z":case "z":b+="z"}return b.substr(0,b.length-1)};e.fromVARPath=function(a){for(var b=
"",c={},e=0,m=a.length;e<m;e++)if(c=a[e])switch(c[0]){case "M":b+="M"+c[1]+" "+c[2]+" ";break;case "L":b+="L"+c[1]+" "+c[2]+" ";break;case "C":b+="C"+c[1]+" "+c[2]+", "+c[3]+" "+c[4]+", "+c[5]+" "+c[6]+" ";break;case "Q":b+="Q"+c[1]+" "+c[2]+", "+c[3]+" "+c[4]+" ";break;case "Z":case "z":b+="z"}return b.substr(0,b.length-1)};e.fromVOBPolygon=function(a){for(var b="",c={},e=0,m=a.length;e<m;e++)switch((c=a[e]).cmd){case "Z":break;default:case "M":case "L":b+=c.x+","+c.y+" "}return b.substr(0,b.length-
1)};e.toVOBPolygon=function(a){if(a){a=a.match(/[0-9]*/gi);for(var b=[],c=0,e=a.length;c<e;c++)a[c]&&b.push(parseFloat(a[c]));a=[];c=0;for(e=b.length;c<e;c+=2)a.push({x:b[c],y:b[c+1]});return a}};e.toVOBPath=function(a){if(a){a=a.replace(/([^e])([+-])/gi,"$1 $2");a=a.match(/([mlhvcsqtaz])|(([\-0-9]*\.?[0-9]*)|(\.[0-9]+))(e[+-]?[0-9]+)?/gi);for(var b=[],k=0,q=a.length;k<q;k++)a[k]&&b.push(a[k]);a=b;for(var b="",m=k=0,d=0,x=0,p=0,w,r,v="",l=0,f=[];b=a[k];){var h=c[b.toLowerCase()]+1;if(h){for(var g=
1,q=h,y=[];g<q;g++)y.push(parseFloat(a[k+g]));l=h;k+=h}else{g=0;q=l-1;for(y=[];g<q;g++)y.push(parseFloat(a[k+g]));b="m"===v?"l":"M"===v?"L":v;k+=l-1}if(b){switch(b){case "M":m=y[0];d=y[1];x=m;p=d;w=r=null;f.push({cmd:"M",x:m,y:d});break;case "m":m+=y[0];d+=y[1];x=m;p=d;w=r=null;f.push({cmd:"M",x:m,y:d});break;case "L":m=y[0];d=y[1];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "l":m+=y[0];d+=y[1];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "H":m=y[0];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "h":m+=
y[0];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "V":d=y[0];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "v":d+=y[0];w=r=null;f.push({cmd:"L",x:m,y:d});break;case "C":m=y[4];d=y[5];w=y[2];r=y[3];f.push({cmd:"C",x1:y[0],y1:y[1],x2:y[2],y2:y[3],x:y[4],y:y[5]});break;case "c":0===y[4]&&0===y[5]&&(y[4]+=1E-4,y[5]+=1E-4);f.push({cmd:"C",x1:y[0]+m,y1:y[1]+d,x2:y[2]+m,y2:y[3]+d,x:y[4]+m,y:y[5]+d});w=m+y[2];r=d+y[3];m+=y[4];d+=y[5];break;case "S":null!==w&&v.match(/[sc]/i)||(w=m,r=d);f.push({cmd:"C",x1:m-
(w-m),y1:d-(r-d),x2:y[0],y2:y[1],x:y[2],y:y[3]});w=y[0];r=y[1];m=y[2];d=y[3];break;case "s":0===y[2]&&0===y[3]&&(y[2]+=1E-4,y[3]+=1E-4);null!==w&&v.match(/[sc]/i)||(w=m,r=d);f.push({cmd:"C",x1:m-(w-m),y1:d-(r-d),x2:m+y[0],y2:d+y[1],x:m+y[2],y:d+y[3]});w=m+y[0];r=d+y[1];m+=y[2];d+=y[3];break;case "Q":w=y[0];r=y[1];m=y[2];d=y[3];f.push({cmd:"Q",x1:y[0],y1:y[1],x:y[2],y:y[3]});break;case "q":0===y[2]&&0===y[3]&&(y[2]+=1E-4,y[3]+=1E-4);f.push({cmd:"Q",x1:y[0]+m,y1:y[1]+d,x:y[2]+m,y:y[3]+d});w=m+y[0];
r=d+y[1];m+=y[2];d+=y[3];break;case "T":null!==w&&v.match(/[qt]/i)?(w=m-(w-m),r=d-(r-d)):(w=m,r=d);f.push({cmd:"Q",x1:w,y1:r,x:y[0],y:y[1]});m=y[0];d=y[1];break;case "t":0===y[0]&&0===y[1]&&(y[0]+=1E-4,y[1]+=1E-4);null!==w&&v.match(/[qt]/i)?(w=m-(w-m),r=d-(r-d)):(w=m,r=d);f.push({cmd:"Q",x1:w,y1:r,x:m+y[0],y:d+y[1]});m+=y[0];d+=y[1];break;case "A":q=e.arcToBezier(m,d,y[0],y[1],y[2],y[3],y[4],y[5],y[6]);for(m=0;m<q.length;m++)f.push(q[m]);m=y[5];d=y[6];break;case "a":y[5]+=m;y[6]+=d;q=e.arcToBezier(m,
d,y[0],y[1],y[2],y[3],y[4],y[5],y[6]);for(m=0;m<q.length;m++)f.push(q[m]);m=y[5];d=y[6];break;case "Z":f.push({cmd:"Z",x:x,y:p});p=x=0;break;case "z":f.push({cmd:"Z",x:x,y:p}),m=x,d=p}v=b}}return f}};e.arcToBezier=function(a,b,c,e,m,d,q,p,w){var r=m*Math.PI/180;m=Math.sin(r);var r=Math.cos(r),v=[];c=Math.abs(c);e=Math.abs(e);var l=r*(a-p)*.5+m*(b-w)*.5,f=r*(b-w)*.5-m*(a-p)*.5,l=l*l/(c*c)+f*f/(e*e);1<l&&(l=Math.sqrt(l),c*=l,e*=l);var l=r/c,f=m/c,h=-m/e,g=r/e,y=l*a+f*b;b=h*a+g*b;a=l*p+f*w;p=h*p+g*w;
l=1/((a-y)*(a-y)+(p-b)*(p-b))-.25;0>l&&(l=0);l=Math.sqrt(l);q===d&&(l=-l);d=.5*(y+a)-l*(p-b);w=.5*(b+p)+l*(a-y);y=Math.atan2(b-w,y-d);b=Math.atan2(p-w,a-d)-y;0>b&&1===q?b+=2*Math.PI:0<b&&0===q&&(b-=2*Math.PI);q=Math.ceil(Math.abs(b/(.5*Math.PI+.001)));for(var z=0;z<q;z++){p=y+z*b/q;var s=y+(z+1)*b/q,l=r*c,f=-m*e,h=m*c,g=r*e;a=.5*(s-p);var A=8/3*Math.sin(.5*a)*Math.sin(.5*a)/Math.sin(a);a=d+Math.cos(p)-A*Math.sin(p);p=w+Math.sin(p)+A*Math.cos(p);var H=d+Math.cos(s),I=w+Math.sin(s),J=H+A*Math.sin(s),
s=I-A*Math.cos(s);v[z]={cmd:"C",x1:l*a+f*p,y1:h*a+g*p,x2:l*J+f*s,y2:h*J+g*s,x:l*H+f*I,y:h*H+g*I}}return v};"undefined"!==typeof module&&module.exports&&(module.exports=e)})(sketch);"undefined"===typeof sketch&&(sketch={});sketch.vector=sketch.vector||{};
(function(q){var e=function(c){c.prototype.render=function(a){a=a||{};q=c.__self||q;if(this.vob){var b=a.calcStroke?a.viewBoxStroke||this.viewBoxStroke:a.viewBox||this.viewBox,e=a.placement||this.placement;if("[object CanvasRenderingContext2D]"===String(a))var u=a,m=q.vector.Transform.getIdentity();else u=a.ctx||this.ctx,u||(u=this.ctx=this.createCanvas().ctx),m=a.matrix||q.vector.Transform.getIdentity();u.save();switch(e){case "crop":var d=b[2]-b[0],x=b[3]-b[1],m=(new q.vector.Transform).translate(-b[0],
-b[1]).matrix;a.width&&a.height?(e=a.width,e=Math.min(e/d,a.height/x),m.a*=e,m.d*=e,m.x+=b[0]*(1-e),m.y+=b[1]*(1-e),b=(x-d)*e/2,0<b?m.x+=b:m.y-=b,u.canvas.width=a.width,u.canvas.height=a.height):(u.canvas.width=d>>0,u.canvas.height=x>>0);u.transform(m.a,m.b,m.c,m.d,m.x,m.y);break;case "bbox":d=b[2]*m.a;e=d-b[0]*m.a;e=m.a*(d/e-1);this.vob.matrix=m;m.a+=e;m.d+=0>m.a*m.d?-e:e;m.x-=b[0]*m.a;m.y-=b[1]*m.d;m=this.vob.matrix;u.transform(m.a,m.b,m.c,m.d,m.x,m.y);break;case "none":u.canvas.width=this.ctx.canvas.width,
u.canvas.height=this.ctx.canvas.height}a.defaultFill&&(this.defaultFill=a.defaultFill);b=a.childNodes||[this.vob];this.activeAreas=[];this.renderChildNodes(u,a,b);u.restore();return this.activeAreas}};c.prototype.renderChildNodes=function(a,b,c,e){if(c&&c.length){var m=c.length,d=q.vector.shape;this.typeface&&(this.typeface.ctx=a);for(var x=0;x<m;x++){var p=c[x];this.currentNode=p;a&&(a.save(),a.beginPath(),a.save());if(p.matrix){var w=p.matrix;a&&a.transform(w.a,w.b,w.c,w.d,w.x,w.y)}p.clipPath&&
p.clipPath.length&&(this.renderChildNodes(a,b,p.clipPath,!0),a&&(a.clip(),a.beginPath()));switch(p.type){case "image":a.drawImage(p.image,p.x,p.y,p.width,p.height);break;case "line":a.moveTo(p.x1,p.y1);a.lineTo(p.x2,p.y2);break;case "polyline":case "polygon":case "path":d.VOBPath(a,p.data);break;case "ellipse":d.ellipse(a,p.cx,p.cy,p.rx,p.ry);break;case "circle":d.ellipse(a,p.cx,p.cy,p.r,p.r);break;case "rect":isFinite(p.rx)?d.roundRect(a,p.x,p.y,p.width,p.height,p.rx,p.ry):d.rect(a,p.x,p.y,p.width,
p.height)}b.point&&a.isPointInPath(b.point.x,b.point.y)&&this.activeAreas.push(p);(w=p.style)&&!e&&(a.save(),void 0!==w.opacity&&(a.globalAlpha=w.opacity),w.fillStyle&&(a.save(),this.setStyle(a,this.defs[w.fillStyle]||w,"fillStyle",this.defaultFill),a.globalAlpha*=w.fillOpacity,p.content?(a.font=this.fontStyleToString(a,w),"SVG"===w.fontRenderer?(this.typeface.setFont(a.font),this.typeface.fillText(p.content,p.x,p.y)):a.fillText(p.content,p.x,p.y)):a.fill(),a.restore()),a.lineWidth=0===w.strokeWidth?
1E-10:w.strokeWidth||1,a.lineCap=w.strokeLinecap||"butt",a.lineJoin=w.strokeLinejoin||"miter",a.miterLimit=w.strokeMiterlimit||a.lineWidth,w.strokeStyle&&"none"!==w.strokeStyle&&(a.save(),this.setStyle(a,this.defs[w.strokeStyle]||w,"strokeStyle",this.defaultStroke),a.globalAlpha*=w.strokeOpacity,p.content?(a.font=this.fontStyleToString(a,w),"SVG"===w.fontRenderer?(this.typeface.setFont(a.font),this.typeface.strokeText(p.content,p.x,p.y)):a.strokeText(p.content,p.x,p.y)):a.stroke(),a.restore()),a.restore());
this.debugBBox&&p.bbox&&!e&&(w=p.bbox,a.save(),a.setTransform(1,0,0,1,0,0),a.strokeRect(w.x1,w.y1,w.x2-w.x1,w.y2-w.y1),a.restore());a.restore();p.childNodes&&p.childNodes.length&&this.renderChildNodes(a,b,p.childNodes,e);a.restore()}}};c.prototype.setStyle=function(a,b,e,u){q=c.__self||q;void 0!==b.strokeWidth&&(a.lineWidth=b.strokeWidth||1E-10);void 0!==b.strokeLinecap&&(a.lineCap=b.strokeLinecap);void 0!==b.strokeLinejoin&&(a.lineJoin=b.strokeLinejoin);void 0!==b.strokeMiterlimit&&(a.miterLimit=
b.strokeMiterlimit);var m;if(b.gradientTransform){var d=b.gradientTransform;this.currentNode&&this.currentNode.matrix&&(m=new q.vector.Transform,m.transform(d.a,d.b,d.c,d.d,d.x,d.y),m=m.matrix)}switch(b.type){case "linearGradient":void 0===b.x1&&(b.x1=0);void 0===b.y1&&(b.y1=0);void 0===b.x2&&(b.x2=0);void 0===b.y2&&(b.y2=0);if(!a)break;m&&a.transform(m.a,m.b,m.c,m.d,m.x,m.y);if("objectBoundingBox"===b.gradientUnits){0===b.x1&&0===b.y1&&0===b.x2&&0===b.y2&&(b.x2=1);var x=this.currentNode;if(!x.bbox)break;
u=x.bbox;var p=u.x1+(u.x2-u.x1)*b.x1,w=u.y1+(u.y2-u.y1)*b.y1,r=u.x1+(u.x2-u.x1)*b.x2,v=u.y1+(u.y2-u.y1)*b.y2;m=a.createLinearGradient(p,w,r,v);m=(new q.vector.Transform(x.matrix)).invert();p=m.point2d(p,w);m=m.point2d(r,v);m=a.createLinearGradient(p.x,p.y,m.x,m.y)}else m=a.createLinearGradient(b.x1,b.y1,b.x2,b.y2);u=0;for(d=b.stops.length;u<d;u++){var l=b.stops[u];m.addColorStop(l.offset,l.color)}a[e]=m;break;case "radialGradient":void 0===b.cx&&(b.cx=.5);void 0===b.cy&&(b.cy=.5);void 0===b.fx&&(b.fx=
.5);void 0===b.fy&&(b.fy=.5);void 0===b.r&&(b.r=.5);if(!a)break;m&&a.transform(m.a,m.b,m.c,m.d,m.x,m.y);if("objectBoundingBox"===b.gradientUnits){x=this.currentNode;u=x.bbox;if(!x.bbox)break;var d=u.x2-u.x1,l=u.y2-u.y1,p=u.x1+d*b.cx,w=u.y1+l*b.cy,r=u.x1+d*b.fx,v=u.y1+l*b.cy,f=Math.max(d,l)*b.r*1.6;m=(new q.vector.Transform(x.matrix)).invert();p=m.point2d(p,w);m=m.point2d(r,v);m=a.createRadialGradient(p.x,p.y,0,m.x,m.y,f);l<d&&(d=l/d,a.translate(0,u.y2),a.scale(1,d))}else m=a.createRadialGradient(b.cx,
b.cy,0,b.fx,b.fy,b.r);u=0;for(d=b.stops.length;u<d;u++)l=b.stops[u],m.addColorStop(l.offset,l.color);a[e]=m;break;case "pattern":a.translate(b.x||0,b.y||0);a[e]=b.pattern||"transparent";break;default:a[e]="default"===b[e]?u||this.defaultFill:b[e]}}};"undefined"!==typeof module&&module.exports?(require("xmldom"),module.exports=e):e(q.vector.SVG)})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.SVG=function(c){var a=this,b=c.lang;this.save=function(a){var b=c.doc,m=b.scene,d=b.toolkit,q=b.canvas2d;a=a||{};var p,w=a.data||m.children;"function"===typeof a?p=a:"object"===typeof a?(w=a.items||w,p=a.onsave||a.callback||e):p=e;for(var r=[],v=new c.vector.SVG,w=m.clone(w),l=0;l<w.length;l++){var f=w[l],h=f.bbox;f.style||(f.style={});var g={a:h.scale.x,b:0,c:0,d:h.scale.y,x:h.x+q.x,y:h.y+q.y},y={id:f.id,type:f.type,parentNode:v.vob},z=f.type,s=c.detect.brush[z],
A=c.detect.shape[z];if(s||A){var H=f.data;s&&(y.type="polyline");s&&(z="brush");A&&(z="shape");switch(z){case "shape":z=new c.vector.shape.record;s=Math.max(h.width,h.height)/2;b.toolkit.shape.render(z,h.x,h.y,s,f);y.d=z.stringify();y.type="path";break;case "stamp":case "path":y.d=c.vector.SVGPath.fromVOBPath(H);break;case "brush":case "polygon":case "polyline":y.points=c.vector.SVGPath.fromVOBPolygon(H);break;default:console.log(z)}f.src&&(y.src=f.src)}else if("text"===z)y.content=f.content,m.copyAttributes(d.text._attributes,
f,y),g.y+=h.height;else if("clipart"===z){z=c.assets.getById(f.src);if(!z)continue;A=h.viewBox;s=A[2]-A[0];A=A[3]-A[1];y.type="image";y["xlink:href"]=z.toDataURL();g.a*=h.width/s;g.d*=h.height/A;y.width=h.width;y.height=h.height}else"image"===z?(y["xlink:href"]=f.src,y.width=h.width,y.height=h.height):console.log(z,f);y.bbox={x1:h.x,y1:h.y,x2:h.x+h.width,y2:h.y+h.height};y.matrix=g;y.transform=g;h=y;g=f.style.opacity;z=f.style.fillOpacity;s=f.style.fillRule;A="color"===f.fill.type?f.fill.color:"url(#gradient0)";
h.style={opacity:g,fillOpacity:z,fillRule:s,fillStyle:A,strokeLinecap:f.style.strokeLinecap,strokeLinejoin:f.style.strokeLinejoin,strokeMiterlimit:f.style.strokeMiterlimit,strokeDasharray:f.style.strokeDasharray,strokeDashoffset:f.style.strokeDashoffset,strokeOpacity:f.style.strokeOpacity,strokeStyle:f.style.strokeStyle,strokeWidth:f.diameter};f.labels&&(y.labels=f.labels.join(","));f.license&&(y.license=f.license);f.author&&(y.author=f.author);r.push(y)}m=b.getBounds();v.viewBox=[0,0,m.width,m.height];
v.vob.childNodes=r;v.vob.metadata=btoa(b.mixinDefs(b,{}));v.stringify?a.toDataURL?p(v,v.toDataURL()):p(v,v.stringify()):console.log("Missing SVGExport module.")};this.toActions=function(a,b){var e=c.doc,d=a.data;if(!d.vob)return console.log("error",d);d=d.vob.childNodes;if(a.mergeIntoScene)var q=[];else q=[],e.scene.setData(q);var p=function(a){for(var b=0;b<a.length;b++){var d=a[b];d.childNodes&&p(d.childNodes);if(d.data){for(var l=d.matrix,f=(new CSSMatrix("matrix("+[l.a,l.b,l.c,l.d,l.x,l.y].join()+
")")).decompose(),l=f.rotate,h=f.scale,f=f.translate,g=new c.vector.bbox(d.data),k=g.x,u=g.y,s=e.scene.clone(d.data),A=0;A<s.length;A++)isFinite(s[A].x)&&(s[A].x-=k,s[A].y-=u),isFinite(s[A].x1)&&(s[A].x1-=k,s[A].y1-=u),isFinite(s[A].x2)&&(s[A].x2-=k,s[A].y2-=u);l={zIndex:b,composite:"source-over",data:s,diameter:d.style.strokeWidth,opacity:100*d.style.fillOpacity,fill:{type:"color",color:d.style.fillStyle},id:e.scene.createId(d.id),type:d.type,style:d.style,bbox:{x:k*h.x+f.x,y:u*h.y+f.y,width:g.width/
h.x,height:g.height/h.y,units:"objectBoundingBox",scale:{x:h.x,y:h.y},rotate:l.z}};d.labels&&(l.labels=d.labels.split(","));d.license&&(l.license=d.license);d.author&&(l.author=d.author);q.push(l)}}};p(d);b(q)};this.add=function(b,c,e){b.mergeIntoScene=!0;a.open(b,c,e)};this.open=function(k,q,m){var d=c.doc;if(!k)return console.log("error: missing configuration");q=q||k.onload||e;m=m||k.onerror||e;var x;k.data?x=k.data:"string"===typeof k?x=k:k.src&&(x=k.src);0===x.indexOf("<polygon")&&(x='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:sketchjs="https://sketch.io/dtd/" sketchjs:version="3.0">'+
x+"</svg>");0===x.indexOf("<svg")&&(x='<?xml version="1.0" encoding="UTF-8"?>'+x);0===x.indexOf("<?xml")&&(x="data:image/svg+xml;base64,"+btoa(x));c.loader&&c.loader.create("thread",b.translate("reading-format",".SVG..."),0);var p=k.mergeIntoScene;new c.perf;return new c.vector.SVG({skipRender:!0,placement:"none",src:x,onerror:m,onload:function(e){if(e.vob.metadata){var m=JSON.parse(atob(e.vob.metadata));d.labels=m.labels;d.license=m.license;d.author=m.author}a.toActions({data:e,mergeIntoScene:p},
function(a){c.loader&&c.loader.create("thread",b.translate("rendering")+"...",50);setTimeout(function(){if(p)c.io.json.merge(a),c.loader&&c.loader.create("thread",null,100);else{var b=e.vob.viewBox||e.viewBox||[0,0,window.innerWidth,window.innerHeight];d.setSize(b[2],b[3]);d.scene.reset();d.scene.setData(a);d.render.preload({chunkBatch:!0,onload:function(){c.loader&&c.loader.stop("thread");q&&q(a)}})}},1)})}})}};var e=function(c,a){console.log("callback",c,a)};"undefined"!==typeof module&&module.exports&&
(module.exports=q.module.SVG)})(sketch);
(function(q){q.registerToolkit("media",function(e,c){var a=this,b=c.toolkit.area,k=c.canvas2d,q=e.feature,m=c.render,d=c.scene,x=c.toolkit,p=e.util;a.id="media";a.units=q.tools.media.units||q.tools.units;a.defaultWidth=100;a.defaultHeight=100;a.minWidth=1E-8;a.minHeight=1E-8;a._attributes={hue:"number",saturation:"number",temperature:"number",tint:"number",exposure:"number",brightness:"number",contrast:"number",src:"string"};var w=p.clone(a._attributes);a.attributes=p.mixin(e.attrs.__styledObject,
w);a.enable=function(){var a=x.select;c.tool!==a&&a&&a.enable({cursor:!0,searchParam:{toolkit:q.tools.media.useSearch,throwInvalid:!0}})};a.disable=function(){var a=x.select;c.tool!==a&&a&&a.disable({cursor:!0})};a.loadResource=function(a){var b=a.layer,d=a.onerror,g=a.onload,m=a.onprogress,k=a.useDirtyCache,p=b.src;a=b.type;if(c.config[a]&&p){var q=b.bbox,u=q.owidth||q.width,x=q.oheight||q.height;e.assets.add({src:p,type:a,width:u,height:x,onprogress:function(a){m&&m(a.loaded/a.total)},onerror:function(){if(d){var a=
p.split("/").pop();d(b,"&ldquo;"+a+"&rdquo; unavailable.")}},onload:function(a){(this.setAttribute||"image"===b.type||"video"===b.type?r:v)({hash:a,asset:this,src:p,layer:b,onload:g,doscale:function(a,b){u/a>x/b&&(x=u/a*b);u/a<x/b&&(u=x/b*a);q.width=u;q.height=x;q.owidth=q.owidth||u;q.oheight=q.oheight||x},useDirtyCache:k})}})}else d&&d([b,a+" unavailable"])};var r=function(a){var b=a.layer,d=a.asset,c=a.onload;a=a.doscale;var e=b.bbox,e="default"===d.className?[0,0,e.width,e.height]:[0,0,d.width,
d.height];a(e[2]-e[0],e[3]-e[1]);b.dirtyTransform=!0;b.bbox.viewBox=e;b.render=function(a,b,c){var e=this.bbox,f=e.width;b=e.height;var g=e.scale,e=g.x,g=g.y,l=0>e?f*e:0,m=0>g?b*g:0,f=Math.abs(f*e);b=Math.abs(b*g);a.save();c?(a.scale(1/e,1/g),a.scale(l?-1:1,m?-1:1)):(a.scale(l?-1:1,m?-1:1),a.translate(l,m));a.drawImage(d,0,0,f,b);a.restore()};c&&c(b)},v=function(a){if(!p.exists("sketch.vector.SVG"))throw"sketch.vector.SVG is required";var b=a.layer,d=a.asset,c=a.onload,e=a.doscale;a=b.bbox;var m=
a.width,k=a.height,q=d.viewBox||[0,0,m,k];e(q[2]-q[0],q[3]-q[1]);if("objectBoundingBox"===a.units){var e=a.scale,r=a.height;a.x+=(1-a.width/m)*m/2*e.x;a.y+=(1-r/k)*k/2*e.y}b.svg=d;b.dirtyCheck=!0;b.bbox.viewBox=q;b.render=function(a,b,c){var e={ctx:a};"symbol"===this.type&&(e.defaultFill=this.fill&&this.fill.color?this.fill.color:"#000000");c||(e.matrix=b.matrix);e.calcStroke=!0;var f=this.bbox;b=f.width;var g=f.height,l=f.scale,f=l.x,l=l.y;d.render||console.warn("error",d);a.save();c||a.translate((0>
f?-b:0)*f,(0>l?-g:0)*l);c=b/q[2];a.scale(c,c);d.render(e);a.restore()};c&&c(b)};a.updateTimeout=function(e,f){var h=c.selection.item;if(h){var g=h.bbox;a.sizeAtRender=Math.sqrt(g.width*g.height);h.dirtyCheck=!0;h.bbox.scaleCache={x:1,y:1};d.updateConstrain(h);d.updateTransform(h);e?m.sceneGCO("media.updateTimeout"):(m.prepareGCO(h.composite),m.layer(a.active,h),b.renderControls(c.selection.idx))}};a.record=function(l,f,h){l&&eventjs.prevent(l);if((!l||q.placement.drag)&&"eyeDropper"!==e.ui.colorPicker.state){var g=
a.style;if("function"!==typeof g.render){f.pause&&f.pause();var y=e.lib[g.type];!g.src&&y&&y.paths&&(console.warn("find default path"),g.src=y.getSrc(y.paths[0]));var r=function(b){b.src?(f.resume&&f.resume(),a.record(l,f,h)):console.warn("missing src",b)};a.loadResource({layer:g,onerror:r,onload:r})}else{var r=!!f.layer,s=c.zoom,v=(s-1)/s,w=s*c.pixelRatio,I=c.scrollLeft*v,y=c.scrollTop*v,J=f.start,v=J.x/s+I,J=J.y/s+y,D=f.y/s+y,B=f.x/s+I,y=g.bbox;Math.min(v,B);Math.min(J,D);s=2*(Math.abs(v-B)||1);
I=2*(Math.abs(J-D)||1);if(f.layer&&f.layer.bbox){var E=f.layer.bbox;isFinite(E.width)&&(s=E.width);isFinite(E.height)&&(I=E.height)}else s/y.width>I/y.height?I=s/y.width*y.height:s=I/y.height*y.width;if("down"===f.state){r=d.copyAttributes(a.attributes,c.config[a.type],{});f.layer&&(d.copyAttributes(a.attributes,f.layer,r),y=g.bbox=f.layer.bbox);r.bbox=p.clone(y);r.render=g.render;r.dirtyCheck=!0;r.visible=!1;y=e.lib[a.type];(y=y.byPath[g.src])&&d.copyRules(y,r);if(y=d.addObject(r,g,f.layer?!1:!0)){var F=
y.bbox;F.units=a.units;F.scale={x:1,y:1};F.x=v-1*k.x/w;F.y=J-1*k.y/w;F.width=s;F.height=I}else f.layer&&h(y,"media error");a.sizeAtRender=Math.sqrt(s*I)}else if(y=c.selection.item){y.dirtyTransform=!0;y.dirtyControl=!0;F=y.bbox;F.x=v-1*k.x/w;F.y=J-1*k.y/w;F.width=s;F.height=I;w=x.getDimensionConstraint(y,null,!0);F.width=F.owidth=w.width;F.height=F.oheight=w.height;E=Math.sqrt(w.width*w.height)/a.sizeAtRender;F.scaleCache={x:E,y:E};if(l&&l.shiftKey)F.rotate=0;else if(f.layer&&f.layer.bbox)p.mixin(f.layer.bbox,
y.bbox),F.width=w.width,F.height=w.height;else if(void 0===f.rotate||!0===f.rotate)v=-Math.atan2(B-v,D-J)*p.RAD_DEG,F.rotate=(v+360)%360;v=F.scale;F.x-=v.x*w.width/2;F.y-=v.y*w.height/2;if("up"===f.state&&(!1===r&&(b.inGenesis=c.selection.id),y.visible=!0,"clipart"===y.type&&(y.svg=g.svg),s*I<a.minWidth*a.minHeight))if(q.placement.click)5>=s&&5>=I?(g=a.defaultWidth,v=a.defaultHeight):(g=a.minWidth,v=a.minHeight),g/s>v/I&&(v=g/s*I),g/s<v/I&&(g=v/I*s),F.width=g,F.height=v,F.owidth=g,F.oheight=v,F.x-=
(g-s)/2,F.y-=(v-I)/2;else{r=c.selection.id;d.deselectAll();d.removeById(r);m.scene("toolkit.media.record");return}clearTimeout(b.timeout);g="down"===f.state;v="up"===f.state;s=w.constrained&&E||.5>E||3<E||v;if(r){if(v)return h(y)}else g?c.__interacting=!0:v&&(c.__interacting=!1),v||s?(a.updateTimeout(v,r),f.layer&&h(y)):(d.updateBBox(y),!1===r&&(m.prepareGCO(y.composite),m.layer(a.active,y),b.renderControls(c.selection.idx),b.timeout=setTimeout(a.updateTimeout,250)))}}}};a.onEnterKey=function(){d.deselectAll().render()};
a.style={bbox:{x:0,y:0,width:100,height:100,rotate:0,scale:{x:1,y:1}}};return x.init(a)})})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],c=function(a,b){if(!(this instanceof c))return new c(a,b);this.filters={};this.id="ColorMatrix";if(a)if("object"===typeof a){var k=!0,q;for(q in a)k=!1;k&&(this.matrix=e.slice(0));for(var m in a)break;if("number"===typeof a[m])if(isNaN(m))this.update(a);else{k={};for(q in a)k[q]=o[q];this.matrix=k}else"object"===typeof a[m]&&this.combine(a)}else this.update(a,b);else this.matrix=e.slice(0);return this};c.prototype={brightness:function(a){return[1,
0,0,0,a,0,1,0,0,a,0,0,1,0,a,0,0,0,1,0]},contrast:function(a,b){b=b||.5;return[++a,0,0,0,b*(1-a),0,a,0,0,b*(1-a),0,0,a,0,b*(1-a),0,0,0,1,0]},sepia:function(){return[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]},exposure:function(a){return[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0]},colorize:function(a){var b=(a>>>16&255)/255,c=(a>>>8&255)/255,q=(a&255)/255;a=(a>>>24)/255;b=[.212656*b,.715158*b,.072186*b,0,0,.212656*c,.715158*c,.072186*c,0,0,.212656*q,.715158*q,.072186*q,0,0,0,
0,0,1,0];if(1>a)for(c=0;20>c;c++)b[c]=(1-a)*e[c]+a*b[c];return b},monotone:function(a){var b=(a>>>16&255)/255,c=(a>>>8&255)/255,q=(a&255)/255;a=(a>>>24)/255;b=[b,c,q,0,0,b,c,q,0,0,b,c,q,0,0,0,0,0,1,0];if(1>a)for(c=0;20>c;c++)b[c]=(1-a)*e[c]+a*b[c];return b},hue:function(a){a*=sketch.util.DEG_RAD;var b=Math.cos(a);a=Math.sin(a);return[.212656+.787344*b+-.212656*a,.715158+-.715158*b+-.715158*a,.072186+-.072186*b+.927814*a,0,0,.212656+-.212656*b+.143*a,.715158+b*(1-.715158)+.14*a,.072186+-.072186*b+
-.283*a,0,0,.212656+-.212656*b+-.787344*a,.715158+-.715158*b+.715158*a,.072186+.927814*b+.072186*a,0,0,0,0,0,1,0]},invert:function(a,b){b=b||1;a*=-1;return[a,0,0,0,b,0,a,0,0,b,0,0,a,0,b,0,0,0,1,0]},temperature:function(a){return[1+a/256,0,0,0,0,0,1,0,0,0,0,0,1+-a/256,0,0,0,0,0,1,0]},tint:function(a){return[1+a/256,0,0,0,0,0,1+-a/256,0,0,0,0,0,1+a/256,0,0,0,0,0,1,0]},saturation:function(a){var b=.212656*(1-a),c=.715158*(1-a),e=.072186*(1-a);return[b+a,c,e,0,0,b,c+a,e,0,0,b,c,e+a,0,0,0,0,0,1,0]},blend:function(a,
b){for(var c=this.matrix,e=[],m=0;20>m;m++)e[m]=(1-b)*c[m]+b*a[m];this.matrix=e;return this},light:function(a,b,c,e){c=e.highlights;b=-clamp(c.value*(c.max-c.min)+c.min,c.min,c.max);c=e.shadows;e=-clamp(c.value*(c.max-c.min)+c.min,c.min,c.max);var m=Math.PI;c=Math.cos(m);for(var m=Math.sin(m),d=a.data,q=d.length,p=0;p<q;p+=4){var w=d[p],r=d[p+1],v=d[p+2],l=w,f=r,h=v,w=w^255,r=r^255,v=v^255,g=(.299+.701*c+.168*m)*w+(.587-.587*c+.33*m)*r+(.114-.114*c-.497*m)*v,y=(.299-.299*c-.328*m)*w+(.587+.413*c+
.035*m)*r+(.114-.114*c+.292*m)*v,z=(.299-.3*c+1.25*m)*w+(.587-.588*c-1.05*m)*r+(.114+.886*c-.203*m)*v,w=l<g?l:g,r=f<y?f:y,v=h<z?h:z,l=(1-b)*l+b*w,f=(1-b)*f+b*r,h=(1-b)*h+b*v,w=l>g?l:g,r=f>y?f:y,v=h>z?h:z,l=(1-e)*l+e*w,f=(1-e)*f+e*r,h=(1-e)*h+e*v;d[p]=(0>l?0:256>l?l:255)>>0;d[p+1]=(0>f?0:256>f?f:255)>>0;d[p+2]=(0>h?0:256>h?h:255)>>0}return a},duotone:function(a,b,c,e){b=Color.HSV_RGB({H:360*e.hue.value,S:100*e.saturation.value,V:100*e.saturation.value});c=1.5*e.luminance.value;e=e.amount.value;for(var m=
a.data,d=m.length,q=0;q<d;q+=4){var p=m[q],w=m[q+1],r=m[q+2],v=.212656*p+.715158*w+.072186*r,l=(1-v/255)*b.R+v/255*v,f=(1-v/255)*b.G+v/255*v,h=(1-v/255)*b.B+v/255*v,v=v-(l+f+h)/3,l=l+v,f=f+v,h=h+v,v=(l+f+h)/3,g=Math.min(l,f,h);0>g&&(l=v+(l-v)*v/(v-g),f=v+(f-v)*v/(v-g),h=v+(h-v)*v/(v-g));g=Math.max(l,f,h);255<g&&(l=v+(l-v)*(255-v)/(g-v),f=v+(f-v)*(255-v)/(g-v),h=v+(h-v)*(255-v)/(g-v));l=((1-e)*p+e*l)*c;f=((1-e)*w+e*f)*c;h=((1-e)*r+e*h)*c;m[q]=l;m[q+1]=f;m[q+2]=h}return a},combine:function(a){var b=
[];if("number"===typeof a[0])for(var c=0,e=arguments.length;c<e;c++)b[c]=arguments[c];else b=a;var e=this.matrix,m=[];for(c in b)if(e){for(var d=0;5>d;d++)for(var q=0;20>q;q+=5)m[q+d]=e[q]*b[c][d]+e[q+1]*b[c][d+5]+e[q+2]*b[c][d+10]+e[q+3]*b[c][d+15]+(4===d?e[q+4]:0);e=m}else e=b[c];this.matrix=e;return this},update:function(a,b){if("string"===typeof a){if(!this[a])return;"number"===typeof b?this.filters[a]=this[a](b):delete this.filters[a]}else for(var c in a)this[c]&&("number"===typeof a[c]?this.filters[c]=
this[c](a[c]):delete this.filters[c]);delete this.matrix;this.combine(this.filters);return this},getMatrix4x4:function(){var a=this.matrix;return[a[0],a[1],a[2],a[3],a[5],a[6],a[7],a[8],a[10],a[11],a[12],a[13],a[15],a[16],a[17],a[18]]},toString:function(){return this.matrix.join(",")},apply:function(a,b,c,e){var m=a.canvas;e||(e=[0,0]);c||(c=a);b||(b=[0,0,m.width,m.height]);a=a.getImageData(b[0],b[1],b[2],b[3]);b=a.data;for(var d=this.matrix,m=d[0],q=d[1],p=d[2],w=d[3],r=d[4],v=d[5],l=d[6],f=d[7],
h=d[8],g=d[9],y=d[10],z=d[11],s=d[12],A=d[13],H=d[14],I=d[15],J=d[16],D=d[17],B=d[18],d=d[19],E,F,C,G,L,K,R,N=0,V=b.length;N<V;N+=4)E=b[N],F=b[N+1],C=b[N+2],G=b[N+3],L=E*m+F*q+C*p+G*w+r,K=E*v+F*l+C*f+G*h+g,R=E*y+F*z+C*s+G*A+H,E=E*I+F*J+C*D+G*B+d,a.data[N]=(0>L?0:255>L?L:255)>>0,a.data[N+1]=(0>K?0:255>K?K:255)>>0,a.data[N+2]=(0>R?0:255>R?R:255)>>0,a.data[N+3]=(0>E?0:255>E?E:255)>>0;c.putImageData(a,e[0],e[1])},reset:function(){this.matrix=e.slice(0)}};c.setFilter=function(a){var b=new c;isFinite(a.saturation)&&
b.update("saturation",a.saturation);!0===a.invert&&b.update("invert",a.invert);isFinite(a.hue)&&b.update("hue",a.hue);!0===a.sepia&&b.update("sepia",a.sepia);isFinite(a.tint)&&b.update("tint",a.tint);isFinite(a.temperature)&&b.update("temperature",a.temperature);isFinite(a.exposure)&&b.update("exposure",a.exposure);isFinite(a.brightness)&&b.update("brightness",a.brightness);isFinite(a.contrast)&&b.update("contrast",a.contrast,1);isFinite(a.colorize)&&b.update("colorize",4294901760);isFinite(a.monotone)&&
b.update("monotone",4283782485);return b};"undefined"!==typeof module&&module.exports&&(module.exports=c);q.gl=q.gl||{};q.gl.ColorMatrix=c})(sketch);"undefined"===typeof PDFJS&&(("undefined"!==typeof window?window:this).PDFJS={});PDFJS.version="1.0.266";PDFJS.build="5b16323";
(function(){function q(a){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.infos&&console.log("Info: "+a)}function e(a){PDFJS.verbosity>=PDFJS.VERBOSITY_LEVELS.warnings&&console.log("Warning: "+a)}function c(b){if(1<arguments.length){var d=["Error:"];d.push.apply(d,arguments);console.log.apply(console,d);b=[].join.call(arguments," ")}else console.log("Error: "+b);console.log(a());J.notify(I.unknown);throw Error(b);}function a(){try{throw Error();}catch(a){return a.stack?a.stack.split("\n").slice(2).join("\n"):
""}}function b(a,b){if(!b)return a;if(/^[a-z][a-z0-9+\-.]*:/i.test(b))return b;var d;if("/"==b.charAt(0))return d=a.indexOf("://"),"/"===b.charAt(1)?++d:d=a.indexOf("/",d+3),a.substring(0,d)+b;var c=a.length;d=a.lastIndexOf("#");c=0<=d?d:c;d=a.lastIndexOf("?",c);d=a.lastIndexOf("/",0<=d?d:c);return a.substring(0,d+1)+b}function k(a,b){if(!a)return!1;var d=/^[a-z][a-z0-9+\-.]*(?=:)/i.exec(a);if(!d)return b;d=d[0].toLowerCase();switch(d){case "http":case "https":case "ftp":case "mailto":return!0;default:return!1}}
function u(a,b,d){Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!1});return d}function m(a){for(var b=a.length,d=new Uint8Array(b),c=0;c<b;++c)d[c]=a.charCodeAt(c)&255;return d}function d(a){var b,d=a.length,c=[];if("\u00fe"===a[0]&&"\u00ff"===a[1])for(b=2;b<d;b+=2)c.push(String.fromCharCode(a.charCodeAt(b)<<8|a.charCodeAt(b+1)));else for(b=0;b<d;++b){var e=G[a.charCodeAt(b)];c.push(e?String.fromCharCode(e):a.charAt(b))}return c.join("")}function x(a){return a instanceof
Name}function p(a,b){if(!(a instanceof Dict))return!1;if(!b)return!0;var d=a.get("Type");return x(d)&&d.name==b}function w(a){return a instanceof Array}function r(){var a={};a.promise=new Promise(function(b,d){a.resolve=b;a.reject=d});return a}function v(a,b){this.name=a;this.comObj=b;this.callbackIndex=1;this.postMessageTransfers=!0;var d=this.callbacksCapabilities={},e=this.actionHandler={};e.console_log=[function(a){console.log.apply(console,a)}];e.console_error=[function(a){console.error.apply(console,
a)}];e._unsupported_feature=[function(a){J.notify(a)}];b.onmessage=function(a){var f=a.data;if(f.isReply)if(a=f.callbackId,f.callbackId in d){var g=d[a];delete d[a];"error"in f?g.reject(f.error):g.resolve(f.data)}else c("Cannot resolve callback "+a);else if(f.action in e){var h=e[f.action];f.callbackId?Promise.resolve().then(function(){return h[0].call(h[1],f.data)}).then(function(a){b.postMessage({isReply:!0,callbackId:f.callbackId,data:a})},function(a){b.postMessage({isReply:!0,callbackId:f.callbackId,
error:a})}):h[0].call(h[1],f.data)}else c("Unknown action from worker: "+f.action)}}function l(a,b,d){var c=new Image;c.onload=function(){d.resolve(a,c)};c.src=b}function f(a,b){var d=document.createElement("canvas");d.width=a;d.height=b;return d}function h(a){a.mozCurrentTransform||(a._scaleX=a._scaleX||1,a._scaleY=a._scaleY||1,a._originalSave=a.save,a._originalRestore=a.restore,a._originalRotate=a.rotate,a._originalScale=a.scale,a._originalTranslate=a.translate,a._originalTransform=a.transform,
a._originalSetTransform=a.setTransform,a._transformMatrix=[a._scaleX,0,0,a._scaleY,0,0],a._transformStack=[],Object.defineProperty(a,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(a,"mozCurrentTransformInverse",{get:function(){var a=this._transformMatrix,b=a[0],d=a[1],c=a[2],e=a[3],f=a[4],a=a[5],g=b*e-d*c,h=d*c-b*e;return[e/g,d/h,c/h,b/g,(e*f-c*a)/h,(d*f-b*a)/g]}}),a.save=function(){var a=this._transformMatrix;this._transformStack.push(a);this._transformMatrix=
a.slice(0,6);this._originalSave()},a.restore=function(){var a=this._transformStack.pop();a&&(this._transformMatrix=a,this._originalRestore())},a.translate=function(a,b){var d=this._transformMatrix;d[4]=d[0]*a+d[2]*b+d[4];d[5]=d[1]*a+d[3]*b+d[5];this._originalTranslate(a,b)},a.scale=function(a,b){var d=this._transformMatrix;d[0]*=a;d[1]*=a;d[2]*=b;d[3]*=b;this._originalScale(a,b)},a.transform=function(b,d,c,e,f,g){var h=this._transformMatrix;this._transformMatrix=[h[0]*b+h[2]*d,h[1]*b+h[3]*d,h[0]*
c+h[2]*e,h[1]*c+h[3]*e,h[0]*f+h[2]*g+h[4],h[1]*f+h[3]*g+h[5]];a._originalTransform(b,d,c,e,f,g)},a.setTransform=function(b,d,c,e,f,g){this._transformMatrix=[b,d,c,e,f,g];a._originalSetTransform(b,d,c,e,f,g)},a.rotate=function(a){var b=Math.cos(a),d=Math.sin(a),c=this._transformMatrix;this._transformMatrix=[c[0]*b+c[2]*d,c[1]*b+c[3]*d,c[0]*-d+c[2]*b,c[1]*-d+c[3]*b,c[4],c[5]];this._originalRotate(a)})}function g(a){var b=a.width,d=a.height,c,e,f=b+1,g=new Uint8Array(f*(d+1)),h=new Uint8Array([0,2,4,
0,1,0,5,4,8,10,0,8,0,2,1,0]),l=b+7&-8,m=a.data,k=new Uint8Array(l*d),p=0;a=0;for(c=m.length;a<c;a++){e=128;for(var s=m[a];0<e;)k[p++]=s&e?0:255,e>>=1}p=m=0;0!==k[p]&&(g[0]=1,++m);for(c=1;c<b;c++)k[p]!==k[p+1]&&(g[c]=k[p]?2:1,++m),p++;0!==k[p]&&(g[c]=2,++m);for(a=1;a<d;a++){p=a*l;e=a*f;k[p-l]!==k[p]&&(g[e]=k[p]?1:8,++m);s=(k[p]?4:0)+(k[p-l]?8:0);for(c=1;c<b;c++)s=(s>>2)+(k[p+1]?4:0)+(k[p-l+1]?8:0),h[s]&&(g[e+c]=h[s],++m),p++;k[p-l]!==k[p]&&(g[e+c]=k[p]?2:4,++m);if(1E3<m)return null}p=l*(d-1);e=a*f;
0!==k[p]&&(g[e]=8,++m);for(c=1;c<b;c++)k[p]!==k[p+1]&&(g[e+c]=k[p]?4:8,++m),p++;0!==k[p]&&(g[e+c]=4,++m);if(1E3<m)return null;var h=new Int32Array([0,f,-1,0,-f,0,0,0,1]),y=[];for(a=0;m&&a<=d;a++){l=a*f;for(k=l+b;l<k&&!g[l];)l++;if(l!==k){k=[l%f,a];p=g[l];c=l;do{e=h[p];do l+=e;while(!g[l]);e=g[l];5!==e&&10!==e?(p=e,g[l]=0):(p=e&51*p>>4,g[l]&=p>>2|p<<2);k.push(l%f);k.push(l/f|0);--m}while(c!==l);y.push(k);--a}}return function(a){a.save();a.scale(1/b,-1/d);a.translate(0,-d);a.beginPath();for(var c=0,
e=y.length;c<e;c++){var f=y[c];a.moveTo(f[0],f[1]);for(var g=2,h=f.length;g<h;g+=2)a.lineTo(f[g],f[g+1])}a.fill();a.beginPath();a.restore()}}function y(a){var b=ma[a[0]];b||c("Unknown IR type: "+a[0]);return b.fromIR(a)}var z="undefined"===typeof window?this:window,s="undefined"==typeof window,A=[.001,0,0,.001,0,0];z.PDFJS||(z.PDFJS={});z.PDFJS.pdfBug=!1;PDFJS.VERBOSITY_LEVELS={errors:0,warnings:1,infos:5};var H=PDFJS.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,
setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,
showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,
endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},I=PDFJS.UNSUPPORTED_FEATURES={unknown:"unknown",
forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font"},J=PDFJS.UnsupportedManager=function(){var a=[];return{listen:function(b){a.push(b)},notify:function(b){e('Unsupported feature "'+b+'"');for(var d=0,c=a.length;d<c;d++)a[d](b)}}}();PDFJS.isValidUrl=k;var D=PDFJS.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};(function(){function a(b,d){this.name="PasswordException";this.message=b;this.code=d}a.prototype=Error();return a.constructor=a})();(function(){function a(b,
d){this.name="UnknownErrorException";this.message=b;this.details=d}a.prototype=Error();return a.constructor=a})();(function(){function a(b){this.name="InvalidPDFException";this.message=b}a.prototype=Error();return a.constructor=a})();(function(){function a(b){this.name="MissingPDFException";this.message=b}a.prototype=Error();return a.constructor=a})();var B=function(){function a(b){this.message=b}a.prototype=Error();a.prototype.name="NotImplementedException";return a.constructor=a}();(function(){function a(b,
d){this.begin=b;this.end=d;this.message="Missing data ["+b+", "+d+")"}a.prototype=Error();a.prototype.name="MissingDataException";return a.constructor=a})();(function(){function a(b){this.message=b}a.prototype=Error();a.prototype.name="XRefParseException";return a.constructor=a})();Object.defineProperty(PDFJS,"isLittleEndian",{configurable:!0,get:function(){var a=PDFJS,b=new Uint8Array(2);b[0]=1;b=new Uint16Array(b.buffer);return u(a,"isLittleEndian",1===b[0])}});Object.defineProperty(PDFJS,"hasCanvasTypedArrays",
{configurable:!0,get:function(){var a=PDFJS,b=document.createElement("canvas");b.width=b.height=1;b=b.getContext("2d").createImageData(1,1);return u(a,"hasCanvasTypedArrays","undefined"!==typeof b.data.buffer)}});var E=function(){function a(c,e){this.buffer=c;this.byteLength=c.length;for(var f=this.length=void 0===e?this.byteLength>>2:e;d<f;)Object.defineProperty(a.prototype,d,b(d)),d++}function b(a){return{get:function(){var b=this.buffer,d=a<<2;return(b[d]|b[d+1]<<8|b[d+2]<<16|b[d+3]<<24)>>>0},
set:function(b){var d=this.buffer,c=a<<2;d[c]=b&255;d[c+1]=b>>8&255;d[c+2]=b>>16&255;d[c+3]=b>>>24&255}}}a.prototype=Object.create(null);var d=0;return a}(),F=[1,0,0,1,0,0],C=PDFJS.Util=function(){function a(){}a.makeCssRgb=function(a){return"rgb("+a[0]+","+a[1]+","+a[2]+")"};a.transform=function(a,b){return[a[0]*b[0]+a[2]*b[1],a[1]*b[0]+a[3]*b[1],a[0]*b[2]+a[2]*b[3],a[1]*b[2]+a[3]*b[3],a[0]*b[4]+a[2]*b[5]+a[4],a[1]*b[4]+a[3]*b[5]+a[5]]};a.applyTransform=function(a,b){return[a[0]*b[0]+a[1]*b[2]+b[4],
a[0]*b[1]+a[1]*b[3]+b[5]]};a.applyInverseTransform=function(a,b){var d=b[0]*b[3]-b[1]*b[2];return[(a[0]*b[3]-a[1]*b[2]+b[2]*b[5]-b[4]*b[3])/d,(-a[0]*b[1]+a[1]*b[0]+b[4]*b[1]-b[5]*b[0])/d]};a.getAxialAlignedBoundingBox=function(b,d){var c=a.applyTransform(b,d),e=a.applyTransform(b.slice(2,4),d),f=a.applyTransform([b[0],b[3]],d),g=a.applyTransform([b[2],b[1]],d);return[Math.min(c[0],e[0],f[0],g[0]),Math.min(c[1],e[1],f[1],g[1]),Math.max(c[0],e[0],f[0],g[0]),Math.max(c[1],e[1],f[1],g[1])]};a.inverseTransform=
function(a){var b=a[0]*a[3]-a[1]*a[2];return[a[3]/b,-a[1]/b,-a[2]/b,a[0]/b,(a[2]*a[5]-a[4]*a[3])/b,(a[4]*a[1]-a[5]*a[0])/b]};a.apply3dTransform=function(a,b){return[a[0]*b[0]+a[1]*b[1]+a[2]*b[2],a[3]*b[0]+a[4]*b[1]+a[5]*b[2],a[6]*b[0]+a[7]*b[1]+a[8]*b[2]]};a.singularValueDecompose2dScale=function(a){var b=[a[0],a[2],a[1],a[3]],d=a[0]*b[0]+a[1]*b[2],c=a[2]*b[1]+a[3]*b[3],e=(d+c)/2;a=Math.sqrt((d+c)*(d+c)-4*(d*c-(a[2]*b[0]+a[3]*b[2])*(a[0]*b[1]+a[1]*b[3])))/2;b=e-a||1;return[Math.sqrt(e+a||1),Math.sqrt(b)]};
a.normalizeRect=function(a){var b=a.slice(0);a[0]>a[2]&&(b[0]=a[2],b[2]=a[0]);a[1]>a[3]&&(b[1]=a[3],b[3]=a[1]);return b};a.intersect=function(b,d){function c(a,b){return a-b}var e=[b[0],b[2],d[0],d[2]].sort(c),f=[b[1],b[3],d[1],d[3]].sort(c),g=[];b=a.normalizeRect(b);d=a.normalizeRect(d);if(e[0]===b[0]&&e[1]===d[0]||e[0]===d[0]&&e[1]===b[0])g[0]=e[1],g[2]=e[2];else return!1;if(f[0]===b[1]&&f[1]===d[1]||f[0]===d[1]&&f[1]===b[1])g[1]=f[1],g[3]=f[2];else return!1;return g};a.sign=function(a){return 0>
a?-1:1};a.concatenateToArray=function(a,b){Array.prototype.push.apply(a,b)};a.prependToArray=function(a,b){Array.prototype.unshift.apply(a,b)};a.extendObj=function(a,b){for(var d in b)a[d]=b[d]};a.getInheritableProperty=function(a,b){for(;a&&!a.has(b);)a=a.get("Parent");return a?a.get(b):null};a.inherit=function(a,b,d){a.prototype=Object.create(b.prototype);a.prototype.constructor=a;for(var c in d)a.prototype[c]=d[c]};a.loadScript=function(a,b){var d=document.createElement("script"),c=!1;d.setAttribute("src",
a);b&&(d.onload=function(){c||b();c=!0});document.getElementsByTagName("head")[0].appendChild(d)};return a}();PDFJS.PageViewport=function(){function a(b,d,c,e,f,g){this.viewBox=b;this.scale=d;this.rotation=c;this.offsetX=e;this.offsetY=f;var h=(b[2]+b[0])/2,l=(b[3]+b[1])/2,m,k,p;c%=360;switch(0>c?c+360:c){case 180:c=-1;k=m=0;p=1;break;case 90:c=0;k=m=1;p=0;break;case 270:c=0;k=m=-1;p=0;break;default:c=1,k=m=0,p=-1}g&&(k=-k,p=-p);0===c?(e=Math.abs(l-b[1])*d+e,f=Math.abs(h-b[0])*d+f,g=Math.abs(b[3]-
b[1])*d,b=Math.abs(b[2]-b[0])*d):(e=Math.abs(h-b[0])*d+e,f=Math.abs(l-b[1])*d+f,g=Math.abs(b[2]-b[0])*d,b=Math.abs(b[3]-b[1])*d);this.transform=[c*d,m*d,k*d,p*d,e-c*d*h-k*d*l,f-m*d*h-p*d*l];this.width=g;this.height=b;this.fontScale=d}a.prototype={clone:function(b){b=b||{};var d="scale"in b?b.scale:this.scale,c="rotation"in b?b.rotation:this.rotation;return new a(this.viewBox.slice(),d,c,this.offsetX,this.offsetY,b.dontFlip)},convertToViewportPoint:function(a,b){return C.applyTransform([a,b],this.transform)},
convertToViewportRectangle:function(a){var b=C.applyTransform([a[0],a[1]],this.transform);a=C.applyTransform([a[2],a[3]],this.transform);return[b[0],b[1],a[0],a[1]]},convertToPdfPoint:function(a,b){return C.applyInverseTransform([a,b],this.transform)}};return a}();var G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];PDFJS.createPromiseCapability=r;(function(){function a(d){this._status=b;this._handlers=[];try{d.call(this,this._resolve.bind(this),this._reject.bind(this))}catch(c){this._reject(c)}}if(z.Promise)"function"!==typeof z.Promise.all&&(z.Promise.all=function(a){var b=0,d=[],c,e,f=new z.Promise(function(a,b){c=
a;e=b});a.forEach(function(a,f){b++;a.then(function(a){d[f]=a;b--;0===b&&c(d)},e)});0===b&&c(d);return f}),"function"!==typeof z.Promise.resolve&&(z.Promise.resolve=function(a){return new z.Promise(function(b){b(a)})}),"function"!==typeof z.Promise.reject&&(z.Promise.reject=function(a){return new z.Promise(function(b,d){d(a)})}),"function"!==typeof z.Promise.prototype["catch"]&&(z.Promise.prototype["catch"]=function(a){return z.Promise.prototype.then(void 0,a)});else{var b=0,d={handlers:[],running:!1,
unhandledRejections:[],pendingRejectionCheck:!1,scheduleHandlers:function(a){a._status!=b&&(this.handlers=this.handlers.concat(a._handlers),a._handlers=[],this.running||(this.running=!0,setTimeout(this.runHandlers.bind(this),0)))},runHandlers:function(){for(var a=Date.now()+1;0<this.handlers.length;){var b=this.handlers.shift(),d=b.thisPromise._status,c=b.thisPromise._value;try{1===d?"function"==typeof b.onResolve&&(c=b.onResolve(c)):"function"===typeof b.onReject&&(c=b.onReject(c),d=1,b.thisPromise._unhandledRejection&&
this.removeUnhandeledRejection(b.thisPromise))}catch(e){d=2,c=e}b.nextPromise._updateStatus(d,c);if(Date.now()>=a)break}0<this.handlers.length?setTimeout(this.runHandlers.bind(this),0):this.running=!1},addUnhandledRejection:function(a){this.unhandledRejections.push({promise:a,time:Date.now()});this.scheduleRejectionCheck()},removeUnhandeledRejection:function(a){a._unhandledRejection=!1;for(var b=0;b<this.unhandledRejections.length;b++)this.unhandledRejections[b].promise===a&&(this.unhandledRejections.splice(b),
b--)},scheduleRejectionCheck:function(){this.pendingRejectionCheck||(this.pendingRejectionCheck=!0,setTimeout(function(){this.pendingRejectionCheck=!1;for(var a=Date.now(),b=0;b<this.unhandledRejections.length;b++)if(500<a-this.unhandledRejections[b].time){var d=this.unhandledRejections[b].promise._value,c="Unhandled rejection: "+d;d.stack&&(c+="\n"+d.stack);e(c);this.unhandledRejections.splice(b);b--}this.unhandledRejections.length&&this.scheduleRejectionCheck()}.bind(this),500))}};a.all=function(b){function d(a){2!==
f._status&&(h=[],e(a))}var c,e,f=new a(function(a,b){c=a;e=b}),g=b.length,h=[];if(0===g)return c(h),f;for(var l=0,m=b.length;l<m;++l){var k=b[l],p=function(a){return function(b){2!==f._status&&(h[a]=b,g--,0===g&&c(h))}}(l);a.isPromise(k)?k.then(p,d):p(k)}return f};a.isPromise=function(a){return a&&"function"===typeof a.then};a.resolve=function(b){return new a(function(a){a(b)})};a.reject=function(b){return new a(function(a,d){d(b)})};a.prototype={_status:null,_value:null,_handlers:null,_unhandledRejection:null,
_updateStatus:function(b,c){1!==this._status&&2!==this._status&&(1==b&&a.isPromise(c)?c.then(this._updateStatus.bind(this,1),this._updateStatus.bind(this,2)):(this._status=b,this._value=c,2===b&&0===this._handlers.length&&(this._unhandledRejection=!0,d.addUnhandledRejection(this)),d.scheduleHandlers(this)))},_resolve:function(a){this._updateStatus(1,a)},_reject:function(a){this._updateStatus(2,a)},then:function(b,c){var e=new a(function(a,b){this.reject=this.resolve=b});this._handlers.push({thisPromise:this,
onResolve:b,onReject:c,nextPromise:e});d.scheduleHandlers(this);return e},"catch":function(a){return this.then(void 0,a)}};z.Promise=a}})();var L=function(){function a(){this.started={};this.times=[];this.enabled=!0}a.prototype={time:function(a){this.enabled&&(a in this.started&&e("Timer is already running for "+a),this.started[a]=Date.now())},timeEnd:function(a){this.enabled&&(a in this.started||e("Timer has not been started for "+a),this.times.push({name:a,start:this.started[a],end:Date.now()}),
delete this.started[a])},toString:function(){var a,b,d=this.times,c="",e=0;a=0;for(b=d.length;a<b;++a){var f=d[a].name;f.length>e&&(e=f.length)}a=0;for(b=d.length;a<b;++a){for(var g=d[a],f=g.end-g.start,g=g.name;g.length<e;)g+=" ";c+=g+" "+f+"ms\n"}return c}};return a}();PDFJS.createBlob=function(a,b){if("undefined"!==typeof Blob)return new Blob([a],{type:b});var d=new MozBlobBuilder;d.append(a);return d.getBlob(b)};PDFJS.createObjectURL=function(){return function(a,b){if(!PDFJS.disableCreateObjectURL&&
"undefined"!==typeof URL&&URL.createObjectURL){var d=PDFJS.createBlob(a,b);return URL.createObjectURL(d)}for(var d="data:"+b+";base64,",c=0,e=a.length;c<e;c+=3)var f=a[c]&255,g=a[c+1]&255,h=a[c+2]&255,d=d+("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[f>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[(f&3)<<4|g>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+1<e?(g&15)<<2|h>>6:64]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[c+
2<e?h&63:64]);return d}}();v.prototype={on:function(a,b,d){var e=this.actionHandler;e[a]&&c('There is already an actionName called "'+a+'"');e[a]=[b,d]},send:function(a,b,d){this.postMessage({action:a,data:b},d)},sendWithPromise:function(a,b,d){var c=this.callbackIndex++;a={action:a,data:b,callbackId:c};b=r();this.callbacksCapabilities[c]=b;try{this.postMessage(a,d)}catch(e){b.reject(e)}return b.promise},postMessage:function(a,b){b&&this.postMessageTransfers?this.comObj.postMessage(a,b):this.comObj.postMessage(a)}};
var K=["Link","Text","Widget"],R=function(){function a(b,d,c){var e=C.getAxialAlignedBoundingBox(d,c);d=e[0];c=e[1];var f=e[2],e=e[3];if(d===f||c===e)return[1,0,0,1,b[0],b[1]];f=(b[2]-b[0])/(f-d);e=(b[3]-b[1])/(e-c);return[f,0,0,e,b[0]-d*f,b[1]-c*e]}function b(a){if(a.data)this.data=a.data;else{var d=a.dict,c=this.data={};c.subtype=d.get("Subtype").name;var e=d.get("Rect")||[0,0,0,0];c.rect=C.normalizeRect(e);c.annotationFlags=d.get("F");e=d.get("C");w(e)&&3===e.length?c.color=e:c.color=[0,0,0];if(d.has("BS"))e=
d.get("BS"),c.borderWidth=e.has("W")?e.get("W"):1;else if(e=d.get("Border")||[0,0,1],c.borderWidth=e[2]||0,e=e[3],0<c.borderWidth&&e)if(w(e)){var f=e.length;if(0<f){for(var g=!1,h=0,l=0;l<f;l++)if(0<=+e[l])0<e[l]&&h++;else{g=!0;break}if(g||0===h)c.borderWidth=0}}else c.borderWidth=0;var m,e=d.get("AP");p(e)?(e=e.get("N"),p(e)?(d=d.get("AS"))&&e.has(d.name)&&(m=e.get(d.name)):m=e):m=void 0;this.appearance=m;c.hasAppearance=!!this.appearance;c.id=a.ref.num}}b.prototype={getData:function(){return this.data},
hasHtml:function(){return!1},getHtmlElement:function(a){throw new B("getHtmlElement() should be implemented in subclass");},getEmptyContainer:function(a,b,d){s&&c("getEmptyContainer() should be called from main thread");d=d||0;b=b||this.data.rect;a=document.createElement(a);a.style.borderWidth=d+"px";var e=b[3]-b[1]-2*d;a.style.width=b[2]-b[0]-2*d+"px";a.style.height=e+"px";return a},isInvisible:function(){var a=this.data;return a&&-1!==K.indexOf(a.subtype)?!1:!!(a&&a.annotationFlags&&a.annotationFlags&
1)},isViewable:function(){var a=this.data;return!(this.isInvisible()||!a||a.annotationFlags&&a.annotationFlags&34||!a.rect)},isPrintable:function(){var a=this.data;return!!(!this.isInvisible()&&a&&a.annotationFlags&&a.annotationFlags&4&&a.rect)},loadResources:function(a){return new Promise(function(b,d){this.appearance.dict.getAsync("Resources").then(function(c){c?(new ObjectLoader(c.map,a,c.xref)).load().then(function(){b(c)},d):b()},d)}.bind(this))},getOperatorList:function(b){if(!this.appearance)return Promise.resolve(new OperatorList);
var d=this.data,c=this.appearance.dict,e=this.loadResources("ExtGState ColorSpace Pattern Shading XObject Font".split(" ")),f=c.get("BBox")||[0,0,1,1],g=c.get("Matrix")||[1,0,0,1,0,0],h=a(d.rect,f,g),l=this;return e.then(function(a){var c=new OperatorList;c.addOp(H.beginAnnotation,[d.rect,h,g]);return b.getOperatorList(l.appearance,a,c).then(function(){c.addOp(H.endAnnotation,[]);l.appearance.reset();return c})})}};b.getConstructor=function(a,d){if(a){if("Link"===a)return O;if("Text"===a)return Q;
if("Widget"===a){if(d)return"Tx"===d?V:N}else return b}};b.fromData=function(a){var d=b.getConstructor(a.subtype,a.fieldType);if(d)return new d({data:a})};b.fromRef=function(a,d){var c=a.fetchIfRef(d);if(p(c)){var f=c.get("Subtype");if(f=x(f)?f.name:""){var g=C.getInheritableProperty(c,"FT"),g=x(g)?g.name:"";if(g=b.getConstructor(f,g)){c=new g({dict:c,ref:d});if(c.isViewable()||c.isPrintable())return c;e("unimplemented annotation type: "+f)}}}};b.appendToOperatorList=function(a,b,d,c,e){var f=r();
d=[];for(var g=0,h=a.length;g<h;++g)("display"===e&&a[g].isViewable()||"print"===e&&a[g].isPrintable())&&d.push(a[g].getOperatorList(c));Promise.all(d).then(function(a){b.addOp(H.beginAnnotations,[]);for(var d=0,c=a.length;d<c;++d)b.addOpList(a[d]);b.addOp(H.endAnnotations,[]);f.resolve()},function(a){f.reject(a)});return f.promise};return b}();PDFJS.Annotation=R;var N=function(){function a(b){R.call(this,b);if(!b.data){var c=b.dict,e=this.data;e.fieldValue=d(C.getInheritableProperty(c,"V")||"");
e.alternativeText=d(c.get("TU")||"");e.defaultAppearance=C.getInheritableProperty(c,"DA")||"";var f=C.getInheritableProperty(c,"FT");e.fieldType=x(f)?f.name:"";e.fieldFlags=C.getInheritableProperty(c,"Ff")||0;this.fieldResources=C.getInheritableProperty(c,"DR")||Dict.empty;var f=[],g=c;for(b=b.ref;g;){var c=g.get("Parent"),h=g.getRaw("Parent");if(g=g.get("T"))f.unshift(d(g));else{var g=c.get("Kids"),l,m;l=0;for(m=g.length;l<m;l++){var k=g[l];if(k.num==b.num&&k.gen==b.gen)break}f.unshift("`"+l)}g=
c;b=h}e.fullName=f.join(".")}}var b=R.prototype;C.inherit(a,R,{isViewable:function(){return"Sig"===this.data.fieldType?(e("unimplemented annotation type: Widget signature"),!1):b.isViewable.call(this)}});return a}(),V=function(){function a(b){N.call(this,b);b.data||(this.data.textAlignment=C.getInheritableProperty(b.dict,"Q"))}C.inherit(a,N,{hasHtml:function(){return!this.data.hasAppearance&&!!this.data.fieldValue},getHtmlElement:function(a){s&&c("getHtmlElement() shall be called from main thread");
var b=this.data,d=this.getEmptyContainer("div");d.style.display="table";var e=document.createElement("div");e.textContent=b.fieldValue;e.style.textAlign=["left","center","right"][b.textAlignment];e.style.verticalAlign="middle";e.style.display="table-cell";a=b.fontRefName?a.getData(b.fontRefName):null;var f=e.style;f.fontSize=b.fontSize+"px";f.direction=0>b.fontDirection?"rtl":"ltr";a&&(f.fontWeight=a.black?a.bold?"bolder":"bold":a.bold?"bold":"normal",f.fontStyle=a.italic?"italic":"normal",b=a.loadedName,
f.fontFamily=(b?'"'+b+'", ':"")+(a.fallbackName||"Helvetica, sans-serif"));d.appendChild(e);return d},getOperatorList:function(a){if(this.appearance)return R.prototype.getOperatorList.call(this,a);var b=new OperatorList,d=this.data;if(!d.defaultAppearance)return Promise.resolve(b);d=new Stream(m(d.defaultAppearance));return a.getOperatorList(d,this.fieldResources,b).then(function(){return b})}});return a}(),P=function(){function a(b){R.call(this,b)}C.inherit(a,R,{hasHtml:function(){return!0},highlight:function(){this.highlightElement&&
this.highlightElement.hasAttribute("hidden")&&this.highlightElement.removeAttribute("hidden")},unhighlight:function(){this.highlightElement&&!this.highlightElement.hasAttribute("hidden")&&this.highlightElement.setAttribute("hidden",!0)},initContainer:function(){for(var a=this.data,b=this.getEmptyContainer("section",a.rect,a.borderWidth),d=b.style.backgroundColor=a.color,c=[],e=0;3>e;++e)c[e]=Math.round(255*d[e]);a.colorCssRgb=C.makeCssRgb(c);a=document.createElement("div");a.className="annotationHighlight";
a.style.left=a.style.top="-4px";a.style.right=a.style.bottom="-4px";a.setAttribute("hidden",!0);this.highlightElement=a;b.appendChild(this.highlightElement);return b}});return a}(),Q=function(){function a(b){P.call(this,b);if(!b.data){b=b.dict;var c=this.data,e=b.get("Contents"),f=b.get("T");c.content=d(e||"");c.title=d(f||"");c.hasAppearance?c.name="NoIcon":(c.rect[1]=c.rect[3]-22,c.rect[2]=c.rect[0]+22,c.name=b.has("Name")?b.get("Name").name:"Note");b.has("C")&&(c.hasBgColor=!0)}}C.inherit(a,P,
{getHtmlElement:function(a){s&&c("getHtmlElement() shall be called from main thread");var b=this.data,d=b.rect;10>d[3]-d[1]&&(d[3]=d[1]+10);10>d[2]-d[0]&&(d[2]=d[0]+(d[3]-d[1]));var e=this.initContainer();e.className="annotText";a=document.createElement("img");a.style.height=e.style.height;a.style.width=e.style.width;var f=b.name;a.src=PDFJS.imageResourcesPath+"annotation-"+f.toLowerCase()+".svg";a.alt="[{{type}} Annotation]";a.dataset.l10nId="text_annotation_type";a.dataset.l10nArgs=JSON.stringify({type:f});
f=document.createElement("div");f.className="annotTextContentWrapper";f.style.left=Math.floor(d[2]-d[0]+5)+"px";f.style.top="-10px";var g=document.createElement("div");g.className="annotTextContent";g.setAttribute("hidden",!0);if(b.hasBgColor){for(var h=b.color,l=[],d=0;3>d;++d){var m=Math.round(255*h[d]);l[d]=Math.round(.7*(255-m))+m}g.style.backgroundColor=C.makeCssRgb(l)}h=document.createElement("h1");l=document.createElement("p");h.textContent=b.title;if(b.content||b.title){for(var m=document.createElement("span"),
k=b.content.split(/(?:\r\n?|\n)/),d=0,b=k.length;d<b;++d)m.appendChild(document.createTextNode(k[d])),d<b-1&&m.appendChild(document.createElement("br"));l.appendChild(m);var p=!1,y=function(a){a&&(p=!0);g.hasAttribute("hidden")&&(e.style.zIndex+=1,g.removeAttribute("hidden"))},q=function(a){a&&(p=!1);g.hasAttribute("hidden")||p||(e.style.zIndex-=1,g.setAttribute("hidden",!0))};a.addEventListener("click",function(){p?q(!0):y(!0)},!1);a.addEventListener("mouseover",function(){y()},!1);a.addEventListener("mouseout",
function(){q()},!1);g.addEventListener("click",function(){q(!0)},!1)}else g.setAttribute("hidden",!0);g.appendChild(h);g.appendChild(l);f.appendChild(g);e.appendChild(a);e.appendChild(f);return e}});return a}(),O=function(){function a(b){P.call(this,b);if(!b.data){var d=b.dict;b=this.data;var c=d.get("A");if(c)if(d=c.get("S").name,"URI"===d){var f=c.get("URI");x(f)?f="/"+f.name:f&&(f=f&&0===f.indexOf("www.")?"http://"+f:f);k(f,!1)||(f="");b.url=f}else"GoTo"===d?b.dest=c.get("D"):"GoToR"===d?(d=c.get("F"),
p(d)&&(f=d.get("F")||""),k(f,!1)||(f=""),b.url=f,b.dest=c.get("D")):"Named"===d?b.action=c.get("N").name:e("unrecognized link type: "+d);else d.has("Dest")&&(f=d.get("Dest"),b.dest=x(f)?f.name:f)}}C.inherit(a,P,{hasOperatorList:function(){return!1},getHtmlElement:function(a){a=this.initContainer();a.className="annotLink";a.style.borderColor=this.data.colorCssRgb;a.style.borderStyle="solid";var b=document.createElement("a");b.href=b.title=this.data.url||"";a.appendChild(b);return a}});return a}();
PDFJS.maxImageSize=void 0===PDFJS.maxImageSize?-1:PDFJS.maxImageSize;PDFJS.cMapUrl=void 0===PDFJS.cMapUrl?null:PDFJS.cMapUrl;PDFJS.cMapPacked=void 0===PDFJS.cMapPacked?!1:PDFJS.cMapPacked;PDFJS.disableFontFace=void 0===PDFJS.disableFontFace?!1:PDFJS.disableFontFace;PDFJS.imageResourcesPath=void 0===PDFJS.imageResourcesPath?"":PDFJS.imageResourcesPath;PDFJS.disableWorker=void 0===PDFJS.disableWorker?!1:PDFJS.disableWorker;PDFJS.workerSrc=void 0===PDFJS.workerSrc?null:PDFJS.workerSrc;PDFJS.disableRange=
void 0===PDFJS.disableRange?!1:PDFJS.disableRange;PDFJS.disableAutoFetch=void 0===PDFJS.disableAutoFetch?!1:PDFJS.disableAutoFetch;PDFJS.pdfBug=void 0===PDFJS.pdfBug?!1:PDFJS.pdfBug;PDFJS.postMessageTransfers=void 0===PDFJS.postMessageTransfers?!0:PDFJS.postMessageTransfers;PDFJS.disableCreateObjectURL=void 0===PDFJS.disableCreateObjectURL?!1:PDFJS.disableCreateObjectURL;PDFJS.disableWebGL=void 0===PDFJS.disableWebGL?!0:PDFJS.disableWebGL;PDFJS.verbosity=void 0===PDFJS.verbosity?PDFJS.VERBOSITY_LEVELS.warnings:
PDFJS.verbosity;PDFJS.getDocument=function(a,d,e,f){var g,h;"string"===typeof a?a={url:a}:"object"==typeof a&&null!==a&&void 0!==a&&"byteLength"in a?a={data:a}:"object"!==typeof a&&c("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");a.url||a.data||c("Invalid parameter array, need either .data or .url");var l={};for(g in a)l[g]="url"===g&&"undefined"!==typeof window?b(window.location.href,a[g]):a[g];a=r();g=r();h=new X(a,g,d,f);a.promise.then(function(){h.passwordCallback=
e;h.fetchDocument(l)});return g.promise};var T=function(){function a(b,d){this.pdfInfo=b;this.transport=d}a.prototype={get numPages(){return this.pdfInfo.numPages},get fingerprint(){return this.pdfInfo.fingerprint},getPage:function(a){return this.transport.getPage(a)},getPageIndex:function(a){return this.transport.getPageIndex(a)},getDestinations:function(){return this.transport.getDestinations()},getAttachments:function(){return this.transport.getAttachments()},getJavaScript:function(){return this.transport.getJavaScript()},
getOutline:function(){return this.transport.getOutline()},getMetadata:function(){return this.transport.getMetadata()},getData:function(){return this.transport.getData()},getDownloadInfo:function(){return this.transport.downloadInfoCapability.promise},cleanup:function(){this.transport.startCleanup()},destroy:function(){this.transport.destroy()}};return a}(),S=function(){function a(b,d,c){this.pageIndex=b;this.pageInfo=d;this.transport=c;this.stats=new L;this.stats.enabled=!!z.PDFJS.enableStats;this.commonObjs=
c.commonObjs;this.objs=new ba;this.pendingDestroy=this.cleanupAfterRender=!1;this.intentStates={}}a.prototype={get pageNumber(){return this.pageIndex+1},get rotate(){return this.pageInfo.rotate},get ref(){return this.pageInfo.ref},get view(){return this.pageInfo.view},getViewport:function(a,b){2>arguments.length&&(b=this.rotate);return new PDFJS.PageViewport(this.view,a,b,0,0)},getAnnotations:function(){return this.annotationsPromise?this.annotationsPromise:this.annotationsPromise=this.transport.getAnnotations(this.pageIndex)},
render:function(a){function b(a){var c=e.renderTasks.indexOf(f);0<=c&&e.renderTasks.splice(c,1);g.cleanupAfterRender&&(g.pendingDestroy=!0);g._tryDestroy();a?f.capability.reject(a):f.capability.resolve();d.timeEnd("Rendering");d.timeEnd("Overall")}var d=this.stats;d.time("Overall");this.pendingDestroy=!1;var c="intent"in a?"print"==a.intent?"print":"display":"display";this.intentStates[c]||(this.intentStates[c]={});var e=this.intentStates[c];e.displayReadyCapability||(e.receivingOperatorList=!0,e.displayReadyCapability=
r(),e.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this.stats.time("Page Request"),this.transport.messageHandler.send("RenderPageRequest",{pageIndex:this.pageNumber-1,intent:c}));var f=new Y(b,a,this.objs,this.commonObjs,e.operatorList,this.pageNumber);e.renderTasks||(e.renderTasks=[]);e.renderTasks.push(f);a=new W(f);var g=this;e.displayReadyCapability.promise.then(function(a){g.pendingDestroy?b():(d.time("Rendering"),f.initalizeGraphics(a),f.operatorListChanged())},function(a){b(a)});return a},
getTextContent:function(){return this.transport.messageHandler.sendWithPromise("GetTextContent",{pageIndex:this.pageNumber-1})},destroy:function(){this.pendingDestroy=!0;this._tryDestroy()},_tryDestroy:function(){this.pendingDestroy&&!Object.keys(this.intentStates).some(function(a){a=this.intentStates[a];return 0!==a.renderTasks.length||a.receivingOperatorList},this)&&(Object.keys(this.intentStates).forEach(function(a){delete this.intentStates[a]},this),this.objs.clear(),this.annotationsPromise=null,
this.pendingDestroy=!1)},_startRenderPage:function(a,b){this.intentStates[b].displayReadyCapability.resolve(a)},_renderPageChunk:function(a,b){var d=this.intentStates[b],c,e;c=0;for(e=a.length;c<e;c++)d.operatorList.fnArray.push(a.fnArray[c]),d.operatorList.argsArray.push(a.argsArray[c]);d.operatorList.lastChunk=a.lastChunk;for(c=0;c<d.renderTasks.length;c++)d.renderTasks[c].operatorListChanged();a.lastChunk&&(d.receivingOperatorList=!1,this._tryDestroy())}};return a}(),X=function(){function a(b,
d,e,f){this.pdfDataRangeTransport=e;this.workerReadyCapability=d;this.progressCallback=f;this.commonObjs=new ba;this.pageCache=[];this.pagePromises=[];this.downloadInfoCapability=r();this.passwordCallback=null;if(!z.PDFJS.disableWorker&&"undefined"!==typeof Worker){(d=PDFJS.workerSrc)||c("No PDFJS.workerSrc specified");try{var g=new Worker(d),h=new v("main",g);this.messageHandler=h;h.on("test",function(a){a&&a.supportTypedArray?(this.worker=g,a.supportTransfers||(PDFJS.postMessageTransfers=!1),this.setupMessageHandler(h),
b.resolve()):(z.PDFJS.disableWorker=!0,this.loadFakeWorkerFiles().then(function(){this.setupFakeWorker();b.resolve()}.bind(this)))}.bind(this));var l=new Uint8Array([PDFJS.postMessageTransfers?255:0]);try{h.send("test",l,[l.buffer])}catch(m){q("Cannot use postMessage transfers"),l[0]=0,h.send("test",l)}return}catch(k){q("The worker has been disabled.")}}z.PDFJS.disableWorker=!0;this.loadFakeWorkerFiles().then(function(){this.setupFakeWorker();b.resolve()}.bind(this))}a.prototype={destroy:function(){this.pageCache=
[];this.pagePromises=[];var a=this;this.messageHandler.sendWithPromise("Terminate",null).then(function(){ja.clear();a.worker&&a.worker.terminate()})},loadFakeWorkerFiles:function(){PDFJS.fakeWorkerFilesLoadedCapability||(PDFJS.fakeWorkerFilesLoadedCapability=r(),C.loadScript(PDFJS.workerSrc));return PDFJS.fakeWorkerFilesLoadedCapability.promise},setupFakeWorker:function(){e("Setting up fake worker.");var a={postMessage:function(b){a.onmessage({data:b})},terminate:function(){}},b=new v("main",a);this.setupMessageHandler(b);
PDFJS.WorkerMessageHandler.setup(b)},setupMessageHandler:function(a){function b(d){a.send("UpdatePassword",d)}this.messageHandler=a;var d=this.pdfDataRangeTransport;d&&(d.addRangeListener(function(b,d){a.send("OnDataRange",{begin:b,chunk:d})}),d.addProgressListener(function(b){a.send("OnDataProgress",{loaded:b})}),a.on("RequestDataRange",function(a){d.requestDataRange(a.begin,a.end)},this));a.on("GetDoc",function(a){var b=a.pdfInfo;this.numPages=a.pdfInfo.numPages;this.pdfDocument=a=new T(b,this);
this.workerReadyCapability.resolve(a)},this);a.on("NeedPassword",function(a){if(this.passwordCallback)return this.passwordCallback(b,D.NEED_PASSWORD);this.workerReadyCapability.reject(a.exception.message,a.exception)},this);a.on("IncorrectPassword",function(a){if(this.passwordCallback)return this.passwordCallback(b,D.INCORRECT_PASSWORD);this.workerReadyCapability.reject(a.exception.message,a.exception)},this);a.on("InvalidPDF",function(a){this.workerReadyCapability.reject(a.exception.name,a.exception)},
this);a.on("MissingPDF",function(a){this.workerReadyCapability.reject(a.exception.message,a.exception)},this);a.on("UnknownError",function(a){this.workerReadyCapability.reject(a.exception.message,a.exception)},this);a.on("DataLoaded",function(a){this.downloadInfoCapability.resolve(a)},this);a.on("StartRenderPage",function(a){var b=this.pageCache[a.pageIndex];b.stats.timeEnd("Page Request");b._startRenderPage(a.transparency,a.intent)},this);a.on("RenderPageChunk",function(a){this.pageCache[a.pageIndex]._renderPageChunk(a.operatorList,
a.intent)},this);a.on("commonobj",function(a){var b=a[0],d=a[1];if(!this.commonObjs.hasData(b))switch(d){case "Font":a=a[2];var c;if("error"in a){var f=a.error;e("Error during font loading: "+f);this.commonObjs.resolve(b,f);break}else c=new Ba(a);ja.bind([c],function(a){this.commonObjs.resolve(b,c)}.bind(this));break;case "FontPath":this.commonObjs.resolve(b,a[2]);break;default:f("Got unknown common object type "+d)}},this);a.on("obj",function(a){var b=a[0],d=a[2],e=this.pageCache[a[1]];if(!e.objs.hasData(b))switch(d){case "JpegStream":a=
a[3];l(b,a,e.objs);break;case "Image":a=a[3];e.objs.resolve(b,a);a&&"data"in a&&8E6<a.data.length&&(e.cleanupAfterRender=!0);break;default:c("Got unknown object type "+d)}},this);a.on("DocProgress",function(a){this.progressCallback&&this.progressCallback({loaded:a.loaded,total:a.total})},this);a.on("DocError",function(a){this.workerReadyCapability.reject(a)},this);a.on("PageError",function(a){var b=this.pageCache[a.pageNum-1].intentStates[a.intent];b.displayReadyCapability.promise?b.displayReadyCapability.reject(a.error):
c(a.error)},this);a.on("JpegDecode",function(a){var b=a[0],d=a[1];return 3!=d&&1!=d?Promise.reject(Error("Only 3 components or 1 component can be returned")):new Promise(function(a,c){var e=new Image;e.onload=function(){var b=e.width,c=e.height,g=b*c,h=4*g,g=new Uint8Array(g*d),l=f(b,c).getContext("2d");l.drawImage(e,0,0);var l=l.getImageData(0,0,b,c).data,m,k;if(3==d)for(k=m=0;m<h;m+=4,k+=3)g[k]=l[m],g[k+1]=l[m+1],g[k+2]=l[m+2];else if(1==d)for(k=m=0;m<h;m+=4,k++)g[k]=l[m];a({data:g,width:b,height:c})};
e.onerror=function(){c(Error("JpegDecode failed to load image"))};e.src=b})})},fetchDocument:function(a){a.disableAutoFetch=PDFJS.disableAutoFetch;a.chunkedViewerLoading=!!this.pdfDataRangeTransport;this.messageHandler.send("GetDocRequest",{source:a,disableRange:PDFJS.disableRange,maxImageSize:PDFJS.maxImageSize,cMapUrl:PDFJS.cMapUrl,cMapPacked:PDFJS.cMapPacked,disableFontFace:PDFJS.disableFontFace,disableCreateObjectURL:PDFJS.disableCreateObjectURL,verbosity:PDFJS.verbosity})},getData:function(){return this.messageHandler.sendWithPromise("GetData",
null)},getPage:function(a,b){if(0>=a||a>this.numPages||(a|0)!==a)return Promise.reject(Error("Invalid page request"));var d=a-1;if(d in this.pagePromises)return this.pagePromises[d];var c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:d}).then(function(a){a=new S(d,a,this);return this.pageCache[d]=a}.bind(this));return this.pagePromises[d]=c},getPageIndex:function(a){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:a})},getAnnotations:function(a){return this.messageHandler.sendWithPromise("GetAnnotations",
{pageIndex:a})},getDestinations:function(){return this.messageHandler.sendWithPromise("GetDestinations",null)},getAttachments:function(){return this.messageHandler.sendWithPromise("GetAttachments",null)},getJavaScript:function(){return this.messageHandler.sendWithPromise("GetJavaScript",null)},getOutline:function(){return this.messageHandler.sendWithPromise("GetOutline",null)},getMetadata:function(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(function(a){return{info:a[0],metadata:a[1]?
new PDFJS.Metadata(a[1]):null}})},startCleanup:function(){this.messageHandler.sendWithPromise("Cleanup",null).then(function(){for(var a=0,b=this.pageCache.length;a<b;a++){var d=this.pageCache[a];d&&d.destroy()}this.commonObjs.clear();ja.clear()}.bind(this))}};return a}(),ba=function(){function a(){this.objs={}}a.prototype={ensureObj:function(a){if(this.objs[a])return this.objs[a];var b={capability:r(),data:null,resolved:!1};return this.objs[a]=b},get:function(a,b){if(b)return this.ensureObj(a).capability.promise.then(b),
null;var d=this.objs[a];d&&d.resolved||c("Requesting object that isn't resolved yet "+a);return d.data},resolve:function(a,b){var d=this.ensureObj(a);d.resolved=!0;d.data=b;d.capability.resolve(b)},isResolved:function(a){var b=this.objs;return b[a]?b[a].resolved:!1},hasData:function(a){return this.isResolved(a)},getData:function(a){var b=this.objs;return b[a]&&b[a].resolved?b[a].data:null},clear:function(){this.objs={}}};return a}(),W=function(){function a(b){this.internalRenderTask=b;this.promise=
this.internalRenderTask.capability.promise}a.prototype={cancel:function(){this.internalRenderTask.cancel()},then:function(a,b){return this.promise.then(a,b)}};return a}(),Y=function(){function a(b,d,c,e,f,g){this.callback=b;this.params=d;this.objs=c;this.commonObjs=e;this.operatorListIdx=null;this.operatorList=f;this.pageNumber=g;this.running=!1;this.graphicsReadyCallback=null;this.cancelled=this.graphicsReady=!1;this.capability=r();this._continueBound=this._continue.bind(this);this._scheduleNextBound=
this._scheduleNext.bind(this);this._nextBound=this._next.bind(this)}a.prototype={initalizeGraphics:function(a){if(!this.cancelled){PDFJS.pdfBug&&"StepperManager"in z&&z.StepperManager.enabled&&(this.stepper=z.StepperManager.create(this.pageNumber-1),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());var b=this.params;this.gfx=new ha(b.canvasContext,this.commonObjs,this.objs,b.imageLayer);this.gfx.beginDrawing(b.viewport,a);this.operatorListIdx=0;this.graphicsReady=
!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}},cancel:function(){this.running=!1;this.cancelled=!0;this.callback("cancelled")},operatorListChanged:function(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)},_continue:function(){this.running=!0;this.cancelled||(this.params.continueCallback?this.params.continueCallback(this._scheduleNextBound):
this._scheduleNext())},_scheduleNext:function(){window.requestAnimationFrame(this._nextBound)},_next:function(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this.callback())))}};return a}();PDFJS.Metadata=function(){function a(b){return b.replace(/>\\376\\377([^<]+)/g,function(a,
b){for(var d=b.replace(/\\([0-3])([0-7])([0-7])/g,function(a,b,d,c){return String.fromCharCode(64*b+8*d+1*c)}),c="",e=0;e<d.length;e+=2)var f=256*d.charCodeAt(e)+d.charCodeAt(e+1),c=c+("&#x"+(65536+f).toString(16).substring(1)+";");return">"+c})}function b(d){"string"===typeof d?(d=a(d),d=(new DOMParser).parseFromString(d,"application/xml")):d instanceof Document||c("Metadata: Invalid metadata object");this.metaDocument=d;this.metadata={};this.parse()}b.prototype={parse:function(){var a=this.metaDocument.documentElement;
if("rdf:rdf"!==a.nodeName.toLowerCase())for(a=a.firstChild;a&&"rdf:rdf"!==a.nodeName.toLowerCase();)a=a.nextSibling;var b=a?a.nodeName.toLowerCase():null;if(a&&"rdf:rdf"===b&&a.hasChildNodes()){var a=a.childNodes,d,c,e,f,g,h;e=0;for(g=a.length;e<g;e++)if(b=a[e],"rdf:description"===b.nodeName.toLowerCase())for(f=0,h=b.childNodes.length;f<h;f++)"#text"!==b.childNodes[f].nodeName.toLowerCase()&&(d=b.childNodes[f],c=d.nodeName.toLowerCase(),this.metadata[c]=d.textContent.trim())}},get:function(a){return this.metadata[a]||
null},has:function(a){return"undefined"!==typeof this.metadata[a]}};return b}();var U=function(){var a={};return{getCanvas:function(b,d,c,e){b in a?(b=a[b],b.canvas.width=d,b.canvas.height=c,b.context.setTransform(1,0,0,1,0,0)):(d=f(d,c),c=d.getContext("2d"),e&&h(c),a[b]=b={canvas:d,context:c});return b},clear:function(){a={}}}}(),$=function(){function a(b){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=F;this.fontMatrix=A;this.wordSpacing=this.charSpacing=this.lineY=this.lineX=
this.y=this.x=this.leading=0;this.textHScale=1;this.textRise=this.textRenderingMode=0;this.strokeColor=this.fillColor="#000000";this.lineWidth=this.strokeAlpha=this.fillAlpha=1;this.activeSMask=null;this.old=b}a.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(a,b){this.x=a;this.y=b}};return a}(),ha=function(){function a(b,d,c,e){this.ctx=b;this.current=new $;this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.xobjs=this.res=null;this.commonObjs=d;this.objs=
c;this.imageLayer=e;this.groupStack=[];this.baseTransform=this.processingType3=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;b&&h(b)}function b(a,d){if("undefined"!==typeof ImageData&&d instanceof ImageData)a.putImageData(d,0,0);else{var e=d.height,f=d.width,g=e/16,h=Math.floor(g),g=Math.ceil(g),e=e-16*h,l=a.createImageData(f,16),m=0,k,p=d.data,s=l.data,y,q,r;if(1===d.kind){var x=p.byteLength,s=PDFJS.hasCanvasTypedArrays?new Uint32Array(s.buffer):
new E(s),v=s.length,u=f+7>>3,w=PDFJS.isLittleEndian||!PDFJS.hasCanvasTypedArrays?4278190080:255;for(y=0;y<g;y++){r=y<h?16:e;for(q=k=0;q<r;q++){for(var z=x-m,A=0,z=z>u?f:8*z-7,C=z&-8,G=0,H=0;A<C;A+=8)H=p[m++],s[k++]=H&128?4294967295:w,s[k++]=H&64?4294967295:w,s[k++]=H&32?4294967295:w,s[k++]=H&16?4294967295:w,s[k++]=H&8?4294967295:w,s[k++]=H&4?4294967295:w,s[k++]=H&2?4294967295:w,s[k++]=H&1?4294967295:w;for(;A<z;A++)0===G&&(H=p[m++],G=128),s[k++]=H&G?4294967295:w,G>>=1}for(;k<v;)s[k++]=0;a.putImageData(l,
0,16*y)}}else if(3===d.kind){q=0;r=64*f;for(y=0;y<h;y++)s.set(p.subarray(m,m+r)),m+=r,a.putImageData(l,0,q),q+=16;y<g&&(s.set(p.subarray(m,m+f*e*4)),a.putImageData(l,0,q))}else if(2===d.kind)for(r=16*f,y=0;y<g;y++){y>=h&&(r=e,r*=f);k=0;for(q=r;q--;)s[k++]=p[m++],s[k++]=p[m++],s[k++]=p[m++],s[k++]=255;a.putImageData(l,0,16*y)}else c("bad image kind: "+d.kind)}}function d(a,b){for(var c=b.height,e=b.width,f=c/16,g=Math.floor(f),f=Math.ceil(f),c=c-16*g,h=a.createImageData(e,16),l=0,m=b.data,k=h.data,
p=0;p<f;p++){for(var s=p<g?16:c,y=3,q=0;q<s;q++)for(var r=0,x=0;x<e;x++){if(!r)var v=m[l++],r=128;k[y]=v&r?0:255;y+=4;r>>=1}a.putImageData(h,0,16*p)}}function f(a,b){for(var d="strokeStyle fillStyle fillRule globalAlpha lineWidth lineCap lineJoin miterLimit globalCompositeOperation font".split(" "),c=0,e=d.length;c<e;c++){var g=d[c];g in a&&(b[g]=a[g])}"setLineDash"in a?(b.setLineDash(a.getLineDash()),b.lineDashOffset=a.lineDashOffset):"mozDash"in a&&(b.mozDash=a.mozDash,b.mozDashOffset=a.mozDashOffset)}
function l(a,b,d,c,e,f){f=f?function(a,b,d,c){for(var e=c.length,f=3;f<e;f+=4){var g=c[f]/255;if(0===g)c[f-3]=a,c[f-2]=b,c[f-1]=d;else if(1>g){var h=1-g;c[f-3]=c[f-3]*g+a*h|0;c[f-2]=c[f-2]*g+b*h|0;c[f-1]=c[f-1]*g+d*h|0}}}.bind(null,f[0],f[1],f[2]):function(){};e="Luminosity"===e?function(a,b){for(var d=a.length,c=3;c<d;c+=4)b[c]=b[c]*(77*a[c-3]+152*a[c-2]+28*a[c-1]|0)>>16}:function(a,b){for(var d=a.length,c=3;c<d;c+=4)b[c]=b[c]*a[c]/255|0};for(var g=Math.min(c,Math.ceil(65536/d)),h=0;h<c;h+=g){var m=
Math.min(g,c-h),k=a.getImageData(0,h,d,m),m=b.getImageData(0,h,d,m);f(k.data);e(k.data,m.data);a.putImageData(m,0,h)}}var m=["butt","round","square"],k=["miter","round","bevel"],p={},s={};a.prototype={beginDrawing:function(a,b){var d=this.ctx.canvas.width,c=this.ctx.canvas.height;b?this.ctx.clearRect(0,0,d,c):(this.ctx.mozOpaque=!0,this.ctx.save(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.fillRect(0,0,d,c),this.ctx.restore());d=a.transform;this.ctx.save();this.ctx.transform.apply(this.ctx,
d);this.baseTransform=this.ctx.mozCurrentTransform.slice();this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(a,b,d,c){var e=a.argsArray;a=a.fnArray;b=b||0;var f=e.length;if(f==b)return b;for(var g=Date.now()+15,h=this.commonObjs,l=this.objs,m;;){if(c&&b===c.nextBreakPoint)return c.breakIt(b,d),b;m=a[b];if(m!==H.dependency)this[m].apply(this,e[b]);else{m=e[b];for(var k=0,p=m.length;k<p;k++){var s=m[k],y="g_"==s.substring(0,2);if(!y&&!l.isResolved(s))return l.get(s,d),b;if(y&&
!h.isResolved(s))return h.get(s,d),b}}b++;if(b==f)return b;if(d&&Date.now()>g)return d(),b}},endDrawing:function(){this.ctx.restore();U.clear();ia.clear();this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(a){this.current.lineWidth=a;this.ctx.lineWidth=a},setLineCap:function(a){this.ctx.lineCap=m[a]},setLineJoin:function(a){this.ctx.lineJoin=k[a]},setMiterLimit:function(a){this.ctx.miterLimit=a},setDash:function(a,b){var d=this.ctx;"setLineDash"in d?(d.setLineDash(a),d.lineDashOffset=
b):(d.mozDash=a,d.mozDashOffset=b)},setRenderingIntent:function(a){},setFlatness:function(a){},setGState:function(a){for(var b=0,d=a.length;b<d;b++){var c=a[b],f=c[1];switch(c[0]){case "LW":this.setLineWidth(f);break;case "LC":this.setLineCap(f);break;case "LJ":this.setLineJoin(f);break;case "ML":this.setMiterLimit(f);break;case "D":this.setDash(f[0],f[1]);break;case "RI":this.setRenderingIntent(f);break;case "FL":this.setFlatness(f);break;case "Font":this.setFont(f[0],f[1]);break;case "CA":this.current.strokeAlpha=
c[1];break;case "ca":this.current.fillAlpha=c[1];this.ctx.globalAlpha=c[1];break;case "BM":f&&f.name&&"Normal"!==f.name?(c=f.name.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()}).substring(1),this.ctx.globalCompositeOperation=c,this.ctx.globalCompositeOperation!==c&&e('globalCompositeOperation "'+c+'" is not supported')):this.ctx.globalCompositeOperation="source-over";break;case "SMask":this.current.activeSMask&&this.endSMaskGroup(),this.current.activeSMask=f?this.tempSMask:null,this.current.activeSMask&&
this.beginSMaskGroup(),this.tempSMask=null}}},beginSMaskGroup:function(){var a=this.current.activeSMask,b=U.getCanvas("smaskGroupAt"+this.groupLevel,a.canvas.width,a.canvas.height,!0),d=this.ctx,c=d.mozCurrentTransform;this.ctx.save();b=b.context;b.scale(1/a.scaleX,1/a.scaleY);b.translate(-a.offsetX,-a.offsetY);b.transform.apply(b,c);f(d,b);this.ctx=b;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(d);this.groupLevel++},endSMaskGroup:function(){var a=this.ctx;this.groupLevel--;
var b=this.ctx=this.groupStack.pop(),d=this.current.activeSMask,c=d.canvas,e=d.context;b.setTransform(d.scaleX,0,0,d.scaleY,d.offsetX,d.offsetY);var f=d.backdrop||null;ia.isEnabled?(a=ia.composeSMask(a.canvas,c,{subtype:d.subtype,backdrop:f}),b.setTransform(1,0,0,1,0,0),b.drawImage(a,d.offsetX,d.offsetY)):(l(e,a,c.width,c.height,d.subtype,f),b.drawImage(c,0,0));this.ctx.restore()},save:function(){this.ctx.save();var a=this.current;this.stateStack.push(a);this.current=a.clone();this.current.activeSMask&&
(this.current.activeSMask=null)},restore:function(){var a=this.stateStack.pop();a&&(this.current.activeSMask&&this.endSMaskGroup(),this.current=a,this.ctx.restore())},transform:function(a,b,d,c,e,f){this.ctx.transform(a,b,d,c,e,f)},constructPath:function(a,b){for(var d=this.ctx,c=this.current,e=c.x,f=c.y,g=0,h=0,l=a.length;g<l;g++)switch(a[g]|0){case H.moveTo:e=b[h++];f=b[h++];d.moveTo(e,f);break;case H.lineTo:e=b[h++];f=b[h++];d.lineTo(e,f);break;case H.curveTo:e=b[h+4];f=b[h+5];d.bezierCurveTo(b[h],
b[h+1],b[h+2],b[h+3],e,f);h+=6;break;case H.curveTo2:d.bezierCurveTo(e,f,b[h],b[h+1],b[h+2],b[h+3]);e=b[h+2];f=b[h+3];h+=4;break;case H.curveTo3:e=b[h+2];f=b[h+3];d.bezierCurveTo(b[h],b[h+1],e,f,e,f);h+=4;break;case H.closePath:d.closePath()}c.setCurrentPoint(e,f)},closePath:function(){this.ctx.closePath()},rectangle:function(a,b,d,c){0===d&&(d=this.getSinglePixelWidth());0===c&&(c=this.getSinglePixelWidth());this.ctx.rect(a,b,d,c)},stroke:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,
d=this.current.strokeColor;0===this.current.lineWidth&&(b.lineWidth=this.getSinglePixelWidth());b.globalAlpha=this.current.strokeAlpha;d&&d.hasOwnProperty("type")&&"Pattern"===d.type?(b.save(),b.strokeStyle=d.getPattern(b,this),b.stroke(),b.restore()):b.stroke();a&&this.consumePath();b.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath();this.stroke()},fill:function(a){a="undefined"!==typeof a?a:!0;var b=this.ctx,d=this.current.fillColor,c=!1;d&&d.hasOwnProperty("type")&&"Pattern"===
d.type&&(b.save(),b.fillStyle=d.getPattern(b,this),c=!0);if(this.pendingEOFill){if(void 0!==b.mozFillRule)b.mozFillRule="evenodd",b.fill(),b.mozFillRule="nonzero";else try{b.fill("evenodd")}catch(e){b.fill()}this.pendingEOFill=!1}else b.fill();c&&b.restore();a&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0;this.fill()},fillStroke:function(){this.fill(!1);this.stroke(!1);this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0;this.fillStroke()},closeFillStroke:function(){this.closePath();
this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0;this.closePath();this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=p},eoClip:function(){this.pendingClip=s},beginText:function(){this.current.textMatrix=F;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},endText:function(){var a=this.pendingTextPaths,b=this.ctx;if(void 0===a)b.beginPath();else{b.save();b.beginPath();for(var d=0;d<a.length;d++){var c=a[d];b.setTransform.apply(b,
c.transform);b.translate(c.x,c.y);c.addToPath(b,c.fontSize)}b.restore();b.clip();b.beginPath();delete this.pendingTextPaths}},setCharSpacing:function(a){this.current.charSpacing=a},setWordSpacing:function(a){this.current.wordSpacing=a},setHScale:function(a){this.current.textHScale=a/100},setLeading:function(a){this.current.leading=-a},setFont:function(a,b){var d=this.commonObjs.get(a),f=this.current;d||c("Can't find font for "+a);f.fontMatrix=d.fontMatrix?d.fontMatrix:A;0!==f.fontMatrix[0]&&0!==f.fontMatrix[3]||
e("Invalid font matrix for font "+a);0>b?(b=-b,f.fontDirection=-1):f.fontDirection=1;this.current.font=d;this.current.fontSize=b;if(!d.isType3Font){var f=d.black?d.bold?"bolder":"bold":d.bold?"bold":"normal",g=d.italic?"italic":"normal",d='"'+(d.loadedName||"sans-serif")+'", '+d.fallbackName,h=16<=b?b:16;this.current.fontSizeScale=16!=h?1:b/16;this.ctx.font=g+" "+f+" "+h+"px "+d}},setTextRenderingMode:function(a){this.current.textRenderingMode=a},setTextRise:function(a){this.current.textRise=a},moveText:function(a,
b){this.current.x=this.current.lineX+=a;this.current.y=this.current.lineY+=b},setLeadingMoveText:function(a,b){this.setLeading(-b);this.moveText(a,b)},setTextMatrix:function(a,b,d,c,e,f){this.current.textMatrix=[a,b,d,c,e,f];this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},applyTextTransforms:function(){var a=this.ctx,b=this.current;a.transform.apply(a,b.textMatrix);a.translate(b.x,b.y+b.textRise);0<b.fontDirection?
a.scale(b.textHScale,-1):a.scale(-b.textHScale,1)},paintChar:function(a,b,d){var c=this.ctx,e=this.current,f=e.font,g=e.fontSize/e.fontSizeScale,h=e.textRenderingMode,e=h&3,h=!!(h&4),l;if(f.disableFontFace||h)l=f.getPathGenerator(this.commonObjs,a);f.disableFontFace?(c.save(),c.translate(b,d),c.beginPath(),l(c,g),0!==e&&2!==e||c.fill(),1!==e&&2!==e||c.stroke(),c.restore()):(0!==e&&2!==e||c.fillText(a,b,d),1!==e&&2!==e||c.strokeText(a,b,d));h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:c.mozCurrentTransform,
x:b,y:d,fontSize:g,addToPath:l})},get isFontSubpixelAAEnabled(){var a=document.createElement("canvas").getContext("2d");a.scale(1.5,1);a.fillText("I",0,10);for(var a=a.getImageData(0,0,10,10).data,b=!1,d=3;d<a.length;d+=4)if(0<a[d]&&255>a[d]){b=!0;break}return u(this,"isFontSubpixelAAEnabled",b)},showText:function(a){var b=this.ctx,d=this.current,c=d.font,e=d.fontSize,f=d.fontSizeScale,g=d.charSpacing,h=d.wordSpacing,l=d.textHScale*d.fontDirection,m=d.fontMatrix||A,k=a.length,p=c.vertical,s=c.defaultVMetrics,
y,q,r;if(0!==e)if(c.isType3Font){b.save();b.transform.apply(b,d.textMatrix);b.translate(d.x,d.y);b.scale(l,1);for(y=0;y<k;++y)q=a[y],null===q?(this.ctx.translate(h,0),d.x+=h*l):(this.processingType3=q,this.save(),b.scale(e,e),b.transform.apply(b,m),this.executeOperatorList(c.charProcOperatorList[q.operatorListId]),this.restore(),r=(C.applyTransform([q.width,0],m)[0]*e+g)*d.fontDirection,b.translate(r,0),d.x+=r*l);b.restore();this.processingType3=null}else{b.save();this.applyTextTransforms();y=d.lineWidth;
var m=d.textMatrix[0],x=d.textMatrix[1],m=Math.sqrt(m*m+x*x);y=0===m||0===y?this.getSinglePixelWidth():y/m;1!=f&&(b.scale(f,f),y/=f);b.lineWidth=y;for(y=m=0;y<k;++y)if(q=a[y],null===q)m+=d.fontDirection*h;else{var x=!1,v=q.fontChar,u=q.vmetric||s;if(p)var w=q.vmetric?u[1]:.5*q.width,w=-w*e*d.fontMatrix[0],z=u[2]*e*d.fontMatrix[0];r=u?-u[0]:q.width;u=r*e*d.fontMatrix[0]+g*d.fontDirection;q=q.accent;var H,G,B;p?(H=w/f,G=(m+z)/f):(H=m/f,G=0);c.remeasure&&0<r&&this.isFontSubpixelAAEnabled&&(x=1E3*b.measureText(v).width/
d.fontSize*d.fontSizeScale,r/=x,x=!0,b.save(),b.scale(r,1),H/=r,q&&(B/=r));this.paintChar(v,H,G);q&&(B=H+q.offset.x/f,v=G-q.offset.y/f,this.paintChar(q.fontChar,B,v));m+=u;x&&b.restore()}p?d.y-=m*l:d.x+=m*l;b.restore()}},showSpacedText:function(a){for(var b=this.current,d=b.fontSize,c=.001*b.textHScale*b.fontDirection,e=a.length,f=b.font.vertical,g=0;g<e;++g){var h=a[g];"number"==typeof h?(h=-h*d*c,f?b.y+=h:b.x+=h):this.showText(h)}},nextLineShowText:function(a){this.nextLine();this.showText(a)},
nextLineSetSpacingShowText:function(a,b,d){this.setWordSpacing(a);this.setCharSpacing(b);this.nextLineShowText(d)},setCharWidth:function(a,b){},setCharWidthAndBounds:function(a,b,d,c,e,f){this.rectangle(d,c,e-d,f-c);this.clip();this.endPath()},getColorN_Pattern:function(a){return"TilingPattern"==a[0]?new ta(a,a[1],this.ctx,this.objs,this.commonObjs,this.baseTransform):y(a)},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=
this.getColorN_Pattern(arguments)},setStrokeRGBColor:function(a,b,d){var c=C.makeCssRgb(arguments);this.ctx.strokeStyle=c;this.current.strokeColor=c},setFillRGBColor:function(a,b,d){var c=C.makeCssRgb(arguments);this.ctx.fillStyle=c;this.current.fillColor=c},shadingFill:function(a){var b=this.ctx;this.save();a=y(a);b.fillStyle=a.getPattern(b,this,!0);var d=b.mozCurrentTransformInverse;if(d){var b=b.canvas,c=b.width,e=b.height,b=C.applyTransform([0,0],d);a=C.applyTransform([0,e],d);var f=C.applyTransform([c,
0],d),g=C.applyTransform([c,e],d),d=Math.min(b[0],a[0],f[0],g[0]),c=Math.min(b[1],a[1],f[1],g[1]),e=Math.max(b[0],a[0],f[0],g[0]),b=Math.max(b[1],a[1],f[1],g[1]);this.ctx.fillRect(d,c,e-d,b-c)}else this.ctx.fillRect(-1E10,-1E10,2E10,2E10);this.restore()},beginInlineImage:function(){c("Should not call beginInlineImage")},beginImageData:function(){c("Should not call beginImageData")},paintFormXObjectBegin:function(a,b){this.save();this.baseTransformStack.push(this.baseTransform);a&&w(a)&&6==a.length&&
this.transform.apply(this,a);this.baseTransform=this.ctx.mozCurrentTransform;b&&w(b)&&4==b.length&&(this.rectangle(b[0],b[1],b[2]-b[0],b[3]-b[1]),this.clip(),this.endPath())},paintFormXObjectEnd:function(){this.restore();this.baseTransform=this.baseTransformStack.pop()},beginGroup:function(a){this.save();var b=this.ctx;a.isolated||q("TODO: Support non-isolated groups.");a.knockout&&e("Knockout groups not supported.");var d=b.mozCurrentTransform;a.matrix&&b.transform.apply(b,a.matrix);a.bbox||c("Bounding box is required.");
var g=C.getAxialAlignedBoundingBox(a.bbox,b.mozCurrentTransform),g=C.intersect(g,[0,0,b.canvas.width,b.canvas.height])||[0,0,0,0],h=Math.floor(g[0]),l=Math.floor(g[1]),m=Math.max(Math.ceil(g[2])-h,1),k=Math.max(Math.ceil(g[3])-l,1),p=g=1;4096<m&&(g=m/4096,m=4096);4096<k&&(p=k/4096,k=4096);var s="groupAt"+this.groupLevel;a.smask&&(s+="_smask_"+this.smaskCounter++%2);m=U.getCanvas(s,m,k,!0);k=m.context;k.scale(1/g,1/p);k.translate(-h,-l);k.transform.apply(k,d);a.smask?this.smaskStack.push({canvas:m.canvas,
context:k,offsetX:h,offsetY:l,scaleX:g,scaleY:p,subtype:a.smask.subtype,backdrop:a.smask.backdrop}):(b.setTransform(1,0,0,1,0,0),b.translate(h,l),b.scale(g,p));f(b,k);this.ctx=k;this.setGState([["BM","Normal"],["ca",1],["CA",1]]);this.groupStack.push(b);this.groupLevel++},endGroup:function(a){this.groupLevel--;var b=this.ctx;this.ctx=this.groupStack.pop();void 0!==this.ctx.imageSmoothingEnabled?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1;a.smask?this.tempSMask=this.smaskStack.pop():
this.ctx.drawImage(b.canvas,0,0);this.restore()},beginAnnotations:function(){this.save();this.current=new $},endAnnotations:function(){this.restore()},beginAnnotation:function(a,b,d){this.save();a&&w(a)&&4==a.length&&(this.rectangle(a[0],a[1],a[2]-a[0],a[3]-a[1]),this.clip(),this.endPath());this.transform.apply(this,b);this.transform.apply(this,d)},endAnnotation:function(){this.restore()},paintJpegXObject:function(a,b,d){var c=this.objs.get(a);if(c){this.save();var f=this.ctx;f.scale(1/b,-1/d);f.drawImage(c,
0,0,c.width,c.height,0,-d,b,d);this.imageLayer&&(c=f.mozCurrentTransformInverse,f=this.getCanvasPosition(0,0),this.imageLayer.appendImage({objId:a,left:f[0],top:f[1],width:b/c[0],height:d/c[3]}));this.restore()}else e("Dependent image isn't ready yet")},paintImageMaskXObject:function(a){var b=this.ctx,c=a.width,e=a.height,f=this.processingType3;!f||"compiled"in f||(f.compiled=1E3>=c&&1E3>=e?g({data:a.data,width:c,height:e}):null);f&&f.compiled?f.compiled(b):(b=U.getCanvas("maskCanvas",c,e),f=b.context,
f.save(),d(f,a),f.globalCompositeOperation="source-in",a=this.current.fillColor,f.fillStyle=a&&a.hasOwnProperty("type")&&"Pattern"===a.type?a.getPattern(f,this):a,f.fillRect(0,0,c,e),f.restore(),this.paintInlineImageXObject(b.canvas))},paintImageMaskXObjectRepeat:function(a,b,c,e){var f=a.width,g=a.height,h=this.ctx,l=U.getCanvas("maskCanvas",f,g),m=l.context;m.save();d(m,a);m.globalCompositeOperation="source-in";a=this.current.fillColor;m.fillStyle=a&&a.hasOwnProperty("type")&&"Pattern"===a.type?
a.getPattern(m,this):a;m.fillRect(0,0,f,g);m.restore();m=0;for(a=e.length;m<a;m+=2)h.save(),h.transform(b,0,0,c,e[m],e[m+1]),h.scale(1,-1),h.drawImage(l.canvas,0,0,f,g,0,-1,1,1),h.restore()},paintImageMaskXObjectGroup:function(a){for(var b=this.ctx,c=0,e=a.length;c<e;c++){var f=a[c],g=f.width,h=f.height,l=U.getCanvas("maskCanvas",g,h),m=l.context;m.save();d(m,f);m.globalCompositeOperation="source-in";var k=this.current.fillColor;m.fillStyle=k&&k.hasOwnProperty("type")&&"Pattern"===k.type?k.getPattern(m,
this):k;m.fillRect(0,0,g,h);m.restore();b.save();b.transform.apply(b,f.transform);b.scale(1,-1);b.drawImage(l.canvas,0,0,g,h,0,-1,1,1);b.restore()}},paintImageXObject:function(a){(a=this.objs.get(a))?this.paintInlineImageXObject(a):e("Dependent image isn't ready yet")},paintImageXObjectRepeat:function(a,b,d,c){if(a=this.objs.get(a)){for(var f=a.width,g=a.height,h=[],l=0,m=c.length;l<m;l+=2)h.push({transform:[b,0,0,d,c[l],c[l+1]],x:0,y:0,w:f,h:g});this.paintInlineImageXObjectGroup(a,h)}else e("Dependent image isn't ready yet")},
paintInlineImageXObject:function(a){var d=a.width,c=a.height,e=this.ctx;this.save();e.scale(1/d,-1/c);var f=e.mozCurrentTransformInverse,g=f[0],h=f[1],g=Math.max(Math.sqrt(g*g+h*h),1),h=f[2],l=f[3],h=Math.max(Math.sqrt(h*h+l*l),1),m;if(a instanceof HTMLElement||!a.data)l=a;else{m=U.getCanvas("inlineImage",d,c);var k=m.context;b(k,a);l=m.canvas}for(var p=d,s=c,y="prescale1";2<g&&1<p||2<h&&1<s;){var q=p,r=s;2<g&&1<p&&(q=Math.ceil(p/2),g/=p/q);2<h&&1<s&&(r=Math.ceil(s/2),h/=s/r);m=U.getCanvas(y,q,r);
k=m.context;k.clearRect(0,0,q,r);k.drawImage(l,0,0,p,s,0,0,q,r);l=m.canvas;p=q;s=r;y="prescale1"===y?"prescale2":"prescale1"}e.drawImage(l,0,0,p,s,0,-c,d,c);this.imageLayer&&(e=this.getCanvasPosition(0,-c),this.imageLayer.appendImage({imgData:a,left:e[0],top:e[1],width:d/f[0],height:c/f[3]}));this.restore()},paintInlineImageXObjectGroup:function(a,d){var c=this.ctx,e=a.width,f=a.height,g=U.getCanvas("inlineImage",e,f);b(g.context,a);for(var h=0,l=d.length;h<l;h++){var m=d[h];c.save();c.transform.apply(c,
m.transform);c.scale(1,-1);c.drawImage(g.canvas,m.x,m.y,m.w,m.h,0,-1,1,1);this.imageLayer&&(m=this.getCanvasPosition(m.x,m.y),this.imageLayer.appendImage({imgData:a,left:m[0],top:m[1],width:e,height:f}));c.restore()}},paintSolidColorImageMask:function(){this.ctx.fillRect(0,0,1,1)},markPoint:function(a){},markPointProps:function(a,b){},beginMarkedContent:function(a){},beginMarkedContentProps:function(a,b){},endMarkedContent:function(){},beginCompat:function(){},endCompat:function(){},consumePath:function(){var a=
this.ctx;if(this.pendingClip){if(this.pendingClip==s)if(void 0!==a.mozFillRule)a.mozFillRule="evenodd",a.clip(),a.mozFillRule="nonzero";else try{a.clip("evenodd")}catch(b){a.clip()}else a.clip();this.pendingClip=null}a.beginPath()},getSinglePixelWidth:function(a){a=this.ctx.mozCurrentTransformInverse;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1],a[2]*a[2]+a[3]*a[3]))},getCanvasPosition:function(a,b){var d=this.ctx.mozCurrentTransform;return[d[0]*a+d[2]*b+d[4],d[1]*a+d[3]*b+d[5]]}};for(var r in H)a.prototype[H[r]]=
a.prototype[r];return a}(),ia=function(){function a(b,d,c){c=b.createShader(c);b.shaderSource(c,d);b.compileShader(c);if(!b.getShaderParameter(c,b.COMPILE_STATUS))throw b=b.getShaderInfoLog(c),Error("Error during shader compilation: "+b);return c}function b(a,d){for(var c=a.createProgram(),e=0,f=d.length;e<f;++e)a.attachShader(c,d[e]);a.linkProgram(c);if(!a.getProgramParameter(c,a.LINK_STATUS))throw c=a.getProgramInfoLog(c),Error("Error during program linking: "+c);return c}function d(a,b,c){a.activeTexture(c);
c=a.createTexture();a.bindTexture(a.TEXTURE_2D,c);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c}function c(){e||(f=document.createElement("canvas"),e=f.getContext("webgl",{premultipliedalpha:!1}))}var e,f,g=null,h=null;return{get isEnabled(){if(PDFJS.disableWebGL)return!1;
var a=!1;try{c(),a=!!e}catch(b){}return u(this,"isEnabled",a)},composeSMask:function(h,l,m){var k=h.width,p=h.height;if(!g){var s,y;c();s=f;f=null;y=e;e=null;var q=a(y,"  attribute vec2 a_position;                                      attribute vec2 a_texCoord;                                                                                                      uniform vec2 u_resolution;                                                                                                      varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;       gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_texCoord = a_texCoord;                                      }                                                             ",
y.VERTEX_SHADER),r=a(y,"  precision mediump float;                                                                                                        uniform vec4 u_backdrop;                                        uniform int u_subtype;                                          uniform sampler2D u_image;                                      uniform sampler2D u_mask;                                                                                                       varying vec2 v_texCoord;                                                                                                        void main() {                                                     vec4 imageColor = texture2D(u_image, v_texCoord);               vec4 maskColor = texture2D(u_mask, v_texCoord);                 if (u_backdrop.a > 0.0) {                                         maskColor.rgb = maskColor.rgb * maskColor.a +                                   u_backdrop.rgb * (1.0 - maskColor.a);         }                                                               float lum;                                                      if (u_subtype == 0) {                                             lum = maskColor.a;                                            } else {                                                          lum = maskColor.r * 0.3 + maskColor.g * 0.59 +                        maskColor.b * 0.11;                                     }                                                               imageColor.a *= lum;                                            imageColor.rgb *= imageColor.a;                                 gl_FragColor = imageColor;                                    }                                                             ",
y.FRAGMENT_SHADER),x=b(y,[q,r]);y.useProgram(x);q={};q.gl=y;q.canvas=s;q.resolutionLocation=y.getUniformLocation(x,"u_resolution");q.positionLocation=y.getAttribLocation(x,"a_position");q.backdropLocation=y.getUniformLocation(x,"u_backdrop");q.subtypeLocation=y.getUniformLocation(x,"u_subtype");s=y.getAttribLocation(x,"a_texCoord");var r=y.getUniformLocation(x,"u_image"),x=y.getUniformLocation(x,"u_mask"),v=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,v);y.bufferData(y.ARRAY_BUFFER,new Float32Array([0,
0,1,0,0,1,0,1,1,0,1,1]),y.STATIC_DRAW);y.enableVertexAttribArray(s);y.vertexAttribPointer(s,2,y.FLOAT,!1,0,0);y.uniform1i(r,0);y.uniform1i(x,1);g=q}y=g;q=y.canvas;s=y.gl;q.width=k;q.height=p;s.viewport(0,0,s.drawingBufferWidth,s.drawingBufferHeight);s.uniform2f(y.resolutionLocation,k,p);m.backdrop?s.uniform4f(y.resolutionLocation,m.backdrop[0],m.backdrop[1],m.backdrop[2],1):s.uniform4f(y.resolutionLocation,0,0,0,0);s.uniform1i(y.subtypeLocation,"Luminosity"===m.subtype?1:0);h=d(s,h,s.TEXTURE0);l=
d(s,l,s.TEXTURE1);m=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,m);s.bufferData(s.ARRAY_BUFFER,new Float32Array([0,0,k,0,0,p,0,p,k,0,k,p]),s.STATIC_DRAW);s.enableVertexAttribArray(y.positionLocation);s.vertexAttribPointer(y.positionLocation,2,s.FLOAT,!1,0,0);s.clearColor(0,0,0,0);s.enable(s.BLEND);s.blendFunc(s.ONE,s.ONE_MINUS_SRC_ALPHA);s.clear(s.COLOR_BUFFER_BIT);s.drawArrays(s.TRIANGLES,0,6);s.flush();s.deleteTexture(h);s.deleteTexture(l);s.deleteBuffer(m);return q},drawFigures:function(d,g,l,
m,k){if(!h){var p,s;c();p=f;f=null;s=e;e=null;var y=a(s,"  attribute vec2 a_position;                                      attribute vec3 a_color;                                                                                                         uniform vec2 u_resolution;                                      uniform vec2 u_scale;                                           uniform vec2 u_offset;                                                                                                          varying vec4 v_color;                                                                                                           void main() {                                                     vec2 position = (a_position + u_offset) * u_scale;              vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;         gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);                                                                              v_color = vec4(a_color / 255.0, 1.0);                         }                                                             ",
s.VERTEX_SHADER),q=a(s,"  precision mediump float;                                                                                                        varying vec4 v_color;                                                                                                           void main() {                                                     gl_FragColor = v_color;                                       }                                                             ",s.FRAGMENT_SHADER),y=b(s,[y,
q]);s.useProgram(y);q={};q.gl=s;q.canvas=p;q.resolutionLocation=s.getUniformLocation(y,"u_resolution");q.scaleLocation=s.getUniformLocation(y,"u_scale");q.offsetLocation=s.getUniformLocation(y,"u_offset");q.positionLocation=s.getAttribLocation(y,"a_position");q.colorLocation=s.getAttribLocation(y,"a_color");h=q}p=h;s=p.canvas;y=p.gl;s.width=d;s.height=g;y.viewport(0,0,y.drawingBufferWidth,y.drawingBufferHeight);y.uniform2f(p.resolutionLocation,d,g);d=0;var r,x,v;r=0;for(x=m.length;r<x;r++)switch(m[r].type){case "lattice":v=
m[r].coords.length/m[r].verticesPerRow|0;d+=(v-1)*(m[r].verticesPerRow-1)*6;break;case "triangles":d+=m[r].coords.length}q=new Float32Array(2*d);g=new Uint8Array(3*d);var u=k.coords,w=k.colors,z=0,A=0;r=0;for(x=m.length;r<x;r++){v=m[r];var C=v.coords,H=v.colors;switch(v.type){case "lattice":var G=v.verticesPerRow;v=C.length/G|0;for(var B=1;B<v;B++)for(var D=B*G+1,I=1;I<G;I++,D++)q[z]=u[C[D-G-1]],q[z+1]=u[C[D-G-1]+1],q[z+2]=u[C[D-G]],q[z+3]=u[C[D-G]+1],q[z+4]=u[C[D-1]],q[z+5]=u[C[D-1]+1],g[A]=w[H[D-
G-1]],g[A+1]=w[H[D-G-1]+1],g[A+2]=w[H[D-G-1]+2],g[A+3]=w[H[D-G]],g[A+4]=w[H[D-G]+1],g[A+5]=w[H[D-G]+2],g[A+6]=w[H[D-1]],g[A+7]=w[H[D-1]+1],g[A+8]=w[H[D-1]+2],q[z+6]=q[z+2],q[z+7]=q[z+3],q[z+8]=q[z+4],q[z+9]=q[z+5],q[z+10]=u[C[D]],q[z+11]=u[C[D]+1],g[A+9]=g[A+3],g[A+10]=g[A+4],g[A+11]=g[A+5],g[A+12]=g[A+6],g[A+13]=g[A+7],g[A+14]=g[A+8],g[A+15]=w[H[D]],g[A+16]=w[H[D]+1],g[A+17]=w[H[D]+2],z+=12,A+=18;break;case "triangles":for(v=0,G=C.length;v<G;v++)q[z]=u[C[v]],q[z+1]=u[C[v]+1],g[A]=w[H[r]],g[A+1]=
w[H[v]+1],g[A+2]=w[H[v]+2],z+=2,A+=3}}l?y.clearColor(l[0]/255,l[1]/255,l[2]/255,1):y.clearColor(0,0,0,0);y.clear(y.COLOR_BUFFER_BIT);l=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,l);y.bufferData(y.ARRAY_BUFFER,q,y.STATIC_DRAW);y.enableVertexAttribArray(p.positionLocation);y.vertexAttribPointer(p.positionLocation,2,y.FLOAT,!1,0,0);m=y.createBuffer();y.bindBuffer(y.ARRAY_BUFFER,m);y.bufferData(y.ARRAY_BUFFER,g,y.STATIC_DRAW);y.enableVertexAttribArray(p.colorLocation);y.vertexAttribPointer(p.colorLocation,
3,y.UNSIGNED_BYTE,!1,0,0);y.uniform2f(p.scaleLocation,k.scaleX,k.scaleY);y.uniform2f(p.offsetLocation,k.offsetX,k.offsetY);y.drawArrays(y.TRIANGLES,0,d);y.flush();y.deleteBuffer(l);y.deleteBuffer(m);return s},clear:function(){h=g=null}}}(),ma={RadialAxial:{fromIR:function(a){var b=a[1],d=a[2],c=a[3],e=a[4],f=a[5],g=a[6];return{type:"Pattern",getPattern:function(a){var h;"axial"===b?h=a.createLinearGradient(c[0],c[1],e[0],e[1]):"radial"===b&&(h=a.createRadialGradient(c[0],c[1],f,e[0],e[1],g));a=0;
for(var l=d.length;a<l;++a){var m=d[a];h.addColorStop(m[0],m[1])}return h}}}}},sa=function(){function a(b,d,c,e,f,g,h,l){var m=d.coords,k=d.colors,p=b.data;b=4*b.width;var s;m[c+1]>m[e+1]&&(s=c,c=e,e=s,s=g,g=h,h=s);m[e+1]>m[f+1]&&(s=e,e=f,f=s,s=h,h=l,l=s);m[c+1]>m[e+1]&&(s=c,c=e,e=s,s=g,g=h,h=s);s=(m[c]+d.offsetX)*d.scaleX;c=(m[c+1]+d.offsetY)*d.scaleY;var y=(m[e]+d.offsetX)*d.scaleX;e=(m[e+1]+d.offsetY)*d.scaleY;var q=(m[f]+d.offsetX)*d.scaleX;d=(m[f+1]+d.offsetY)*d.scaleY;if(!(c>=d)){f=k[g];m=k[g+
1];g=k[g+2];var r=k[h],x=k[h+1];h=k[h+2];var v=k[l],u=k[l+1];l=k[l+2];for(var w=Math.round(c),k=Math.round(d),z,A,C,H,G,B,D,I,E=w;E<=k;E++){E<e?(I=E<c?0:c===e?1:(c-E)/(c-e),w=s-(s-y)*I,z=f-(f-r)*I,A=m-(m-x)*I,C=g-(g-h)*I):(I=E>d?1:e===d?0:(e-E)/(e-d),w=y-(y-q)*I,z=r-(r-v)*I,A=x-(x-u)*I,C=h-(h-l)*I);I=E<c?0:E>d?1:(c-E)/(c-d);H=s-(s-q)*I;G=f-(f-v)*I;B=m-(m-u)*I;D=g-(g-l)*I;I=Math.round(Math.min(w,H));for(var K=Math.round(Math.max(w,H)),J=b*E+4*I,F=I;F<=K;F++)I=(w-F)/(w-H),I=0>I?0:1<I?1:I,p[J++]=z-(z-
G)*I|0,p[J++]=A-(A-B)*I|0,p[J++]=C-(C-D)*I|0,p[J++]=255}}}return function(b,d,e,f,g,h){var m=Math.floor(b[0]),l=Math.floor(b[1]),k=Math.ceil(b[2])-m;b=Math.ceil(b[3])-l;var p=Math.min(Math.ceil(Math.abs(k*d[0]*1.1)),3E3),s=Math.min(Math.ceil(Math.abs(b*d[1]*1.1)),3E3),k=k/p;b/=s;f={coords:e,colors:f,offsetX:-m,offsetY:-l,scaleX:1/k,scaleY:1/b};var y;if(ia.isEnabled)g=ia.drawFigures(p,s,h,g,f),e=U.getCanvas("mesh",p,s,!1),e.context.drawImage(g,0,0);else{e=U.getCanvas("mesh",p,s,!1);d=e.context;s=d.createImageData(p,
s);if(h){var q=s.data,p=0;for(y=q.length;p<y;p+=4)q[p]=h[0],q[p+1]=h[1],q[p+2]=h[2],q[p+3]=255}for(p=0;p<g.length;p++){h=s;var r=g[p];y=f;var q=r.coords,x=r.colors,v=void 0,u=void 0;switch(r.type){case "lattice":for(var r=r.verticesPerRow,u=Math.floor(q.length/r)-1,w=r-1,v=0;v<u;v++)for(var z=v*r,A=0;A<w;A++,z++)a(h,y,q[z],q[z+1],q[z+r],x[z],x[z+1],x[z+r]),a(h,y,q[z+r+1],q[z+1],q[z+r],x[z+r+1],x[z+1],x[z+r]);break;case "triangles":v=0;for(u=q.length;v<u;v+=3)a(h,y,q[v],q[v+1],q[v+2],x[v],x[v+1],x[v+
2]);break;default:c("illigal figure")}}d.putImageData(s,0,0)}g=e.canvas;return{canvas:g,offsetX:m,offsetY:l,scaleX:k,scaleY:b}}}();ma.Mesh={fromIR:function(a){var b=a[2],d=a[3],c=a[4],e=a[5],f=a[6],g=a[8];return{type:"Pattern",getPattern:function(a,h,m){var l;if(m)l=C.singularValueDecompose2dScale(a.mozCurrentTransform);else{l=C.singularValueDecompose2dScale(f);var k=C.singularValueDecompose2dScale(h.baseTransform);l=[l[0]*k[0],l[1]*k[1]]}l=sa(e,l,b,d,c,m?null:g);m||(a.setTransform.apply(a,h.baseTransform),
f&&a.transform.apply(a,f));a.translate(l.offsetX,l.offsetY);a.scale(l.scaleX,l.scaleY);return a.createPattern(l.canvas,"no-repeat")}}}};ma.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};var ta=function(){function a(b,d,c,e,f,g){this.operatorList=b[2];this.matrix=b[3]||[1,0,0,1,0,0];this.bbox=b[4];this.xstep=b[5];this.ystep=b[6];this.paintType=b[7];this.tilingType=b[8];this.color=d;this.objs=e;this.commonObjs=f;this.baseTransform=g;this.type="Pattern";this.ctx=
c}a.prototype={createPatternCanvas:function(a){var b=this.operatorList,d=this.bbox,c=this.xstep,e=this.ystep,f=this.paintType,g=this.color,h=this.objs,l=this.commonObjs;q("TilingType: "+this.tilingType);var m=d[0],k=d[1],p=d[2],s=d[3],y=[m,k],r=[m+c,k+e],x=r[0]-y[0],r=r[1]-y[1],v=C.singularValueDecompose2dScale(this.matrix),u=C.singularValueDecompose2dScale(this.baseTransform),v=[v[0]*u[0],v[1]*u[1]],x=Math.min(Math.ceil(Math.abs(x*v[0])),3E3),r=Math.min(Math.ceil(Math.abs(r*v[1])),3E3),v=U.getCanvas("pattern",
x,r,!0),u=v.context,h=new ha(u,l,h);h.groupLevel=a.groupLevel;this.setFillAndStrokeStyleToContext(u,f,g);this.setScale(x,r,c,e);this.transformToScale(h);h.transform.apply(h,[1,0,0,1,-y[0],-y[1]]);this.clipBbox(h,d,m,k,p,s);h.executeOperatorList(b);return v.canvas},setScale:function(a,b,d,c){this.scale=[a/d,b/c]},transformToScale:function(a){var b=this.scale;a.transform.apply(a,[b[0],0,0,b[1],0,0])},scaleToContext:function(){var a=this.scale;this.ctx.scale(1/a[0],1/a[1])},clipBbox:function(a,b,d,c,
e,f){b&&w(b)&&4==b.length&&(a.rectangle(d,c,e-d,f-c),a.clip(),a.endPath())},setFillAndStrokeStyleToContext:function(a,b,d){switch(b){case 1:b=this.ctx;a.fillStyle=b.fillStyle;a.strokeStyle=b.strokeStyle;break;case 2:b=C.makeCssRgb(d);a.fillStyle=b;a.strokeStyle=b;break;default:c("Unsupported paint type: "+b)}},getPattern:function(a,b){var d=this.createPatternCanvas(b);a=this.ctx;a.setTransform.apply(a,this.baseTransform);a.transform.apply(a,this.matrix);this.scaleToContext();return a.createPattern(d,
"repeat")}};return a}();PDFJS.disableFontFace=!1;var ja={insertRule:function(a){var b=document.getElementById("PDFJS_FONT_STYLE_TAG");b||(b=document.createElement("style"),b.id="PDFJS_FONT_STYLE_TAG",document.documentElement.getElementsByTagName("head")[0].appendChild(b));b=b.sheet;b.insertRule(a,b.cssRules.length)},clear:function(){var a=document.getElementById("PDFJS_FONT_STYLE_TAG");a&&a.parentNode.removeChild(a)},get loadTestFont(){return u(this,"loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))},
loadTestFontId:0,loadingContext:{requests:[],nextRequestId:0},isSyncFontLoadingSupported:function(){if(s)return!1;var a=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(window.navigator.userAgent);return a&&14<=a[1]?!0:!1}(),bind:function(a,b){s&&c("bind() shall be called from main thread");for(var d=[],e=[],f=0,g=a.length;f<g;f++){var h=a[f];if(!h.attached&&!1!==h.loading){h.attached=!0;var l=h.bindDOM();l&&(d.push(l),e.push(h))}}f=ja.queueLoadingCallback(b);0<d.length&&!this.isSyncFontLoadingSupported?ja.prepareFontLoadEvent(d,
e,f):f.complete()},queueLoadingCallback:function(a){var b=ja.loadingContext,d={id:"pdfjs-font-loading-"+b.nextRequestId++,complete:function(){d.end&&c("completeRequest() cannot be called twice");for(d.end=Date.now();0<b.requests.length&&b.requests[0].end;){var a=b.requests.shift();setTimeout(a.callback,0)}},callback:a,started:Date.now()};b.requests.push(d);return d},prepareFontLoadEvent:function(a,b,d){function c(a,b){return a.charCodeAt(b)<<24|a.charCodeAt(b+1)<<16|a.charCodeAt(b+2)<<8|a.charCodeAt(b+
3)&255}function f(a,b,d,c){var e=a.substr(0,b);a=a.substr(b+d);return e+c+a}function g(a,b){k++;30<k?(e("Load test font never loaded."),b()):(m.font="30px "+a,m.fillText(".",0,20),0<m.getImageData(0,0,1,1).data[3]?b():setTimeout(g.bind(null,a,b)))}var h,l;a=document.createElement("canvas");a.width=1;a.height=1;var m=a.getContext("2d"),k=0;a="lt"+Date.now()+this.loadTestFontId++;var p=this.loadTestFont,p=f(p,976,a.length,a),s=c(p,16);h=0;for(l=a.length-3;h<l;h+=4)s=s-1482184792+c(a,h)|0;h<a.length&&
(s=s-1482184792+c(a+"XXX",h)|0);p=f(p,16,4,String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255));h="url(data:font/opentype;base64,"+btoa(p)+");";ja.insertRule('@font-face { font-family:"'+a+'";src:'+h+"}");p=[];h=0;for(l=b.length;h<l;h++)p.push(b[h].loadedName);p.push(a);var y=document.createElement("div");y.setAttribute("style","visibility: hidden;width: 10px; height: 10px;position: absolute; top: 0px; left: 0px;");h=0;for(l=p.length;h<l;++h)b=document.createElement("span"),b.textContent="Hi",
b.style.fontFamily=p[h],y.appendChild(b);document.body.appendChild(y);g(a,function(){document.body.removeChild(y);d.complete()})}},Ba=function(){function a(b,d,c){this.compiledGlyphs={};if(1===arguments.length){var e=arguments[0],f;for(f in e)this[f]=e[f]}}a.prototype={bindDOM:function(){if(!this.data)return null;if(PDFJS.disableFontFace)return this.disableFontFace=!0,null;var a,b=new Uint8Array(this.data);a=b.length;if(8192>a)a=String.fromCharCode.apply(null,b);else{for(var d=[],c=0;c<a;c+=8192){var e=
Math.min(c+8192,a),e=b.subarray(c,e);d.push(String.fromCharCode.apply(null,e))}a=d.join("")}b=this.loadedName;a="url(data:"+this.mimetype+";base64,"+window.btoa(a)+");";b='@font-face { font-family:"'+b+'";src:'+a+"}";ja.insertRule(b);PDFJS.pdfBug&&"FontInspector"in z&&z.FontInspector.enabled&&z.FontInspector.fontAdded(this,a);return b},getPathGenerator:function(a,b){if(!(b in this.compiledGlyphs)){var d=a.get(this.loadedName+"_path_"+b);this.compiledGlyphs[b]=new Function("c","size",d)}return this.compiledGlyphs[b]}};
return a}()}).call("undefined"===typeof window?this:window);PDFJS.workerSrc||"undefined"===typeof document||(PDFJS.workerSrc=function(){var q=(document.body||document.getElementsByTagName("head")[0]).lastChild.src;return q&&q.replace(/\.js$/i,".worker.js")}());
!function(q,e){e["true"]=q;var c=function(c){function d(a){var b={};this.subscribe=function(a,d,c){if("function"!=typeof d)return!1;b.hasOwnProperty(a)||(b[a]={});var e=Math.random().toString(35);return b[a][e]=[d,!!c],e};this.unsubscribe=function(a){for(var d in b)if(b[d][a])return delete b[d][a],!0;return!1};this.publish=function(d){if(b.hasOwnProperty(d)){var e=Array.prototype.slice.call(arguments,1),h=[],g;for(g in b[d]){var k=b[d][g];try{k[0].apply(a,e)}catch(p){c.console&&console.error("jsPDF PubSub Error",
p.message,p)}k[1]&&h.push(g)}h.length&&h.forEach(this.unsubscribe)}}}function e(r,v,l,f){var h={};"object"==typeof r&&(h=r,r=h.orientation,v=h.unit||v,l=h.format||l,f=h.compress||h.compressPdf||f);v=v||"mm";l=l||"a4";r=(""+(r||"P")).toLowerCase();var g,y,u,s,A,H=(""+l).toLowerCase(),I=!!f&&"function"==typeof Uint8Array,J=h.textColor||"0 g",D=h.drawColor||"0 G",B=h.fontSize||16,E=h.lineHeight||1.15,F=h.lineWidth||.200025,C=2,G=!1,L=[],K={},R={},N=0,V=[],P=[],Q=0,O=0,T=0,S={title:"",subject:"",author:"",
keywords:"",creator:""},X={},ba=new d(X),W=function(a){return a.toFixed(2)},Y=function(a){return("0"+parseInt(a)).slice(-2)},U=function(a){G?V[N].push(a):(T+=a.length+1,P.push(a))},$=function(){return C++,L[C]=T,U(C+" 0 obj"),C},ha=function(a){U("stream");U(a);U("endstream")},ia=function(a,b){var d;d=a;var c=b,e,f,h,l,m,k,p;if(c=c||{},e=c.sourceEncoding||"Unicode",h=c.outputEncoding,(c.autoencode||h)&&K[g].metadata&&K[g].metadata[e]&&K[g].metadata[e].encoding&&(f=K[g].metadata[e].encoding,!h&&K[g].encoding&&
(h=K[g].encoding),!h&&f.codePages&&(h=f.codePages[0]),"string"==typeof h&&(h=f[h]),h)){m=!1;l=[];e=0;for(f=d.length;f>e;e++)(k=h[d.charCodeAt(e)])?l.push(String.fromCharCode(k)):l.push(d[e]),l[e].charCodeAt(0)>>8&&(m=!0);d=l.join("")}for(e=d.length;void 0===m&&0!==e;)d.charCodeAt(e-1)>>8&&(m=!0),e--;if(m){l=c.noBOM?[]:[254,255];e=0;for(f=d.length;f>e;e++){if(k=d.charCodeAt(e),p=k>>8,p>>8)throw Error("Character at position "+e+" of string '"+d+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");l.push(p);
l.push(k-(p<<8))}d=String.fromCharCode.apply(void 0,l)}return d.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ma=function(){N++;G=!0;V[N]=[];U(W(F*y)+" w");U(D);0!==Q&&U(Q+" J");0!==O&&U(O+" j");ba.publish("addPage",{pageNumber:N})},sa=function(a,b){var d;a=void 0!==a?a:K[g].fontName;b=void 0!==b?b:K[g].fontStyle;try{d=R[a][b]}catch(c){}if(!d)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return d},ta=function(){G=
!1;C=2;P=[];L=[];U("%PDF-"+k);var a,d,f,g,h,l=s*y,q=A*y;h=c.adler32cs||e.adler32cs;I&&"undefined"==typeof h&&(I=!1);for(a=1;N>=a;a++){if($(),U("<</Type /Page"),U("/Parent 1 0 R"),U("/Resources 2 0 R"),U("/Contents "+(C+1)+" 0 R>>"),U("endobj"),d=V[a].join("\n"),$(),I){f=[];for(g=d.length;g--;)f[g]=d.charCodeAt(g);g=h.from(d);d=new b(6);d.append(new Uint8Array(f));d=d.flush();f=new Uint8Array(d.length+6);f.set(new Uint8Array([120,156]));f.set(d,2);f.set(new Uint8Array([255&g,g>>8&255,g>>16&255,g>>
24&255]),d.length+2);d=String.fromCharCode.apply(null,f);U("<</Length "+d.length+" /Filter [/FlateDecode]>>")}else U("<</Length "+d.length+">>");ha(d);U("endobj")}L[1]=T;U("1 0 obj");U("<</Type /Pages");a="/Kids [";for(g=0;N>g;g++)a+=3+2*g+" 0 R ";U(a+"]");U("/Count "+N);U("/MediaBox [0 0 "+W(l)+" "+W(q)+"]");U(">>");U("endobj");for(var r in K)K.hasOwnProperty(r)&&(l=K[r],l.objectNumber=$(),U("<</BaseFont/"+l.PostScriptName+"/Type/Font"),"string"==typeof l.encoding&&U("/Encoding/"+l.encoding),U("/Subtype/Type1>>"),
U("endobj"));ba.publish("putResources");L[2]=T;U("2 0 obj");U("<<");U("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");U("/Font <<");for(var v in K)K.hasOwnProperty(v)&&U("/"+v+" "+K[v].objectNumber+" 0 R");U(">>");U("/XObject <<");ba.publish("putXobjectDict");U(">>");U(">>");U("endobj");ba.publish("postPutResources");$();U("<<");U("/Producer (jsPDF "+e.version+")");for(var u in S)S.hasOwnProperty(u)&&S[u]&&U("/"+u.substr(0,1).toUpperCase()+u.substr(1)+" ("+ia(S[u])+")");r=new Date;U(["/CreationDate (D:",
r.getFullYear(),Y(r.getMonth()+1),Y(r.getDate()),Y(r.getHours()),Y(r.getMinutes()),Y(r.getSeconds()),")"].join(""));U(">>");U("endobj");$();U("<<");U("/Type /Catalog");U("/Pages 1 0 R");U("/OpenAction [3 0 R /FitH null]");U("/PageLayout /OneColumn");ba.publish("putCatalog");U(">>");U("endobj");v=T;U("xref");U("0 "+(C+1));U("0000000000 65535 f ");for(r=1;C>=r;r++)U(("0000000000"+L[r]).slice(-10)+" 00000 n ");U("trailer");U("<<");U("/Size "+(C+1));U("/Root "+C+" 0 R");U("/Info "+(C-1)+" 0 R");return U(">>"),
U("startxref"),U(v),U("%%EOF"),G=!0,P.join("\n")},ja=function(a){var b="S";return"F"===a?b="f":"FD"===a||"DF"===a?b="B":("f"===a||"f*"===a||"B"===a||"B*"===a)&&(b=a),b},Ba=function(){for(var a=ta(),b=a.length,d=new ArrayBuffer(b),c=new Uint8Array(d);b--;)c[b]=a.charCodeAt(b);return d},ua=function(){return new Blob([Ba()],{type:"application/pdf"})},ya=function(a){return a.foo=function(){try{return a.apply(this,arguments)}catch(b){var d=b.stack||"";~d.indexOf(" at ")&&(d=d.split(" at ")[1]);d="Error in function "+
d.split("\n")[0].split("<")[0]+": "+b.message;if(!c.console)throw Error(d);c.console.error(d,b);c.alert&&alert(d)}},a.foo.bar=a,a.foo}(function(b,d){var e="dataur"===(""+b).substr(0,6)?"data:application/pdf;base64,"+btoa(ta()):0;switch(b){case void 0:return ta();case "save":if(navigator.getUserMedia&&(void 0===c.URL||void 0===c.URL.createObjectURL))return X.output("dataurlnewwindow");a(ua(),d);"function"==typeof a.unload&&c.setTimeout&&setTimeout(a.unload,911);break;case "arraybuffer":return Ba();
case "blob":return ua();case "bloburi":case "bloburl":return c.URL&&c.URL.createObjectURL(ua())||void 0;case "datauristring":case "dataurlstring":return e;case "dataurlnewwindow":var f=c.open(e);if(f||"undefined"==typeof safari)return f;case "datauri":case "dataurl":return c.document.location.href=e;default:throw Error('Output type "'+b+'" is not supported.');}});switch(v){case "pt":y=1;break;case "mm":y=72/25.4;break;case "cm":y=72/2.54;break;case "in":y=72;break;case "px":y=96/72;break;case "pc":y=
12;break;case "em":y=12;break;case "ex":y=6;break;default:throw"Invalid unit: "+v;}if(q.hasOwnProperty(H))A=q[H][1]/y,s=q[H][0]/y;else try{A=l[1],s=l[0]}catch(Ua){throw Error("Invalid format: "+l);}if("p"===r||"portrait"===r)r="p",s>A&&(u=s,s=A,A=u);else{if("l"!==r&&"landscape"!==r)throw"Invalid orientation: "+r;r="l";A>s&&(u=s,s=A,A=u)}X.internal={pdfEscape:ia,getStyle:ja,getFont:function(){return K[sa.apply(X,arguments)]},getFontSize:function(){return B},getLineHeight:function(){return B*E},write:function(a){U(1===
arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return W(a*y)},getVerticalCoordinateString:function(a){return W((A-a)*y)},collections:{},newObject:$,putStream:ha,events:ba,scaleFactor:y,pageSize:{width:s,height:A},output:function(a,b){return ya(a,b)},getNumberOfPages:function(){return V.length-1},pages:V};X.addPage=function(){return ma(),this};X.text=function(a,b,d,c,e){function f(a){return a=a.split("\t").join(Array(h.TabLen||9).join(" ")),ia(a,c)}"number"==
typeof a&&(u=d,d=b,b=a,a=u);"string"==typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g));"number"==typeof c&&(e=c,c=null);var l="",m="Td";e&&(e*=Math.PI/180,l=Math.cos(e),m=Math.sin(e),l=[W(l),W(m),W(-1*m),W(l),""].join(" "),m="Tm");if(c=c||{},"noBOM"in c||(c.noBOM=!0),"autoencode"in c||(c.autoencode=!0),"string"==typeof a)a=f(a);else{if(!(a instanceof Array))throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');a=a.concat();e=[];for(var k=a.length;k--;)e.push(f(a.shift()));
a=e.join(") Tj\nT* (")}return U("BT\n/"+g+" "+B+" Tf\n"+B*E+" TL\n"+J+"\n"+l+W(b*y)+" "+W((A-d)*y)+" "+m+"\n("+a+") Tj\nET"),this};X.line=function(a,b,d,c){return this.lines([[d-a,c-b]],a,b)};X.lines=function(a,b,d,c,e,f){var g,h,l,m,k,p,s,q;"number"==typeof a&&(u=d,d=b,b=a,a=u);c=c||[1,1];U((b*y).toFixed(3)+" "+((A-d)*y).toFixed(3)+" m ");g=c[0];c=c[1];h=a.length;q=d;for(d=0;h>d;d++)l=a[d],2===l.length?(b=l[0]*g+b,q=l[1]*c+q,U((b*y).toFixed(3)+" "+((A-q)*y).toFixed(3)+" l")):(m=l[0]*g+b,k=l[1]*c+
q,p=l[2]*g+b,s=l[3]*c+q,b=l[4]*g+b,q=l[5]*c+q,U((m*y).toFixed(3)+" "+((A-k)*y).toFixed(3)+" "+(p*y).toFixed(3)+" "+((A-s)*y).toFixed(3)+" "+(b*y).toFixed(3)+" "+((A-q)*y).toFixed(3)+" c"));return f&&U(" h"),null!==e&&U(ja(e)),this};X.rect=function(a,b,d,c,e){ja(e);return U([W(a*y),W((A-b)*y),W(d*y),W(-c*y),"re"].join(" ")),null!==e&&U(ja(e)),this};X.triangle=function(a,b,d,c,e,f,g){return this.lines([[d-a,c-b],[e-d,f-c],[a-e,b-f]],a,b,[1,1],g,!0),this};X.roundedRect=function(a,b,d,c,e,f,g){var h=
4/3*(Math.SQRT2-1);return this.lines([[d-2*e,0],[e*h,0,e,f-f*h,e,f],[0,c-2*f],[0,f*h,-(e*h),f,-e,f],[-d+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-c+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g),this};X.ellipse=function(a,b,d,c,e){var f=4/3*(Math.SQRT2-1)*d,g=4/3*(Math.SQRT2-1)*c;return U([W((a+d)*y),W((A-b)*y),"m",W((a+d)*y),W((A-(b-g))*y),W((a+f)*y),W((A-(b-c))*y),W(a*y),W((A-(b-c))*y),"c"].join(" ")),U([W((a-f)*y),W((A-(b-c))*y),W((a-d)*y),W((A-(b-g))*y),W((a-d)*y),W((A-b)*y),"c"].join(" ")),U([W((a-
d)*y),W((A-(b+g))*y),W((a-f)*y),W((A-(b+c))*y),W(a*y),W((A-(b+c))*y),"c"].join(" ")),U([W((a+f)*y),W((A-(b+c))*y),W((a+d)*y),W((A-(b+g))*y),W((a+d)*y),W((A-b)*y),"c"].join(" ")),null!==e&&U(ja(e)),this};X.circle=function(a,b,d,c){return this.ellipse(a,b,d,d,c)};X.setProperties=function(a){for(var b in S)S.hasOwnProperty(b)&&a[b]&&(S[b]=a[b]);return this};X.setFontSize=function(a){return B=a,this};X.setFont=function(a,b){return g=sa(a,b),this};X.setFontStyle=X.setFontType=function(a){return g=sa(void 0,
a),this};X.getFontList=function(){var a,b,d,c={};for(a in R)if(R.hasOwnProperty(a))for(b in c[a]=d=[],R[a])R[a].hasOwnProperty(b)&&d.push(b);return c};X.setLineWidth=function(a){return U((a*y).toFixed(2)+" w"),this};X.setDrawColor=function(a,b,d,c){var e;return e=void 0===b||void 0===c&&a===b===d?"string"==typeof a?a+" G":W(a/255)+" G":void 0===c?"string"==typeof a?[a,b,d,"RG"].join(" "):[W(a/255),W(b/255),W(d/255),"RG"].join(" "):"string"==typeof a?[a,b,d,c,"K"].join(" "):[W(a),W(b),W(d),W(c),"K"].join(" "),
U(e),this};X.setFillColor=function(a,b,d,c){var e;return e=void 0===b||void 0===c&&a===b===d?"string"==typeof a?a+" g":W(a/255)+" g":void 0===c?"string"==typeof a?[a,b,d,"rg"].join(" "):[W(a/255),W(b/255),W(d/255),"rg"].join(" "):"string"==typeof a?[a,b,d,c,"k"].join(" "):[W(a),W(b),W(d),W(c),"k"].join(" "),U(e),this};X.setTextColor=function(a,b,d){"string"==typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)&&(d=parseInt(a.substr(1),16),a=d>>16&255,b=d>>8&255,d&=255);return J=0===a&&0===b&&0===d||"undefined"==
typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(d/255).toFixed(3),"rg"].join(" "),this};X.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};X.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Q=b,U(b+" J"),this};X.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===
b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return O=b,U(b+" j"),this};X.output=ya;X.save=function(a){X.output("save",a)};for(var Ja in e.API)e.API.hasOwnProperty(Ja)&&("events"===Ja&&e.API.events.length?!function(a,b){var d,c,e;for(e=b.length-1;-1!==e;e--)d=b[e][0],c=b[e][1],a.subscribe.apply(a,[d].concat("function"==typeof c?[c]:c))}(ba,e.API.events):X[Ja]=e.API[Ja]);return function(){for(var a=[["Helvetica","helvetica","normal"],
["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],b=0,d=a.length;d>b;b++){var c,e=a[b][0],f=a[b][1];c=a[b][2];var g="F"+(Object.keys(K).length+
1).toString(10),e=K[g]={id:g,PostScriptName:e,fontName:f,fontStyle:c,encoding:"StandardEncoding",metadata:{}},h=g;R.hasOwnProperty(f)||(R[f]={});R[f][c]=h;c=(ba.publish("addFont",e),g);g=a[b][0].split("-");e=g[0];g=g[1]||"";R.hasOwnProperty(e)||(R[e]={});R[e][g]=c}ba.publish("addFonts",{fonts:K,dictionary:R})}(),g="F1",ma(),ba.publish("initialized"),X}var k="1.3",q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,
419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,
113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return e.API={events:[]},e.version="1.0.209-git 2014-07-28T16:27:diegocr","function"==typeof define&&define.amd?define("jsPDF",function(){return e}):c.jsPDF=e,e}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this);!function(a){a.addHTML=function(a,b,c,e,m){if("undefined"==typeof html2canvas&&"undefined"==
typeof rasterizeHTML)throw Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof b&&(e=b,m=c);"function"==typeof e&&(m=e,e=null);var k=this.internal,l=k.scaleFactor,f=k.pageSize.width,h=k.pageSize.height;return(e=e||{},e.onrendered=function(a){b=parseInt(b)||0;c=parseInt(c)||0;var d=e.dim||{},k=d.h||0,s=d.w||Math.min(f,a.width/l)-b,q="JPEG";if(e.format&&(q=e.format),a.height>h&&e.pagesplit)k=function(){for(var d=0;;){var e=
document.createElement("canvas");e.width=Math.min(f*l,a.width);e.height=Math.min(h*l,a.height-d);e.getContext("2d").drawImage(a,0,d,a.width,e.height,0,0,e.width,e.height);var k=[e,b,d?0:c,e.width/l,e.height/l,q,null,"SLOW"];if(this.addImage.apply(this,k),d+=e.height,d>=a.height)break;this.addPage()}m(s,d,null,k)}.bind(this),"CANVAS"===a.nodeName?(d=new Image,d.onload=k,d.src=a.toDataURL("image/png"),a=d):k();else{var d=Math.random().toString(35),v=[a,b,c,s,k,q,d,"SLOW"];this.addImage.apply(this,v);
m(s,k,d,v)}}.bind(this),"undefined"==typeof html2canvas||e.rstz)?"undefined"!=typeof rasterizeHTML?(k="drawDocument","string"==typeof a&&(k=/^http/.test(a)?"drawURL":"drawHTML"),e.width=e.width||f*l,rasterizeHTML[k](a,void 0,e).then(function(a){e.onrendered(a.image)},function(a){m(null,a)})):null:html2canvas(a,e)}}(c.API);(function(a){var b=["jpeg","jpg","png"],c=function(a){var b=this.internal.newObject(),d=this.internal.write,e=this.internal.putStream;if(a.n=b,d("<</Type /XObject"),d("/Subtype /Image"),
d("/Width "+a.w),d("/Height "+a.h),a.cs===this.color_spaces.INDEXED?d("/ColorSpace [/Indexed /DeviceRGB "+(a.pal.length/3-1)+" "+("smask"in a?b+2:b+1)+" 0 R]"):(d("/ColorSpace /"+a.cs),a.cs===this.color_spaces.DEVICE_CMYK&&d("/Decode [1 0 1 0 1 0 1 0]")),d("/BitsPerComponent "+a.bpc),"f"in a&&d("/Filter /"+a.f),"dp"in a&&d("/DecodeParms <<"+a.dp+">>"),"trns"in a&&a.trns.constructor==Array){for(var f="",l=0,m=a.trns.length;m>l;l++)f+=a.trns[l]+" "+a.trns[l]+" ";d("/Mask ["+f+"]")}if("smask"in a&&d("/SMask "+
(b+1)+" 0 R"),d("/Length "+a.data.length+">>"),e(a.data),d("endobj"),"smask"in a)b={w:a.w,h:a.h,cs:"DeviceGray",bpc:a.bpc,dp:"/Predictor 15 /Colors 1 /BitsPerComponent "+a.bpc+" /Columns "+a.w,data:a.smask},"f"in a&&(b.f=a.f),c.call(this,b);a.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),d("<< /Length "+a.pal.length+">>"),e(this.arrayBufferToBinaryString(new Uint8Array(a.pal))),d("endobj"))},e=function(){var a=this.internal.collections.addImage_images,b;for(b in a)c.call(this,a[b])},
k=function(){var a,b=this.internal.collections.addImage_images,d=this.internal.write,c;for(c in b)a=b[c],d("/I"+a.i,a.n,"0","R")},q=function(b){return b&&"string"==typeof b&&(b=b.toUpperCase()),b in a.image_compression?b:a.image_compression.NONE},v=function(a){var b=0;if(a){if(Object.keys)a=Object.keys(a).length;else{var b=0,d;for(d in a)a.hasOwnProperty(d)&&b++;a=b}b=a}return b},l=function(a){return"string"==typeof a&&Array.prototype.reduce&&a.split("").reduce(function(a,b){return a=(a<<5)-a+b.charCodeAt(0),
a&a},0)},f=function(a,b){var d;if(b)for(var c in b)if(a===b[c].alias){d=b[c];break}return d};a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",
RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"};a.isString=function(a){return"string"==typeof a};a.extractInfoFromBase64DataURI=function(a){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)};a.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};a.isArrayBuffer=function(a){return this.supportsArrayBuffer()?a instanceof ArrayBuffer:!1};a.isArrayBufferView=
function(a){return this.supportsArrayBuffer()?"undefined"==typeof Uint32Array?!1:a instanceof Int8Array||a instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array:!1};a.binaryStringToUint8Array=function(a){for(var b=a.length,d=new Uint8Array(b),c=0;b>c;c++)d[c]=a.charCodeAt(c);return d};a.arrayBufferToBinaryString=
function(a){this.isArrayBuffer(a)&&(a=new Uint8Array(a));for(var b="",d=a.byteLength,c=0;d>c;c++)b+=String.fromCharCode(a[c]);return b};a.arrayBufferToBase64=function(a){var b,d,c,e,f,l="";a=new Uint8Array(a);e=a.byteLength;for(var m=e%3,k=e-m,p=0;k>p;p+=3)f=a[p]<<16|a[p+1]<<8|a[p+2],b=(16515072&f)>>18,d=(258048&f)>>12,c=(4032&f)>>6,e=63&f,l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c]+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e];return 1==m?(f=a[k],b=(252&f)>>2,d=(3&f)<<4,l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d]+"=="):2==m&&(f=a[k]<<8|a[k+1],b=(64512&f)>>10,d=(1008&f)>>4,c=(15&f)<<2,l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[b]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[c]+
"="),l};a.createImageInfo=function(a,b,d,c,e,f,l,m,k,p,q,r){a={alias:m,w:b,h:d,cs:c,bpc:e,i:l,data:a};return f&&(a.f=f),k&&(a.dp=k),p&&(a.trns=p),q&&(a.pal=q),r&&(a.smask=r),a};a.addImage=function(c,g,y,x,s,u,H,I){if("number"==typeof g){var J=u;u=s;s=x;x=y;y=g;g=J}var D;D=this.internal.collections.addImage_images;J=(D||(this.internal.collections.addImage_images=D={},this.internal.events.subscribe("putResources",e),this.internal.events.subscribe("putXobjectDict",k)),D);if(!(D=f(c,J))){var B;if("object"==
typeof c&&1===c.nodeType){a:{D=c;c=g;if("IMG"===D.nodeName&&D.hasAttribute("src")){var E=""+D.getAttribute("src");if(0===E.indexOf("data:image/")){D=E;break a}!c&&/\.png(?:[?#].*)?$/i.test(E)&&(c="png")}if("CANVAS"===D.nodeName)E=D;else{E=document.createElement("canvas");E.width=D.clientWidth||D.width;E.height=D.clientHeight||D.height;var F=E.getContext("2d");if(!F)throw"addImage requires canvas to be supported by browser.";F.drawImage(D,0,0,E.width,E.height)}D=E.toDataURL("png"==(""+c).toLowerCase()?
"image/png":"image/jpeg")}c=D}if(("undefined"==typeof H||null===H)&&(H=l(c)),!(D=f(H,J))){this.isString(c)&&((E=this.extractInfoFromBase64DataURI(c))?(g=E[2],c=atob(E[3])):137===c.charCodeAt(0)&&80===c.charCodeAt(1)&&78===c.charCodeAt(2)&&71===c.charCodeAt(3)&&(g="png"));if(g=(g||"JPEG").toLowerCase(),-1===b.indexOf(g))throw Error("addImage currently only supports formats "+b+", not '"+g+"'");if("function"!=typeof a["process"+g.toUpperCase()])throw Error("please ensure that the plugin for '"+g+"' support is added");
if(this.supportsArrayBuffer()&&(B=c,c=this.binaryStringToUint8Array(c)),D=this["process"+g.toUpperCase()](c,v(J),H,q(I),B),!D)throw Error("An unkwown error occurred whilst processing the image");}}g=y;y=D;H=D.i;I=u;u=(s||I||(s=-96,I=-96),0>s&&(s=-72*y.w/s/this.internal.scaleFactor),0>I&&(I=-72*y.h/I/this.internal.scaleFactor),0===s&&(s=I*y.w/y.h),0===I&&(I=s*y.h/y.w),[s,I]);I=this.internal.getCoordinateString;B=this.internal.getVerticalCoordinateString;s=u[0];u=u[1];J[H]=y;this.internal.write("q",
I(s),"0 0",I(u),I(g),B(x+u),"cm /I"+y.i,"Do Q");return this};a.processJPEG=function(a,b,d,c,e){var f;c=this.color_spaces.DEVICE_RGB;var l=this.decode.DCT_DECODE;if(this.isString(a)){a:{e=a;var m,k,p;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||74===!e.charCodeAt(6)||70===!e.charCodeAt(7)||73===!e.charCodeAt(8)||70===!e.charCodeAt(9)||0===!e.charCodeAt(10))throw Error("getJpegSize requires a binary string jpeg file");for(var q=256*e.charCodeAt(4)+
e.charCodeAt(5),r=4,v=e.length;v>r;){if(r+=q,255!==e.charCodeAt(r))throw Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(r+1)||193===e.charCodeAt(r+1)||194===e.charCodeAt(r+1)||195===e.charCodeAt(r+1)||196===e.charCodeAt(r+1)||197===e.charCodeAt(r+1)||198===e.charCodeAt(r+1)||199===e.charCodeAt(r+1)){e=(k=256*e.charCodeAt(r+5)+e.charCodeAt(r+6),m=256*e.charCodeAt(r+7)+e.charCodeAt(r+8),p=e.charCodeAt(r+9),[m,k,p]);break a}r+=2;q=256*e.charCodeAt(r)+e.charCodeAt(r+1)}e=
void 0}a=(f=e,this.createImageInfo(a,f[0],f[1],1==f[3]?this.color_spaces.DEVICE_GRAY:c,8,l,b,d))}else{this.isArrayBuffer(a)&&(a=new Uint8Array(a));if(this.isArrayBufferView(a)){a:{m=a;if(65496!==(m[0]<<8|m[1]))throw Error("Supplied data is not a JPEG");var u;k=m.length;p=(m[4]<<8)+m[5];for(var x=4;k>x;){if(x+=p,q=m.subarray(x,x+5),p=(q[2]<<8)+q[3],(192===q[1]||194===q[1])&&255===q[0]&&7<p){k=x+5;m=(q=m.subarray(k,k+5),r=(q[2]<<8)+q[3],v=(q[0]<<8)+q[1],u=q[4],{width:r,height:v,numcomponents:u});break a}x+=
2}throw Error("getJpegSizeFromBytes could not find the size of the image");}b=(f=m,a=e||this.arrayBufferToBinaryString(a),this.createImageInfo(a,f.width,f.height,1==f.numcomponents?this.color_spaces.DEVICE_GRAY:c,8,l,b,d))}else b=null;a=b}return a};a.processJPG=function(){return this.processJPEG.apply(this,arguments)}})(c.API);(function(a){a.autoPrint=function(){var a;return this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject();this.internal.write("<< /S/Named /Type/Action /N/Print >>",
"endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+a+" 0 R")}),this}})(c.API);(function(a){var b,c,e,k,q={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},v=1,l={left:0,top:0,bottom:0};a.setHeaderFunction=function(a){k=a};a.getTextDimensions=function(a){b=this.internal.getFont().fontName;c=this.table_font_size||this.internal.getFontSize();e=this.internal.getFont().fontStyle;var h,g,l=19.049976/25.4;return g=document.createElement("font"),g.id="jsPDFCell",
g.style.fontStyle=e,g.style.fontName=b,g.style.fontSize=c+"pt",g.innerText=a,document.body.appendChild(g),h={w:(g.offsetWidth+1)*l,h:(g.offsetHeight+1)*l},document.body.removeChild(g),h};a.cellAddPage=function(){var a=this.margins||l;this.addPage();q={x:a.left,y:a.top,w:void 0,h:void 0,ln:void 0};v+=1};a.cellInitialize=function(){q={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0};v=1};a.cell=function(a,b,d,c,e,m,k){var p=q;void 0!==p.ln&&(p.ln===m?(a=p.x+p.w,b=p.y):(p.y+p.h+c+13>=this.internal.pageSize.height-
(this.margins||l).bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(m,!0)),b=q.y+q.h));if(void 0!==e[0])if(this.printingHeaderRow?this.rect(a,b,d,c,"FD"):this.rect(a,b,d,c),"right"===k){if(e instanceof Array)for(k=0;k<e.length;k++){var p=e[k],v=this.getStringUnitWidth(p)*this.internal.getFontSize();this.text(p,a+d-v-3,b+this.internal.getLineHeight()*(k+1))}}else this.text(e,a+3,b+this.internal.getLineHeight());q={x:a,y:b,w:d,h:c,ln:m};return this};a.arrayMax=
function(a,b){var d,c,e,l=a[0];d=0;for(c=a.length;c>d;d+=1)e=a[d],b?-1===b(l,e)&&(l=e):e>l&&(l=e);return l};a.table=function(b,d,c,e,k){if(!c)throw"No data for PDF table";var p,x,u,w,J,D,B,E,F=[];D=[];var C={},G={},L=[];B=[];u=!1;var K=!0;x=12;w=l;if(w.width=this.internal.pageSize.width,k&&(!0===k.autoSize&&(u=!0),!1===k.printHeaders&&(K=!1),k.fontSize&&(x=k.fontSize),k.margins&&(w=k.margins)),this.lnMod=0,q={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},v=1,this.printHeaders=K,this.margins=w,this.setFontSize(x),
this.table_font_size=x,void 0===e||null===e)F=Object.keys(c[0]);else if(e[0]&&"string"!=typeof e[0])for(w=19.049976/25.4,k=0,x=e.length;x>k;k+=1)p=e[k],F.push(p.name),D.push(p.prompt),G[p.name]=p.width*w;else F=e;if(u)for(E=function(a){return a[p]},k=0,x=F.length;x>k;k+=1){p=F[k];C[p]=c.map(E);L.push(this.getTextDimensions(D[k]||p).w);J=C[p];e=0;for(u=J.length;u>e;e+=1)w=J[e],L.push(this.getTextDimensions(w).w);G[p]=a.arrayMax(L)}if(K){C=this.calculateLineHeight(F,G,D.length?D:F);k=0;for(x=F.length;x>
k;k+=1)p=F[k],B.push([b,d,G[p],C,String(D.length?D[k]:p)]);this.setTableHeaderRow(B);this.printHeaderRow(1,!1)}k=0;for(x=c.length;x>k;k+=1)for(D=c[k],C=this.calculateLineHeight(F,G,D),e=0,B=F.length;B>e;e+=1)p=F[e],this.cell(b,d,G[p],C,D[p],k+2,p.align);return this.lastCellPos=q,this.table_x=b,this.table_y=d,this};a.calculateLineHeight=function(a,b,d){for(var c,e=0,l=0;l<a.length;l++)c=a[l],d[c]=this.splitTextToSize(String(d[c]),b[c]-3),c=this.internal.getLineHeight()*d[c].length+3,c>e&&(e=c);return e};
a.setTableHeaderRow=function(a){this.tableHeaderRow=a};a.printHeaderRow=function(a,b){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var d,c,e;if(this.printingHeaderRow=!0,void 0!==k)c=k(this,v),q={x:c[0],y:c[1],w:c[2],h:c[3],ln:-1};this.setFontStyle("bold");var l=[];c=0;for(e=this.tableHeaderRow.length;e>c;c+=1)this.setFillColor(200,200,200),d=this.tableHeaderRow[c],b&&(d[1]=this.margins&&this.margins.top||0,l.push(d)),d=[].concat(d),this.cell.apply(this,d.concat(a));0<l.length&&
this.setTableHeaderRow(l);this.setFontStyle("normal");this.printingHeaderRow=!1}})(c.API);(function(a){var b,c,e,k,q,v,l,f,h,g,y,u,s,A,H,I,J,D,B;b=function(){function a(){}return function(b){return a.prototype=b,new a}}();h=function(a){var b,d,c,e,f;d=0;c=a.length;for(f=e=!1;!e&&d!==c;)(b=a[d]=a[d].trimLeft())&&(e=!0),d++;for(d=c-1;c&&!f&&-1!==d;)(b=a[d]=a[d].trimRight())&&(f=!0),d--;e=/\s+$/g;f=!0;for(d=0;d!==c;)b=a[d].replace(/\s+/g," "),f&&(b=b.trimLeft()),b&&(f=e.test(b)),a[d]=b,d++;return a};
g=function(a,b,d,c){return this.pdf=a,this.x=b,this.y=d,this.settings=c,this.watchFunctions=[],this.init(),this};y=function(a){var b,d;b=void 0;d=a.split(",");for(a=d.shift();!b&&a;)b=e[a.trim().toLowerCase()],a=d.shift();return b};u=function(a){a="auto"===a?"0px":a;-1<a.indexOf("em")&&!isNaN(Number(a.replace("em","")))&&(a=18.719*Number(a.replace("em",""))+"px");-1<a.indexOf("pt")&&!isNaN(Number(a.replace("pt","")))&&(a=1.333*Number(a.replace("pt",""))+"px");var b;return(b=s[a])?b:(b={"xx-small":9,
"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:a}],void 0!==b?s[a]=b/16:(b=parseFloat(a))?s[a]=b/16:(b=a.match(/([\d\.]+)(px)/),s[a]=3===b.length?parseFloat(b[1])/16:1))};f=function(a){var b,d,c;return c=function(a){var b;return b=function(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style}(a),function(a){return a=a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()}),
b[a]}}(a),b={},d=void 0,b["font-family"]=y(c("font-family"))||"times",b["font-style"]=k[c("font-style")]||"normal",b["text-align"]=TextAlignMap[c("text-align")]||"left",d=q[c("font-weight")]||"normal","bold"===d&&(b["font-style"]="normal"===b["font-style"]?d:d+b["font-style"]),b["font-size"]=u(c("font-size"))||1,b["line-height"]=u(c("line-height"))||1,b.display="inline"===c("display")?"inline":"block","block"===b.display&&(b["margin-top"]=u(c("margin-top"))||0,b["margin-bottom"]=u(c("margin-bottom"))||
0,b["padding-top"]=u(c("padding-top"))||0,b["padding-bottom"]=u(c("padding-bottom"))||0,b["margin-left"]=u(c("margin-left"))||0,b["margin-right"]=u(c("margin-right"))||0,b["padding-left"]=u(c("padding-left"))||0,b["padding-right"]=u(c("padding-right"))||0),b["float"]=v[c("cssFloat")]||"none",b.clear=l[c("clear")]||"none",b};A=function(a,b,d){var c,e,f,g;if(f=!1,c=d["#"+a.id])if("function"==typeof c)f=c(a,b);else for(e=0,g=c.length;!f&&e!==g;)f=c[e](a,b),e++;if(c=d[a.nodeName],!f&&c)if("function"==
typeof c)f=c(a,b);else for(e=0,g=c.length;!f&&e!==g;)f=c[e](a,b),e++;return f};B=function(a,b){var d,c,e,f,g,h;d=[];c=[];e=0;h=a.rows[0].cells.length;for(f=a.clientWidth;h>e;)g=a.rows[0].cells[e],c[e]={name:g.textContent.toLowerCase().replace(/\s+/g,""),prompt:g.textContent.replace(/\r?\n/g,""),width:g.clientWidth/f*b.pdf.internal.pageSize.width},e++;for(e=1;e<a.rows.length;){h=a.rows[e];g={};for(f=0;f<h.cells.length;)g[c[f].name]=h.cells[f].textContent.replace(/\r?\n/g,""),f++;d.push(g);e++}return{rows:d,
headers:c}};var E={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},F=1;c=function(a,b,d){var e,g,h,l,m,k,p;g=a.childNodes;e=void 0;a=f(a);(l="block"===a.display)&&(b.setBlockBoundary(),b.setBlockStyle(a));h=0;for(m=g.length;m>h;){if(e=g[h],"object"==typeof e){if(b.executeWatchFunctions(e),1===e.nodeType&&"HEADER"===e.nodeName){var s=e,q=b.pdf.margins_doc.top;b.pdf.internal.events.subscribe("addPage",function(){b.y=q;c(s,b,d);b.pdf.margins_doc.top=b.y+10;b.y+=10},!1)}if(8===e.nodeType&&"#comment"===
e.nodeName)~e.textContent.indexOf("ADD_PAGE")&&(b.pdf.addPage(),b.y=b.pdf.margins_doc.top);else if(1!==e.nodeType||E[e.nodeName])if(3===e.nodeType){if((k=e.nodeValue)&&"LI"===e.parentNode.nodeName)if("OL"===e.parentNode.parentNode.nodeName)k=F++ +". "+k;else{var y=2;20<16*a["font-size"]&&(y=3);p=function(a,b){this.pdf.circle(a,b,y,"FD")}}b.addText(k,a)}else"string"==typeof e&&b.addText(e,a);else if("IMG"===e.nodeName&&H[e.getAttribute("src")]){b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom<
b.y+e.height&&b.y>b.pdf.margins_doc.top&&(b.pdf.addPage(),b.y=b.pdf.margins_doc.top,b.executeWatchFunctions(e));k=f(e);var r=b.x,u=12/b.pdf.internal.scaleFactor,v=(k["margin-left"]+k["padding-left"])*u,w=(k["margin-right"]+k["padding-right"])*u,z=(k["margin-top"]+k["padding-top"])*u,u=(k["margin-bottom"]+k["padding-bottom"])*u,r=r+(void 0!==k["float"]&&"right"===k["float"]?b.settings.width-e.width-w:v);b.pdf.addImage(H[e.getAttribute("src")],r,b.y+z,e.width,e.height);void 0!==k["float"]?("right"===
k["float"]||"left"===k["float"])&&(b.watchFunctions.push(function(a,d,c,e){return b.y>=d?(b.x+=a,b.settings.width+=c,!0):e&&1===e.nodeType&&!E[e.nodeName]&&b.x+e.width>b.pdf.margins_doc.left+b.pdf.margins_doc.width?(b.x+=a,b.y=d,b.settings.width+=c,!0):!1}.bind(this,"left"===k["float"]?-e.width-v-w:0,b.y+e.height+z+u,e.width)),b.watchFunctions.push(function(a,d,c){return b.y<a&&d===b.pdf.internal.getNumberOfPages()?1===c.nodeType&&"both"===f(c).clear?(b.y=a,!0):!1:!0}.bind(this,b.y+e.height,b.pdf.internal.getNumberOfPages())),
b.settings.width-=e.width+v+w,"left"===k["float"]&&(b.x+=e.width+v+w)):b.y+=e.height+u}else"TABLE"===e.nodeName?(k=B(e,b),b.y+=10,b.pdf.table(b.x,b.y,k.rows,k.headers,{autoSize:!1,printHeaders:!0,margins:b.pdf.margins_doc}),b.y=b.pdf.lastCellPos.y+b.pdf.lastCellPos.h+20):"OL"===e.nodeName||"UL"===e.nodeName?(F=1,A(e,b,d)||c(e,b,d),b.y+=10):"LI"===e.nodeName?(k=b.x,b.x+="UL"===e.parentNode.nodeName?22:10,b.y+=3,A(e,b,d)||c(e,b,d),b.x=k):A(e,b,d)||c(e,b,d)}h++}return l?b.setBlockBoundary(p):void 0};
H={};I=function(a,b,d,c){function e(){b.pdf.internal.events.publish("imagesLoaded");c()}function f(a,b,d){if(a){var c=new Image;++g;c.crossOrigin="";c.onerror=c.onload=function(){c.complete&&(0===c.src.indexOf("data:image/")&&(c.width=b||c.width||0,c.height=d||c.height||0),c.width+c.height&&(H[a]=H[a]||c));--g||e()};c.src=a}}a=a.getElementsByTagName("img");d=a.length;for(var g=0;d--;)f(a[d].getAttribute("src"),a[d].width,a[d].height);return g||e()};J=function(a,b,d,e){var f=a.getElementsByTagName("footer");
if(0<f.length){f=f[0];a=b.pdf.internal.write;var g=b.y;b.pdf.internal.write=function(){};c(f,b,d);var h=Math.ceil(b.y-g)+5;b.y=g;b.pdf.internal.write=a;b.pdf.margins_doc.bottom+=h;a=function(a){a=void 0!==a?a.pageNumber:1;var e=b.y;b.y=b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom;b.pdf.margins_doc.bottom-=h;for(var g=f.getElementsByTagName("span"),l=0;l<g.length;++l)-1<(" "+g[l].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")&&(g[l].innerHTML=a),-1<(" "+g[l].className+" ").replace(/[\n\t]/g,
" ").indexOf(" totalPages ")&&(g[l].innerHTML="###jsPDFVarTotalPages###");c(f,b,d);b.pdf.margins_doc.bottom+=h;b.y=e};for(var g=f.getElementsByTagName("span"),l=0;l<g.length;++l)-1<(" "+g[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&b.pdf.internal.events.subscribe("htmlRenderingFinished",b.pdf.putTotalPages.bind(b.pdf,"###jsPDFVarTotalPages###"),!0);b.pdf.internal.events.subscribe("addPage",a,!1);a();E.FOOTER=1}e()};D=function(a,b,d,e,f,h){if(!b)return!1;"string"==typeof b||b.parentNode||
(b=""+b.innerHTML);"string"==typeof b&&(b=function(a){var b,d,c;return c="jsPDFhtmlText"+Date.now().toString()+(1E3*Math.random()).toFixed(0),d=document.createElement("div"),d.style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",d.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />',document.body.appendChild(d),
b=window.frames[c],b.document.body.innerHTML=a,b.document.body}(b.replace(/<\/?script[^>]*?>/gi,"")));var l=new g(a,d,e,f);return h=h||function(){},I.call(this,b,l,f.elementHandlers,function(){J.call(this,b,l,f.elementHandlers,function(){c(b,l,f.elementHandlers);l.pdf.internal.events.publish("htmlRenderingFinished");h(l.dispose())})}),l.dispose()};g.prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")};g.prototype.dispose=function(){return this.pdf.internal.write("Q"),
{x:this.x,y:this.y}};g.prototype.executeWatchFunctions=function(a){var b=!1,d=[];if(0<this.watchFunctions.length){for(var c=0;c<this.watchFunctions.length;++c)!0===this.watchFunctions[c](a)?b=!0:d.push(this.watchFunctions[c]);this.watchFunctions=d}return b};g.prototype.splitFragmentsIntoLines=function(a,c){var e,f,g,h,l,m,k,p,s,q,y,r,u;s=this.pdf.internal.scaleFactor;h={};m=k=u=l=g=p=f=void 0;q=[];y=[q];e=0;for(r=this.settings.width;a.length;)if(l=a.shift(),u=c.shift(),l)if(f=u["font-family"],p=u["font-style"],
g=h[f+p],g||(g=this.pdf.internal.getFont(f,p).metadata.Unicode,h[f+p]=g),k={widths:g.widths,kerning:g.kerning,fontSize:12*u["font-size"],textIndent:e},m=this.pdf.getStringUnitWidth(l,k)*k.fontSize/s,e+m>r){e=this.pdf.splitTextToSize(l,r,k);for(q.push([e.shift(),u]);e.length;)q=[[e.shift(),u]],y.push(q);e=this.pdf.getStringUnitWidth(q[0][0],k)*k.fontSize/s}else q.push([l,u]),e+=m;if(void 0!==u["text-align"]&&("center"===u["text-align"]||"right"===u["text-align"]||"justify"===u["text-align"]))for(f=
0;f<y.length;++f)g=this.pdf.getStringUnitWidth(y[f][0][0],k)*k.fontSize/s,0<f&&(y[f][0][1]=b(y[f][0][1])),g=r-g,"right"===u["text-align"]?y[f][0][1]["margin-left"]=g:"center"===u["text-align"]?y[f][0][1]["margin-left"]=g/2:"justify"===u["text-align"]&&(h=y[f][0][0].split(" ").length-1,y[f][0][1]["word-spacing"]=g/h,f===y.length-1&&(y[f][0][1]["word-spacing"]=0));return y};g.prototype.RenderTextFragment=function(a,b){var d;d=0;this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&
(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),d=Math.max(d,b["line-height"],b["font-size"]),this.pdf.internal.write(0,(-12*d).toFixed(2),"Td"));d=this.pdf.internal.getFont(b["font-family"],b["font-style"]);void 0!==b["word-spacing"]&&0<b["word-spacing"]&&this.pdf.internal.write(b["word-spacing"].toFixed(2),"Tw");this.pdf.internal.write("/"+
d.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj");void 0!==b["word-spacing"]&&this.pdf.internal.write(0,"Tw")};g.prototype.renderParagraph=function(a){var b,d,c,e,f,g,l,m,k;if(d=h(this.paragraph.text),g=this.paragraph.style,b=this.paragraph.blockstyle,m=this.paragraph.blockstyle||{},this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:b},d.join("").trim()){g=this.splitFragmentsIntoLines(d,g);l=f=void 0;d=12/this.pdf.internal.scaleFactor;f=(Math.max((b["margin-top"]||
0)-(m["margin-bottom"]||0),0)+(b["padding-top"]||0))*d;m=((b["margin-bottom"]||0)+(b["padding-bottom"]||0))*d;b=this.pdf.internal.write;e=c=void 0;this.y+=f;b("q","BT",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var p=0;g.length;){f=g.shift();c=l=0;for(e=f.length;c!==e;)f[c][0].trim()&&(l=Math.max(l,f[c][1]["line-height"],f[c][1]["font-size"]),k=7*f[c][1]["font-size"]),c++;c=0;void 0!==f[0][1]["margin-left"]&&0<f[0][1]["margin-left"]&&
(wantedIndent=this.pdf.internal.getCoordinateString(f[0][1]["margin-left"]),c=wantedIndent-p,p=wantedIndent);b(c,(-12*l).toFixed(2),"Td");c=0;for(e=f.length;c!==e;)f[c][0]&&this.RenderTextFragment(f[c][0],f[c][1]),c++;if(this.y+=l*d,this.executeWatchFunctions(f[0][1])&&0<g.length){var s=[],q=[];g.forEach(function(a){for(var b=0,d=a.length;b!==d;)a[b][0]&&(s.push(a[b][0]+" "),q.push(a[b][1])),++b});g=this.splitFragmentsIntoLines(h(s),q);b("ET","Q");b("q","BT",this.pdf.internal.getCoordinateString(this.x),
this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return a&&"function"==typeof a&&a.call(this,this.x-9,this.y-k/2),b("ET","Q"),this.y+=m}};g.prototype.setBlockBoundary=function(a){return this.renderParagraph(a)};g.prototype.setBlockStyle=function(a){return this.paragraph.blockstyle=a};g.prototype.addText=function(a,b){return this.paragraph.text.push(a),this.paragraph.style.push(b)};e={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",
courier:"courier"};q={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"};k={normal:"normal",italic:"italic",oblique:"italic"};TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"};v={none:"none",right:"right",left:"left"};l={none:"none",both:"both"};s={normal:1};a.fromHTML=function(a,b,d,c,e,f){return this.margins_doc=f||{top:0,bottom:0},c||(c={}),c.elementHandlers||
(c.elementHandlers={}),D(this,a,isNaN(b)?4:b,isNaN(d)?4:d,c,e)}})(c.API);(function(a){var b,c,e;a.addJS=function(a){return e=a,this.internal.events.subscribe("postPutResources",function(){b=this.internal.newObject();this.internal.write("<< /Names [(EmbeddedJS) "+(b+1)+" 0 R] >>","endobj");c=this.internal.newObject();this.internal.write("<< /S /JavaScript /JS (",e,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==b&&void 0!==c&&this.internal.write("/Names <</JavaScript "+
b+" 0 R>>")}),this}})(c.API);(function(a){var d=function(d,f,h,g){var y=5,u=k;switch(g){case a.image_compression.FAST:y=3;u=e;break;case a.image_compression.MEDIUM:y=6;u=q;break;case a.image_compression.SLOW:y=9,u=v}for(var s,A,H=d.length/f,I=new Uint8Array(d.length+H),J=[c,e,k,q,v],D=0;H>D;D++){if(A=D*f,g=d.subarray(A,A+f),u)I.set(u(g,h,s),A+D);else{for(var B=0,E=J.length,F=[];E>B;B++)F[B]=J[B](g,h,s);s=F.concat();for(var C=void 0,E=B=void 0,G=0,L=s.length;L>G;){for(var C=s[G].slice(1),K=0,R=C.length,
N=0;R>K;)N+=Math.abs(C[K++]);C=N;(B>C||!B)&&(B=C,E=G);G++}I.set(F[E],A+D)}s=g}d=I;f=Uint8Array;A=Math.LOG2E*Math.log(32768)-8<<4|8;h=A<<8;u=Math.min(3,0);A=(h|=u<<6,h|=0,h+=31-h%31,[A,h&255]);f=new f(A);A=1;u=0;g=d.length;for(H=0;0<g;){h=void 0<g?void 0:g;g-=h;do A+=d[H++],u+=A;while(--h);A%=65521;u%=65521}h=(u<<16|A)>>>0;A=new b(y);y=A.append(d);A=A.flush();d=f.length+y.length+A.length;u=new Uint8Array(d+4);return u.set(f),u.set(y,f.length),u.set(A,f.length+y.length),u[d++]=h>>>24&255,u[d++]=h>>>
16&255,u[d++]=h>>>8&255,u[d++]=255&h,a.arrayBufferToBinaryString(u)},c=function(a){a=Array.apply([],a);return a.unshift(0),a},e=function(a,b){var d,c=[],e=0,m=a.length;for(c[0]=1;m>e;e++)d=a[e-b]||0,c[e+1]=a[e]-d+256&255;return c},k=function(a,b,d){var c=[],e=0,m=a.length;for(c[0]=2;m>e;e++)b=d&&d[e]||0,c[e+1]=a[e]-b+256&255;return c},q=function(a,b,d){var c,e,m=[],k=0,p=a.length;for(m[0]=3;p>k;k++)c=a[k-b]||0,e=d&&d[k]||0,m[k+1]=a[k]+256-(c+e>>>1)&255;return m},v=function(a,b,d){var c,e,m,k=[],p=
0,q=a.length;for(k[0]=4;q>p;p++){c=a[p-b]||0;e=d&&d[p]||0;m=d&&d[p-b]||0;var r=c+e-m,u=Math.abs(r-c),v=Math.abs(r-e),r=Math.abs(r-m);c=v>=u&&r>=u?c:r>=v?e:m;k[p+1]=a[p]-c+256&255}return k};a.processPNG=function(c,e,h,g){var k,p,s,q,r,v,x=this.color_spaces.DEVICE_RGB,w=this.decode.FLATE_DECODE,B=8;if(this.isArrayBuffer(c)&&(c=new Uint8Array(c)),this.isArrayBufferView(c)){if("function"!=typeof PNG||"function"!=typeof u)throw Error("PNG support requires png.js and zlib.js");if(k=new PNG(c),c=k.imgData,
B=k.bits,x=k.colorSpace,q=k.colors,-1!==[4,6].indexOf(k.colorType)){if(8===k.bits)for(var E,F,C=new window["Uint"+k.pixelBitlength+"Array"](k.decodePixels().buffer),G=C.length,L=new Uint8Array(G*k.colors),K=new Uint8Array(G),R=k.pixelBitlength-k.bits,N=0,V=0;G>N;N++){E=C[N];for(F=0;R>F;)L[V++]=E>>>F&255,F+=k.bits;K[N]=E>>>F&255}if(16===k.bits){C=new Uint32Array(k.decodePixels().buffer);G=C.length;L=new Uint8Array(32/k.pixelBitlength*G*k.colors);K=new Uint8Array(32/k.pixelBitlength*G);B=1<k.colors;
for(F=V=N=0;G>N;)E=C[N++],L[V++]=E>>>0&255,B&&(L[V++]=E>>>16&255,E=C[N++],L[V++]=E>>>0&255),K[F++]=E>>>16&255;B=8}if(G=g!==a.image_compression.NONE)if(G="function"==typeof b,!G)throw Error("requires deflate.js for compression");G?(c=d(L,k.width*k.colors,k.colors,g),v=d(K,k.width,1,g)):(c=L,v=K,w=null)}if(3===k.colorType&&(x=this.color_spaces.INDEXED,r=k.palette,k.transparency.indexed)){g=k.transparency.indexed;N=K=0;for(G=g.length;G>N;++N)K+=g[N];if(K/=255,K===G-1&&-1!==g.indexOf(0))s=[g.indexOf(0)];
else if(K!==G){C=k.decodePixels();K=new Uint8Array(C.length);N=0;for(G=C.length;G>N;N++)K[N]=g[C[N]];v=d(K,k.width,1)}}return p=w===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+q+" /BitsPerComponent "+B+" /Columns "+k.width:"/Colors "+q+" /BitsPerComponent "+B+" /Columns "+k.width,(this.isArrayBuffer(c)||this.isArrayBufferView(c))&&(c=this.arrayBufferToBinaryString(c)),(v&&this.isArrayBuffer(v)||this.isArrayBufferView(v))&&(v=this.arrayBufferToBinaryString(v)),this.createImageInfo(c,k.width,
k.height,x,B,w,e,h,p,s,r,v)}throw Error("Unsupported PNG image data, try using JPEG instead.");}})(c.API);(function(a){a.addSVG=function(a,b,c,e,m){function k(a){for(var b=parseFloat(a[1]),d=parseFloat(a[2]),c=[],e=3,f=a.length;f>e;)"c"===a[e]?(c.push([parseFloat(a[e+1]),parseFloat(a[e+2]),parseFloat(a[e+3]),parseFloat(a[e+4]),parseFloat(a[e+5]),parseFloat(a[e+6])]),e+=7):"l"===a[e]?(c.push([parseFloat(a[e+1]),parseFloat(a[e+2])]),e+=3):e+=1;return[b,d,c]}if(void 0===b||void 0===c)throw Error("addSVG needs values for 'x' and 'y'");
var l=function(a){var b=a.createElement("iframe"),d=a.createElement("style");d.type="text/css";d.styleSheet?d.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":d.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));a.getElementsByTagName("head")[0].appendChild(d);return b.name="childframe",b.setAttribute("width",0),b.setAttribute("height",0),b.setAttribute("frameborder","0"),b.setAttribute("scrolling","no"),b.setAttribute("seamless",
"seamless"),b.setAttribute("class","jsPDF_sillysvg_iframe"),a.body.appendChild(b),b}(document),l=function(a,b){var d=(b.contentWindow||b.contentDocument).document;return d.write(a),d.close(),d.getElementsByTagName("svg")[0]}(a,l);a=[1,1];var f=parseFloat(l.getAttribute("width")),h=parseFloat(l.getAttribute("height"));f&&h&&(e&&m?a=[e/f,m/h]:e?a=[e/f,e/f]:m&&(a=[m/h,m/h]));var g,f=l.childNodes;e=0;for(m=f.length;m>e;e++)l=f[e],l.tagName&&"PATH"===l.tagName.toUpperCase()&&(g=k(l.getAttribute("d").split(" ")),
g[0]=g[0]*a[0]+b,g[1]=g[1]*a[1]+c,this.lines.call(this,g[2],g[0],g[1],a));return this}})(c.API);(function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var d,c,e,m=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,k=m.fof?m.fof:1,p=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,q=p.fof?p.fof:1,r=0,u=m[0]||k,x=[];d=0;for(c=a.length;c>d;d++)e=a.charCodeAt(d),x.push((m[e]||u)/k+(p[e]&&p[e][r]||0)/q),r=e;return x},c=function(a){for(var b=a.length,d=0;b;)b--,
d+=a[b];return d},e=a.getStringUnitWidth=function(a,e){return c(b.call(this,a,e))},k=function(a,b,d,c){for(var e=[],m=0,k=a.length,p=0;m!==k&&p+b[m]<d;)p+=b[m],m++;e.push(a.slice(0,m));d=m;for(p=0;m!==k;)p+b[m]>c&&(e.push(a.slice(d,m)),p=0,d=m),p+=b[m],m++;return d!==m&&e.push(a.slice(d,m)),e},q=function(a,l,f){f||(f={});var h,g,m,q,s,r=[],u=[r];q=f.textIndent||0;var I=0,J=0,D=a.split(" "),B=b(" ",f)[0];if(s=-1===f.lineIndent?D[0].length+2:f.lineIndent||0){var E=Array(s).join(" "),F=[];D.map(function(a){a=
a.split(/\s*\n/);1<a.length?F=F.concat(a.map(function(a,b){return(b&&a.length?"\n":"")+a})):F.push(a[0])});D=F;s=e(E,f)}a=0;for(m=D.length;m>a;a++){var C=0;if(h=D[a],s&&"\n"==h[0]&&(h=h.substr(1),C=1),g=b(h,f),J=c(g),q+I+J>l||C){if(J>l){q=k(h,g,l-(q+I),l);r.push(q.shift());for(r=[q.pop()];q.length;)u.push([q.shift()]);J=c(g.slice(h.length-r[0].length))}else r=[h];u.push(r);q=J+s}else r.push(h),q+=I+J;I=B}return u.map(s?function(a,b){return(b?E:"")+a.join(" ")}:function(a){return a.join(" ")})};a.splitTextToSize=
function(a,b,d){d||(d={});var c=d.fontSize||this.internal.getFontSize(),e;e={0:1};var m={};if(d.widths&&d.kerning)e={widths:d.widths,kerning:d.kerning};else{var k=this.internal.getFont(d.fontName,d.fontStyle);e=k.metadata.Unicode?{widths:k.metadata.Unicode.widths||e,kerning:k.metadata.Unicode.kerning||m}:{widths:e,kerning:m}}a=Array.isArray(a)?a:a.split(/\r?\n/);b=1*this.internal.scaleFactor*b/c;e.textIndent=d.textIndent?1*d.textIndent*this.internal.scaleFactor/c:0;e.lineIndent=d.lineIndent;m=[];
d=0;for(c=a.length;c>d;d++)m=m.concat(q(a[d],b,e));return m}})(c.API);(function(a){var b=function(a){for(var b={},d=0;16>d;d++)b["klmnopqrstuvwxyz"[d]]="0123456789abcdef"[d];for(var c,e,g,m,k={},p=1,q=k,u=[],x="",w="",D=a.length-1,d=1;d!=D;)m=a[d],d+=1,"'"==m?c?(g=c.join(""),c=void 0):c=[]:c?c.push(m):"{"==m?(u.push([q,g]),q={},g=void 0):"}"==m?(e=u.pop(),e[0][e[1]]=q,g=void 0,q=e[0]):"-"==m?p=-1:void 0===g?b.hasOwnProperty(m)?(x+=b[m],g=parseInt(x,16)*p,p=1,x=""):x+=m:b.hasOwnProperty(m)?(w+=b[m],
q[g]=parseInt(w,16)*p,p=1,g=void 0,w=""):w+=m;return k},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},e={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},k=
{Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};
a.events.push(["addFonts",function(a){var b,d,c,h,g;for(d in a.fonts)a.fonts.hasOwnProperty(d)&&(b=a.fonts[d],c=k.Unicode[b.PostScriptName],c&&(h=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},h.widths=c.widths,h.kerning=c.kerning),g=e.Unicode[b.PostScriptName],g&&(h=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},h.encoding=g,g.codePages&&g.codePages.length&&(b.encoding=g.codePages[0])))}])})(c.API);(function(a){a.putTotalPages=function(a){a=new RegExp(a,"g");for(var b=1;b<=
this.internal.getNumberOfPages();b++)for(var c=0;c<this.internal.pages[b].length;c++)this.internal.pages[b][c]=this.internal.pages[b][c].replace(a,this.internal.getNumberOfPages());return this}})(c.API);(function(a){if(a.URL=a.URL||a.webkitURL,a.Blob&&a.URL)try{return new Blob,void 0}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},d=function(){this.data=[]},c=function(a,b,d){this.data=
a;this.size=a.length;this.type=b;this.encoding=d},e=d.prototype,f=c.prototype,h=a.FileReaderSync,g=function(a){this.code=this[this.name=a]},m="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),k=m.length,q=a.URL||a.webkitURL||a,u=q.createObjectURL,x=q.revokeObjectURL,I=q,J=a.btoa,D=a.atob,B=a.ArrayBuffer,E=a.Uint8Array,F=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(c.fake=f.fake=!0;k--;)g.prototype[m[k]]=k+1;return q.createObjectURL||
(I=a.URL=function(a){var b,d=document.createElementNS("http://www.w3.org/1999/xhtml","a");return d.href=a,"origin"in d||("data:"===d.protocol.toLowerCase()?d.origin=null:(b=a.match(F),d.origin=b&&b[1])),d}),I.createObjectURL=function(a){var b,d=a.type;return null===d&&(d="application/octet-stream"),a instanceof c?(b="data:"+d,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):J?b+";base64,"+J(a.data):b+","+encodeURIComponent(a.data)):u?u.call(q,a):void 0},
I.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&x&&x.call(q,a)},e.append=function(a){var d=this.data;if(E&&(a instanceof B||a instanceof E)){var e="";a=new E(a);for(var f=0,m=a.length;m>f;f++)e+=String.fromCharCode(a[f]);d.push(e)}else if("Blob"===b(a)||"File"===b(a)){if(!h)throw new g("NOT_READABLE_ERR");e=new h;d.push(e.readAsBinaryString(a))}else a instanceof c?"base64"===a.encoding&&D?d.push(D(a.data)):"URI"===a.encoding?d.push(decodeURIComponent(a.data)):"raw"===a.encoding&&d.push(a.data):
("string"!=typeof a&&(a+=""),d.push(unescape(encodeURIComponent(a))))},e.getBlob=function(a){return arguments.length||(a=null),new c(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,d){var e=arguments.length;return 3>e&&(d=null),new c(this.data.slice(a,1<e?b:this.data.length),d,this.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0;delete this.data},d}(a);a.Blob=function(a,b){var d=b?b.type||"":"",e=new c;if(a)for(var m=
0,f=a.length;f>m;m++)e.append(a[m]);return e.getBlob(d)}})("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var a=a||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e=!a.externalHost&&"download"in c,k=function(c){var e=b.createEvent("MouseEvents");
e.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(e)},q=a.webkitRequestFileSystem,u=a.requestFileSystem||q||a.mozRequestFileSystem,l=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},f=0,h=function(b){var d=function(){"string"==typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()};a.chrome?d():setTimeout(d,10)},g=function(a,b,d){b=[].concat(b);for(var c=b.length;c--;){var e=a["on"+b[c]];if("function"==typeof e)try{e.call(a,d||a)}catch(f){l(f)}}},
y=function(b,d){var l,y,z,D=this,B=b.type,E=!1,F=function(){g(D,["writestart","progress","write","writeend"])},C=function(){((E||!l)&&(l=(a.URL||a.webkitURL||a).createObjectURL(b)),y)?y.location.href=l:void 0==a.open(l,"_blank")&&"undefined"!=typeof safari&&(a.location.href=l);D.readyState=D.DONE;F();h(l)},G=function(a){return function(){return D.readyState!==D.DONE?a.apply(this,arguments):void 0}},L={create:!0,exclusive:!1};return D.readyState=D.INIT,d||(d="download"),e?(l=(a.URL||a.webkitURL||a).createObjectURL(b),
c.href=l,c.download=d,k(c),D.readyState=D.DONE,F(),h(l),void 0):(a.chrome&&B&&"application/octet-stream"!==B&&(z=b.slice||b.webkitSlice,b=z.call(b,0,b.size,"application/octet-stream"),E=!0),q&&"download"!==d&&(d+=".download"),("application/octet-stream"===B||q)&&(y=a),u?(f+=b.size,u(a.TEMPORARY,f,G(function(a){a.root.getDirectory("saved",L,G(function(a){var c=function(){a.getFile(d,L,G(function(a){a.createWriter(G(function(d){d.onwriteend=function(b){y.location.href=a.toURL();D.readyState=D.DONE;
g(D,"writeend",b);h(a)};d.onerror=function(){var a=d.error;a.code!==a.ABORT_ERR&&C()};["writestart","progress","write","abort"].forEach(function(a){d["on"+a]=D["on"+a]});d.write(b);D.abort=function(){d.abort();D.readyState=D.DONE};D.readyState=D.WRITING}),C)}),C)};a.getFile(d,{create:!1},G(function(a){a.remove();c()}),G(function(a){a.code===a.NOT_FOUND_ERR?c():C()}))}),C)}),C),void 0):(C(),void 0))},z=y.prototype;return z.abort=function(){this.readyState=this.DONE;g(this,"abort")},z.readyState=z.INIT=
0,z.WRITING=1,z.DONE=2,z.error=z.onwritestart=z.onprogress=z.onwrite=z.onabort=z.onerror=z.onwriteend=null,function(a,b){return new y(a,b)}}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&null!==module&&(module.exports=a);void function(a,b){"object"==typeof module?module.exports=b():a.adler32cs=b()}(c,function(){var a="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,b=null,c=function(){if(!a)return function(){return!1};try{var c=
require("buffer");"function"==typeof c.Buffer&&(b=c.Buffer)}catch(e){}return function(a){return a instanceof ArrayBuffer||null!==b&&a instanceof b}}(),e=function(){return null!==b?function(a){return(new b(a,"utf8")).toString("binary")}:function(a){return unescape(encodeURIComponent(a))}}(),k=function(a,b){for(var d=65535&a,c=a>>>16,e=0,l=b.length;l>e;e++)d=(d+(255&b.charCodeAt(e)))%65521,c=(c+d)%65521;return(c<<16|d)>>>0},q=function(a,b){for(var d=65535&a,c=a>>>16,e=0,l=b.length;l>e;e++)d=(d+b[e])%
65521,c=(c+d)%65521;return(c<<16|d)>>>0},u={},l=u.Adler32=function(){var b=function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},d=b.prototype={};return d.constructor=b,b.from=function(a){return a.prototype=d,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");
this.checksum=k(1,a.toString())}),b.fromUtf8=function(a){return a.prototype=d,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());this.checksum=k(1,a)}),a&&(b.fromBuffer=function(a){return a.prototype=d,a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!c(a))throw Error("First argument needs to be ArrayBuffer.");
a=new Uint8Array(a);return this.checksum=q(1,a)})),d.update=function(a){if(null==a)throw Error("First argument needs to be a string.");return a=a.toString(),this.checksum=k(this.checksum,a)},d.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());return this.checksum=k(this.checksum,a)},a&&(d.updateBuffer=function(a){if(!c(a))throw Error("First argument needs to be ArrayBuffer.");a=new Uint8Array(a);return this.checksum=q(this.checksum,a)}),d.clone=
function(){return new l(this.checksum)},b}();return u.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return k(1,a.toString())},u.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());return k(1,a)},a&&(u.fromBuffer=function(a){if(!c(a))throw Error("First argument need to be ArrayBuffer.");a=new Uint8Array(a);return q(1,a)}),u});var b=function(){function a(){var b=this;b.build_tree=function(a){var d,c,e,f=b.dyn_tree;c=
b.stat_desc.static_tree;var g=b.stat_desc.elems,h=-1;a.heap_len=0;a.heap_max=y;for(d=0;g>d;d++)0!==f[2*d]?(a.heap[++a.heap_len]=h=d,a.depth[d]=0):f[2*d+1]=0;for(;2>a.heap_len;)e=a.heap[++a.heap_len]=2>h?++h:0,f[2*e]=1,a.depth[e]=0,a.opt_len--,c&&(a.static_len-=c[2*e+1]);b.max_code=h;for(d=Math.floor(a.heap_len/2);1<=d;d--)a.pqdownheap(f,d);e=g;do d=a.heap[1],a.heap[1]=a.heap[a.heap_len--],a.pqdownheap(f,1),c=a.heap[1],a.heap[--a.heap_max]=d,a.heap[--a.heap_max]=c,f[2*e]=f[2*d]+f[2*c],a.depth[e]=Math.max(a.depth[d],
a.depth[c])+1,f[2*d+1]=f[2*c+1]=e,a.heap[1]=e++,a.pqdownheap(f,1);while(2<=a.heap_len);a.heap[--a.heap_max]=a.heap[1];var l,m,g=b.dyn_tree,h=b.stat_desc.static_tree,k=b.stat_desc.extra_bits,p=b.stat_desc.extra_base,q=b.stat_desc.max_length,s=0;for(c=0;u>=c;c++)a.bl_count[c]=0;g[2*a.heap[a.heap_max]+1]=0;for(d=a.heap_max+1;y>d;d++)e=a.heap[d],c=g[2*g[2*e+1]+1]+1,c>q&&(c=q,s++),g[2*e+1]=c,e>b.max_code||(a.bl_count[c]++,l=0,e>=p&&(l=k[e-p]),m=g[2*e],a.opt_len+=m*(c+l),h&&(a.static_len+=m*(h[2*e+1]+l)));
if(0!==s){do{for(c=q-1;0===a.bl_count[c];)c--;a.bl_count[c]--;a.bl_count[c+1]+=2;a.bl_count[q]--;s-=2}while(0<s);for(c=q;0!==c;c--)for(e=a.bl_count[c];0!==e;)l=a.heap[--d],l>b.max_code||(g[2*l+1]!=c&&(a.opt_len+=(c-g[2*l+1])*g[2*l],g[2*l+1]=c),e--)}l=b.max_code;m=a.bl_count;a=[];e=0;for(d=1;u>=d;d++)a[d]=e=e+m[d-1]<<1;for(m=0;l>=m;m++)if(g=f[2*m+1],0!==g){d=f;e=2*m;c=a[g]++;h=0;do h|=1&c,c>>>=1,h<<=1;while(0<--g);d[e]=h>>>1}}}function b(a,d,c,e,f){this.static_tree=a;this.extra_bits=d;this.extra_base=
c;this.elems=e;this.max_length=f}function c(a,b,d,e,f){this.good_length=a;this.max_lazy=b;this.nice_length=d;this.max_chain=e;this.func=f}function e(a,b,d,c){var f=a[2*b];a=a[2*d];return a>f||f==a&&c[b]<=c[d]}function k(){function c(){var a;for(a=0;g>a;a++)Da[2*a]=0;for(a=0;l>a;a++)Ha[2*a]=0;for(a=0;f>a;a++)pa[2*a]=0;Da[2*z]=1;za=$a=ca.opt_len=ca.static_len=0}function q(a,b){var d,c,e=-1,f=a[1],g=0,h=7,l=4;0===f&&(h=138,l=3);a[2*(b+1)+1]=65535;for(d=0;b>=d;d++)c=f,f=a[2*(d+1)+1],++g<h&&c==f||(l>g?
pa[2*c]+=g:0!==c?(c!=e&&pa[2*c]++,pa[2*s]++):10>=g?pa[2*A]++:pa[2*H]++,g=0,e=c,0===f?(h=138,l=3):c==f?(h=6,l=3):(h=7,l=4))}function r(a){ca.pending_buf[ca.pending++]=a}function y(a){r(255&a);r(a>>>8&255)}function u(a,b){na>I-b?(ra|=a<<na&65535,y(ra),ra=a>>>I-na,na+=b-I):(ra|=a<<na&65535,na+=b)}function x(a,b){var d=2*a;u(65535&b[d],65535&b[d+1])}function v(a,b){var d,c,e=-1,f=a[1],g=0,h=7,l=4;0===f&&(h=138,l=3);for(d=0;b>=d;d++)if(c=f,f=a[2*(d+1)+1],!(++g<h&&c==f)){if(l>g){do x(c,pa);while(0!==--g)
}else 0!==c?(c!=e&&(x(c,pa),g--),x(s,pa),u(g-3,2)):10>=g?(x(A,pa),u(g-3,3)):(x(H,pa),u(g-11,7));g=0;e=c;0===f?(h=138,l=3):c==f?(h=6,l=3):(h=7,l=4)}}function w(){16==na?(y(ra),ra=0,na=0):8<=na&&(r(255&ra),ra>>>=8,na-=8)}function O(b,d){var c,e,f;if(ca.pending_buf[Pa+2*za]=b>>>8&255,ca.pending_buf[Pa+2*za+1]=255&b,ca.pending_buf[ab+za]=255&d,za++,0===b?Da[2*d]++:($a++,b--,Da[2*(a._length_code[d]+h+1)]++,Ha[2*a.d_code(b)]++),0===(8191&za)&&2<qa){c=8*za;e=Z-Aa;for(f=0;l>f;f++)c+=Ha[2*f]*(5+a.extra_dbits[f]);
if(c>>>=3,$a<Math.floor(za/2)&&c<Math.floor(e/2))return!0}return za==La-1}function gb(b,d){var c,e,f,g,l=0;if(0!==za){do c=ca.pending_buf[Pa+2*l]<<8&65280|255&ca.pending_buf[Pa+2*l+1],e=255&ca.pending_buf[ab+l],l++,0===c?x(e,b):(f=a._length_code[e],x(f+h+1,b),g=a.extra_lbits[f],0!==g&&(e-=a.base_length[f],u(e,g)),c--,f=a.d_code(c),x(f,d),g=a.extra_dbits[f],0!==g&&(c-=a.base_dist[f],u(c,g)));while(za>l)}x(z,b);Qa=b[2*z+1]}function hb(){8<na?y(ra):0<na&&r(255&ra);na=ra=0}function ib(a,b,d){hb();Qa=
8;d&&(y(b),y(~b));ca.pending_buf.set(aa.subarray(a,a+b),ca.pending);ca.pending+=b}function Ga(e){var g=0<=Aa?Aa:-1,h=Z-Aa,l,k,p=0;if(0<qa){Ra.build_tree(ca);Sa.build_tree(ca);q(Da,Ra.max_code);q(Ha,Sa.max_code);bb.build_tree(ca);for(p=f-1;3<=p&&0===pa[2*a.bl_order[p]+1];p--);p=(ca.opt_len+=3*(p+1)+14,p);l=ca.opt_len+3+7>>>3;k=ca.static_len+3+7>>>3;l>=k&&(l=k)}else l=k=h+5;if(l>=h+4&&-1!=g)u((ya<<1)+(e?1:0),3),ib(g,h,!0);else if(k==l)u((Ua<<1)+(e?1:0),3),gb(b.static_ltree,b.static_dtree);else{u((Ja<<
1)+(e?1:0),3);g=Ra.max_code+1;h=Sa.max_code+1;p+=1;u(g-257,5);u(h-1,5);u(p-4,4);for(l=0;p>l;l++)u(pa[2*a.bl_order[l]+1],3);v(Da,g-1);v(Ha,h-1);gb(Da,Ha)}c();e&&hb();Aa=Z;ka.flush_pending()}function Xa(){var a,b,d,c;do{if(c=kb-da-Z,0===c&&0===Z&&0===da)c=fa;else if(-1==c)c--;else if(Z>=fa+fa-va){aa.set(aa.subarray(fa,fa+fa),0);Ma-=fa;Z-=fa;Aa-=fa;d=a=Na;do b=65535&la[--d],la[d]=b>=fa?b-fa:0;while(0!==--a);d=a=fa;do b=65535&Ca[--d],Ca[d]=b>=fa?b-fa:0;while(0!==--a);c+=fa}if(0===ka.avail_in)break;a=
ka.read_buf(aa,Z+da,c);da+=a;da>=ga&&(ea=255&aa[Z],ea=(ea<<Ea^255&aa[Z+1])&Fa)}while(va>da&&0!==ka.avail_in)}function jb(a){var b,d,c=cb,e=Z,f=xa,g=Z>fa-va?Z-(fa-va):0,h=db,l=Ia,m=Z+Va,k=aa[e+f-1],p=aa[e+f];xa>=eb&&(c>>=2);h>da&&(h=da);do if(b=a,aa[b+f]==p&&aa[b+f-1]==k&&aa[b]==aa[e]&&aa[++b]==aa[e+1]){e+=2;for(b++;aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&aa[++e]==aa[++b]&&m>e;);if(d=Va-(m-e),e=m-Va,d>f){if(Ma=a,
f=d,d>=h)break;k=aa[e+f-1];p=aa[e+f]}}while((a=65535&Ca[a&l])>g&&0!==--c);return da>=f?f:da}function mb(a){for(var b,d,c=0;;){if(va>da){if(Xa(),va>da&&a==F)return $;if(0===da)break}if(da>=ga&&(ea=(ea<<Ea^255&aa[Z+(ga-1)])&Fa,c=65535&la[ea],Ca[Z&Ia]=la[ea],la[ea]=Z),xa=oa,lb=Ma,oa=ga-1,0!==c&&Wa>xa&&fa-va>=(Z-c&65535)&&(Ta!=B&&(oa=jb(c)),5>=oa&&(Ta==D||oa==ga&&4096<Z-Ma)&&(oa=ga-1)),xa>=ga&&xa>=oa){d=Z+da-ga;b=O(Z-1-lb,xa-ga);da-=xa-1;xa-=2;do++Z<=d&&(ea=(ea<<Ea^255&aa[Z+(ga-1)])&Fa,c=65535&la[ea],
Ca[Z&Ia]=la[ea],la[ea]=Z);while(0!==--xa);if(Oa=0,oa=ga-1,Z++,b&&(Ga(!1),0===ka.avail_out))return $}else if(0!==Oa){if(b=O(0,255&aa[Z-1]),b&&Ga(!1),Z++,da--,0===ka.avail_out)return $}else Oa=1,Z++,da--}return 0!==Oa&&(O(0,255&aa[Z-1]),Oa=0),Ga(a==L),0===ka.avail_out?a==L?ia:$:a==L?ma:ha}var ka,wa,Ya,Ka,fa,Za,Ia,aa,kb,Ca,la,ea,Na,fb,Fa,Ea,Aa,oa,lb,Oa,Z,Ma,da,xa,cb,Wa,qa,Ta,eb,db,Da,Ha,pa,ca=this,Ra=new a,Sa=new a,bb=new a;ca.depth=[];var ab,La,za,Pa,$a,Qa,ra,na;ca.bl_count=[];ca.heap=[];Da=[];Ha=[];
pa=[];ca.pqdownheap=function(a,b){for(var d=ca.heap,c=d[b],f=b<<1;f<=ca.heap_len&&(f<ca.heap_len&&e(a,d[f+1],d[f],ca.depth)&&f++,!e(a,c,d[f],ca.depth));)d[b]=d[f],b=f,f<<=1;d[b]=c};ca.deflateInit=function(a,e,f,g,h,l){g||(g=ua);h||(h=S);l||(l=E);a.msg=null;e==J&&(e=6);if(1>h||h>T||g!=ua||9>f||15<f||0>e||9<e||0>l||l>B)a=V;else{a.dstate=ca;Za=f;fa=1<<Za;Ia=fa-1;fb=h+7;Na=1<<fb;Fa=Na-1;Ea=Math.floor((fb+ga-1)/ga);aa=new Uint8Array(2*fa);Ca=[];la=[];La=1<<h+6;ca.pending_buf=new Uint8Array(4*La);Ya=4*
La;Pa=Math.floor(La/2);ab=3*La;qa=e;Ta=l;a.total_in=a.total_out=0;a.msg=null;ca.pending=0;ca.pending_out=0;wa=ja;Ka=F;Ra.dyn_tree=Da;Ra.stat_desc=b.static_l_desc;Sa.dyn_tree=Ha;Sa.stat_desc=b.static_d_desc;bb.dyn_tree=pa;bb.stat_desc=b.static_bl_desc;na=ra=0;Qa=8;c();kb=2*fa;for(a=la[Na-1]=0;Na-1>a;a++)la[a]=0;Wa=Y[qa].max_lazy;eb=Y[qa].good_length;db=Y[qa].nice_length;cb=Y[qa].max_chain;da=Aa=Z=0;oa=xa=ga-1;ea=Oa=0;a=K}return a};ca.deflateEnd=function(){return wa!=ta&&wa!=ja&&wa!=Ba?V:(ca.pending_buf=
null,la=null,Ca=null,aa=null,ca.dstate=null,wa==ja?P:K)};ca.deflateParams=function(a,b,d){var c=K;return b==J&&(b=6),0>b||9<b||0>d||d>B?V:(Y[qa].func!=Y[b].func&&0!==a.total_in&&(c=a.deflate(C)),qa!=b&&(qa=b,Wa=Y[qa].max_lazy,eb=Y[qa].good_length,db=Y[qa].nice_length,cb=Y[qa].max_chain),Ta=d,c)};ca.deflateSetDictionary=function(a,b,d){a=d;var c=0;if(!b||wa!=ta)return V;if(ga>a)return K;a>fa-va&&(a=fa-va,c=d-a);aa.set(b.subarray(c,c+a),0);Aa=Z=a;ea=255&aa[0];ea=(ea<<Ea^255&aa[1])&Fa;for(b=0;a-ga>=
b;b++)ea=(ea<<Ea^255&aa[b+(ga-1)])&Fa,Ca[b&Ia]=la[ea],la[ea]=b;return K};ca.deflate=function(a,c){var e,f,g,h;if(c>L||0>c)return V;if(!a.next_out||!a.next_in&&0!==a.avail_in||wa==Ba&&c!=L)return a.msg=U[N-V],V;if(0===a.avail_out)return a.msg=U[N-Q],Q;ka=a;h=Ka;Ka=c;wa==ta&&(f=ua+(Za-8<<4)<<8,g=(qa-1&255)>>1,3<g&&(g=3),f|=g<<6,0!==Z&&(f|=sa),wa=ja,f+=31-f%31,r(f>>8&255),r(f&255));if(0!==ca.pending){if(ka.flush_pending(),0===ka.avail_out)return Ka=-1,K}else if(0===ka.avail_in&&h>=c&&c!=L)return ka.msg=
U[N-Q],Q;if(wa==Ba&&0!==ka.avail_in)return a.msg=U[N-Q],Q;if(0!==ka.avail_in||0!==da||c!=F&&wa!=Ba){switch(h=-1,Y[qa].func){case X:a:{h=65535;for(h>Ya-5&&(h=Ya-5);;){if(1>=da){if(Xa(),0===da&&c==F){h=$;break a}if(0===da)break}if((Z+=da,da=0,e=Aa+h,(0===Z||Z>=e)&&(da=Z-e,Z=e,Ga(!1),0===ka.avail_out))||Z-Aa>=fa-va&&(Ga(!1),0===ka.avail_out)){h=$;break a}}h=(Ga(c==L),0===ka.avail_out?c==L?ia:$:c==L?ma:ha)}break;case ba:a:{for(h=0;;){if(va>da){if(Xa(),va>da&&c==F){h=$;break a}if(0===da)break}if(da>=ga&&
(ea=(ea<<Ea^255&aa[Z+(ga-1)])&Fa,h=65535&la[ea],Ca[Z&Ia]=la[ea],la[ea]=Z),0!==h&&fa-va>=(Z-h&65535)&&Ta!=B&&(oa=jb(h)),oa>=ga)if(e=O(Z-Ma,oa-ga),da-=oa,Wa>=oa&&da>=ga){oa--;do Z++,ea=(ea<<Ea^255&aa[Z+(ga-1)])&Fa,h=65535&la[ea],Ca[Z&Ia]=la[ea],la[ea]=Z;while(0!==--oa);Z++}else Z+=oa,oa=0,ea=255&aa[Z],ea=(ea<<Ea^255&aa[Z+1])&Fa;else e=O(0,255&aa[Z]),da--,Z++;if(e&&(Ga(!1),0===ka.avail_out)){h=$;break a}}h=(Ga(c==L),0===ka.avail_out?c==L?ia:$:c==L?ma:ha)}break;case W:h=mb(c)}if((h==ia||h==ma)&&(wa=Ba),
h==$||h==ia)return 0===ka.avail_out&&(Ka=-1),K;if(h==ha){if(c==C)u(Ua<<1,3),x(z,b.static_ltree),w(),9>1+Qa+10-na&&(u(Ua<<1,3),x(z,b.static_ltree),w()),Qa=7;else if(u((ya<<1)+0,3),ib(0,0,!0),c==G)for(e=0;Na>e;e++)la[e]=0;if(ka.flush_pending(),0===ka.avail_out)return Ka=-1,K}}return c!=L?K:R}}function q(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}var u=15,l=30,f=19,h=256,g=h+1+29,y=2*g+1,z=256,s=16,A=17,H=18,I=16,J=-1,D=1,B=2,E=0,F=0,C=1,G=3,
L=4,K=0,R=1,N=2,V=-2,P=-3,Q=-5,O=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,
14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,
26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,
29,29,29,29,29,29,29,29,29,29];a._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,
24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28];a.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0];a.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,
8192,12288,16384,24576];a.d_code=function(a){return 256>a?O[a]:O[256+(a>>>7)]};a.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];a.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];a.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];a.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];b.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,
18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,
69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,
9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];b.static_dtree=[0,
5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];b.static_l_desc=new b(b.static_ltree,a.extra_lbits,h+1,g,u);b.static_d_desc=new b(b.static_dtree,a.extra_dbits,0,l,u);b.static_bl_desc=new b(null,a.extra_blbits,0,f,7);var T=9,S=8,X=0,ba=1,W=2,Y=[new c(0,0,0,0,X),new c(4,4,8,4,ba),new c(4,5,16,8,ba),new c(4,6,32,32,ba),new c(4,4,16,16,W),new c(8,16,32,32,W),new c(8,16,128,128,W),new c(8,32,128,256,W),new c(32,
128,258,1024,W),new c(32,258,258,4096,W)],U="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";"),$=0,ha=1,ia=2,ma=3,sa=32,ta=42,ja=113,Ba=666,ua=8,ya=0,Ua=1,Ja=2,ga=3,Va=258,va=Va+ga+1;return q.prototype={deflateInit:function(a,b){return this.dstate=new k,b||(b=u),this.dstate.deflateInit(this,a,b)},deflate:function(a){return this.dstate?this.dstate.deflate(this,a):V},deflateEnd:function(){if(!this.dstate)return V;var a=this.dstate.deflateEnd();return this.dstate=null,
a},deflateParams:function(a,b){return this.dstate?this.dstate.deflateParams(this,a,b):V},deflateSetDictionary:function(a,b){return this.dstate?this.dstate.deflateSetDictionary(this,a,b):V},read_buf:function(a,b,d){var c=this.avail_in;return c>d&&(c=d),0===c?0:(this.avail_in-=c,a.set(this.next_in.subarray(this.next_in_index,this.next_in_index+c),b),this.next_in_index+=c,this.total_in+=c,c)},flush_pending:function(){var a=this.dstate.pending;a>this.avail_out&&(a=this.avail_out);0!==a&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,
this.dstate.pending_out+a),this.next_out_index),this.next_out_index+=a,this.dstate.pending_out+=a,this.total_out+=a,this.avail_out-=a,this.dstate.pending-=a,0===this.dstate.pending&&(this.dstate.pending_out=0))}},function(a){var b=new q,d=F,c=new Uint8Array(512);"undefined"==typeof a&&(a=J);b.deflateInit(a);b.next_out=c;this.append=function(a,e){var f,g,h=[],l=0,m=0,k=0;if(a.length){b.next_in_index=0;b.next_in=a;b.avail_in=a.length;do{if(b.next_out_index=0,b.avail_out=512,f=b.deflate(d),f!=K)throw"deflating: "+
b.msg;b.next_out_index&&(512==b.next_out_index?h.push(new Uint8Array(c)):h.push(new Uint8Array(c.subarray(0,b.next_out_index))));k+=b.next_out_index;e&&0<b.next_in_index&&b.next_in_index!=l&&(e(b.next_in_index),l=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);return g=new Uint8Array(k),h.forEach(function(a){g.set(a,m);m+=a.length}),g}};this.flush=function(){var a,d,e=[],f=0,g=0;do{if(b.next_out_index=0,b.avail_out=512,a=b.deflate(L),a!=R&&a!=K)throw"deflating: "+b.msg;0<512-b.avail_out&&e.push(new Uint8Array(c.subarray(0,
b.next_out_index)));g+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);return b.deflateEnd(),d=new Uint8Array(g),e.forEach(function(a){d.set(a,f);f+=a.length}),d}}}(this);!function(a){var b;b=function(){function b(a){var d,c,e,m,k,p;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(m=null;;){d=this.readUInt32();p=a=void 0;p=[];for(a=0;4>a;++a)p.push(String.fromCharCode(this.data[this.pos++]));switch(a=p.join("")){case "IHDR":this.width=
this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case "PLTE":this.palette=this.read(d);break;case "fcTL":m&&this.animation.frames.push(m);this.pos+=4;m={width:this.readUInt32(),height:this.readUInt32(),
xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();d=this.readUInt16()||100;m.delay=1E3*a/d;m.disposeOp=this.data[this.pos++];m.blendOp=this.data[this.pos++];m.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,d-=4);a=(null!=m?m.data:void 0)||this.imgData;for(p=0;0<=d?d>p:p>d;0<=d?++p:--p)a.push(this.data[this.pos++]);break;case "tRNS":switch(this.transparency={},this.colorType){case 3:if(e=this.palette.length/3,this.transparency.indexed=this.read(d),this.transparency.indexed.length>
e)throw Error("More transparent colors than palette size");if(k=e-this.transparency.indexed.length,0<k)for(d=0;0<=k?k>d:d>k;0<=k?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case "tEXt":p=this.read(d);d=p.indexOf(0);a=String.fromCharCode.apply(String,p.slice(0,d));this.text[a]=String.fromCharCode.apply(String,p.slice(d+1));break;case "IEND":m&&this.animation.frames.push(m);a:{switch(this.colorType){case 0:case 3:case 4:e=
1;break a;case 2:case 6:e=3;break a}e=void 0}this.colors=e;this.hasAlphaChannel=4===(c=this.colorType)||6===c;c=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*c;a:{switch(this.colors){case 1:c="DeviceGray";break a;case 3:c="DeviceRGB";break a}c=void 0}return this.colorSpace=c,this.imgData=new Uint8Array(this.imgData),void 0;default:this.pos+=d}if(this.pos+=4,this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var d,c,e;b.load=function(a,d,c){var e;return"function"==
typeof d&&(c=d),e=new XMLHttpRequest,e.open("GET",a,!0),e.responseType="arraybuffer",e.onload=function(){var a,l;return a=new Uint8Array(e.response||e.mozResponseArrayBuffer),l=new b(a),"function"==typeof(null!=d?d.getContext:void 0)&&l.render(d),"function"==typeof c?c(l):void 0},e.send(null)};b.prototype.read=function(a){var b,d;d=[];for(b=0;0<=a?a>b:b>a;0<=a?++b:--b)d.push(this.data[this.pos++]);return d};b.prototype.readUInt32=function(){var a,b,d,c;return a=this.data[this.pos++]<<24,b=this.data[this.pos++]<<
16,d=this.data[this.pos++]<<8,c=this.data[this.pos++],a|b|d|c};b.prototype.readUInt16=function(){var a,b;return a=this.data[this.pos++]<<8,b=this.data[this.pos++],a|b};b.prototype.decodePixels=function(a){var b,d,c,e,m,k,p,q,r,x,v,w,E,F,C;if(null==a&&(a=this.imgData),0===a.length)return new Uint8Array(0);a=new u(a);a=a.getBytes();q=this.pixelBitlength/8;w=q*this.width;r=new Uint8Array(w*this.height);k=a.length;for(d=x=v=0;k>x;){switch(a[x++]){case 0:for(b=0;w>b;b+=1)r[d++]=a[x++];break;case 1:for(e=
C=0;w>C;e=C+=1)b=a[x++],m=q>e?0:r[d-q],r[d++]=(b+m)%256;break;case 2:for(e=m=0;w>m;e=m+=1)b=a[x++],c=(e-e%q)/q,E=v&&r[(v-1)*w+c*q+e%q],r[d++]=(E+b)%256;break;case 3:for(e=C=0;w>C;e=C+=1)b=a[x++],c=(e-e%q)/q,m=q>e?0:r[d-q],E=v&&r[(v-1)*w+c*q+e%q],r[d++]=(b+Math.floor((m+E)/2))%256;break;case 4:for(e=C=0;w>C;e=C+=1)b=a[x++],c=(e-e%q)/q,m=q>e?0:r[d-q],0===v?E=F=0:(E=r[(v-1)*w+c*q+e%q],F=c&&r[(v-1)*w+(c-1)*q+e%q]),p=m+E-F,e=Math.abs(p-m),c=Math.abs(p-E),p=Math.abs(p-F),m=c>=e&&p>=e?m:p>=c?E:F,r[d++]=
(b+m)%256;break;default:throw Error("Invalid filter algorithm: "+a[x-1]);}v++}return r};b.prototype.decodePalette=function(){var a,b,d,c,e,m,k,p,q;d=this.palette;m=this.transparency.indexed||[];e=new Uint8Array((m.length||0)+d.length);b=k=a=c=0;for(p=d.length;p>k;b=k+=3)e[c++]=d[b],e[c++]=d[b+1],e[c++]=d[b+2],e[c++]=null!=(q=m[a++])?q:255;return e};b.prototype.copyToImageData=function(a,b){var d,c,e,m,k,p,q,r,u;if(c=this.colors,r=null,d=this.hasAlphaChannel,this.palette.length&&(r=null!=(u=this._decodedPalette)?
u:this._decodedPalette=this.decodePalette(),c=4,d=!0),e=a.data||a,q=e.length,k=r||b,m=p=0,1===c)for(;q>m;)c=r?4*b[m/4]:p,p=k[c++],e[m++]=p,e[m++]=p,e[m++]=p,e[m++]=d?k[c++]:255,p=c;else for(;q>m;)c=r?4*b[m/4]:p,e[m++]=k[c++],e[m++]=k[c++],e[m++]=k[c++],e[m++]=d?k[c++]:255,p=c};b.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};try{c=a.document.createElement("canvas"),e=c.getContext("2d")}catch(k){return-1}return d=function(a){var b;
return e.width=a.width,e.height=a.height,e.clearRect(0,0,a.width,a.height),e.putImageData(a,0,0),b=new Image,b.src=c.toDataURL(),b},b.prototype.decodeFrames=function(a){var b,c,e,m,k,q,r;if(this.animation){q=this.animation.frames;r=[];b=m=0;for(k=q.length;k>m;b=++m)b=q[b],c=a.createImageData(b.width,b.height),e=this.decodePixels(new Uint8Array(b.data)),this.copyToImageData(c,e),b.imageData=c,r.push(b.image=d(c));return r}},b.prototype.renderFrame=function(a,b){var d,c,e;return c=this.animation.frames,
d=c[b],e=c[b-1],0===b&&a.clearRect(0,0,this.width,this.height),1===(null!=e?e.disposeOp:void 0)?a.clearRect(e.xOffset,e.yOffset,e.width,e.height):2===(null!=e?e.disposeOp:void 0)&&a.putImageData(e.imageData,e.xOffset,e.yOffset),0===d.blendOp&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height),a.drawImage(d.image,d.xOffset,d.yOffset)},b.prototype.animate=function(a){var b,d,c,e,m,k,p=this;return d=0,k=this.animation,e=k.numFrames,c=k.frames,m=k.numPlays,(b=function(){var k,q;return k=d++%e,q=c[k],p.renderFrame(a,
k),1<e&&m>d/e?p.animation._timeout=setTimeout(b,q.delay):void 0})()},b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)},b.prototype.render=function(a){var b,d;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,b=a.getContext("2d"),this.animation?(this.decodeFrames(b),this.animate(b)):(d=b.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),b.putImageData(d,0,0))},b}();a.PNG=
b}("undefined"!=typeof window&&window||this);var k=function(){function a(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}return a.prototype={ensureBuffer:function(a){var b=this.buffer,c=b?b.byteLength:0;if(c>a)return b;for(var e=512;a>e;)e<<=1;a=new Uint8Array(e);for(e=0;c>e;++e)a[e]=b[e];return this.buffer=a},getByte:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(a){var b=this.pos;if(a){this.ensureBuffer(b+
a);for(a=b+a;!this.eof&&this.bufferLength<a;)this.readBlock();var c=this.bufferLength;a>c&&(a=c)}else{for(;!this.eof;)this.readBlock();a=this.bufferLength}return this.pos=a,this.buffer.subarray(b,a)},lookChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},
makeSubStream:function(a,b,c){for(var e=a+b;this.bufferLength<=e&&!this.eof;)this.readBlock();return new Stream(this.buffer,a,b,c)},skip:function(a){a||(a=1);this.pos+=a},reset:function(){this.pos=0}},a}(),u=function(){function a(b){throw Error(b);}function b(d){var c=0,e=d[c++],g=d[c++];-1!=e&&-1!=g||a("Invalid header in flate stream");8!=(15&e)&&a("Unknown compression method in flate stream");0!=((e<<8)+g)%31&&a("Bad FCHECK in flate stream");32&g&&a("FDICT bit set in flate stream");this.bytes=d;
this.bytesPos=c;this.codeBuf=this.codeSize=0;k.call(this)}if("undefined"!=typeof Uint32Array){var c=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),q=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,
657409,658433,724993,727041,794625,798721,868353,876545]),r=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,
524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,
524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,
524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,
524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,
524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,
524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,
524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],u=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return b.prototype=Object.create(k.prototype),b.prototype.getBits=function(b){for(var d,c=this.codeSize,e=this.codeBuf,k=this.bytes,
p=this.bytesPos;b>c;)"undefined"==typeof(d=k[p++])&&a("Bad encoding in flate stream"),e|=d<<c,c+=8;return d=e&(1<<b)-1,this.codeBuf=e>>b,this.codeSize=c-b,this.bytesPos=p,d},b.prototype.getCode=function(b){var d=b[0],c=b[1];b=this.codeSize;for(var e=this.codeBuf,k=this.bytes,p=this.bytesPos;c>b;){var q;"undefined"==typeof(q=k[p++])&&a("Bad encoding in flate stream");e|=q<<b;b+=8}c=d[e&(1<<c)-1];d=c>>16;c&=65535;return(0==b||d>b||0==d)&&a("Bad encoding in flate stream"),this.codeBuf=e>>d,this.codeSize=
b-d,this.bytesPos=p,c},b.prototype.generateHuffmanTable=function(a){for(var b=a.length,d=0,c=0;b>c;++c)a[c]>d&&(d=a[c]);for(var e=1<<d,m=new Uint32Array(e),k=1,p=0,q=2;d>=k;++k,p<<=1,q<<=1)for(var r=0;b>r;++r)if(a[r]==k){for(var u=0,v=p,c=0;k>c;++c)u=u<<1|1&v,v>>=1;for(c=u;e>c;c+=q)m[c]=k<<16|r;++p}return[m,d]},b.prototype.readBlock=function(){function b(a,d,c,e,f){for(a=a.getBits(c)+e;0<a--;)d[A++]=f}var d=this.getBits(3);if(1&d&&(this.eof=!0),d>>=1,0==d){var h,g=this.bytes,k=this.bytesPos;"undefined"==
typeof(h=g[k++])&&a("Bad block header in flate stream");var z=h;"undefined"==typeof(h=g[k++])&&a("Bad block header in flate stream");z|=h<<8;"undefined"==typeof(h=g[k++])&&a("Bad block header in flate stream");d=h;"undefined"==typeof(h=g[k++])&&a("Bad block header in flate stream");(d|h<<8)!=(65535&~z)&&a("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;h=this.bufferLength;d=this.ensureBuffer(h+z);this.bufferLength=z=h+z;for(var s=h;z>s;++s){if("undefined"==typeof(h=g[k++])){this.eof=
!0;break}d[s]=h}return this.bytesPos=k,void 0}if(1==d)k=r,h=u;else if(2==d){d=this.getBits(5)+257;h=this.getBits(5)+1;for(var g=this.getBits(4)+4,k=Array(c.length),A=0;g>A;)k[c[A++]]=this.getBits(3);k=this.generateHuffmanTable(k);A=g=0;h=d+h;for(z=Array(h);h>A;)s=this.getCode(k),16==s?b(this,z,2,3,g):17==s?b(this,z,3,3,g=0):18==s?b(this,z,7,11,g=0):z[A++]=g=s;k=this.generateHuffmanTable(z.slice(0,d));h=this.generateHuffmanTable(z.slice(d,h))}else a("Unknown block type in flate stream");z=(d=this.buffer)?
d.length:0;for(s=this.bufferLength;;){var H=this.getCode(k);if(256>H)s+1>=z&&(d=this.ensureBuffer(s+1),z=d.length),d[s++]=H;else{if(256==H)return this.bufferLength=s,void 0;var H=H-257,H=e[H],I=H>>16;0<I&&(I=this.getBits(I));g=(65535&H)+I;H=this.getCode(h);H=q[H];I=H>>16;0<I&&(I=this.getBits(I));H=(65535&H)+I;s+g>=z&&(d=this.ensureBuffer(s+g),z=d.length);for(I=0;g>I;++I,++s)d[s]=d[s-H]}}},b}}();!function(a){"undefined"==typeof a.btoa&&(a.btoa=function(a){var b,c,e,m,k=0,l=0,f="",f=[];if(!a)return a;
do b=a.charCodeAt(k++),c=a.charCodeAt(k++),e=a.charCodeAt(k++),m=b<<16|c<<8|e,b=m>>18&63,c=m>>12&63,e=m>>6&63,m&=63,f[l++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(m);while(k<a.length);f=f.join("");a=a.length%3;return(a?f.slice(0,a-3):
f)+"===".slice(a||3)});"undefined"==typeof a.atob&&(a.atob=function(a){var b,c,e,m,k,l=0,f=0,h=[];if(!a)return a;a+="";do b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(l++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(l++)),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(l++)),k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(l++)),e=b<<18|
c<<12|m<<6|k,b=e>>16&255,c=e>>8&255,e&=255,h[f++]=64==m?String.fromCharCode(b):64==k?String.fromCharCode(b,c):String.fromCharCode(b,c,e);while(l<a.length);return h.join("")});Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this||"function"!=typeof a)throw new TypeError;for(var b=Object(this),c=b.length>>>0,e=Array(c),m=1<arguments.length?arguments[1]:void 0,k=0;c>k;k++)k in b&&(e[k]=a.call(m,b[k],k,b));return e});Array.isArray||(Array.isArray=function(a){return"[object Array]"===
Object.prototype.toString.call(a)});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){if(void 0===this||null===this||"function"!=typeof a)throw new TypeError;for(var c=Object(this),e=c.length>>>0,m=0;e>m;m++)m in c&&a.call(b,c[m],m,c)});Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),e=c.length;return function(m){if("object"!=
typeof m&&("function"!=typeof m||null===m))throw new TypeError;var k,l=[];for(k in m)a.call(m,k)&&l.push(k);if(b)for(k=0;e>k;k++)a.call(m,c[k])&&l.push(c[k]);return l}}());String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")});String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||
"undefined"!=typeof window&&window||this)}({},function(){return this}());
var EnableContextMenu=function(q,e){function c(a){setTimeout(a,0)}function a(a){var b=0,d=0;if(a.getClientRects)return a.getClientRects()[0];do b+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;while(a);return{left:b,top:d}}function b(a){return a.get?a.get(0):a}function k(a,b){if("none"!==a.style.display){if(b)throw"no need to fade";a.style.display="none";var d=a.launcher;d&&d.removeAttribute("open");B.visible--}}function u(){var a=K.pop();k(a);return a}function m(){L.style.opacity="0.0";G=setTimeout(function(){for(;K.length;)u(!1);
L.style.display="none";L.style.opacity="1.0";A()},N)}function d(a){"inline-block"!==a.style.display&&(a.style.display="inline-block",B.visible++)}function x(a){a.stopPropagation();a.preventDefault()}function p(a,b){return b.nodeName===a?b:p(a,b.parentNode||{nodeName:a})}function w(a){var b=p("CMENU",a.target);if(R){if(R===b){K.push(b);R=void 0;return}console.error("SHOULD NOT BE A PREVIEW")}a=K.length;b=K.indexOf(b);for(a-=1;a>b;a--)u()}function r(a){if("CMENU"!==a.target.nodeName||0!==a.offsetX)return a.stopPropagation(),
a.preventDefault(),!1}function v(a){P=clearTimeout(P);if(p("CMENU",a.toElement)===R)return!1;R&&(k(R),R=void 0)}function l(b){P=clearTimeout(P);P=setTimeout(function(){var c=b.srcElement,e=c._contextMenu;e.launcher=c;c.setAttribute("open",!0);R&&R!==e&&k(R);R=e;c=a(c);e.style.top=c.top-5+"px";e.style.left=c.left+c.width-1+"px";d(e)},200)}function f(a){var b=a.parentNode,d;eventjs.add(a,"mouseover",w,!1);eventjs.add(a,"mousedown",r);eventjs.add(a,"contextmenu",x);"CMENU"===b.nodeName?(d=q.createElement("menuitem"),
a.classList.add("submenu"),d.className=a.className,d.innerHTML=a.innerHTML,d._contextMenu=a,eventjs.add(d,"mouseover",l),eventjs.add(d,"mouseout",v),b.replaceChild(d,a)):b.removeChild(a);L.appendChild(a)}function h(a,b,c){c-=5;V=new Date;K.push(a);a.style.top=c+"px";a.style.left=b+"px";d(a);L.style.display="block";Q=!1;var e=b+a.offsetWidth,f=c+a.offsetHeight,g=document.body.offsetHeight,h=document.body.offsetWidth;f>g&&(a.style.top=c-(f-g)+"px");e>h&&(a.style.left=b-(e-h)+"px")}function g(b,d,c){var e;
void 0===c&&(c=b.target);e=a(c);void 0===d&&(d=z(c));h(d,e.left,e.top+e.height+8);b&&(b.preventDefault(),b.stopPropagation());Q=!0;return!1}function y(a,b,d){g(a);Q=!1}function z(a){if(a&&a.hasAttribute)return a._contextMenu?a._contextMenu:a.hasAttribute("contextmenu")?(a=q.getElementById(a.getAttribute("contextmenu")),a._contextMenu=a):z(a.parentNode)}function s(a){var b=z(a.srcElement),d=a.clientX,c=a.clientY;h(b,a.clientX,a.clientY);Q=!0;F=d;C=c;a.preventDefault();a.stopPropagation();return!1}
function A(){O.forEach(function(a){try{a()}catch(b){setTimeout(function(){throw b;},0)}});O=[]}function H(){K=[];L=q.createElement("div");var a="osx10_7",b=0;/Mac/.test(navigator.userAgent)?a="osx10_7":/Win/.test(navigator.userAgent)&&(a="win7");q.body.classList&&(q.body.classList.add(a),L.className="_contextmenu_screen_",N=150,V=0,q.body.appendChild(L),eventjs.add(L,"contextmenu",function(a){a.preventDefault()}),eventjs.add(L,"mousedown",function(a){m(a)}),eventjs.add(L,"mouseup",function(a){a.stopPropagation();
if(!b){var d=a.target;if("MENUITEM"===d.nodeName){if(d._contextMenu)return!1;if(Q){var c;document.createEvent&&(c=document.createEvent("MouseEvents"));d&&d.dispatchEvent&&c&&c.initMouseEvent&&(c.initMouseEvent("click",!0,!0,document.defaultView,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),d.dispatchEvent(c))}}300>new Date-V?Q=!1:m(a)}}),eventjs.add(L,"mousewheel",function(a){a.preventDefault();a.stopPropagation();return!1},!0),eventjs.add(L,"contextmenu",function(a){L.style.display=
"none";var d=q.elementFromPoint(a.clientX,a.clientY),e=z(d),f,g,l;if(e){L.style.display="block";clearTimeout(G);a.preventDefault();if(K[0]===e&&(d=a.clientX,f=a.clientY,g=d-F,l=f-C,F=d,C=f,50>g*g+l*l)){L.style.opacity="1.0";L.style.display="block";clearTimeout(G);c(m);return}b++;setTimeout(function(){for(;K.length;){var d=K.pop();k(d)}L.style.display="none";L.style.opacity="1.0";L.style.display="block";c(function(){b--;h(e,a.clientX,a.clientY)})},N);return!1}L.style.opacity="1.0";L.style.display=
"block";clearTimeout(G);c(m)}),eventjs.add(L,"mouseover",function(a){a.target===L&&(P=clearTimeout(P),R&&(k(R),R=void 0))}))}function I(){var a=q.getElementsByTagName("cmenu"),b,d,c=[];b=0;for(d=a.length;b<d;b++)c[b]=a[b];b=0;for(d=c.length;b<d;b++)f(c[b])}function J(){var a=q.querySelectorAll("[contextmenu]"),b,d,c;d=0;for(c=a.length;d<c;d++)b=a[d],b._contextMenu=q.getElementById(b.getAttribute("contextmenu")),"INPUT"===b.nodeName?(eventjs.add(b,"mouseup",y),eventjs.add(b,"contextmenu",g)):eventjs.add(b,
"contextmenu",s)}function D(a){var b=q.createElement("cmenu"),d,c,e,f;b.setAttribute("type","context");d=0;for(c=a.length;d<c;d++)if(e=a[d]){if(e.children)f=D(e.children),f.setAttribute("label",e.label);else if(e.hr)f=q.createElement("hr");else{f=q.createElement("menuitem");f.innerHTML=e.label;f.className=e.className||"";e.onclick&&eventjs.add(f,"mouseup",e.onclick);e.icon&&(f.icon=e.icon);e.checked&&f.setAttribute("checked",e.checked?"checked":"");var g,h={label:!0,icon:!0,hr:!0,onclick:!0,checked:!0};
for(g in e)e.hasOwnProperty(g)&&h[g]&&f.dataset&&(f.dataset[g]=e[g])}b.appendChild(f)}return b}function B(a){a=D(a);var b,d,c,e;q.body.appendChild(a);if(E)return a;b=a.getElementsByTagName("cmenu");d=[a];c=0;for(e=b.length;c<e;c++)d.push(b[c]);c=0;for(e=d.length;c<e;c++)f(d[c]);return a}var E=!1,F,C,G,L,K,R,N,V,P,Q=!1,O=[],T=e.contextmenu;B.visible=0;B.hide=function(a,b){a=a||B.menu;k(a,b)};B.show=function(a,d,c,e){B.menu=a;if(E)throw"Not supported!";"string"===typeof a?a=q.getElementById(a):(a=b(a),
a.id=a.id||(0|1E4*Math.random()).toString(30));"number"===typeof d?(h(a,d,c),Q=e||Q):(g(null,a,b(d)),Q=!1);return this};B.then=function(a){E?a():O.push(a)};B.attach=function(a,d){a=b(a);d=b(d);d.id=d.id||(0|1E4*Math.random()).toString(30);a._contextMenu=d;"INPUT"===a.nodeName||"BUTTON"===a.nodeName?(eventjs.add(a,"mouseup",y),eventjs.add(a,"contextmenu",g)):eventjs.add(a,"contextmenu",s)};B.noConflict=function(){e.contextmenu=T;return B};E||(H(),I(),J());return e.contextmenu=B};
(function(q,e){var c=q.document,a;a=function(){var a=!1,k=[],u,m,d,x,p,w,r,v,l,f,h={labels:{ok:"OK",cancel:"Cancel"},delay:4E3,buttonReverse:!1,buttonFocus:"ok",transition:e,addListeners:function(a){var b="undefined"!==typeof m,e="undefined"!==typeof u,h="undefined"!==typeof f,k="",p=this,q,r,v,x,w;q=function(b){"undefined"!==typeof b.preventDefault&&b.preventDefault();v(b);"undefined"!==typeof f&&(k=f.value);"function"===typeof a&&("undefined"!==typeof f?a(!0,k):a(!0));return!1};r=function(b){"undefined"!==
typeof b.preventDefault&&b.preventDefault();v(b);"function"===typeof a&&a(!1);return!1};v=function(a){p.hide();p.unbind(c.body,"keyup",x);p.unbind(d,"focus",w);h&&p.unbind(l,"submit",q);b&&p.unbind(m,"click",q);e&&p.unbind(u,"click",r)};x=function(a){var b=a.keyCode;32!==b||h||q(a);27===b&&e&&r(a)};w=function(a){h?f.focus():!e||p.buttonReverse?m.focus():u.focus()};this.bind(d,"focus",w);b&&this.bind(m,"click",q);e&&this.bind(u,"click",r);this.bind(c.body,"keyup",x);h&&this.bind(l,"submit",q);this.transition.supported||
this.setFocus()},bind:function(a,b,d){"function"===typeof a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,d)},handleErrors:function(){if("undefined"!==typeof q.onerror){var a=this;q.onerror=function(b,d,c){a.error("["+b+" on line "+c+" of "+d+"]",0)};return!0}return!1},appendButtons:function(a,b){return this.buttonReverse?b+a:a+b},build:function(a){var b=a.type,d=a.message,e=a.cssClass||"";a=c.createElement("div");a.className="alertify-dialog";if("none"===h.buttonFocus){var f=
c.createElement("button");f.id="alertify-noneFocus";f.className="alertify-hidden";a.appendChild(f)}if("prompt"===b){var m=c.createElement("form");m.id="alertify-form";a.appendChild(m)}f=c.createElement("article");f.className="alertify-inner";if("string"===typeof d){var d='<p class="alertify-message">{{message}}</p>'.replace("{{message}}",d),l=c.createElement("span");l.innerHTML=d}else l=c.createElement("p"),l.className="alertify-message",l.appendChild(d);f.appendChild(l);"prompt"===b&&(d=c.createElement("div"),
d.className="alertify-text-wrapper",l=c.createElement("input"),l.type="text",l.className="alertify-text",l.id="alertify-text",d.appendChild(l),f.appendChild(d));d=c.createElement("nav");d.className="alertify-buttons";f.appendChild(d);"prompt"===b?(m.appendChild(f),a.appendChild(m)):a.appendChild(f);f=c.createElement("button");f.id="alertify-resetFocus";f.className="alertify-resetFocus";f.innerHTML="Reset Focus";a.appendChild(f);switch(b){case "confirm":f=c.createElement("button");f.className="alertify-button alertify-button-ok";
f.id="alertify-ok";f.innerHTML=this.labels.ok;d.appendChild(f);f=c.createElement("button");f.className="alertify-button alertify-button-cancel";f.id="alertify-cancel";f.innerHTML=this.labels.cancel;d.appendChild(f);break;case "prompt":f=c.createElement("button");f.className="alertify-button alertify-button-ok";f.id="alertify-ok";f.innerHTML=this.labels.ok;d.appendChild(f);f=c.createElement("button");f.type="submit";f.className="alertify-button alertify-button-ok";f.id="alertify-cancel";f.innerHTML=
this.labels.ok;d.appendChild(f);break;case "alert":f=c.createElement("button"),f.className="alertify-button alertify-button-ok",f.id="alertify-ok",f.innerHTML=this.labels.ok,d.appendChild(f)}r.className=r.className.replace("alertify-isHidden","");setTimeout(function(){r.className="alertify alertify-"+b+" "+e},1);w.className="alertify-cover";return a},close:function(a,b){a=a||this.lastItem;var d=b&&!isNaN(b)?+b:this.delay,c=this,e,f;this.bind(a,"click",function(){e(a)});f=function(a){a.stopPropagation();
c.unbind(this,c.transition.type,f);v.removeChild(this);v.hasChildNodes()||(v.className+=" alertify-logs-hidden")};e=function(a){"undefined"!==typeof a&&a.parentNode===v&&(c.transition.supported?(c.bind(a,c.transition.type,f),a.className+=" alertify-log-hide"):(v.removeChild(a),v.hasChildNodes()||(v.className+=" alertify-logs-hidden")))};0!==b&&setTimeout(function(){e(a)},d)},dialog:function(d,e,f,h,m){p=c.activeElement;var l=function(){v&&null!==v.scrollTop&&w&&null!==w.scrollTop||l()};if("string"!==
typeof e)throw Error("type must be a string");if("undefined"!==typeof f&&"function"!==typeof f)throw Error("fn must be a function");"function"===typeof this.init&&(this.init(),l());k.push({type:e,message:d,callback:f,placeholder:h,cssClass:m});a||this.setup();return this},extend:function(a){if("string"!==typeof a)throw Error("extend method must have exactly one paramter");return function(b,d){this.log(b,a,d);return this}},hide:function(){var d,c=this;k.splice(0,1);0<k.length?this.setup(!0):(a=!1,
d=function(a){a.stopPropagation();r.className+=" alertify-isHidden";c.unbind(r,c.transition.type,d)},this.transition.supported?(this.bind(r,this.transition.type,d),r.className="alertify alertify-hide alertify-hidden"):r.className="alertify alertify-hide alertify-hidden alertify-isHidden",w.className="alertify-cover alertify-cover-hidden",p.focus())},init:function(){c.createElement("nav");c.createElement("article");c.createElement("section");w=c.createElement("div");w.setAttribute("id","alertify-cover");
w.className="alertify-cover alertify-cover-hidden";c.body.appendChild(w);r=c.createElement("section");r.setAttribute("id","alertify");r.className="alertify alertify-hidden alertify-isHidden";c.body.appendChild(r);v=c.createElement("section");v.setAttribute("id","alertify-logs");v.className="alertify-logs alertify-logs-hidden";c.body.appendChild(v);c.body.setAttribute("tabindex","0");var a,b,d=!1,f=c.createElement("fakeelement"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",
OTransition:"otransitionend",transition:"transitionend"};for(a in h)if(f.style[a]!==e){b=h[a];d=!0;break}this.transition={type:b,supported:d};delete this.init},log:function(a,b,d){var c=function(){v&&null!==v.scrollTop||c()};"function"===typeof this.init&&(this.init(),c());v.className="alertify-logs";this.notify(a,b,d);return{lastItem:this.lastItem,close:this.close,hide:this.hide}},notify:function(a,b,d){var e=c.createElement("article");e.className="alertify-log"+("string"===typeof b&&""!==b?" alertify-log-"+
b:"");e.innerHTML=a;v.appendChild(e);setTimeout(function(){e.className+=" alertify-log-show"},50);this.close(e,d);this.lastItem=e},set:function(a){var b;if("object"!==typeof a&&a instanceof Array)throw Error("args must be an object");for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},setFocus:function(){f?(f.focus(),f.select()):x.focus()},setup:function(g){var p=k[0],q=this,s;a=!0;s=function(a){a.stopPropagation();q.setFocus();q.unbind(r,q.transition.type,s)};this.transition.supported&&!g&&this.bind(r,
this.transition.type,s);w.onclick=function(){h.hide()};r.innerHTML="";r.appendChild(this.build(p));r.firstChild.onclick=function(a){a.stopPropagation()};d=c.querySelector("#alertify-resetFocus");m=c.querySelector("#alertify-ok")||e;u=c.querySelector("#alertify-cancel")||e;x="cancel"===h.buttonFocus?u:"none"===h.buttonFocus?c.querySelector("#alertify-noneFocus"):m;f=c.querySelector("#alertify-text")||e;l=c.querySelector("#alertify-form")||e;"string"===typeof p.placeholder&&""!==p.placeholder&&(f.value=
p.placeholder);g&&this.setFocus();this.addListeners(p.callback)},unbind:function(a,b,d){"function"===typeof a.removeEventListener?a.removeEventListener(b,d,!1):a.detachEvent&&a.detachEvent("on"+b,d)}};return{close:function(a,b){h.close(a,1)},log_visible:function(){return!(!c.querySelector(".alertify-logs")||c.querySelector(".alertify-logs.alertify-logs-hidden"))},hide:function(a,b){h.hide()},alert:function(a,b,d){h.dialog(a,"alert",b,"",d);return this},confirm:function(a,b,d){h.dialog(a,"confirm",
b,"",d);return this},extend:h.extend,init:h.init,log:function(a,b){h.log(a,"",b);return this},prompt:function(a,b,d,c){h.dialog(a,"prompt",b,d,c);return this},success:function(a,b){h.log(a,"success",b);return this},error:function(a,b){h.log(a,"error",b);return this},set:function(a){h.set(a)},labels:h.labels,debug:h.handleErrors}};"function"===typeof define&&define.amd?define([],function(){return new a}):"undefined"===typeof q.alertify&&(q.alertify=new a)})(this);
"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.UISidebar=function(e,c){var a=this,b=e.dom,k=e.feature,q=e.util;e.module.Listener(a);var m="sk-sidebar-"+c,d="sk-sidebar-arrow-"+c,x=b.$("."+m),p=document.documentElement;if(x&&x.parentNode){for(var w,r=x.offsetWidth,v=["webkit","Moz","O","ms"],l=0;l<v.length;l++)"undefined"!==typeof x.style[v[l]+"Transform"]&&(w=!0,v=v[l]);var f;k.sidebar.arrow&&(f=b.append(p,'<div class="sk-sidebar-arrow '+d+'"></div>'));var h={right:"left",left:"right"};a.setAnimate=
function(a,b){var d="transition: "+(a?"all":"none")+" "+(b||.35)+"s;";x.style.cssText=d;f&&(f.style.cssText=d)};a.setPosition=function(a){var b="right"===c?-1:1;w?(x.style[v+"Transform"]="translate3d("+a*b+"px, 0, 0)",x.style[c]=0,f&&(f.style[v+"Transform"]="translate3d("+(a+r)*b+"px, 0, 0)",f.style[c]=0)):(x.style[c]=a+"px",f&&(f.style[c]=r+a+"px"))};a.opened=!1;a.open=function(){q.setItem("show-sidebar-"+c,"true");a.disabled||!1!==a.opened||(a.opened=!0,clearTimeout(a.timeoutClose),a.timeoutOpen=
setTimeout(function(){a.setPosition(0);p.classList.add("sk-sidebar-active-"+c);f&&(f.classList.remove("icon-"+h[c]),f.classList.add("icon-"+c));e.ui.configureBuild();a.on.open&&a.on.open()},1))};a.close=function(){q.setItem("show-sidebar-"+c,"false");a.disabled||!0!==a.opened||(a.opened=!1,a.setPosition(-r),p.classList.remove("sk-sidebar-active-"+c),f&&(f.classList.add("icon-"+h[c]),f.classList.remove("icon-"+c)),clearTimeout(a.timeoutOpen),a.on.close&&a.on.close())};a.toggle=function(){a.setAnimate(!0,
.35);!0===a.opened?a.close():a.open()};a.disabled=!0;a.disable=function(){a.disabled||(a.disabled=!0,g("remove"))};a.enable=function(){a.disabled&&(a.disabled=!1,g("add"))};var g=function(a){eventjs[a](x,"drag",z);if(f)eventjs[a](f,"click",y)},y=function(b,d){eventjs.stop(b);a.toggle()},z=function(b,e){eventjs.stop(b);"down"===e.state&&(e.moved=!1,e.timestamp=q.timestamp(),e.isArrow=e.target.classList.contains(d));if("right"===c)var f=e.start.x-e.x,g=e.start.y-e.y;else f=e.x-e.start.x,g=e.y-e.start.y;
var h=Math.abs(f),g=Math.abs(g);"move"===e.state&&h>g&&eventjs.prevent(b);if(!a.disabled){a.opened?(f=Math.min(0,f),-20<=f&&!e.moved?f=0:e.moved=!0):(f=Math.min(0,Math.max(0,f)-r),f<=-r+20&&!e.moved?f=-r:e.moved=!0);if("up"===e.state)if(eventjs.prevent(b),h=q.timestamp()-e.timestamp,h=Math.min(350,h)/1E3,g=!e.moved&&e.isArrow,a.opened){if(-50>=f||g)return a.setAnimate(!0,h),a.close();f=0}else{if(f>=-r+50||g)return a.setAnimate(!0,h),a.open();f=-r}a.setAnimate(!1);a.setPosition(f)}};e.ui.scrollable(x,
!0);p.classList.add("sk-sidebar-ready");f&&f.classList.add("icon-"+h[c]);a.enable();a.setPosition(-r);a.setPane=function(a,d){q.setItem("pane-"+c,a);e.sidebar[c]&&(e.sidebar[c].pane=a);var f=".icon-"+a.split("-").shift();(f=b.$("."+m+" "+f))&&b.setClass({target:f,className:"selected",on:!0,list:b.$$("."+m+" .tabs span")});if(e.ui.PANE[c])e.ui.PANE[c](1,d)};return this}k.debug&&console.warn(m+" does not exist")}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.UITooltip=function(e){var c=this,a=e.dom,b=e.feature,k=e.lang;c.add=function(b,d,c){e.client.mobile||("string"===typeof b&&(b=a.$(b)),q(b,d,c,"add"))};c.update=function(a,d,f){e.client.mobile||b.ui.tooltips&&(""===a?c.hide():c.show(a,d,f))};var q=function(a,b,d,e){eventjs[e](a,"mouseover",function(a){eventjs.stop(a);"function"===typeof b?c.update(b(),null,d):c.update(b,null,d)});eventjs[e](a,"mouseout",function(a){eventjs.stop(a);c.update("")})},m,d,x,p,
w=!1,r=!1,v={};c.create=function(){m=document.createElement("div");m.setAttribute("id","sk-tooltip");m.style.opacity=0;m.style.filter="alpha(opacity=0)";v.move=eventjs.add(window,"mousemove",f);v.down=eventjs.add(m,"mousedown",eventjs.cancel);document.body.appendChild(m);return m};c.destroy=function(){m&&(eventjs.removeEvents(v),a.remove(m),m=null)};c.show=function(a,b,e){a=k.translate(a);m=m||c.create();m.innerHTML=a;m.style.width="auto";m.style.display="block";clearTimeout(p);r||(r=w=!0);m.style.opacity=
1;x=m.offsetWidth;d=m.offsetHeight;b&&l(b)};c.hide=function(){r&&(m=m||c.create(),m.style.opacity=0,clearTimeout(p),p=setTimeout(function(){r=w=!1;m.style.display="none"},250))};var l=function(a){var b=Math.max(0,a.x+15);a=Math.max(0,a.y+0);var c=Math.max(0,x-(window.innerWidth-b)),e=Math.max(0,d-(window.innerHeight-a));c?(c=x+30,m.classList.remove("right")):m.classList.add("right");eventjs.isTouch&&(a-=15,b+=22);m.style.left=b-c+"px";m.style.top=a-e+"px"},f=function(a){w&&l(eventjs.getCoord(a))};
return c}})(sketch);
(function(q){q.module=q.module||{};q.module.TreeMenu=function(e,c,a,b){var k=this,q=e.dom,m=e.lang,d=c.render,x=c.toolkit,p=e.util,w="#sk-layers .sk-pane-content"===a,r=b,v=null;k.setData=function(a){r=a};k.render=function(){v=q.$(a);q.empty(v);k.shifted=null;k.selected=null;var b=v,d=void 0,c={},e=w?0:-1,g=r.length;if(e||g)for(f(v,0,"before");e<g;e++){var m=r[e]||{name:"new-doc"},l=String(m.groupId);"undefined"===l?(d=void 0,b=h(v,m,e)):c[l]?(d=l,h(c[d],m,e)):l!==d&&(d=l,-1===d.indexOf(".")&&(b=
v),b=c[d]=h(b,m,e,!0))}else q.append(v,'<span style="padding: 15px; display: inline-block;">No layers added</span>');return k};k.select=function(a){a.forEach(function(a){a&&l(q.$(".file"+a.zIndex),!0)})};k.deselect=function(a){a.forEach(function(a){a&&l(q.$(".file"+a.zIndex),!1)})};var l=function(a,b,d){a&&(d=d&&q.$$("li",v),q.setClass(a,"selected",b,d),k.selected=a)},f=function(a,b,d){var c=q.create('<span class="divider '+d+'"></span>');c.setAttribute("data-layer",b);c.setAttribute("data-command",
d);a.insertBefore(c,a.firstChild)},h=function(a,b,d,e){var h=q.create('<li data-layer="'+d+'"></li>');if(e){e=q.create("ul");var m=String(b.groupId).split(".").pop();g(b,h,m,d+1);h.appendChild(e);a.insertBefore(h,a.firstChild);f(e,d-1,"before");f(a,d+1,"after");return e}e=b.name||b.type||"";m=q.create("span");m.className="content";h.appendChild(m);h.className="file file"+d;if(w){c.selection.items[d]&&l(h);var k=new Image;k.width=18;k.height=29;J(k,b);m.appendChild(k)}else k=c.history.vector.current,
k===d?(h.classList.add("enabled"),l(h)):k<d&&l(h),k=q.create("b"),k.className="icon-"+(b.icon||"file"),m.appendChild(k),-1!==d&&(k=q.create("i"),k.style.cssText="float: right; padding-right: 10px;",k.textContent="#"+(d+1),m.appendChild(k));y(b,h,m,e);a.insertBefore(h,a.firstChild);eventjs.add(h,"mousedown",s(b,h));f(a,d+1,"after");return a},g=function(a,b,d,c){var e=q.create("input");e.className="checkbox";e.type="checkbox";e.checked=!0;b.appendChild(e);c=q.create("label");var f=q.create('<span class="carret"></span>');
c.appendChild(f);b.appendChild(c);y(a,b,c,d,!0);eventjs.add(f,"mousedown",function(a,b){e.checked=!e.checked});eventjs.add({target:c,mousedown:eventjs.prevent,dblclick:function(a,b){e.checked=!e.checked}})},y=function(a,b,d,e,f){f=q.create("font");f.innerHTML=m.translate(e);d.appendChild(f);if(w){eventjs.add(d,"contextmenu",z);eventjs.add(d,"drag",I(b),{position:"difference"});e=q.create('<span class="icon-gear"></span>');eventjs.add(e,"mousedown",s(a,b));eventjs.add(e,"mousedown",z);var g=function(a){return!1===
a?"icon-eye-close":"icon-eye-open"},h=q.create("span");h.className=g(a.visible);eventjs.add(h,"mousedown",function(b){eventjs.cancel(b);b=!(a.visible=!1!==a.visible);h.className=g(b);x.setParam({selection:c.selection.fromLayers([a]),tool:a.type,param:"visible",value:b})});b=q.create("div");b.className="right";b.appendChild(e);b.appendChild(h);d.appendChild(b)}},z=function(a,b){var d=eventjs.getCoord(a),c=eventjs.getBoundingBox(a.target);contextmenu.show(e.ui.menuTree,d.x-c.scrollBodyLeft+10,d.y-c.scrollBodyTop+
10,!0);eventjs.cancel(a)},s=function(a,b){return w?H(a,b):A(a,b)},A=function(a,b){return function(a){eventjs.cancel(a);a=c.history.vector.current;var d=D(b);(a-=d)&&(0>a?c.history.redo(Math.abs(a)):c.history.undo(a));k.selected=b}},H=function(a,b){return function(e){eventjs.cancel(e);if(eventjs.shiftKey){var f=k.selected;e=D(b);var g=D(f||b),f=Math.min(e,g);for(e=Math.max(e,g);f<=e;f++)(g=c.scene.children[f])&&(eventjs.metaKey?g.selected?c.scene.deselect(f):c.scene.select(f,!1):c.scene.select(f,!1))}else eventjs.metaKey?
a.selected?c.scene.deselect(a.zIndex):c.scene.select(a.zIndex,!1):!1===b.classList.contains("selected")&&c.scene.select(a.zIndex,!0);k.selected=b;d.clean()}},I=function(a){var b=null,e=null,f=D(a),g=function(){if(e){var a=D(e),g=e.getAttribute("data-command");console.log("send",f,a,g);c.scene.sendTo({idx:a,record:!0});d.clean();k.render();q.setClass({target:e,className:"hover",on:!1,list:q.$$("span.divider",v)})}v.classList.remove("dragging");b&&(b=null)};return function(d,h){if(!eventjs.metaKey&&
!eventjs.shiftKey){var m="up"===h.state;"down"===h.state&&(v.classList.add("dragging"),h.selected=a.classList.contains("selected"),h.offsetTop=a.offsetTop);if(5>=h.distanceMoved()){if(m)return h.selected&&c.scene.select(f,!0),g()}else{eventjs.cancel(d);null===b&&(b=a.cloneNode(!0),b.classList.add("moving"),v.appendChild(b));var l=b.style;l.display="none";var k=eventjs.getCoord(d),p=eventjs.getBoundingBox(v),k=document.elementFromPoint(k.x-p.scrollBodyLeft,k.y-p.scrollBodyTop);l.top=h.y+h.offsetTop+
"px";for(l.display="";k;){if(k===v||k===document)return m&&g();if(k.classList.contains("divider")){e=k;break}else k=k.parentNode}k&&q.setClass({target:k,className:"hover",on:!0,list:q.$$("span.divider",k.parentNode)});m&&g()}}}},J=function(a,b){if(b.ctx){var d=b.ctx.canvas,c=d.thumb=d.thumb||p.thumbnailer({crop:"edge",center:!0,background:"#fff",src:d,width:18,height:28});c.blobURL?a.src=c.blobURL:c.toBlobURL(function(b){c.blobURL=b;a.src=b})}else a.src=e.ui.media.clear,a.style.background="#04a";
e.ui.tooltip.add(a,function(){return d?'<img src="'+p.thumbnailer({crop:"edge",center:!0,background:"#fff",src:d,width:50,height:50}).toDataURL()+'">':"out of bounds"},50)},D=function(a){return parseFloat(a.getAttribute("data-layer"))};return k.render()}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.util=q.util||{};q.util.Uploader=function(c){var a=this,b=q.dom,k=q.util;c=c||{};this.debug=!1;this.mode=c.mode||"read";this.action=c.action||"./filesystem.php?upload=true";this.confirm=c.confirm||"text";this.onUpload=c.onupload;this.onProgress=c.onprogress;this.onLoad=c.onload;this.onError=c.onerror;this.onAbort=c.onabort;this.onChangeDefault=this.onChange=c.onchange||e("onchange");this.directory=c.directory||!1;this.maxFiles=c.maxFiles||1;this.maxFileSize=c.maxFileSize||104857600;
"object"===typeof c.fakeInput?(this.fakeInput=c.fakeInput,this.fakeInputParent=c.fakeInputParent||null):"object"===typeof c.fileInput&&(this.fileInput=c.fileInput);this.dropAreaContainer=c.dropArea;this.dropAreaMessage=c.dropAreaMessage||"Drop File(s) Here";this.dropAreaStyle=c.dropAreaStyle||"";this.files={};this.filesByName={};this.filesByPath={};this.formats={};var u=(c.formats||"jpg,jpeg,gif,png").split(",");for(c=0;c<u.length;c++)this.formats[u[c].trim().toLowerCase()]=!0;this.addFileInput=function(d){d=
d||{};d.nodeName&&(d={target:d});var c=d.target,e=d.wrapper,l=d.onchange||a.onChange;if(d=c&&c.parentNode){if("sk-fileWrapper"===d.className)return;a.fileInput=null}if(!c||!c.querySelector(".sk-fileInput")){var k=a.fakeInput=c;if(a.fileInput)a.initFileInput(a.fileInput);else if(k||e){var p=a.fileInput=document.createElement("input");p.style.cssText="position: absolute; top: 0; z-index: 99999; font-size: 1000px; text-align: right; cursor: pointer; right: 0; filter: alpha(opacity: 0); opacity: 0.01;";
p.style.width="100%";p.style.height="100%";p.className="sk-fileInput";var r=function(b,d){a.onChange=a.onChangeDefault||a.onChange;eventjs.remove(document.body,"focus",r)};eventjs.add(p,"mousedown",function(b){a.onChange=l});eventjs.add(p,"click",function(a,b){eventjs.add(document.body,"focus",r)});u.length&&q.client&&q.client.chooseEntry?eventjs.add(p,"click",function(b){eventjs.cancel(b);q.open.chooseEntry(function(b){a.handleFiles([b])})}):(p.setAttribute("type","file"),p.setAttribute("capture",
"camera"));1<a.maxFiles?(p.setAttribute("name","files[]"),p.setAttribute("multiple","multiple")):p.setAttribute("name","file");a.directory&&(p.setAttribute("directory",""),p.setAttribute("mozdirectory",""),p.setAttribute("webkitdirectory",""));if(e)e.appendChild(p);else{d=a.fakeInputParent||k.parentNode;e=document.createElement("span");e.className="sk-fileWrapper";e.style.cssText="position: relative; overflow: hidden; z-index: 0;";k.style.cssText&&(e.style.cssText+=k.style.cssText);m[k.nodeName]&&
(e.style.display="inline-block");var v=!0,c=function(){v&&(v=!1,a.fakeInputParent?a.fakeInputParent.appendChild(e):k.parentNode&&k.parentNode.replaceChild(e,k),e.appendChild(k),e.appendChild(p));var d=b.measure(k),c=d.width,d=d.height;!m[k.nodeName]&&c&&d&&(e.style.width=c+"px",e.style.height=d+"px")};d=b.measure(k);var x=d.height;d.width||x?c():setTimeout(c,250)}eventjs.add(p,"mousedown,mousemove,mouseup",eventjs.stop);a.initFileInput(p)}}};var m={A:!0,SPAN:!0};this.initFileInput=function(b){b&&
(b.onchange=function(d){if(b.files&&b.files.length)a.handleFiles(d.target.files,function(){b.value=""},d);else{var c=b.value,e=c.replace(/\\/g,"/").replace(/.*\//,"");a.handleFiles([{src:c,name:e}],null,d)}})};var d=document.createElement("form");d.id="sk-uploader";this.addDropArea=function(b){b=b||{};b.nodeName&&(b={target:b});var c=c||a.dropAreaContainer;b=!b.target;d.innerHTML=a.dropAreaMessage;a.dropAreaStyle&&(d.style.cssText+=a.dropAreaStyle);d.onclick=function(){e()};d.ondragenter=function(a){eventjs.cancel(a);
return!1};d.ondragover=function(a){eventjs.cancel(a);return!1};d.ondrop=function(b){eventjs.cancel(b);e();var d=b.dataTransfer;d&&(d.items?new l(d.items,function(d){d.length&&a.handleFiles(d,null,b)}):d.files&&(d=d.files,d.length&&a.handleFiles(d,null,b)))};d.ondragleave=function(a){var b=eventjs.getCoord(a);if(0!==b.x||0!==b.y)for(b=document.elementFromPoint(b.x,b.y);b!==document&&b;){if("sk-uploader"===b.id)return;b=b.parentNode}eventjs.cancel(a);setTimeout(e,100)};var e=function(){d.className=
"";e.timeout=setTimeout(function(){d.style.display="none"},250)};c===window&&(c=document.body);b&&c.appendChild(d);c.ondragenter=function(a){(a=a.dataTransfer)&&a.types&&v(a.types,"Files")&&(clearTimeout(e.timeout),d.style.display="block",setTimeout(function(){d.className="visible";d.style.display="table"},10))};c===document.body&&eventjs.add(window,"resize",function(a){window.innerWidth&&window.innerHeight&&(d.style.width=window.innerWidth+"px",d.style.height=window.innerHeight+"px")})};this.handleFiles=
function(b,d,c){if(a.onProgress)a.onProgress({transferPercent:0},c);var e=0,m=function(b,d){d.src&&(d=[d]);for(var c in d){var e=a.files[c],f=d[c];e.src=f.src;e.size=f.size;e.type=f.type;e.name=f.name}p()},l={jpg:!0,jpeg:!0,gif:!0,png:!0},k=function(b){var d=b.hash;if(b.type&&!l[b.type.substr(6).toLowerCase()]){var c=new FileReader;c.onload=function(b){a.files[d].src=b.target.result;a.files[d].isRead=!0;return p()};c.readAsText(b)}else try{var e=URL.createObjectURL(b);a.files[d].src=e;a.files[d].isRead=
!0;return p()}catch(f){try{c=new FileReader,c.onload=function(b){a.files[d].src=b.target.result;a.files[d].isRead=!0;return p()},c.readAsDataURL(b)}catch(g){b.upload=new a.upload({file:b,onupload:m})}}},p=function(a){a?q():setTimeout(q,30)},q=function(){if(a.onProgress)a.onProgress({transferPercent:e/b.length*100>>0},c);var l=b[e];if(++e>a.maxFiles||!l){if(a.onLoad)a.onLoad();if(1===a.maxFiles){if("undefined"===typeof b[0]){if(a.onError)a.onError(a,"UPLOAD_ERR_FORMAT");d&&d();return}var q=x(b[0]);
a.file=a.files[q]||b[0];d&&d();return a.onChange(a,c||{})}for(var r in a.files);d&&d();return a.files[r]?a.onChange(a,c||{}):void 0}r=l.name||l.fileName||"";var s=l.path||r,q=l.type||"",u;q&&(u=q.split("/").pop());a.formats[u]||(u=r.split(".").pop().toLowerCase());var q=x(l),v=a.files[q];if(v&&(a.changedFiles[q]=v,a.changedFilesByName[r]=v,a.changedFilesByPath[s]=v,"upload"===a.mode&&v.isUploaded||"read"===a.mode&&v.isRead))return p(!0);if(!a.formats[u]){if(a.onError)a.onError(a,"UPLOAD_ERR_FORMAT");
return p(!0)}u=l.fileSize||l.size;if(0===u){if(a.onError)a.onError(a,"UPLOAD_ERR_NO_FILE");return p(!0)}if(u&&u>a.maxFileSize){if(a.onError)a.onError(a,"UPLOAD_ERR_FORM_SIZE");return p(!0)}l.hash=q;a.files[q]=l;a.filesByName[r]=l;a.filesByPath[s]=l;a.changedFiles[q]=l;a.changedFilesByName[r]=l;a.changedFilesByPath[s]=l;if("upload"===a.mode)l.upload=new a.upload({file:l,onupload:m});else if("read"===a.mode)k(l);else return p(!0)};a.changedFiles={};a.changedFilesByName={};a.changedFilesByPath={};p()};
var x=function(a){var b={};b.name=a.name||a.fileName;b.src=a.src;b.size=a.size||a.fileSize;b.type=a.type;a=JSON.stringify(b);for(var b=5381,d=0,c=a.length;d<c;d++)var e=a.substr(d,1).charCodeAt(),b=(b<<5)+b+e;return b};this.UPLOAD_ERR={UPLOAD_ERR_INI_SIZE:"The uploaded file exceeds the upload_max_filesize directive",UPLOAD_ERR_FORM_SIZE:"The uploaded file exceeds the MAX_FILE_SIZE directive",UPLOAD_ERR_PARTIAL:"The uploaded file was only partially uploaded",UPLOAD_ERR_NO_FILE:"No file was uploaded",
UPLOAD_ERR_NO_TMP_DIR:"Missing a temporary folder",UPLOAD_ERR_CANT_WRITE:"Failed to write file to disk",UPLOAD_ERR_EXTENSION:"A PHP extension stopped the file upload",UPLOAD_ERR_FORMAT:"The uploaded file was an invalid format",UPLOAD_ERR_XHTTP:""};this.upload=function(b){this.onAbort=b.onabort;this.onUpload=b.onupload;this.onProgress=b.onprogress;this.onError=b.onerror;this.action=b.action||a.action;this.confirm=b.confirm||a.confirm;this.files=0===String(b.file).indexOf("[object")?[b.file]:b.files;
this.bytes=this.timeLapse=this.timeRemaining=this.transferPercent=this.transferTotal=this.transferSpeed=0;window.FormData?w(this,this.onUpload):r(this,this.onUpload)};var p=function(a,b){var d=Object.prototype.toString.call(a);"[object Object]"===d&&a.src&&(d="");switch(d){case "[object Array]":for(var d=0,c=a.length;d<c;d++)b(a[d]);break;case "[object Object]":for(c in a)b(a[c],c);break;default:b(a)}},w=function(b){if("[object Blob]"===String(b.files))var d=b.files;else d=new FormData,p(b.files,
function(a,b){if("undefined"!==typeof a.data)d.append(b||a.name||a.fileName,a.data);else if(a.src&&"data:"===a.src.substr(0,5)){var c=JSON.stringify(a);d.append(b||a.name||a.fileName,c)}else d.append(b||a.hash,a)});var c=new XMLHttpRequest;c.upload.onprogress=function(d){if(d.lengthComputable){var c=d.loaded;b.lengthComputable=!0;b.transferPercent=Math.round(100*c/d.total);b.transferTotal=k.bytesToSize(c);var e=2*(c-b.bytes);0!==e&&(b.bytes=c,b.transferSpeed=k.bytesToSize(e),b.timeRemaining=k.getTimeFormat((d.total-
b.bytes)/e),b.timeLapse=k.getTimeFormat(Date.now()-d.timeStamp));if(b.onProgress)b.onProgress(b,d);else if(a.onProgress)a.onProgress(b,d)}else b.lengthComputable=!1,b.transferSpeed=0,b.transferTotal=0,b.transferPercent=0,b.timeRemaining=0};c.onload=function(d){"[object Blob]"!==String(b.files)&&p(b.files,function(a,b){"undefined"===typeof a.date&&(a.isUploaded=!0)});var c=d.target.responseText;if("json"===b.confirm)try{c=JSON.parse(c)}catch(e){console.log(d.target.responseText)}if(a.UPLOAD_ERR[c]){if(a.onError)a.onError(a,
c);if(b.onError)b.onError(a,c)}else{if(a.onLoad)a.onLoad(b,c);if(b.onUpload)b.onUpload(b,c)}};c.onerror=function(d){if(a.onError)a.onError(a,"UPLOAD_ERR_XHTTP",d);if(b.onError)b.onError(a,"UPLOAD_ERR_XHTTP",d)};c.onabort=function(d){if(a.onAbort)a.onAbort(a,"UPLOAD_ERR_XHTTP",d);if(b.onAbort)b.onAbort(a,"UPLOAD_ERR_XHTTP",d)};c.open("POST",b.action,!0);c.send(d)},r=function(b){var d=document.createElement("form");document.body.appendChild(d);var c=document.createElement("iframe");c.setAttribute("id",
"upload_iframe");c.setAttribute("name","upload_iframe");c.setAttribute("width","0");c.setAttribute("height","0");c.setAttribute("border","0");c.setAttribute("style","width: 0; height: 0; border: none;");var e=function(){try{var e=c.contentDocument.body}catch(m){try{e=c.contentWindow.document.body}catch(l){e=c.document.body}}if(e.innerHTML){p(b.files,function(a){"undefined"===typeof a.date&&(a.isUploaded=!0)});e=e.innerHTML;if("json"===b.confirm)try{e=JSON.parse(e)}catch(k){console.log&&console.log(e)}if(a.UPLOAD_ERR[e]){if(a.onError)a.onError(a,
e);if(b.onError)b.onError(a,e)}else{if(a.onLoad)a.onLoad(a,e);if(b.onUpload)b.onUpload(a,e)}}setTimeout(function(){d.parentNode&&d.parentNode.removeChild(d);a.fileInput.parent&&a.fileInput.parent.appendChild(a.fileInput)},250)};c.addEventListener?c.addEventListener("load",e,!0):c.attachEvent&&c.attachEvent("onload",e);d.appendChild(c);window.frames.upload_iframe.name="upload_iframe";p(b.files,function(b,c){if("undefined"!==typeof b.data){var e=document.createElement("input");e.type="hidden";e.value=
b.data;e.name=c||b.name||b.fileName}else b.src&&"data:image/"===b.src.substr(0,11)?(e=document.createElement("input"),e.type="hidden",e.value=JSON.stringify(b),e.name=c||b.name||b.fileName):"string"===typeof b?(e=document.createElement("input"),e.type="hidden",e.value=b,e.name=c):(e=a.fileInput,e.parent=e.parentNode,e.name=c||b.hash);d.appendChild(e)});d.setAttribute("target","upload_iframe");d.setAttribute("action",b.action);d.setAttribute("method","post");d.setAttribute("enctype","multipart/form-data");
d.setAttribute("encoding","multipart/form-data");d.submit()},v=function(a,b){for(var d=a.length;d--;)if(a[d]===b)return!0;return!1},l=function(a,b,d){d=isFinite(d)?d:Infinity;var c=this;this.files=[];this.pending=0;this.recurse=function(a,b,d){this.pending++;if(!a)return c.runCallback();a.isFile?a.file(function(a){a.path=b+a.name;c.files.push(a);c.runCallback()}):a.isDirectory&&a.createReader().readEntries(function(e){for(var f=0;f<e.length;f++)c.recurse(e[f],b+a.name+"/",d+1);c.runCallback()})};
this.runCallback=function(){--this.pending||b(this.files)};for(d=0;d<a.length;d++)if(a[d].webkitGetAsEntry){var e=a[d].webkitGetAsEntry();this.recurse(e,"",0)}return this};this.dropAreaContainer&&this.addDropArea();(this.fakeInput||this.fileInput)&&this.addFileInput();return this};var e=function(c){return function(){console.warn(c,arguments)}}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.setup.add(function(e){var c=e.feature,a=e.io,b=e.lang,k=e.util,q=["jpg","jpeg","gif","png","svg"];a.zip&&q.push("zip");a.json&&a.zip&&q.push("sketchpad");c.io.pdf&&q.push("pdf");c.io.psd&&q.push("psd");a.blobToABR&&q.push("abr");a.blobToGBR&&q.push("gbr");k.exists("Color.open.GGR")&&q.push("ggr");k.exists("Color.open.GPL")&&q.push("gpl");(e.uploader=new k.Uploader({confirm:"json",action:e.loc.POST,mode:"read",maxFiles:e.client.ios?1:Infinity,formats:q.join(","),dropArea:document.body,
dropAreaMessage:'<div class="sk-uploader-anim"></div>\t\t<div class="sk-uploader-text">Drop files here<br>\t\t\t<div><i>Accepted formats: </i><br>.'+q.join(" .")+"</div></p>      </div>",onchange:function(a,b){if(isFinite(b.pageX)){for(var c=eventjs.elementsFromEvent(b),k=0;k<c.length;k++){var q=c[k];if(q.matches(".sk-dummy-canvas")){e.setDocument(q.getAttribute("data-pid"));break}}c=e.doc;k=c.scene.getPointInCanvas(b);a.addMedia({self:a,pt:{x:k.x-c.x,y:k.y-c.y}})}else a.addMedia({self:a})},onprogress:function(a){e.loader&&
e.loader.create("thread","Uploading...",a.transferPercent)},onerror:function(a,d,c){e.loader&&e.loader.stop("thread");e.ui.log(b.translate("upload-invalid"))}})).addMedia=function(a){var b=e.doc;if(!b.addMedia)return console.warn("doc.addMedia undefined");var q=a.pt||{},p=a.self,u=a.openAsNew;b.config.reset("image");b.scene.deselectAll();var r=[],v=function(){q.x+=c.io.translateX;q.y+=c.io.translateY;c.vector.edit?isFinite(b.selection.idx)&&r.push(b.selection.idx):b.scene.deselectAll();setTimeout(l.next,
50)};a=p.changedFilesByName;if(a["sketch.json"])return e.open.folder({entries:a});var l=new k.Queue({flatten:!1,items:p.changedFiles,oncomplete:function(){1===r.length?e.ui.configureBuild&&e.ui.configureBuild(b.scene.children[r[0]].type,!0):(b.scene.deselectAll(),b.scene.selectByIdx(r,!1),b.render.clean("setup.uploader"))},next:function(a){l=this;var c=0===(a.type||"").indexOf("image/"),g={openAsNew:u,blob:a,x:q.x,y:q.y,onload:v},m=e.vortex;m&&c&&q.x&&q.y?(m.create(a,q,function(){m.destroy(a.src);
b.addMedia(g)}),m.update(a.src,a.name||"adding image")):b.addMedia(g)}})}})})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e,c={id:"loader",bars:12,radius:0,lineWidth:14,lineHeight:40,timeout:0,display:!0};q.ui=q.ui||{};q.ui.Loader=function(k){var u=this;void 0===e&&(e=!!document.createElement("canvas").getContext);if(e){var m=q.ui.Loader.threads;"string"===typeof k&&(k={message:k});"boolean"===typeof k&&(k={display:!1});"undefined"===typeof k&&(k={});k.container=k.container||document.body;if(k.container){for(var d in c)"undefined"===typeof k[d]&&(k[d]=c[d]);var x=function(a){for(var b in m)if(m[b]===
a)return b},p=document.getElementById(k.id);if(p)this.span=p.parentNode.getElementsByTagName("span")[0];else{var w=document.createElement("div");d=document.createElement("span");d.className="message";w.className=c.id;w.style.cssText=a("opacity",400);this.span=d;this.div=w;p=document.createElement("canvas");p.id=k.id;p.style.cssText="opacity: 1; position: absolute; z-index: 10000;";w.appendChild(p);w.appendChild(d);var r=document.createElement("div");r.className="meter";r.style.padding="10px";d=document.createElement("span");
d.style.width="3%";r.appendChild(d);this.meter=d;this.meterContainer=r;this.span.appendChild(r);k.container.appendChild(w)}var v=k.bars,l=k.radius,f=2*(k.lineHeight+20)+2*k.radius;b(k.container);var h=window.devicePixelRatio||1;p.width=f*h;p.height=f*h;var g=0,y=p.getContext("2d");y.globalCompositeOperation="lighter";y.shadowOffsetX=1;y.shadowOffsetY=1;y.shadowBlur=0;y.shadowColor="rgba(0,0,0,0.5)";this.messages={};this.threads=q.ui.Loader.threads;this.create=function(a,b,d){a=m[a]=m[a]||u.add(b);
isFinite(a)&&b&&"string"===typeof(b.message||b)?u.update(a,b.message||b,b.percent||d):isFinite(d)&&u.update(a,null,d)};this.update=function(a,b,d){"object"===typeof a&&(d=a.percent,b=a.message,a=a.id);if(!isFinite(a))for(a in u.messages);if(a=u.messages[a])a.message=b=b||a.message,"number"===typeof d&&(a.span.innerHTML=d+"%"),"..."===b.substr(-3)?(a._message=b.substr(0,b.length-3),a.messageAnimate=[".&nbsp;&nbsp;","..&nbsp;","..."].reverse()):(a._message=b,a.messageAnimate=!1),a.element.innerHTML=
b};this.add=function(b){b||(b={message:""});"string"===typeof b&&(b={message:b});this.span.style.cssText="background: "+(k.background?k.background:"rgba(0,0,0,1)")+";";this.div.style.cssText=a("opacity",400);this.stopPropagation?this.div.style.cssText+="background: rgba(0,0,0,0.25);":(this.div.style.pointerEvents="none",this.div.style.height=0);this.div.style.opacity=1;this.div.style.display="block";k.background&&(this.div.style.background=k.backgrond);var d=(new Date).getTime(),c=Math.abs(d*Math.random()>>
0),e=b.message,f=document.createElement("div");f.style.cssText=a("opacity",500);var g=document.createElement("span");g.style.cssText="float: right; width: 50px;";var h=document.createElement("span");h.innerHTML=e;f.appendChild(h);f.appendChild(g);f.appendChild(document.createElement("br"));d=this.messages[c]={seed:c,container:f,element:h,span:g,message:e,timeout:1E3*(b.timeout||k.timeout),timestamp:d,getProgress:b.getProgress};this.span.appendChild(f);this.span.style.display="block";this.update(d.seed,
e);b.onstart&&setTimeout(b.onstart,150);this.center();this.interval||b.delay||s();clearInterval(this.interval);this.interval=setInterval(s,30);return c};this.remove=function(a){g+=.07;(new Date).getTime();"object"===typeof a&&(a=a.join(":"));a&&(a=":"+a+":");for(var b in this.messages){var d=this.messages[b];if(!a||-1!==a.indexOf(":"+d.seed+":")){var c=x(d.seed);c&&delete m[c];delete this.messages[d.seed];d.container.style.color="#99ff88";z(d);d.getProgress&&(d.span.innerHTML="100%")}}};this.stop=
function(a){"string"===typeof a&&(a=x(a));if(isFinite(a))this.update(a,null,100);else{u.remove();clearInterval(u.interval);delete u.interval;if(k.oncomplete)k.oncomplete();p&&p.style&&(setTimeout(function(){u.div.style.opacity=0},1),setTimeout(function(){u.interval||(u.stopPropagation=!1,w.style.display="none",y.clearRect(0,0,f,f))},400))}};this.center=function(){var a=b(k.container),d=a.width-f,a=(document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop)+(a.height-f)/
2-Math.max(70,u.span.offsetHeight/2)+f;p.style.left=d/2+"px";p.style.top=a-f+"px";p.style.width=f+"px";p.style.height=f+"px";u.span.style.top=a+"px"};d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.styleSheet?d.styleSheet.cssText=".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }":
d.innerHTML=".loader { color: #fff; position: fixed; left: 0; top: 0; width: 100%; height: 100%; z-index: 100000; opacity: 0; display: none; font-size: 1em; }.loader span { overflow: hidden; white-space: nowrap; }.loader span.message { margin: auto; opacity: 1; display: none; border-radius: 10px; padding: 0; width: 300px; text-align: center; position: absolute; z-index: 10000; left: 0; right: 0; }.loader span.message div { border-bottom: 1px solid rgba(255,255,255,0.15); padding: 7px 10px; clear: both; text-align: left; opacity: 1; }.loader span.message span { text-overflow: ellipsis; -o-text-overflow: ellipsis; width: 80%; float: left }.loader span.message div:last-child { border-bottom: none; }";
var z=function(a){setTimeout(function(){a.container.style.opacity=0},1);setTimeout(function(){a.container.parentNode.removeChild(a.container)},250)},s=function(){var a=(new Date).getTime();u.center();for(var b in u.messages){var d=u.messages[b],c=g/.07>>0,e=parseInt(d.span.innerHTML);if(isFinite(e)&&100<=e)u.remove(d.seed);else{if(0===c%5&&d.getProgress){if(d.timeout&&d.timestamp&&a-d.timestamp>d.timeout){u.remove(d.seed);continue}e=d.getProgress();if(100<=e){u.remove(d.seed);continue}d.span.innerHTML=
(e>>0)+"%"}0===c%10&&d.messageAnimate&&(d.element.innerHTML=d._message+d.messageAnimate[c/10%d.messageAnimate.length])}}b||u.stop();if(isFinite(u.percent))u.meterContainer.style.display="",u.meter.style.width=u.percent+"%";else{u.meterContainer.style.display="none";y.save();y.clearRect(0,0,f*h,f*h);y.scale(h,h);y.translate(f/2,f/2);a=360-360/v;for(b=0;b<v;b++){d=b/v*2*Math.PI+g;y.save();y.translate(l*Math.sin(-d),l*Math.cos(-d));y.rotate(d);var d=-k.lineWidth/2,c=k.lineWidth,e=k.lineHeight,m=c/2;
y.beginPath();y.moveTo(d+m,0);y.lineTo(d+c-m,0);y.quadraticCurveTo(d+c,0,d+c,0+m);y.lineTo(d+c,0+e-m);y.quadraticCurveTo(d+c,0+e,d+c-m,0+e);y.lineTo(d+m,0+e);y.quadraticCurveTo(d,0+e,d,0+e-m);y.lineTo(d,0+m);y.quadraticCurveTo(d,0,d+m,0);y.fillStyle="hsla("+b/(v-1)*a+", 100%, 50%, 0.85)";y.fill();y.restore()}y.restore();g+=.07}};if(!1===k.display)return this;k.message&&u.add(k.message);return this}}};q.ui.Loader.threads={};var a=function(a,b){return"\t\t-webkit-transition-property: "+a+";\t\t-webkit-transition-duration: "+
b+"ms;\t\t-moz-transition-property: "+a+";\t\t-moz-transition-duration: "+b+"ms;\t\t-o-transition-property: "+a+";\t\t-o-transition-duration: "+b+"ms;\t\t-ms-transition-property: "+a+";\t\t-ms-transition-duration: "+b+"ms;"},b=function(a){if(window.innerWidth&&window.innerHeight)var b=window.innerWidth,c=window.innerHeight;else"CSS1Compat"===document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(b=document.documentElement.offsetWidth,c=document.documentElement.offsetHeight):
document.body&&document.body.offsetWidth&&(b=document.body.offsetWidth,c=document.body.offsetHeight);a&&(b=a.offsetWidth);return{width:b,height:c}}})(sketch);"undefined"===typeof sketch&&(sketch={});sketch.color=sketch.color||{};
(function(q){q.color.picker=function(a){a=a||{};var d=this,u=q.color.space,p={light:{arrow:"000",interlace:{size:8,color1:"#fff",color2:"#eee"}},dark:{arrow:"#fff",interlace:{size:8,color1:"#fff",color2:"#eee"}}};d.init=function(){q.ui.zIndexGlobal=q.ui.zIndexGlobal||100;d.pixelRatio=1;d.state="colorPicker";d.color=k(a.color||"#000");d.container=a.container||document.body;d.margin=a.margin||10;d.offset=d.margin/2;d.strokeColor=a.strokeColor||"rgba(255,255,255,0.15)";d.recordId=a.recordId;d.feature=
a.feature||{};d.eyeDropper=d.feature.eyeDropper||{};d.theme=p[a.theme||"dark"];var l=d.theme.arrow,f=document.createElement("canvas"),h=f.getContext("2d"),g=16/3;f.width=16;f.height=16;for(var r=0;20>r;r++)h.beginPath(),h.fillStyle=l,h.moveTo(0,4),h.lineTo(4,0),h.lineTo(4,8),h.fill();h.translate(-g,-16);d.arrow=f;l=document.createElement("canvas");l.width=10;l.height=10;f=l.getContext("2d");f.lineWidth=1;f.beginPath();h=l.width/2;g=l.width/2;f.arc(h,g,4.5,0,2*Math.PI,!0);f.strokeStyle="#000";f.stroke();
f.beginPath();f.arc(h,g,3.5,0,2*Math.PI,!0);f.strokeStyle="#FFF";f.stroke();d.circle=l;h=d.theme.interlace;l=h.size;f=h.color1;g=h.color2;h=document.createElement("canvas").getContext("2d");h.canvas.width=2*l;h.canvas.height=2*l;h.fillStyle=f;h.fillRect(0,0,l,l);h.fillStyle=g;h.fillRect(l,0,l,l);h.fillStyle=g;h.fillRect(0,l,l,l);h.fillStyle=f;h.fillRect(l,l,l,l);l=h.createPattern(h.canvas,"repeat");try{l.data=h.canvas.toDataURL()}catch(u){}d.interlace=l;d.onChange=a.onChange||a.onchange;d.onClose=
a.onClose||a.onclose;d.onMouseDown=a.onMouseDown||a.onmousedown;d.onMouseUp=a.onMouseUp||a.onmousedown;l=d.modules=a.modules||{hue:!0,satval:!0,alpha:!0};f=d.config={};l.hue&&(h=l.hue,f.hue={column:0,enable:!a.modules||h.enable||!1,width:isFinite(h.width)?h.width:30,height:isFinite(h.height)?h.height:200});l.satval&&(h=l.satval,f.satval={column:1,enable:!a.modules||h.enable||!1,width:isFinite(h.width)?h.width:200,height:isFinite(h.height)?h.height:200});l.alpha&&(h=l.alpha,f.alpha={column:2,enable:!a.modules||
h.enable||!1,width:isFinite(h.width)?h.width:30,height:isFinite(h.height)?h.height:200});l=d.element=document.createElement("div");l.id=a.id||"ColorPicker";a.className&&(l.className=a.className);a.style&&(l.style.cssText=a.style);a.draggable&&eventjs.proxy.dragElement(l);d.container.appendChild(l);d.feature.hexInput&&c(d);d.feature.closeButton&&b(d);e(d);return d};d.update=function(a,b){b=b||"update";a&&(d.color=k(a));r.alpha.enable||(d.color.A=255);var c=0,e=0,m=-1,p;for(p in v){var q=v[p];!1!==
q.enable&&(c+=q.width+d.margin+d.offset-5,m!==q.row&&(e+=q.height+2*d.margin,m=q.row))}c*=d.pixelRatio;e*=d.pixelRatio;m=d.canvas;p=d.element;if(m.width!==c||m.height!==e)m.width=c,m.height=e,m.style.cssText="left: "+-(d.offset-1)+"px;",p.style.height=e+"px",p.style.width=c+"px";d.render(b,!!a);return d};d.render=function(a,b){var c=v.satval,e=v.hue,m=v.alpha,k=d.canvas,p=d.ctx;p.clearRect(0,0,k.width,k.height);var q=u({H:d.color.H,S:100,V:100},"HSV>RGB>HEX24>W3");u.HEX_RGB("0x"+q);var k=d.offset,
r=v.satval.width,I=v.satval.height,J=d.ctx;J.save();J.fillStyle=d.interlace;J.fillRect(k,d.offset,v.satval.width,v.satval.height);J.globalAlpha=d.color.A/255;J.fillStyle=w(q,"satval");J.fillRect(k,k,r,I);q=J.createLinearGradient(k,k,r+k,0);q.addColorStop(0,w("rgba(255, 255, 255, 1)","satval"));q.addColorStop(1,w("rgba(255, 255, 255, 0)","satval"));J.fillStyle=q;J.fillRect(k,k,r,I);q=J.createLinearGradient(0,k,0,I+k);q.addColorStop(0,"rgba(0, 0, 0, 0)");q.addColorStop(1,"rgba(0, 0, 0, 1)");J.fillStyle=
q;J.fillRect(k,k,r,I);J.strokeStyle=w(d.strokeColor,"satval");J.strokeRect(k+.5,k+.5,r-1,I-1);J.restore();k=d.ctx;r=v.satval.width+d.margin+d.offset;k.fillStyle=d.interlace;k.fillRect(r,d.offset,v.hue.width,v.hue.height);I=k.createLinearGradient(0,0,0,v.hue.height+d.offset);I.addColorStop(0,w("rgba(255, 0, 0, 1)","hue"));I.addColorStop(5/6,w("rgba(255, 255, 0, 1)","hue"));I.addColorStop(4/6,w("rgba(0, 255, 0, 1)","hue"));I.addColorStop(.5,w("rgba(0, 255, 255, 1)","hue"));I.addColorStop(2/6,w("rgba(0, 0, 255, 1)",
"hue"));I.addColorStop(1/6,w("rgba(255, 0, 255, 1)","hue"));I.addColorStop(1,w("rgba(255, 0, 0, 1)","hue"));k.save();k.globalAlpha=d.color.A/255;k.fillStyle=I;k.fillRect(r,d.offset,v.hue.width,v.hue.height);k.strokeStyle=w(d.strokeColor,"hue");k.strokeRect(r+.5,d.offset+.5,v.hue.width-1,v.hue.height-1);k.restore();m.enable&&(k=d.ctx,r=v.satval.width+2*d.margin+v.hue.width+d.offset,k.fillStyle=d.interlace,k.fillRect(r,d.offset,v.alpha.width,v.satval.height),I=u.HSV_RGB({H:d.color.H,S:d.color.S,V:d.color.V}),
J=k.createLinearGradient(0,0,0,v.satval.height),I.A=255,J.addColorStop(0,w(u.RGBA_W3(I),"alpha")),I.A=0,J.addColorStop(1,w(u.RGBA_W3(I),"alpha")),k.fillStyle=J,k.fillRect(r,d.offset,v.alpha.width,v.satval.height),k.strokeStyle=d.strokeColor,k.strokeRect(r+.5,d.offset+.5,v.alpha.width-1,v.satval.height-1));k=u(d.color,"HSVA>RGBA");r=u(k,"RGB>HEX24>W3");d.feature.hexInput&&(d.hexInput.value=r.substr(1),d.hexBox.style.backgroundColor=u(k,"RGBA>W3"));p.save();m.enable&&(p.globalAlpha=m.enable?1:0,m=c.width+
2*d.margin+e.width+m.width+d.offset,r=(255-d.color.A)/255*c.height-2,p.drawImage(d.arrow,m+2,Math.round(r)+d.offset-1));e&&(p.globalAlpha=e.enable?1:0,m=c.width+d.margin+d.offset+e.width,r=(360-d.color.H)/362*c.height-2,r=Math.round(r)+d.offset-1,p.drawImage(d.arrow,m+2,r),p.beginPath(),p.moveTo(m-e.width,r+3.5),p.lineTo(m,r+3.5),p.strokeStyle="rgba(255,255,255,0.5)",p.stroke(),p.beginPath(),p.moveTo(m-e.width,r+4.5),p.lineTo(m,r+4.5),p.strokeStyle="rgba(0,0,0,0.5)",p.stroke());c&&(p.globalAlpha=
c.enable?1:0,m=d.color.S/100*c.width,r=(1-d.color.V/100)*c.height,m-=d.circle.width/2,r-=d.circle.height/2,p.drawImage(d.circle,Math.round(m)+d.offset,Math.round(r)+d.offset));p.restore();d.onChange&&a&&b&&(c=d.toString(k),d.onChange(k,a,c))};var w=function(a,b){if(!0===v[b].enable)return a;a="rgba"===a.substr(0,4)?u(a,"W3>RGBA"):u(a,"W3>HEX32>RGBA");var d=Math.round(.33*a.R+.33*a.G+.33*a.B);return"rgba("+d+","+d+","+d+","+a.A/255*.42+")"};d.toggle=function(a){return"boolean"===typeof a?a?d.open():
d.close():-1===(" "+d.element.className+" ").indexOf(" opened ")?d.open():d.close()};d.open=function(){var b=d.element,b=d.recordId||b.id,c=document.getElementById(b);a.recordWindow&&a.recordWindow&&a.recordWindow({id:b,display:"block"});-1===(" "+c.className+" ").indexOf(" opened ")&&(c.className=(c.className+" opened").trim());c.style.display="block";c.style.zIndex=q.ui.zIndexGlobal++;window.clearTimeout(c.interval);return d};d.close=function(){var b=d.element,b=d.recordId||b.id,c=document.getElementById(b);
a.recordWindow&&a.recordWindow({id:b,display:"none"});c.className=(" "+c.className+" ").replace(" opened "," ").trim();c.interval=setTimeout(function(){c.style.display="none"},250);return d};d.destory=function(){document.body.removeChild(d.element);for(var a in d)delete d[a];return d};d.toString=function(a){a=a||d.color;isFinite(a.H)&&(a=u(a,"HSVA>RGBA"));return 255===a.A?u(a,"RGB>HEX24>W3"):u(a,"RGBA>W3")};d.init();var r=d.modules,v=d.config;d.update();d.toggle("undefined"===typeof a.display);return d};
var e=function(a){var b=a.element,c=a.config,e=document.createElement("canvas"),k=e.getContext("2d");a.canvas=e;a.ctx=k;b.appendChild(e);eventjs.add(e,"drag",function(k,v){eventjs.stop(k);var l="down"===v.state,f="up"===v.state;if(l&&("function"===typeof a.mouseLayerExit&&a.mouseLayerExit(),a.onMouseDown))a.onMouseDown(k);if(f&&a.onMouseUp)a.onMouseUp(k);var h=a.margin/2,g=v.x-h,h=v.y-h,y=u(g,0,e.width),w=u(h,0,e.height);if("hexInput"===v.target.className)l&&eventjs.stop(k),b.style.cursor="text";
else{if(y!==g||w!==h)a.feature.drag?(b.style.cursor="move",l&&eventjs.proxy.drag({position:"move",event:k,target:b,animationFrame:!0,listener:function(c,e){var f=window.innerWidth,g=window.innerHeight,h=e.target.offsetWidth,k=e.target.offsetHeight;e.x+h>f&&(e.x=f-h);e.y+k>g&&(e.y=g-k);0>e.x&&(e.x=0);0>e.y&&(e.y=0);b.style.left=e.x+"px";b.style.top=e.y+"px";"down"===e.state?b.style.zIndex=q.ui.zIndexGlobal++:"up"===e.state&&params.recordWindow&&params.recordWindow({id:a.recordId||b.id,left:e.x/f,top:e.y/
g,display:"block"});eventjs.prevent(c)}})):b.style.cursor="default";else if(y<=c.satval.width){if(!1===c.satval.enable)return;l&&eventjs.stop(k);b.style.cursor="default";l&&eventjs.proxy.drag({position:"relative",event:k,target:e,animationFrame:!0,listener:function(b,d){var e=u(d.x-a.offset,0,c.satval.width),f=u(d.y-a.offset,0,c.satval.height);a.color.S=e/c.satval.width*100;a.color.V=100-f/c.satval.height*100;a.render(d.state,!0);eventjs.prevent(b)}})}else if(y>c.satval.width+a.margin&&y<=c.satval.width+
a.margin+a.offset+c.hue.width){if(!1===c.hue.enable)return;l&&eventjs.stop(k);b.style.cursor="crosshair";l&&eventjs.proxy.drag({position:"relative",event:k,target:e,animationFrame:!0,listener:function(b,d){var e=u(d.y-a.offset,0,c.satval.height);a.color.H=360-360*Math.min(1,e/c.satval.height);a.render(d.state,!0);eventjs.prevent(b)}})}else if(c.alpha&&y>c.satval.width+c.alpha.width+2*a.margin&&y<=c.satval.width+2*a.margin+a.offset+2*c.alpha.width){if(!1===c.alpha.enable)return;l&&eventjs.stop(k);
b.style.cursor="crosshair";l&&eventjs.proxy.drag({position:"relative",event:k,target:e,animationFrame:!0,listener:function(b,d){var e=u(d.y-a.offset,0,c.satval.height);a.color.A=255*(1-Math.min(1,e/c.satval.height));a.render(d.state,!0);eventjs.prevent(b)}})}else b.style.cursor="default";f&&(b.style.cursor="default");return!1}})},c=function(b){var d=b.hexBoxContainer=document.createElement("div");b.interlace.data&&(d.style.backgroundImage="url("+b.interlace.data+")");d.className="hexBox";var c=b.element,
e=b.hexBox=document.createElement("div");d.appendChild(e);c.appendChild(d);b.eyeDropper.target&&a(b);var k=/[^a-f0-9]/gi,r=b.hexInput=document.createElement("input");r.className="hexInput";r.size=6;r.type="text";eventjs.add(r,"mousedown",eventjs.stop);eventjs.add(r,"keydown keyup change",function(a){var d=a.keyCode;eventjs.keyTracker(a);setTimeout(function(){var c=r.value.replace(k,"").substr(0,6),c=q.color.space(c,"W3>HEX24");if("NaN"!==String(c)){if("keydown"===a.type||"keyup"===a.type)if(40===
d)c=Math.max(0,c-(a.shiftKey?10:1)),r.value=q.color.space(c,"HEX24>W3").substr(1);else if(38===d)c=Math.min(16777215,c+(a.shiftKey?10:1)),r.value=q.color.space(c,"HEX24>W3").substr(1);else if(!eventjs.metaKey||86!==d)return;16777215<c&&(c=16777215);0>c&&(c=0);b.update(q.color.space(c,"HEX24>RGB"),"up")}},50);27===d&&b.blur()});c.appendChild(r)},a=function(a){var b=a.element,c=a.modules,e=document.createElement("span");e.className="icon-eyedropper";a.feature.closeButton&&(e.style.marginRight="16px");
b.appendChild(e);var k=a.eyeDropper.target,r=null;a.mouseLayerUpdate=function(b){eventjs.prevent(b);b=eventjs.getCoord(b);var d=eventjs.getBoundingBox(k);b.x+=d.scrollLeft-d.x1;b.y+=d.scrollTop-d.y1;b=a.eyeDropper.canvas.getContext("2d").getImageData(b.x,b.y,1,1);0!==b.data[3]&&(r=q.color.space(b.data,"RGBA>HSVA"),c.alpha||(r.A=255),a.update(r))};a.mouseLayerExit=function(){eventjs.remove(document.body,"mouseup",a.mouseLayerExit);eventjs.remove(k,"mousemove",a.mouseLayerUpdate);r&&a.update(r,"up");
a.hexBoxContainer.className="hexBox";k.style.cursor="default";setTimeout(function(){a.state="colorPicker"},50)};q.ui.tooltip&&q.ui.tooltip.add(e,"eyedropper");eventjs.add(e,"click",function(b){if("eyeDropper"===a.state)return a.mouseLayerExit();r=null;a.state="eyeDropper";a.hexBoxContainer.className="hexBox active";k.style.cursor="crosshair";setTimeout(function(){eventjs.add(document.body,"mouseup",a.mouseLayerExit);eventjs.add(k,"mousemove",a.mouseLayerUpdate)},0)})},b=function(a){var b=a.element,
c=document.createElement("div");c.className="hexClose icon-close";c.innerHTML="x";q.ui.tooltip&&q.ui.tooltip.add(c,"Close Color Picker");eventjs.add(c,"mousedown",eventjs.cancel);eventjs.add(c,"click",a.onClose||function(b){eventjs.cancel(b);a.close()});b.appendChild(c)},k=function(a){"string"===typeof a?a="hsla"===a.substr(0,4)?q.color.space(a,"W3>HSLA>RGBA>HSVA"):"rgba"===a.substr(0,4)?q.color.space(a,"W3>RGBA>HSVA"):"rgb"===a.substr(0,3)?q.color.space(a,"W3>RGB>HSV"):q.color.webcolors[a]?q.color.space(q.color.webcolors[a],
"W3>HEX24>RGB>HSV"):q.color.space(a,"W3>HEX24>RGB>HSV"):"undefined"!==typeof a.R&&(a=q.color.space(a,"RGB>HSV"));"undefined"===typeof a.A&&(a.A=255);return a},u=function(a,b,c){return a<b?b:a>c?c:a}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){q.module=q.module||{};q.module.UIPalette=function(e,c){var a=this,b=e.dom,k=e.feature,q=e.lang,m=e.ui,d=e.util;e.module.Listener(a);a.paintMethod="fill";a.paintType="color";a.visible=!1;a.init=function(b){b=b||{};var c=b.paintMethod||a.paintMethod,e=b.onready;a.paintType=b.paintType||a.paintType;a.paintMethod=c;v();k.palette.colorPicker&&d.exists("sk.color.picker")&&h(b.colorPicker);a.update(a.paintType,!0,!0,e);a.setIndicator()};a.setPane=function(b,d){!1===k.palette[b]&&(k.palette[b]=
!0,k.palette.grid=!0,k.palette.header="",a.init());a.update(b,!1,!1,d);a.on.setPane&&a.on.setPane(b)};a.setPaintMethod=function(b,d){a.paintMethod=b;a.update(e.style[b].type,!1,!1,d);a.setIndicator()};a.toggle=function(d){var c=b.$("#sk-palette");e.windows.isOpen(c)?a.hide():a.show(d)};a.show=function(c){a.visible=!0;c=c||{};var f=c.aside;(c=c.style)&&e.style.apply({paintMethod:a.paintMethod,dna:c,useColorPicker:!0});if(f){var h=c=0;if(f.target){var k=b.measure(f.target);c+=k.x1;h+=k.y1}if(f.position){var m=
b.$("#sk-palette"),k=m.style.display;m.style.display="block";var l=d.array2object(f.position.split(" "));l.bottom&&(h-=m.offsetHeight);l.right&&(c-=m.offsetWidth);m.style.display=k}f.top&&(h+=f.top);f.bottom&&(h-=f.bottom);f.left&&(c+=f.left);f.right&&(c-=f.right);m.style.left=c+"px";m.style.top=h+"px";e.windows.record({id:"sk-palette",x:c,y:h,left:c/window.innerWidth,top:h/window.innerHeight,display:"block"});e.windows.open("#sk-palette",!1)}else e.windows.open("#sk-palette")};a.hide=function(){a.visible=
!1;e.windows.close("#sk-palette")};a.deselect=function(){var a=b.$("#sk-palette .sk-scroller-palette .selected");a&&a.classList.remove("selected")};a.update=function(c,h,q,s){var u=e.perf(),v=e.style[a.paintMethod];c=c||v.type;if(a.paintType!==c||h)if(a.paintType=v.type=c,"undefined"!==typeof p){switch(v.type){case "color":k.palette.colorPicker&&(p.style.display="block");break;case "gradient":case "pattern":p.style.display="none"}if(k.palette.grid){a.queue&&a.queue.cancel();(h=b.$("."+c+"-indicator"))&&
b.setClass(h,"selected",!0,"span");c=v.type;h="color"===c;var x="gradient"===c,J="pattern"===c,D=c+e.style.hashDNA(v[c]);r.style.display="none";b.setClass(r,"color",h);b.setClass(r,"gradient",x);b.setClass(r,"pattern",J);b.setClass(w,"color",h);b.setClass(w,"gradient",x);b.setClass(w,"pattern",J);var B=function(a,d,f,h){e.style[c+"Official"][d]&&(r.style.display="block",b.setClass(a,"official",!0));h===f&&b.setClass(a,"selected",!0)};q&&(w.innerHTML="",r.innerHTML="");var E=e.style[c];if(E){var F,
C,G=k.palette.drag&&!e.client.mobile,L="color"===c&&m.tooltip;a.queue=new d.Queue({items:E,flatten:!0,oncancel:s,oncomplete:function(){k.debug&&console.log("build palette",c,u());a.setIndicator();s&&s()},next:function(a,b,h){a=E[h];b=e.style.hashDNA(a);var k=c+b,p=e.style[c+"Official"][b]?r:w,s=p.querySelector("#"+k);if(s&&!q)return B(s,b,D,k),this.next();var u=d.Canvas(),s=document.createElement("li");s.id=k;s.className=c;s.setAttribute("data-type",c);s.setAttribute("data-dna",a);s.appendChild(u);
p.appendChild(s);F||C||(F=u.offsetWidth,C=u.offsetHeight);e.style.renderSwatch(u,c,a,F,C);B(s,b,D,k);L&&m.tooltip.add(u,a.toUpperCase());G&&eventjs.add(u,"drag",l);eventjs.add(u,"click",f);0!==h%10?this.next():setTimeout(this.next,0)}})}}}};a.rebuild=function(d){d=b.$$("#sk-palette .sk-scroller-palette "+(d?"."+d:"li"));b.remove(d);a.update(null,!0)};a.updateAndRecord=function(b){var d=e.style[a.paintMethod][b];a.setPane(b);a.setDNA(b,d,"up")};var x=function(a,d){for(var c=b.$$("."+a+"-indicator canvas"),
f=0;f<c.length;f++){var h=c[f];e.style.renderSwatch(h,a,d[a],h.offsetWidth,h.offsetHeight)}};a.setIndicator=function(){var d=e.doc,c=a.paintMethod,f=e.style[c]||d.tool.device[c];d.scene&&1===d.selection.length&&(d=d.scene.getOneSelected())&&"clipart"!==d.type&&(c=d&&d[c])&&(f[c.type]=c[c.type]);x("color",f);x("gradient",f);x("pattern",f);c=b.$$(".style-indicator canvas");for(d=0;d<c.length;d++)c[d].style.cssText="color"===f.type?"background: "+f.color:e.style.getGradientCSS(f.gradient,"left top");
c.length&&(c=f.type,f=e.style.hashDNA(f[c]),(f=b.$("#"+c+f))&&b.setClass({target:f,list:f.parentNode.querySelectorAll("li"),className:"selected",on:!0}))};var p,w,r,v=function(){var c=b.$("#sk-palette");if(c){c.innerHTML="";var f=b.create('<div class="sk-header"></div>'),h=k.style.gradient&&"Gradients",l=k.style.pattern&&"Patterns",v=k.style.color&&"Colors";if(!1!==k.palette.header){var x=k.palette.header,I=b.create('<div class="sk-header-content"></div>');I.innerHTML=h&&l||l&&v||v&&h?x||"":x||h||
v||l;f.appendChild(I);k.palette.closeButton&&(h=b.create('<span class="sk-close icon-close"></span>'),eventjs.add({target:h,mousedown:eventjs.cancel,click:function(a,b){eventjs.cancel(a);setTimeout(function(){e.windows.close(b.target.parentNode.parentNode.getAttribute("data-id"))},1)}}),f.appendChild(h));c.appendChild(f)}h=b.create('<div class="sk-palette-content"></div>');k.palette.grid&&(r=b.create('<div class="sk-scroller sk-scroller-official sk-scroller-palette"></div>'),e.ui.scrollable(r),h.appendChild(r),
w=b.create('<div class="sk-scroller sk-scroller-palette"></div>'),e.ui.scrollable(w),h.appendChild(w));p=b.create('<div class="editor"></div>');p.style.display="none";h.appendChild(p);c.appendChild(h);if(k.style.gradient){var J=b.create('<ol class="tabs"></ol>');f.appendChild(J);f=function(b){var c=d.Canvas();c.innerHTML="";c.style.background=m.media.transparent.css;var e=document.createElement("span");e.className=b+"-indicator";e.appendChild(c);J.appendChild(e);eventjs.add(e,"click",function(d){eventjs.prevent(d);
a.updateAndRecord(b)});c=document.createElement("span");c.textContent=q.translate(b);e.appendChild(c)};k.style.color&&f("color");k.style.gradient&&f("gradient");k.style.pattern&&f("pattern")}a.container=c}},l=function(a,d){var c=e.doc;eventjs.cancel(a);"down"===d.state&&(d.clone=b.clone(d.target,"sk-palette-clone"),d.metrics=b.measure(d.target),document.body.appendChild(d.clone));var h=d.x-d.start.x,k=d.y-d.start.y;10<Math.max(Math.abs(h),Math.abs(k))&&c.selection.reset();"up"===d.state?(b.remove(d.clone),
f(a,d),h=eventjs.getCoord(a),document.elementFromPoint(h.x,h.y)===c.contexts.active&&(k=d.target.parentNode,h=k.getAttribute("data-type"),k=k.getAttribute("data-dna"),e.vector.setStyleFromDropPoint(c,a,h,k))):(c=d.clone.style,c.position="absolute",c.left=h+d.metrics.x1+"px",c.top=k+d.metrics.y1+"px",c.cursor="crosshair")},f=function(d,c){eventjs.prevent(d);var f=a.paintMethod,h=c.target.parentNode,l=h.getAttribute("data-type"),p=h.getAttribute("data-dna");a[f]=p;var f="."+l+".selected",q=w.querySelector(f);
q&&b.setClass(q,"selected",!1);(q=r.querySelector(f))&&b.setClass(q,"selected",!1);b.setClass(h,"selected",!0);setTimeout(function(){"pattern"===l?e.style.loadPattern(p,function(b){a.setDNA(l,p,"up")}):"color"===l&&m.colorPicker.update?"none"!==p&&m.colorPicker.update(p,"up"):a.setDNA(l,p,"up");k.debug&&console.log("dna",p)},10)};a.setDNA=a.__setDNA=function(b,d,f){console.log("setDNA");e.style.apply({paintMethod:a.paintMethod,paintType:b,dna:d,useRender:!0,useRecord:f||!0,useColorPicker:"color"!==
b});"up"!==f&&!0!==f||c.saveSettings()};var h=function(d){d=d||{};var f=d.width||206,h=d.height||165,l=d.theme,p=d.onclose;d=d.onchange||function(b,d,c){"up"!==d&&a.deselect();a.setDNA("color",c,d)};var q=b.$("#sk-palette .editor"),r=k.palette.eyeDropper?{canvas:c.contexts.layer0,target:c.contexts.active}:null,u=k.palette.closeButton;"boolean"!==typeof u&&(u=!!p);m.colorPicker=new e.color.picker({recordId:"sk-palette",recordWindow:e.windows.record,onchange:d,onclose:p,theme:l,container:q,feature:{closeButton:!1,
hexInput:k.palette.hexInput,eyeDropper:r},modules:{hue:{column:2,enable:!0,width:30,height:h},satval:{column:1,enable:!0,width:f-40,height:h},alpha:{column:3,enable:!1,width:30,height:h}}});f=document.createElement("div");f.className="clear";m.colorPicker.element.appendChild(f);return m.colorPicker};return a}})(sketch);"undefined"===typeof sketch&&(sketch={});
(function(q){var e=q.dom,c=q.util,a=q.windows=[];a.focused=[];var b=a.idToIndex={};a.add=function(e,k,d,x){q.ui.zIndexGlobal=q.ui.zIndexGlobal||100;var p=e.id;k=document.querySelector(p);if(isFinite(b[p]))return q.feature.debug&&console.warn("element already exists"),a;if(p){if(!k)return q.feature.debug&&console.warn("window does not exist",e),a;"px"===e.format&&(e.x=e.left,e.y=e.top,e.left/=window.innerWidth,e.top/=window.innerHeight)}else{for(var w in e)k=e[w],k.id=w,a.add(k);return a.restore()}x=
e.display;w=(e.position||"top left").split(" ");!0===x&&(x="block");!1===x&&(x="none");e.vAlign=w[0]||"top";e.hAlign=w[1]||"left";e.element=k;k.setAttribute("data-id",p);if(e.autoclose){var r=e.ghost=document.createElement("div");0===p.indexOf("#")?r.id=p+"-ghost":r.className=p+"-ghost";r.style.cssText="width: 100%; height: 100%; position: fixed; top: 0; z-index: 100;";k.parentNode.insertBefore(r,k);eventjs.add(r,"mousemove",function(a){"eyeDropper"===q.ui.colorPicker.state&&q.ui.colorPicker.mouseLayerUpdate(a)});
eventjs.add(r,"mousedown",function(b){eventjs.prevent(b);"eyeDropper"===q.ui.colorPicker.state?q.ui.colorPicker.mouseLayerExit(b):a.close(p)})}a.addWindowEvent(k);b[p]=a.length;a.push(e);c.getItem(p,function(a){a&&(a=JSON.parse(a),"boolean"===typeof x&&x?a.display="block":x&&(a.display=x),"NONE"===e.display&&(a.display="none"),"BLOCK"===e.display&&(a.display="block"),e.autoclose&&(r.style.display=a.display),c.mixin(a,e))});return a};a.setCurrentTab=function(b,c){b&&c&&(e.setClass({className:"selected",
list:"div",target:document.querySelector(b+" "+c)}),a.record({id:b,className:c}))};a.byId=function(c){c=b[c];return isFinite(c)?a[c]:!1};a.record=function(b){var e=a.byId(b.id);if(e){"undefined"!==typeof b.x&&(e.x=b.x);"undefined"!==typeof b.y&&(e.y=b.y);"undefined"!==typeof b.left&&(e.left=b.left);"undefined"!==typeof b.top&&(e.top=b.top);"undefined"!==typeof b.display&&(e.display=b.display);"undefined"!==typeof b.index&&(e.index=b.index);"undefined"!==typeof b.className&&(e.className=b.className);
var d=JSON.stringify(e,c.json.filterCircular);c.setItem(b.id,d);a.focusElement(b.id,e.display)}};a.restore=function(){var b=document.documentElement,c=b.scrollTop,d=b.scrollLeft,x=window.innerWidth,p=window.innerHeight;k.element&&a.setContainer(k.element);for(var b=[],w={},r=0;r<a.length;r++){var v=a[r],l=v.vAlign,f=v.hAlign,h=document.querySelector(v.id);if(h&&h.style){h.style.display="block";var h=e.measure(h),g=k[l||"top"],y=k[f||"left"];v.objectBoundingBox&&(v.x=.5*x-h.width/2,v.y=.5*p-h.height/
2+20);var g=(isFinite(v.top)?v.top*p:v.y)+g,v=(isFinite(v.left)?v.left*x:v.x)+y,g=g+c,v=v+d,y=Math.min(g,p),z=Math.min(v,x);w.BOTTOM=g+h.height-p;w.TOP=y-g;w.RIGHT=v+h.width-x;w.LEFT=z-v;w[l]=Math.max(w[l]||0,w[l.toUpperCase()]);w[f]=Math.max(w[f]||0,w[f.toUpperCase()]);g-=Math.max(0,w.BOTTOM);v-=Math.max(0,w.RIGHT);b.push({top:Math.max(k.y,g),left:Math.max(k.x,v)})}}c=100;for(r=0;r<a.length;r++)v=a[r],v.display&&!0!==v.display||(v.display="block"),(h=document.querySelector(v.id))&&h.style&&(x=b[r],
d="bottom"===v.vAlign?x.top-w.bottom:x.top+w.top,x="right"===v.hAlign?x.left-w.right:x.left+w.left,d=Math.ceil(d),x=Math.ceil(x),h.style.top=d+"px",h.style.left=x+"px",h.style.display=v.display||"block",h.style.zIndex=v.zIndexFixed||v.index||++c,q.ui.zIndexGlobal=Math.max(q.ui.zIndexGlobal,v.index||0),"block"===v.display&&-1===h.className.indexOf("opened")&&h.classList.add("opened"));return a};a.blink=function(b,c){var d=document.querySelector(b);if(d)if(a.isOpen(d)||a.open(b),setTimeout(function(){d.blinking=
!1},250),d.blinking)c&&c(!0);else return d.blinking=!0,d.classList.remove("blink"),d.classList.add("blink-stall"),setTimeout(function(){d.classList.remove("blink-stall");-1===d.className.indexOf("opened")?a.open(b):d.classList.add("blink");c&&c(!0)},0),a};a.open=function(b,c){c=!1!==c;var d=document.querySelector(b);if(d&&-1!==d.className.indexOf("sk-window")){d.classList.add("opened");var e=a.byId(b),k=e.zIndexFixed?e.zIndexFixed:++q.ui.zIndexGlobal;d.style.display="block";d.style.zIndex=k;d.style.opacity=
1;clearTimeout(d.interval);a.record({id:b,display:"block",index:k});e.autoclose&&(e.ghost.style.display="block");c&&setTimeout(a.restore,500);return a}};a.close=function(b){var c=a.byId(b),d=document.querySelector(b);d.classList.remove("opened");d.style.opacity=0;d.interval=setTimeout(function(){d.style.opacity=1;d.style.display="none";a.record({id:b,display:"none"})},250);c.autoclose&&(c.ghost.style.display="none");return a};a.focus=function(b){var c=document.querySelector(b);if(c){var d=a.byId(b),
d=d.zIndexFixed?d.zIndexFixed:++q.ui.zIndexGlobal;c.style.zIndex=d;a.record({id:b,index:d});return a}};a.clearFocus=function(){a.focused=[]};a.focusElement=function(b,c){if("none"!==c){var d=a.focused.slice(-1)[0],e=" "+a.focused.join(" ")+" ";d!==b&&-1===e.indexOf(b)&&a.focused.push(b)}};a.hasFocus=function(){return isFinite(b[a.focused.slice(-1)[0]])};a.closeFocused=function(){var b=a.focused.pop();a.close(b)};a.isOpen=function(a){"string"===typeof a&&(a=document.querySelector(a));if(a)return"none"===
a.style.display?!1:-1!==(" "+a.className+" ").indexOf(" opened ")};a.isClosed=function(b){return!a.isOpen(b)};a.toggle=function(b,c){var d,e=document.querySelector(b);e?(a.isOpen(e)?(a.close(b),d=!1):(a.open(b),a.restore(),d=!0),c&&setTimeout(function(){c(d)},1)):q.feature.debug&&console.warn("missing",arguments)};var k={x:0,y:0,left:0,right:0,top:0,bottom:0,vAlign:"top",hAlign:"left"};a.setClamp=function(b,c,d,e,p){"object"===typeof b&&(b.element&&a.setContainer(b.element),p=b.format,e=b.height,
d=b.width,c=b.y,b=b.x);k.x=b||null;k.y=c||null;k.width=d||null;k.height=e||null;k.format=p};a.setContainer=function(a){var b=e.measure(a);k.element=a;k.metrics=b;k.left=b.x1;k.right=b.x2;k.top=b.y1;k.bottom=b.y2};a.drag=function(b,c){var d=document.documentElement,x=d.scrollTop,p=d.scrollLeft;return eventjs.proxy.drag({event:c,target:b,position:"move",listener:function(d,c){eventjs.cancel(d);var m=e.measure(c.target);c.target.state=c.state;c.width=m.width;c.height=m.height;var m=k.x||0,l=k.y||0,f=
k.width||window.innerWidth,h=k.height||window.innerHeight;c.x+c.width>f&&(c.x=f-c.width);c.x<m&&(c.x=m);c.y+c.height>h&&(c.y=h-c.height);c.y<l&&(c.y=l);c.target.moved=!0;b.style.left=Math.ceil(c.x-0)+"px";b.style.top=Math.ceil(c.y-0)+"px";m=b.getAttribute("data-id");f=a.byId(m);"down"===c.state?(m=f.zIndexFixed?f.zIndexFixed:++q.ui.zIndexGlobal,b.style.zIndex=m):"up"===c.state&&(l="bottom"===f.vAlign?c.y-k.bottom:c.y-k.top-x,f="right"===f.hAlign?c.x-k.right:c.x-k.left-p,a.record({id:m,x:f-0,y:l-0,
left:f/window.innerWidth,top:l/window.innerHeight,index:q.ui.zIndexGlobal}),a.restore())}})};a.write=function(b){a.createWindow(b);(b=document.querySelector("#sketch-help .content"))&&q.ui.scrollable(b);a.restore()};a.createWindow=function(b,c){var d=document.querySelector("#avgrund-"+b);if(d||c){var e="sketch-"+b,k=document.querySelector("#"+e);if(k)a.toggle(e);else{k=document.createElement("div");k.className="sk-window";k.id=e;var w=document.createElement("div");w.className="sk-header";var r=document.createElement("div");
r.className="sk-header-text sk-"+b+"-header";var v=document.createElement("span");v.className="sk-close icon-close";var l=document.createElement("div");l.className="content";eventjs.add(l,"mousedown",eventjs.stop);w.appendChild(r);w.appendChild(v);k.appendChild(w);k.appendChild(l);document.querySelector(".sk-viewport").appendChild(k);a.add({id:"#"+e,left:0,top:0,display:!0});a.record({id:"#"+e,left:.5-k.offsetWidth/window.innerWidth,top:.1,index:++q.ui.zIndexGlobal});a.addWindowEvent(k);a.lazyloader("#avgrund-"+
b+" .lazy");l=k.querySelector(".content");l.innerHTML=c||d&&d.innerHTML;q.ui.scrollable(l);r=k.querySelector(".sk-"+b+"-header");(e=document.getElementById("avgrund-"+b+"-tabs"))?(r.innerHTML="",r.appendChild(e.cloneNode(!0))):(b=q.util.string.ucwords(b),b="About"===b?q.lang.translate("about-version","v"+q.__version):q.lang.translate(b),r.innerHTML="<span>"+b+"</span>");e=Math.min(420,.75*window.innerWidth)+"px";r=Math.min(500,Math.round(.75*window.innerHeight))+"px";k.style.width=e;l.style.width=
"100%";l.style.maxHeight=r;k.querySelector("input")&&q.uploader.initFileInput(k.querySelector("input"));a.restore()}}else if(d=document.querySelector("#sketch-file ."+b)){var k=document.querySelector("#sketch-file"),l=k.querySelectorAll(".data"),r=b.split("-"),e=r[0],r=r[1];r||(b=k.getAttribute("data-"+e)||e+"-computer",r=b.split("-")[1]);k.setAttribute("data-"+e,b);if(d=k.querySelector(".tabs .selected"))d.className=(" "+d.className+" ").replace(" selected ","");k.querySelector(".tab-"+e).className+=
" selected";if(d=k.querySelector(".leftBar .selected.option"))d.className=(" "+d.className+" ").replace(" selected ","");if(r){if(d=k.querySelector(".leftBar .link-"+b))d.className+=" selected";k.className=((" "+k.className+" ").replace(" subcontent ","")+" subcontent").trim()}else k.className=(" "+k.className+" ").replace(" subcontent ","").trim();d=k.querySelectorAll(".leftBar .text");for(w=0;w<d.length;w++)d[w].style.display=r?"none":"inline-block";for(w=0;w<l.length;w++)l[w].style.display="none";
(l=k.querySelector("."+e+" .innerContent"))&&r&&(r=k.querySelector("."+b),r.style.display="block",l.appendChild(r));k.querySelector("."+e).style.display="block";l&&(k.style.minHeight="230px");q.uploader.createFileInput(document.querySelector(".sk-window .file-input"))}};a.addWindowEvent=function(b){if(!b.hasWindowEvent){b.hasWindowEvent=!0;var e;b.getAttribute("data-id");eventjs.add({target:b,contextmenu:function(a){e&&e.remove&&e.remove()},mousedown:function(b){e=a.drag(this,b)},mouseover:function(a){eventjs.stop(a);
q.ui.tooltip&&q.ui.tooltip.update("")}});var d=b.querySelector("span.sk-close");d&&eventjs.add({target:d,mousedown:eventjs.stop,click:function(b,c){eventjs.cancel(b);window.setTimeout(function(){a.close(c.target.parentNode.parentNode.getAttribute("data-id"))},1)}});c.each(b.querySelectorAll(".tree"),function(b){eventjs.add(b,"click",function(b,c){a.setCurrentTab("#sk-open",".start")})})}};a.lazyloader=function(a){a=document.querySelectorAll(a);for(var b=0;b<a.length;b++){var c=a[b];c.src=c.getAttribute("data-src");
c.className=(" "+c.className+" ").replace(" lazy "," ").trim()}}})(sketch);
(function(q){q.ui=q.ui||{};q.ui.scrollers={};q.ui.InfiniteScroll=function(c,a,b){var k=c.feature,q=b.type,m=c.lib[q];if(m&&m.paths){var d=c.ui.scrollers,x=d[q];return x&&x.length===m.paths.length||x&&!k.ui.addToLibrary?(x.show(b),x):d[q]=new e(c,a,b)}};var e=function(c,a,b){var e=this,q=c.dom,m=c.feature,d=c.lang,x=a.render,p=a.toolkit,w=c.util;e.folder=b.folder;e.media=void 0;e.positions=[];e.scroller=void 0;e.scrollTop=0;e.target=b.target;e.type=b.type;e.credits=void 0;e.hide=function(){e.scroller.style.display=
"none"};e.show=function(a){var b=c.lib[e.type];if(b&&b.paths){var d=e.folder=a.folder,f=e.credits;a=e.scroller;var h=e.target;a.style.display="none";a.scrollTop=e.scrollTop;h.appendChild(a);h.appendChild(f);for(var f=0,h=b.paths,l=h.length,m=0;m<l;m++){var p=h[m],r=p.container;if(p.image&&r){var v=!d||"*"===d,w=p.selected===d;"Your Files"===d&&0===b.getSrc(p).indexOf("#")||w||v?(f++,r.style.display="inline-block"):r.style.display="none"}}(b=q.$(".noItemsAdded"))||(b=c.dom.create('<div class="noItemsAdded"></div>'),
b.textContent="No files have been added.",a.appendChild(b));b.style.display=0===f?"block":"none";a.style.display="block";e.scrollTo();e.lazyLoad()}};e.lazyLoad=function(){var a=e.scroller,b=a.scrollTop,c=a.offsetHeight;a.style.display="none";for(var d=e.positions,f=e.folder,h=[],l=e.media.paths,m=l.length,p=0;p<m;p++){var q=l[p],r=!f||"*"===f,u=q.selected===f;("Your Files"===f&&"#"===q.filepath[0]||u||r)&&h.push(q)}f=h.length;for(l=0;l<f;l++)if(m=d[l])p=m[0],p>=b-m[1]&&p<=b+c&&(p=h[l],m=p.image,p=
p.container,m&&p&&(m.src=p.getAttribute("data-thumbnail")));a.style.display="block"};e.calcMetrics=function(a,b,c){b=a.style;b.display="block";b.overflowY="hidden";var d=a.offsetWidth;b.overflowY="scroll";d=2*(d-a.offsetWidth||1);b.overflowY="auto";b=a.offsetWidth-d;c=c.thumbnail;var d=c._height/c._width,e=isFinite(c.rows)?c.rows:5,f=isFinite(c.columns)?c.columns:4,h=isFinite(c.padding)?c.padding:0;b/=f;b=w.mixin(c,{width:Math.round(b),height:Math.round(b*d),padding:h,columns:f,rows:e});a.style.cssText+=
"max-height: "+b.height*b.rows+"px;";return b};var r=function(b,c){b.events&&eventjs.removeEvents(b.events);b.events={};b.events.click=eventjs.add(b,"click",v);if(c){var d=function(b,c){m.vector.edit||a.scene.deselectAll();c.drag=a.addFromDrag({target:c,event:b,src:c.getAttribute("data-src")})};"longpress"===c?b.events.longpress=eventjs.add(b,"longpress",function(a,b){eventjs.stop(a);"start"===b.state&&d(a,b.target)}):b.events.mousedown=eventjs.add(b,"mousedown",function(a,b){eventjs.stop(a);d(a,
this)})}};e.select=function(a){c.dom.setClass({className:"selected",list:e.scroller.querySelectorAll("."+e.type),target:a,on:!0})};var v=function(a,b){var f=c.doc,h=b.target,p=e.type,r=h.getAttribute("data-src"),v=h.getAttribute("data-name"),w=r.split("/"),D=m.placement.mediaClick;e.select(h);var B=document.createElement("span");B.className="loader";h.appendChild(B);setTimeout(function(){l(p,w[w.length-2]);if(h.drag){h.drag.remove();var a=q.$("#sk-dragable");a&&a.parentNode.removeChild(a)}var a="text"===
p,b="stamp"===p;(a=!("select"===f.tool.type&&f.selection.length||a||b))&&f.scene.deselectAll();f.changeMedia({src:r,fontFamily:v,type:p,onerror:function(){c.ui.log(d.translate("loading-error")+" \u201c"+v+"\u201d");B&&h.removeChild(B)},onload:function(){B&&h.removeChild(B);x.dirtyControls=!0}});a&&D&&f.addObject({type:p,src:r})},250)};e.scrollTo=function(a){"undefined"===typeof a?a=e.scroller.querySelector(".selected"):"string"===typeof a&&(a=e.scroller.querySelector(".hash"+w.hash(a)));if(a&&a.nodeName){var b=
a.offsetTop;a.classList.contains("sk-divider")&&(b+=a.offsetHeight);e.scroller.scrollTop=b;e.scrollTop=b}};var l=function(a,b){var d=e.credits;d.innerHTML="";d.style.display="none";var f=c.lib[a].credits;if(f&&f[b]){d.style.display="block";var f=f[b],h=c.dom.create('<a target="_blank" href="'+f.url+'"></a>'),l=document.createElement("span");l.setAttribute("data-title",f.name);l.textContent=f.name;h.appendChild(l);d.appendChild(document.createTextNode("By: "));d.appendChild(h)}},f=function(){console.warn("error",
this)},h=function(){var a="stamp"===e.type||"text"===e.type;w.thumbnailer({background:"none",src:this,canvas:this.canvas,width:this.width,height:this.height,crop:"fit",shadow:a?null:{offsetX:1,offsetY:1,color:"rgba(0,0,0,0.33)"},onload:function(b){if(a){var d=b.className||"";d.indexOf("selected");var e=b.getContext("2d");e.save();e.globalCompositeOperation="source-atop";e.fillStyle=c.feature.ui.sourceAtopColor;e.fillRect(0,0,b.width,b.height);b.setAttribute("data-className",d);e.restore()}}})};(function(b){b=
e.type;var q=c.lib[b];if(q&&q.paths){q.thumbnail=q.thumbnail||{};var u=c.dom.create('<div class="sk-configure-scroller sk-scroller"></div>'),s=c.dom.create('<div class="sk-configure-credits"></div>'),v=e.target;v.appendChild(u);v.appendChild(s);e.scroller=u;e.credits=s;e.media=q;e.thumbnail=e.calcMetrics(u,b,q);e.positions=[];l(b,e.folder);if(s=a.selection.item||a.config[b]){var v=c.detect.useSrc,x=s.type,I=c.lib[s.type];if(v[s.type]){var J=a.tool.type;!s.src&&c.lib[x]&&(s.src=I.getSrc(I.paths[0]));
v[J]&&x!==J&&p.setTool(x);s=s.src||""}else s=s.fontFamily?I.getSrc(I.byName[s.fontFamily])||"":void 0}else s="";var s=s.substr(1),v=("clipart"===b||"image"===b)&&m.placement.mediaDrag,x="",D=e.thumbnail,I=D.width,J=D.height,B=D.padding,D=D.columns,E=a.pixelRatio,F=e.positions;u.style.display="none";for(var C=0,G=0,L=q.paths,K=L.length,R=0;R<K;R++){var N=L[R],V=q.getSrc(N,!0),P=q.getThumbnail(N);if(N.category!==x){var x=N.category||"Your Files",C="hash"+w.hash(x),Q=document.createElement("div");Q.className=
C+" sk-divider";Q.style.height="35px";Q.textContent=d.translate(x);u.appendChild(Q);C=0;G+=35;0!==R&&(G+=J)}else++C===D&&(C=0,G+=J);if(N.image)var Q=N.image,O=N.canvas,T=N.container;else Q=N.image=document.createElement("img"),O=N.canvas=document.createElement("canvas"),T=N.container=document.createElement("span"),O.width=I*E,O.height=J*E,O.style.padding=B+"px",O.style.width=I+"px",O.style.height=J+"px",O.title=N.filename,T.style.width=I+"px",T.style.height=J+"px",T.setAttribute("data-src",V),T.setAttribute("data-thumbnail",
P),T.setAttribute("data-name",N.name),T.setAttribute("data-n",R),T.className=b,T.appendChild(O),Q.canvas=O,Q.onload=h,Q.onerror=f;r(T,v);V&&-1!==V.indexOf(s)&&e.select(T);F.push([G,J]);u.appendChild(T)}u.style.display="block"}})(b);e.show(b);c.ui.scrollable(e.scroller);eventjs.add(e.scroller,"scroll",function(){var a=e.scroller;e.scrollTop=a.scrollTop;clearTimeout(a.timeout);a.timeout=setTimeout(function(){e.lazyLoad()},100)});return e}})(sketch);
